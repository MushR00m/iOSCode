var originJsonParse=JSON.parse;JSON.parse=function(r){try{return originJsonParse(r)}catch(a){tracelog(r),tracelog(a);var t={};throw t.eventParam=r,Statistics.reportEvent("JSONParseError",t),a}};!function(){function e(e,t,n){t!==!1?z.addEventListener(e,J[e],n):z.removeEventListener(e,J[e])}function t(e){var t=w(e.target),i=y(t);if(ionic.tap.requiresNativeClick(i)||G)return!1;var r=ionic.tap.pointerCoord(e);n("click",i,r.x,r.y),h(i)}function n(e,t,n,i){var r=document.createEvent("MouseEvents");r.initMouseEvent(e,!0,!0,window,1,0,0,n,i,!1,!1,!1,!1,0,null),r.isIonicTap=!0,setTimeout(function(){t.dispatchEvent(r)},0)}function i(e){return"submit"==e.target.type&&0===e.detail?null:ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)||!e.isIonicTap&&!ionic.tap.requiresNativeClick(e.target)?(e.stopPropagation(),ionic.tap.isLabelWithTextInput(e.target)||e.preventDefault(),!1):void 0}function r(t){return t.isIonicTap||d(t)?null:q?(t.stopPropagation(),ionic.tap.isTextInput(t.target)&&Y===t.target||/^(select|option)$/i.test(t.target.tagName)||t.preventDefault(),!1):(G=!1,j=ionic.tap.pointerCoord(t),e("mousemove"),void ionic.activator.start(t))}function o(n){return q?(n.stopPropagation(),n.preventDefault(),!1):d(n)||/^(select|option)$/i.test(n.target.tagName)?!1:($(n)||t(n),e("mousemove",!1),ionic.activator.end(),void(G=!1))}function a(t){return $(t)?(e("mousemove",!1),ionic.activator.end(),G=!0,!1):void 0}function s(t){if(!d(t)&&(G=!1,f(),j=ionic.tap.pointerCoord(t),e(X),Q=setTimeout(function(){ionic.activator.start(t)},100),ionic.Platform.isIOS()&&ionic.tap.isLabelWithTextInput(t.target))){var n=y(w(t.target));n!==F&&t.preventDefault()}}function c(e){d(e)||(f(),$(e)||(t(e),/^(select|option)$/i.test(e.target.tagName)&&e.preventDefault()),Y=e.target,u(e))}function l(t){return $(t)?(G=!0,e(X,!1),Q&&(clearTimeout(Q),Q=null),ionic.activator.end(0),!1):void 0}function u(t){e(X,!1),Q&&(clearTimeout(Q),Q=null,ionic.activator.start(t)),ionic.activator.end(),G=!1}function f(){q=!0,clearTimeout(U),U=setTimeout(function(){q=!1},600)}function d(e){return e.isTapHandled?!0:(e.isTapHandled=!0,ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)?(e.preventDefault(),!0):void 0)}function h(e){W=null;var t=!1;"SELECT"==e.tagName?(n("mousedown",e,0,0),e.focus&&e.focus(),t=!0):g()===e?t=!0:/^(input|textarea)$/i.test(e.tagName)||e.isContentEditable?(t=!0,e.focus&&e.focus(),e.value=e.value,q&&(W=e)):p(),t&&(g(e),ionic.trigger("ionic.focusin",{target:e},!0))}function p(){var e=g();e&&(/^(input|textarea|select)$/i.test(e.tagName)||e.isContentEditable)&&e.blur(),g(null)}function v(e){q&&ionic.tap.isTextInput(g())&&ionic.tap.isTextInput(W)&&W!==e.target&&(W.focus(),W=null),ionic.scroll.isScrolling=!1}function m(){g(null)}function g(e){return arguments.length&&(F=e),F||document.activeElement}function $(e){if(!e||1!==e.target.nodeType||!j||0===j.x&&0===j.y)return!1;var t=ionic.tap.pointerCoord(e),n=!(!e.target.classList||!e.target.classList.contains||"function"!=typeof e.target.classList.contains),i=n&&e.target.classList.contains("button")?Z:K;return Math.abs(j.x-t.x)>i||Math.abs(j.y-t.y)>i}function w(e,t){for(var n=e,i=0;6>i&&n;i++){if("LABEL"===n.tagName)return n;n=n.parentElement}return t!==!1?e:void 0}function y(e){if(e&&"LABEL"===e.tagName){if(e.control)return e.control;if(e.querySelector){var t=e.querySelector("input,textarea,select");if(t)return t}}return e}function _(){ionic.keyboard.isInitialized||(N()?(window.addEventListener("native.keyboardshow",ft),window.addEventListener("native.keyboardhide",T)):document.body.addEventListener("focusout",T),document.body.addEventListener("ionic.focusin",ut),document.body.addEventListener("focusin",ut),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",_):document.removeEventListener("touchstart",_),ionic.keyboard.isInitialized=!0)}function b(e){clearTimeout(it),(!ionic.keyboard.isOpen||ionic.keyboard.isClosing)&&(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),ionic.keyboard.height=e.keyboardHeight,st?k(O,!0):k(D,!0)}function S(e){return clearTimeout(it),e.target&&!e.target.readOnly&&ionic.tap.isKeyboardElement(e.target)&&(tt=ionic.DomUtil.getParentWithClass(e.target,lt))?(et=e.target,tt.classList.contains("overflow-scroll")||(document.body.scrollTop=0,tt.scrollTop=0,ionic.requestAnimationFrame(function(){document.body.scrollTop=0,tt.scrollTop=0}),window.navigator.msPointerEnabled?document.addEventListener("MSPointerMove",C,!1):document.addEventListener("touchmove",C,!1)),(!ionic.keyboard.isOpen||ionic.keyboard.isClosing)&&(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),document.addEventListener("keydown",E,!1),void(ionic.keyboard.isOpen||N()?ionic.keyboard.isOpen&&D():k(D,!0))):void(et=null)}function T(){clearTimeout(it),(ionic.keyboard.isOpen||ionic.keyboard.isOpening)&&(ionic.keyboard.isClosing=!0,ionic.keyboard.isOpening=!1),it=setTimeout(function(){ionic.requestAnimationFrame(function(){st?k(function(){O(),A()},!1):k(A,!1)})},50)}function x(){ionic.keyboard.isLandscape=!ionic.keyboard.isLandscape,ionic.Platform.isIOS()&&O(),ionic.Platform.isAndroid()&&(ionic.keyboard.isOpen&&N()?st=!0:k(O,!1))}function E(e){ionic.scroll.isScrolling&&C(e)}function C(e){"TEXTAREA"!==e.target.tagName&&e.preventDefault()}function k(e,t){clearInterval(nt);var n,i=0,r=L(),o=r;return n=ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4?30:ionic.Platform.isAndroid()?10:1,nt=setInterval(function(){o=L(),(!(++i<n)||(M(o)||P(o))&&ionic.keyboard.height)&&(N()||(ionic.keyboard.height=Math.abs(r-window.innerHeight)),ionic.keyboard.isOpen=t,clearInterval(nt),e())},50),n}function A(){clearTimeout(it),ionic.keyboard.isOpen=!1,ionic.keyboard.isClosing=!1,et&&ionic.trigger("resetScrollView",{target:et},!0),ionic.requestAnimationFrame(function(){document.body.classList.remove(ct)}),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerMove",C):document.removeEventListener("touchmove",C),document.removeEventListener("keydown",E),ionic.Platform.isAndroid()&&(N()&&cordova.plugins.Keyboard.close(),et&&et.blur()),et=null}function D(){ionic.keyboard.isOpen=!0,ionic.keyboard.isOpening=!1;var e={keyboardHeight:I(),viewportHeight:rt};if(et){e.target=et;var t=et.getBoundingClientRect();e.elementTop=Math.round(t.top),e.elementBottom=Math.round(t.bottom),e.windowHeight=e.viewportHeight-e.keyboardHeight,e.isElementUnderKeyboard=e.elementBottom>e.windowHeight,ionic.trigger("scrollChildIntoView",e,!0)}return setTimeout(function(){document.body.classList.add(ct)},400),e}function I(){if(ionic.keyboard.height)return ionic.keyboard.height;if(ionic.Platform.isAndroid()){if(ionic.Platform.isFullScreen)return 275;var e=window.innerHeight;return rt>e?rt-e:0}return ionic.Platform.isIOS()?ionic.keyboard.isLandscape?206:ionic.Platform.isWebView()?260:216:275}function M(e){return!!(!ionic.keyboard.isLandscape&&ot&&Math.abs(ot-e)<2)}function P(e){return!!(ionic.keyboard.isLandscape&&at&&Math.abs(at-e)<2)}function O(){st=!1,rt=L(),ionic.keyboard.isLandscape&&!at?at=rt:ionic.keyboard.isLandscape||ot||(ot=rt),et&&ionic.trigger("resetScrollView",{target:et},!0),ionic.keyboard.isOpen&&ionic.tap.isTextInput(et)&&D()}function V(){var e=L();e/window.innerWidth<1&&(ionic.keyboard.isLandscape=!0),rt=e,ionic.keyboard.isLandscape&&!at?at=rt:ionic.keyboard.isLandscape||ot||(ot=rt)}function L(){var e=window.innerHeight;return ionic.Platform.isAndroid()&&ionic.Platform.isFullScreen||!ionic.keyboard.isOpen&&!ionic.keyboard.isOpening||ionic.keyboard.isClosing?e:e+I()}function N(){return!!(window.cordova&&cordova.plugins&&cordova.plugins.Keyboard)}function B(){var e;for(e=0;e<document.head.children.length;e++)if("viewport"==document.head.children[e].name){dt=document.head.children[e];break}if(dt){var t,n=dt.content.toLowerCase().replace(/\s+/g,"").split(",");for(e=0;e<n.length;e++)n[e]&&(t=n[e].split("="),ht[t[0]]=t.length>1?t[1]:"_");R()}}function R(){var e=ht.width,t=ht.height,n=ionic.Platform,i=n.version(),r="device-width",o="device-height",a=ionic.viewport.orientation();delete ht.height,ht.width=r,n.isIPad()?i>7?delete ht.width:n.isWebView()?90==a?ht.height="0":7==i&&(ht.height=o):7>i&&(ht.height="0"):n.isIOS()&&(n.isWebView()?i>7?delete ht.width:7>i?t&&(ht.height="0"):7==i&&(ht.height=o):7>i&&t&&(ht.height="0")),(e!==ht.width||t!==ht.height)&&H()}function H(){var e,t=[];for(e in ht)ht[e]&&t.push(e+("_"==ht[e]?"":"="+ht[e]));dt.content=t.join(", ")}window.ionic=window.ionic||{},window.ionic.views={},window.ionic.version="1.0.1",function(e){e.DelegateService=function(e){function t(){return!0}if(e.indexOf("$getByHandle")>-1)throw new Error("Method '$getByHandle' is implicitly added to each delegate service. Do not list it as a method.");return["$log",function(n){function i(e,t){this._instances=e,this.handle=t}function r(){this._instances=[]}function o(e){return function(){var t,i=this.handle,r=arguments,o=0;return this._instances.forEach(function(n){if((!i||i==n.$$delegateHandle)&&n.$$filterFn(n)){o++;var a=n[e].apply(n,r);1===o&&(t=a)}}),!o&&i?n.warn('Delegate for handle "'+i+'" could not find a corresponding element with delegate-handle="'+i+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+i+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again."):t}}return e.forEach(function(e){i.prototype[e]=o(e)}),r.prototype=i.prototype,r.prototype._registerInstance=function(e,n,i){var r=this._instances;return e.$$delegateHandle=n,e.$$filterFn=i||t,r.push(e),function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}},r.prototype.$getByHandle=function(e){return new i(this._instances,e)},new r}]}}(window.ionic),function(e,t,n){function i(){o=!0;for(var e=0;e<r.length;e++)n.requestAnimationFrame(r[e]);r=[],t.removeEventListener("DOMContentLoaded",i)}var r=[],o="complete"===t.readyState||"interactive"===t.readyState;o||t.addEventListener("DOMContentLoaded",i),e._rAF=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,16)}}();var a=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame;n.DomUtil={requestAnimationFrame:function(t){return e._rAF(t)},cancelAnimationFrame:function(e){a(e)},animationFrameThrottle:function(e){var t,i,r;return function(){t=arguments,r=this,i||(i=!0,n.requestAnimationFrame(function(){e.apply(r,t),i=!1}))}},contains:function(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}},getPositionInParent:function(e){return{left:e.offsetLeft,top:e.offsetTop}},ready:function(e){o?n.requestAnimationFrame(e):r.push(e)},getTextBounds:function(n){if(t.createRange){var i=t.createRange();if(i.selectNodeContents(n),i.getBoundingClientRect){var r=i.getBoundingClientRect();if(r){var o=e.scrollX,a=e.scrollY;return{top:r.top+a,left:r.left+o,right:r.left+o+r.width,bottom:r.top+a+r.height,width:r.width,height:r.height}}}}return null},getChildIndex:function(e,t){if(t)for(var n,i=e.parentNode.children,r=0,o=0,a=i.length;a>r;r++)if(n=i[r],n.nodeName&&n.nodeName.toLowerCase()==t){if(n==e)return o;o++}return Array.prototype.slice.call(e.parentNode.children).indexOf(e)},swapNodes:function(e,t){t.parentNode.insertBefore(e,t)},elementIsDescendant:function(e,t,n){var i=e;do{if(i===t)return!0;i=i.parentNode}while(i&&i!==n);return!1},getParentWithClass:function(e,t,n){for(n=n||10;e.parentNode&&n--;){if(e.parentNode.classList&&e.parentNode.classList.contains(t))return e.parentNode;e=e.parentNode}return null},getParentOrSelfWithClass:function(e,t,n){for(n=n||10;e&&n--;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null},rectContains:function(e,t,n,i,r,o){return n>e||e>r?!1:i>t||t>o?!1:!0},blurAll:function(){return t.activeElement&&t.activeElement!=t.body?(t.activeElement.blur(),t.activeElement):null},cachedAttr:function(e,t,n){if(e=e&&e.length&&e[0]||e,e&&e.setAttribute){var i="$attr-"+t;return arguments.length>2?e[i]!==n&&(e.setAttribute(t,n),e[i]=n):"undefined"==typeof e[i]&&(e[i]=e.getAttribute(t)),e[i]}},cachedStyles:function(e,t){if(e=e&&e.length&&e[0]||e,e&&e.style)for(var n in t)e["$style-"+n]!==t[n]&&(e.style[n]=e["$style-"+n]=t[n])}},n.requestAnimationFrame=n.DomUtil.requestAnimationFrame,n.cancelAnimationFrame=n.DomUtil.cancelAnimationFrame,n.animationFrameThrottle=n.DomUtil.animationFrameThrottle}(window,document,ionic),function(e){e.CustomEvent=function(){if("function"==typeof window.CustomEvent)return CustomEvent;var e=function(e,t){var n;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(i){n=document.createEvent("Event");for(var r in t)n[r]=t[r];n.initEvent(e,t.bubbles,t.cancelable)}return n};return e.prototype=window.Event.prototype,e}(),e.EventController={VIRTUALIZED_EVENTS:["tap","swipe","swiperight","swipeleft","drag","hold","release"],trigger:function(t,n,i,r){var o=new e.CustomEvent(t,{detail:n,bubbles:!!i,cancelable:!!r});n&&n.target&&n.target.dispatchEvent&&n.target.dispatchEvent(o)||window.dispatchEvent(o)},on:function(t,n,i){for(var r=i||window,o=0,a=this.VIRTUALIZED_EVENTS.length;a>o;o++)if(t==this.VIRTUALIZED_EVENTS[o]){var s=new e.Gesture(i);return s.on(t,n),s}r.addEventListener(t,n)},off:function(e,t,n){n.removeEventListener(e,t)},onGesture:function(t,n,i,r){var o=new e.Gesture(i,r);return o.on(t,n),o},offGesture:function(e,t,n){e&&e.off(t,n)},handlePopState:function(){}},e.on=function(){e.EventController.on.apply(e.EventController,arguments)},e.off=function(){e.EventController.off.apply(e.EventController,arguments)},e.trigger=e.EventController.trigger,e.onGesture=function(){return e.EventController.onGesture.apply(e.EventController.onGesture,arguments)},e.offGesture=function(){return e.EventController.offGesture.apply(e.EventController.offGesture,arguments)}}(window.ionic),function(e){function t(){if(!e.Gestures.READY){e.Gestures.event.determineEventTypes();for(var t in e.Gestures.gestures)e.Gestures.gestures.hasOwnProperty(t)&&e.Gestures.detection.register(e.Gestures.gestures[t]);e.Gestures.event.onTouch(e.Gestures.DOCUMENT,e.Gestures.EVENT_MOVE,e.Gestures.detection.detect),e.Gestures.event.onTouch(e.Gestures.DOCUMENT,e.Gestures.EVENT_END,e.Gestures.detection.detect),e.Gestures.READY=!0}}e.Gesture=function(t,n){return new e.Gestures.Instance(t,n||{})},e.Gestures={},e.Gestures.defaults={stop_browser_behavior:"disable-user-behavior"},e.Gestures.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,e.Gestures.HAS_TOUCHEVENTS="ontouchstart"in window,e.Gestures.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,e.Gestures.NO_MOUSEEVENTS=e.Gestures.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(e.Gestures.MOBILE_REGEX),e.Gestures.EVENT_TYPES={},e.Gestures.DIRECTION_DOWN="down",e.Gestures.DIRECTION_LEFT="left",e.Gestures.DIRECTION_UP="up",e.Gestures.DIRECTION_RIGHT="right",e.Gestures.POINTER_MOUSE="mouse",e.Gestures.POINTER_TOUCH="touch",e.Gestures.POINTER_PEN="pen",e.Gestures.EVENT_START="start",e.Gestures.EVENT_MOVE="move",e.Gestures.EVENT_END="end",e.Gestures.DOCUMENT=window.document,e.Gestures.plugins={},e.Gestures.READY=!1,e.Gestures.Instance=function(n,i){var r=this;return null===n?this:(t(),this.element=n,this.enabled=!0,this.options=e.Gestures.utils.extend(e.Gestures.utils.extend({},e.Gestures.defaults),i||{}),this.options.stop_browser_behavior&&e.Gestures.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),e.Gestures.event.onTouch(n,e.Gestures.EVENT_START,function(t){r.enabled&&e.Gestures.detection.startDetect(r,t)}),this)},e.Gestures.Instance.prototype={on:function(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)this.element.addEventListener(n[i],t,!1);return this},off:function(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)this.element.removeEventListener(n[i],t,!1);return this},trigger:function(t,n){var i=e.Gestures.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n;var r=this.element;return e.Gestures.utils.hasParent(n.target,r)&&(r=n.target),r.dispatchEvent(i),this},enable:function(e){return this.enabled=e,this}};var n=null,i=!1,r=!1;e.Gestures.event={bindDom:function(e,t,n){for(var i=t.split(" "),r=0;r<i.length;r++)e.addEventListener(i[r],n,!1)},onTouch:function(t,o,a){var s=this;this.bindDom(t,e.Gestures.EVENT_TYPES[o],function(c){var l=c.type.toLowerCase();if(!l.match(/mouse/)||!r){l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===c.which?i=!0:l.match(/mouse/)&&1!==c.which&&(i=!1),l.match(/touch|pointer/)&&(r=!0);var u=0;i&&(e.Gestures.HAS_POINTEREVENTS&&o!=e.Gestures.EVENT_END?u=e.Gestures.PointerEvent.updatePointer(o,c):l.match(/touch/)?u=c.touches.length:r||(u=l.match(/up/)?0:1),u>0&&o==e.Gestures.EVENT_END?o=e.Gestures.EVENT_MOVE:u||(o=e.Gestures.EVENT_END),(u||null===n)&&(n=c),a.call(e.Gestures.detection,s.collectEventData(t,o,s.getTouchList(n,o),c)),e.Gestures.HAS_POINTEREVENTS&&o==e.Gestures.EVENT_END&&(u=e.Gestures.PointerEvent.updatePointer(o,c))),u||(n=null,i=!1,r=!1,e.Gestures.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=e.Gestures.HAS_POINTEREVENTS?e.Gestures.PointerEvent.getEvents():e.Gestures.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_START]=t[0],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_MOVE]=t[1],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_END]=t[2]},getTouchList:function(t){return e.Gestures.HAS_POINTEREVENTS?e.Gestures.PointerEvent.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,n,i,r){var o=e.Gestures.POINTER_TOUCH;return(r.type.match(/mouse/)||e.Gestures.PointerEvent.matchType(e.Gestures.POINTER_MOUSE,r))&&(o=e.Gestures.POINTER_MOUSE),{center:e.Gestures.utils.getCenter(i),timeStamp:(new Date).getTime(),target:r.target,touches:i,eventType:n,pointerType:o,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return e.Gestures.detection.stopDetect()}}}},e.Gestures.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(t,n){return t==e.Gestures.EVENT_END?this.pointers={}:(n.identifier=n.pointerId,this.pointers[n.pointerId]=n),Object.keys(this.pointers).length},matchType:function(t,n){if(!n.pointerType)return!1;var i={};return i[e.Gestures.POINTER_MOUSE]=n.pointerType==n.MSPOINTER_TYPE_MOUSE||n.pointerType==e.Gestures.POINTER_MOUSE,i[e.Gestures.POINTER_TOUCH]=n.pointerType==n.MSPOINTER_TYPE_TOUCH||n.pointerType==e.Gestures.POINTER_TOUCH,i[e.Gestures.POINTER_PEN]=n.pointerType==n.MSPOINTER_TYPE_PEN||n.pointerType==e.Gestures.POINTER_PEN,i[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},e.Gestures.utils={extend:function(e,t,n){for(var i in t)void 0!==e[i]&&n||(e[i]=t[i]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],i=0,r=e.length;r>i;i++)t.push(e[i].pageX),n.push(e[i].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,i=t.pageX-e.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,n){var i=Math.abs(t.pageX-n.pageX),r=Math.abs(t.pageY-n.pageY);return i>=r?t.pageX-n.pageX>0?e.Gestures.DIRECTION_LEFT:e.Gestures.DIRECTION_RIGHT:t.pageY-n.pageY>0?e.Gestures.DIRECTION_UP:e.Gestures.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(t){return t==e.Gestures.DIRECTION_UP||t==e.Gestures.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){e&&e.classList&&(e.classList.add(t),e.onselectstart=function(){return!1})}},e.Gestures.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,n){this.current||(this.stopped=!1,this.current={inst:t,startEvent:e.Gestures.utils.extend({},n),lastEvent:!1,name:""},this.detect(n))},detect:function(t){if(!this.current||this.stopped)return null;t=this.extendEventData(t);for(var n=this.current.inst.options,i=0,r=this.gestures.length;r>i;i++){var o=this.gestures[i];if(!this.stopped&&n[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==e.Gestures.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t},stopDetect:function(){this.previous=e.Gestures.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var n=this.current.startEvent;if(n&&(t.touches.length!=n.touches.length||t.touches===n.touches)){n.touches=[];for(var i=0,r=t.touches.length;r>i;i++)n.touches.push(e.Gestures.utils.extend({},t.touches[i]))}var o=t.timeStamp-n.timeStamp,a=t.center.pageX-n.center.pageX,s=t.center.pageY-n.center.pageY,c=e.Gestures.utils.getVelocity(o,a,s);return e.Gestures.utils.extend(t,{deltaTime:o,deltaX:a,deltaY:s,velocityX:c.x,velocityY:c.y,distance:e.Gestures.utils.getDistance(n.center,t.center),angle:e.Gestures.utils.getAngle(n.center,t.center),direction:e.Gestures.utils.getDirection(n.center,t.center),scale:e.Gestures.utils.getScale(n.touches,t.touches),rotation:e.Gestures.utils.getRotation(n.touches,t.touches),startEvent:n}),t},register:function(t){var n=t.defaults||{};return void 0===n[t.name]&&(n[t.name]=!0),e.Gestures.utils.extend(e.Gestures.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},e.Gestures.gestures=e.Gestures.gestures||{},e.Gestures.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,n){switch(t.eventType){case e.Gestures.EVENT_START:clearTimeout(this.timer),e.Gestures.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==e.Gestures.detection.current.name&&(e.tap.cancelClick(),n.trigger("hold",t))},n.options.hold_timeout);break;case e.Gestures.EVENT_MOVE:t.distance>n.options.hold_threshold&&clearTimeout(this.timer);break;case e.Gestures.EVENT_END:clearTimeout(this.timer)}}},e.Gestures.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,n){if(t.eventType==e.Gestures.EVENT_END&&"touchcancel"!=t.srcEvent.type){var i=e.Gestures.detection.previous,r=!1;if(t.deltaTime>n.options.tap_max_touchtime||t.distance>n.options.tap_max_distance)return;i&&"tap"==i.name&&t.timeStamp-i.lastEvent.timeStamp<n.options.doubletap_interval&&t.distance<n.options.doubletap_distance&&(n.trigger("doubletap",t),r=!0),(!r||n.options.tap_always)&&(e.Gestures.detection.current.name="tap",n.trigger("tap",t))}}},e.Gestures.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.4},handler:function(t,n){if(t.eventType==e.Gestures.EVENT_END){if(n.options.swipe_max_touches>0&&t.touches.length>n.options.swipe_max_touches)return;(t.velocityX>n.options.swipe_velocity||t.velocityY>n.options.swipe_velocity)&&(n.trigger(this.name,t),n.trigger(this.name+t.direction,t))}}},e.Gestures.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_lock_to_axis:!1,drag_lock_min_distance:25,prevent_default_directions:[]},triggered:!1,handler:function(t,n){if("touchstart"==t.srcEvent.type||"touchend"==t.srcEvent.type?this.preventedFirstMove=!1:this.preventedFirstMove||"touchmove"!=t.srcEvent.type||((0===n.options.prevent_default_directions.length||-1!=n.options.prevent_default_directions.indexOf(t.direction))&&t.srcEvent.preventDefault(),this.preventedFirstMove=!0),e.Gestures.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),void(this.triggered=!1);if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case e.Gestures.EVENT_START:this.triggered=!1;break;case e.Gestures.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&e.Gestures.detection.current.name!=this.name)return;if(e.Gestures.detection.current.name!=this.name&&(e.Gestures.detection.current.name=this.name,n.options.correct_for_drag_min_distance)){var i=Math.abs(n.options.drag_min_distance/t.distance);e.Gestures.detection.current.startEvent.center.pageX+=t.deltaX*i,e.Gestures.detection.current.startEvent.center.pageY+=t.deltaY*i,t=e.Gestures.detection.extendEventData(t)}(e.Gestures.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=e.Gestures.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=e.Gestures.utils.isVertical(r)?t.deltaY<0?e.Gestures.DIRECTION_UP:e.Gestures.DIRECTION_DOWN:t.deltaX<0?e.Gestures.DIRECTION_LEFT:e.Gestures.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&e.Gestures.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!e.Gestures.utils.isVertical(t.direction))&&t.preventDefault();break;case e.Gestures.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},e.Gestures.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(e.Gestures.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case e.Gestures.EVENT_START:this.triggered=!1;break;case e.Gestures.EVENT_MOVE:var i=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(i<n.options.transform_min_scale&&r<n.options.transform_min_rotation)return;e.Gestures.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),r>n.options.transform_min_rotation&&n.trigger("rotate",t),i>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case e.Gestures.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},e.Gestures.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==e.Gestures.POINTER_MOUSE?void t.stopDetect():(n.options.prevent_default&&t.preventDefault(),void(t.eventType==e.Gestures.EVENT_START&&n.trigger(this.name,t)))}},e.Gestures.gestures.Release={name:"release",index:1/0,handler:function(t,n){t.eventType==e.Gestures.EVENT_END&&n.trigger(this.name,t)}}}(window.ionic),function(e,t,n){function i(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function r(){f.isWebView()?t.addEventListener("deviceready",o,!1):o(),a&&e.removeEventListener("load",r,!1)}function o(){f.isReady=!0,f.detect();for(var e=0;e<p.length;e++)p[e]();p=[],n.trigger("platformready",{target:t}),u(function(){t.body.classList.add("platform-ready")})}var a,s="ios",c="android",l="windowsphone",u=n.requestAnimationFrame,f=n.Platform={navigator:e.navigator,isReady:!1,isFullScreen:!1,platforms:null,grade:null,ua:navigator.userAgent,ready:function(e){f.isReady?e():p.push(e)},detect:function(){f._checkPlatforms(),u(function(){for(var e=0;e<f.platforms.length;e++)t.body.classList.add("platform-"+f.platforms[e])})},setGrade:function(e){var n=f.grade;f.grade=e,u(function(){n&&t.body.classList.remove("grade-"+n),t.body.classList.add("grade-"+e)})},device:function(){return e.device||{}},_checkPlatforms:function(){f.platforms=[];var t="a";f.isWebView()?(f.platforms.push("webview"),e.cordova||e.PhoneGap||e.phonegap?f.platforms.push("cordova"):e.forge&&f.platforms.push("trigger")):f.platforms.push("browser"),f.isIPad()&&f.platforms.push("ipad");var n=f.platform();if(n){f.platforms.push(n);var i=f.version();if(i){var r=i.toString();r.indexOf(".")>0?r=r.replace(".","_"):r+="_0",f.platforms.push(n+r.split("_")[0]),f.platforms.push(n+r),f.isAndroid()&&4.4>i?t=4>i?"c":"b":f.isWindowsPhone()&&(t="b")}}f.setGrade(t)},isWebView:function(){return!!(e.cordova||e.PhoneGap||e.phonegap||e.forge)},isIPad:function(){return/iPad/i.test(f.navigator.platform)?!0:/iPad/i.test(f.ua)},isIOS:function(){return f.is(s)},isAndroid:function(){return f.is(c)},isWindowsPhone:function(){return f.is(l)},platform:function(){return null===d&&f.setPlatform(f.device().platform),d},setPlatform:function(e){d="undefined"!=typeof e&&null!==e&&e.length?e.toLowerCase():i("ionicplatform")?i("ionicplatform"):f.ua.indexOf("Android")>0?c:/iPhone|iPad|iPod/.test(f.ua)?s:f.ua.indexOf("Windows Phone")>-1?l:f.navigator.platform&&navigator.platform.toLowerCase().split(" ")[0]||""},version:function(){return null===h&&f.setVersion(f.device().version),h},setVersion:function(e){if("undefined"!=typeof e&&null!==e&&(e=e.split("."),e=parseFloat(e[0]+"."+(e.length>1?e[1]:0)),!isNaN(e)))return void(h=e);h=0;var t=f.platform(),n={android:/Android (\d+).(\d+)?/,ios:/OS (\d+)_(\d+)?/,windowsphone:/Windows Phone (\d+).(\d+)?/};n[t]&&(e=f.ua.match(n[t]),e&&e.length>2&&(h=parseFloat(e[1]+"."+e[2])))},is:function(e){if(e=e.toLowerCase(),f.platforms)for(var t=0;t<f.platforms.length;t++)if(f.platforms[t]===e)return!0;var n=f.platform();return n?n===e.toLowerCase():f.ua.toLowerCase().indexOf(e)>=0},exitApp:function(){f.ready(function(){navigator.app&&navigator.app.exitApp&&navigator.app.exitApp()})},showStatusBar:function(n){f._showStatusBar=n,f.ready(function(){u(function(){f._showStatusBar?(e.StatusBar&&e.StatusBar.show(),t.body.classList.remove("status-bar-hide")):(e.StatusBar&&e.StatusBar.hide(),t.body.classList.add("status-bar-hide"))})})},fullScreen:function(e,i){f.isFullScreen=e!==!1,n.DomUtil.ready(function(){u(function(){f.isFullScreen?t.body.classList.add("fullscreen"):t.body.classList.remove("fullscreen")}),f.showStatusBar(i===!0)})}},d=null,h=null,p=[];"complete"===t.readyState?r():(a=!0,e.addEventListener("load",r,!1))}(this,document,ionic),function(e,t){"use strict";t.CSS={},function(){var n,i=["webkitTransform","transform","-webkit-transform","webkit-transform","-moz-transform","moz-transform","MozTransform","mozTransform","msTransform"];for(n=0;n<i.length;n++)if(void 0!==e.documentElement.style[i[n]]){t.CSS.TRANSFORM=i[n];break}for(i=["webkitTransition","mozTransition","msTransition","transition"],n=0;n<i.length;n++)if(void 0!==e.documentElement.style[i[n]]){t.CSS.TRANSITION=i[n];break}var r=t.CSS.TRANSITION.indexOf("webkit")>-1;t.CSS.TRANSITION_DURATION=(r?"-webkit-":"")+"transition-duration",t.CSS.TRANSITIONEND=(r?"webkitTransitionEnd ":"")+"transitionend"}(),"classList"in e.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(){var n,i=t.className.split(/\s+/);for(n=0;n<arguments.length;n++)e(i,i.indexOf(arguments[n]),arguments[n]);t.className=i.join(" ")}}var t=this;return{add:e(function(e,t,n){~t||e.push(n)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)
},item:function(e){return t.className.split(/\s+/)[e]||null}}}})}(document,ionic);var z,F,q,U,G,j,W,Y,X="touchmove",K=12,Z=50,J={click:i,mousedown:r,mouseup:o,mousemove:a,touchstart:s,touchend:c,touchcancel:u,touchmove:l,pointerdown:s,pointerup:c,pointercancel:u,pointermove:l,MSPointerDown:s,MSPointerUp:c,MSPointerCancel:u,MSPointerMove:l,focusin:v,focusout:m};ionic.tap={register:function(t){return z=t,e("click",!0,!0),e("mouseup"),e("mousedown"),window.navigator.pointerEnabled?(e("pointerdown"),e("pointerup"),e("pointcancel"),X="pointermove"):window.navigator.msPointerEnabled?(e("MSPointerDown"),e("MSPointerUp"),e("MSPointerCancel"),X="MSPointerMove"):(e("touchstart"),e("touchend"),e("touchcancel")),e("focusin"),e("focusout"),function(){for(var t in J)e(t,!1);z=null,F=null,q=!1,G=!1,j=null}},ignoreScrollStart:function(e){return e.defaultPrevented||/^(file|range)$/i.test(e.target.type)||"true"==(e.target.dataset?e.target.dataset.preventScroll:e.target.getAttribute("data-prevent-scroll"))||!!/^(object|embed)$/i.test(e.target.tagName)||ionic.tap.isElementTapDisabled(e.target)},isTextInput:function(e){return!!e&&("TEXTAREA"==e.tagName||"true"===e.contentEditable||"INPUT"==e.tagName&&!/^(radio|checkbox|range|file|submit|reset|color|image|button)$/i.test(e.type))},isDateInput:function(e){return!!e&&"INPUT"==e.tagName&&/^(date|time|datetime-local|month|week)$/i.test(e.type)},isKeyboardElement:function(e){return!ionic.Platform.isIOS()||ionic.Platform.isIPad()?ionic.tap.isTextInput(e)&&!ionic.tap.isDateInput(e):ionic.tap.isTextInput(e)||!!e&&"SELECT"==e.tagName},isLabelWithTextInput:function(e){var t=w(e,!1);return!!t&&ionic.tap.isTextInput(y(t))},containsOrIsTextInput:function(e){return ionic.tap.isTextInput(e)||ionic.tap.isLabelWithTextInput(e)},cloneFocusedInput:function(){},hasCheckedClone:!1,removeClonedInputs:function(e){ionic.tap.hasCheckedClone=!1,ionic.requestAnimationFrame(function(){var t,n=e.querySelectorAll(".cloned-text-input"),i=e.querySelectorAll(".previous-input-focus");for(t=0;t<n.length;t++)n[t].parentElement.removeChild(n[t]);for(t=0;t<i.length;t++)i[t].classList.remove("previous-input-focus"),i[t].style.top="",ionic.keyboard.isOpen&&!ionic.keyboard.isClosing&&i[t].focus()})},requiresNativeClick:function(e){return!e||e.disabled||/^(file|range)$/i.test(e.type)||/^(object|video)$/i.test(e.tagName)||ionic.tap.isLabelContainingFileInput(e)?!0:ionic.tap.isElementTapDisabled(e)},isLabelContainingFileInput:function(e){var t=w(e);if("LABEL"!==t.tagName)return!1;var n=t.querySelector("input[type=file]");return n&&n.disabled===!1?!0:!1},isElementTapDisabled:function(e){if(e&&1===e.nodeType)for(var t=e;t;){if("true"==(t.dataset?t.dataset.tapDisabled:t.getAttribute("data-tap-disabled")))return!0;t=t.parentElement}return!1},setTolerance:function(e,t){K=e,Z=t},cancelClick:function(){G=!0},pointerCoord:function(e){var t={x:0,y:0};if(e){var n=e.touches&&e.touches.length?e.touches:[e],i=e.changedTouches&&e.changedTouches[0]||n[0];i&&(t.x=i.clientX||i.pageX||0,t.y=i.clientY||i.pageY||0)}return t}};var Q=null;ionic.DomUtil.ready(function(){var e="undefined"!=typeof angular?angular:null;(!e||e&&!e.scenario)&&ionic.tap.register(document)}),function(e,t){"use strict";function n(){o={},t.requestAnimationFrame(r)}function i(){for(var e in o)o[e]&&(o[e].classList.add(c),a[e]=o[e]);o={}}function r(){if(t.transition&&t.transition.isActive)return void setTimeout(r,400);for(var e in a)a[e]&&(a[e].classList.remove(c),delete a[e])}var o={},a={},s=0,c="activated";t.activator={start:function(e){var n=t.tap.pointerCoord(e).x;n>0&&30>n||t.requestAnimationFrame(function(){if(!(t.scroll&&t.scroll.isScrolling||t.tap.requiresNativeClick(e.target))){for(var n,r=e.target,a=0;6>a&&(r&&1===r.nodeType);a++){if(n&&r.classList&&r.classList.contains("item")){n=r;break}if("A"==r.tagName||"BUTTON"==r.tagName||r.hasAttribute("ng-click")){n=r;break}if(r.classList.contains("button")){n=r;break}if("ION-CONTENT"==r.tagName||r.classList&&r.classList.contains("pane")||"BODY"==r.tagName)break;r=r.parentElement}n&&(o[s]=n,t.requestAnimationFrame(i),s=s>29?0:s+1)}})},end:function(e){0==e?n():setTimeout(n,200)}}}(document,ionic),function(e){var t=0;e.Utils={arrayMove:function(e,t,n){if(n>=e.length)for(var i=n-e.length;i--+1;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},proxy:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},debounce:function(e,t,n){var i,r,o,a,s;return function(){o=this,r=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?i=setTimeout(c,t-l):(i=null,n||(s=e.apply(o,r)))},l=n&&!i;return i||(i=setTimeout(c,t)),l&&(s=e.apply(o,r)),s}},throttle:function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:Date.now(),a=null,o=e.apply(i,r)};return function(){var l=Date.now();s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,r=arguments,0>=u?(clearTimeout(a),a=null,s=l,o=e.apply(i,r)):a||n.trailing===!1||(a=setTimeout(c,u)),o}},inherit:function(t,n){var i,r=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},e.extend(i,r,n);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i},extend:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++){var i=t[n];if(i)for(var r in i)e[r]=i[r]}return e},nextUid:function(){return"ion"+t++},disconnectScope:function(e){if(e&&e.$root!==e){e.$$disconnected||e.$broadcast("$ionic.disconnectScopeFirst",e);var t=e.$parent;e.$$disconnected=!0,e.$broadcast("$ionic.disconnectScope",e),t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}},reconnectScope:function(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e.$parent;e.$$disconnected=!1,e.$broadcast("$ionic.reconnectScope",e),e.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=e,t.$$childTail=e):t.$$childHead=t.$$childTail=e}},isScopeDisconnected:function(e){for(var t=e;t;){if(t.$$disconnected)return!0;t=t.$parent}return!1}},e.inherit=e.Utils.inherit,e.extend=e.Utils.extend,e.throttle=e.Utils.throttle,e.proxy=e.Utils.proxy,e.debounce=e.Utils.debounce}(window.ionic);var et,tt,nt,it,rt=0,ot=0,at=0,st=!1,ct="keyboard-open",lt="scroll-content",ut=ionic.debounce(S,200,!0),ft=ionic.debounce(b,100,!0);ionic.keyboard={isOpen:!1,isClosing:!1,isOpening:!1,height:0,isLandscape:!1,isInitialized:!1,hide:function(){N()&&cordova.plugins.Keyboard.close(),et&&et.blur()},show:function(){N()&&cordova.plugins.Keyboard.show()},disable:function(){N()?(window.removeEventListener("native.keyboardshow",ft),window.removeEventListener("native.keyboardhide",T)):document.body.removeEventListener("focusout",T),document.body.removeEventListener("ionic.focusin",ut),document.body.removeEventListener("focusin",ut),window.removeEventListener("orientationchange",x),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",_):document.removeEventListener("touchstart",_),ionic.keyboard.isInitialized=!1},enable:function(){_()}},rt=L(),ionic.Platform.ready(function(){V(),window.addEventListener("orientationchange",x),setTimeout(V,999),window.navigator.msPointerEnabled?document.addEventListener("MSPointerDown",_,!1):document.addEventListener("touchstart",_,!1)});var dt,ht={};ionic.viewport={orientation:function(){return window.innerWidth>window.innerHeight?90:0}},ionic.Platform.ready(function(){B(),window.addEventListener("orientationchange",function(){setTimeout(R,1e3)},!1)}),function(e){"use strict";e.views.View=function(){this.initialize.apply(this,arguments)},e.views.View.inherit=e.inherit,e.extend(e.views.View.prototype,{initialize:function(){}})}(window.ionic);var pt={effect:{}};!function(e){var t=Date.now||function(){return+new Date},n=60,i=1e3,r={},o=1;pt.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame,n=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(n=!1),n)return function(e,n){t(e,n)};var i=60,r={},o=0,a=1,s=null,c=+new Date;return function(e){var t=a++;return r[t]=e,o++,null===s&&(s=setInterval(function(){var e=+new Date,t=r;r={},o=0;for(var n in t)t.hasOwnProperty(n)&&(t[n](e),c=e);e-c>2500&&(clearInterval(s),s=null)},1e3/i)),t}}(),stop:function(e){var t=null!=r[e];return t&&(r[e]=null),t},isRunning:function(e){return null!=r[e]},start:function(e,a,s,c,l,u){var f=t(),d=f,h=0,p=0,v=o++;if(u||(u=document.body),v%20===0){var m={};for(var g in r)m[g]=!0;r=m}var $=function(o){var m=o!==!0,g=t();if(!r[v]||a&&!a(v))return r[v]=null,void(s&&s(n-p/((g-f)/i),v,!1));if(m)for(var w=Math.round((g-d)/(i/n))-1,y=0;y<Math.min(w,4);y++)$(!0),p++;c&&(h=(g-f)/c,h>1&&(h=1));var _=l?l(h):h;e(_,g,m)!==!1&&1!==h||!m?m&&(d=g,pt.effect.Animate.requestAnimationFrame($,u)):(r[v]=null,s&&s(n-p/((g-f)/i),v,1===h||null==c))};return r[v]=!0,pt.effect.Animate.requestAnimationFrame($,u),v}}}(this),function(e){var t=function(){},n=function(e){return Math.pow(e-1,3)+1},i=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};e.views.Scroll=e.views.View.inherit({initialize:function(n){var i=this;i.__container=n.el,i.__content=n.el.firstElementChild,setTimeout(function(){i.__container&&i.__content&&(i.__container.scrollTop=0,i.__content.scrollTop=0)}),i.options={scrollingX:!1,scrollbarX:!0,scrollingY:!0,scrollbarY:!0,startX:0,startY:0,wheelDampen:6,minScrollbarSizeX:5,minScrollbarSizeY:5,scrollbarsFade:!0,scrollbarFadeDelay:300,scrollbarResizeFadeDelay:1e3,animating:!0,animationDuration:250,decelVelocityThreshold:4,decelVelocityThresholdPaging:4,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,deceleration:.97,preventDefault:!1,scrollingComplete:t,penetrationDeceleration:.03,penetrationAcceleration:.08,scrollEventInterval:10,freeze:!1,getContentWidth:function(){return Math.max(i.__content.scrollWidth,i.__content.offsetWidth)},getContentHeight:function(){return Math.max(i.__content.scrollHeight,i.__content.offsetHeight+2*i.__content.offsetTop)}};for(var r in n)i.options[r]=n[r];i.hintResize=e.debounce(function(){i.resize()},1e3,!0),i.onScroll=function(){e.scroll.isScrolling?(clearTimeout(i.scrollTimer),i.scrollTimer=setTimeout(i.setScrollStop,80)):setTimeout(i.setScrollStart,50)},i.freeze=function(e){return arguments.length&&(i.options.freeze=e),i.options.freeze},i.setScrollStart=function(){e.scroll.isScrolling=Math.abs(e.scroll.lastTop-i.__scrollTop)>1,clearTimeout(i.scrollTimer),i.scrollTimer=setTimeout(i.setScrollStop,80)},i.setScrollStop=function(){e.scroll.isScrolling=!1,e.scroll.lastTop=i.__scrollTop},i.triggerScrollEvent=e.throttle(function(){i.onScroll(),e.trigger("scroll",{scrollTop:i.__scrollTop,scrollLeft:i.__scrollLeft,target:i.__container})},i.options.scrollEventInterval),i.triggerScrollEndEvent=function(){e.trigger("scrollend",{scrollTop:i.__scrollTop,scrollLeft:i.__scrollLeft,target:i.__container})},i.__scrollLeft=i.options.startX,i.__scrollTop=i.options.startY,i.__callback=i.getRenderFn(),i.__initEventHandlers(),i.__createScrollbars()},run:function(){this.resize(),this.__fadeScrollbars("out",this.options.scrollbarResizeFadeDelay)},__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__transformProperty:null,__perspectiveProperty:null,__indicatorX:null,__indicatorY:null,__scrollbarFadeTimeout:null,__didWaitForSize:null,__sizerTimeout:null,__initEventHandlers:function(){function t(e){return e.touches&&e.touches.length?e.touches:[{pageX:e.pageX,pageY:e.pageY}]}var n,i=this,r=i.__container;if(i.scrollChildIntoView=function(t){var o=r.getBoundingClientRect().bottom;n=r.offsetHeight;var a=i.isShrunkForKeyboard,s=r.parentNode.classList.contains("modal"),c=s&&window.innerWidth>=680;if(!a){if(e.Platform.isIOS()||e.Platform.isFullScreen||c){var l=t.detail.viewportHeight-o,u=Math.max(0,t.detail.keyboardHeight-l);e.requestAnimationFrame(function(){n-=u,r.style.height=n+"px",r.style.overflow="visible",i.resize()})}i.isShrunkForKeyboard=!0}t.detail.isElementUnderKeyboard&&e.requestAnimationFrame(function(){r.scrollTop=0,i.isShrunkForKeyboard&&!a&&(o=r.getBoundingClientRect().bottom);var s=.5*n,c=(t.detail.elementBottom+t.detail.elementTop)/2,l=c-o,u=l+s;u>0&&(e.Platform.isIOS()&&e.tap.cloneFocusedInput(r,i),i.scrollBy(0,u,!0),i.onScroll())}),t.stopPropagation()},i.resetScrollView=function(){i.isShrunkForKeyboard&&(i.isShrunkForKeyboard=!1,r.style.height="",r.style.overflow=""),i.resize()},r.addEventListener("scrollChildIntoView",i.scrollChildIntoView),document.addEventListener("resetScrollView",i.resetScrollView),i.touchStart=function(n){if(i.startCoordinates=e.tap.pointerCoord(n),!e.tap.ignoreScrollStart(n)){if(i.__isDown=!0,e.tap.containsOrIsTextInput(n.target)||"SELECT"===n.target.tagName)return void(i.__hasStarted=!1);i.__isSelectable=!0,i.__enableScrollY=!0,i.__hasStarted=!0,i.doTouchStart(t(n),n.timeStamp),n.preventDefault()}},i.touchMove=function(n){if(!(i.options.freeze||!i.__isDown||!i.__isDown&&n.defaultPrevented||"TEXTAREA"===n.target.tagName&&n.target.parentElement.querySelector(":focus"))){if(!i.__hasStarted&&(e.tap.containsOrIsTextInput(n.target)||"SELECT"===n.target.tagName))return i.__hasStarted=!0,i.doTouchStart(t(n),n.timeStamp),void n.preventDefault();if(i.startCoordinates){var o=e.tap.pointerCoord(n);i.__isSelectable&&e.tap.isTextInput(n.target)&&Math.abs(i.startCoordinates.x-o.x)>20&&(i.__enableScrollY=!1,i.__isSelectable=!0),i.__enableScrollY&&Math.abs(i.startCoordinates.y-o.y)>10&&(i.__isSelectable=!1,e.tap.cloneFocusedInput(r,i))}i.doTouchMove(t(n),n.timeStamp,n.scale),i.__isDown=!0}},i.touchMoveBubble=function(e){i.__isDown&&i.options.preventDefault&&e.preventDefault()},i.touchEnd=function(t){i.__isDown&&(i.doTouchEnd(t,t.timeStamp),i.__isDown=!1,i.__hasStarted=!1,i.__isSelectable=!0,i.__enableScrollY=!0,i.__isDragging||i.__isDecelerating||i.__isAnimating||e.tap.removeClonedInputs(r,i))},i.mouseWheel=e.animationFrameThrottle(function(t){var n=e.DomUtil.getParentOrSelfWithClass(t.target,"ionic-scroll");i.options.freeze||n!==i.__container||(i.hintResize(),i.scrollBy((t.wheelDeltaX||t.deltaX||0)/i.options.wheelDampen,(-t.wheelDeltaY||t.deltaY||0)/i.options.wheelDampen),i.__fadeScrollbars("in"),clearTimeout(i.__wheelHideBarTimeout),i.__wheelHideBarTimeout=setTimeout(function(){i.__fadeScrollbars("out")},100))}),"ontouchstart"in window)r.addEventListener("touchstart",i.touchStart,!1),i.options.preventDefault&&r.addEventListener("touchmove",i.touchMoveBubble,!1),document.addEventListener("touchmove",i.touchMove,!1),document.addEventListener("touchend",i.touchEnd,!1),document.addEventListener("touchcancel",i.touchEnd,!1);else if(window.navigator.pointerEnabled)r.addEventListener("pointerdown",i.touchStart,!1),i.options.preventDefault&&r.addEventListener("pointermove",i.touchMoveBubble,!1),document.addEventListener("pointermove",i.touchMove,!1),document.addEventListener("pointerup",i.touchEnd,!1),document.addEventListener("pointercancel",i.touchEnd,!1),document.addEventListener("wheel",i.mouseWheel,!1);else if(window.navigator.msPointerEnabled)r.addEventListener("MSPointerDown",i.touchStart,!1),i.options.preventDefault&&r.addEventListener("MSPointerMove",i.touchMoveBubble,!1),document.addEventListener("MSPointerMove",i.touchMove,!1),document.addEventListener("MSPointerUp",i.touchEnd,!1),document.addEventListener("MSPointerCancel",i.touchEnd,!1),document.addEventListener("wheel",i.mouseWheel,!1);else{var o=!1;i.mouseDown=function(n){e.tap.ignoreScrollStart(n)||"SELECT"===n.target.tagName||(i.doTouchStart(t(n),n.timeStamp),e.tap.isTextInput(n.target)||n.preventDefault(),o=!0)},i.mouseMove=function(e){i.options.freeze||!o||!o&&e.defaultPrevented||(i.doTouchMove(t(e),e.timeStamp),o=!0)},i.mouseMoveBubble=function(e){o&&i.options.preventDefault&&e.preventDefault()},i.mouseUp=function(e){o&&(i.doTouchEnd(e,e.timeStamp),o=!1)},r.addEventListener("mousedown",i.mouseDown,!1),i.options.preventDefault&&r.addEventListener("mousemove",i.mouseMoveBubble,!1),document.addEventListener("mousemove",i.mouseMove,!1),document.addEventListener("mouseup",i.mouseUp,!1),document.addEventListener("mousewheel",i.mouseWheel,!1),document.addEventListener("wheel",i.mouseWheel,!1)}},__cleanup:function(){var n=this,i=n.__container;i.removeEventListener("touchstart",n.touchStart),i.removeEventListener("touchmove",n.touchMoveBubble),document.removeEventListener("touchmove",n.touchMove),document.removeEventListener("touchend",n.touchEnd),document.removeEventListener("touchcancel",n.touchEnd),i.removeEventListener("pointerdown",n.touchStart),i.removeEventListener("pointermove",n.touchMoveBubble),document.removeEventListener("pointermove",n.touchMove),document.removeEventListener("pointerup",n.touchEnd),document.removeEventListener("pointercancel",n.touchEnd),i.removeEventListener("MSPointerDown",n.touchStart),i.removeEventListener("MSPointerMove",n.touchMoveBubble),document.removeEventListener("MSPointerMove",n.touchMove),document.removeEventListener("MSPointerUp",n.touchEnd),document.removeEventListener("MSPointerCancel",n.touchEnd),i.removeEventListener("mousedown",n.mouseDown),i.removeEventListener("mousemove",n.mouseMoveBubble),document.removeEventListener("mousemove",n.mouseMove),document.removeEventListener("mouseup",n.mouseUp),document.removeEventListener("mousewheel",n.mouseWheel),document.removeEventListener("wheel",n.mouseWheel),i.removeEventListener("scrollChildIntoView",n.scrollChildIntoView),document.removeEventListener("resetScrollView",n.resetScrollView),e.tap.removeClonedInputs(i,n),delete n.__container,delete n.__content,delete n.__indicatorX,delete n.__indicatorY,delete n.options.el,n.__callback=n.scrollChildIntoView=n.resetScrollView=t,n.mouseMove=n.mouseDown=n.mouseUp=n.mouseWheel=n.touchStart=n.touchMove=n.touchEnd=n.touchCancel=t,n.resize=n.scrollTo=n.zoomTo=n.__scrollingComplete=t,i=null},__createScrollbar:function(e){var t=document.createElement("div"),n=document.createElement("div");return n.className="scroll-bar-indicator scroll-bar-fade-out",t.className="h"==e?"scroll-bar scroll-bar-h":"scroll-bar scroll-bar-v",t.appendChild(n),t},__createScrollbars:function(){var e,t,n=this;n.options.scrollingX&&(e={el:n.__createScrollbar("h"),sizeRatio:1},e.indicator=e.el.children[0],n.options.scrollbarX&&n.__container.appendChild(e.el),n.__indicatorX=e),n.options.scrollingY&&(t={el:n.__createScrollbar("v"),sizeRatio:1},t.indicator=t.el.children[0],n.options.scrollbarY&&n.__container.appendChild(t.el),n.__indicatorY=t)},__resizeScrollbars:function(){var t=this;if(t.__indicatorX){var n=Math.max(Math.round(t.__clientWidth*t.__clientWidth/t.__contentWidth),20);n>t.__contentWidth&&(n=0),n!==t.__indicatorX.size&&e.requestAnimationFrame(function(){t.__indicatorX.indicator.style.width=n+"px"}),t.__indicatorX.size=n,t.__indicatorX.minScale=t.options.minScrollbarSizeX/n,t.__indicatorX.maxPos=t.__clientWidth-n,t.__indicatorX.sizeRatio=t.__maxScrollLeft?t.__indicatorX.maxPos/t.__maxScrollLeft:1}if(t.__indicatorY){var i=Math.max(Math.round(t.__clientHeight*t.__clientHeight/t.__contentHeight),20);i>t.__contentHeight&&(i=0),i!==t.__indicatorY.size&&e.requestAnimationFrame(function(){t.__indicatorY&&(t.__indicatorY.indicator.style.height=i+"px")}),t.__indicatorY.size=i,t.__indicatorY.minScale=t.options.minScrollbarSizeY/i,t.__indicatorY.maxPos=t.__clientHeight-i,t.__indicatorY.sizeRatio=t.__maxScrollTop?t.__indicatorY.maxPos/t.__maxScrollTop:1}},__repositionScrollbars:function(){var e,t,n,i,r,o,a=this,s=0,c=4;if(a.__indicatorX){a.__indicatorY&&(s=10),r=Math.round(a.__indicatorX.sizeRatio*a.__scrollLeft)||0,n=a.__scrollLeft-(a.__maxScrollLeft-s),a.__scrollLeft<0?(t=Math.max(a.__indicatorX.minScale,(a.__indicatorX.size-Math.abs(a.__scrollLeft))/a.__indicatorX.size),r=0,a.__indicatorX.indicator.style[a.__transformOriginProperty]="left center"):n>0?(t=Math.max(a.__indicatorX.minScale,(a.__indicatorX.size-n)/a.__indicatorX.size),r=a.__indicatorX.maxPos-s,a.__indicatorX.indicator.style[a.__transformOriginProperty]="right center"):(r=Math.min(a.__maxScrollLeft,Math.max(0,r)),t=1);var l="translate3d("+r+"px, 0, 0) scaleX("+t+")";a.__indicatorX.transformProp!==l&&(a.__indicatorX.indicator.style[a.__transformProperty]=l,a.__indicatorX.transformProp=l)}if(a.__indicatorY){o=Math.round(a.__indicatorY.sizeRatio*a.__scrollTop-c)||0,a.__indicatorX&&(c=10),i=a.__scrollTop-(a.__maxScrollTop-c),a.__scrollTop<0?(e=Math.max(a.__indicatorY.minScale,(a.__indicatorY.size-Math.abs(a.__scrollTop))/a.__indicatorY.size),o=0,"center top"!==a.__indicatorY.originProp&&(a.__indicatorY.indicator.style[a.__transformOriginProperty]="center top",a.__indicatorY.originProp="center top")):i>0?(e=Math.max(a.__indicatorY.minScale,(a.__indicatorY.size-i)/a.__indicatorY.size),o=a.__indicatorY.maxPos-c,"center bottom"!==a.__indicatorY.originProp&&(a.__indicatorY.indicator.style[a.__transformOriginProperty]="center bottom",a.__indicatorY.originProp="center bottom")):(o=Math.min(a.__maxScrollTop,Math.max(0,o)),e=1);var u="translate3d(0,"+o+"px, 0) scaleY("+e+")";a.__indicatorY.transformProp!==u&&(a.__indicatorY.indicator.style[a.__transformProperty]=u,a.__indicatorY.transformProp=u)}},__fadeScrollbars:function(e,t){var n=this;if(n.options.scrollbarsFade){var i="scroll-bar-fade-out";n.options.scrollbarsFade===!0&&(clearTimeout(n.__scrollbarFadeTimeout),"in"==e?(n.__indicatorX&&n.__indicatorX.indicator.classList.remove(i),n.__indicatorY&&n.__indicatorY.indicator.classList.remove(i)):n.__scrollbarFadeTimeout=setTimeout(function(){n.__indicatorX&&n.__indicatorX.indicator.classList.add(i),n.__indicatorY&&n.__indicatorY.indicator.classList.add(i)},t||n.options.scrollbarFadeDelay))}},__scrollingComplete:function(){this.options.scrollingComplete(),e.tap.removeClonedInputs(this.__container,this),this.__fadeScrollbars("out")},resize:function(e){var t=this;t.__container&&t.options&&t.setDimensions(t.__container.clientWidth,t.__container.clientHeight,t.options.getContentWidth(),t.options.getContentHeight(),e)},getRenderFn:function(){var e,t=this,n=t.__content,i=document.documentElement.style;"MozAppearance"in i?e="gecko":"WebkitAppearance"in i?e="webkit":"string"==typeof navigator.cpuClass&&(e="trident");var r,o={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[e],a=document.createElement("div"),s=o+"Perspective",c=o+"Transform",l=o+"TransformOrigin";return t.__perspectiveProperty=c,t.__transformProperty=c,t.__transformOriginProperty=l,a.style[s]!==r?function(e,i,r,o){var a="translate3d("+-e+"px,"+-i+"px,0) scale("+r+")";a!==t.contentTransform&&(n.style[c]=a,t.contentTransform=a),t.__repositionScrollbars(),o||t.triggerScrollEvent()}:a.style[c]!==r?function(e,i,r,o){n.style[c]="translate("+-e+"px,"+-i+"px) scale("+r+")",t.__repositionScrollbars(),o||t.triggerScrollEvent()}:function(e,i,r,o){n.style.marginLeft=e?-e/r+"px":"",n.style.marginTop=i?-i/r+"px":"",n.style.zoom=r||"",t.__repositionScrollbars(),o||t.triggerScrollEvent()}},setDimensions:function(e,t,n,i,r){var o=this;(e||t||n||i)&&(e===+e&&(o.__clientWidth=e),t===+t&&(o.__clientHeight=t),n===+n&&(o.__contentWidth=n),i===+i&&(o.__contentHeight=i),o.__computeScrollMax(),o.__resizeScrollbars(),r||o.scrollTo(o.__scrollLeft,o.__scrollTop,!0,null,!0))},setPosition:function(e,t){this.__clientLeft=e||0,this.__clientTop=t||0},setSnapSize:function(e,t){this.__snapWidth=e,this.__snapHeight=t},activatePullToRefresh:function(t,n){var i=this;i.__refreshHeight=t,i.__refreshActivate=function(){e.requestAnimationFrame(n.activate)},i.__refreshDeactivate=function(){e.requestAnimationFrame(n.deactivate)},i.__refreshStart=function(){e.requestAnimationFrame(n.start)},i.__refreshShow=function(){e.requestAnimationFrame(n.show)},i.__refreshHide=function(){e.requestAnimationFrame(n.hide)},i.__refreshTail=function(){e.requestAnimationFrame(n.tail)},i.__refreshTailTime=100,i.__minSpinTime=600},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);var e=new Date;this.refreshStartTime=e.getTime(),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var e=this,t=new Date,n=0;e.refreshStartTime+e.__minSpinTime>t.getTime()&&(n=e.refreshStartTime+e.__minSpinTime-t.getTime()),setTimeout(function(){e.__refreshTail&&e.__refreshTail(),setTimeout(function(){e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate(),e.__refreshHide&&e.__refreshHide(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0)},e.__refreshTailTime)},n)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(e,t,n,i){var r=this;if(!r.options.zooming)throw new Error("Zooming is not enabled!");r.__isDecelerating&&(pt.effect.Animate.stop(r.__isDecelerating),r.__isDecelerating=!1);var o=r.__zoomLevel;null==n&&(n=r.__clientWidth/2),null==i&&(i=r.__clientHeight/2),e=Math.max(Math.min(e,r.options.maxZoom),r.options.minZoom),r.__computeScrollMax(e);var a=(n+r.__scrollLeft)*e/o-n,s=(i+r.__scrollTop)*e/o-i;a>r.__maxScrollLeft?a=r.__maxScrollLeft:0>a&&(a=0),s>r.__maxScrollTop?s=r.__maxScrollTop:0>s&&(s=0),r.__publish(a,s,e,t)},zoomBy:function(e,t,n,i){this.zoomTo(this.__zoomLevel*e,t,n,i)},scrollTo:function(e,t,n,i,r){var o=this;if(o.__isDecelerating&&(pt.effect.Animate.stop(o.__isDecelerating),o.__isDecelerating=!1),null!=i&&i!==o.__zoomLevel){if(!o.options.zooming)throw new Error("Zooming is not enabled!");e*=i,t*=i,o.__computeScrollMax(i)}else i=o.__zoomLevel;o.options.scrollingX?o.options.paging?e=Math.round(e/o.__clientWidth)*o.__clientWidth:o.options.snapping&&(e=Math.round(e/o.__snapWidth)*o.__snapWidth):e=o.__scrollLeft,o.options.scrollingY?o.options.paging?t=Math.round(t/o.__clientHeight)*o.__clientHeight:o.options.snapping&&(t=Math.round(t/o.__snapHeight)*o.__snapHeight):t=o.__scrollTop,e=Math.max(Math.min(o.__maxScrollLeft,e),0),t=Math.max(Math.min(o.__maxScrollTop,t),0),e===o.__scrollLeft&&t===o.__scrollTop&&(n=!1),o.__publish(e,t,i,n,r)},scrollBy:function(e,t,n){var i=this,r=i.__isAnimating?i.__scheduledLeft:i.__scrollLeft,o=i.__isAnimating?i.__scheduledTop:i.__scrollTop;i.scrollTo(r+(e||0),o+(t||0),n)},doMouseZoom:function(e,t,n,i){var r=e>0?.97:1.03;return this.zoomTo(this.__zoomLevel*r,!1,n-this.__clientLeft,i-this.__clientTop)},doTouchStart:function(e,t){var n=this;n.__decStopped=!(!n.__isDecelerating&&!n.__isAnimating),n.hintResize(),t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now()),n.__interruptedAnimation=!0,n.__isDecelerating&&(pt.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1,n.__interruptedAnimation=!0),n.__isAnimating&&(pt.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1,n.__interruptedAnimation=!0);var i,r,o=1===e.length;o?(i=e[0].pageX,r=e[0].pageY):(i=Math.abs(e[0].pageX+e[1].pageX)/2,r=Math.abs(e[0].pageY+e[1].pageY)/2),n.__initialTouchLeft=i,n.__initialTouchTop=r,n.__initialTouches=e,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=i,n.__lastTouchTop=r,n.__lastTouchMove=t,n.__lastScale=1,n.__enableScrollX=!o&&n.options.scrollingX,n.__enableScrollY=!o&&n.options.scrollingY,n.__isTracking=!0,n.__didDecelerationComplete=!1,n.__isDragging=!o,n.__isSingleTouch=o,n.__positions=[]},doTouchMove:function(e,t,n){t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now());var i=this;if(i.__isTracking){var r,o;2===e.length?(r=Math.abs(e[0].pageX+e[1].pageX)/2,o=Math.abs(e[0].pageY+e[1].pageY)/2,!n&&i.options.zooming&&(n=i.__getScale(i.__initialTouches,e))):(r=e[0].pageX,o=e[0].pageY);var a=i.__positions;if(i.__isDragging){i.__decStopped=!1;var s=r-i.__lastTouchLeft,c=o-i.__lastTouchTop,l=i.__scrollLeft,u=i.__scrollTop,f=i.__zoomLevel;if(null!=n&&i.options.zooming){var d=f;if(f=f/i.__lastScale*n,f=Math.max(Math.min(f,i.options.maxZoom),i.options.minZoom),d!==f){var h=r-i.__clientLeft,p=o-i.__clientTop;l=(h+l)*f/d-h,u=(p+u)*f/d-p,i.__computeScrollMax(f)}}if(i.__enableScrollX){l-=s*i.options.speedMultiplier;var v=i.__maxScrollLeft;(l>v||0>l)&&(i.options.bouncing?l+=s/2*i.options.speedMultiplier:l=l>v?v:0)}if(i.__enableScrollY){u-=c*i.options.speedMultiplier;var m=i.__maxScrollTop;u>m||0>u?i.options.bouncing||i.__refreshHeight&&0>u?(u+=c/2*i.options.speedMultiplier,i.__enableScrollX||null==i.__refreshHeight||(0>u?(i.__refreshHidden=!1,i.__refreshShow()):(i.__refreshHide(),i.__refreshHidden=!0),!i.__refreshActive&&u<=-i.__refreshHeight?(i.__refreshActive=!0,i.__refreshActivate&&i.__refreshActivate()):i.__refreshActive&&u>-i.__refreshHeight&&(i.__refreshActive=!1,i.__refreshDeactivate&&i.__refreshDeactivate()))):u=u>m?m:0:i.__refreshHeight&&!i.__refreshHidden&&(i.__refreshHide(),i.__refreshHidden=!0)}a.length>60&&a.splice(0,30),a.push(l,u,t),i.__publish(l,u,f)}else{var g=i.options.locking?3:0,$=5,w=Math.abs(r-i.__initialTouchLeft),y=Math.abs(o-i.__initialTouchTop);i.__enableScrollX=i.options.scrollingX&&w>=g,i.__enableScrollY=i.options.scrollingY&&y>=g,a.push(i.__scrollLeft,i.__scrollTop,t),i.__isDragging=(i.__enableScrollX||i.__enableScrollY)&&(w>=$||y>=$),i.__isDragging&&(i.__interruptedAnimation=!1,i.__fadeScrollbars("in"))}i.__lastTouchLeft=r,i.__lastTouchTop=o,i.__lastTouchMove=t,i.__lastScale=n}},doTouchEnd:function(t,n){n instanceof Date&&(n=n.valueOf()),"number"!=typeof n&&(n=Date.now());var i=this;if(i.__isTracking){if(i.__isTracking=!1,i.__isDragging)if(i.__isDragging=!1,i.__isSingleTouch&&i.options.animating&&n-i.__lastTouchMove<=100){for(var r=i.__positions,o=r.length-1,a=o,s=o;s>0&&r[s]>i.__lastTouchMove-100;s-=3)a=s;if(a!==o){var c=r[o]-r[a],l=i.__scrollLeft-r[a-2],u=i.__scrollTop-r[a-1];i.__decelerationVelocityX=l/c*(1e3/60),i.__decelerationVelocityY=u/c*(1e3/60);var f=i.options.paging||i.options.snapping?i.options.decelVelocityThresholdPaging:i.options.decelVelocityThreshold;(Math.abs(i.__decelerationVelocityX)>f||Math.abs(i.__decelerationVelocityY)>f)&&(i.__refreshActive||i.__startDeceleration(n))}else i.__scrollingComplete()}else n-i.__lastTouchMove>100&&i.__scrollingComplete();else i.__decStopped&&(t.isTapHandled=!0,i.__decStopped=!1);if(!i.__isDecelerating)if(i.__refreshActive&&i.__refreshStart){i.__publish(i.__scrollLeft,-i.__refreshHeight,i.__zoomLevel,!0);var d=new Date;i.refreshStartTime=d.getTime(),i.__refreshStart&&i.__refreshStart(),e.Platform.isAndroid()||i.__startDeceleration()}else(i.__interruptedAnimation||i.__isDragging)&&i.__scrollingComplete(),i.scrollTo(i.__scrollLeft,i.__scrollTop,!0,i.__zoomLevel),i.__refreshActive&&(i.__refreshActive=!1,i.__refreshDeactivate&&i.__refreshDeactivate());i.__positions.length=0}},__publish:function(e,t,r,o,a){var s=this,c=s.__isAnimating;if(c&&(pt.effect.Animate.stop(c),s.__isAnimating=!1),o&&s.options.animating){s.__scheduledLeft=e,s.__scheduledTop=t,s.__scheduledZoom=r;var l=s.__scrollLeft,u=s.__scrollTop,f=s.__zoomLevel,d=e-l,h=t-u,p=r-f,v=function(e,t,n){n&&(s.__scrollLeft=l+d*e,s.__scrollTop=u+h*e,s.__zoomLevel=f+p*e,s.__callback&&s.__callback(s.__scrollLeft,s.__scrollTop,s.__zoomLevel,a))},m=function(e){return s.__isAnimating===e
},g=function(e,t,n){t===s.__isAnimating&&(s.__isAnimating=!1),(s.__didDecelerationComplete||n)&&s.__scrollingComplete(),s.options.zooming&&s.__computeScrollMax()};s.__isAnimating=pt.effect.Animate.start(v,m,g,s.options.animationDuration,c?n:i)}else s.__scheduledLeft=s.__scrollLeft=e,s.__scheduledTop=s.__scrollTop=t,s.__scheduledZoom=s.__zoomLevel=r,s.__callback&&s.__callback(e,t,r,a),s.options.zooming&&s.__computeScrollMax()},__computeScrollMax:function(e){var t=this;null==e&&(e=t.__zoomLevel),t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0),t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0),t.__didWaitForSize||t.__maxScrollLeft||t.__maxScrollTop||(t.__didWaitForSize=!0,t.__waitForSize())},__waitForSize:function(){var e=this;clearTimeout(e.__sizerTimeout);var t=function(){e.resize(!0)};t(),e.__sizerTimeout=setTimeout(t,500)},__startDeceleration:function(){var e=this;if(e.options.paging){var t=Math.max(Math.min(e.__scrollLeft,e.__maxScrollLeft),0),n=Math.max(Math.min(e.__scrollTop,e.__maxScrollTop),0),i=e.__clientWidth,r=e.__clientHeight;e.__minDecelerationScrollLeft=Math.floor(t/i)*i,e.__minDecelerationScrollTop=Math.floor(n/r)*r,e.__maxDecelerationScrollLeft=Math.ceil(t/i)*i,e.__maxDecelerationScrollTop=Math.ceil(n/r)*r}else e.__minDecelerationScrollLeft=0,e.__minDecelerationScrollTop=0,e.__maxDecelerationScrollLeft=e.__maxScrollLeft,e.__maxDecelerationScrollTop=e.__maxScrollTop,e.__refreshActive&&(e.__minDecelerationScrollTop=-1*e.__refreshHeight);var o=function(t,n,i){e.__stepThroughDeceleration(i)};e.__minVelocityToKeepDecelerating=e.options.snapping?4:.1;var a=function(){var t=Math.abs(e.__decelerationVelocityX)>=e.__minVelocityToKeepDecelerating||Math.abs(e.__decelerationVelocityY)>=e.__minVelocityToKeepDecelerating;return t||(e.__didDecelerationComplete=!0,e.options.bouncing&&!e.__refreshActive&&e.scrollTo(Math.min(Math.max(e.__scrollLeft,0),e.__maxScrollLeft),Math.min(Math.max(e.__scrollTop,0),e.__maxScrollTop),e.__refreshActive)),t},s=function(){e.__isDecelerating=!1,e.__didDecelerationComplete&&e.__scrollingComplete(),e.options.paging&&e.scrollTo(e.__scrollLeft,e.__scrollTop,e.options.snapping)};e.__isDecelerating=pt.effect.Animate.start(o,a,s)},__stepThroughDeceleration:function(e){var t=this,n=t.__scrollLeft+t.__decelerationVelocityX,i=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var r=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);r!==n&&(n=r,t.__decelerationVelocityX=0);var o=Math.max(Math.min(t.__maxDecelerationScrollTop,i),t.__minDecelerationScrollTop);o!==i&&(i=o,t.__decelerationVelocityY=0)}if(e?t.__publish(n,i,t.__zoomLevel):(t.__scrollLeft=n,t.__scrollTop=i),!t.options.paging){var a=t.options.deceleration;t.__decelerationVelocityX*=a,t.__decelerationVelocityY*=a}if(t.options.bouncing){var s=0,c=0,l=t.options.penetrationDeceleration,u=t.options.penetrationAcceleration;if(n<t.__minDecelerationScrollLeft?s=t.__minDecelerationScrollLeft-n:n>t.__maxDecelerationScrollLeft&&(s=t.__maxDecelerationScrollLeft-n),i<t.__minDecelerationScrollTop?c=t.__minDecelerationScrollTop-i:i>t.__maxDecelerationScrollTop&&(c=t.__maxDecelerationScrollTop-i),0!==s){var f=s*t.__decelerationVelocityX<=t.__minDecelerationScrollLeft;f&&(t.__decelerationVelocityX+=s*l);var d=Math.abs(t.__decelerationVelocityX)<=t.__minVelocityToKeepDecelerating;(!f||d)&&(t.__decelerationVelocityX=s*u)}if(0!==c){var h=c*t.__decelerationVelocityY<=t.__minDecelerationScrollTop;h&&(t.__decelerationVelocityY+=c*l);var p=Math.abs(t.__decelerationVelocityY)<=t.__minVelocityToKeepDecelerating;(!h||p)&&(t.__decelerationVelocityY=c*u)}}},__getDistance:function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},__getScale:function(e,t){return e.length>=2&&t.length>=2?this.__getDistance(t[0],t[1])/this.__getDistance(e[0],e[1]):1}}),e.scroll={isScrolling:!1,lastTop:0}}(ionic),function(e){var t=function(){},n=function(){};e.views.ScrollNative=e.views.View.inherit({initialize:function(n){var i=this;i.__container=i.el=n.el,i.__content=n.el.firstElementChild,i.isNative=!0,i.__scrollTop=i.el.scrollTop,i.__scrollLeft=i.el.scrollLeft,i.__clientHeight=i.__content.clientHeight,i.__clientWidth=i.__content.clientWidth,i.__maxScrollTop=Math.max(i.__contentHeight-i.__clientHeight,0),i.__maxScrollLeft=Math.max(i.__contentWidth-i.__clientWidth,0),i.options={freeze:!1,getContentWidth:function(){return Math.max(i.__content.scrollWidth,i.__content.offsetWidth)},getContentHeight:function(){return Math.max(i.__content.scrollHeight,i.__content.offsetHeight+2*i.__content.offsetTop)}};for(var r in n)i.options[r]=n[r];i.onScroll=function(){e.scroll.isScrolling||(e.scroll.isScrolling=!0),clearTimeout(i.scrollTimer),i.scrollTimer=setTimeout(function(){e.scroll.isScrolling=!1},80)},i.freeze=t,i.__initEventHandlers()},__callback:function(){n("__callback")},zoomTo:function(){n("zoomTo")},zoomBy:function(){n("zoomBy")},activatePullToRefresh:function(){n("activatePullToRefresh")},resize:function(e){var t=this;t.__container&&t.options&&t.setDimensions(t.__container.clientWidth,t.__container.clientHeight,t.options.getContentWidth(),t.options.getContentHeight(),e)},run:function(){this.resize()},getValues:function(){var e=this;return e.update(),{left:e.__scrollLeft,top:e.__scrollTop,zoom:1}},update:function(){var e=this;e.__scrollLeft=e.el.scrollLeft,e.__scrollTop=e.el.scrollTop},setDimensions:function(e,t,n,i){var r=this;(e||t||n||i)&&(e===+e&&(r.__clientWidth=e),t===+t&&(r.__clientHeight=t),n===+n&&(r.__contentWidth=n),i===+i&&(r.__contentHeight=i),r.__computeScrollMax())},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},scrollBy:function(e,t,n){var i=this;i.update();var r=i.__isAnimating?i.__scheduledLeft:i.__scrollLeft,o=i.__isAnimating?i.__scheduledTop:i.__scrollTop;i.scrollTo(r+(e||0),o+(t||0),n)},scrollTo:function(t,n,i){function r(t,n){function i(e){return--e*e*e+1}function r(){var u=Date.now(),f=Math.min(1,(u-a)/s),d=i(f);c!=t&&(o.el.scrollTop=parseInt(d*(t-c)+c,10)),l!=n&&(o.el.scrollLeft=parseInt(d*(n-l)+l,10)),1>f?e.requestAnimationFrame(r):(e.tap.removeClonedInputs(o.__container,o),o.resize())}var a=Date.now(),s=250,c=o.el.scrollTop,l=o.el.scrollLeft;return c===t&&l===n?void o.resize():void e.requestAnimationFrame(r)}var o=this;return i?void r(n,t):(o.el.scrollTop=n,o.el.scrollLeft=t,void o.resize())},__waitForSize:function(){var e=this;clearTimeout(e.__sizerTimeout);var t=function(){e.resize(!0)};t(),e.__sizerTimeout=setTimeout(t,500)},__computeScrollMax:function(){var e=this;e.__maxScrollLeft=Math.max(e.__contentWidth-e.__clientWidth,0),e.__maxScrollTop=Math.max(e.__contentHeight-e.__clientHeight,0),e.__didWaitForSize||e.__maxScrollLeft||e.__maxScrollTop||(e.__didWaitForSize=!0,e.__waitForSize())},__initEventHandlers:function(){var t,n=this,i=n.__container;n.scrollChildIntoView=function(r){var o=i.getBoundingClientRect().bottom;t=i.offsetHeight;var a=n.isShrunkForKeyboard,s=i.parentNode.classList.contains("modal"),c=s&&window.innerWidth>=680;if(!a){if(e.Platform.isIOS()||e.Platform.isFullScreen||c){var l=r.detail.viewportHeight-o,u=Math.max(0,r.detail.keyboardHeight-l);e.requestAnimationFrame(function(){t-=u,i.style.height=t+"px",n.resize()})}n.isShrunkForKeyboard=!0}r.detail.isElementUnderKeyboard&&e.requestAnimationFrame(function(){n.isShrunkForKeyboard&&!a&&(o=i.getBoundingClientRect().bottom);var s=.5*t,c=(r.detail.elementBottom+r.detail.elementTop)/2,l=c-o,u=l+s;u>0&&(e.Platform.isIOS()?setTimeout(function(){e.tap.cloneFocusedInput(i,n),n.scrollBy(0,u,!0),n.onScroll()},32):(n.scrollBy(0,u,!0),n.onScroll()))}),r.stopPropagation()},n.resetScrollView=function(){n.isShrunkForKeyboard&&(n.isShrunkForKeyboard=!1,i.style.height=""),n.resize()},i.addEventListener("scroll",n.onScroll),i.addEventListener("scrollChildIntoView",n.scrollChildIntoView),document.addEventListener("resetScrollView",n.resetScrollView)},__cleanup:function(){var n=this,i=n.__container;i.removeEventListener("resetScrollView",n.resetScrollView),i.removeEventListener("scroll",n.onScroll),i.removeEventListener("scrollChildIntoView",n.scrollChildIntoView),i.removeEventListener("resetScrollView",n.resetScrollView),e.tap.removeClonedInputs(i,n),delete n.__container,delete n.__content,delete n.__indicatorX,delete n.__indicatorY,delete n.options.el,n.resize=n.scrollTo=n.onScroll=n.resetScrollView=t,n.scrollChildIntoView=t,i=null}})}(ionic),function(e){"use strict";var t="item",n="item-content",i="item-sliding",r="item-options",o="item-placeholder",a="item-reordering",s="item-reorder",c=function(){};c.prototype={start:function(){},drag:function(){},end:function(){},isSameItem:function(){return!1}};var l=function(e){this.dragThresholdX=e.dragThresholdX||10,this.el=e.el,this.item=e.item,this.canSwipe=e.canSwipe};l.prototype=new c,l.prototype.start=function(o){var a,s,c,l;this.canSwipe()&&(a=o.target.classList.contains(n)?o.target:o.target.classList.contains(t)?o.target.querySelector("."+n):e.DomUtil.getParentWithClass(o.target,n),a&&(a.classList.remove(i),c=parseFloat(a.style[e.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])||0,s=a.parentNode.querySelector("."+r),s&&(s.classList.remove("invisible"),l=s.offsetWidth,this._currentDrag={buttons:s,buttonsWidth:l,content:a,startOffsetX:c})))},l.prototype.isSameItem=function(e){return e._lastDrag&&this._currentDrag?this._currentDrag.content==e._lastDrag.content:!1},l.prototype.clean=function(t){function n(){i.buttons&&i.buttons.classList.add("invisible")}var i=this._lastDrag;i&&i.content&&(i.content.style[e.CSS.TRANSITION]="",i.content.style[e.CSS.TRANSFORM]="",t?(i.content.style[e.CSS.TRANSITION]="none",n(),e.requestAnimationFrame(function(){i.content.style[e.CSS.TRANSITION]=""})):e.requestAnimationFrame(function(){setTimeout(n,250)}))},l.prototype.drag=e.animationFrameThrottle(function(t){var n;if(this._currentDrag&&(!this._isDragging&&(Math.abs(t.gesture.deltaX)>this.dragThresholdX||Math.abs(this._currentDrag.startOffsetX)>0)&&(this._isDragging=!0),this._isDragging)){n=this._currentDrag.buttonsWidth;var i=Math.min(0,this._currentDrag.startOffsetX+t.gesture.deltaX);-n>i&&(i=Math.min(-n,-n+.4*(t.gesture.deltaX+n))),this._currentDrag.content.$$ionicOptionsOpen=0!==i,this._currentDrag.content.style[e.CSS.TRANSFORM]="translate3d("+i+"px, 0, 0)",this._currentDrag.content.style[e.CSS.TRANSITION]="none"}}),l.prototype.end=function(t,n){var i=this;if(!i._currentDrag)return void(n&&n());var r=-i._currentDrag.buttonsWidth;t.gesture.deltaX>-(i._currentDrag.buttonsWidth/2)&&("left"==t.gesture.direction&&Math.abs(t.gesture.velocityX)<.3?r=0:"right"==t.gesture.direction&&(r=0)),e.requestAnimationFrame(function(){if(0===r){i._currentDrag.content.style[e.CSS.TRANSFORM]="";var t=i._currentDrag.buttons;setTimeout(function(){t&&t.classList.add("invisible")},250)}else i._currentDrag.content.style[e.CSS.TRANSFORM]="translate3d("+r+"px,0,0)";i._currentDrag.content.style[e.CSS.TRANSITION]="",i._lastDrag||(i._lastDrag={}),e.extend(i._lastDrag,i._currentDrag),i._currentDrag&&(i._currentDrag.buttons=null,i._currentDrag.content=null),i._currentDrag=null,n&&n()})};var u=function(e){var t=this;if(t.dragThresholdY=e.dragThresholdY||0,t.onReorder=e.onReorder,t.listEl=e.listEl,t.el=t.item=e.el,t.scrollEl=e.scrollEl,t.scrollView=e.scrollView,t.listElTrueTop=0,t.listEl.offsetParent){var n=t.listEl;do t.listElTrueTop+=n.offsetTop,n=n.offsetParent;while(n)}};u.prototype=new c,u.prototype._moveElement=function(t){var n=t.gesture.center.pageY+this.scrollView.getValues().top-this._currentDrag.elementHeight/2-this.listElTrueTop;this.el.style[e.CSS.TRANSFORM]="translate3d(0, "+n+"px, 0)"},u.prototype.deregister=function(){this.listEl=this.el=this.scrollEl=this.scrollView=null},u.prototype.start=function(t){var n=e.DomUtil.getChildIndex(this.el,this.el.nodeName.toLowerCase()),i=this.el.scrollHeight,r=this.el.cloneNode(!0);r.classList.add(o),this.el.parentNode.insertBefore(r,this.el),this.el.classList.add(a),this._currentDrag={elementHeight:i,startIndex:n,placeholder:r,scrollHeight:scroll,list:r.parentNode},this._moveElement(t)},u.prototype.drag=e.animationFrameThrottle(function(t){var n=this;if(this._currentDrag){var i=0,r=t.gesture.center.pageY,o=this.listElTrueTop;if(this.scrollView){var a=this.scrollView.__container;i=this.scrollView.getValues().top;var s=a.offsetTop,c=s-r+this._currentDrag.elementHeight/2,l=r+this._currentDrag.elementHeight/2-s-a.offsetHeight;t.gesture.deltaY<0&&c>0&&i>0&&(this.scrollView.scrollBy(null,-c),e.requestAnimationFrame(function(){n.drag(t)})),t.gesture.deltaY>0&&l>0&&i<this.scrollView.getScrollMax().top&&(this.scrollView.scrollBy(null,l),e.requestAnimationFrame(function(){n.drag(t)}))}!this._isDragging&&Math.abs(t.gesture.deltaY)>this.dragThresholdY&&(this._isDragging=!0),this._isDragging&&(this._moveElement(t),this._currentDrag.currentY=i+r-o)}}),u.prototype._getReorderIndex=function(){for(var e,t=this,n=Array.prototype.slice.call(t._currentDrag.placeholder.parentNode.children).filter(function(e){return e.nodeName===t.el.nodeName&&e!==t.el}),i=t._currentDrag.currentY,r=0,o=n.length;o>r;r++)if(e=n[r],r===o-1){if(i>e.offsetTop)return r}else if(0===r){if(i<e.offsetTop+e.offsetHeight)return r}else if(i>e.offsetTop-e.offsetHeight/2&&i<e.offsetTop+e.offsetHeight)return r;return t._currentDrag.startIndex},u.prototype.end=function(t,n){if(!this._currentDrag)return void(n&&n());var i=this._currentDrag.placeholder,r=this._getReorderIndex();this.el.classList.remove(a),this.el.style[e.CSS.TRANSFORM]="",i.parentNode.insertBefore(this.el,i),i.parentNode.removeChild(i),this.onReorder&&this.onReorder(this.el,this._currentDrag.startIndex,r),this._currentDrag={placeholder:null,content:null},this._currentDrag=null,n&&n()},e.views.ListView=e.views.View.inherit({initialize:function(t){var n=this;t=e.extend({onReorder:function(){},virtualRemoveThreshold:-200,virtualAddThreshold:200,canSwipe:function(){return!0}},t),e.extend(n,t),!n.itemHeight&&n.listEl&&(n.itemHeight=n.listEl.children[0]&&parseInt(n.listEl.children[0].style.height,10)),n.onRefresh=t.onRefresh||function(){},n.onRefreshOpening=t.onRefreshOpening||function(){},n.onRefreshHolding=t.onRefreshHolding||function(){};var i={};e.DomUtil.getParentOrSelfWithClass(n.el,"overflow-scroll")&&(i.prevent_default_directions=["left","right"]),window.ionic.onGesture("release",function(e){n._handleEndDrag(e)},n.el,i),window.ionic.onGesture("drag",function(e){n._handleDrag(e)},n.el,i),n._initDrag()},deregister:function(){this.el=this.listEl=this.scrollEl=this.scrollView=null,this.isScrollFreeze&&self.scrollView.freeze(!1)},stopRefreshing:function(){var e=this.el.querySelector(".list-refresher");e.style.height="0"},didScroll:function(e){var t=this;if(t.isVirtual){var n=t.itemHeight,i=e.target.scrollHeight,r=t.el.parentNode.offsetHeight,o=Math.max(0,e.scrollTop+t.virtualRemoveThreshold),a=Math.min(i,Math.abs(e.scrollTop)+r+t.virtualAddThreshold),s=parseInt(Math.abs(o/n),10),c=parseInt(Math.abs(a/n),10);t._virtualItemsToRemove=Array.prototype.slice.call(t.listEl.children,0,s),t.renderViewport&&t.renderViewport(o,a,s,c)}},didStopScrolling:function(){if(this.isVirtual)for(var e=0;e<this._virtualItemsToRemove.length;e++)this.didHideItem&&this.didHideItem(e)},clearDragEffects:function(e){this._lastDragOp&&(this._lastDragOp.clean&&this._lastDragOp.clean(e),this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=null)},_initDrag:function(){this._lastDragOp&&this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=this._dragOp,this._dragOp=null},_getItem:function(e){for(;e;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null},_startDrag:function(t){var n=this;n._isDragging=!1;var i,r=n._lastDragOp;n._didDragUpOrDown&&r instanceof l&&r.clean&&r.clean(),!e.DomUtil.getParentOrSelfWithClass(t.target,s)||"up"!=t.gesture.direction&&"down"!=t.gesture.direction?!n._didDragUpOrDown&&("left"==t.gesture.direction||"right"==t.gesture.direction)&&Math.abs(t.gesture.deltaX)>5&&(i=n._getItem(t.target),i&&i.querySelector(".item-options")&&(n._dragOp=new l({el:n.el,item:i,canSwipe:n.canSwipe}),n._dragOp.start(t),t.preventDefault(),n.isScrollFreeze=n.scrollView.freeze(!0))):(i=n._getItem(t.target),i&&(n._dragOp=new u({listEl:n.el,el:i,scrollEl:n.scrollEl,scrollView:n.scrollView,onReorder:function(e,t,i){n.onReorder&&n.onReorder(e,t,i)}}),n._dragOp.start(t),t.preventDefault())),r&&n._dragOp&&!n._dragOp.isSameItem(r)&&t.defaultPrevented&&r.clean&&r.clean()},_handleEndDrag:function(e){var t=this;t.scrollView&&(t.isScrollFreeze=t.scrollView.freeze(!1)),t._didDragUpOrDown=!1,t._dragOp&&t._dragOp.end(e,function(){t._initDrag()})},_handleDrag:function(e){var t=this;Math.abs(e.gesture.deltaY)>5&&(t._didDragUpOrDown=!0),t.isDragging||t._dragOp||t._startDrag(e),t._dragOp&&(e.gesture.srcEvent.preventDefault(),t._dragOp.drag(e))}})}(ionic),function(e){"use strict";e.views.Modal=e.views.View.inherit({initialize:function(t){t=e.extend({focusFirstInput:!1,unfocusOnHide:!0,focusFirstDelay:600,backdropClickToClose:!0,hardwareBackButtonClose:!0},t),e.extend(this,t),this.el=t.el},show:function(){var e=this;e.focusFirstInput&&window.setTimeout(function(){var t=e.el.querySelector("input, textarea");t&&t.focus&&t.focus()},e.focusFirstDelay)},hide:function(){if(this.unfocusOnHide){var e=this.el.querySelectorAll("input, textarea");window.setTimeout(function(){for(var t=0;t<e.length;t++)e[t].blur&&e[t].blur()})}}})}(ionic),function(e){"use strict";e.views.SideMenu=e.views.View.inherit({initialize:function(e){this.el=e.el,this.isEnabled="undefined"==typeof e.isEnabled?!0:e.isEnabled,this.setWidth(e.width)},getFullWidth:function(){return this.width},setWidth:function(e){this.width=e,this.el.style.width=e+"px"},setIsEnabled:function(e){this.isEnabled=e},bringUp:function(){"0"!==this.el.style.zIndex&&(this.el.style.zIndex="0")},pushDown:function(){"-1"!==this.el.style.zIndex&&(this.el.style.zIndex="-1")}}),e.views.SideMenuContent=e.views.View.inherit({initialize:function(t){e.extend(this,{animationClass:"menu-animated",onDrag:function(){},onEndDrag:function(){}},t),e.onGesture("drag",e.proxy(this._onDrag,this),this.el),e.onGesture("release",e.proxy(this._onEndDrag,this),this.el)},_onDrag:function(e){this.onDrag&&this.onDrag(e)},_onEndDrag:function(e){this.onEndDrag&&this.onEndDrag(e)},disableAnimation:function(){this.el.classList.remove(this.animationClass)},enableAnimation:function(){this.el.classList.add(this.animationClass)},getTranslateX:function(){return parseFloat(this.el.style[e.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])},setTranslateX:e.animationFrameThrottle(function(t){this.el.style[e.CSS.TRANSFORM]="translate3d("+t+"px, 0, 0)"})})}(ionic),function(e){"use strict";e.views.Slider=e.views.View.inherit({initialize:function(e){function t(){if(v.offsetWidth){m=y.children,w=m.length,m.length<2&&(e.continuous=!1),p.transitions&&e.continuous&&m.length<3&&(y.appendChild(m[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),m=y.children),g=new Array(m.length),$=v.offsetWidth||v.getBoundingClientRect().width,y.style.width=m.length*$+"px";for(var t=m.length;t--;){var n=m[t];n.style.width=$+"px",n.setAttribute("data-index",t),p.transitions&&(n.style.left=t*-$+"px",a(t,_>t?-$:t>_?$:0,0))}e.continuous&&p.transitions&&(a(r(_-1),-$,0),a(r(_+1),$,0)),p.transitions||(y.style.left=_*-$+"px"),v.style.visibility="visible",e.slidesChanged&&e.slidesChanged()}}function n(t){e.continuous?o(_-1,t):_&&o(_-1,t)}function i(t){e.continuous?o(_+1,t):_<m.length-1&&o(_+1,t)}function r(e){return(m.length+e%m.length)%m.length}function o(t,n){if(_!=t){if(p.transitions){var i=Math.abs(_-t)/(_-t);if(e.continuous){var o=i;i=-g[r(t)]/$,i!==o&&(t=-i*m.length+t)}for(var s=Math.abs(_-t)-1;s--;)a(r((t>_?t:_)-s-1),$*i,0);t=r(t),a(_,$*i,n||b),a(t,0,n||b),e.continuous&&a(r(t-i),-($*i),0)}else t=r(t),c(_*-$,t*-$,n||b);_=t,h(e.callback&&e.callback(_,m[_]))}}function a(e,t,n){s(e,t,n),g[e]=t}function s(e,t,n){var i=m[e],r=i&&i.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=n+"ms",r.webkitTransform="translate("+t+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)")}function c(t,n,i){if(!i)return void(y.style.left=n+"px");var r=+new Date,o=setInterval(function(){var a=+new Date-r;return a>i?(y.style.left=n+"px",x&&l(),e.transitionEnd&&e.transitionEnd.call(event,_,m[_]),void clearInterval(o)):void(y.style.left=(n-t)*(Math.floor(a/i*100)/100)+t+"px")},4)}function l(){S=setTimeout(i,x)}function u(){x=e.auto||0,clearTimeout(S)}var f=this,d=function(){},h=function(e){setTimeout(e||d,0)},p={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))},v=e.el;if(v){var m,g,$,w,y=v.children[0];e=e||{};var _=parseInt(e.startSlide,10)||0,b=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var S,T,x=e.auto||0,E={},C={},k={handleEvent:function(n){switch(("mousedown"==n.type||"mouseup"==n.type||"mousemove"==n.type)&&(n.touches=[{pageX:n.pageX,pageY:n.pageY}]),n.type){case"mousedown":this.start(n);break;case"touchstart":this.start(n);break;case"touchmove":this.touchmove(n);break;case"mousemove":this.touchmove(n);break;case"touchend":h(this.end(n));break;case"mouseup":h(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(n));break;case"resize":h(t)}e.stopPropagation&&n.stopPropagation()},start:function(e){var t=e.touches[0];E={x:t.pageX,y:t.pageY,time:+new Date},T=void 0,C={},p.touch?(y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)):(y.addEventListener("mousemove",this,!1),y.addEventListener("mouseup",this,!1),document.addEventListener("mouseup",this,!1))},touchmove:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale||f.slideIsDisabled)){e.disableScroll&&t.preventDefault();var n=t.touches[0];if(C={x:n.pageX-E.x,y:n.pageY-E.y},"undefined"==typeof T&&(T=!!(T||Math.abs(C.x)<Math.abs(C.y))),!T){t.preventDefault(),u();var i=function(){s(r(_-1),C.x+g[r(_-1)],0),s(_,C.x+g[_],0),s(r(_+1),C.x+g[r(_+1)],0)};e.continuous?f.disabledDir?1==f.disabledDir?C.x>0?(C.x=C.x/(Math.abs(C.x)/$+1),s(_,C.x+g[_],0),s(_+1,C.x+g[_+1],0)):i():2==f.disabledDir?C.x<0?(C.x=C.x/(Math.abs(C.x)/$+1),s(_-1,C.x+g[_-1],0),s(_,C.x+g[_],0)):i():3==f.disabledDir&&(C.x<0?(C.x=C.x/(Math.abs(C.x)/$+1),s(_-1,C.x+g[_-1],0),s(_,C.x+g[_],0)):(C.x=C.x/(Math.abs(C.x)/$+1),s(_,C.x+g[_],0),s(_+1,C.x+g[_+1],0))):i():(C.x=C.x/(!_&&C.x>0||_==m.length-1&&C.x<0?Math.abs(C.x)/$+1:1),s(_-1,C.x+g[_-1],0),s(_,C.x+g[_],0),s(_+1,C.x+g[_+1],0)),e.onDrag&&e.onDrag()}}},end:function(){var t=+new Date-E.time,n=Number(t)<250&&Math.abs(C.x)>20||Math.abs(C.x)>$/2,i=!_&&C.x>0||_==m.length-1&&C.x<0;e.continuous&&!f.disabledDir&&(i=!1),e.continuous&&(i=!1,f.disabledDir&&(1==f.disabledDir&&C.x>0||2==f.disabledDir&&C.x<0||3==f.disabledDir)&&(i=!0));var o=C.x<0;if(!T)if(n&&!i){if(o){var s=function(){a(r(_-1),-$,0),a(r(_+2),$,0)},c=function(){a(_-1,-$,0)};e.continuous?f.disabledDir?1==f.disabledDir?C.x>0?c():s():2==f.disabledDir?C.x<0?c():s():3==f.disabledDir&&c():s():c(),a(_,g[_]-$,b),a(r(_+1),g[r(_+1)]-$,b),_=r(_+1)}else{var s=function(){a(r(_+1),$,0),a(r(_-2),-$,0)},c=function(){a(_+1,$,0)};e.continuous?f.disabledDir?1==f.disabledDir?C.x>0?c():s():2==f.disabledDir?C.x<0?c():s():3==f.disabledDir&&c():s():c(),a(_,g[_]+$,b),a(r(_-1),g[r(_-1)]+$,b),_=r(_-1)}e.callback&&e.callback(_,m[_])}else{var s=function(){a(r(_-1),-$,b),a(_,0,b),a(r(_+1),$,b)},c=function(){a(_-1,-$,b),a(_,0,b),a(_+1,$,b)};e.continuous?f.disabledDir?1==f.disabledDir?C.x>0?c():s():2==f.disabledDir?C.x<0?c():s():3==f.disabledDir&&c():s():c()}p.touch?(y.removeEventListener("touchmove",k,!1),y.removeEventListener("touchend",k,!1)):(y.removeEventListener("mousemove",k,!1),y.removeEventListener("mouseup",k,!1),document.removeEventListener("mouseup",k,!1)),e.onDragEnd&&e.onDragEnd()},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==_&&(x&&l(),e.transitionEnd&&e.transitionEnd.call(t,_,m[_]))}};this.update=function(){setTimeout(t)},this.setup=function(){t()},this.loop=function(t){return arguments.length&&(e.continuous=!!t),e.continuous},this.enableSlide=function(e){return arguments.length&&(this.slideIsDisabled=!e),!this.slideIsDisabled},this.disableSlideDir=function(e){this.disabledDir=e||0},this.slide=this.select=function(e,t){u(),o(e,t)},this.prev=this.previous=function(){u(),n()},this.next=function(){u(),i()},this.stop=function(){u()},this.start=function(){l()},this.autoPlay=function(e){!x||0>x?u():(x=e,l())},this.currentIndex=this.selected=function(){return _},this.slidesCount=this.count=function(){return w},this.kill=function(){u(),y.style.width="",y.style.left="",m&&(m=[]),p.addEventListener?(y.removeEventListener("touchstart",k,!1),y.removeEventListener("webkitTransitionEnd",k,!1),y.removeEventListener("msTransitionEnd",k,!1),y.removeEventListener("oTransitionEnd",k,!1),y.removeEventListener("otransitionend",k,!1),y.removeEventListener("transitionend",k,!1),window.removeEventListener("resize",k,!1)):window.onresize=null},this.load=function(){t(),x&&l(),p.addEventListener?(p.touch?y.addEventListener("touchstart",k,!1):y.addEventListener("mousedown",k,!1),p.transitions&&(y.addEventListener("webkitTransitionEnd",k,!1),y.addEventListener("msTransitionEnd",k,!1),y.addEventListener("oTransitionEnd",k,!1),y.addEventListener("otransitionend",k,!1),y.addEventListener("transitionend",k,!1)),window.addEventListener("resize",k,!1)):window.onresize=function(){t()}}}}})}(ionic),function(e){"use strict";e.views.Toggle=e.views.View.inherit({initialize:function(t){var n=this;this.el=t.el,this.checkbox=t.checkbox,this.track=t.track,this.handle=t.handle,this.openPercent=-1,this.onChange=t.onChange||function(){},this.triggerThreshold=t.triggerThreshold||20,this.dragStartHandler=function(e){n.dragStart(e)},this.dragHandler=function(e){n.drag(e)},this.holdHandler=function(e){n.hold(e)},this.releaseHandler=function(e){n.release(e)},this.dragStartGesture=e.onGesture("dragstart",this.dragStartHandler,this.el),this.dragGesture=e.onGesture("drag",this.dragHandler,this.el),this.dragHoldGesture=e.onGesture("hold",this.holdHandler,this.el),this.dragReleaseGesture=e.onGesture("release",this.releaseHandler,this.el)},destroy:function(){e.offGesture(this.dragStartGesture,"dragstart",this.dragStartGesture),e.offGesture(this.dragGesture,"drag",this.dragGesture),e.offGesture(this.dragHoldGesture,"hold",this.holdHandler),e.offGesture(this.dragReleaseGesture,"release",this.releaseHandler)},tap:function(){"disabled"!==this.el.getAttribute("disabled")&&this.val(!this.checkbox.checked)},dragStart:function(e){this.checkbox.disabled||(this._dragInfo={width:this.el.offsetWidth,left:this.el.offsetLeft,right:this.el.offsetLeft+this.el.offsetWidth,triggerX:this.el.offsetWidth/2,initialState:this.checkbox.checked},e.gesture.srcEvent.preventDefault(),this.hold(e))},drag:function(t){var n=this;this._dragInfo&&(t.gesture.srcEvent.preventDefault(),e.requestAnimationFrame(function(){if(n._dragInfo){var e=t.gesture.touches[0].pageX-n._dragInfo.left,i=n._dragInfo.width-n.triggerThreshold;n._dragInfo.initialState?e<n.triggerThreshold?n.setOpenPercent(0):e>n._dragInfo.triggerX&&n.setOpenPercent(100):e<n._dragInfo.triggerX?n.setOpenPercent(0):e>i&&n.setOpenPercent(100)}}))},endDrag:function(){this._dragInfo=null},hold:function(){this.el.classList.add("dragging")},release:function(e){this.el.classList.remove("dragging"),this.endDrag(e)},setOpenPercent:function(t){if(this.openPercent<0||t<this.openPercent-3||t>this.openPercent+3)if(this.openPercent=t,0===t)this.val(!1);else if(100===t)this.val(!0);else{var n=Math.round(t/100*this.track.offsetWidth-this.handle.offsetWidth);n=1>n?0:n,this.handle.style[e.CSS.TRANSFORM]="translate3d("+n+"px,0,0)"}},val:function(t){return(t===!0||t===!1)&&(""!==this.handle.style[e.CSS.TRANSFORM]&&(this.handle.style[e.CSS.TRANSFORM]=""),this.checkbox.checked=t,this.openPercent=t?100:0,this.onChange&&this.onChange()),this.checkbox.checked}})}(ionic)}(),function(e,t,n){"use strict";function i(e,t){return t=t||Error,function(){var n,i,r=arguments[0],o="["+(e?e+":":"")+r+"] ",a=arguments[1],s=arguments;for(n=o+a.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t+2<s.length?dt(s[t+2]):e}),n=n+"\nhttp://errors.angularjs.org/1.3.13/"+(e?e+"/":"")+r,i=2;i<arguments.length;i++)n=n+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(dt(arguments[i]));return tracelog(n),new t(n)}}function r(e){if(null==e||x(e))return!1;var t=e.length;return e.nodeType===gr&&t?!0:y(e)||ur(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var i,a;if(e)if(S(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(ur(e)||r(e)){var s="object"!=typeof e;for(i=0,a=e.length;a>i;i++)(s||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);return e}function a(e){return Object.keys(e).sort()}function s(e,t,n){for(var i=a(e),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function c(e){return function(t,n){e(n,t)}}function l(){return++cr}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function f(e){for(var t=e.$$hashKey,n=1,i=arguments.length;i>n;n++){var r=arguments[n];if(r)for(var o=Object.keys(r),a=0,s=o.length;s>a;a++){var c=o[a];e[c]=r[c]}}return u(e,t),e}function d(e){return parseInt(e,10)}function h(e,t){return f(Object.create(e),t)}function p(){}function v(e){return e}function m(e){return function(){return e}}function g(e){return"undefined"==typeof e}function $(e){return"undefined"!=typeof e}function w(e){return null!==e&&"object"==typeof e}function y(e){return"string"==typeof e}function _(e){return"number"==typeof e}function b(e){return"[object Date]"===or.call(e)}function S(e){return"function"==typeof e}function T(e){return"[object RegExp]"===or.call(e)}function x(e){return e&&e.window===e}function E(e){return e&&e.$evalAsync&&e.$watch}function C(e){return"[object File]"===or.call(e)}function k(e){return"[object FormData]"===or.call(e)}function A(e){return"[object Blob]"===or.call(e)}function D(e){return"boolean"==typeof e}function I(e){return e&&S(e.then)}function M(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function P(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function O(e){return Wi(e.nodeName||e[0]&&e[0].nodeName)}function V(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function L(e,t,n,i){if(x(e)||E(e))throw ar("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw ar("cpi","Can't copy! Source and destination are identical.");if(n=n||[],i=i||[],w(e)){var r=n.indexOf(e);if(-1!==r)return i[r];n.push(e),i.push(t)}var a;if(ur(e)){t.length=0;for(var s=0;s<e.length;s++)a=L(e[s],null,n,i),w(e[s])&&(n.push(e[s]),i.push(a)),t.push(a)}else{var c=t.$$hashKey;ur(t)?t.length=0:o(t,function(e,n){delete t[n]});for(var l in e)e.hasOwnProperty(l)&&(a=L(e[l],null,n,i),w(e[l])&&(n.push(e[l]),i.push(a)),t[l]=a);u(t,c)}}else if(t=e,e)if(ur(e))t=L(e,[],n,i);else if(b(e))t=new Date(e.getTime());else if(T(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(w(e)){var f=Object.create(Object.getPrototypeOf(e));t=L(e,f,n,i)}return t}function N(e,t){if(ur(e)){t=t||[];for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else if(w(e)){t=t||{};for(var r in e)("$"!==r.charAt(0)||"$"!==r.charAt(1))&&(t[r]=e[r])}return t||e}function B(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i,r,o,a=typeof e,s=typeof t;if(a==s&&"object"==a){if(!ur(e)){if(b(e))return b(t)?B(e.getTime(),t.getTime()):!1;
if(T(e)&&T(t))return e.toString()==t.toString();if(E(e)||E(t)||x(e)||x(t)||ur(t))return!1;o={};for(r in e)if("$"!==r.charAt(0)&&!S(e[r])){if(!B(e[r],t[r]))return!1;o[r]=!0}for(r in t)if(!o.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t[r]!==n&&!S(t[r]))return!1;return!0}if(!ur(t))return!1;if((i=e.length)==t.length){for(r=0;i>r;r++)if(!B(e[r],t[r]))return!1;return!0}}return!1}function R(e,t,n){return e.concat(nr.call(t,n))}function H(e,t){return nr.call(e,t||0)}function z(e,t){var n=arguments.length>2?H(arguments,2):[];return!S(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,R(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function F(e,i){var r=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=n:x(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":E(i)&&(r="$SCOPE"),r}function q(e,t){return"undefined"==typeof e?n:(_(t)||(t=t?2:null),JSON.stringify(e,F,t))}function U(e){return y(e)?JSON.parse(e):e}function G(e){e=Qi(e).clone();try{e.empty()}catch(t){}var n=Qi("<div>").append(e).html();try{return e[0].nodeType===$r?Wi(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Wi(t)})}catch(t){return Wi(n)}}function j(e){try{return decodeURIComponent(e)}catch(t){}}function W(e){var t,n,i={};return o((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=j(t[0]),$(n))){var r=$(t[1])?j(t[1]):!0;Yi.call(i,n)?ur(i[n])?i[n].push(r):i[n]=[i[n],r]:i[n]=r}}),i}function Y(e){var t=[];return o(e,function(e,n){ur(e)?o(e,function(e){t.push(K(n,!0)+(e===!0?"":"="+K(e,!0)))}):t.push(K(n,!0)+(e===!0?"":"="+K(e,!0)))}),t.length?t.join("&"):""}function X(e){return K(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function K(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function Z(e,t){var n,i,r=pr.length;for(e=Qi(e),i=0;r>i;++i)if(n=pr[i]+t,y(n=e.attr(n)))return n;return null}function J(e,t){var n,i,r={};o(pr,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,i=e.getAttribute(r))}),o(pr,function(t){var r,o=t+"app";!n&&(r=e.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n&&(r.strictDi=null!==Z(n,"strict-di"),t(n,i?[i]:[],r))}function Q(n,i,r){w(r)||(r={});var a={strictDi:!1};r=f(a,r);var s=function(){if(n=Qi(n),n.injector()){var e=n[0]===t?"document":G(n);throw ar("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var o=Ut(i,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),o},c=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&c.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(c,"")),e&&!l.test(e.name)?s():(e.name=e.name.replace(l,""),sr.resumeBootstrap=function(e){return o(e,function(e){i.push(e)}),s()},void(S(sr.resumeDeferredBootstrap)&&sr.resumeDeferredBootstrap()))}function et(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function tt(e){var t=sr.element(e).injector();if(!t)throw ar("test","no injector found for element argument to getTestability");return t.get("$$testability")}function nt(e,t){return t=t||"_",e.replace(vr,function(e,n){return(n?t:"")+e.toLowerCase()})}function it(){var t;mr||(er=e.jQuery,er&&er.fn.on?(Qi=er,f(er.fn,{scope:Lr.scope,isolateScope:Lr.isolateScope,controller:Lr.controller,injector:Lr.injector,inheritedData:Lr.inheritedData}),t=er.cleanData,er.cleanData=function(e){var n;if(lr)lr=!1;else for(var i,r=0;null!=(i=e[r]);r++)n=er._data(i,"events"),n&&n.$destroy&&er(i).triggerHandler("$destroy");t(e)}):Qi=yt,sr.element=Qi,mr=!0)}function rt(e,t,n){if(!e)throw ar("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ot(e,t,n){return n&&ur(e)&&(e=e[e.length-1]),rt(S(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function at(e,t){if("hasOwnProperty"===e)throw ar("badname","hasOwnProperty is not a valid {0} name",t)}function st(e,t,n){if(!t)return e;for(var i,r=t.split("."),o=e,a=r.length,s=0;a>s;s++)i=r[s],e&&(e=(o=e)[i]);return!n&&S(e)?z(o,e):e}function ct(e){var t=e[0],n=e[e.length-1],i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==n);return Qi(i)}function lt(){return Object.create(null)}function ut(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=i("$injector"),r=i("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||i,t(o,"module",function(){var e={};return function(i,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw r("badname","hasOwnProperty is not a valid {0} name",t)};return s(i,"module"),o&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,function(){function e(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),l}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],s=[],c=e("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:s,requires:o,name:i,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:c,run:function(e){return s.push(e),this}};return a&&c(a),l})}})}function ft(e){var t=[];return JSON.stringify(e,function(e,n){if(n=F(e,n),w(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function dt(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?ft(e):e}function ht(t){f(t,{bootstrap:Q,copy:L,extend:f,equals:B,element:Qi,forEach:o,injector:Ut,noop:p,bind:z,toJson:q,fromJson:U,identity:v,isUndefined:g,isDefined:$,isString:y,isFunction:S,isObject:w,isNumber:_,isElement:M,isArray:ur,version:br,isDate:b,lowercase:Wi,uppercase:Xi,callbacks:{counter:0},getTestability:tt,$$minErr:i,$$csp:hr,reloadWithDebugInfo:et}),tr=ut(e);try{tr("ngLocale")}catch(n){tr("ngLocale",[]).provider("$locale",gn)}tr("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Xn}),e.provider("$compile",Zt).directive({a:Ao,input:jo,textarea:jo,form:Oo,script:Va,select:Ba,style:Ha,option:Ra,ngBind:Xo,ngBindHtml:Zo,ngBindTemplate:Ko,ngClass:Qo,ngClassEven:ta,ngClassOdd:ea,ngCloak:na,ngController:ia,ngForm:Vo,ngHide:Aa,ngIf:aa,ngInclude:sa,ngInit:la,ngNonBindable:Sa,ngPluralize:Ta,ngRepeat:xa,ngShow:ka,ngStyle:Da,ngSwitch:Ia,ngSwitchWhen:Ma,ngSwitchDefault:Pa,ngOptions:Na,ngTransclude:Oa,ngModel:ya,ngList:ua,ngChange:Jo,pattern:Fa,ngPattern:Fa,required:za,ngRequired:za,minlength:Ua,ngMinlength:Ua,maxlength:qa,ngMaxlength:qa,ngValue:Yo,ngModelOptions:ba}).directive({ngInclude:ca}).directive(Do).directive(ra),e.provider({$anchorScroll:Gt,$animate:jr,$browser:Yt,$cacheFactory:Xt,$controller:tn,$document:nn,$exceptionHandler:rn,$filter:si,$interpolate:vn,$interval:mn,$http:fn,$httpBackend:hn,$location:In,$log:Mn,$parse:qn,$rootScope:Yn,$q:Un,$$q:Gn,$sce:Qn,$sceDelegate:Jn,$sniffer:ei,$templateCache:Kt,$templateRequest:ti,$$testability:ni,$timeout:ii,$window:ai,$$rAF:Wn,$$asyncCallback:jt,$$jqLite:Rt})}])}function pt(){return++Tr}function vt(e){return e.replace(Cr,function(e,t,n,i){return i?n.toUpperCase():n}).replace(kr,"Moz$1")}function mt(e){return!Mr.test(e)}function gt(e){var t=e.nodeType;return t===gr||!t||t===yr}function $t(e,t){var n,i,r,a,s=t.createDocumentFragment(),c=[];if(mt(e))c.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),i=(Pr.exec(e)||["",""])[1].toLowerCase(),r=Vr[i]||Vr._default,n.innerHTML=r[1]+e.replace(Or,"<$1></$2>")+r[2],a=r[0];a--;)n=n.lastChild;c=R(c,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(c,function(e){s.appendChild(e)}),s}function wt(e,n){n=n||t;var i;return(i=Ir.exec(e))?[n.createElement(i[1])]:(i=$t(e,n))?i.childNodes:[]}function yt(e){if(e instanceof yt)return e;var t;if(y(e)&&(e=fr(e),t=!0),!(this instanceof yt)){if(t&&"<"!=e.charAt(0))throw Dr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new yt(e)}t?Dt(this,wt(e)):Dt(this,e)}function _t(e){return e.cloneNode(!0)}function bt(e,t){if(t||Tt(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,r=n.length;r>i;i++)Tt(n[i])}function St(e,t,n,i){if($(i))throw Dr("offargs","jqLite#off() does not support the `selector` argument");var r=xt(e),a=r&&r.events,s=r&&r.handle;if(s)if(t)o(t.split(" "),function(t){if($(n)){var i=a[t];if(V(i||[],n),i&&i.length>0)return}Er(e,t,s),delete a[t]});else for(t in a)"$destroy"!==t&&Er(e,t,s),delete a[t]}function Tt(e,t){var i=e.ng339,r=i&&Sr[i];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),St(e)),delete Sr[i],e.ng339=n}}function xt(e,t){var i=e.ng339,r=i&&Sr[i];return t&&!r&&(e.ng339=i=pt(),r=Sr[i]={events:{},data:{},handle:n}),r}function Et(e,t,n){if(gt(e)){var i=$(n),r=!i&&t&&!w(t),o=!t,a=xt(e,!r),s=a&&a.data;if(i)s[t]=n;else{if(o)return s;if(r)return s&&s[t];f(s,t)}}}function Ct(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function kt(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",fr((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+fr(t)+" "," ")))})}function At(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=fr(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",fr(n))}}function Dt(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;n>i;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function It(e,t){return Mt(e,"$"+(t||"ngController")+"Controller")}function Mt(e,t,i){e.nodeType==yr&&(e=e.documentElement);for(var r=ur(t)?t:[t];e;){for(var o=0,a=r.length;a>o;o++)if((i=Qi.data(e,r[o]))!==n)return i;e=e.parentNode||e.nodeType===_r&&e.host}}function Pt(e){for(bt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ot(e,t){t||bt(e);var n=e.parentNode;n&&n.removeChild(e)}function Vt(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Qi(n).on("load",t)}function Lt(e,t){var n=Nr[t.toLowerCase()];return n&&Br[O(e)]&&n}function Nt(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&Rr[t]}function Bt(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],o=r?r.length:0;if(o){if(g(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(r=N(r));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||r[s].call(e,n)}};return n.elem=e,n}function Rt(){this.$get=function(){return f(yt,{hasClass:function(e,t){return e.attr&&(e=e[0]),Ct(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),At(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),kt(e,t)}})}}function Ht(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"==i||"object"==i&&null!==e?e.$$hashKey=i+":"+(t||l)():i+":"+e}function zt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Ft(e){var t=e.toString().replace(qr,""),n=t.match(Hr);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function qt(e,t,n){var i,r,a,s;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw y(n)&&n||(n=e.name||Ft(e)),Ur("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=e.toString().replace(qr,""),a=r.match(Hr),o(a[1].split(zr),function(e){e.replace(Fr,function(e,t,n){i.push(n)})})}e.$inject=i}}else ur(e)?(s=e.length-1,ot(e[s],"fn"),i=e.slice(0,s)):ot(e,"fn",!0);return i}function Ut(e,t){function i(e){return function(t,n){return w(t)?void o(t,c(e)):e(t,n)}}function r(e,t){if(at(e,"service"),(S(t)||ur(t))&&(t=E.instantiate(t)),!t.$get)throw Ur("pget","Provider '{0}' must define $get factory method.",e);return x[e+_]=t}function a(e,t){return function(){var n=k.invoke(t,this);if(g(n))throw Ur("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return r(e,{$get:n!==!1?a(e,t):t})}function l(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,m(t),!1)}function f(e,t){at(e,"constant"),x[e]=t,C[e]=t}function d(e,t){var n=E.get(e+_),i=n.$get;n.$get=function(){var e=k.invoke(i,n);return k.invoke(t,null,{$delegate:e})}}function h(e){var t,n=[];return o(e,function(e){function i(e){var t,n;for(t=0,n=e.length;n>t;t++){var i=e[t],r=E.get(i[0]);r[i[1]].apply(r,i[2])}}if(!T.get(e)){T.put(e,!0);try{y(e)?(t=tr(e),n=n.concat(h(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):S(e)?n.push(E.invoke(e)):ur(e)?n.push(E.invoke(e)):ot(e,"module")}catch(r){throw ur(e)&&(e=e[e.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),Ur("modulerr","Failed to instantiate module {0} due to:\n{1}",e,r.stack||r.message||r)}}}),n}function v(e,n){function i(t,i){if(e.hasOwnProperty(t)){if(e[t]===$)throw Ur("cdep","Circular dependency found: {0}",t+" <- "+b.join(" <- "));return e[t]}try{return b.unshift(t),e[t]=$,e[t]=n(t,i)}catch(r){throw e[t]===$&&delete e[t],r}finally{b.shift()}}function r(e,n,r,o){"string"==typeof r&&(o=r,r=null);var a,s,c,l=[],u=Ut.$$annotate(e,t,o);for(s=0,a=u.length;a>s;s++){if(c=u[s],"string"!=typeof c)throw Ur("itkn","Incorrect injection token! Expected service name as string, got {0}",c);l.push(r&&r.hasOwnProperty(c)?r[c]:i(c,o))}return ur(e)&&(e=e[a]),e.apply(n,l)}function o(e,t,n){var i=Object.create((ur(e)?e[e.length-1]:e).prototype||null),o=r(e,i,t,n);return w(o)||S(o)?o:i}return{invoke:r,instantiate:o,get:i,annotate:Ut.$$annotate,has:function(t){return x.hasOwnProperty(t+_)||e.hasOwnProperty(t)}}}t=t===!0;var $={},_="Provider",b=[],T=new zt([],!0),x={$provide:{provider:i(r),factory:i(s),service:i(l),value:i(u),constant:i(f),decorator:d}},E=x.$injector=v(x,function(e,t){throw sr.isString(t)&&b.push(t),Ur("unpr","Unknown provider: {0}",b.join(" <- "))}),C={},k=C.$injector=v(C,function(e,t){var i=E.get(e+_,t);return k.invoke(i.$get,i,n,e)});return o(h(e),function(e){k.invoke(e||p)}),k}function Gt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function r(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===O(e)?(t=e,!0):void 0}),t}function o(){var e=s.yOffset;if(S(e))e=e();else if(M(e)){var n=e[0],i=t.getComputedStyle(n);e="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else _(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var i=e.getBoundingClientRect().top;t.scrollBy(0,i-n)}}else t.scrollTo(0,0)}function s(){var e,t=n.hash();t?(e=c.getElementById(t))?a(e):(e=r(c.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}var c=t.document;return e&&i.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&Vt(function(){i.$evalAsync(s)})}),s}]}function jt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Wt(e,t,i,r){function a(e){try{e.apply(null,H(arguments,1))}finally{if(S--,0===S)for(;T.length;)try{T.pop()()}catch(t){i.error(t)}}}function s(e){var t=e.indexOf("#");return-1===t?"":e.substr(t+1)}function c(e,t){!function n(){o(E,function(e){e()}),x=t(n,e)}()}function l(){u(),f()}function u(){C=e.history.state,C=g(C)?null:C,B(C,L)&&(C=L),L=C}function f(){(A!==h.url()||k!==C)&&(A=h.url(),k=C,o(O,function(e){e(h.url(),C)}))}function d(e){try{return decodeURIComponent(e)}catch(t){return e}}var h=this,v=t[0],m=e.location,$=e.history,w=e.setTimeout,_=e.clearTimeout,b={};h.isMock=!1;var S=0,T=[];h.$$completeOutstandingRequest=a,h.$$incOutstandingRequestCount=function(){S++},h.notifyWhenNoOutstandingRequests=function(e){o(E,function(e){e()}),0===S?e():T.push(e)};var x,E=[];h.addPollFn=function(e){return g(x)&&c(100,w),E.push(e),e};var C,k,A=m.href,D=t.find("base"),I=null,M=null,P=null;u(),k=C,h.url=function(t,n,i){if(g(i)&&(i=null),m!==e.location&&(m=e.location),$!==e.history&&($=e.history),!P&&M&&t&&(P=w(function(){m.href==M&&(M=null),P=null},0)),t){var o=k===i;if(A===t&&(!r.history||o))return h;var a=A&&bn(A)===bn(t);return A=t,k=i,!r.history||a&&o?(M=t,a||(I=t),n?m.replace(t):a?m.hash=s(t):m.href=t):($[n?"replaceState":"pushState"](i,"",t),u(),k=C),h}var c=m.href.replace(/%27/g,"'");return M&&(c=M),m.href==M&&(M=null),I||c},h.state=function(){return C};var O=[],V=!1,L=null;h.onUrlChange=function(t){return V||(r.history&&Qi(e).on("popstate",l),Qi(e).on("hashchange",l),V=!0),O.push(t),t},h.$$checkUrlChange=f,h.baseHref=function(){var e=D.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var N={},R="",z=h.baseHref();h.cookies=function(e,t){var r,o,a,s,c;if(!e){if(v.cookie!==R)for(R=v.cookie,o=R.split("; "),N={},s=0;s<o.length;s++)a=o[s],c=a.indexOf("="),c>0&&(e=d(a.substring(0,c)),N[e]===n&&(N[e]=d(a.substring(c+1))));return N}t===n?v.cookie=encodeURIComponent(e)+"=;path="+z+";expires=Thu, 01 Jan 1970 00:00:00 GMT":y(t)&&(r=(v.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+z).length+1,r>4096&&i.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},h.defer=function(e,t){var n;return S++,n=w(function(){delete b[n],a(e)},t||0),b[n]=!0,n},h.defer.cancel=function(e){return b[e]?(delete b[e],_(e),a(p),!0):!1}}function Yt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new Wt(e,i,t,n)}]}function Xt(){this.$get=function(){function e(e,n){function r(e){e!=d&&(h?h==e&&(h=e.n):h=e,o(e.n,e.p),o(e,d),d=e,d.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=f({},n,{id:e}),c={},l=n&&n.capacity||Number.MAX_VALUE,u={},d=null,h=null;return t[e]={put:function(e,t){if(l<Number.MAX_VALUE){var n=u[e]||(u[e]={key:e});r(n)}if(!g(t))return e in c||a++,c[e]=t,a>l&&this.remove(h.key),t},get:function(e){if(l<Number.MAX_VALUE){var t=u[e];if(!t)return;r(t)}return c[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=u[e];if(!t)return;t==d&&(d=t.p),t==h&&(h=t.n),o(t.n,t.p),delete u[e]}delete c[e],a--},removeAll:function(){c={},a=0,u={},d=h=null},destroy:function(){c=null,s=null,u=null,delete t[e]},info:function(){return f({},s,{size:a})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Kt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Zt(e,i){function r(e,t){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return o(e,function(e,r){var o=e.match(n);if(!o)throw Wr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e);i[r]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||r}}),i}var a={},s="Directive",l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?:\:([^;]+))?;?)/,d=P("ngSrc,ngSrcset,src,srcset"),g=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,_=/^(on[a-z]+|formaction)$/;this.directive=function T(t,n){return at(t,"directive"),y(t)?(rt(n,"directiveFactory"),a.hasOwnProperty(t)||(a[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var i=[];return o(a[t],function(o,a){try{var s=e.invoke(o);S(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",w(s.scope)&&(s.$$isolateBindings=r(s.scope,s.name)),i.push(s)}catch(c){n(c)}}),i}])),a[t].push(n)):o(t,c(T)),this},this.aHrefSanitizationWhitelist=function(e){return $(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()};var b=!0;this.debugInfoEnabled=function(e){return $(e)?(b=e,this):b},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,r,c,m,$,T,x,C,k,A){function D(e,t){try{e.addClass(t)}catch(n){}}function I(e,t,n,i,r){e instanceof Qi||(e=Qi(e)),o(e,function(t,n){t.nodeType==$r&&t.nodeValue.match(/\S+/)&&(e[n]=Qi(t).wrap("<span></span>").parent()[0])});var a=P(e,t,e,n,i,r);I.$$addScopeClass(e);var s=null;return function(t,n,i){rt(t,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,o=i.transcludeControllers,c=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),s||(s=M(c));var l;if(l="html"!==s?Qi(J(s,Qi("<div>").append(e).html())):n?Lr.clone.call(e):e,o)for(var u in o)l.data("$"+u+"Controller",o[u].instance);return I.$$addScopeInfo(l,t),n&&n(l,t),a&&a(t,l,l,r),l}}function M(e){var t=e&&e[0];return t&&"foreignobject"!==O(t)&&t.toString().match(/SVG/)?"svg":"html"}function P(e,t,i,r,o,a){function s(e,i,r,o){var a,s,c,l,u,f,d,h,m;if(p){var g=i.length;for(m=new Array(g),u=0;u<v.length;u+=3)d=v[u],m[d]=i[d]}else m=i;for(u=0,f=v.length;f>u;)c=m[v[u++]],a=v[u++],s=v[u++],a?(a.scope?(l=e.$new(),I.$$addScopeInfo(Qi(c),l)):l=e,h=a.transcludeOnThisElement?L(e,a.transclude,o,a.elementTranscludeOnThisElement):!a.templateOnThisElement&&o?o:!o&&t?L(e,t):null,a(s,l,c,r,h)):s&&s(e,c.childNodes,n,o)}for(var c,l,u,f,d,h,p,v=[],m=0;m<e.length;m++)c=new at,l=N(e[m],[],c,0===m?r:n,o),u=l.length?F(l,e[m],c,t,i,null,[],[],a):null,u&&u.scope&&I.$$addScopeClass(c.$$element),d=u&&u.terminal||!(f=e[m].childNodes)||!f.length?null:P(f,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||d)&&(v.push(m,u,d),h=!0,p=p||u),a=null;return h?s:null}function L(e,t,n){var i=function(i,r,o,a,s){return i||(i=e.$new(!1,s),i.$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return i}function N(e,t,n,i,r){var o,a,s=e.nodeType,c=n.$attr;switch(s){case gr:U(t,Jt(O(e)),"E",i,r);for(var f,d,h,p,v,m,g=e.attributes,$=0,_=g&&g.length;_>$;$++){var b=!1,S=!1;f=g[$],d=f.name,v=fr(f.value),p=Jt(d),(m=ft.test(p))&&(d=d.replace(Yr,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var T=p.replace(/(Start|End)$/,"");j(T)&&p===T+"Start"&&(b=d,S=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),h=Jt(d.toLowerCase()),c[h]=d,(m||!n.hasOwnProperty(h))&&(n[h]=v,Lt(e,h)&&(n[h]=!0)),et(e,t,v,h,m),U(t,h,"A",i,r,b,S)}if(a=e.className,w(a)&&(a=a.animVal),y(a)&&""!==a)for(;o=u.exec(a);)h=Jt(o[2]),U(t,h,"C",i,r)&&(n[h]=fr(o[3])),a=a.substr(o.index+o[0].length);break;case $r:Z(t,e.nodeValue);break;case wr:try{o=l.exec(e.nodeValue),o&&(h=Jt(o[1]),U(t,h,"M",i,r)&&(n[h]=fr(o[2])))}catch(x){}}return t.sort(X),t}function R(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Wr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==gr&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0)}else i.push(e);return Qi(i)}function z(e,t,n){return function(i,r,o,a,s){return r=R(r[0],t,n),e(i,r,o,a,s)}}function F(e,a,s,c,l,u,f,d,h){function p(e,t,n,i){e&&(n&&(e=z(e,n,i)),e.require=x.require,e.directiveName=C,(O===x||x.$$isolateScope)&&(e=it(e,{isolateScope:!0})),f.push(e)),t&&(n&&(t=z(t,n,i)),t.require=x.require,t.directiveName=C,(O===x||x.$$isolateScope)&&(t=it(t,{isolateScope:!0})),d.push(t))}function v(e,t,n,i){var r,a,s="data",c=!1,l=n;if(y(t)){if(a=t.match(g),t=t.substring(a[0].length),a[3]&&(a[1]?a[3]=null:a[1]=a[3]),"^"===a[1]?s="inheritedData":"^^"===a[1]&&(s="inheritedData",l=n.parent()),"?"===a[2]&&(c=!0),r=null,i&&"data"===s&&(r=i[t])&&(r=r.instance),r=r||l[s]("$"+t+"Controller"),!r&&!c)throw Wr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return r||null}return ur(t)&&(r=[],o(t,function(t){r.push(v(e,t,n,i))})),r}function _(e,t,r,c,l){function u(e,t,i){var r;return E(e)||(i=t,t=e,e=n),j&&(r=_),i||(i=j?S.parent():S),l(e,t,r,i,A)}var h,p,g,w,y,_,b,S,x;if(a===r?(x=s,S=s.$$element):(S=Qi(r),x=new at(S,s)),O&&(y=t.$new(!0)),l&&(b=u,b.$$boundTransclude=l),P&&(T={},_={},o(P,function(e){var n,i={$scope:e===O||e.$$isolateScope?y:t,$element:S,$attrs:x,$transclude:b};w=e.controller,"@"==w&&(w=x[e.name]),n=$(w,i,!0,e.controllerAs),_[e.name]=n,j||S.data("$"+e.name+"Controller",n.instance),T[e.name]=n})),O){I.$$addScopeInfo(S,y,!0,!(V&&(V===O||V===O.$$originalDirective))),I.$$addScopeClass(S,!0);var C=T&&T[O.name],k=y;C&&C.identifier&&O.bindToController===!0&&(k=C.instance),o(y.$$isolateBindings=O.$$isolateBindings,function(e,n){var r,o,a,s,c=e.attrName,l=e.optional,u=e.mode;switch(u){case"@":x.$observe(c,function(e){k[n]=e}),x.$$observers[c].$$scope=t,x[c]&&(k[n]=i(x[c])(t));break;case"=":if(l&&!x[c])return;o=m(x[c]),s=o.literal?B:function(e,t){return e===t||e!==e&&t!==t},a=o.assign||function(){throw r=k[n]=o(t),Wr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",x[c],O.name)},r=k[n]=o(t);var f=function(e){return s(e,k[n])||(s(e,r)?a(t,e=k[n]):k[n]=e),r=e};f.$stateful=!0;var d;d=e.collection?t.$watchCollection(x[c],f):t.$watch(m(x[c],f),null,o.literal),y.$on("$destroy",d);break;case"&":o=m(x[c]),k[n]=function(e){return o(t,e)}}})}for(T&&(o(T,function(e){e()}),T=null),h=0,p=f.length;p>h;h++)g=f[h],ot(g,g.isolateScope?y:t,S,x,g.require&&v(g.directiveName,g.require,S,_),b);var A=t;for(O&&(O.template||null===O.templateUrl)&&(A=y),e&&e(A,r.childNodes,n,l),h=d.length-1;h>=0;h--)g=d[h],ot(g,g.isolateScope?y:t,S,x,g.require&&v(g.directiveName,g.require,S,_),b)}h=h||{};for(var b,T,x,C,k,A,D,M=-Number.MAX_VALUE,P=h.controllerDirectives,O=h.newIsolateScopeDirective,V=h.templateDirective,L=h.nonTlbTranscludeDirective,F=!1,U=!1,j=h.hasElementTranscludeDirective,X=s.$$element=Qi(a),Z=u,Q=c,et=0,nt=e.length;nt>et;et++){x=e[et];var rt=x.$$start,st=x.$$end;if(rt&&(X=R(a,rt,st)),k=n,M>x.priority)break;if((D=x.scope)&&(x.templateUrl||(w(D)?(K("new/isolated scope",O||b,x,X),O=x):K("new/isolated scope",O,x,X)),b=b||x),C=x.name,!x.templateUrl&&x.controller&&(D=x.controller,P=P||{},K("'"+C+"' controller",P[C],x,X),P[C]=x),(D=x.transclude)&&(F=!0,x.$$tlb||(K("transclusion",L,x,X),L=x),"element"==D?(j=!0,M=x.priority,k=X,X=s.$$element=Qi(t.createComment(" "+C+": "+s[C]+" ")),a=X[0],tt(l,H(k),a),Q=I(k,c,M,Z&&Z.name,{nonTlbTranscludeDirective:L})):(k=Qi(_t(a)).contents(),X.empty(),Q=I(k,c))),x.template)if(U=!0,K("template",V,x,X),V=x,D=S(x.template)?x.template(X,s):x.template,D=ut(D),x.replace){if(Z=x,k=mt(D)?[]:en(J(x.templateNamespace,fr(D))),a=k[0],1!=k.length||a.nodeType!==gr)throw Wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",C,"");tt(l,X,a);var ct={$attr:{}},lt=N(a,[],ct),ft=e.splice(et+1,e.length-(et+1));O&&q(lt),e=e.concat(lt).concat(ft),W(s,ct),nt=e.length}else X.html(D);if(x.templateUrl)U=!0,K("template",V,x,X),V=x,x.replace&&(Z=x),_=Y(e.splice(et,e.length-et),X,s,l,F&&Q,f,d,{controllerDirectives:P,newIsolateScopeDirective:O,templateDirective:V,nonTlbTranscludeDirective:L}),nt=e.length;else if(x.compile)try{A=x.compile(X,s,Q),S(A)?p(null,A,rt,st):A&&p(A.pre,A.post,rt,st)}catch(dt){r(dt,G(X))}x.terminal&&(_.terminal=!0,M=Math.max(M,x.priority))}return _.scope=b&&b.scope===!0,_.transcludeOnThisElement=F,_.elementTranscludeOnThisElement=j,_.templateOnThisElement=U,_.transclude=Q,h.hasElementTranscludeDirective=j,_}function q(e){for(var t=0,n=e.length;n>t;t++)e[t]=h(e[t],{$$isolateScope:!0})}function U(t,i,o,c,l,u,f){if(i===l)return null;var d=null;if(a.hasOwnProperty(i))for(var p,v=e.get(i+s),m=0,g=v.length;g>m;m++)try{p=v[m],(c===n||c>p.priority)&&-1!=p.restrict.indexOf(o)&&(u&&(p=h(p,{$$start:u,$$end:f})),t.push(p),d=p)}catch($){r($)}return d}function j(t){if(a.hasOwnProperty(t))for(var n,i=e.get(t+s),r=0,o=i.length;o>r;r++)if(n=i[r],n.multiElement)return!0;return!1}function W(e,t){var n=t.$attr,i=e.$attr,r=e.$$element;o(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),o(t,function(t,o){"class"==o?(D(r,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,i[o]=n[o])})}function Y(e,t,n,i,r,a,s,l){var u,f,d=[],p=t[0],v=e.shift(),m=h(v,{templateUrl:null,transclude:null,replace:null,$$originalDirective:v}),g=S(v.templateUrl)?v.templateUrl(t,n):v.templateUrl,$=v.templateNamespace;return t.empty(),c(C.getTrustedResourceUrl(g)).then(function(c){var h,y,_,b;if(c=ut(c),v.replace){if(_=mt(c)?[]:en(J($,fr(c))),h=_[0],1!=_.length||h.nodeType!==gr)throw Wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v.name,g);y={$attr:{}},tt(i,t,h);var S=N(h,[],y);w(v.scope)&&q(S),e=S.concat(e),W(n,y)}else h=p,t.html(c);for(e.unshift(m),u=F(e,h,n,r,t,v,a,s,l),o(i,function(e,n){e==h&&(i[n]=t[0])}),f=P(t[0].childNodes,r);d.length;){var T=d.shift(),x=d.shift(),E=d.shift(),C=d.shift(),k=t[0];if(!T.$$destroyed){if(x!==p){var A=x.className;l.hasElementTranscludeDirective&&v.replace||(k=_t(h)),tt(E,Qi(x),k),D(Qi(k),A)}b=u.transcludeOnThisElement?L(T,u.transclude,C):C,u(f,T,k,i,b)}}d=null}),function(e,t,n,i,r){var o=r;t.$$destroyed||(d?d.push(t,n,i,o):(u.transcludeOnThisElement&&(o=L(t,u.transclude,r)),u(f,t,n,i,o)))}}function X(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function K(e,t,n,i){if(t)throw Wr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,G(i))}function Z(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),i=!!t.length;return i&&I.$$addBindingClass(t),function(e,t){var r=t.parent();i||I.$$addBindingClass(r),I.$$addBindingInfo(r,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function J(e,n){switch(e=Wi(e||"html")){case"svg":case"math":var i=t.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Q(e,t){if("srcdoc"==t)return C.HTML;var n=O(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?C.RESOURCE_URL:void 0}function et(e,t,n,r,o){var a=Q(e,r);o=d[r]||o;var s=i(n,!0,a,o);if(s){if("multiple"===r&&"select"===O(e))throw Wr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",G(e));t.push({priority:100,compile:function(){return{pre:function(e,t,c){var l=c.$$observers||(c.$$observers={});if(_.test(r))throw Wr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=c[r];u!==n&&(s=u&&i(u,!0,a,o),n=u),s&&(c[r]=s(e),(l[r]||(l[r]=[])).$$inter=!0,(c.$$observers&&c.$$observers[r].$$scope||e).$watch(s,function(e,t){"class"===r&&e!=t?c.$updateClass(e,t):c.$set(r,e)}))}}}})}}function tt(e,n,i){var r,o,a=n[0],s=n.length,c=a.parentNode;if(e)for(r=0,o=e.length;o>r;r++)if(e[r]==a){e[r++]=i;for(var l=r,u=l+s-1,f=e.length;f>l;l++,u++)f>u?e[l]=e[u]:delete e[l];e.length-=s-1,e.context===a&&(e.context=i);break}c&&c.replaceChild(i,a);var d=t.createDocumentFragment();d.appendChild(a),Qi(i).data(Qi(a).data()),er?(lr=!0,er.cleanData([a])):delete Qi.cache[a[Qi.expando]];for(var h=1,p=n.length;p>h;h++){var v=n[h];
Qi(v).remove(),d.appendChild(v),delete n[h]}n[0]=i,n.length=1}function it(e,t){return f(function(){return e.apply(null,arguments)},e,t)}function ot(e,t,n,i,o,a){try{e(t,n,i,o,a)}catch(s){r(s,G(n))}}var at=function(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;i>n;n++)r=o[n],this[r]=t[r]}else this.$attr={};this.$$element=e};at.prototype={$normalize:Jt,$addClass:function(e){e&&e.length>0&&k.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&k.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Qt(e,t);n&&n.length&&k.addClass(this.$$element,n);var i=Qt(t,e);i&&i.length&&k.removeClass(this.$$element,i)},$set:function(e,t,i,a){var s,c=this.$$element[0],l=Lt(c,e),u=Nt(c,e),f=e;if(l?(this.$$element.prop(e,t),a=l):u&&(this[u]=t,f=u),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=nt(e,"-"))),s=O(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=A(t,"src"===e);else if("img"===s&&"srcset"===e){for(var d="",h=fr(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,v=/\s/.test(h)?p:/(,)/,m=h.split(v),g=Math.floor(m.length/2),$=0;g>$;$++){var w=2*$;d+=A(fr(m[w]),!0),d+=" "+fr(m[w+1])}var y=fr(m[2*$]).split(/\s/);d+=A(fr(y[0]),!0),2===y.length&&(d+=" "+fr(y[1])),this[e]=t=d}i!==!1&&(null===t||t===n?this.$$element.removeAttr(a):this.$$element.attr(a,t));var _=this.$$observers;_&&o(_[f],function(e){try{e(t)}catch(n){r(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=lt()),r=i[e]||(i[e]=[]);return r.push(t),T.$evalAsync(function(){!r.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){V(r,t)}}};var st=i.startSymbol(),ct=i.endSymbol(),ut="{{"==st||"}}"==ct?v:function(e){return e.replace(/\{\{/g,st).replace(/}}/g,ct)},ft=/^ngAttr[A-Z]/;return I.$$addBindingInfo=b?function(e,t){var n=e.data("$binding")||[];ur(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,I.$$addBindingClass=b?function(e){D(e,"ng-binding")}:p,I.$$addScopeInfo=b?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:p,I.$$addScopeClass=b?function(e,t){D(e,t?"ng-isolate-scope":"ng-scope")}:p,I}]}function Jt(e){return vt(e.replace(Yr,""))}function Qt(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a==r[s])continue e;n+=(n.length>0?" ":"")+a}return n}function en(e){e=Qi(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===wr&&ir.call(e,t,1)}return e}function tn(){var e={},t=!1,r=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){at(t,"controller"),w(t)?f(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(o,a){function s(e,t,n,r){if(!e||!w(e.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}return function(i,c,l,u){var d,h,p,v;if(l=l===!0,u&&y(u)&&(v=u),y(i)){if(h=i.match(r),!h)throw Xr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);p=h[1],v=v||h[3],i=e.hasOwnProperty(p)?e[p]:st(c.$scope,p,!0)||(t?st(a,p,!0):n),ot(i,p,!0)}if(l){var m=(ur(i)?i[i.length-1]:i).prototype;return d=Object.create(m||null),v&&s(c,v,d,p||i.name),f(function(){return o.invoke(i,d,c,p),d},{instance:d,identifier:v})}return d=o.instantiate(i,c,p),v&&s(c,v,d,p||i.name),d}}]}function nn(){this.$get=["$window",function(e){return Qi(e.document)}]}function rn(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function on(e,t){if(y(e)){var n=e.replace(eo,"").trim();if(n){var i=t("Content-Type");(i&&0===i.indexOf(Kr)||an(n))&&(e=U(n))}}return e}function an(e){var t=e.match(Jr);return t&&Qr[t[0]].test(e)}function sn(e){var t,n,i,r=lt();return e?(o(e.split("\n"),function(e){i=e.indexOf(":"),t=Wi(fr(e.substr(0,i))),n=fr(e.substr(i+1)),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}function cn(e){var t=w(e)?e:n;return function(n){if(t||(t=sn(e)),n){var i=t[Wi(n)];return void 0===i&&(i=null),i}return t}}function ln(e,t,n,i){return S(i)?i(e,t,n):(o(i,function(i){e=i(e,t,n)}),e)}function un(e){return e>=200&&300>e}function fn(){var e=this.defaults={transformResponse:[on],transformRequest:[function(e){return!w(e)||C(e)||A(e)||k(e)?e:q(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:N(Zr),put:N(Zr),patch:N(Zr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return $(e)?(t=!!e,this):t};var r=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,c,l,u,d,h){function p(t){function r(e){var t=f({},e);return t.data=e.data?ln(e.data,e.headers,e.status,c.transformResponse):e.data,un(e.status)?t:d.reject(t)}function a(e){var t,n={};return o(e,function(e,i){S(e)?(t=e(),null!=t&&(n[i]=t)):n[i]=e}),n}function s(t){var n,i,r,o=e.headers,s=f({},t.headers);o=f({},o.common,o[Wi(t.method)]);e:for(n in o){i=Wi(n);for(r in s)if(Wi(r)===i)continue e;s[n]=o[n]}return a(s)}if(!sr.isObject(t))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var c=f({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);c.headers=s(t),c.method=Xi(c.method);var l=function(t){var i=t.headers,a=ln(t.data,cn(i),n,t.transformRequest);return g(a)&&o(i,function(e,t){"content-type"===Wi(t)&&delete i[t]}),g(t.withCredentials)&&!g(e.withCredentials)&&(t.withCredentials=e.withCredentials),_(t,a).then(r,r)},u=[l,n],h=d.when(c);for(o(E,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});u.length;){var p=u.shift(),v=u.shift();h=h.then(p,v)}return h.success=function(e){return h.then(function(t){e(t.data,t.status,t.headers,c)}),h},h.error=function(e){return h.then(null,function(t){e(t.data,t.status,t.headers,c)}),h},h}function v(){o(arguments,function(e){p[e]=function(t,n){return p(f(n||{},{method:e,url:t}))}})}function m(){o(arguments,function(e){p[e]=function(t,n,i){return p(f(i||{},{method:e,url:t,data:n}))}})}function _(i,r){function o(e,n,i,r){function o(){s(n,e,i,r)}h&&(un(e)?h.put(b,[e,n,sn(i),r]):h.remove(b)),t?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function s(e,t,n,r){t=Math.max(t,0),(un(t)?m.resolve:m.reject)({data:e,status:t,headers:cn(n),config:i,statusText:r})}function l(e){s(e.data,e.status,N(e.headers()),e.statusText)}function f(){var e=p.pendingRequests.indexOf(i);-1!==e&&p.pendingRequests.splice(e,1)}var h,v,m=d.defer(),y=m.promise,_=i.headers,b=T(i.url,i.params);if(p.pendingRequests.push(i),y.then(f,f),!i.cache&&!e.cache||i.cache===!1||"GET"!==i.method&&"JSONP"!==i.method||(h=w(i.cache)?i.cache:w(e.cache)?e.cache:x),h&&(v=h.get(b),$(v)?I(v)?v.then(l,l):ur(v)?s(v[1],v[0],N(v[2]),v[3]):s(v,200,{},"OK"):h.put(b,y)),g(v)){var S=oi(i.url)?c.cookies()[i.xsrfCookieName||e.xsrfCookieName]:n;S&&(_[i.xsrfHeaderName||e.xsrfHeaderName]=S),a(i.method,b,r,o,_,i.timeout,i.withCredentials,i.responseType)}return y}function T(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||g(e)||(ur(e)||(e=[e]),o(e,function(e){w(e)&&(e=b(e)?e.toISOString():q(e)),n.push(K(t)+"="+K(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var x=l("$http"),E=[];return o(r,function(e){E.unshift(y(e)?h.get(e):h.invoke(e))}),p.pendingRequests=[],v("get","delete","head","jsonp"),m("post","put","patch"),p.defaults=e,p}]}function dn(){return new e.XMLHttpRequest}function hn(){this.$get=["$browser","$window","$document",function(e,t,n){return pn(e,dn,e.defer,t.angular.callbacks,n[0])}]}function pn(e,t,i,r,a){function s(e,t,n){var i=a.createElement("script"),o=null;return i.type="text/javascript",i.src=e,i.async=!0,o=function(e){Er(i,"load",o),Er(i,"error",o),a.body.removeChild(i),i=null;var s=-1,c="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},xr(i,"load",o),xr(i,"error",o),a.body.appendChild(i),o}return function(a,c,l,u,f,d,h,v){function m(){y&&y(),_&&_.abort()}function g(t,r,o,a,s){T!==n&&i.cancel(T),y=_=null,t(r,o,a,s),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),c=c||e.url(),"jsonp"==Wi(a)){var w="_"+(r.counter++).toString(36);r[w]=function(e){r[w].data=e,r[w].called=!0};var y=s(c.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(e,t){g(u,e,r[w].data,"",t),r[w]=p})}else{var _=t();_.open(a,c,!0),o(f,function(e,t){$(e)&&_.setRequestHeader(t,e)}),_.onload=function(){var e=_.statusText||"",t="response"in _?_.response:_.responseText,n=1223===_.status?204:_.status;0===n&&(n=t?200:"file"==ri(c).protocol?404:0),g(u,n,t,_.getAllResponseHeaders(),e)};var b=function(){g(u,-1,null,null,"")};if(_.onerror=b,_.onabort=b,h&&(_.withCredentials=!0),v)try{_.responseType=v}catch(S){if("json"!==v)throw S}_.send(l||null)}if(d>0)var T=i(m,d);else I(d)&&d.then(m)}}function vn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(e){return"\\\\\\"+e}function a(o,a,d,h){function p(n){return n.replace(l,e).replace(u,t)}function v(e){try{return e=A(e),h&&!$(e)?e:D(e)}catch(t){var n=to("interr","Can't interpolate: {0}\n{1}",o,t.toString());i(n)}}h=!!h;for(var m,w,y,_=0,b=[],T=[],x=o.length,E=[],C=[];x>_;){if(-1==(m=o.indexOf(e,_))||-1==(w=o.indexOf(t,m+s))){_!==x&&E.push(p(o.substring(_)));break}_!==m&&E.push(p(o.substring(_,m))),y=o.substring(m+s,w),b.push(y),T.push(n(y,v)),_=w+c,C.push(E.length),E.push("")}if(d&&E.length>1)throw to("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!a||b.length){var k=function(e){for(var t=0,n=b.length;n>t;t++){if(h&&g(e[t]))return;E[C[t]]=e[t]}return E.join("")},A=function(e){return d?r.getTrusted(d,e):r.valueOf(e)},D=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=q(e)}return e};return f(function(e){var t=0,n=b.length,r=new Array(n);try{for(;n>t;t++)r[t]=T[t](e);return k(r)}catch(a){var s=to("interr","Can't interpolate: {0}\n{1}",o,a.toString());i(s)}},{exp:o,expressions:b,$$watchDelegate:function(e,t,n){var i;return e.$watchGroup(T,function(n,r){var o=k(n);S(t)&&t.call(this,o,n!==r?i:o,e),i=o},n)}})}}var s=e.length,c=t.length,l=new RegExp(e.replace(/./g,o),"g"),u=new RegExp(t.replace(/./g,o),"g");return a.startSymbol=function(){return e},a.endSymbol=function(){return t},a}]}function mn(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){function r(r,a,s,c){var l=t.setInterval,u=t.clearInterval,f=0,d=$(c)&&!c,h=(d?i:n).defer(),p=h.promise;return s=$(s)?s:0,p.then(null,null,r),p.$$intervalId=l(function(){h.notify(f++),s>0&&f>=s&&(h.resolve(f),u(p.$$intervalId),delete o[p.$$intervalId]),d||e.$apply()},a),o[p.$$intervalId]=h,p}var o={};return r.cancel=function(e){return e&&e.$$intervalId in o?(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0):!1},r}]}function gn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function $n(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=X(t[n]);return t.join("/")}function wn(e,t){var n=ri(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=d(n.port)||io[n.protocol]||null}function yn(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var i=ri(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=W(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function _n(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function bn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Sn(e){return e.replace(/(#.+)|#$/,"$1")}function Tn(e){return e.substr(0,bn(e).lastIndexOf("/")+1)}function xn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function En(e,t){this.$$html5=!0,t=t||"";var i=Tn(e);wn(e,this),this.$$parse=function(e){var t=_n(i,e);if(!y(t))throw ro("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,i);yn(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=Y(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=$n(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,c;return(a=_n(e,r))!==n?(s=a,c=(a=_n(t,a))!==n?i+(_n("/",a)||a):e+s):(a=_n(i,r))!==n?c=i+a:i==r+"/"&&(c=i),c&&this.$$parse(c),!!c}}function Cn(e,t){var n=Tn(e);wn(e,this),this.$$parse=function(i){function r(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var o,a=_n(e,i)||_n(n,i);"#"===a.charAt(0)?(o=_n(t,a),g(o)&&(o=a)):o=this.$$html5?a:"",yn(o,this),this.$$path=r(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var n=Y(this.$$search),i=this.$$hash?"#"+X(this.$$hash):"";this.$$url=$n(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t){return bn(e)==bn(t)?(this.$$parse(t),!0):!1}}function kn(e,t){this.$$html5=!0,Cn.apply(this,arguments);var n=Tn(e);this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,a;return e==bn(i)?o=i:(a=_n(n,i))?o=e+t+a:n===i+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=Y(this.$$search),i=this.$$hash?"#"+X(this.$$hash):"";this.$$url=$n(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+t+this.$$url}}function An(e){return function(){return this[e]}}function Dn(e,t){return function(n){return g(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function In(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return $(t)?(e=t,this):e},this.html5Mode=function(e){return D(e)?(t.enabled=e,this):w(e)?(D(e.enabled)&&(t.enabled=e.enabled),D(e.requireBase)&&(t.requireBase=e.requireBase),D(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){function s(e,t,n){var r=l.url(),o=l.$$state;try{i.url(e,t,n),l.$$state=i.state()}catch(a){throw l.url(r),l.$$state=o,a}}function c(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,u,f,d=i.baseHref(),h=i.url();if(t.enabled){if(!d&&t.requireBase)throw ro("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=xn(h)+(d||"/"),u=r.history?En:kn}else f=bn(h),u=Cn;l=new u(f,"#"+e),l.$$parseLinkUrl(h,h),l.$$state=i.state();var p=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var r=Qi(e.target);"a"!==O(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var s=r.prop("href"),c=r.attr("href")||r.attr("xlink:href");w(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=ri(s.animVal).href),p.test(s)||!s||r.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(s,c)&&(e.preventDefault(),l.absUrl()!=i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Sn(l.absUrl())!=Sn(h)&&i.url(l.absUrl(),!0);var v=!0;return i.onUrlChange(function(e,t){n.$evalAsync(function(){var i,r=l.absUrl(),o=l.$$state;l.$$parse(e),l.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,o).defaultPrevented,l.absUrl()===e&&(i?(l.$$parse(r),l.$$state=o,s(r,!1,o)):(v=!1,c(r,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var e=Sn(i.url()),t=Sn(l.absUrl()),o=i.state(),a=l.$$replace,u=e!==t||l.$$html5&&r.history&&o!==l.$$state;(v||u)&&(v=!1,n.$evalAsync(function(){var t=l.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,l.$$state,o).defaultPrevented;l.absUrl()===t&&(i?(l.$$parse(e),l.$$state=o):(u&&s(t,a,o===l.$$state?null:l.$$state),c(e,o)))})),l.$$replace=!1}),l}]}function Mn(){var e=!0,t=this;this.debugEnabled=function(t){return $(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},r=t[e]||t.log||p,a=!1;try{a=!!r.apply}catch(s){}return a?function(){var e=[];return o(arguments,function(t){e.push(i(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Pn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw ao("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function On(e,t){if(e){if(e.constructor===e)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw ao("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw ao("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw ao("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Vn(e,t){if(e){if(e.constructor===e)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===so||e===co||e===lo)throw ao("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Ln(e){return e.constant}function Nn(e,t,n,i,r){On(e,r),On(t,r);for(var o,a=n.split("."),s=0;a.length>1;s++){o=Pn(a.shift(),r);var c=0===s&&t&&t[o]||e[o];c||(c={},e[o]=c),e=On(c,r)}return o=Pn(a.shift(),r),On(e[o],r),e[o]=i,i}function Bn(e){return"constructor"==e}function Rn(e,t,i,r,o,a,s){Pn(e,a),Pn(t,a),Pn(i,a),Pn(r,a),Pn(o,a);var c=function(e){return On(e,a)},l=s||Bn(e)?c:v,u=s||Bn(t)?c:v,f=s||Bn(i)?c:v,d=s||Bn(r)?c:v,h=s||Bn(o)?c:v;return function(a,s){var c=s&&s.hasOwnProperty(e)?s:a;return null==c?c:(c=l(c[e]),t?null==c?n:(c=u(c[t]),i?null==c?n:(c=f(c[i]),r?null==c?n:(c=d(c[r]),o?null==c?n:c=h(c[o]):c):c):c):c)}}function Hn(e,t){return function(n,i){return e(n,i,On,t)}}function zn(e,t,i){var r=t.expensiveChecks,a=r?go:mo,s=a[e];if(s)return s;var c=e.split("."),l=c.length;if(t.csp)s=6>l?Rn(c[0],c[1],c[2],c[3],c[4],i,r):function(e,t){var o,a=0;do o=Rn(c[a++],c[a++],c[a++],c[a++],c[a++],i,r)(e,t),t=n,e=o;while(l>a);return o};else{var u="";r&&(u+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=r;o(c,function(e,t){Pn(e,i);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(r||Bn(e))&&(n="eso("+n+", fe)",f=!0),u+="if(s == null) return undefined;\ns="+n+";\n"}),u+="return s;";var d=new Function("s","l","eso","fe",u);d.toString=m(u),f&&(d=Hn(d,i)),s=d}return s.sharedGetter=!0,s.assign=function(t,n,i){return Nn(t,i,e,n,e)},a[e]=s,s}function Fn(e){return S(e.valueOf)?e.valueOf():$o.call(e)}function qn(){var e=lt(),t=lt();this.$get=["$filter","$sniffer",function(n,i){function r(e){var t=e;return e.sharedGetter&&(t=function(t,n){return e(t,n)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function a(e,t){for(var n=0,i=e.length;i>n;n++){var r=e[n];r.constant||(r.inputs?a(r.inputs,t):-1===t.indexOf(r)&&t.push(r))}return t}function s(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=Fn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function c(e,t,n,i){var r,o=i.$$inputs||(i.$$inputs=a(i.inputs,[]));if(1===o.length){var c=s;return o=o[0],e.$watch(function(e){var t=o(e);return s(t,c)||(r=i(e),c=t&&Fn(t)),r},t,n)}for(var l=[],u=0,f=o.length;f>u;u++)l[u]=s;return e.$watch(function(e){for(var t=!1,n=0,a=o.length;a>n;n++){var c=o[n](e);(t||(t=!s(c,l[n])))&&(l[n]=c&&Fn(c))}return t&&(r=i(e)),r},t,n)}function l(e,t,n,i){var r,o;return r=e.$watch(function(e){return i(e)},function(e,n,i){o=e,S(t)&&t.apply(this,arguments),$(e)&&i.$$postDigest(function(){$(o)&&r()})},n)}function u(e,t,n,i){function r(e){var t=!0;return o(e,function(e){$(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return i(e)},function(e,n,i){s=e,S(t)&&t.call(this,e,n,i),r(e)&&i.$$postDigest(function(){r(s)&&a()})},n)}function f(e,t,n,i){var r;return r=e.$watch(function(e){return i(e)},function(){S(t)&&t.apply(this,arguments),r()},n)}function d(e,t){if(!t)return e;var n=e.$$watchDelegate,i=n!==u&&n!==l,r=i?function(n,i){var r=e(n,i);return t(r,n,i)}:function(n,i){var r=e(n,i),o=t(r,n,i);return $(r)?o:r};return e.$$watchDelegate&&e.$$watchDelegate!==c?r.$$watchDelegate=e.$$watchDelegate:t.$stateful||(r.$$watchDelegate=c,r.inputs=[e]),r}var h={csp:i.csp,expensiveChecks:!1},v={csp:i.csp,expensiveChecks:!0};return function(i,o,a){var s,m,g;switch(typeof i){case"string":g=i=i.trim();var $=a?t:e;if(s=$[g],!s){":"===i.charAt(0)&&":"===i.charAt(1)&&(m=!0,i=i.substring(2));var w=a?v:h,y=new po(w),_=new vo(y,n,w);s=_.parse(i),s.constant?s.$$watchDelegate=f:m?(s=r(s),s.$$watchDelegate=s.literal?u:l):s.inputs&&(s.$$watchDelegate=c),$[g]=s}return d(s,o);case"function":return d(i,o);default:return d(p,o)}}}]}function Un(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return jn(function(t){e.$evalAsync(t)},t)}]}function Gn(){this.$get=["$browser","$exceptionHandler",function(e,t){return jn(function(t){e.defer(t)},t)}]}function jn(e,t){function r(e,t,n){function i(t){return function(n){r||(r=!0,t.call(e,n))}}var r=!1;return[i(t),i(n)]}function a(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function c(e){var i,r,o;o=e.pending,e.processScheduled=!1,e.pending=n;for(var a=0,s=o.length;s>a;++a){r=o[a][0],i=o[a][e.status];try{S(i)?r.resolve(i(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(c){r.reject(c),t(c)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){c(t)}))}function u(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(e){var t=new u,n=0,i=ur(e)?[]:{};return o(e,function(e,r){n++,g(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}var d=i("$q",TypeError),h=function(){return new u};a.prototype={then:function(e,t,n){var i=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&l(this.$$state),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return m(t,!0,e)},function(t){return m(t,!1,e)},t)}},u.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(d("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,i;i=r(this,this.$$resolve,this.$$reject);try{(w(e)||S(e))&&(n=e&&e.then),S(n)?(this.promise.$$state.status=-1,n.call(e,i[0],i[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(o){i[1](o),t(o)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&e(function(){for(var e,r,o=0,a=i.length;a>o;o++){r=i[o][0],e=i[o][3];try{r.notify(S(e)?e(n):n)}catch(s){t(s)}}})}};var p=function(e){var t=new u;return t.reject(e),t.promise},v=function(e,t){var n=new u;return t?n.resolve(e):n.reject(e),n.promise},m=function(e,t,n){var i=null;try{S(n)&&(i=n())}catch(r){return v(r,!1)}return I(i)?i.then(function(){return v(e,t)},function(e){return v(e,!1)}):v(e,t)},g=function(e,t,n,i){var r=new u;return r.resolve(e),r.promise.then(t,n,i)},$=function y(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}if(!S(e))throw d("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof y))return new y(e);var i=new u;return e(t,n),i.promise};return $.defer=h,$.reject=p,$.when=g,$.all=f,$}function Wn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=r,o}]}function Yn(){var e=10,t=i("$rootScope"),n=null,a=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,s,c,u){function f(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function d(e){if(_.$$phase)throw t("inprog","{0} already in progress",_.$$phase);_.$$phase=e}function h(){_.$$phase=null}function v(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function m(){}function $(){for(;x.length;)try{x.shift()()}catch(e){s(e)}a=null}function y(){null===a&&(a=u.defer(function(){_.$apply($)}))}f.prototype={constructor:f,$new:function(e,t){function n(){i.$$destroyed=!0}var i;return t=t||this,e?(i=new f,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=l(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),i=new this.$$ChildScope),i.$parent=t,i.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=i,t.$$childTail=i):t.$$childHead=t.$$childTail=i,(e||t!=this)&&i.$on("$destroy",n),i},$watch:function(e,t,i){var r=c(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,i,r);var o=this,a=o.$$watchers,s={fn:t,last:m,get:r,exp:e,eq:!!i};return n=null,S(t)||(s.fn=p),a||(a=o.$$watchers=[]),a.unshift(s),function(){V(a,s),n=null}},$watchGroup:function(e,t){function n(){c=!1,l?(l=!1,t(r,r,s)):t(r,i,s)}var i=new Array(e.length),r=new Array(e.length),a=[],s=this,c=!1,l=!0;if(!e.length){var u=!0;return s.$evalAsync(function(){u&&t(r,r,s)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){r[0]=e,i[0]=n,t(r,e===n?r:i,o)}):(o(e,function(e,t){var o=s.$watch(e,function(e,o){r[t]=e,i[t]=o,c||(c=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,i,s,c;if(!g(o)){if(w(o))if(r(o)){a!==h&&(a=h,m=a.length=0,f++),t=o.length,m!==t&&(f++,a.length=m=t);for(var l=0;t>l;l++)c=a[l],s=o[l],i=c!==c&&s!==s,i||c===s||(f++,a[l]=s)}else{a!==p&&(a=p={},m=0,f++),t=0;for(n in o)o.hasOwnProperty(n)&&(t++,s=o[n],c=a[n],n in a?(i=c!==c&&s!==s,i||c===s||(f++,a[n]=s)):(m++,a[n]=s,f++));if(m>t){f++;for(n in a)o.hasOwnProperty(n)||(m--,delete a[n])}}else a!==o&&(a=o,f++);return f}}function i(){if(v?(v=!1,t(o,o,l)):t(o,s,l),u)if(w(o))if(r(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)Yi.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,l=this,u=t.length>1,f=0,d=c(e,n),h=[],p={},v=!0,m=0;return this.$watch(d,i)},$digest:function(){var i,r,o,c,l,f,p,v,g,w,y=e,x=this,E=[];d("$digest"),u.$$checkUrlChange(),this===_&&null!==a&&(u.defer.cancel(a),$()),n=null;do{for(f=!1,v=x;b.length;){try{w=b.shift(),w.scope.$eval(w.expression,w.locals)}catch(C){s(C)}n=null}e:do{if(c=v.$$watchers)for(l=c.length;l--;)try{if(i=c[l])if((r=i.get(v))===(o=i.last)||(i.eq?B(r,o):"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))){if(i===n){f=!1;break e}}else f=!0,n=i,i.last=i.eq?L(r,null):r,i.fn(r,o===m?r:o,v),5>y&&(g=4-y,E[g]||(E[g]=[]),E[g].push({msg:S(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:r,oldVal:o}))}catch(C){s(C)}if(!(p=v.$$childHead||v!==x&&v.$$nextSibling))for(;v!==x&&!(p=v.$$nextSibling);)v=v.$parent}while(v=p);if((f||b.length)&&!y--)throw h(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,E)}while(f||b.length);for(h();T.length;)try{T.shift()()}catch(C){s(C)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==_){for(var t in this.$$listenerCount)v(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){_.$$phase||b.length||u.defer(function(){b.length&&_.$digest()}),b.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{return d("$apply"),this.$eval(e)}catch(t){s(t)}finally{h();try{_.$digest()}catch(t){throw s(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&x.push(t),y()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,v(r,1,e))}},$emit:function(e){var t,n,i,r=[],o=this,a=!1,c={name:e,targetScope:o,stopPropagation:function(){a=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=R([c],arguments,1);do{for(t=o.$$listeners[e]||r,c.currentScope=o,n=0,i=t.length;i>n;n++)if(t[n])try{t[n].apply(null,l)}catch(u){s(u)}else t.splice(n,1),n--,i--;if(a)return c.currentScope=null,c;o=o.$parent}while(o);return c.currentScope=null,c},$broadcast:function(e){var t=this,n=t,i=t,r={name:e,targetScope:t,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!t.$$listenerCount[e])return r;for(var o,a,c,l=R([r],arguments,1);n=i;){for(r.currentScope=n,o=n.$$listeners[e]||[],a=0,c=o.length;c>a;a++)if(o[a])try{o[a].apply(null,l)}catch(u){s(u)}else o.splice(a,1),a--,c--;if(!(i=n.$$listenerCount[e]&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(i=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var _=new f,b=_.$$asyncQueue=[],T=_.$$postDigestQueue=[],x=_.$$applyAsyncQueue=[];return _}]}function Xn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return $(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,o=i?t:e;return r=ri(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function Kn(e){if("self"===e)return e;if(y(e)){if(e.indexOf("***")>-1)throw wo("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=dr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")
}if(T(e))return new RegExp("^"+e.source+"$");throw wo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Zn(e){var t=[];return $(e)&&o(e,function(e){t.push(Kn(e))}),t}function Jn(){this.SCE_CONTEXTS=yo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Zn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Zn(e)),t},this.$get=["$injector",function(i){function r(e,t){return"self"===e?oi(t):!!e.exec(t.href)}function o(n){var i,o,a=ri(n.toString()),s=!1;for(i=0,o=e.length;o>i;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;o>i;i++)if(r(t[i],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var i=d.hasOwnProperty(e)?d[e]:null;if(!i)throw wo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw wo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new i(t)}function c(e){return e instanceof f?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||t===n||""===t)return t;var i=d.hasOwnProperty(e)?d[e]:null;if(i&&t instanceof i)return t.$$unwrapTrustedValue();if(e===yo.RESOURCE_URL){if(o(t))return t;throw wo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===yo.HTML)return u(t);throw wo("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(){throw wo("unsafe","Attempting to use an unsafe value in a safe context.")};i.has("$sanitize")&&(u=i.get("$sanitize"));var f=a(),d={};return d[yo.HTML]=a(f),d[yo.CSS]=a(f),d[yo.URL]=a(f),d[yo.JS]=a(f),d[yo.RESOURCE_URL]=a(d[yo.URL]),{trustAs:s,getTrusted:l,valueOf:c}}]}function Qn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Ji)throw wo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=N(yo);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=v),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,a=i.getTrusted,s=i.trustAs;return o(yo,function(e,t){var n=Wi(t);i[vt("parse_as_"+n)]=function(t){return r(e,t)},i[vt("get_trusted_"+n)]=function(t){return a(e,t)},i[vt("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function ei(){this.$get=["$window","$document",function(e,t){var n,i,r={},o=d((/android (\d+)/.exec(Wi((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,u=!1,f=!1;if(l){for(var h in l)if(i=c.exec(h)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),u=!!("transition"in l||n+"Transition"in l),f=!!("animation"in l||n+"Animation"in l),!o||u&&f||(u=y(s.body.style.webkitTransition),f=y(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||a),hasEvent:function(e){if("input"===e&&11>=Ji)return!1;if(g(r[e])){var t=s.createElement("div");r[e]="on"+e in t}return r[e]},csp:hr(),vendorPrefix:n,transitions:u,animations:f,android:o}}]}function ti(){this.$get=["$templateCache","$http","$q",function(e,t,n){function i(r,o){function a(e){if(!o)throw Wr("tpload","Failed to load template: {0}",r);return n.reject(e)}i.totalPendingRequests++;var s=t.defaults&&t.defaults.transformResponse;ur(s)?s=s.filter(function(e){return e!==on}):s===on&&(s=null);var c={cache:e,transformResponse:s};return t.get(r,c)["finally"](function(){i.totalPendingRequests--}).then(function(e){return e.data},a)}return i.totalPendingRequests=0,i}]}function ni(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),r=[];return o(i,function(e){var i=sr.element(e).data("$binding");i&&o(i,function(i){if(n){var o=new RegExp("(^|\\s)"+dr(t)+"(\\s|\\||$)");o.test(i)&&r.push(e)}else-1!=i.indexOf(t)&&r.push(e)})}),r},i.findModels=function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=n?"=":"*=",a="["+i[r]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function ii(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function o(o,s,c){var l,u=$(c)&&!c,f=(u?i:n).defer(),d=f.promise;return l=t.defer(function(){try{f.resolve(o())}catch(t){f.reject(t),r(t)}finally{delete a[d.$$timeoutId]}u||e.$apply()},s),d.$$timeoutId=l,a[l]=f,d}var a={};return o.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function ri(e){var t=e;return Ji&&(_o.setAttribute("href",t),t=_o.href),_o.setAttribute("href",t),{href:_o.href,protocol:_o.protocol?_o.protocol.replace(/:$/,""):"",host:_o.host,search:_o.search?_o.search.replace(/^\?/,""):"",hash:_o.hash?_o.hash.replace(/^#/,""):"",hostname:_o.hostname,port:_o.port,pathname:"/"===_o.pathname.charAt(0)?_o.pathname:"/"+_o.pathname}}function oi(e){var t=y(e)?ri(e):e;return t.protocol===bo.protocol&&t.host===bo.host}function ai(){this.$get=m(e)}function si(e){function t(i,r){if(w(i)){var a={};return o(i,function(e,n){a[n]=t(n,e)}),a}return e.factory(i+n,r)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",fi),t("date",bi),t("filter",ci),t("json",Si),t("limitTo",Ti),t("lowercase",Co),t("number",di),t("orderBy",xi),t("uppercase",ko)}function ci(){return function(e,t,n){if(!ur(e))return e;var i,r;switch(typeof t){case"function":i=t;break;case"boolean":case"number":case"string":r=!0;case"object":i=li(t,n,r);break;default:return e}return e.filter(i)}}function li(e,t,n){var i,r=w(e)&&"$"in e;return t===!0?t=B:S(t)||(t=function(e,t){return w(e)||w(t)?!1:(e=Wi(""+e),t=Wi(""+t),-1!==e.indexOf(t))}),i=function(i){return r&&!w(i)?ui(i,e.$,t,!1):ui(i,e,t,n)}}function ui(e,t,n,i,r){var o=typeof e,a=typeof t;if("string"===a&&"!"===t.charAt(0))return!ui(e,t.substring(1),n,i);if(ur(e))return e.some(function(e){return ui(e,t,n,i)});switch(o){case"object":var s;if(i){for(s in e)if("$"!==s.charAt(0)&&ui(e[s],t,n,!0))return!0;return r?!1:ui(e,t,n,!1)}if("object"===a){for(s in t){var c=t[s];if(!S(c)){var l="$"===s,u=l?e:e[s];if(!ui(u,c,n,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function fi(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return g(n)&&(n=t.CURRENCY_SYM),g(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:hi(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function di(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:hi(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function hi(e,t,n,i,r){if(!isFinite(e)||w(e))return"";var o=0>e;e=Math.abs(e);var a=e+"",s="",c=[],l=!1;if(-1!==a.indexOf("e")){var u=a.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>r+1?e=0:(s=a,l=!0)}if(l)r>0&&1>e&&(s=e.toFixed(r),e=parseFloat(s));else{var f=(a.split(So)[1]||"").length;g(r)&&(r=Math.min(Math.max(t.minFrac,f),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var d=(""+e).split(So),h=d[0];d=d[1]||"";var p,v=0,m=t.lgSize,$=t.gSize;if(h.length>=m+$)for(v=h.length-m,p=0;v>p;p++)(v-p)%$===0&&0!==p&&(s+=n),s+=h.charAt(p);for(p=v;p<h.length;p++)(h.length-p)%m===0&&0!==p&&(s+=n),s+=h.charAt(p);for(;d.length<r;)d+="0";r&&"0"!==r&&(s+=i+d.substr(0,r))}return 0===e&&(o=!1),c.push(o?t.negPre:t.posPre,s,o?t.negSuf:t.posSuf),c.join("")}function pi(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function vi(e,t,n,i){return n=n||0,function(r){var o=r["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),pi(o,t,i)}}function mi(e,t){return function(n,i){var r=n["get"+e](),o=Xi(t?"SHORT"+e:e);return i[o][r]}}function gi(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=pi(Math[t>0?"floor":"ceil"](t/60),2)+pi(Math.abs(t%60),2)}function $i(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function wi(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function yi(e){return function(t){var n=$i(t.getFullYear()),i=wi(t),r=+i-+n,o=1+Math.round(r/6048e5);return pi(o,e)}}function _i(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function bi(e){function t(e){var t;if(t=e.match(n)){var i=new Date(0),r=0,o=0,a=t[8]?i.setUTCFullYear:i.setFullYear,s=t[8]?i.setUTCHours:i.setHours;t[9]&&(r=d(t[9]+t[10]),o=d(t[9]+t[11])),a.call(i,d(t[1]),d(t[2])-1,d(t[3]));var c=d(t[4]||0)-r,l=d(t[5]||0)-o,u=d(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(i,c,l,u,f),i}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var a,s,c="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,y(n)&&(n=Eo.test(n)?d(n):t(n)),_(n)&&(n=new Date(n)),!b(n))return n;for(;i;)s=xo.exec(i),s?(l=R(l,s,1),i=l.pop()):(l.push(i),i=null);return r&&"UTC"===r&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),o(l,function(t){a=To[t],c+=a?a(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function Si(){return function(e,t){return g(t)&&(t=2),q(e,t)}}function Ti(){return function(e,t){return _(e)&&(e=e.toString()),ur(e)||y(e)?(t=1/0===Math.abs(Number(t))?Number(t):d(t),t?t>0?e.slice(0,t):e.slice(t):y(e)?"":[]):e}}function xi(e){return function(t,n,i){function o(e,t){for(var i=0;i<n.length;i++){var r=n[i](e,t);if(0!==r)return r}return 0}function a(e,t){return t?function(t,n){return e(n,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function c(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))?e:"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function l(e,t){var n=typeof e,i=typeof t;return n===i&&"object"===n&&(e=c(e),t=c(t)),n===i?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):i>n?-1:1}return r(t)?(n=ur(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(t){var n=!1,i=t||v;if(y(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return a(l,n);if(i=e(t),i.constant){var r=i();return a(function(e,t){return l(e[r],t[r])},n)}}return a(function(e,t){return l(i(e),i(t))},n)}),nr.call(t).sort(a(o,i))):t}}function Ei(e){return S(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function Ci(e,t){e.$name=t}function ki(e,t,i,r,a){var s=this,c=[],l=s.$$parentForm=e.parent().controller("form")||Io;s.$error={},s.$$success={},s.$pending=n,s.$name=a(t.name||t.ngForm||"")(i),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,l.$addControl(s),s.$rollbackViewValue=function(){o(c,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){o(c,function(e){e.$commitViewValue()})},s.$addControl=function(e){at(e.$name,"input"),c.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],o(s.$pending,function(t,n){s.$setValidity(n,null,e)}),o(s.$error,function(t,n){s.$setValidity(n,null,e)}),o(s.$$success,function(t,n){s.$setValidity(n,null,e)}),V(c,e)},qi({ctrl:this,$element:e,set:function(e,t,n){var i=e[t];if(i){var r=i.indexOf(n);-1===r&&i.push(n)}else e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(V(i,n),0===i.length&&delete e[t])},parentForm:l,$animate:r}),s.$setDirty=function(){r.removeClass(e,ha),r.addClass(e,pa),s.$dirty=!0,s.$pristine=!1,l.$setDirty()},s.$setPristine=function(){r.setClass(e,ha,pa+" "+Mo),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(c,function(e){e.$setPristine()})},s.$setUntouched=function(){o(c,function(e){e.$setUntouched()})},s.$setSubmitted=function(){r.addClass(e,Mo),s.$submitted=!0,l.$setSubmitted()}}function Ai(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Di(e,t,n,i,r,o){Ii(e,t,n,i,r,o),Ai(i)}function Ii(e,t,n,i,r,o){var a=Wi(t[0].type);if(!r.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,c()})}var c=function(e){if(l&&(o.defer.cancel(l),l=null),!s){var r=t.val(),c=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(r=fr(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,c)}};if(r.hasEvent("input"))t.on("input",c);else{var l,u=function(e,t,n){l||(l=o.defer(function(){l=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",c),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)}}function Mi(e,t){if(b(e))return e;if(y(e)){Fo.lastIndex=0;var n=Fo.exec(e);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,c=0,l=$i(i),u=7*(r-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(i,0,l.getDate()+u,o,a,s,c)}}return 0/0}function Pi(e,t){return function(n,i){var r,a;if(b(n))return n;if(y(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Lo.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n))return r.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(r,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return 0/0}}function Oi(e,t,i,r){return function(o,a,s,c,l,u,f){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function h(e){return $(e)?b(e)?e:i(e):n}Vi(o,a,s,c),Ii(o,a,s,c,l,u);var p,v=c&&c.$options&&c.$options.timezone;if(c.$$parserName=e,c.$parsers.push(function(e){if(c.$isEmpty(e))return null;if(t.test(e)){var r=i(e,p);return"UTC"===v&&r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r}return n}),c.$formatters.push(function(e){if(e&&!b(e))throw $a("datefmt","Expected `{0}` to be a date",e);if(d(e)){if(p=e,p&&"UTC"===v){var t=6e4*p.getTimezoneOffset();p=new Date(p.getTime()+t)}return f("date")(e,r,v)}return p=null,""}),$(s.min)||s.ngMin){var m;c.$validators.min=function(e){return!d(e)||g(m)||i(e)>=m},s.$observe("min",function(e){m=h(e),c.$validate()})}if($(s.max)||s.ngMax){var w;c.$validators.max=function(e){return!d(e)||g(w)||i(e)<=w},s.$observe("max",function(e){w=h(e),c.$validate()})}}}function Vi(e,t,i,r){var o=t[0],a=r.$$hasNativeValidators=w(o.validity);a&&r.$parsers.push(function(e){var i=t.prop(ji)||{};return i.badInput&&!i.typeMismatch?n:e})}function Li(e,t,i,r,o,a){if(Vi(e,t,i,r),Ii(e,t,i,r,o,a),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:Ro.test(e)?parseFloat(e):n}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!_(e))throw $a("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),i.min||i.ngMin){var s;r.$validators.min=function(e){return r.$isEmpty(e)||g(s)||e>=s},i.$observe("min",function(e){$(e)&&!_(e)&&(e=parseFloat(e,10)),s=_(e)&&!isNaN(e)?e:n,r.$validate()})}if(i.max||i.ngMax){var c;r.$validators.max=function(e){return r.$isEmpty(e)||g(c)||c>=e},i.$observe("max",function(e){$(e)&&!_(e)&&(e=parseFloat(e,10)),c=_(e)&&!isNaN(e)?e:n,r.$validate()})}}function Ni(e,t,n,i,r,o){Ii(e,t,n,i,r,o),Ai(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||No.test(n)}}function Bi(e,t,n,i,r,o){Ii(e,t,n,i,r,o),Ai(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||Bo.test(n)}}function Ri(e,t,n,i){g(n.name)&&t.attr("name",l());var r=function(e){t[0].checked&&i.$setViewValue(n.value,e&&e.type)};t.on("click",r),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function Hi(e,t,n,r,o){var a;if($(r)){if(a=e(r),!a.constant)throw i("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return o}function zi(e,t,n,i,r,o,a,s){var c=Hi(s,e,"ngTrueValue",n.ngTrueValue,!0),l=Hi(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){i.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return e===!1},i.$formatters.push(function(e){return B(e,c)}),i.$parsers.push(function(e){return e?c:l})}function Fi(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r==t[o])continue e;n.push(r)}return n}function r(e){if(ur(e))return e;if(y(e))return e.split(" ");if(w(e)){var t=[];return o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(a,s,c){function l(e){var t=f(e,1);c.$addClass(t)}function u(e){var t=f(e,-1);c.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||{},i=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function d(e,t){var r=i(t,e),o=i(e,t);r=f(r,1),o=f(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}function h(e){if(t===!0||a.$index%2===t){var n=r(e||[]);if(p){if(!B(e,p)){var i=r(p);d(i,n)}}else l(n)}p=N(e)}var p;a.$watch(c[e],h,!0),c.$observe("class",function(){h(a.$eval(c[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,i){var o=1&n;if(o!==(1&i)){var s=r(a.$eval(c[e]));o===t?l(s):u(s)}})}}}]}function qi(e){function t(e,t,c){t===n?i("$pending",e,c):r("$pending",e,c),D(t)?t?(f(s.$error,e,c),u(s.$$success,e,c)):(u(s.$error,e,c),f(s.$$success,e,c)):(f(s.$error,e,c),f(s.$$success,e,c)),s.$pending?(o(ga,!0),s.$valid=s.$invalid=n,a("",null)):(o(ga,!1),s.$valid=Ui(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var l;l=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,a(e,l),d.$setValidity(e,l,s)}function i(e,t,n){s[e]||(s[e]={}),u(s[e],t,n)}function r(e,t,i){s[e]&&f(s[e],t,i),Ui(s[e])&&(s[e]=n)}function o(e,t){t&&!l[e]?(h.addClass(c,e),l[e]=!0):!t&&l[e]&&(h.removeClass(c,e),l[e]=!1)}function a(e,t){e=e?"-"+nt(e,"-"):"",o(fa+e,t===!0),o(da+e,t===!1)}var s=e.ctrl,c=e.$element,l={},u=e.set,f=e.unset,d=e.parentForm,h=e.$animate;l[da]=!(l[fa]=c.hasClass(fa)),s.$setValidity=t}function Ui(e){if(e)for(var t in e)return!1;return!0}var Gi=/^\/(.+)\/([a-z]*)$/,ji="validity",Wi=function(e){return y(e)?e.toLowerCase():e},Yi=Object.prototype.hasOwnProperty,Xi=function(e){return y(e)?e.toUpperCase():e},Ki=function(e){return y(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Zi=function(e){return y(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Wi=Ki,Xi=Zi);var Ji,Qi,er,tr,nr=[].slice,ir=[].splice,rr=[].push,or=Object.prototype.toString,ar=i("ng"),sr=e.angular||(e.angular={}),cr=0;Ji=t.documentMode,p.$inject=[],v.$inject=[];var lr,ur=Array.isArray,fr=function(e){return y(e)?e.trim():e},dr=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},hr=function(){if($(hr.isActive_))return hr.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return hr.isActive_=e},pr=["ng-","data-ng-","ng:","x-ng-"],vr=/[A-Z]/g,mr=!1,gr=1,$r=3,wr=8,yr=9,_r=11,br={full:"1.3.13",major:1,minor:3,dot:13,codeName:"meticulous-riffleshuffle"};yt.expando="ng339";var Sr=yt.cache={},Tr=1,xr=function(e,t,n){e.addEventListener(t,n,!1)},Er=function(e,t,n){e.removeEventListener(t,n,!1)};yt._data=function(e){return this.cache[e[this.expando]]||{}};var Cr=/([\:\-\_]+(.))/g,kr=/^moz([A-Z])/,Ar={mouseleave:"mouseout",mouseenter:"mouseover"},Dr=i("jqLite"),Ir=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Mr=/<|&#?\w+;/,Pr=/<([\w:]+)/,Or=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Vr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Vr.optgroup=Vr.option,Vr.tbody=Vr.tfoot=Vr.colgroup=Vr.caption=Vr.thead,Vr.th=Vr.td;var Lr=yt.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),yt(e).on("load",i))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Qi(e>=0?this[e]:this[this.length+e])},length:0,push:rr,sort:[].sort,splice:[].splice},Nr={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Nr[Wi(e)]=e});var Br={};o("input,select,option,textarea,button,form,details".split(","),function(e){Br[e]=!0});var Rr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:Et,removeData:Tt},function(e,t){yt[t]=e}),o({data:Et,inheritedData:Mt,scope:function(e){return Qi.data(e,"$scope")||Mt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Qi.data(e,"$isolateScope")||Qi.data(e,"$isolateScopeNoTemplate")},controller:It,injector:function(e){return Mt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ct,css:function(e,t,n){return t=vt(t),$(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,i){var r=Wi(t);if(Nr[r]){if(!$(i))return e[t]||(e.attributes.getNamedItem(t)||p).specified?r:n;i?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if($(i))e.setAttribute(t,i);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){return $(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(g(t)){var n=e.nodeType;return n===gr||n===$r?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(g(t)){if(e.multiple&&"select"===O(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return g(t)?e.innerHTML:(bt(e,!0),void(e.innerHTML=t))},empty:Pt},function(e,t){yt.prototype[t]=function(t,i){var r,o,a=this.length;if(e!==Pt&&(2==e.length&&e!==Ct&&e!==It?t:i)===n){if(w(t)){for(r=0;a>r;r++)if(e===Et)e(this[r],t);else for(o in t)e(this[r],o,t[o]);return this}for(var s=e.$dv,c=s===n?Math.min(a,1):a,l=0;c>l;l++){var u=e(this[l],t,i);s=s?s+u:u}return s}for(r=0;a>r;r++)e(this[r],t,i);return this}}),o({removeData:Tt,on:function Ga(e,t,n,i){if($(i))throw Dr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(gt(e)){var r=xt(e,!0),o=r.events,a=r.handle;a||(a=r.handle=Bt(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],c=s.length;c--;){t=s[c];var l=o[t];l||(o[t]=[],"mouseenter"===t||"mouseleave"===t?Ga(e,Ar[t],function(e){var n=this,i=e.relatedTarget;(!i||i!==n&&!n.contains(i))&&a(e,t)}):"$destroy"!==t&&xr(e,t,a),l=o[t]),l.push(n)}}},off:St,one:function(e,t,n){e=Qi(e),e.on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;bt(e),o(new yt(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===gr&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===gr||n===_r){t=new yt(t);for(var i=0,r=t.length;r>i;i++){var o=t[i];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===gr){var n=e.firstChild;o(new yt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Qi(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Ot,detach:function(e){Ot(e,!0)},after:function(e,t){var n=e,i=e.parentNode;t=new yt(t);for(var r=0,o=t.length;o>r;r++){var a=t[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:At,removeClass:kt,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var i=n;g(i)&&(i=!Ct(e,t)),(i?At:kt)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==_r?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:_t,triggerHandler:function(e,t,n){var i,r,a,s=t.type||t,c=xt(e),l=c&&c.events,u=l&&l[s];u&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(i=f(i,t)),r=N(u),a=n?[i].concat(n):[i],o(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){yt.prototype[t]=function(t,n,i){for(var r,o=0,a=this.length;a>o;o++)g(r)?(r=e(this[o],t,n,i),$(r)&&(r=Qi(r))):Dt(r,e(this[o],t,n,i));return $(r)?r:this},yt.prototype.bind=yt.prototype.on,yt.prototype.unbind=yt.prototype.off}),zt.prototype={put:function(e,t){this[Ht(e,this.nextUid)]=t},get:function(e){return this[Ht(e,this.nextUid)]},remove:function(e){var t=this[e=Ht(e,this.nextUid)];return delete this[e],t}};var Hr=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,zr=/,/,Fr=/^\s*(_?)(\S+?)\1\s*$/,qr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ur=i("$injector");Ut.$$annotate=qt;var Gr=i("$animate"),jr=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var i=t+"-animation";if(t&&"."!=t.charAt(0))throw Gr("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=i,e.factory(i,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){function i(t){var i,r=e.defer();return r.promise.$$cancelFn=function(){i&&i()},n.$$postDigest(function(){i=t(function(){r.resolve()})}),r.promise}function r(e,t){var n=[],i=[],r=lt();return o((e.attr("class")||"").split(/\s+/),function(e){r[e]=!0}),o(t,function(e,t){var o=r[t];e===!1&&o?i.push(t):e!==!0||o||n.push(t)}),n.length+i.length>0&&[n.length?n:null,i.length?i:null]}function a(e,t,n){for(var i=0,r=t.length;r>i;++i){var o=t[i];e[o]=n}}function s(){return l||(l=e.defer(),t(function(){l.resolve(),l=null})),l.promise}function c(e,t){if(sr.isObject(t)){var n=f(t.from||{},t.to||{});e.css(n)}}var l;return{animate:function(e,t,n){return c(e,{from:t,to:n}),s()},enter:function(e,t,n,i){return c(e,i),n?n.after(e):t.prepend(e),s()},leave:function(e){return e.remove(),s()},move:function(e,t,n,i){return this.enter(e,t,n,i)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=Qi(e),t=y(t)?t:ur(t)?t.join(" "):"",o(e,function(e){At(e,t)}),c(e,n),s()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=Qi(e),t=y(t)?t:ur(t)?t.join(" "):"",o(e,function(e){kt(e,t)}),c(e,n),s()},setClass:function(e,t,n,o){var s=this,c="$$animateClasses",l=!1;e=Qi(e);var u=e.data(c);u?o&&u.options&&(u.options=sr.extend(u.options||{},o)):(u={classes:{},options:o},l=!0);var f=u.classes;return t=ur(t)?t:t.split(" "),n=ur(n)?n:n.split(" "),a(f,t,!0),a(f,n,!1),l&&(u.promise=i(function(t){var n=e.data(c);if(e.removeData(c),n){var i=r(e,n.classes);i&&s.$$setClassImmediately(e,i[0],i[1],n.options)}t()}),e.data(c,u)),u.promise},$$setClassImmediately:function(e,t,n,i){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),c(e,i),s()},enabled:p,cancel:p}}]}],Wr=i("$compile");Zt.$inject=["$provide","$$sanitizeUriProvider"];var Yr=/^((?:x|data)[\:\-_])/i,Xr=i("$controller"),Kr="application/json",Zr={"Content-Type":Kr+";charset=utf-8"},Jr=/^\[|^\{(?!\{)/,Qr={"[":/]$/,"{":/}$/},eo=/^\)\]\}',?\n/,to=i("$interpolate"),no=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,io={http:80,https:443,ftp:21},ro=i("$location"),oo={$$html5:!1,$$replace:!1,absUrl:An("$$absUrl"),url:function(e){if(g(e))return this.$$url;var t=no.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:An("$$protocol"),host:An("$$host"),port:An("$$port"),path:Dn("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(y(e)||_(e))e=e.toString(),this.$$search=W(e);else{if(!w(e))throw ro("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=L(e,{}),o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:g(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Dn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([kn,Cn,En],function(e){e.prototype=Object.create(oo),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==En||!this.$$html5)throw ro("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=g(t)?null:t,this}});var ao=i("$parse"),so=Function.prototype.call,co=Function.prototype.apply,lo=Function.prototype.bind,uo=lt();o({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,uo[t]=e}),uo["this"]=function(e){return e},uo["this"].sharedGetter=!0;var fo=f(lt(),{"+":function(e,t,i,r){return i=i(e,t),r=r(e,t),$(i)?$(r)?i+r:i:$(r)?r:n},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),($(n)?n:0)-($(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"===":function(e,t,n,i){return n(e,t)===i(e,t)},"!==":function(e,t,n,i){return n(e,t)!==i(e,t)},"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return n(e,t)<i(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return n(e,t)<=i(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),ho={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},po=function(e){this.options=e};po.prototype={constructor:po,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=fo[t],o=fo[n],a=fo[i];if(r||o||a){var s=a?i:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e
},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=$(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw ao("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Wi(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=ho[o];n+=s||o}r=!1}else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var vo=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};vo.ZERO=f(function(){return 0},{sharedGetter:!0,constant:!0}),vo.prototype={constructor:vo,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in uo?e=uo[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t,n;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw ao("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===i||a===r||!t&&!n&&!i&&!r)return o}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return r?(this.tokens.shift(),r):!1},consume:function(e){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=fo[e];return f(function(e,i){return n(e,i,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,i){var r=fo[t];return f(function(t,i){return r(t,i,e,n)},{constant:e.constant&&n.constant,inputs:!i&&[e,n]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return zn(e,this.options,this.text)},constant:function(){var e=this.consume().value;return f(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var i,r=0,o=e.length;o>r;r++)i=e[r](t,n);return i}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},filter:function(e){var t,i,r=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],i=[];this.expect(":");)t.push(this.expression());var o=[e].concat(t||[]);return f(function(o,a){var s=e(o,a);if(i){i[0]=s;for(var c=t.length;c--;)i[c+1]=t[c](o,a);return r.apply(n,i)}return r(s)},{constant:!r.$stateful&&o.every(Ln),inputs:!r.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),f(function(t,i){return n.assign(t,e(t,i),i)},{inputs:[n,e]})):n},ternary:function(){var e,t,n=this.logicalOR();if((t=this.expect("?"))&&(e=this.assignment(),this.consume(":"))){var i=this.assignment();return f(function(t,r){return n(t,r)?e(t,r):i(t,r)},{constant:n.constant&&e.constant&&i.constant})}return n},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(vo.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return f(function(i,r,o){var a=o||e(i,r);return null==a?n:t(a)},{assign:function(n,i,r){var o=e(n,r);return o||e.assign(n,o={},r),t.assign(o,i)}})},objectIndex:function(e){var t=this.text,i=this.expression();return this.consume("]"),f(function(r,o){var a,s=e(r,o),c=i(r,o);return Pn(c,t),s?a=On(s[c],t):n},{assign:function(n,r,o){var a=Pn(i(n,o),t),s=On(e(n,o),t);return s||e.assign(n,s={},o),s[a]=r}})},functionCall:function(e,t){var i=[];if(")"!==this.peekToken().text)do i.push(this.expression());while(this.expect(","));this.consume(")");var r=this.text,o=i.length?[]:null;return function(a,s){var c=t?t(a,s):$(t)?n:a,l=e(a,s,c)||p;if(o)for(var u=i.length;u--;)o[u]=On(i[u](a,s),r);On(c,r),Vn(l,r);var f=l.apply?l.apply(c,o):l(o[0],o[1],o[2],o[3],o[4]);return o&&(o.length=0),On(f,r)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),f(function(t,n){for(var i=[],r=0,o=e.length;o>r;r++)i.push(e[r](t,n));return i},{literal:!0,constant:e.every(Ln),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),f(function(n,i){for(var r={},o=0,a=t.length;a>o;o++)r[e[o]]=t[o](n,i);return r},{literal:!0,constant:t.every(Ln),inputs:t})}};var mo=lt(),go=lt(),$o=Object.prototype.valueOf,wo=i("$sce"),yo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wr=i("$compile"),_o=t.createElement("a"),bo=ri(e.location.href);si.$inject=["$provide"],fi.$inject=["$locale"],di.$inject=["$locale"];var So=".",To={yyyy:vi("FullYear",4),yy:vi("FullYear",2,0,!0),y:vi("FullYear",1),MMMM:mi("Month"),MMM:mi("Month",!0),MM:vi("Month",2,1),M:vi("Month",1,1),dd:vi("Date",2),d:vi("Date",1),HH:vi("Hours",2),H:vi("Hours",1),hh:vi("Hours",2,-12),h:vi("Hours",1,-12),mm:vi("Minutes",2),m:vi("Minutes",1),ss:vi("Seconds",2),s:vi("Seconds",1),sss:vi("Milliseconds",3),EEEE:mi("Day"),EEE:mi("Day",!0),a:_i,Z:gi,ww:yi(2),w:yi(1)},xo=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Eo=/^\-?\d+$/;bi.$inject=["$locale"];var Co=m(Wi),ko=m(Xi);xi.$inject=["$parse"];var Ao=m({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref||t.name?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===or.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Do={};o(Nr,function(e,t){if("multiple"!=e){var n=Jt("ng-"+t);Do[n]=function(){return{restrict:"A",priority:100,link:function(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}}}}}),o(Rr,function(e,t){Do[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(Gi);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(i[t],function(e){i.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=Jt("ng-"+e);Do[t]=function(){return{priority:99,link:function(n,i,r){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===or.call(i.prop("href"))&&(a="xlinkHref",r.$attr[a]="xlink:href",o=null),r.$observe(t,function(t){return t?(r.$set(a,t),void(Ji&&o&&i.prop(o,r[a]))):void("href"===e&&r.$set(a,null))})}}}});var Io={$addControl:p,$$renameControl:Ci,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},Mo="ng-submitted";ki.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Po=function(e){return["$timeout",function(t){var i={name:"form",restrict:e?"EAC":"E",controller:ki,compile:function(e){return e.addClass(ha).addClass(fa),{pre:function(e,i,r,o){if(!("action"in r)){var a=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()};xr(i[0],"submit",a),i.on("$destroy",function(){t(function(){Er(i[0],"submit",a)},0,!1)})}var s=o.$$parentForm,c=o.$name;c&&(Nn(e,null,c,o,c),r.$observe(r.name?"name":"ngForm",function(t){c!==t&&(Nn(e,null,c,n,c),c=t,Nn(e,null,c,o,c),s.$$renameControl(o,c))})),i.on("$destroy",function(){s.$removeControl(o),c&&Nn(e,null,c,n,c),f(o,Io)})}}}};return i}]},Oo=Po(),Vo=Po(!0),Lo=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,No=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Bo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ro=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ho=/^(\d{4})-(\d{2})-(\d{2})$/,zo=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Fo=/^(\d{4})-W(\d\d)$/,qo=/^(\d{4})-(\d\d)$/,Uo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Go={text:Di,date:Oi("date",Ho,Pi(Ho,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Oi("datetimelocal",zo,Pi(zo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Oi("time",Uo,Pi(Uo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Oi("week",Fo,Mi,"yyyy-Www"),month:Oi("month",qo,Pi(qo,["yyyy","MM"]),"yyyy-MM"),number:Li,url:Ni,email:Bi,radio:Ri,checkbox:zi,hidden:p,button:p,submit:p,reset:p,file:p},jo=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,a,s){s[0]&&(Go[Wi(a.type)]||Go.text)(r,o,a,s[0],t,e,n,i)}}}}],Wo=/^(true|false|\d+)$/,Yo=function(){return{restrict:"A",priority:100,compile:function(e,t){return Wo.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Xo=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,i,r){e.$$addBindingInfo(i,r.ngBind),i=i[0],t.$watch(r.ngBind,function(e){i.textContent=e===n?"":e})}}}}],Ko=["$interpolate","$compile",function(e,t){return{compile:function(i){return t.$$addBindingClass(i),function(i,r,o){var a=e(r.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],o.$observe("ngBindTemplate",function(e){r.textContent=e===n?"":e})}}}}],Zo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var o=t(r.ngBindHtml),a=t(r.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(a,function(){i.html(e.getTrustedHtml(o(t))||"")})}}}}],Jo=m({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Qo=Fi("",!0),ea=Fi("Odd",0),ta=Fi("Even",1),na=Ei({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),ia=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ra={},oa={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Jt("ng-"+e);ra[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var r=function(){a(t,{$event:n})};oa[e]&&i.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var aa=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,c,l;n.$watch(r.ngIf,function(n){n?c||a(function(n,o){c=o,n[n.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),s={clone:n},e.enter(n,i.parent(),i)}):(l&&(l.remove(),l=null),c&&(c.$destroy(),c=null),s&&(l=ct(s.clone),e.leave(l).then(function(){l=null}),s=null))})}}}],sa=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:sr.noop,compile:function(r,o){var a=o.ngInclude||o.src,s=o.onload||"",c=o.autoscroll;return function(r,o,l,u,f){var d,h,p,v=0,m=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).then(function(){h=null}),h=p,p=null)};r.$watch(i.parseAsResourceUrl(a),function(i){var a=function(){!$(c)||c&&!r.$eval(c)||t()},l=++v;i?(e(i,!0).then(function(e){if(l===v){var t=r.$new();u.template=e;var c=f(t,function(e){m(),n.enter(e,null,o).then(a)});d=t,p=c,d.$emit("$includeContentLoaded",i),r.$eval(s)}},function(){l===v&&(m(),r.$emit("$includeContentError",i))}),r.$emit("$includeContentRequested",i)):(m(),u.template=null)})}}}}],ca=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){return/SVG/.test(i[0].toString())?(i.empty(),void e($t(o.template,t).childNodes)(n,function(e){i.append(e)},{futureParentElement:i})):(i.html(o.template),void e(i.contents())(n))}}}],la=Ei({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ua=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,i,r){var a=t.attr(i.$attr.ngList)||", ",s="false"!==i.ngTrim,c=s?fr(a):a,l=function(e){if(!g(e)){var t=[];return e&&o(e.split(c),function(e){e&&t.push(s?fr(e):e)}),t}};r.$parsers.push(l),r.$formatters.push(function(e){return ur(e)?e.join(a):n}),r.$isEmpty=function(e){return!e||!e.length}}}},fa="ng-valid",da="ng-invalid",ha="ng-pristine",pa="ng-dirty",va="ng-untouched",ma="ng-touched",ga="ng-pending",$a=new i("ngModel"),wa=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,i,r,a,s,c,l,u,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(i.name||"",!1)(e);var d=a(i.ngModel),h=d.assign,v=d,m=h,w=null,y=this;this.$$setOptions=function(e){if(y.$options=e,e&&e.getterSetter){var t=a(i.ngModel+"()"),n=a(i.ngModel+"($$$p)");v=function(e){var n=d(e);return S(n)&&(n=t(e)),n},m=function(e){S(d(e))?n(e,{$$$p:y.$modelValue}):h(e,y.$modelValue)}}else if(!d.assign)throw $a("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,G(r))},this.$render=p,this.$isEmpty=function(e){return g(e)||""===e||null===e||e!==e};var b=r.inheritedData("$formController")||Io,T=0;qi({ctrl:this,$element:r,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:b,$animate:s}),this.$setPristine=function(){y.$dirty=!1,y.$pristine=!0,s.removeClass(r,pa),s.addClass(r,ha)},this.$setDirty=function(){y.$dirty=!0,y.$pristine=!1,s.removeClass(r,ha),s.addClass(r,pa),b.$setDirty()},this.$setUntouched=function(){y.$touched=!1,y.$untouched=!0,s.setClass(r,va,ma)},this.$setTouched=function(){y.$touched=!0,y.$untouched=!1,s.setClass(r,ma,va)},this.$rollbackViewValue=function(){c.cancel(w),y.$viewValue=y.$$lastCommittedViewValue,y.$render()},this.$validate=function(){if(!_(y.$modelValue)||!isNaN(y.$modelValue)){var e=y.$$lastCommittedViewValue,t=y.$$rawModelValue,i=y.$$parserName||"parse",r=y.$error[i]?!1:n,o=y.$valid,a=y.$modelValue,s=y.$options&&y.$options.allowInvalid;y.$$runValidators(r,t,e,function(e){s||o===e||(y.$modelValue=e?t:n,y.$modelValue!==a&&y.$$writeModelToScope())})}},this.$$runValidators=function(e,t,i,r){function a(e){var t=y.$$parserName||"parse";if(e===n)l(t,null);else if(l(t,e),!e)return o(y.$validators,function(e,t){l(t,null)}),o(y.$asyncValidators,function(e,t){l(t,null)}),!1;return!0}function s(){var e=!0;return o(y.$validators,function(n,r){var o=n(t,i);e=e&&o,l(r,o)}),e?!0:(o(y.$asyncValidators,function(e,t){l(t,null)}),!1)}function c(){var e=[],r=!0;o(y.$asyncValidators,function(o,a){var s=o(t,i);if(!I(s))throw $a("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(a,n),e.push(s.then(function(){l(a,!0)},function(){r=!1,l(a,!1)}))}),e.length?u.all(e).then(function(){f(r)},p):f(!0)}function l(e,t){d===T&&y.$setValidity(e,t)}function f(e){d===T&&r(e)}T++;var d=T;return a(e)&&s()?void c():void f(!1)},this.$commitViewValue=function(){var e=y.$viewValue;c.cancel(w),(y.$$lastCommittedViewValue!==e||""===e&&y.$$hasNativeValidators)&&(y.$$lastCommittedViewValue=e,y.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){y.$modelValue!==s&&y.$$writeModelToScope()}var i=y.$$lastCommittedViewValue,r=i,o=g(r)?n:!0;if(o)for(var a=0;a<y.$parsers.length;a++)if(r=y.$parsers[a](r),g(r)){o=!1;break}_(y.$modelValue)&&isNaN(y.$modelValue)&&(y.$modelValue=v(e));var s=y.$modelValue,c=y.$options&&y.$options.allowInvalid;y.$$rawModelValue=r,c&&(y.$modelValue=r,t()),y.$$runValidators(o,r,y.$$lastCommittedViewValue,function(e){c||(y.$modelValue=e?r:n,t())})},this.$$writeModelToScope=function(){m(e,y.$modelValue),o(y.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){y.$viewValue=e,(!y.$options||y.$options.updateOnDefault)&&y.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,i=0,r=y.$options;r&&$(r.debounce)&&(n=r.debounce,_(n)?i=n:_(n[t])?i=n[t]:_(n["default"])&&(i=n["default"])),c.cancel(w),i?w=c(function(){y.$commitViewValue()},i):l.$$phase?y.$commitViewValue():e.$apply(function(){y.$commitViewValue()})},e.$watch(function(){var t=v(e);if(t!==y.$modelValue){y.$modelValue=y.$$rawModelValue=t;for(var i=y.$formatters,r=i.length,o=t;r--;)o=i[r](o);y.$viewValue!==o&&(y.$viewValue=y.$$lastCommittedViewValue=o,y.$render(),y.$$runValidators(n,t,o,p))}return t})}],ya=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:wa,priority:1,compile:function(t){return t.addClass(ha).addClass(va).addClass(fa),{pre:function(e,t,n,i){var r=i[0],o=i[1]||Io;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(e){r.$name!==e&&o.$$renameControl(r,e)}),e.$on("$destroy",function(){o.$removeControl(r)})},post:function(t,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],_a=/(\s+|^)default(\s+|$)/,ba=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var i=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=fr(this.$options.updateOn.replace(_a,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Sa=Ei({terminal:!0,priority:1e3}),Ta=["$locale","$interpolate",function(e,t){var n=/{}/g,i=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(r,a,s){function c(e){a.text(e||"")}var l,u=s.count,f=s.$attr.when&&a.attr(s.$attr.when),d=s.offset||0,h=r.$eval(f)||{},p={},v=t.startSymbol(),m=t.endSymbol(),g=v+u+"-"+d+m,$=sr.noop;o(s,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+Wi(n[2]);h[r]=a.attr(s.$attr[t])}}),o(h,function(e,i){p[i]=t(e.replace(n,g))}),r.$watch(u,function(t){var n=parseFloat(t),i=isNaN(n);i||n in h||(n=e.pluralCat(n-d)),n===l||i&&isNaN(l)||($(),$=r.$watch(p[n],c),l=n)})}}}],xa=["$parse","$animate",function(e,a){var s="$$NG_REMOVED",c=i("ngRepeat"),l=function(e,t,n,i,r,o,a){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,d){var h=d.ngRepeat,p=t.createComment(" end ngRepeat: "+h+" "),v=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!v)throw c("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var m=v[1],g=v[2],$=v[3],w=v[4];if(v=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!v)throw c("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var y=v[3]||v[1],_=v[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test($)))throw c("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);var b,S,T,x,E={$id:Ht};return w?b=e(w):(T=function(e,t){return Ht(t)},x=function(e){return e}),function(e,t,i,d,v){b&&(S=function(t,n,i){return _&&(E[_]=t),E[y]=n,E.$index=i,b(e,E)});var m=lt();e.$watchCollection(g,function(i){var d,g,w,b,E,C,k,A,D,I,M,P,O=t[0],V=lt();if($&&(e[$]=i),r(i))D=i,A=S||T;else{A=S||x,D=[];for(var L in i)i.hasOwnProperty(L)&&"$"!=L.charAt(0)&&D.push(L);D.sort()}for(b=D.length,M=new Array(b),d=0;b>d;d++)if(E=i===D?d:D[d],C=i[E],k=A(E,C,d),m[k])I=m[k],delete m[k],V[k]=I,M[d]=I;else{if(V[k])throw o(M,function(e){e&&e.scope&&(m[e.id]=e)}),c("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,k,C);M[d]={id:k,scope:n,clone:n},V[k]=!0}for(var N in m){if(I=m[N],P=ct(I.clone),a.leave(P),P[0].parentNode)for(d=0,g=P.length;g>d;d++)P[d][s]=!0;I.scope.$destroy()}for(d=0;b>d;d++)if(E=i===D?d:D[d],C=i[E],I=M[d],I.scope){w=O;do w=w.nextSibling;while(w&&w[s]);u(I)!=w&&a.move(ct(I.clone),null,Qi(O)),O=f(I),l(I.scope,d,y,C,_,E,b)}else v(function(e,t){I.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,a.enter(e,null,Qi(O)),O=n,I.clone=e,V[I.id]=I,l(I.scope,d,y,C,_,E,b)});m=V})}}}}],Ea="ng-hide",Ca="ng-hide-animate",ka=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,Ea,{tempClasses:Ca})})}}}],Aa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,Ea,{tempClasses:Ca})})}}}],Da=Ei(function(e,t,n){e.$watchCollection(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)})}),Ia=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,a){var s=r.ngSwitch||r.on,c=[],l=[],u=[],f=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var i,r;for(i=0,r=u.length;r>i;++i)e.cancel(u[i]);for(u.length=0,i=0,r=f.length;r>i;++i){var s=ct(l[i].clone);f[i].$destroy();var h=u[i]=e.leave(s);h.then(d(u,i))}l.length=0,f.length=0,(c=a.cases["!"+n]||a.cases["?"])&&o(c,function(n){n.transclude(function(i,r){f.push(r);var o=n.element;i[i.length++]=t.createComment(" end ngSwitchWhen: ");var a={clone:i};l.push(a),e.enter(i,o.parent(),o)})})})}}}],Ma=Ei({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:t})}}),Pa=Ei({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),Oa=Ei({restrict:"EAC",link:function(e,t,n,r,o){if(!o)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",G(t));o(function(e){t.empty(),t.append(e)})}}),Va=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],La=i("ngOptions"),Na=m({restrict:"A",terminal:!0}),Ba=["$compile","$parse",function(e,i){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:p};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var i,r,o=this,a={},c=s;o.databound=n.ngModel,o.init=function(e,t,n){c=e,i=t,r=n},o.addOption=function(t,n){at(t,'"option value"'),a[t]=!0,c.$viewValue==t&&(e.val(t),r.parent()&&r.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},o.removeOption=function(e){this.hasOption(e)&&(delete a[e],c.$viewValue===e&&this.renderUnknownOption(e))},o.renderUnknownOption=function(t){var n="? "+Ht(t)+" ?";r.val(n),e.prepend(r),e.val(n),r.prop("selected",!0)},o.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){o.renderUnknownOption=p})}],link:function(s,c,l,u){function f(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(x.parent()&&x.remove(),t.val(e),""===e&&p.prop("selected",!0)):g(e)&&p?t.val(""):i.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){x.parent()&&x.remove(),n.$setViewValue(t.val())})})}function d(e,t,n){var i;n.$render=function(){var e=new zt(n.$viewValue);o(t.find("option"),function(t){t.selected=$(e.get(t.value))})},e.$watch(function(){B(i,n.$viewValue)||(i=N(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function h(t,s,c){function l(e,n,i){return B[C]=i,D&&(B[D]=n),e(t,B)}function u(){t.$apply(function(){var e,n=P(t)||[];if(w)e=[],o(s.val(),function(t){t=V?L[t]:t,e.push(f(t,n[t]))});else{var i=V?L[s.val()]:s.val();e=f(i,n[i])}c.$setViewValue(e),g()})}function f(e,t){if("?"===e)return n;if(""===e)return null;var i=A?A:M;return l(i,e,t)}function d(){var e,n=P(t);if(n&&ur(n)){e=new Array(n.length);for(var i=0,r=n.length;r>i;i++)e[i]=l(E,i,n[i]);return e}if(n){e={};for(var o in n)n.hasOwnProperty(o)&&(e[o]=l(E,o,n[o]))}return e}function h(e){var t;if(w)if(V&&ur(e)){t=new zt([]);for(var n=0;n<e.length;n++)t.put(l(V,null,e[n]),!0)}else t=new zt(e);else V&&(e=l(V,null,e));return function(n,i){var r;return r=V?V:A?A:M,w?$(t.remove(l(r,n,i))):e===l(r,n,i)}}function p(){b||(t.$$postDigest(g),b=!0)}function m(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function g(){b=!1;var e,n,i,r,u,f,d,p,g,y,x,C,k,A,M,O,R,H={"":[]},z=[""],F=c.$viewValue,q=P(t)||[],U=D?a(q):q,G={},j=h(F),W=!1;for(L={},C=0;y=U.length,y>C;C++)d=C,D&&(d=U[C],"$"===d.charAt(0))||(p=q[d],e=l(I,d,p)||"",(n=H[e])||(n=H[e]=[],z.push(e)),k=j(d,p),W=W||k,O=l(E,d,p),O=$(O)?O:"",R=V?V(t,B):D?U[C]:C,V&&(L[R]=d),n.push({id:R,label:O,selected:k}));for(w||(_||null===F?H[""].unshift({id:"",label:"",selected:!W}):W||H[""].unshift({id:"?",label:"",selected:!0})),x=0,g=z.length;g>x;x++){for(e=z[x],n=H[e],N.length<=x?(r={element:T.clone().attr("label",e),label:n.label},u=[r],N.push(u),s.append(r.element)):(u=N[x],r=u[0],r.label!=e&&r.element.attr("label",r.label=e)),A=null,C=0,y=n.length;y>C;C++)i=n[C],(f=u[C+1])?(A=f.element,f.label!==i.label&&(m(G,f.label,!1),m(G,i.label,!0),A.text(f.label=i.label),A.prop("label",f.label)),f.id!==i.id&&A.val(f.id=i.id),A[0].selected!==i.selected&&(A.prop("selected",f.selected=i.selected),Ji&&A.prop("selected",f.selected))):(""===i.id&&_?M=_:(M=S.clone()).val(i.id).prop("selected",i.selected).attr("selected",i.selected).prop("label",i.label).text(i.label),u.push(f={element:M,label:i.label,id:i.id,selected:i.selected}),m(G,i.label,!0),A?A.after(M):r.element.append(M),A=M);for(C++;u.length>C;)i=u.pop(),m(G,i.label,!1),i.element.remove()}for(;N.length>x;){for(n=N.pop(),C=1;C<n.length;++C)m(G,n[C].label,!1);n[0].element.remove()}o(G,function(e,t){e>0?v.addOption(t):0>e&&v.removeOption(t)})}var x;if(!(x=y.match(r)))throw La("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",y,G(s));var E=i(x[2]||x[1]),C=x[4]||x[6],k=/ as /.test(x[0])&&x[1],A=k?i(k):null,D=x[5],I=i(x[3]||""),M=i(x[2]?x[1]:C),P=i(x[7]),O=x[8],V=O?i(x[8]):null,L={},N=[[{element:s,label:""}]],B={};_&&(e(_)(t),_.removeClass("ng-scope"),_.remove()),s.empty(),s.on("change",u),c.$render=g,t.$watchCollection(P,p),t.$watchCollection(d,p),w&&t.$watchCollection(function(){return c.$modelValue},p)}if(u[1]){for(var p,v=u[0],m=u[1],w=l.multiple,y=l.ngOptions,_=!1,b=!1,S=Qi(t.createElement("option")),T=Qi(t.createElement("optgroup")),x=S.clone(),E=0,C=c.children(),k=C.length;k>E;E++)if(""===C[E].value){p=_=C.eq(E);break}v.init(m,_,x),w&&(m.$isEmpty=function(e){return!e||0===e.length}),y?h(s,c,m):w?d(s,c,m):f(s,c,m,v)}}}}],Ra=["$interpolate",function(e){var t={addOption:p,removeOption:p};return{restrict:"E",priority:100,compile:function(n,i){if(g(i.value)){var r=e(n.text(),!0);r||i.$set("value",n.text())}return function(e,n,i){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.databound||(s=t),r?e.$watch(r,function(e,t){i.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,n)}):s.addOption(i.value,n),n.on("$destroy",function(){s.removeOption(i.value)})}}}}],Ha=m({restrict:"E",terminal:!1}),za=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},Fa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,o){if(o){var a,s=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(y(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,G(t));a=e||n,o.$validate()}),o.$validators.pattern=function(e){return o.$isEmpty(e)||g(a)||a.test(e)}}}}},qa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=d(e);r=isNaN(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return 0>r||i.$isEmpty(t)||t.length<=r}}}}},Ua=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;
n.$observe("minlength",function(e){r=d(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};e.angular.bootstrap||(it(),ht(sr),Qi(t).ready(function(){J(t,Q)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(e,t,n){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var e="$$ngAnimateChildren";return function(n,i,r){var o=r.ngAnimateChildren;t.isString(o)&&0===o.length?i.data(e,!0):n.$watch(o,function(t){i.data(e,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){n.offsetWidth+1;t()})}}]).config(["$provide","$animateProvider",function(i,r){function o(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==m)return n}}function a(e){return e&&t.element(e)}function s(e){return t.element(o(e))}function c(e,t){return o(e)==o(t)}var l,u=t.noop,f=t.forEach,d=r.$$selectors,h=t.isArray,p=t.isString,v=t.isObject,m=1,g="$$ngAnimateState",$="$$ngAnimateChildren",w="ng-animate",y={running:!0};i.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,n,i,m,_,b,S,T,x,E){function C(e,t){var n=e.data(g)||{};return t&&(n.running=!0,n.structural=!0,e.data(g,n)),n.disabled||n.running&&n.structural}function k(e){var t,i=n.defer();return i.promise.$$cancelFn=function(){t&&t()},S.$$postDigest(function(){t=e(function(){i.resolve()})}),i.promise}function A(e){return v(e)?(e.tempClasses&&p(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e):void 0}function D(e,t,n){n=n||{};var i={};f(n,function(e,t){f(t.split(" "),function(t){i[t]=e})});var r=Object.create(null);f((e.attr("class")||"").split(/\s+/),function(e){r[e]=!0});var o=[],a=[];return f(t&&t.classes||[],function(e,t){var n=r[t],s=i[t]||{};e===!1?(n||"addClass"==s.event)&&a.push(t):e===!0&&(n&&"removeClass"!=s.event||o.push(t))}),o.length+a.length>0&&[o.join(" "),a.join(" ")]}function I(e){if(e){var t=[],n={},r=e.substr(1).split(".");(m.transitions||m.animations)&&t.push(i.get(d[""]));for(var o=0;o<r.length;o++){var a=r[o],s=d[a];s&&!n[a]&&(t.push(i.get(s)),n[a]=!0)}return t}}function M(e,n,i,r){function o(e,t){var n=e[t],i=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return n||i?("leave"==t&&(i=n,n=null),b.push({event:t,fn:n}),w.push({event:t,fn:i}),!0):void 0}function a(t,n,o){function a(e){if(n){if((n[e]||u)(),++d<s.length)return;n=null}o()}var s=[];f(t,function(e){e.fn&&s.push(e)});var d=0;f(s,function(t,o){var s=function(){a(o)};switch(t.event){case"setClass":n.push(t.fn(e,c,l,s,r));break;case"animate":n.push(t.fn(e,i,r.from,r.to,s));break;case"addClass":n.push(t.fn(e,c||i,s,r));break;case"removeClass":n.push(t.fn(e,l||i,s,r));break;default:n.push(t.fn(e,s,r))}}),n&&0===n.length&&o()}var s=e[0];if(s){r&&(r.to=r.to||{},r.from=r.from||{});var c,l;h(i)&&(c=i[0],l=i[1],c?l?i=c+" "+l:(i=c,n="addClass"):(i=l,n="removeClass"));var d="setClass"==n,p=d||"addClass"==n||"removeClass"==n||"animate"==n,v=e.attr("class"),m=v+" "+i;if(H(m)){var g=u,$=[],w=[],y=u,_=[],b=[],S=(" "+m).replace(/\s+/g,".");return f(I(S),function(e){var t=o(e,n);!t&&d&&(o(e,"addClass"),o(e,"removeClass"))}),{node:s,event:n,className:i,isClassBased:p,isSetClassOperation:d,applyStyles:function(){r&&e.css(t.extend(r.from||{},r.to||{}))},before:function(e){g=e,a(w,$,function(){g=u,e()})},after:function(e){y=e,a(b,_,function(){y=u,e()})},cancel:function(){$&&(f($,function(e){(e||u)(!0)}),g(!0)),_&&(f(_,function(e){(e||u)(!0)}),y(!0))}}}}}function P(e,n,i,r,o,a,s,c){function d(t){var r="$animate:"+t;S&&S[r]&&S[r].length>0&&b(function(){i.triggerHandler(r,{event:e,className:n})})}function h(){d("before")}function p(){d("after")}function v(){d("close"),c()}function m(){m.hasBeenRun||(m.hasBeenRun=!0,a())}function $(){if(!$.hasBeenRun){_&&_.applyStyles(),$.hasBeenRun=!0,s&&s.tempClasses&&f(s.tempClasses,function(e){l.removeClass(i,e)});var t=i.data(g);t&&(_&&_.isClassBased?V(i,n):(b(function(){var t=i.data(g)||{};P==t.index&&V(i,n,e)}),i.data(g,t))),v()}}var y=u,_=M(i,e,n,s);if(!_)return m(),h(),p(),$(),y;e=_.event,n=_.className;var S=t.element._data(_.node);if(S=S&&S.events,r||(r=o?o.parent():i.parent()),L(i,r))return m(),h(),p(),$(),y;var T=i.data(g)||{},x=T.active||{},E=T.totalActive||0,C=T.last,k=!1;if(E>0){var A=[];if(_.isClassBased){if("setClass"==C.event)A.push(C),V(i,n);else if(x[n]){var D=x[n];D.event==e?k=!0:(A.push(D),V(i,n))}}else if("leave"==e&&x["ng-leave"])k=!0;else{for(var I in x)A.push(x[I]);T={},V(i,!0)}A.length>0&&f(A,function(e){e.cancel()})}if(!_.isClassBased||_.isSetClassOperation||"animate"==e||k||(k="addClass"==e==i.hasClass(n)),k)return m(),h(),p(),v(),y;x=T.active||{},E=T.totalActive||0,"leave"==e&&i.one("$destroy",function(){var e=t.element(this),n=e.data(g);if(n){var i=n.active["ng-leave"];i&&(i.cancel(),V(e,"ng-leave"))}}),l.addClass(i,w),s&&s.tempClasses&&f(s.tempClasses,function(e){l.addClass(i,e)});var P=B++;return E++,x[n]=_,i.data(g,{last:_,active:x,index:P,totalActive:E}),h(),_.before(function(t){var r=i.data(g);t=t||!r||!r.active[n]||_.isClassBased&&r.active[n].event!=e,m(),t===!0?$():(p(),_.after($))}),_.cancel}function O(e){var n=o(e);if(n){var i=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName(w):n.querySelectorAll("."+w);f(i,function(e){e=t.element(e);var n=e.data(g);n&&n.active&&f(n.active,function(e){e.cancel()})})}}function V(e,t){if(c(e,_))y.disabled||(y.running=!1,y.structural=!1);else if(t){var n=e.data(g)||{},i=t===!0;!i&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),(i||!n.totalActive)&&(l.removeClass(e,w),e.removeData(g))}}function L(e,n){if(y.disabled)return!0;if(c(e,_))return y.running;var i,r,o;do{if(0===n.length)break;var a=c(n,_),s=a?y:n.data(g)||{};if(s.disabled)return!0;if(a&&(o=!0),i!==!1){var l=n.data($);t.isDefined(l)&&(i=l)}r=r||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!o||!i&&r}l=E,_.data(g,y);var N=S.$watch(function(){return x.totalPendingRequests},function(e){0===e&&(N(),S.$$postDigest(function(){S.$$postDigest(function(){y.running=!1})}))}),B=0,R=r.classNameFilter(),H=R?function(e){return R.test(e)}:function(){return!0};return{animate:function(e,t,n,i,r){return i=i||"ng-inline-animate",r=A(r)||{},r.from=n?t:null,r.to=n?n:t,k(function(t){return P("animate",i,s(e),null,null,u,r,t)})},enter:function(n,i,r,o){return o=A(o),n=t.element(n),i=a(i),r=a(r),C(n,!0),e.enter(n,i,r),k(function(e){return P("enter","ng-enter",s(n),i,r,u,o,e)})},leave:function(n,i){return i=A(i),n=t.element(n),O(n),C(n,!0),k(function(t){return P("leave","ng-leave",s(n),null,null,function(){e.leave(n)},i,t)})},move:function(n,i,r,o){return o=A(o),n=t.element(n),i=a(i),r=a(r),O(n),C(n,!0),e.move(n,i,r),k(function(e){return P("move","ng-move",s(n),i,r,u,o,e)})},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(n,i,r,a){a=A(a);var c="$$animateClasses";if(n=t.element(n),n=s(n),C(n))return e.$$setClassImmediately(n,i,r,a);var l,u=n.data(c),d=!!u;return u||(u={},u.classes={}),l=u.classes,i=h(i)?i:i.split(" "),f(i,function(e){e&&e.length&&(l[e]=!0)}),r=h(r)?r:r.split(" "),f(r,function(e){e&&e.length&&(l[e]=!1)}),d?(a&&u.options&&(u.options=t.extend(u.options||{},a)),u.promise):(n.data(c,u={classes:l,options:a}),u.promise=k(function(t){var i=n.parent(),r=o(n),a=r.parentNode;if(!a||a.$$NG_REMOVED||r.$$NG_REMOVED)return void t();var s=n.data(c);n.removeData(c);var l=n.data(g)||{},u=D(n,s,l.active);return u?P("setClass",u,n,i,null,function(){u[0]&&e.$$addClassImmediately(n,u[0]),u[1]&&e.$$removeClassImmediately(n,u[1])},s.options,t):t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)V(t);else{var n=t.data(g)||{};n.disabled=!0,t.data(g,n)}break;case 1:y.disabled=!e;break;default:e=!y.disabled}return!!e}}}]),r.register("",["$window","$sniffer","$timeout","$$animateReflow",function(i,r,a,s){function c(){V||(V=s(function(){Y=[],V=null,j={}}))}function d(e,t){V&&V(),Y.push(t),V=s(function(){f(Y,function(e){e()}),Y=[],V=null,j={}})}function v(e,n){var i=o(e);e=t.element(i),Z.push(e);var r=Date.now()+n;K>=r||(a.cancel(X),K=r,X=a(function(){g(Z),Z=[]},n,!1))}function g(e){f(e,function(e){var t=e.data(F);t&&f(t.closeAnimationFns,function(e){e()})})}function $(e,t){var n=t?j[t]:null;if(!n){var r=0,o=0,a=0,s=0;f(e,function(e){if(e.nodeType==m){var t=i.getComputedStyle(e)||{},n=t[D+L];r=Math.max(w(n),r);var c=t[D+B];o=Math.max(w(c),o);{t[M+B]}s=Math.max(w(t[M+B]),s);var l=w(t[M+L]);l>0&&(l*=parseInt(t[M+R],10)||1),a=Math.max(l,a)}}),n={total:0,transitionDelay:o,transitionDuration:r,animationDelay:s,animationDuration:a},t&&(j[t]=n)}return n}function w(e){var t=0,n=p(e)?e.split(/\s*,\s*/):[];return f(n,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function y(e){var t=e.parent(),n=t.data(z);return n||(t.data(z,++W),n=W),n+"-"+o(e).getAttribute("class")}function _(e,t,n,i){var r=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,a=y(t),s=a+" "+n,c=j[s]?++j[s].total:0,u={};if(c>0){var f=n+"-stagger",d=a+" "+f,h=!j[d];h&&l.addClass(t,f),u=$(t,d),h&&l.removeClass(t,f)}l.addClass(t,n);var p=t.data(F)||{},v=$(t,s),m=v.transitionDuration,g=v.animationDuration;if(r&&0===m&&0===g)return l.removeClass(t,n),!1;var w=i||r&&m>0,_=g>0&&u.animationDelay>0&&0===u.animationDuration,b=p.closeAnimationFns||[];t.data(F,{stagger:u,cacheKey:s,running:p.running||0,itemIndex:c,blockTransition:w,closeAnimationFns:b});var x=o(t);return w&&(S(x,!0),i&&t.css(i)),_&&T(x,!0),!0}function b(e,t,n,i,r){function s(){t.off(B,c),l.removeClass(t,h),l.removeClass(t,p),L&&a.cancel(L),k(t,n);var e=o(t);for(var i in g)e.style.removeProperty(g[i])}function c(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(q));Math.max(n-N,0)>=M&&r>=A&&i()}var u=o(t),d=t.data(F);if(-1==u.getAttribute("class").indexOf(n)||!d)return void i();var h="",p="";f(n.split(" "),function(e,t){var n=(t>0?" ":"")+e;h+=n+"-active",p+=n+"-pending"});var m="",g=[],w=d.itemIndex,y=d.stagger,_=0;if(w>0){var b=0;y.transitionDelay>0&&0===y.transitionDuration&&(b=y.transitionDelay*w);var x=0;y.animationDelay>0&&0===y.animationDuration&&(x=y.animationDelay*w,g.push(O+"animation-play-state")),_=Math.round(100*Math.max(b,x))/100}_||(l.addClass(t,h),d.blockTransition&&S(u,!1));var E=d.cacheKey+" "+h,C=$(t,E),A=Math.max(C.transitionDuration,C.animationDuration);if(0===A)return l.removeClass(t,h),k(t,n),void i();!_&&r&&Object.keys(r).length>0&&(C.transitionDuration||(t.css("transition",C.animationDuration+"s linear all"),g.push("transition")),t.css(r));var D=Math.max(C.transitionDelay,C.animationDelay),M=D*G;if(g.length>0){var V=u.getAttribute("style")||"";";"!==V.charAt(V.length-1)&&(V+=";"),u.setAttribute("style",V+" "+m)}var L,N=Date.now(),B=P+" "+I,R=(D+A)*U,H=(_+R)*G;return _>0&&(l.addClass(t,p),L=a(function(){L=null,C.transitionDuration>0&&S(u,!1),C.animationDuration>0&&T(u,!1),l.addClass(t,h),l.removeClass(t,p),r&&(0===C.transitionDuration&&t.css("transition",C.animationDuration+"s linear all"),t.css(r),g.push("transition"))},_*G,!1)),t.on(B,c),d.closeAnimationFns.push(function(){s(),i()}),d.running++,v(t,H),s}function S(e,t){e.style[D+N]=t?"none":""}function T(e,t){e.style[M+H]=t?"paused":""}function x(e,t,n,i){return _(e,t,n,i)?function(e){e&&k(t,n)}:void 0}function E(e,t,n,i,r){return t.data(F)?b(e,t,n,i,r):(k(t,n),void i())}function C(e,t,n,i,r){var o=x(e,t,n,r.from);if(!o)return c(),void i();var a=o;return d(t,function(){a=E(e,t,n,i,r.to)}),function(e){(a||u)(e)}}function k(e,t){l.removeClass(e,t);var n=e.data(F);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(F))}function A(e,t){var n="";return e=h(e)?e:e.split(/\s+/),f(e,function(e,i){e&&e.length>0&&(n+=(i>0?" ":"")+e+t)}),n}var D,I,M,P,O="";e.ontransitionend===n&&e.onwebkittransitionend!==n?(O="-webkit-",D="WebkitTransition",I="webkitTransitionEnd transitionend"):(D="transition",I="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(O="-webkit-",M="WebkitAnimation",P="webkitAnimationEnd animationend"):(M="animation",P="animationend");var V,L="Duration",N="Property",B="Delay",R="IterationCount",H="PlayState",z="$$ngAnimateKey",F="$$ngAnimateCSS3Data",q=3,U=1.5,G=1e3,j={},W=0,Y=[],X=null,K=0,Z=[];return{animate:function(e,t,n,i,r,o){return o=o||{},o.from=n,o.to=i,C("animate",e,t,r,o)},enter:function(e,t,n){return n=n||{},C("enter",e,"ng-enter",t,n)},leave:function(e,t,n){return n=n||{},C("leave",e,"ng-leave",t,n)},move:function(e,t,n){return n=n||{},C("move",e,"ng-move",t,n)},beforeSetClass:function(e,t,n,i,r){r=r||{};var o=A(n,"-remove")+" "+A(t,"-add"),a=x("setClass",e,o,r.from);return a?(d(e,i),a):(c(),void i())},beforeAddClass:function(e,t,n,i){i=i||{};var r=x("addClass",e,A(t,"-add"),i.from);return r?(d(e,n),r):(c(),void n())},beforeRemoveClass:function(e,t,n,i){i=i||{};var r=x("removeClass",e,A(t,"-remove"),i.from);return r?(d(e,n),r):(c(),void n())},setClass:function(e,t,n,i,r){r=r||{},n=A(n,"-remove"),t=A(t,"-add");var o=n+" "+t;return E("setClass",e,o,i,r.to)},addClass:function(e,t,n,i){return i=i||{},E("addClass",e,A(t,"-add"),n,i.to)},removeClass:function(e,t,n,i){return i=i||{},E("removeClass",e,A(t,"-remove"),n,i.to)}}}])}])}(window,window.angular),function(e,t){"use strict";function n(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return o(t,c(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function i(e){var n=[],i=c(n,t.noop);return i.chars(e),n.join("")}function r(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function o(e,n){function i(e,i,o,s){if(i=t.lowercase(i),T[i])for(;w.last()&&x[w.last()];)r("",w.last());S[i]&&w.last()==i&&r("",i),s=y[i]||!!s,s||w.push(i);var c={};o.replace(d,function(e,t,n,i,r){var o=n||i||r||"";c[t]=a(o)}),n.start&&n.start(i,c,s)}function r(e,i){var r,o=0;if(i=t.lowercase(i))for(o=w.length-1;o>=0&&w[o]!=i;o--);if(o>=0){for(r=w.length-1;r>=o;r--)n.end&&n.end(w[r]);w.length=o}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var o,s,c,$,w=[],_=e;for(w.last=function(){return w[w.length-1]};e;){if($="",s=!0,w.last()&&C[w.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+w.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(g,"$1"),n.chars&&n.chars(a(t)),""}),r("",w.last())):(0===e.indexOf("<!--")?(o=e.indexOf("--",4),o>=0&&e.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(e.substring(4,o)),e=e.substring(o+3),s=!1)):m.test(e)?(c=e.match(m),c&&(e=e.replace(c[0],""),s=!1)):p.test(e)?(c=e.match(f),c&&(e=e.substring(c[0].length),c[0].replace(f,r),s=!1)):h.test(e)&&(c=e.match(u),c?(c[4]&&(e=e.substring(c[0].length),c[0].replace(u,i)),s=!1):($+="<",e=e.substring(1))),s&&(o=e.indexOf("<"),$+=0>o?e:e.substring(0,o),e=0>o?"":e.substring(o),n.chars&&n.chars(a($)))),e==_)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",e);_=e}r()}function a(e){if(!e)return"";var t=O.exec(e),n=t[1],i=t[3],r=t[2];return r&&(P.innerHTML=r.replace(/</g,"&lt;"),r="textContent"in P?P.textContent:P.innerText),n+r+i}function s(e){return e.replace(/&/g,"&amp;").replace($,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,n){var i=!1,r=t.bind(e,e.push);return{start:function(e,o,a){e=t.lowercase(e),!i&&C[e]&&(i=e),i||k[e]!==!0||(r("<"),r(e),t.forEach(o,function(i,o){var a=t.lowercase(o),c="img"===e&&"src"===a||"background"===a;M[a]!==!0||A[a]===!0&&!n(i,c)||(r(" "),r(o),r('="'),r(s(i)),r('"'))}),r(a?"/>":">"))},end:function(e){e=t.lowercase(e),i||k[e]!==!0||(r("</"),r(e),r(">")),e==i&&(i=!1)},chars:function(e){i||r(s(e))}}}var l=t.$$minErr("$sanitize"),u=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,d=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,p=/^<\//,v=/<!--(.*?)-->/g,m=/<!DOCTYPE([^>]*?)>/i,g=/<!\[CDATA\[(.*?)]]>/g,$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^\#-~| |!])/g,y=r("area,br,col,hr,img,wbr"),_=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),b=r("rp,rt"),S=t.extend({},b,_),T=t.extend({},_,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=t.extend({},b,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),E=r("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),C=r("script,style"),k=t.extend({},y,T,x,S,E),A=r("background,cite,href,longdesc,src,usemap,xlink:href"),D=r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),I=r("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),M=t.extend({},A,I,D),P=document.createElement("pre"),O=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,r=/^mailto:/;return function(o,a){function s(e){e&&h.push(i(e))}function c(e,n){h.push("<a "),t.isDefined(a)&&h.push('target="',a,'" '),h.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),h.push("</a>")}if(!o)return o;for(var l,u,f,d=o,h=[];l=d.match(n);)u=l[0],l[2]||l[4]||(u=(l[3]?"http://":"mailto:")+u),f=l.index,s(d.substr(0,f)),c(u,l[0].replace(r,"")),d=d.substring(f+l[0].length);return s(d),e(h.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function i(e,t){return B(new(B(function(){},{prototype:e})),t)}function r(e){return N(arguments,function(t){t!==e&&N(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var i in e.path){if(e.path[i]!==t.path[i])break;n.push(e.path[i])}return n}function a(e){if(Object.keys)return Object.keys(e);var n=[];return t.forEach(e,function(e,t){n.push(t)}),n}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,i=Number(arguments[2])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=n);n>i;i++)if(i in e&&e[i]===t)return i;return-1}function c(e,t,n,i){var r,c=o(n,i),l={},u=[];for(var f in c)if(c[f].params&&(r=a(c[f].params),r.length))for(var d in r)s(u,r[d])>=0||(u.push(r[d]),l[r[d]]=e[r[d]]);return B({},l,t)}function l(e,t,n){if(!n){n=[];for(var i in e)n.push(i)}for(var r=0;r<n.length;r++){var o=n[r];if(e[o]!=t[o])return!1}return!0}function u(e,t){var n={};return N(e,function(e){n[e]=t[e]}),n}function f(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in e)-1==s(n,i)&&(t[i]=e[i]);return t}function d(e,t){var n=L(e),i=n?[]:{};return N(e,function(e,r){t(e,r)&&(i[n?i.length:r]=e)}),i}function h(e,t){var n=L(e)?[]:{};return N(e,function(e,i){n[i]=t(e,i)}),n}function p(e,t){var i=1,o=2,c={},l=[],u=c,d=B(e.when(c),{$$promises:c,$$values:c});this.study=function(c){function h(e,n){if($[n]!==o){if(g.push(n),$[n]===i)throw g.splice(0,s(g,n)),new Error("Cyclic dependency: "+g.join(" -> "));if($[n]=i,O(e))m.push(n,[function(){return t.get(e)}],l);else{var r=t.annotate(e);N(r,function(e){e!==n&&c.hasOwnProperty(e)&&h(c[e],e)}),m.push(n,e,r)}g.pop(),$[n]=o}}function p(e){return V(e)&&e.then&&e.$$promises}if(!V(c))throw new Error("'invocables' must be an object");var v=a(c||{}),m=[],g=[],$={};return N(c,h),c=g=$=null,function(i,o,a){function s(){--y||(_||r(w,o.$$values),g.$$values=w,g.$$promises=g.$$promises||!0,delete g.$$inheritedValues,h.resolve(w))}function c(e){g.$$failure=e,h.reject(e)}function l(n,r,o){function l(e){f.reject(e),c(e)}function u(){if(!M(g.$$failure))try{f.resolve(t.invoke(r,a,w)),f.promise.then(function(e){w[n]=e,s()},l)}catch(e){l(e)}}var f=e.defer(),d=0;N(o,function(e){$.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(d++,$[e].then(function(t){w[e]=t,--d||u()},l))}),d||u(),$[n]=f.promise}if(p(i)&&a===n&&(a=o,o=i,i=null),i){if(!V(i))throw new Error("'locals' must be an object")}else i=u;if(o){if(!p(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=d;var h=e.defer(),g=h.promise,$=g.$$promises={},w=B({},i),y=1+m.length/3,_=!1;if(M(o.$$failure))return c(o.$$failure),g;o.$$inheritedValues&&r(w,f(o.$$inheritedValues,v)),B($,o.$$promises),o.$$values?(_=r(w,f(o.$$values,v)),g.$$inheritedValues=f(o.$$values,v),s()):(o.$$inheritedValues&&(g.$$inheritedValues=f(o.$$inheritedValues,v)),o.then(s,c));for(var b=0,S=m.length;S>b;b+=3)i.hasOwnProperty(m[b])?s():l(m[b],m[b+1],m[b+2]);return g}},this.resolve=function(e,t,n,i){return this.study(e)(t,n,i)}}function v(e,t,n){this.fromConfig=function(e,t,n){return M(e.template)?this.fromString(e.template,t):M(e.templateUrl)?this.fromUrl(e.templateUrl,t):M(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return P(e)?e(t):e},this.fromUrl=function(n,i){return P(n)&&(n=n(i)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,i){return n.invoke(e,null,i||{params:t})}}function m(e,t,r){function o(t,n,i,r){if(m.push(t),p[t])return p[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(v[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return v[t]=new H.Param(t,n,i,r),v[t]}function a(e,t,n){var i=["",""],r=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return r;switch(n){case!1:i=["(",")"];break;case!0:i=["?(",")?"];break;default:i=["("+n+"|",")?"]}return r+i[0]+t+i[1]}function s(n,r){var o,a,s,c,l;return o=n[2]||n[3],l=t.params[o],s=e.substring(d,n.index),a=r?n[4]:n[4]||("*"==n[1]?".*":null),c=H.type(a||"string")||i(H.type("string"),{pattern:new RegExp(a)}),{id:o,regexp:a,segment:s,type:c,cfg:l}}t=B({params:{}},V(t)?t:{});var c,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",d=0,h=this.segments=[],p=r?r.params:{},v=this.params=r?r.params.$$new():new H.ParamSet,m=[];this.source=e;for(var g,$,w;(c=l.exec(e))&&(g=s(c,!1),!(g.segment.indexOf("?")>=0));)$=o(g.id,g.type,g.cfg,"path"),f+=a(g.segment,$.type.pattern.source,$.squash),h.push(g.segment),d=l.lastIndex;w=e.substring(d);var y=w.indexOf("?");if(y>=0){var _=this.sourceSearch=w.substring(y);if(w=w.substring(0,y),this.sourcePath=e.substring(0,d+y),_.length>0)for(d=0;c=u.exec(_);)g=s(c,!0),$=o(g.id,g.type,g.cfg,"search"),d=l.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=a(w)+(t.strict===!1?"/?":"")+"$",h.push(w),this.regexp=new RegExp(f,t.caseInsensitive?"i":n),this.prefix=h[0],this.$$paramNames=m}function g(e){B(this,e)}function $(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function r(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function o(e){return this.pattern.test(e)}function c(){return{strict:w,caseInsensitive:v}}function l(e){return P(e)||L(e)&&P(e[e.length-1])}function u(){for(;S.length;){var e=S.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(_[e.name],p.invoke(e.def))}}function f(e){B(this,e||{})}H=this;var p,v=!1,w=!0,y=!1,_={},b=!0,S=[],T={string:{encode:e,decode:r,is:o,pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return M(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,is:t.identity,equals:t.equals,pattern:/.*/}};$.$$getDefaultValue=function(e){if(!l(e.value))return e.value;if(!p)throw new Error("Injectable functions cannot be called at configuration time");return p.invoke(e.value)},this.caseInsensitive=function(e){return M(e)&&(v=e),v},this.strictMode=function(e){return M(e)&&(w=e),w},this.defaultSquashPolicy=function(e){if(!M(e))return y;if(e!==!0&&e!==!1&&!O(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return y=e,e},this.compile=function(e,t){return new m(e,B(c(),t))},this.isMatcher=function(e){if(!V(e))return!1;var t=!0;return N(m.prototype,function(n,i){P(n)&&(t=t&&M(e[i])&&P(e[i]))}),t},this.type=function(e,t,n){if(!M(t))return _[e];if(_.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return _[e]=new g(B({name:e},t)),n&&(S.push({name:e,def:n}),b||u()),this},N(T,function(e,t){_[t]=new g(B({name:t},e))}),_=i(_,{}),this.$get=["$injector",function(e){return p=e,b=!1,u(),N(T,function(e,t){_[t]||(_[t]=new g(e))}),this}],this.Param=function(e,t,i,r){function o(e){var t=V(e)?a(e):[],n=-1===s(t,"value")&&-1===s(t,"type")&&-1===s(t,"squash")&&-1===s(t,"array");return n&&(e={value:e}),e.$$fn=l(e.value)?e.value:function(){return e.value},e}function c(t,n,i){if(t.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:t.type?t.type instanceof g?t.type:new g(t.type):"config"===i?_.any:_.string}function u(){var t={array:"search"===r?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return B(t,n,i).array}function f(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!M(n)||null==n)return y;if(n===!0||O(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function v(e,t,i,r){var o,a,c=[{from:"",to:i||t?n:""},{from:null,to:i||t?n:""}];return o=L(e.replace)?e.replace:[],O(r)&&o.push({from:r,to:n}),a=h(o,function(e){return e.from}),d(c,function(e){return-1===s(a,e.from)}).concat(o)}function m(){if(!p)throw new Error("Injectable functions cannot be called at configuration time");return p.invoke(i.$$fn)}function $(e){function t(e){return function(t){return t.from===e}}function n(e){var n=h(d(b.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),M(e)?b.type.decode(e):m()}function w(){return"{Param:"+e+" "+t+" squash: '"+x+"' optional: "+T+"}"}var b=this;i=o(i),t=c(i,t,r);var S=u();t=S?t.$asArray(S,"search"===r):t,"string"!==t.name||S||"path"!==r||i.value!==n||(i.value="");var T=i.value!==n,x=f(i,T),E=v(i,S,T,x);B(this,{id:e,type:t,location:r,array:S,squash:x,replace:E,isOptional:T,value:$,dynamic:n,config:i,toString:w})},f.prototype={$$new:function(){return i(this,B(new f,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,i=a(f.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),N(t,function(t){N(a(t),function(t){-1===s(e,t)&&-1===s(i,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return N(n.$$keys(),function(i){t[i]=n[i].value(e&&e[i])}),t},$$equals:function(e,t){var n=!0,i=this;return N(i.$$keys(),function(r){var o=e&&e[r],a=t&&t[r];i[r].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var t,n,i,r=!0,o=this;return N(this.$$keys(),function(a){i=o[a],n=e[a],t=!n&&i.isOptional,r=r&&(t||!!i.type.is(n))}),r},$$parent:n},this.ParamSet=f}function w(e,i){function r(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var i=e.invoke(t,t,{$match:n});return M(i)?i:!0}function s(i,r,o,a){function s(e,t,n){return"/"===v?e:t?v.slice(0,-1)+e:n?v.slice(1)+e:e}function d(e){function t(e){var t=e(o,i);return t?(O(t)&&i.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){var r=p&&i.url()===p;if(p=n,r)return!0;var a,s=l.length;for(a=0;s>a;a++)if(t(l[a]))return;u&&t(u)}}function h(){return c=c||r.$on("$locationChangeSuccess",d)}var p,v=a.baseHref(),m=i.url();return f||h(),{sync:function(){d()},listen:function(){return h()},update:function(e){return e?void(m=i.url()):void(i.url()!==m&&(i.url(m),i.replace()))},push:function(e,t,r){i.url(e.format(t||{})),p=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled);var c=n.format(r);if(o=o||{},a||null===c||(c="#"+e.hashPrefix()+c),c=s(c,a,o.absolute),!o.absolute||!c)return c;var l=!a&&c?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,l,c].join("")}}}var c,l=[],u=null,f=!1;this.rule=function(e){if(!P(e))throw new Error("'rule' must be a function");return l.push(e),this},this.otherwise=function(e){if(O(e)){var t=e;e=function(){return t}}else if(!P(e))throw new Error("'rule' must be a function");return u=e,this},this.when=function(e,t){var n,s=O(t);if(O(e)&&(e=i.compile(e)),!s&&!P(t)&&!L(t))throw new Error("invalid 'handler' in when()");var c={matcher:function(e,t){return s&&(n=i.compile(t),t=["$match",function(e){return n.format(e)}]),B(function(n,i){return a(n,t,e.exec(i.path(),i.search()))},{prefix:O(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return o(n,e)}]),B(function(n,i){return a(n,t,e.exec(i.path()))},{prefix:r(e)})}},l={matcher:i.isMatcher(e),regex:e instanceof RegExp};for(var u in l)if(l[u])return this.rule(c[u](e,t));
throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function y(e,r){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function f(e,t){if(!e)return n;var i=O(e),r=i?e:e.name,a=o(r);if(a){if(!t)throw new Error("No reference point given for path '"+r+"'");t=f(t);for(var s=r.split("."),c=0,l=s.length,u=t;l>c;c++)if(""!==s[c]||0!==c){if("^"!==s[c])break;if(!u.parent)throw new Error("Path '"+r+"' not valid for state '"+t.name+"'");u=u.parent}else u=t;s=s.slice(c).join("."),r=u.name+(u.name&&s?".":"")+s}var d=T[r];return!d||!i&&(i||d!==e&&d.self!==e)?n:d}function d(e,t){x[e]||(x[e]=[]),x[e].push(t)}function p(e){for(var t=x[e]||[];t.length;)v(t.shift())}function v(t){t=i(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!O(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(T.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var r=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):O(t.parent)?t.parent:V(t.parent)&&O(t.parent.name)?t.parent.name:"";if(r&&!T[r])return d(r,t.self);for(var o in C)P(C[o])&&(t[o]=C[o](t,C.$delegates[o]));return T[n]=t,!t[E]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){S.$current.navigable==t&&l(e,n)||S.transitionTo(t,e,{inherit:!0,location:!1})}]),p(n),t}function m(e){return e.indexOf("*")>-1}function g(e){var t=e.split("."),n=S.$current.name.split(".");if("**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length)return!1;for(var i=0,r=t.length;r>i;i++)"*"===t[i]&&(n[i]="*");return n.join("")===t.join("")}function $(e,t){return O(e)&&!M(t)?C[e]:P(t)&&O(e)?(C[e]&&!C.$delegates[e]&&(C.$delegates[e]=C[e]),C[e]=t,this):this}function w(e,t){return V(e)?t=e:t.name=e,v(t),this}function y(e,r,o,s,d,p,v){function $(t,n,i,o){var a=e.$broadcast("$stateNotFound",t,n,i);if(a.defaultPrevented)return v.update(),C;if(!a.retry)return null;if(o.$retry)return v.update(),k;var s=S.transition=r.when(a.retry);return s.then(function(){return s!==S.transition?y:(t.options.$retry=!0,S.transitionTo(t.to,t.toParams,t.options))},function(){return C}),v.update(),s}function w(e,n,i,a,c,l){var f=i?n:u(e.params.$$keys(),n),h={$stateParams:f};c.resolve=d.resolve(e.resolve,h,c.resolve,e);var p=[c.resolve.then(function(e){c.globals=e})];return a&&p.push(a),N(e.views,function(n,i){var r=n.resolve&&n.resolve!==e.resolve?n.resolve:{};r.$template=[function(){return o.load(i,{view:n,locals:h,params:f,notify:l.notify})||""}],p.push(d.resolve(r,h,c.resolve,e).then(function(o){if(P(n.controllerProvider)||L(n.controllerProvider)){var a=t.extend({},r,h);o.$$controller=s.invoke(n.controllerProvider,null,a)}else o.$$controller=n.controller;o.$$state=e,o.$$controllerAs=n.controllerAs,c[i]=o}))}),r.all(p).then(function(){return c})}var y=r.reject(new Error("transition superseded")),x=r.reject(new Error("transition prevented")),C=r.reject(new Error("transition aborted")),k=r.reject(new Error("transition failed"));return b.locals={resolve:null,globals:{$stateParams:{}}},S={params:{},current:b.self,$current:b,transition:null},S.reload=function(){return S.transitionTo(S.current,p,{reload:!0,inherit:!1,notify:!0})},S.go=function(e,t,n){return S.transitionTo(e,t,B({inherit:!0,relative:S.$current},n))},S.transitionTo=function(t,n,o){n=n||{},o=B({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,l=S.$current,d=S.params,h=l.path,m=f(t,o.relative);if(!M(m)){var g={to:t,toParams:n,options:o},T=$(g,l.self,d,o);if(T)return T;if(t=g.to,n=g.toParams,o=g.options,m=f(t,o.relative),!M(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[E])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=c(p,n||{},S.$current,m)),!m.params.$$validates(n))return k;n=m.params.$$values(n),t=m;var C=t.path,A=0,D=C[A],I=b.locals,P=[];if(!o.reload)for(;D&&D===h[A]&&D.ownParams.$$equals(n,d);)I=P[A]=D.locals,A++,D=C[A];if(_(t,l,I,o))return t.self.reloadOnSearch!==!1&&v.update(),S.transition=null,r.when(S.current);if(n=u(t.params.$$keys(),n||{}),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,l.self,d).defaultPrevented)return v.update(),x;for(var O=r.when(I),V=A;V<C.length;V++,D=C[V])I=P[V]=i(I),O=w(D,n,D===t,O,I,o);var L=S.transition=O.then(function(){var i,r,a;if(S.transition!==L)return y;for(i=h.length-1;i>=A;i--)a=h[i],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(i=A;i<C.length;i++)r=C[i],r.locals=P[i],r.self.onEnter&&s.invoke(r.self.onEnter,r.self,r.locals.globals);return S.transition!==L?y:(S.$current=t,S.current=t.self,S.params=n,R(S.params,p),S.transition=null,o.location&&t.navigable&&v.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,l.self,d),v.update(!0),S.current)},function(i){return S.transition!==L?y:(S.transition=null,a=e.$broadcast("$stateChangeError",t.self,n,l.self,d,i),a.defaultPrevented||v.update(),r.reject(i))});return L},S.is=function(e,t,i){i=B({relative:S.$current},i||{});var r=f(e,i.relative);return M(r)?S.$current!==r?!1:t?l(r.params.$$values(t),p):!0:n},S.includes=function(e,t,i){if(i=B({relative:S.$current},i||{}),O(e)&&m(e)){if(!g(e))return!1;e=S.$current.name}var r=f(e,i.relative);return M(r)?M(S.$current.includes[r.name])?t?l(r.params.$$values(t),p,a(t)):!0:!1:n},S.href=function(e,t,i){i=B({lossy:!0,inherit:!0,absolute:!1,relative:S.$current},i||{});var r=f(e,i.relative);if(!M(r))return null;i.inherit&&(t=c(p,t||{},S.$current,r));var o=r&&i.lossy?r.navigable:r;return o&&o.url!==n&&null!==o.url?v.href(o.url,u(r.params.$$keys(),t||{}),{absolute:i.absolute}):null},S.get=function(e,t){if(0===arguments.length)return h(a(T),function(e){return T[e].self});var n=f(e,t||S.$current);return n&&n.self?n.self:null},S}function _(e,t,n,i){return e!==t||(n!==t.locals||i.reload)&&e.self.reloadOnSearch!==!1?void 0:!0}var b,S,T={},x={},E="abstract",C={parent:function(e){if(M(e.parent)&&e.parent)return f(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?f(t[1]):b},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=B({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(O(t))return"^"==t.charAt(0)?r.compile(t.substring(1),n):(e.parent.navigable||b).url.concat(t,n);if(!t||r.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new H.ParamSet;return N(e.params||{},function(e,n){t[n]||(t[n]=new H.Param(n,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?B(e.parent.params.$$new(),e.ownParams):new H.ParamSet},views:function(e){var t={};return N(M(e.views)?e.views:{"":e},function(n,i){i.indexOf("@")<0&&(i+="@"+e.parent.name),t[i]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?B({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};b=v({name:"",url:"^",views:null,"abstract":!0}),b.navigable=null,this.decorator=$,this.state=w,this.$get=y,y.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function _(){function e(e,t){return{load:function(n,i){var r,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return i=B(o,i),i.view&&(r=t.fromConfig(i.view,i.params,i.locals)),r&&i.notify&&e.$broadcast("$viewContentLoading",i),r}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function b(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){n(function(){e[0].scrollIntoView()},0,!1)}}]}function S(e,n,i,r){function o(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function a(e,t){var n=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(l)return{enter:function(e,t,n){var i=l.enter(e,null,t,n);i&&i.then&&i.then(n)},leave:function(e,t){var n=l.leave(e,t);n&&n.then&&n.then(t)}};if(c){var i=c&&c(t,e);return{enter:function(e,t,n){i.enter(e,null,t),n()},leave:function(e,t){i.leave(e),t()}}}return n()}var s=o(),c=s("$animator"),l=s("$animate"),u={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,s){return function(n,o,c){function l(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),d&&(g.leave(d,function(){f=null}),f=d,d=null)}function u(a){var u,f=x(n,c,o,r),$=f&&e.$current&&e.$current.locals[f];if(a||$!==p){u=n.$new(),p=e.$current.locals[f];var w=s(u,function(e){g.enter(e,o,function(){h&&h.$emit("$viewContentAnimationEnded"),(t.isDefined(m)&&!m||n.$eval(m))&&i(e)}),l()});d=w,h=u,h.$emit("$viewContentLoaded"),h.$eval(v)}}var f,d,h,p,v=c.onload||"",m=c.autoscroll,g=a(c,n);n.$on("$stateChangeSuccess",function(){u(!1)}),n.$on("$viewContentLoading",function(){u(!1)}),u(!0)}}};return u}function T(e,t,n,i){return{restrict:"ECA",priority:-400,compile:function(r){var o=r.html();return function(r,a,s){var c=n.$current,l=x(r,s,a,i),u=c&&c.locals[l];if(u){a.data("$uiView",{name:l,state:u.$$state}),a.html(u.$template?u.$template:o);var f=e(a.contents());if(u.$$controller){u.$scope=r;var d=t(u.$$controller,u);u.$$controllerAs&&(r[u.$$controllerAs]=d),a.data("$ngControllerController",d),a.children().data("$ngControllerController",d)}f(r)}}}}}function x(e,t,n,i){var r=i(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function E(e,t){var n,i=e.match(/^\s*({[^}]*})\s*$/);if(i&&(e=t+"("+i[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function C(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function k(e,n){var i=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,o,a,s){var c=E(a.uiSref,e.current.name),l=null,u=C(o)||e.$current,f=null,d="A"===o.prop("tagName"),h="FORM"===o[0].nodeName,p=h?"action":"href",v=!0,m={relative:u,inherit:!0},g=r.$eval(a.uiSrefOpts)||{};t.forEach(i,function(e){e in g&&(m[e]=g[e])});var $=function(n){if(n&&(l=t.copy(n)),v){f=e.href(c.state,l,m);var i=s[1]||s[0];return i&&i.$$setStateInfo(c.state,l),null===f?(v=!1,!1):void a.$set(p,f)}};c.paramExpr&&(r.$watch(c.paramExpr,function(e){e!==l&&$(e)},!0),l=t.copy(r.$eval(c.paramExpr))),$(),h||o.bind("click",function(t){var i=t.which||t.button;if(!(i>1||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var r=n(function(){e.go(c.state,l,m)});t.preventDefault();var a=d&&!f?1:0;t.preventDefault=function(){a--<=0&&n.cancel(r)}}})}}}function A(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,i,r){function o(){a()?i.addClass(l):i.removeClass(l)}function a(){return"undefined"!=typeof r.uiSrefActiveEq?s&&e.is(s.name,c):s&&e.includes(s.name,c)}var s,c,l;l=n(r.uiSrefActiveEq||r.uiSrefActive||"",!1)(t),this.$$setStateInfo=function(t,n){s=e.get(t,C(i)),c=n,o()},t.$on("$stateChangeSuccess",o)}]}}function D(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function I(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var M=t.isDefined,P=t.isFunction,O=t.isString,V=t.isObject,L=t.isArray,N=t.forEach,B=t.extend,R=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",p),v.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",v);var H;m.prototype.concat=function(e,t){var n={caseInsensitive:H.caseInsensitive(),strict:H.strictMode(),squash:H.defaultSquashPolicy()};return new m(this.sourcePath+e+this.sourceSearch,B(n,t),this)},m.prototype.toString=function(){return this.source},m.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/,"-")}var i=t(e).split(/-(?!\\)/),r=h(i,t);return h(r,n).reverse()}var i=this.regexp.exec(e);if(!i)return null;t=t||{};var r,o,a,s=this.parameters(),c=s.length,l=this.segments.length-1,u={};if(l!==i.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(r=0;l>r;r++){a=s[r];var f=this.params[a],d=i[r+1];for(o=0;o<f.replace;o++)f.replace[o].from===d&&(d=f.replace[o].to);d&&f.array===!0&&(d=n(d)),u[a]=f.value(d)}for(;c>r;r++)a=s[r],u[a]=this.params[a].value(t[a]);return u},m.prototype.parameters=function(e){return M(e)?this.params[e]||null:this.$$paramNames},m.prototype.validates=function(e){return this.params.$$validates(e)},m.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,i=this.parameters(),r=this.params;if(!this.validates(e))return null;var o,a=!1,s=n.length-1,c=i.length,l=n[0];for(o=0;c>o;o++){var u=s>o,f=i[o],d=r[f],p=d.value(e[f]),v=d.isOptional&&d.type.equals(d.value(),p),m=v?d.squash:!1,g=d.type.encode(p);if(u){var $=n[o+1];if(m===!1)null!=g&&(l+=L(g)?h(g,t).join("-"):encodeURIComponent(g)),l+=$;else if(m===!0){var w=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=$.match(w)[1]}else O(m)&&(l+=m+$)}else{if(null==g||v&&m!==!1)continue;L(g)||(g=[g]),g=h(g,encodeURIComponent).join("&"+f+"="),l+=(a?"&":"?")+(f+"="+g),a=!0}}return l},g.prototype.is=function(){return!0},g.prototype.encode=function(e){return e},g.prototype.decode=function(e){return e},g.prototype.equals=function(e,t){return e==t},g.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},g.prototype.pattern=/.*/,g.prototype.toString=function(){return"{Type:"+this.name+"}"},g.prototype.$asArray=function(e,t){function i(e,t){function i(e,t){return function(){return e[t].apply(e,arguments)}}function r(e){return L(e)?e:M(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(n){n=r(n);var i=h(n,e);return t===!0?0===d(i,a).length:o(i)}}function c(e){return function(t,n){var i=r(t),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!e(i[a],o[a]))return!1;return!0}}this.encode=s(i(e,"encode")),this.decode=s(i(e,"decode")),this.is=s(i(e,"is"),!0),this.equals=c(i(e,"equals")),this.pattern=e.pattern,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new i(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",$),t.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",w),y.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",y),_.$inject=[],t.module("ui.router.state").provider("$view",_),t.module("ui.router.state").provider("$uiViewScroll",b),S.$inject=["$state","$injector","$uiViewScroll","$interpolate"],T.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",S),t.module("ui.router.state").directive("uiView",T),k.$inject=["$state","$timeout"],A.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",k).directive("uiSrefActive",A).directive("uiSrefActiveEq",A),D.$inject=["$state"],I.$inject=["$state"],t.module("ui.router.state").filter("isState",D).filter("includedByState",I)}(window,window.angular),function(){function e(e,t,n,i,r,o){function a(i,a,s,c,l){function f(){B.resizeRequiresRefresh(w.__clientWidth,w.__clientHeight)&&m()}function d(){var e;return e={dataLength:0,width:0,height:0,resizeRequiresRefresh:function(t,n){var i=e.dataLength&&t&&n&&(t!==e.width||n!==e.height);return e.width=t,e.height=n,!!i},dataChangeRequiresRefresh:function(t){var n=t.length>0||t.length<e.dataLength;return e.dataLength=t.length,!!n}}}function h(){return x||(x=new e({afterItemsNode:N[0],containerNode:_,heightData:A,widthData:D,forceRefreshImages:!(!u(s.forceRefreshImages)||"false"===s.forceRefreshImages),keyExpression:E,renderBuffer:O,scope:i,scrollView:c.scrollView,transclude:l}))}function p(){var e=angular.element(w.__content.querySelector(".collection-repeat-after-container"));if(!e.length){var t=!1,n=[].filter.call(w.__content.childNodes,function(e){return ionic.DomUtil.contains(e,_)?(t=!0,!1):t});e=angular.element('<span class="collection-repeat-after-container">'),w.options.scrollingX&&e.addClass("horizontal"),e.append(n),w.__content.appendChild(e[0])}return e}function v(){V?g(V,A):A.computed=!0,L?g(L,D):D.computed=!0}function m(){var e=M.length>0;if(e&&(A.computed||D.computed)&&$(),e&&A.computed){if(A.value=I.height,!A.value)throw new Error('collection-repeat tried to compute the height of repeated elements "'+S+'", but was unable to. Please provide the "item-height" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!A.dynamic&&A.getValue&&(A.value=A.getValue());if(e&&D.computed){if(D.value=I.width,!D.value)throw new Error('collection-repeat tried to compute the width of repeated elements "'+S+'", but was unable to. Please provide the "item-width" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!D.dynamic&&D.getValue&&(D.value=D.getValue());h().refreshLayout()}function g(e,n){if(e){var i;try{i=t(e)}catch(r){e.trim().match(/\d+(px|%)$/)&&(e='"'+e+'"'),i=t(e)}var o=e.replace(/(\'|\"|px|%)/g,"").trim(),a=o.length&&!/([a-zA-Z]|\$|:|\?)/.test(o);if(n.attrValue=e,a){var s=parseInt(i());if(e.indexOf("%")>-1){var c=s/100;n.getValue=n===A?function(){return Math.floor(c*w.__clientHeight)}:function(){return Math.floor(c*w.__clientWidth)}}else n.value=s}else n.dynamic=!0,n.getValue=n===A?function(e,t){var n=i(e,t);return n.charAt&&"%"===n.charAt(n.length-1)?Math.floor(parseInt(n)/100*w.__clientHeight):parseInt(n)}:function(e,t){var n=i(e,t);return n.charAt&&"%"===n.charAt(n.length-1)?Math.floor(parseInt(n)/100*w.__clientWidth):parseInt(n)}}}function $(){H||l(z=i.$new(),function(e){e[0].removeAttribute("collection-repeat"),H=e[0]}),z[E]=(k(i)||[])[0],r.$$phase||z.$digest(),_.appendChild(H);var e=n.getComputedStyle(H);I.width=parseInt(e.width),I.height=parseInt(e.height),_.removeChild(H)}var w=c.scrollView,y=a[0],_=angular.element('<div class="collection-repeat-container">')[0];if(y.parentNode.replaceChild(_,y),w.options.scrollingX&&w.options.scrollingY)throw new Error("collection-repeat expected a parent x or y scrollView, not an xy scrollView.");var S=s.collectionRepeat,T=S.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!T)throw new Error("collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '"+s.collectionRepeat+"'.");var x,E=T[1],C=T[2],k=t(C),A={},D={},I={},M=[],P=s.itemRenderBuffer||s.collectionBufferSize,O=angular.isDefined(P)?parseInt(P):b,V=s.itemHeight||s.collectionItemHeight,L=s.itemWidth||s.collectionItemWidth,N=p(),B=d();v(),c.$element.on("scroll-resize",m),angular.element(n).on("resize",f);var R=r.$on("$ionicExposeAside",ionic.animationFrameThrottle(function(){c.scrollView.resize(),f()}));o(m,0,!1),i.$watchCollection(k,function(e){if(M=e||(e=[]),!angular.isArray(e))throw new Error("collection-repeat expected an array for '"+C+"', but got a "+typeof value);i.$$postDigest(function(){h().setData(M),B.dataChangeRequiresRefresh(M)&&m()})}),i.$on("$destroy",function(){angular.element(n).off("resize",f),R(),c.$element&&c.$element.off("scroll-resize",m),H&&H.parentNode&&H.parentNode.removeChild(H),z&&z.$destroy(),z=H=null,x&&x.destroy(),x=null});var H,z}return{restrict:"A",priority:1e3,transclude:"element",$$tlb:!0,require:"^^$ionicScroll",link:a}}function t(e,t,n){var i={primaryPos:0,secondaryPos:0,primarySize:0,secondarySize:0,rowPrimarySize:0};return function(r){function o(){return a(!0)}function a(t){if(!a.destroyed){var n,r,o,l,u,f=et.getScrollValue(),d=f+et.scrollPrimarySize;et.updateRenderRange(f,d),U=Math.max(0,U-x),G=Math.min(A.length-1,G+x);for(n in Z)(U>n||n>G)&&(o=Z[n],delete Z[n],X.push(o),o.isShown=!1);for(n=U;G>=n;n++)n>=A.length||Z[n]&&!t||(o=Z[n]||(Z[n]=X.length?X.pop():Y.length?Y.shift():new c),K.push(o),o.isShown=!0,u=o.scope,u.$index=n,u[T]=A[n],u.$first=0===n,u.$last=n===A.length-1,u.$middle=!(u.$first||u.$last),u.$odd=!(u.$even=0===(1&n)),u.$$disconnected&&ionic.Utils.reconnectScope(o.scope),l=et.getDimensions(n),(o.secondaryPos!==l.secondaryPos||o.primaryPos!==l.primaryPos)&&(o.node.style[ionic.CSS.TRANSFORM]=H.replace(B,o.primaryPos=l.primaryPos).replace(R,o.secondaryPos=l.secondaryPos)),(o.secondarySize!==l.secondarySize||o.primarySize!==l.primarySize)&&(o.node.style.cssText=o.node.style.cssText.replace(_,z.replace(B,(o.primarySize=l.primarySize)+1).replace(R,o.secondarySize=l.secondarySize))));for(G===A.length-1&&(l=et.getDimensions(A.length-1)||i,g.style[ionic.CSS.TRANSFORM]=H.replace(B,l.primaryPos+l.primarySize).replace(R,0));X.length;)o=X.pop(),o.scope.$broadcast("$collectionRepeatLeave"),ionic.Utils.disconnectScope(o.scope),Y.push(o),o.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",o.primaryPos=o.secondaryPos=null;if(w)for(n=0,r=K.length;r>n&&(o=K[n]);n++)if(o.images)for(var h,p=0,v=o.images.length;v>p&&(h=o.images[p]);p++){var m=h.src;h.src=y,h.src=m}if(t)for(var $=e.$$phase;K.length;)o=K.pop(),$||o.scope.$digest();else s()}}function s(){var t;s.running||(s.running=!0,n(function(){for(var n=e.$$phase;K.length;)t=K.pop(),t.isShown&&(n||t.scope.$digest());s.running=!1}))}function c(){var e=this;this.scope=E.$new(),this.id="item"+J++,k(this.scope,function(t){e.element=t,e.element.data("$$collectionRepeatItem",e),e.node=t[0],e.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",e.node.style.cssText+=" height: 0px; width: 0px;",ionic.Utils.disconnectScope(e.scope),$.appendChild(e.node),e.images=t[0].getElementsByTagName("img")})}function l(){this.getItemPrimarySize=M,this.getItemSecondarySize=O,this.getScrollValue=function(){return Math.max(0,Math.min(C.__scrollTop-F,C.__maxScrollTop-F-q))},this.refreshDirection=function(){this.scrollPrimarySize=C.__clientHeight,this.scrollSecondarySize=C.__clientWidth,this.estimatedPrimarySize=v,this.estimatedSecondarySize=m,this.estimatedItemsAcross=L&&Math.floor(C.__clientWidth/m)||1}}function u(){this.getItemPrimarySize=O,this.getItemSecondarySize=M,this.getScrollValue=function(){return Math.max(0,Math.min(C.__scrollLeft-F,C.__maxScrollLeft-F-q))},this.refreshDirection=function(){this.scrollPrimarySize=C.__clientWidth,this.scrollSecondarySize=C.__clientHeight,this.estimatedPrimarySize=m,this.estimatedSecondarySize=v,this.estimatedItemsAcross=L&&Math.floor(C.__clientHeight/v)||1}}function f(){this.getEstimatedSecondaryPos=function(e){return e%this.estimatedItemsAcross*this.estimatedSecondarySize},this.getEstimatedPrimaryPos=function(e){return Math.floor(e/this.estimatedItemsAcross)*this.estimatedPrimarySize},this.getEstimatedIndex=function(e){return Math.floor(e/this.estimatedPrimarySize)*this.estimatedItemsAcross}}function d(){this.getEstimatedSecondaryPos=function(){return 0},this.getEstimatedPrimaryPos=function(e){return e*this.estimatedPrimarySize},this.getEstimatedIndex=function(e){return Math.floor(e/this.estimatedPrimarySize)}}function h(){this.getContentSize=function(){return this.getEstimatedPrimaryPos(A.length-1)+this.estimatedPrimarySize+F+q};var e={};this.getDimensions=function(t){return e.primaryPos=this.getEstimatedPrimaryPos(t),e.secondaryPos=this.getEstimatedSecondaryPos(t),e.primarySize=this.estimatedPrimarySize,e.secondarySize=this.estimatedSecondarySize,e},this.updateRenderRange=function(e,t){U=Math.max(0,this.getEstimatedIndex(e)),G=Math.min(A.length-1,this.getEstimatedIndex(t)+this.estimatedItemsAcross-1),W=Math.max(0,this.getEstimatedPrimaryPos(U)),j=this.getEstimatedPrimaryPos(G)+this.estimatedPrimarySize}}function p(){function e(e){var t,o,a;for(t=Math.max(0,n);e>=t&&(a=s[t]);t++)o=s[t-1]||i,a.primarySize=r.getItemPrimarySize(t,A[t]),a.secondarySize=r.scrollSecondarySize,a.primaryPos=o.primaryPos+o.primarySize,a.secondaryPos=0}function t(e){var t,o,a;for(t=Math.max(n,0);e>=t&&(a=s[t]);t++)o=s[t-1]||i,a.secondarySize=Math.min(r.getItemSecondarySize(t,A[t]),r.scrollSecondarySize),a.secondaryPos=o.secondaryPos+o.secondarySize,0===t||a.secondaryPos+a.secondarySize>r.scrollSecondarySize?(a.secondaryPos=0,a.primarySize=r.getItemPrimarySize(t,A[t]),a.primaryPos=o.primaryPos+o.rowPrimarySize,a.rowStartIndex=t,a.rowPrimarySize=a.primarySize):(a.primarySize=r.getItemPrimarySize(t,A[t]),a.primaryPos=o.primaryPos,a.rowStartIndex=o.rowStartIndex,s[a.rowStartIndex].rowPrimarySize=a.rowPrimarySize=Math.max(s[a.rowStartIndex].rowPrimarySize,a.primarySize),a.rowPrimarySize=Math.max(a.primarySize,a.rowPrimarySize))}var n,r=this,o=ionic.debounce(Q,25,!0),a=L?t:e,s=[];this.getContentSize=function(){var e=s[n]||i;return(e.primaryPos+e.primarySize||0)+this.getEstimatedPrimaryPos(A.length-n-1)+F+q},this.onDestroy=function(){s.length=0},this.onRefreshData=function(){var e,t;for(e=s.length,t=A.length;t>e;e++)s.push({});n=-1},this.onRefreshLayout=function(){n=-1},this.getDimensions=function(e){return e=Math.min(e,A.length-1),e>n&&(e>.9*A.length?(a(A.length-1),n=A.length-1,Q()):(a(e),n=e,o())),s[e]};var c=-1,l=-1;this.updateRenderRange=function(e,t){var n,i,r;if(this.getDimensions(2*this.getEstimatedIndex(t)),-1===c||0===e)n=0;else if(e>=l)for(n=c,i=A.length;i>n&&!((r=this.getDimensions(n))&&r.primaryPos+r.rowPrimarySize>=e);n++);else for(n=c;n>=0;n--)if((r=this.getDimensions(n))&&r.primaryPos<=e){n=L?r.rowStartIndex:n;break}U=Math.min(Math.max(0,n),A.length-1),W=-1!==U?this.getDimensions(U).primaryPos:-1;var o;for(n=U+1,i=A.length;i>n;n++)if((r=this.getDimensions(n))&&r.primaryPos+r.rowPrimarySize>t){if(L)for(o=r;i-1>n&&(r=this.getDimensions(n+1)).primaryPos===o.primaryPos;)n++;break}G=Math.min(n,A.length-1),j=-1!==G?(r=this.getDimensions(G)).primaryPos+(r.rowPrimarySize||r.primarySize):-1,l=e,c=U}}var v,m,g=r.afterItemsNode,$=r.containerNode,w=r.forceRefreshImages,b=r.heightData,S=r.widthData,T=r.keyExpression,x=r.renderBuffer,E=r.scope,C=r.scrollView,k=r.transclude,A=[],D={},I=b.getValue||function(){return b.value},M=function(e,t){return D[T]=t,D.$index=e,I(E,D)},P=S.getValue||function(){return S.value},O=function(e,t){return D[T]=t,D.$index=e,P(E,D)},V=!!C.options.scrollingY,L=V?S.dynamic||S.value!==C.__clientWidth:b.dynamic||b.value!==C.__clientHeight,N=!b.dynamic&&!S.dynamic,B="PRIMARY",R="SECONDARY",H=V?"translate3d(SECONDARYpx,PRIMARYpx,0)":"translate3d(PRIMARYpx,SECONDARYpx,0)",z=V?"height: PRIMARYpx; width: SECONDARYpx;":"height: SECONDARYpx; width: PRIMARYpx;",F=0,q=0,U=-1,G=-1,j=-1,W=-1,Y=[],X=[],K=[],Z={},J=0,Q=V?function(){C.setDimensions(null,null,null,et.getContentSize(),!0)}:function(){C.setDimensions(null,null,et.getContentSize(),null,!0)},et=V?new l:new u;(L?f:d).call(et),(N?h:p).call(et);var tt=V?"getContentHeight":"getContentWidth",nt=C.options[tt];C.options[tt]=angular.bind(et,et.getContentSize),C.__$callback=C.__callback,C.__callback=function(e,t,n,i){var r=et.getScrollValue();(-1===U||r+et.scrollPrimarySize>j||W>r)&&a(),C.__$callback(e,t,n,i)};var it=!1,rt=!1;this.refreshLayout=function(){A.length?(v=M(0,A[0]),m=O(0,A[0])):(v=100,m=100);var e=getComputedStyle(g)||{},n=g.firstElementChild&&getComputedStyle(g.firstElementChild)||{},i=g.lastElementChild&&getComputedStyle(g.lastElementChild)||{};q=(parseInt(e[V?"height":"width"])||0)+(n&&parseInt(n[V?"marginTop":"marginLeft"])||0)+(i&&parseInt(i[V?"marginBottom":"marginRight"])||0),F=0;var r=$;do F+=r[V?"offsetTop":"offsetLeft"];while(ionic.DomUtil.contains(C.__content,r=r.offsetParent));var a=$.previousElementSibling,s=a?t.getComputedStyle(a):{},l=parseInt(s[V?"marginBottom":"marginRight"]||0);if($.style[ionic.CSS.TRANSFORM]=H.replace(B,-l).replace(R,0),F-=l,C.__clientHeight&&C.__clientWidth||(C.__clientWidth=C.__container.clientWidth,C.__clientHeight=C.__container.clientHeight),(et.onRefreshLayout||angular.noop)(),et.refreshDirection(),Q(),!it)for(var u=Math.max(20,3*x),f=0;u>f;f++)Y.push(new c);it=!0,it&&rt&&((C.__scrollLeft>C.__maxScrollLeft||C.__scrollTop>C.__maxScrollTop)&&C.resize(),o(!0))},this.setData=function(e){A=e,(et.onRefreshData||angular.noop)(),rt=!0},this.destroy=function(){a.destroyed=!0,Y.forEach(function(e){e.scope.$destroy(),e.scope=e.element=e.node=e.images=null}),Y.length=K.length=X.length=0,Z={},C.options[tt]=nt,C.__callback=C.__$callback,C.resize(),(et.onDestroy||angular.noop)()}}}function n(e){return["$ionicGesture","$parse",function(t,n){var i=e.substr(2).toLowerCase();return function(r,o,a){var s=n(a[e]),c=function(e){r.$apply(function(){s(r,{$event:e})})},l=t.on(i,c,o);r.$on("$destroy",function(){t.off(l,i,c)})}}]}function i(){return["$ionicScrollDelegate",function(e){return{restrict:"E",link:function(t,n,i){function r(t){for(var i=3,r=t.target;i--&&r;){if(r.classList.contains("button")||r.classList.contains("hjButton")||r.tagName.match(/input|textarea|select/i)||r.isContentEditable)return;r=r.parentNode}var o=t.gesture&&t.gesture.touches[0]||t.detail.touches[0],a=n[0].getBoundingClientRect();ionic.DomUtil.rectContains(o.pageX,o.pageY,a.left,a.top-20,a.left+a.width,a.top+a.height)&&e.scrollTop(!0)}"true"!=i.noTapScroll&&(ionic.on("tap",r,n[0]),t.$on("$destroy",function(){ionic.off("tap",r,n[0])}))}}}]}function r(e){return["$document","$timeout",function(t,n){return{restrict:"E",controller:"$ionicHeaderBar",compile:function(i){function r(t,n,i,r){e?(t.$watch(function(){return n[0].className},function(e){var n=-1===e.indexOf("ng-hide"),i=-1!==e.indexOf("bar-subheader");t.$hasHeader=n&&!i,t.$hasSubheader=n&&i,t.$emit("$ionicSubheader",t.$hasSubheader)}),t.$on("$destroy",function(){delete t.$hasHeader,delete t.$hasSubheader}),r.align(),t.$on("$ionicHeader.align",function(){ionic.requestAnimationFrame(function(){r.align()})})):(t.$watch(function(){return n[0].className},function(e){var n=-1===e.indexOf("ng-hide"),i=-1!==e.indexOf("bar-subfooter");t.$hasFooter=n&&!i,t.$hasSubfooter=n&&i}),t.$on("$destroy",function(){delete t.$hasFooter,delete t.$hasSubfooter}),t.$watch("$hasTabs",function(e){n.toggleClass("has-tabs",!!e)}))}return i.addClass(e?"bar bar-header":"bar bar-footer"),n(function(){e&&t[0].getElementsByClassName("tabs-top").length&&i.addClass("has-tabs-top")}),{pre:r}}}}]}function o(e){return e.clientHeight}function a(e){e.stopPropagation()}var s=angular.module("ionic",["ngAnimate","ngSanitize","ui.router"]),c=angular.extend,l=angular.forEach,u=angular.isDefined,f=angular.isNumber,d=angular.isString,h=angular.element,p=angular.noop;s.factory("$ionicActionSheet",["$rootScope","$compile","$animate","$timeout","$ionicTemplateLoader","$ionicPlatform","$ionicBody","IONIC_BACK_PRIORITY",function(e,t,n,i,r,o,a,s){function l(r){function l(e){e&&/icon/.test(e)&&(u.$actionSheetHasIcon=!0)}var u=e.$new(!0);c(u,{cancel:p,destructiveButtonClicked:p,buttonClicked:p,$deregisterBackButton:p,buttons:[],cancelOnStateChange:!0},r||{});for(var f=0;f<u.buttons.length;f++)l(u.buttons[f].text);l(u.cancelText),l(u.destructiveText);var d=u.element=t('<ion-action-sheet ng-class="cssClass" buttons="buttons"></ion-action-sheet>')(u),v=h(d[0].querySelector(".action-sheet-wrapper")),m=u.cancelOnStateChange?e.$on("$stateChangeSuccess",function(){u.cancel()}):p;
return u.removeSheet=function(e){u.removed||(u.removed=!0,v.removeClass("action-sheet-up"),i(function(){a.removeClass("action-sheet-open")},400),u.$deregisterBackButton(),m(),n.removeClass(d,"active").then(function(){u.$destroy(),d.remove(),u.cancel.$scope=v=null,(e||p)()}))},u.showSheet=function(e){u.removed||(a.append(d).addClass("action-sheet-open"),n.addClass(d,"active").then(function(){u.removed||(e||p)()}),i(function(){u.removed||v.addClass("action-sheet-up")},20,!1))},u.$deregisterBackButton=o.registerBackButtonAction(function(){i(u.cancel)},s.actionSheet),u.cancel=function(){u.removeSheet(r.cancel)},u.buttonClicked=function(e){r.buttonClicked(e,r.buttons[e])===!0&&u.removeSheet()},u.destructiveButtonClicked=function(){r.destructiveButtonClicked()===!0&&u.removeSheet()},u.showSheet(),u.cancel.$scope=u,u.cancel}return{show:l}}]),h.prototype.addClass=function(e){var t,n,i,r,o,a;if(e&&"ng-scope"!=e&&"ng-isolate-scope"!=e)for(t=0;t<this.length;t++)if(r=this[t],r.setAttribute)if(e.indexOf(" ")<0&&r.classList.add)r.classList.add(e);else{for(a=(" "+(r.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),o=e.split(" "),n=0;n<o.length;n++)i=o[n].trim(),-1===a.indexOf(" "+i+" ")&&(a+=i+" ");r.setAttribute("class",a.trim())}return this},h.prototype.removeClass=function(e){var t,n,i,r,o;if(e)for(t=0;t<this.length;t++)if(o=this[t],o.getAttribute)if(e.indexOf(" ")<0&&o.classList.remove)o.classList.remove(e);else for(i=e.split(" "),n=0;n<i.length;n++)r=i[n],o.setAttribute("class",(" "+(o.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+r.trim()+" "," ").trim());return this},s.factory("$ionicBackdrop",["$document","$timeout","$$rAF",function(e,t,n){function i(){s++,1===s&&(a.addClass("visible"),n(function(){s>=1&&a.addClass("active")}))}function r(){1===s&&(a.removeClass("active"),t(function(){0===s&&a.removeClass("visible")},400,!1)),s=Math.max(0,s-1)}function o(){return a}var a=h('<div class="backdrop">'),s=0;return e[0].body.appendChild(a[0]),{retain:i,release:r,getElement:o,_element:a}}]),s.factory("$ionicBind",["$parse","$interpolate",function(e,t){var n=/^\s*([@=&])(\??)\s*(\w*)\s*$/;return function(i,r,o){l(o||{},function(o,a){var s,c,l=o.match(n)||[],u=l[3]||a,f=l[1];switch(f){case"@":if(!r[u])return;r.$observe(u,function(e){i[a]=e}),r[u]&&(i[a]=t(r[u])(i));break;case"=":if(!r[u])return;c=i.$watch(r[u],function(e){i[a]=e}),i.$on("$destroy",c);break;case"&":if(r[u]&&r[u].match(RegExp(a+"(.*?)")))throw new Error('& expression binding "'+a+'" looks like it will recursively call "'+r[u]+'" and cause a stack overflow! Please choose a different scopeName.');s=e(r[u]),i[a]=function(e){return s(i,e)}}})}}]),s.factory("$ionicBody",["$document",function(e){return{addClass:function(){for(var t=0;t<arguments.length;t++)e[0].body.classList.add(arguments[t]);return this},removeClass:function(){for(var t=0;t<arguments.length;t++)e[0].body.classList.remove(arguments[t]);return this},enableClass:function(e){var t=Array.prototype.slice.call(arguments).slice(1);return e?this.addClass.apply(this,t):this.removeClass.apply(this,t),this},append:function(t){return e[0].body.appendChild(t.length?t[0]:t),this},get:function(){return e[0].body}}}]),s.factory("$ionicClickBlock",["$document","$ionicBody","$timeout",function(e,t,n){function i(e){e.preventDefault(),e.stopPropagation()}function r(){c&&(a?a.classList.remove(l):(a=e[0].createElement("div"),a.className="click-block",t.append(a),a.addEventListener("touchstart",i),a.addEventListener("mousedown",i)),c=!1)}function o(){a&&a.classList.add(l)}var a,s,c,l="click-block-hide";return{show:function(e){c=!0,n.cancel(s),s=n(this.hide,e||310,!1),r()},hide:function(){c=!1,n.cancel(s),o()}}}]),s.factory("$ionicGesture",[function(){return{on:function(e,t,n,i){return window.ionic.onGesture(e,t,n[0],i)},off:function(e,t,n){return window.ionic.offGesture(e,t,n)}}}]),s.factory("$ionicHistory",["$rootScope","$state","$location","$window","$timeout","$ionicViewSwitcher","$ionicNavViewDelegate",function(e,t,n,i,r,o,a){function s(e){return e?L.views[e]:null}function l(e){return e?s(e.backViewId):null}function f(e){return e?s(e.forwardViewId):null}function d(e){return e?L.histories[e]:null}function h(e){var t=p(e);return L.histories[t.historyId]||(L.histories[t.historyId]={historyId:t.historyId,parentHistoryId:p(t.scope.$parent).historyId,stack:[],cursor:-1}),d(t.historyId)}function p(t){for(var n=t;n;){if(n.hasOwnProperty("$historyId"))return{historyId:n.$historyId,scope:n};n=n.$parent}return{historyId:"root",scope:e}}function v(e){L.currentView=s(e),L.backView=l(L.currentView),L.forwardView=f(L.currentView)}function m(){var e;if(t&&t.current&&t.current.name){if(e=t.current.name,t.params)for(var n in t.params)t.params.hasOwnProperty(n)&&t.params[n]&&(e+="_"+n+"="+t.params[n]);return e}return ionic.Utils.nextUid()}function g(){var e;if(t&&t.params)for(var n in t.params)t.params.hasOwnProperty(n)&&(e=e||{},e[n]=t.params[n]);return e}function $(e){return e&&e.length&&/ion-side-menus|ion-tabs/i.test(e[0].tagName)}function w(e,t){return t&&t.$$state&&t.$$state.self.canSwipeBack===!1?!1:e&&"false"===e.attr("can-swipe-back")?!1:!0}var y,_,b,S,T,x="initialView",E="newView",C="moveBack",k="moveForward",A="back",D="forward",I="enter",M="exit",P="swap",O="none",V=0,L={histories:{root:{historyId:"root",parentHistoryId:null,stack:[],cursor:-1}},views:{},backView:null,forwardView:null,currentView:null},N=function(){};return N.prototype.initialize=function(e){if(e){for(var t in e)this[t]=e[t];return this}return null},N.prototype.go=function(){if(this.stateName)return t.go(this.stateName,this.stateParams);if(this.url&&this.url!==n.url()){if(L.backView===this)return i.history.go(-1);if(L.forwardView===this)return i.history.go(1);n.url(this.url)}return null},N.prototype.destroy=function(){this.scope&&(this.scope.$destroy&&this.scope.$destroy(),this.scope=null)},{register:function(e,t){var i,a,c,u=m(),f=h(e),$=L.currentView,N=L.backView,B=L.forwardView,R=null,H=null,z=O,F=f.historyId,q=n.url();if(y!==u&&(y=u,V++),T)R=T.viewId,H=T.action,z=T.direction,T=null;else if(N&&N.stateId===u)R=N.viewId,F=N.historyId,H=C,N.historyId===$.historyId?z=A:$&&(z=M,i=d(N.historyId),i&&i.parentHistoryId===$.historyId?z=I:(i=d($.historyId),i&&i.parentHistoryId===f.parentHistoryId&&(z=P)));else if(B&&B.stateId===u)R=B.viewId,F=B.historyId,H=k,B.historyId===$.historyId?z=D:$&&(z=M,$.historyId===f.parentHistoryId?z=I:(i=d($.historyId),i&&i.parentHistoryId===f.parentHistoryId&&(z=P))),i=p(e),B.historyId&&i.scope&&(i.scope.$historyId=B.historyId,F=B.historyId);else if($&&$.historyId!==F&&f.cursor>-1&&f.stack.length>0&&f.cursor<f.stack.length&&f.stack[f.cursor].stateId===u){var U=f.stack[f.cursor];R=U.viewId,F=U.historyId,H=C,z=P,i=d($.historyId),i&&i.parentHistoryId===F?z=M:(i=d(F),i&&i.parentHistoryId===$.historyId&&(z=I)),i=s(U.backViewId),i&&U.historyId!==i.historyId&&(f.stack[f.cursor].backViewId=$.viewId)}else{if(c=o.createViewEle(t),this.isAbstractEle(c,t))return{action:"abstractView",direction:O,ele:c};if(R=ionic.Utils.nextUid(),$){if($.forwardViewId=R,H=E,B&&$.stateId!==B.stateId&&$.historyId===B.historyId&&(i=d(B.historyId))){for(a=i.stack.length-1;a>=B.index;a--){var G=i.stack[a];G&&G.destroy&&G.destroy(),i.stack.splice(a)}F=B.historyId}f.historyId===$.historyId?z=D:$.historyId!==f.historyId&&(z=I,i=d($.historyId),i&&i.parentHistoryId===f.parentHistoryId?z=P:(i=d(i.parentHistoryId),i&&i.historyId===f.historyId&&(z=M)))}else H=x;2>V&&(z=O),L.views[R]=this.createView({viewId:R,index:f.stack.length,historyId:f.historyId,backViewId:$&&$.viewId?$.viewId:null,forwardViewId:null,stateId:u,stateName:this.currentStateName(),stateParams:g(),url:q,canSwipeBack:w(c,t)}),f.stack.push(L.views[R])}if(b&&b(),r.cancel(S),_){if(_.disableAnimate&&(z=O),_.disableBack&&(L.views[R].backViewId=null),_.historyRoot){for(a=0;a<f.stack.length;a++)f.stack[a].viewId===R?(f.stack[a].index=0,f.stack[a].backViewId=f.stack[a].forwardViewId=null):delete L.views[f.stack[a].viewId];f.stack=[L.views[R]]}_=null}if(v(R),L.backView&&F==L.backView.historyId&&u==L.backView.stateId&&q==L.backView.url)for(a=0;a<f.stack.length;a++)if(f.stack[a].viewId==R){H="dupNav",z=O,a>0&&(f.stack[a-1].forwardViewId=null),L.forwardView=null,L.currentView.index=L.backView.index,L.currentView.backViewId=L.backView.backViewId,L.backView=l(L.backView),f.stack.splice(a,1);break}return f.cursor=L.currentView.index,{viewId:R,action:H,direction:z,historyId:F,enableBack:this.enabledBack(L.currentView),isHistoryRoot:0===L.currentView.index,ele:c}},registerHistory:function(e){e.$historyId=ionic.Utils.nextUid()},createView:function(e){var t=new N;return t.initialize(e)},getViewById:s,viewHistory:function(){return L},currentView:function(e){return arguments.length&&(L.currentView=e),L.currentView},currentHistoryId:function(){return L.currentView?L.currentView.historyId:null},currentTitle:function(e){return L.currentView?(arguments.length&&(L.currentView.title=e),L.currentView.title):void 0},backView:function(e){return arguments.length&&(L.backView=e),L.backView},backTitle:function(e){var t=e&&s(e.backViewId)||L.backView;return t&&t.title},forwardView:function(e){return arguments.length&&(L.forwardView=e),L.forwardView},currentStateName:function(){return t&&t.current?t.current.name:null},isCurrentStateNavView:function(e){return!!(t&&t.current&&t.current.views&&t.current.views[e])},goToHistoryRoot:function(e){if(e){var t=d(e);if(t&&t.stack.length){if(L.currentView&&L.currentView.viewId===t.stack[0].viewId)return;T={viewId:t.stack[0].viewId,action:C,direction:A},t.stack[0].go()}}},goBack:function(e){if(u(e)&&-1!==e){if(e>-1)return;var t=L.histories[this.currentHistoryId()],n=t.cursor+e+1;1>n&&(n=1),t.cursor=n,v(t.stack[n].viewId);for(var i=n-1,o=[],a=s(t.stack[i].forwardViewId);a&&(o.push(a.stateId||a.viewId),i++,!(i>=t.stack.length));)a=s(t.stack[i].forwardViewId);var c=this;o.length&&r(function(){c.clearCache(o)},600)}L.backView&&L.backView.go()},getHistoryCount:function(e,t){var n=null;if(e){var i=[];if("string"==typeof e)i.push("(^"+e+"$)");else if(e instanceof Array)for(var r=0;r<e.length;r++)i.push("(^"+e[r]+"$)");n=new RegExp(i.join("|"))}for(var o=0,a=s(L.currentView.backViewId);a;){if(o++,n){if(a.stateName.match(n))return o}else if(t&&a.url.search(t)>-1)return o;a=s(a.backViewId)}return o},backHistoryAndGo:function(e,t){if(e&&t){if(!e.stateStr&&!e.urlStr&&!e.backNum)return void t();var n=this,i=e.backNum||n.getHistoryCount(e.stateStr,e.urlStr),r=L.histories[this.currentHistoryId()],o=r.cursor-i;0>o&&(o=0),r.cursor=o,v(r.stack[o].viewId);for(var a=o,c=[],l=s(r.stack[a].forwardViewId);l&&(c.push(l.stateId||l.viewId),a++,!(a>=r.stack.length));)l=s(r.stack[a].forwardViewId);t()}},enabledBack:function(e){var t=l(e);return!(!t||t.historyId!==e.historyId)},clearHistory:function(){var e=L.histories,t=L.currentView;if(e)for(var n in e)e[n].stack&&(e[n].stack=[],e[n].cursor=-1),t&&t.historyId===n?(t.backViewId=t.forwardViewId=null,e[n].stack.push(t)):e[n].destroy&&e[n].destroy();for(var i in L.views)i!==t.viewId&&delete L.views[i];t&&v(t.viewId)},clearCache:function(e){r(function(){a._instances.forEach(function(t){t.clearCache(e)})})},nextViewOptions:function(t){return b&&b(),arguments.length&&(r.cancel(S),null===t?_=t:(_=_||{},c(_,t),_.expire&&(b=e.$on("$stateChangeSuccess",function(){S=r(function(){_=null},_.expire)})))),_},isAbstractEle:function(e,t){return t&&t.$$state&&t.$$state.self["abstract"]?!0:!(!e||!$(e)&&!$(e.children()))},isActiveScope:function(e){if(!e)return!1;for(var t,n=e,i=this.currentHistoryId();n;){if(n.$$disconnected)return!1;if(!t&&n.hasOwnProperty("$historyId")&&(t=!0),i){if(n.hasOwnProperty("$historyId")&&i==n.$historyId)return!0;if(n.hasOwnProperty("$activeHistoryId")&&i==n.$activeHistoryId){if(n.hasOwnProperty("$historyId"))return!0;if(!t)return!0}}t&&n.hasOwnProperty("$activeHistoryId")&&(t=!1),n=n.$parent}return i?"root"==i:!0}}}]).run(["$rootScope","$state","$location","$document","$ionicPlatform","$ionicHistory","IONIC_BACK_PRIORITY",function(e,t,n,i,r,o,a){function s(e){var t=o.backView();return t?t.go():ionic.Platform.exitApp(),e.preventDefault(),!1}e.$on("$ionicView.beforeEnter",function(){ionic.keyboard&&ionic.keyboard.hide&&ionic.keyboard.hide()}),e.$on("$ionicHistory.change",function(e,i){if(!i)return null;var r=o.viewHistory(),a=i.historyId?r.histories[i.historyId]:null;if(a&&a.cursor>-1&&a.cursor<a.stack.length){var s=a.stack[a.cursor];return s.go(i)}!i.url&&i.uiSref&&(i.url=t.href(i.uiSref)),i.url&&(0===i.url.indexOf("#")&&(i.url=i.url.replace("#","")),i.url!==n.url()&&n.url(i.url))}),e.$ionicGoBack=function(e){o.goBack(e)},e.$on("$ionicView.afterEnter",function(e,t){t&&t.title&&(i[0].title=t.title)}),r.registerBackButtonAction(s,a.view)}]),s.provider("$ionicConfig",function(){function e(e,i){a.platform[e]=i,r.platform[e]={},t(a,a.platform[e]),n(a.platform[e],r.platform[e],"")}function t(e,n){for(var i in e)i!=o&&e.hasOwnProperty(i)&&(angular.isObject(e[i])?(u(n[i])||(n[i]={}),t(e[i],n[i])):u(n[i])||(n[i]=null))}function n(e,t,r){l(e,function(s,c){angular.isObject(e[c])?(t[c]={},n(e[c],t[c],r+"."+c)):t[c]=function(n){if(arguments.length)return e[c]=n,t;if(e[c]==o){var s=i(a.platform,ionic.Platform.platform()+r+"."+c);return s||s===!1?s:i(a.platform,"default"+r+"."+c)}return e[c]}})}function i(e,t){t=t.split(".");for(var n=0;n<t.length;n++){if(!e||!u(e[t[n]]))return null;e=e[t[n]]}return e}var r=this;r.platform={};var o="platform",a={views:{maxCache:o,forwardCache:o,transition:o,swipeBackEnabled:o,swipeBackHitWidth:o},navBar:{alignTitle:o,positionPrimaryButtons:o,positionSecondaryButtons:o,transition:o},backButton:{icon:o,text:o,previousTitleText:o},form:{checkbox:o,toggle:o},scrolling:{jsScrolling:o},spinner:{icon:o},tabs:{style:o,position:o},templates:{maxPrefetch:o},platform:{}};n(a,r,""),e("default",{views:{maxCache:10,forwardCache:!1,transition:"ios",swipeBackEnabled:!0,swipeBackHitWidth:45},navBar:{alignTitle:"center",positionPrimaryButtons:"left",positionSecondaryButtons:"right",transition:"view"},backButton:{icon:"ion-ios-arrow-back",text:"Back",previousTitleText:!0},form:{checkbox:"circle",toggle:"large"},scrolling:{jsScrolling:!0},spinner:{icon:"ios"},tabs:{style:"standard",position:"bottom"},templates:{maxPrefetch:30}}),e("ios",{}),e("android",{views:{transition:"android",swipeBackEnabled:!1},navBar:{alignTitle:"left",positionPrimaryButtons:"right",positionSecondaryButtons:"right"},backButton:{icon:"ion-android-arrow-back",text:!1,previousTitleText:!1},form:{checkbox:"square",toggle:"small"},spinner:{icon:"android"},tabs:{style:"striped",position:"top"}}),e("windowsphone",{spinner:{icon:"android"}}),r.transitions={views:{},navBar:{}},r.transitions.views.ios=function(e,t,n,i){function r(e,t,n,i){var r={};r[ionic.CSS.TRANSITION_DURATION]=o.shouldAnimate?"":0,r.opacity=t,i>-1&&(r.boxShadow="0 0 10px rgba(0,0,0,"+(o.shouldAnimate?.45*i:.3)+")"),r[ionic.CSS.TRANSFORM]="translate3d("+n+"%,0,0)",ionic.DomUtil.cachedStyles(e,r)}var o={run:function(i){"forward"==n?(r(e,1,99*(1-i),1-i),r(t,1-.1*i,-33*i,-1)):"back"==n?(r(e,1-.1*(1-i),-33*(1-i),-1),r(t,1,100*i,1-i)):(r(e,1,0,-1),r(t,0,0,-1))},shouldAnimate:i&&("forward"==n||"back"==n)};return o},r.transitions.navBar.ios=function(e,t,n,i){function r(e,t,n,i){var r={};r[ionic.CSS.TRANSITION_DURATION]=s.shouldAnimate?"":"0ms",r.opacity=1===t?"":t,e.setCss("buttons-left",r),e.setCss("buttons-right",r),e.setCss("back-button",r),r[ionic.CSS.TRANSFORM]="translate3d("+i+"px,0,0)",e.setCss("back-text",r),r[ionic.CSS.TRANSFORM]="translate3d("+n+"px,0,0)",e.setCss("title",r)}function o(e,t,n){if(e&&t){var i=(e.titleTextX()+e.titleWidth())*(1-n),o=t&&(t.titleTextX()-e.backButtonTextLeft())*(1-n)||0;r(e,n,i,o)}}function a(e,t,n){if(e&&t){var i=(-(e.titleTextX()-t.backButtonTextLeft())-e.titleLeftRight())*n;r(e,1-n,i,0)}}var s={run:function(n){var i=e.controller(),r=t&&t.controller();"back"==s.direction?(a(i,r,1-n),o(r,i,1-n)):(o(i,r,n),a(r,i,n))},direction:n,shouldAnimate:i&&("forward"==n||"back"==n)};return s},r.transitions.views.android=function(e,t,n,i){function r(e,t,n,i){var r={};r[ionic.CSS.TRANSITION_DURATION]=o.shouldAnimate?"":0,r.opacity=t,i>-1&&(r.boxShadow="0 0 10px rgba(0,0,0,"+(o.shouldAnimate?.45*i:.3)+")"),r[ionic.CSS.TRANSFORM]="translate3d("+n+"%,0,0)",ionic.DomUtil.cachedStyles(e,r)}var o={run:function(i){"forward"==n?(r(e,1,99*(1-i),1-i),r(t,1-.1*i,-33*i,-1)):"back"==n?(r(e,1-.1*(1-i),-33*(1-i),-1),r(t,1,100*i,1-i)):(r(e,1,0,-1),r(t,0,0,-1))},shouldAnimate:i&&("forward"==n||"back"==n)};return o},r.transitions.navBar.android=function(e,t,n,i){function r(e,t,n,i){var r={};r[ionic.CSS.TRANSITION_DURATION]=s.shouldAnimate?"":"0ms",r.opacity=1===t?"":t,e.setCss("buttons-left",r),e.setCss("buttons-right",r),e.setCss("back-button",r),r[ionic.CSS.TRANSFORM]="translate3d("+i+"px,0,0)",e.setCss("back-text",r),r[ionic.CSS.TRANSFORM]="translate3d("+n+"px,0,0)",e.setCss("title",r)}function o(e,t,n){if(e&&t){var i=(e.titleTextX()+e.titleWidth())*(1-n),o=t&&(t.titleTextX()-e.backButtonTextLeft())*(1-n)||0;r(e,n,i,o)}}function a(e,t,n){if(e&&t){var i=(-(e.titleTextX()-t.backButtonTextLeft())-e.titleLeftRight())*n;r(e,1-n,i,0)}}var s={run:function(n){var i=e.controller(),r=t&&t.controller();"back"==s.direction?(a(i,r,1-n),o(r,i,1-n)):(o(i,r,n),a(r,i,n))},direction:n,shouldAnimate:i&&("forward"==n||"back"==n)};return s},r.transitions.views.none=function(e,t){return{run:function(n){r.transitions.views.android(e,t,!1,!1).run(n)},shouldAnimate:!1}},r.transitions.navBar.none=function(e,t){return{run:function(n){r.transitions.navBar.ios(e,t,!1,!1).run(n),r.transitions.navBar.android(e,t,!1,!1).run(n)},shouldAnimate:!1}},r.setPlatformConfig=e,r.$get=function(){return r}}).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|tel|ftp|mailto|file|ghttps?|ms-appx|x-wmapp0):/),e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|content|blob|ms-appx|x-wmapp0):|data:image\//)}]);var v='<div class="loading-container"><div class="loading"></div></div>',m="$ionicLoading instance.hide() has been deprecated. Use $ionicLoading.hide().",g="$ionicLoading instance.show() has been deprecated. Use $ionicLoading.show().",$="$ionicLoading instance.setContent() has been deprecated. Use $ionicLoading.show({ template: 'my content' }).";s.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).factory("$ionicLoading",["$ionicLoadingConfig","$ionicBody","$ionicTemplateLoader","$ionicBackdrop","$timeout","$q","$log","$compile","$ionicPlatform","$rootScope","IONIC_BACK_PRIORITY",function(e,t,n,i,r,o,a,s,l,u,f){function d(){return y||(y=n.compile({template:v,appendTo:t.get()}).then(function(e){return e.show=function(a){var c=a.templateUrl?n.load(a.templateUrl):o.when(a.template||a.content||"");e.scope=a.scope||e.scope,e.isShown||(e.hasBackdrop=!a.noBackdrop&&a.showBackdrop!==!1,e.hasBackdrop&&(i.retain(),i.getElement().addClass("backdrop-loading"))),a.duration&&(r.cancel(e.durationTimeout),e.durationTimeout=r(angular.bind(e,e.hide),+a.duration)),_(),_=l.registerBackButtonAction(p,f.loading),c.then(function(n){if(n){var i=e.element.children();i.html(n),s(i.contents())(e.scope)}e.isShown&&(e.element.addClass("visible"),ionic.requestAnimationFrame(function(){e.isShown&&(e.element.addClass("active"),t.addClass("loading-active"))}))}),e.isShown=!0},e.hide=function(){_(),e.isShown&&(e.hasBackdrop&&(i.release(),i.getElement().removeClass("backdrop-loading")),e.element.removeClass("active"),t.removeClass("loading-active"),setTimeout(function(){!e.isShown&&e.element.removeClass("visible")},200)),r.cancel(e.durationTimeout),e.isShown=!1},e})),y}function h(t){t=c({},e||{},t||{});var n=t.delay||t.showDelay||0;return b(),S(),t.hideOnStateChange&&(b=u.$on("$stateChangeSuccess",w),S=u.$on("$stateChangeError",w)),r.cancel(T),T=r(p,n),T.then(d).then(function(e){return e.show(t)}),{hide:function(){return a.error(m),w.apply(this,arguments)},show:function(){return a.error(g),h.apply(this,arguments)},setContent:function(e){return a.error($),d().then(function(t){t.show({template:e})})}}}function w(){b(),S(),r.cancel(T),d().then(function(e){e.hide()})}var y,_=p,b=p,S=p,T=o.when();return{show:h,hide:w,_getLoader:d}}]),s.factory("$ionicModal",["$rootScope","$ionicBody","$compile","$timeout","$ionicPlatform","$ionicTemplateLoader","$$q","$log","$ionicClickBlock","$window","IONIC_BACK_PRIORITY",function(e,t,n,i,r,o,a,s,l,u,f){var d=ionic.views.Modal.inherit({initialize:function(e){ionic.views.Modal.prototype.initialize.call(this,e),this.animation=e.animation||"slide-in-up"},show:function(e){var n=this;if(n.scope.$$destroyed)return s.error("Cannot call "+n.viewType+".show() after remove(). Please create a new "+n.viewType+" instance."),a.when();l.show(600),g.add(n);var o=h(n.modalEl);n.el.classList.remove("hide"),i(function(){n._isShown&&t.addClass(n.viewType+"-open")},400,!1),n.el.parentElement||(o.addClass(n.animation),t.append(n.el));var c=o.data("$$ionicScrollController");return c&&c.resize(),e&&n.positionView&&(n.positionView(e,o),n._onWindowResize=function(){n._isShown&&n.positionView(e,o)},ionic.on("resize",n._onWindowResize,window)),o.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"),n._isShown=!0,n._deregisterBackButton=r.registerBackButtonAction(n.hardwareBackButtonClose?angular.bind(n,n.hide):p,f.modal),ionic.views.Modal.prototype.show.call(n),i(function(){n._isShown&&(o.addClass("ng-enter-active"),ionic.trigger("resize"),n.scope.$parent&&n.scope.$parent.$broadcast(n.viewType+".shown",n),n.el.classList.add("active"),n.scope.$broadcast("$ionicHeader.align"))},20),i(function(){n._isShown&&n.$el.on("click",function(e){n.backdropClickToClose&&e.target===n.el&&g.isHighest(n)&&n.hide()})},400)},hide:function(e){var n=this,r=h(n.modalEl);return l.show(600),g.remove(n),n.el.classList.remove("active"),r.addClass("ng-leave "+(e||"")),i(function(){n._isShown||r.addClass("ng-leave-active").removeClass("ng-enter ng-enter-active active")},20,!1),n.$el.off("click"),n._isShown=!1,n.scope.$parent&&n.scope.$parent.$broadcast(n.viewType+".hidden",n),n._deregisterBackButton&&n._deregisterBackButton(),ionic.views.Modal.prototype.hide.call(n),n.positionView&&ionic.off("resize",n._onWindowResize,window),i(function(){t.removeClass(n.viewType+"-open"),n.el.classList.add("hide")},n.hideDelay||320)},remove:function(){var e=this;return e.scope.$parent&&e.scope.$parent.$broadcast(e.viewType+".removed",e),e.hide().then(function(){e.scope.$destroy(),e.$el.remove()})},isShown:function(){return!!this._isShown}}),v=function(t,i){var r=i.scope&&i.scope.$new()||e.$new(!0);i.viewType=i.viewType||"modal",c(r,{$hasHeader:!1,$hasSubheader:!1,$hasFooter:!1,$hasSubfooter:!1,$hasTabs:!1,$hasTabsTop:!1});var o=n("<ion-"+i.viewType+">"+t+"</ion-"+i.viewType+">")(r);i.$el=o,i.el=o[0],i.modalEl=i.el.querySelector("."+i.viewType);var a=new d(i);return a.scope=r,i.scope||(r[i.viewType]=a),a},m=[],g={add:function(e){m.push(e)},remove:function(e){var t=m.indexOf(e);t>-1&&t<m.length&&m.splice(t,1)},isHighest:function(e){var t=m.indexOf(e);return t>-1&&t===m.length-1}};return{fromTemplate:function(e,t){var n=v(e,t||{});return n},fromTemplateUrl:function(e,t,n){var i;return angular.isFunction(t)&&(i=t,t=n),o.load(e).then(function(e){var n=v(e,t||{});return i&&i(n),n})},stack:g}}]),s.service("$ionicNavBarDelegate",ionic.DelegateService(["align","showBackButton","showBar","title","changeTitle","setTitle","getTitle","back","getPreviousTitle"])),s.service("$ionicNavViewDelegate",ionic.DelegateService(["clearCache"])),s.constant("IONIC_BACK_PRIORITY",{view:100,sideMenu:150,modal:200,actionSheet:300,popup:400,loading:500}).provider("$ionicPlatform",function(){return{$get:["$q",function(e){var t={onHardwareBackButton:function(e){ionic.Platform.ready(function(){document.addEventListener("backbutton",e,!1)})},offHardwareBackButton:function(e){ionic.Platform.ready(function(){document.removeEventListener("backbutton",e)})},$backButtonActions:{},registerBackButtonAction:function(e,n,i){t._hasBackButtonHandler||(t.$backButtonActions={},t.onHardwareBackButton(t.hardwareBackButtonClick),t._hasBackButtonHandler=!0);var r={id:i?i:ionic.Utils.nextUid(),priority:n?n:0,fn:e};return t.$backButtonActions[r.id]=r,function(){delete t.$backButtonActions[r.id]}},hardwareBackButtonClick:function(e){var n,i;for(i in t.$backButtonActions)(!n||t.$backButtonActions[i].priority>=n.priority)&&(n=t.$backButtonActions[i]);return n?(n.fn(e),n):void 0},is:function(e){return ionic.Platform.is(e)},on:function(e,t){return ionic.Platform.ready(function(){document.addEventListener(e,t,!1)}),function(){ionic.Platform.ready(function(){document.removeEventListener(e,t)})}},ready:function(t){var n=e.defer();return ionic.Platform.ready(function(){n.resolve(),t&&t()}),n.promise}};return t}]}}),s.factory("$ionicPopover",["$ionicModal","$ionicPosition","$document","$window",function(e,t,n,i){function r(e,n){var r=h(e.target||e),a=t.offset(r),s=n.prop("offsetWidth"),c=n.prop("offsetHeight"),l=i.innerWidth,u=i.innerHeight,f={left:a.left+a.width/2-s/2},d=h(n[0].querySelector(".popover-arrow"));f.left<o?f.left=o:f.left+s+o>l&&(f.left=l-s-o),a.top+a.height+c>u&&a.top-c>0?(f.top=a.top-c,n.addClass("popover-bottom")):(f.top=a.top+a.height,n.removeClass("popover-bottom")),d.css({left:a.left+a.width/2-d.prop("offsetWidth")/2-f.left+"px"}),n.css({top:f.top+"px",left:f.left+"px",marginLeft:"0",opacity:"1"})}var o=6,a={viewType:"popover",hideDelay:1,animation:"none",positionView:r};return{fromTemplate:function(t,n){return e.fromTemplate(t,ionic.Utils.extend(a,n||{}))},fromTemplateUrl:function(t,n){return e.fromTemplateUrl(t,ionic.Utils.extend(a,n||{}))}}}]);var w='<div class="popup-container" ng-class="cssClass"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3><h5 class="popup-sub-title" ng-bind-html="subTitle" ng-if="subTitle"></h5></div><div class="popup-body"></div><div class="popup-buttons" ng-show="buttons.length"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>';s.factory("$ionicPopup",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$ionicBody","$compile","$ionicPlatform","$ionicModal","IONIC_BACK_PRIORITY",function(e,t,n,i,r,o,a,s,l,u){function f(t){t=c({scope:null,title:"",buttons:[]},t||{});var s={};return s.scope=(t.scope||r).$new(),s.element=h(w),s.responseDeferred=n.defer(),o.get().appendChild(s.element[0]),a(s.element)(s.scope),c(s.scope,{title:t.title,buttons:t.buttons,subTitle:t.subTitle,cssClass:t.cssClass,$buttonTapped:function(e,t){var n=(e.onTap||p)(t);t=t.originalEvent||t,t.defaultPrevented||s.responseDeferred.resolve(n)}}),n.when(t.templateUrl?e.load(t.templateUrl):t.template||t.content||"").then(function(e){var t=h(s.element[0].querySelector(".popup-body"));e?(t.html(e),a(t.contents())(s.scope)):t.remove()}),s.show=function(){s.isShown||s.removed||(l.stack.add(s),s.isShown=!0,ionic.requestAnimationFrame(function(){s.isShown&&(s.element.removeClass("popup-hidden"),s.element.addClass("popup-showing active"),m(s.element))}))},s.hide=function(e){return e=e||p,s.isShown?(l.stack.remove(s),s.isShown=!1,s.element.removeClass("active"),s.element.addClass("popup-hidden"),void i(e,250,!1)):e()},s.remove=function(){!s.removed&&l.stack.isHighest(s)&&(s.hide(function(){s.element.remove(),s.scope.$destroy()}),s.removed=!0)},s}function d(){var e=b[b.length-1];e&&e.responseDeferred.resolve()}function v(e){function n(){b.push(r),i(r.show,a,!1),r.responseDeferred.promise.then(function(e){var n=b.indexOf(r);return-1!==n&&b.splice(n,1),b.length>0?b[b.length-1].show():(t.release(),i(function(){b.length||o.removeClass("popup-open")},400,!1),(S._backButtonActionDone||p)()),r.remove(),e})}var r=S._createPopup(e),a=0;return b.length>0?(b[b.length-1].hide(),a=_.stackPushDelay):(o.addClass("popup-open"),t.retain(),S._backButtonActionDone=s.registerBackButtonAction(d,u.popup)),r.responseDeferred.promise.close=function(e){r.removed||r.responseDeferred.resolve(e)},r.responseDeferred.notify({close:r.responseDeferred.close}),n(),r.responseDeferred.promise}function m(e){var t=e[0].querySelector("[autofocus]");t&&t.focus()}function g(e){return v(c({buttons:[{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return!0}}]},e||{}))}function $(e){return v(c({buttons:[{text:e.cancelText||"Cancel",type:e.cancelType||"button-default",onTap:function(){return!1}},{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return!0}}]},e||{}))}function y(e){var t=r.$new(!0);t.data={};var n="";return e.template&&/<[a-z][\s\S]*>/i.test(e.template)===!1&&(n="<span>"+e.template+"</span>",delete e.template),v(c({template:n+'<input ng-model="data.response" type="'+(e.inputType||"text")+'" placeholder="'+(e.inputPlaceholder||"")+'">',scope:t,buttons:[{text:e.cancelText||"Cancel",type:e.cancelType||"button-default",onTap:function(){}},{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return t.data.response||""}}]},e||{}))}var _={stackPushDelay:75},b=[],S={show:v,alert:g,confirm:$,prompt:y,_createPopup:f,_popupStack:b};return S}]),s.factory("$ionicPosition",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},o=r(t[0]);o!=e[0]&&(i=this.offset(h(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}}]),s.service("$ionicScrollDelegate",ionic.DelegateService(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","zoomTo","zoomBy","getScrollPosition","anchorScroll","freezeScroll","freezeAllScrolls","getScrollView"])),s.service("$ionicSideMenuDelegate",ionic.DelegateService(["toggleLeft","toggleRight","getOpenRatio","isOpen","isOpenLeft","isOpenRight","canDragContent","edgeDragThreshold"])),s.service("$ionicSlideBoxDelegate",ionic.DelegateService(["update","slide","select","enableSlide","disableSlideDir","previous","next","stop","autoPlay","start","currentIndex","selected","slidesCount","count","loop"])),s.service("$ionicTabsDelegate",ionic.DelegateService(["select","selectedIndex"])),function(){var e=[];s.factory("$ionicTemplateCache",["$http","$templateCache","$timeout",function(t,n,i){function r(e){return"undefined"==typeof e?o():(d(e)&&(e=[e]),l(e,function(e){s.push(e)}),void(a&&o()))}function o(){var e;if(r._runCount++,a=!0,0!==s.length){for(var c=0;4>c&&(e=s.pop());)d(e)&&t.get(e,{cache:n}),c++;s.length&&i(o,1e3)}}var a,s=e;return r._runCount=0,r}]).config(["$stateProvider","$ionicConfigProvider",function(t,n){var i=t.state;t.state=function(r,o){if("object"==typeof o){var a=o.prefetchTemplate!==!1&&e.length<n.templates.maxPrefetch();if(a&&d(o.templateUrl)&&e.push(o.templateUrl),angular.isObject(o.views))for(var s in o.views)a=o.views[s].prefetchTemplate!==!1&&e.length<n.templates.maxPrefetch(),a&&d(o.views[s].templateUrl)&&e.push(o.views[s].templateUrl)}return i.call(t,r,o)}}]).run(["$ionicTemplateCache",function(e){e()}])}(),s.factory("$ionicTemplateLoader",["$compile","$controller","$http","$q","$rootScope","$templateCache",function(e,t,n,i,r,o){function a(e){return n.get(e,{cache:o}).then(function(e){return e.data&&e.data.trim()})}function s(n){n=c({template:"",templateUrl:"",scope:null,controller:null,locals:{},appendTo:null},n||{});
var o=n.templateUrl?this.load(n.templateUrl):i.when(n.template);return o.then(function(i){var o,a=n.scope||r.$new(),s=h("<div>").html(i).contents();return n.controller&&(o=t(n.controller,c(n.locals,{$scope:a})),s.children().data("$ngControllerController",o)),n.appendTo&&h(n.appendTo).append(s),e(s)(a),{element:s,scope:a}})}return{load:a,compile:s}}]),s.factory("$ionicViewService",["$ionicHistory","$log",function(e,t){function n(e,n){t.warn("$ionicViewService"+e+" is deprecated, please use $ionicHistory"+n+" instead: http://ionicframework.com/docs/nightly/api/service/$ionicHistory/")}n("","");var i={getCurrentView:"currentView",getBackView:"backView",getForwardView:"forwardView",getCurrentStateName:"currentStateName",nextViewOptions:"nextViewOptions",clearHistory:"clearHistory"};return l(i,function(t,r){i[r]=function(){return n("."+r,"."+t),e[t].apply(this,arguments)}}),i}]),s.factory("$ionicViewSwitcher",["$timeout","$document","$q","$ionicClickBlock","$ionicConfig","$ionicNavBarDelegate",function(e,t,n,i,r,o){function a(e,t){return s(e)["abstract"]?s(e).name:t?t.stateId||t.viewId:ionic.Utils.nextUid()}function s(e){return e&&e.$$state&&e.$$state.self||{}}function f(e,t,n,i){var o=s(e),a=m||I(t,"view-transition")||o.viewTransition||r.views.transition()||"ios",l=r.navBar.transition();return n=g||I(t,"view-direction")||o.viewDirection||n||"none",c(d(i),{transition:a,navBarTransition:"view"===l?a:l,direction:n,shouldAnimate:"none"!==a&&"none"!==n})}function d(e){return e=e||{},{viewId:e.viewId,historyId:e.historyId,stateId:e.stateId,stateName:e.stateName,stateParams:e.stateParams}}function p(e,t){return arguments.length>1?void I(e,x,t):I(e,x)}function v(e){if(e&&e.length){var t=e.scope();t&&(t.$emit("$ionicView.unloaded",e.data(T)),t.$destroy()),e.remove()}}var m,g,$="webkitTransitionEnd transitionend",w="$noCache",y="$destroyEle",_="$eleId",b="$accessed",S="$fallbackTimer",T="$viewData",x="nav-view",E="active",C="cached",k="stage",A=0;ionic.transition=ionic.transition||{},ionic.transition.isActive=!1;var D,I=ionic.DomUtil.cachedAttr,M=[],P=1100,O={create:function(t,l,h,x,D,V){var L,N,B,R=++A,H={init:function(e,t){O.isTransitioning(!0),H.loadViewElements(e),H.render(e,function(){t&&t()})},loadViewElements:function(e){var n,i,r,o=t.getViewElements(),s=a(l,h),c=t.activeEleId();for(n=0,i=o.length;i>n&&(r=o.eq(n),r.data(_)===s?r.data(w)?(r.data(_,s+ionic.Utils.nextUid()),r.data(y,!0)):L=r:u(c)&&r.data(_)===c&&(N=r),!L||!N);n++);return B=!!L,B||(L=e.ele||O.createViewEle(l),L.data(_,s)),V&&t.activeEleId(s),e.ele=null,B},render:function(e,n){if(B)ionic.Utils.reconnectScope(L.scope());else{p(L,k);var i=f(l,L,e.direction,h),o=r.transitions.views[i.transition]||r.transitions.views.none;o(L,null,i.direction,!0).run(0),L.data(T,{viewId:i.viewId,historyId:i.historyId,stateName:i.stateName,stateParams:i.stateParams}),(s(l).cache===!1||"false"===s(l).cache||"false"==L.attr("cache-view")||0===r.views.maxCache())&&L.data(w,!0);var a=t.appendViewElement(L,l);delete i.direction,delete i.transition,a.$emit("$ionicView.loaded",i)}L.data(b,Date.now()),n&&n()},transition:function(a,s,u){function v(){p(L,G.shouldAnimate?"entering":E),p(N,G.shouldAnimate?"leaving":C),G.run(1),o._instances.forEach(function(e){e.triggerTransitionStart(R)}),G.shouldAnimate||y()}function w(e){e.target===this&&y()}function y(){y.x||(y.x=!0,e.cancel(z),L.off($,w),e.cancel(L.data(S)),N&&e.cancel(N.data(S)),H.emit("after",F,q),T&&T.resolve(t),R===A&&(n.all(M).then(O.transitionEnd),H.cleanup(F)),o._instances.forEach(function(e){e.triggerTransitionEnd()}),m=g=h=x=L=N=null)}function _(e){e.target===this&&b()}function b(){p(L,C),p(N,E),L.off($,_),e.cancel(L.data(S)),O.transitionEnd([t])}var T,z,F=f(l,L,a,h),q=c(c({},F),d(x));F.transitionId=q.transitionId=R,F.fromCache=!!B,F.enableBack=!!s,F.renderStart=D,F.renderEnd=V,I(L.parent(),"nav-view-transition",F.transition),I(L.parent(),"nav-view-direction",F.direction),e.cancel(L.data(S));var U=r.transitions.views[F.transition]||r.transitions.views.none,G=U(L,N,F.direction,F.shouldAnimate&&u&&V);if(G.shouldAnimate&&(L.on($,w),L.data(S,e(y,P)),i.show(P)),D&&(H.emit("before",F,q),p(L,k),G.run(0)),V&&(T=n.defer(),M.push(T.promise),z=e(y,P)),D&&V)e(v,16);else{if(!V)return p(L,"entering"),p(N,"leaving"),{run:G.run,cancel:function(t){t?(L.on($,_),L.data(S,e(b,P)),i.show(P)):b(),G.shouldAnimate=t,G.run(0),G=null}};V&&v()}},emit:function(e,t,n){var i=L.scope(),r=N&&N.scope();"after"==e&&(i&&i.$emit("$ionicView.enter",t),r?r.$emit("$ionicView.leave",n):i&&n&&n.viewId&&i.$emit("$ionicNavView.leave",n)),i&&i.$emit("$ionicView."+e+"Enter",t),r?r.$emit("$ionicView."+e+"Leave",n):i&&n&&n.viewId&&i.$emit("$ionicNavView."+e+"Leave",n)},cleanup:function(e){N&&"back"==e.direction&&!r.views.forwardCache()&&v(N);var n,i,o,a=t.getViewElements(),s=a.length,c=s-1>r.views.maxCache(),l=Date.now();for(n=0;s>n;n++)i=a.eq(n),c&&i.data(b)<l?(l=i.data(b),o=a.eq(n)):i.data(y)&&p(i)!=E&&v(i);v(o),L.data(w)&&L.data(y,!0)},enteringEle:function(){return L},leavingEle:function(){return N}};return H},transitionEnd:function(e){l(e,function(e){e.transitionEnd()}),O.isTransitioning(!1),i.hide(),M=[]},nextTransition:function(e){m=e},nextDirection:function(e){g=e},isTransitioning:function(t){return arguments.length&&(ionic.transition.isActive=!!t,e.cancel(D),t&&(D=e(function(){O.isTransitioning(!1)},999))),ionic.transition.isActive},createViewEle:function(e){var n=t[0].createElement("div");return e&&e.$template&&(n.innerHTML=e.$template,1===n.children.length)?(n.children[0].classList.add("pane"),h(n.children[0])):(n.className="pane",h(n))},viewEleIsActive:function(e,t){p(e,t?E:C)},getTransitionData:f,navViewAttr:p,destroyViewEle:v};return O}]),s.config(["$provide",function(e){e.decorator("$compile",["$delegate",function(e){return e.$$addScopeInfo=function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)},e}])}]),s.config(["$provide",function(e){function t(e,t){return e.__hash=e.hash,e.hash=function(n){return u(n)&&t(function(){var e=document.querySelector(".scroll-content");e&&(e.scrollTop=0)},0,!1),e.__hash(n)},e}e.decorator("$location",["$delegate","$timeout",t])}]),s.controller("$ionicHeaderBar",["$scope","$element","$attrs","$q","$ionicConfig","$ionicHistory",function(e,t,n,i,r,o){function a(e){return T[e]||(T[e]=t[0].querySelector("."+e)),T[e]}var s="title",c="back-text",l="back-button",u="default-title",f="previous-title",d="hide",h=this,p="",v="",m=0,g=0,$="",w=!1,y=!0,_=!0,b=!1,S=0;h.beforeEnter=function(t){e.$broadcast("$ionicView.beforeEnter",t)},h.title=function(e){return arguments.length&&e!==p&&(a(s).innerHTML=e,p=e,S=0),p},h.enableBack=function(e,t){return arguments.length&&(w=e,t||h.updateBackButton()),w},h.showBack=function(e,t){return arguments.length&&(y=e,t||h.updateBackButton()),y},h.showNavBack=function(e){_=e,h.updateBackButton()},h.updateBackButton=function(){var e;(y&&_&&w)!==b&&(b=y&&_&&w,e=a(l),e&&e.classList[b?"remove":"add"](d)),w&&(e=e||a(l),e&&(h.backButtonIcon!==r.backButton.icon()&&(e=a(l+" .icon"),e&&(h.backButtonIcon=r.backButton.icon(),e.className="icon "+h.backButtonIcon)),h.backButtonText!==r.backButton.text()&&(e=a(l+" .back-text"),e&&(e.textContent=h.backButtonText=r.backButton.text()))))},h.titleTextWidth=function(){if(!S){var e=ionic.DomUtil.getTextBounds(a(s));S=Math.min(e&&e.width||30)}return S},h.titleWidth=function(){var e=h.titleTextWidth(),t=a(s).offsetWidth;return e>t&&(e=t+(m-g-5)),e},h.titleTextX=function(){return t[0].offsetWidth/2-h.titleWidth()/2},h.titleLeftRight=function(){return m-g},h.backButtonTextLeft=function(){for(var e=0,t=a(c);t;)e+=t.offsetLeft,t=t.parentElement;return e},h.resetBackButton=function(e){if(r.backButton.previousTitleText()){var t=a(f);if(t){t.classList.remove(d);var n=e&&o.getViewById(e.viewId),i=o.backTitle(n);i!==v&&(v=t.innerHTML=i)}var s=a(u);s&&s.classList.remove(d)}},h.align=function(e){var i=a(s);e=e||n.alignTitle||r.navBar.alignTitle();var o=h.calcWidths(e,!1);if(y&&v&&r.backButton.previousTitleText()){var c=h.calcWidths(e,!0),l=t[0].offsetWidth-c.titleLeft-c.titleRight;h.titleTextWidth()<=l&&(o=c)}return h.updatePositions(i,o.titleLeft,o.titleRight,o.buttonsLeft,o.buttonsRight,o.css,o.showPrevTitle)},h.calcWidths=function(e,n){var i,r,o,h,p,v,m,g,$,w=a(s),_=a(l),b=t[0].childNodes,S=0,T=0,x=0,E=0,C="",k=0;for(i=0;i<b.length;i++){if(p=b[i],m=0,1==p.nodeType){if(p===w){$=!0;continue}if(p.classList.contains(d))continue;if(y&&p===_){for(r=0;r<p.childNodes.length;r++)if(h=p.childNodes[r],1==h.nodeType)if(h.classList.contains(c))for(o=0;o<h.children.length;o++)if(v=h.children[o],n){if(v.classList.contains(u))continue;k+=v.offsetWidth}else{if(v.classList.contains(f))continue;k+=v.offsetWidth}else k+=h.offsetWidth;else 3==h.nodeType&&h.nodeValue.trim()&&(g=ionic.DomUtil.getTextBounds(h),k+=g&&g.width||0);m=k||p.offsetWidth}else m=p.offsetWidth}else 3==p.nodeType&&p.nodeValue.trim()&&(g=ionic.DomUtil.getTextBounds(p),m=g&&g.width||0);$?T+=m:S+=m}if("left"==e)C="title-left",S&&(x=S+15),T&&(E=T+15);else if("right"==e)C="title-right",S&&(x=S+15),T&&(E=T+15);else{var A=Math.max(S,T)+10;A>10&&(x=E=A)}return{backButtonWidth:k,buttonsLeft:S,buttonsRight:T,titleLeft:x,titleRight:E,showPrevTitle:n,css:C}},h.updatePositions=function(e,n,o,s,c,l,p){var v=i.defer();if(e&&(n!==m&&(e.style.left=n?n+"px":"",m=n),o!==g&&(e.style.right=o?o+"px":"",g=o),l!==$&&(l&&e.classList.add(l),$&&e.classList.remove($),$=l)),r.backButton.previousTitleText()){var w=a(f),y=a(u);w&&w.classList[p?"remove":"add"](d),y&&y.classList[p?"add":"remove"](d)}return ionic.requestAnimationFrame(function(){if(e&&e.offsetWidth+10<e.scrollWidth){var n=c+5,i=t[0].offsetWidth-m-h.titleTextWidth()-20;o=n>i?n:i,o!==g&&(e.style.right=o+"px",g=o)}v.resolve()}),v.promise},h.setCss=function(e,t){ionic.DomUtil.cachedStyles(a(e),t)};var T={};e.$on("$destroy",function(){for(var e in T)T[e]=null})}]),s.controller("$ionInfiniteScroll",["$scope","$attrs","$element","$timeout",function(e,t,n,i){function r(){ionic.requestAnimationFrame(function(){n[0].classList.add("active")}),c.isLoading=!0,e.$parent&&e.$parent.$apply(t.onInfinite||"")}function o(){ionic.requestAnimationFrame(function(){n[0].classList.remove("active")}),i(function(){c.jsScrolling&&c.scrollView.resize(),(c.jsScrolling&&c.scrollView.__container&&c.scrollView.__container.offsetHeight>0||!c.jsScrolling)&&c.checkBounds()},30,!1),c.isLoading=!1}function a(){if(!c.isLoading){var e={};if(c.jsScrolling){e=c.getJSMaxScroll();var t=c.scrollView.getValues();(-1!==e.left&&t.left>=e.left||-1!==e.top&&t.top>=e.top)&&r()}else e=c.getNativeMaxScroll(),(-1!==e.left&&c.scrollEl.scrollLeft>=e.left-c.scrollEl.clientWidth||-1!==e.top&&c.scrollEl.scrollTop>=e.top-c.scrollEl.clientHeight)&&r()}}function s(e){var n=(t.distance||"2.5%").trim(),i=-1!==n.indexOf("%");return i?e*(1-parseFloat(n)/100):e-parseFloat(n)}var c=this;c.isLoading=!1,e.icon=function(){return u(t.icon)?t.icon:"ion-load-d"},e.spinner=function(){return u(t.spinner)?t.spinner:""},e.$on("scroll.infiniteScrollComplete",function(){o()}),e.$on("$destroy",function(){c.scrollCtrl&&c.scrollCtrl.$element&&c.scrollCtrl.$element.off("scroll",c.checkBounds),c.scrollEl&&c.scrollEl.removeEventListener&&c.scrollEl.removeEventListener("scroll",c.checkBounds)}),c.checkBounds=ionic.Utils.throttle(a,300),c.getJSMaxScroll=function(){var e=c.scrollView.getScrollMax();return{left:c.scrollView.options.scrollingX?s(e.left):-1,top:c.scrollView.options.scrollingY?s(e.top):-1}},c.getNativeMaxScroll=function(){var e={left:c.scrollEl.scrollWidth,top:c.scrollEl.scrollHeight},t=window.getComputedStyle(c.scrollEl)||{};return{left:"scroll"===t.overflowX||"auto"===t.overflowX||"scroll"===c.scrollEl.style["overflow-x"]?s(e.left):-1,top:"scroll"===t.overflowY||"auto"===t.overflowY||"scroll"===c.scrollEl.style["overflow-y"]?s(e.top):-1}},c.__finishInfiniteScroll=o}]),s.service("$ionicListDelegate",ionic.DelegateService(["showReorder","showDelete","canSwipeItems","closeOptionButtons"])).controller("$ionicList",["$scope","$attrs","$ionicListDelegate","$ionicHistory",function(e,t,n,i){var r=this,o=!0,a=!1,s=!1,c=n._registerInstance(r,t.delegateHandle,function(){return i.isActiveScope(e)});e.$on("$destroy",c),r.showReorder=function(e){return arguments.length&&(a=!!e),a},r.showDelete=function(e){return arguments.length&&(s=!!e),s},r.canSwipeItems=function(e){return arguments.length&&(o=!!e),o},r.closeOptionButtons=function(){r.listView&&r.listView.clearDragEffects()}}]),s.controller("$ionicNavBar",["$scope","$element","$attrs","$compile","$timeout","$ionicNavBarDelegate","$ionicConfig","$ionicHistory",function(e,t,n,i,r,o,a,s){function c(e,t){var n=console.warn||console.log;n&&n.call(console,"navBarController."+e+" is deprecated, please use "+t+" instead")}function f(e){return k[e]?h(k[e]):void 0}function d(){for(var e=0;e<C.length;e++)if(C[e].isActive)return C[e]}function p(){for(var e=0;e<C.length;e++)if(!C[e].isActive)return C[e]}function v(e,t){e&&ionic.DomUtil.cachedAttr(e.containerEle(),"nav-bar",t)}function m(e){ionic.DomUtil.cachedAttr(t,"nav-swipe",e)}var g,$,w,y="hide",_="$ionNavBarController",b="primaryButtons",S="secondaryButtons",T="backButton",x="primaryButtons secondaryButtons leftButtons rightButtons title".split(" "),E=this,C=[],k={},A=!0;t.parent().data(_,E);var D=n.delegateHandle||"navBar"+ionic.Utils.nextUid(),I=o._registerInstance(E,D);E.init=function(){t.addClass("nav-bar-container"),ionic.DomUtil.cachedAttr(t,"nav-bar-transition",a.views.transition()),E.createHeaderBar(!1),E.createHeaderBar(!0),e.$emit("ionNavBar.init",D)},E.createHeaderBar=function(r){function o(e,t){e&&("title"===t?m.append(e):"rightButtons"==t||t==S&&"left"!=a.navBar.positionSecondaryButtons()||t==b&&"right"==a.navBar.positionPrimaryButtons()?(v||(v=h('<div class="buttons buttons-right">'),d.append(v)),t==S?v.append(e):v.prepend(e)):(p||(p=h('<div class="buttons buttons-left">'),g[T]?g[T].after(p):d.prepend(p)),t==S?p.append(e):p.prepend(e)))}var s=h('<div class="nav-bar-block">');ionic.DomUtil.cachedAttr(s,"nav-bar",r?"active":"cached");var c=n.alignTitle||a.navBar.alignTitle(),d=h("<ion-header-bar>").addClass(n["class"]).attr("align-title",c);u(n.noTapScroll)&&d.attr("no-tap-scroll",n.noTapScroll);var p,v,m=h('<div class="title title-'+c+'">'),g={},$={};g[T]=f(T),g[T]&&d.append(g[T]),d.append(m),l(x,function(e){g[e]=f(e),o(g[e],e)});for(var w=0;w<d[0].children.length;w++)d[0].children[w].classList.add("header-item");s.append(d),t.append(i(s)(e.$new()));var _=d.data("$ionHeaderBarController");_.backButtonIcon=a.backButton.icon(),_.backButtonText=a.backButton.text();var E={isActive:r,title:function(e){_.title(e)},setItem:function(e,t){E.removeItem(t),e?("title"===t&&E.title(""),o(e,t),g[t]&&g[t].addClass(y),$[t]=e):g[t]&&g[t].removeClass(y)},removeItem:function(e){$[e]&&($[e].scope().$destroy(),$[e].remove(),$[e]=null)},containerEle:function(){return s},headerBarEle:function(){return d},afterLeave:function(){l(x,function(e){E.removeItem(e)}),_.resetBackButton()},controller:function(){return _},destroy:function(){l(x,function(e){E.removeItem(e)}),s.scope().$destroy();for(var e in g)g[e]&&(g[e].removeData(),g[e]=null);p&&p.removeData(),v&&v.removeData(),m.removeData(),d.removeData(),s.remove(),s=d=m=p=v=null}};return C.push(E),E},E.navElement=function(e,t){return u(t)&&(k[e]=t),k[e]},E.update=function(e){var t=!e.hasHeaderBar&&e.showNavBar;e.transition=a.views.transition(),t||(e.direction="none"),E.enable(t);var n=E.isInitialized?p():d(),i=E.isInitialized?d():null,r=n.controller();r.enableBack(e.enableBack,!0),r.showBack(e.showBack,!0),r.updateBackButton(),E.title(e.title,n),E.showBar(t),e.navBarItems&&l(x,function(t){n.setItem(e.navBarItems[t],t)}),E.transition(n,i,e),E.isInitialized=!0,m("")},E.transition=function(n,i,o){function s(){for(var e=0;e<C.length;e++)C[e].isActive=!1;n.isActive=!0,v(n,"active"),v(i,"cached"),E.activeTransition=f=$=null}var c=n.controller(),l=a.transitions.navBar[o.navBarTransition]||a.transitions.navBar.none,u=o.transitionId;c.beforeEnter(o);var f=l(n,i,o.direction,o.shouldAnimate&&E.isInitialized);ionic.DomUtil.cachedAttr(t,"nav-bar-transition",o.navBarTransition),ionic.DomUtil.cachedAttr(t,"nav-bar-direction",o.direction),f.shouldAnimate&&o.renderEnd?v(n,"stage"):(v(n,"entering"),v(i,"leaving")),c.resetBackButton(o),f.run(0),E.activeTransition={run:function(e){f.shouldAnimate=!1,f.direction="back",f.run(e)},cancel:function(t,r,o){m(r),v(i,"active"),v(n,"cached"),f.shouldAnimate=t,f.run(0),E.activeTransition=f=null;var a;o.showBar!==E.showBar()&&E.showBar(o.showBar),o.showBackButton!==E.showBackButton()&&E.showBackButton(o.showBackButton),a&&e.$apply()},complete:function(e,t){m(t),f.shouldAnimate=e,f.run(1),$=s}},r(c.align,16),(g=function(){w===u&&(v(n,"entering"),v(i,"leaving"),f.run(1),$=function(){w!=u&&f.shouldAnimate||s()},g=null)})()},E.triggerTransitionStart=function(e){w=e,g&&g()},E.triggerTransitionEnd=function(){$&&$()},E.showBar=function(t){return arguments.length&&(E.visibleBar(t),e.$parent.$hasHeader=!!t),!!e.$parent.$hasHeader},E.visibleBar=function(e){e&&!A?(t.removeClass(y),E.align()):!e&&A&&t.addClass(y),A=e},E.enable=function(e){E.visibleBar(e);for(var t=0;t<o._instances.length;t++)o._instances[t]!==E&&o._instances[t].visibleBar(!1)},E.showBackButton=function(t){if(arguments.length){for(var n=0;n<C.length;n++)C[n].controller().showNavBack(!!t);e.$isBackButtonShown=!!t}return e.$isBackButtonShown},E.showActiveBackButton=function(e){var t=d();return t?arguments.length?t.controller().showBack(e):t.controller().showBack():void 0},E.title=function(t,n){return u(t)&&(t=t||"",n=n||d(),n&&n.title(t),e.$title=t,s.currentTitle(t)),e.$title},E.align=function(e,t){t=t||d(),t&&t.controller().align(e)},E.hasTabsTop=function(e){t[e?"addClass":"removeClass"]("nav-bar-tabs-top")},E.hasBarSubheader=function(e){t[e?"addClass":"removeClass"]("nav-bar-has-subheader")},E.changeTitle=function(e){c("changeTitle(val)","title(val)"),E.title(e)},E.setTitle=function(e){c("setTitle(val)","title(val)"),E.title(e)},E.getTitle=function(){return c("getTitle()","title()"),E.title()},E.back=function(){c("back()","$ionicHistory.goBack()"),s.goBack()},E.getPreviousTitle=function(){c("getPreviousTitle()","$ionicHistory.backTitle()"),s.goBack()},e.$on("$destroy",function(){e.$parent.$hasHeader=!1,t.parent().removeData(_);for(var n=0;n<C.length;n++)C[n].destroy();t.remove(),t=C=null,I()})}]),s.controller("$ionicNavView",["$scope","$element","$attrs","$compile","$controller","$ionicNavBarDelegate","$ionicNavViewDelegate","$ionicHistory","$ionicViewSwitcher","$ionicConfig","$ionicScrollDelegate",function(e,t,n,i,r,o,a,s,l,u,f){function d(e,n){for(var i,r,o=t.children(),a=0,s=o.length;s>a;a++)if(i=o.eq(a),A(i)==x){r=i.scope(),r&&r.$emit(e.name.replace("Tabs","View"),n);break}}function h(e){ionic.DomUtil.cachedAttr(t,"nav-swipe",e)}function p(e,t){var n=m();n&&n.hasTabsTop(t)}function v(e,t){var n=m();n&&n.hasBarSubheader(t)}function m(){if($)for(var e=0;e<o._instances.length;e++)if(o._instances[e].$$delegateHandle==$)return o._instances[e];return t.inheritedData("$ionNavBarController")}var g,$,w,y,_,b="$eleId",S="$destroyEle",T="$noCache",x="active",E="cached",C=this,k=!1,A=l.navViewAttr;C.scope=e,C.element=t,C.init=function(){var i=n.name||"",r=t.parent().inheritedData("$uiView"),o=r&&r.state?r.state.name:"";i.indexOf("@")<0&&(i=i+"@"+o);var s={name:i,state:null};t.data("$uiView",s);var c=a._registerInstance(C,n.delegateHandle);return e.$on("$destroy",function(){c(),C.isSwipeFreeze&&f.freezeAllScrolls(!1)}),e.$on("$ionicHistory.deselect",C.cacheCleanup),e.$on("$ionicTabs.top",p),e.$on("$ionicSubheader",v),e.$on("$ionicTabs.beforeLeave",d),e.$on("$ionicTabs.afterLeave",d),e.$on("$ionicTabs.leave",d),ionic.Platform.ready(function(){ionic.Platform.isWebView()&&u.views.swipeBackEnabled()&&C.initSwipeBack()}),s},C.register=function(t){var n=c({},s.currentView()),i=s.register(e,t);C.update(i);var r=s.getViewById(i.viewId)||{},o=y!==i.viewId;C.render(i,t,r,n,o,!0)},C.update=function(e){k=!0,g=e.direction;var n=t.parent().inheritedData("$ionNavViewController");n&&(n.isPrimary(!1),("enter"===g||"exit"===g)&&(n.direction(g),"enter"===g&&(g="none")))},C.render=function(e,t,n,i,r,o){var a=l.create(C,t,n,i,r,o);a.init(e,function(){a.transition(C.direction(),e.enableBack,!_),y=_=null})},C.beforeEnter=function(e){if(k){$=e.navBarDelegate;var t=m();t&&t.update(e),h("")}},C.activeEleId=function(e){return arguments.length&&(w=e),w},C.transitionEnd=function(){var e,n,i,r=t.children();for(e=0,n=r.length;n>e;e++)i=r.eq(e),i.data(b)===w?A(i,x):("leaving"===A(i)||A(i)===x||A(i)===E)&&(i.data(S)||i.data(T)?l.destroyViewEle(i):(A(i,E),ionic.Utils.disconnectScope(i.scope())));h(""),C.isSwipeFreeze&&f.freezeAllScrolls(!1)},C.cacheCleanup=function(){for(var e=t.children(),n=0,i=e.length;i>n;n++)e.eq(n).data(S)&&l.destroyViewEle(e.eq(n))},C.clearCache=function(e){var n,i,r,o,a,s,c=t.children();for(r=0,o=c.length;o>r;r++)if(n=c.eq(r),e)for(s=n.data(b),a=0;a<e.length;a++)s===e[a]&&A(n)!=x&&l.destroyViewEle(n);else A(n)==E?l.destroyViewEle(n):A(n)==x&&(i=n.scope(),i&&i.$broadcast("$ionicView.clearCache"))},C.getViewElements=function(){return t.children()},C.appendViewElement=function(n,o){var a=i(n);t.append(n);var s=e.$new();if(o&&o.$$controller){o.$scope=s,n.data("$scope",s);var c=r(o.$$controller,o);t.children().data("$ngControllerController",c)}return a(s),s},C.title=function(e){var t=m();t&&t.title(e)},C.enableBackButton=function(e){var t=m();t&&t.enableBackButton(e)},C.showBackButton=function(e){var t=m();return t?arguments.length?t.showActiveBackButton(e):t.showActiveBackButton():!0},C.showBar=function(e){var t=m();return t?arguments.length?t.showBar(e):t.showBar():!0},C.isPrimary=function(e){return arguments.length&&(k=e),k},C.direction=function(e){return arguments.length&&(g=e),g},C.initSwipeBack=function(){function n(e){if(k&&(b=o(e),!(b>T))){p=s.backView();var n=s.currentView();if(p&&p.historyId===n.historyId&&n.canSwipeBack!==!1){w||(w=window.innerWidth),C.isSwipeFreeze=f.freezeAllScrolls(!0);var a={direction:"back"};S=[],x={showBar:C.showBar(),showBackButton:C.showBackButton()};var u=l.create(C,a,p,n,!0,!1);if(!u.loadViewElements(a))return w=c=S=null,void(C.isSwipeFreeze=f.freezeAllScrolls(!1));u.render(a),c=u.transition("back",s.enabledBack(p),!0),d=m(),g=ionic.onGesture("drag",i,t[0]),$=ionic.onGesture("release",r,t[0])}}}function i(e){if(k&&c){var t=o(e);if(S.push({t:Date.now(),x:t}),t>=w-15)r(e);else{var n=Math.min(Math.max(a(t),0),1);c.run(n),d&&d.activeTransition&&d.activeTransition.run(n)}}}function r(e){if(k&&c&&S&&S.length>1){for(var t=Date.now(),n=o(e),s=S[S.length-1],l=S.length-2;l>=0&&!(t-s.t>200);l--)s=S[l];var u=n>=S[S.length-2].x,v=a(n),m=Math.abs(s.x-n)/(t-s.t);if(y=p.viewId,_=.03>v||v>.97,u&&(v>.5||m>.1)){var b=m>.5||.05>m||n>w-45?"fast":"slow";h(_?"":b),p.go(),d&&d.activeTransition&&d.activeTransition.complete(!_,b)}else h(_?"":"fast"),y=null,c.cancel(!_),d&&d.activeTransition&&d.activeTransition.cancel(!_,"fast",x),_=null}ionic.offGesture(g,"drag",i),ionic.offGesture($,"release",r),w=c=S=null,C.isSwipeFreeze=f.freezeAllScrolls(!1)}function o(e){return ionic.tap.pointerCoord(e.gesture.srcEvent).x}function a(e){return(e-b)/w}var c,d,p,v,g,$,w,b,S,T=u.views.swipeBackHitWidth(),x={};v=ionic.onGesture("dragstart",n,t[0]),e.$on("$destroy",function(){ionic.offGesture(v,"dragstart",n),ionic.offGesture(g,"drag",i),ionic.offGesture($,"release",r),C.element=c=d=null})}}]),s.controller("$ionicRefresher",["$scope","$attrs","$element","$ionicBind","$timeout",function(e,t,n,i,r){function o(){(M||S)&&(D=null,S?(S=!1,x=0,E>C?(m(),d(C,A)):(d(0,A,v),T=!1)):(x=0,T=!1,f(!1)))}function a(e){if(M&&!(e.touches.length>1)){if(null===D&&(D=parseInt(e.touches[0].screenY,10)),ionic.Platform.isAndroid()&&4.4===ionic.Platform.version()&&0===y.scrollTop&&(S=!0,e.preventDefault()),I=parseInt(e.touches[0].screenY,10)-D,0>=I-x||0!==y.scrollTop)return T&&(T=!1,f(!1)),S&&l(y,-1*parseInt(I-x,10)),void(0!==E&&c(0));I>0&&0===y.scrollTop&&!T&&(x=I),e.preventDefault(),T||(T=!0,f(!0)),S=!0,c(parseInt((I-x)/3,10)),!k&&E>C?(k=!0,ionic.requestAnimationFrame(p)):k&&C>E&&(k=!1,ionic.requestAnimationFrame(v))}}function s(e){M=0===e.target.scrollTop||S}function c(e){_.style[ionic.CSS.TRANSFORM]="translateY("+e+"px)",E=e}function l(e,t){e.scrollTop=t;var n=document.createEvent("UIEvents");n.initUIEvent("scroll",!0,!0,window,1),e.dispatchEvent(n)}function f(e){ionic.requestAnimationFrame(e?function(){_.classList.add("overscroll"),g()}:function(){_.classList.remove("overscroll"),$(),v()})}function d(e,t,n){function i(e){return--e*e*e+1}function r(){var s=Date.now(),l=Math.min(1,(s-o)/t),u=i(l);c(parseInt(u*(e-a)+a,10)),1>l?ionic.requestAnimationFrame(r):(5>e&&e>-5&&(T=!1,f(!1)),n&&n())}var o=Date.now(),a=E;return a===e?void n():void ionic.requestAnimationFrame(r)}function h(){ionic.off("touchmove",a,_),ionic.off("touchend",o,_),ionic.off("scroll",s,y),y=null,_=null}function p(){n[0].classList.add("active"),e.$onPulling()}function v(){r(function(){n.removeClass("active refreshing refreshing-tail"),k&&(k=!1)},150),e.$endPulling()}function m(){n[0].classList.add("refreshing"),e.$onRefresh()}function g(){n[0].classList.remove("invisible")}function $(){n[0].classList.add("invisible")}function w(){n[0].classList.add("refreshing-tail")}var y,_,b=this,S=!1,T=!1,x=0,E=0,C=60,k=!1,A=500,D=null,I=null,M=!0;u(t.pullingIcon)||t.$set("pullingIcon","ion-android-arrow-down"),e.showSpinner=!u(t.refreshingIcon)&&"none"!=t.spinner,e.showIcon=u(t.refreshingIcon),i(e,t,{pullingIcon:"@",pullingText:"=",refreshingIcon:"@",refreshingText:"=",spinner:"@",disablePullingRotation:"@",$onRefresh:"&onRefresh",$onPulling:"&onPulling",$endPulling:"&endPulling"}),e.$on("scroll.refreshComplete",function(){r(function(){ionic.requestAnimationFrame(w),d(0,A,v),r(function(){T&&(T=!1,f(!1))},A)},A)}),b.init=function(){if(y=n.parent().parent()[0],_=n.parent()[0],!(y&&y.classList.contains("ionic-scroll")&&_&&_.classList.contains("scroll")))throw new Error("Refresher must be immediate child of ion-content or ion-scroll");ionic.on("touchmove",a,_),ionic.on("touchend",o,_),ionic.on("scroll",s,y),e.$on("$destroy",h)},b.getRefresherDomMethods=function(){return{activate:p,deactivate:v,start:m,show:g,hide:$,tail:w}},b.__handleTouchmove=a,b.__getScrollChild=function(){return _},b.__getScrollParent=function(){return y}}]),s.controller("$ionicScroll",["$scope","scrollViewOptions","$timeout","$window","$location","$document","$ionicScrollDelegate","$ionicHistory",function(e,t,n,i,r,o,a,s){var c=this;c.__timeout=n,c._scrollViewOptions=t,c.isNative=function(){return!!t.nativeScrolling};var l,f=c.element=t.el,d=c.$element=h(f);l=c.scrollView=c.isNative()?new ionic.views.ScrollNative(t):new ionic.views.Scroll(t),(d.parent().length?d.parent():d).data("$$ionicScrollController",c);var p=a._registerInstance(c,t.delegateHandle,function(){return s.isActiveScope(e)});u(t.bouncing)||ionic.Platform.ready(function(){l.options&&(l.options.bouncing=!0,ionic.Platform.isAndroid()&&(l.options.bouncing=!1,l.options.deceleration=.95))});var v=angular.bind(l,l.resize);angular.element(i).on("resize",v);var m=function(t){var n=(t.originalEvent||t).detail||{};e.$onScroll&&e.$onScroll({event:t,scrollTop:n.scrollTop||0,scrollLeft:n.scrollLeft||0})};d.on("scroll",m),e.$on("$destroy",function(){p(),l&&l.__cleanup&&l.__cleanup(),angular.element(i).off("resize",v),d.off("scroll",m),l=c.scrollView=t=c._scrollViewOptions=t.el=c._scrollViewOptions.el=d=c.$element=f=null}),n(function(){l&&l.run&&l.run()}),c.getScrollView=function(){return l},c.getScrollPosition=function(){return l.getValues()},c.resize=function(){return n(v,0,!1).then(function(){d&&d.triggerHandler("scroll-resize")})},c.scrollTop=function(e){c.resize().then(function(){l&&l.scrollTo(0,0,!!e)})},c.scrollBottom=function(e){c.resize().then(function(){var t=l.getScrollMax();l.scrollTo(t.left,t.top,!!e)})},c.scrollTo=function(e,t,n){c.resize().then(function(){l&&l.scrollTo(e,t,!!n)})},c.zoomTo=function(e,t,n,i){c.resize().then(function(){l.zoomTo(e,!!t,n,i)})},c.zoomBy=function(e,t,n,i){c.resize().then(function(){l.zoomBy(e,!!t,n,i)})},c.scrollBy=function(e,t,n){c.resize().then(function(){l.scrollBy(e,t,!!n)})},c.anchorScroll=function(e){c.resize().then(function(){var t=r.hash(),n=t&&o[0].getElementById(t);if(!t||!n)return void l.scrollTo(0,0,!!e);var i=n,a=0,s=0;do null!==i&&(a+=i.offsetLeft),null!==i&&(s+=i.offsetTop),i=i.offsetParent;while(i.attributes!=c.element.attributes&&i.offsetParent);l.scrollTo(a,s,!!e)})},c.freezeScroll=l.freeze,c.freezeAllScrolls=function(e){for(var t=0;t<a._instances.length;t++)a._instances[t].freezeScroll(e)},c._setRefresher=function(e,t,n){c.refresher=t;var i=c.refresher.clientHeight||60;l.activatePullToRefresh(i,n)}}]),s.controller("$ionicSideMenus",["$scope","$attrs","$ionicSideMenuDelegate","$ionicPlatform","$ionicBody","$ionicHistory","$ionicScrollDelegate","IONIC_BACK_PRIORITY","$rootScope",function(e,t,n,i,r,o,a,s,c){function l(e){e&&!w.isScrollFreeze?a.freezeAllScrolls(e):!e&&w.isScrollFreeze&&a.freezeAllScrolls(!1),w.isScrollFreeze=e}var u,d,h,v,m,g,$,w=this,y=!0;w.$scope=e,w.initialize=function(e){w.left=e.left,w.right=e.right,w.setContent(e.content),w.dragThresholdX=e.dragThresholdX||10,o.registerHistory(w.$scope)},w.setContent=function(e){e&&(w.content=e,w.content.onDrag=function(e){w._handleDrag(e)},w.content.endDrag=function(e){w._endDrag(e)})},w.isOpenLeft=function(){return w.getOpenAmount()>0},w.isOpenRight=function(){return w.getOpenAmount()<0},w.toggleLeft=function(e){if(!$&&w.left.isEnabled){var t=w.getOpenAmount();0===arguments.length&&(e=0>=t),w.content.enableAnimation(),e?(w.openPercentage(100),c.$emit("$ionicSideMenuOpen","left")):(w.openPercentage(0),c.$emit("$ionicSideMenuClose","left"))}},w.toggleRight=function(e){if(!$&&w.right.isEnabled){var t=w.getOpenAmount();0===arguments.length&&(e=t>=0),w.content.enableAnimation(),e?(w.openPercentage(-100),c.$emit("$ionicSideMenuOpen","right")):(w.openPercentage(0),c.$emit("$ionicSideMenuClose","right"))}},w.toggle=function(e){"right"==e?w.toggleRight():w.toggleLeft()},w.close=function(){w.openPercentage(0),c.$emit("$ionicSideMenuClose","left"),c.$emit("$ionicSideMenuClose","right")},w.getOpenAmount=function(){return w.content&&w.content.getTranslateX()||0},w.getOpenRatio=function(){var e=w.getOpenAmount();return e>=0?e/w.left.width:e/w.right.width},w.isOpen=function(){return 0!==w.getOpenAmount()},w.getOpenPercentage=function(){return 100*w.getOpenRatio()},w.openPercentage=function(e){var t=e/100;w.left&&e>=0?w.openAmount(w.left.width*t):w.right&&0>e&&w.openAmount(w.right.width*t),r.enableClass(0!==e,"menu-open"),l(!1)},w.openAmount=function(e){var t=w.left&&w.left.width||0,n=w.right&&w.right.width||0;return(w.left&&w.left.isEnabled||!(e>0))&&(w.right&&w.right.isEnabled||!(0>e))?d&&e>t?void w.content.setTranslateX(t):u&&-n>e?void w.content.setTranslateX(-n):(w.content.setTranslateX(e),void(e>=0?(d=!0,u=!1,e>0&&(w.right&&w.right.pushDown&&w.right.pushDown(),w.left&&w.left.bringUp&&w.left.bringUp())):(u=!0,d=!1,w.right&&w.right.bringUp&&w.right.bringUp(),w.left&&w.left.pushDown&&w.left.pushDown()))):void w.content.setTranslateX(0)},w.snapToRest=function(e){w.content.enableAnimation(),h=!1;var t=w.getOpenRatio();if(0===t)return void w.openPercentage(0);var n=.3,i=e.gesture.velocityX,r=e.gesture.direction;w.openPercentage(t>0&&.5>t&&"right"==r&&n>i?0:t>.5&&"left"==r&&n>i?100:0>t&&t>-.5&&"left"==r&&n>i?0:.5>t&&"right"==r&&n>i?-100:"right"==r&&t>=0&&(t>=.5||i>n)?100:"left"==r&&0>=t&&(-.5>=t||i>n)?-100:0)},w.enableMenuWithBackViews=function(e){return arguments.length&&(y=!!e),y},w.isAsideExposed=function(){return!!$},w.exposeAside=function(e){(w.left&&w.left.isEnabled||w.right&&w.right.isEnabled)&&(w.close(),$=e,w.left&&w.left.isEnabled?w.content.setMarginLeft($?w.left.width:0):w.right&&w.right.isEnabled&&w.content.setMarginRight($?w.right.width:0),w.$scope.$emit("$ionicExposeAside",$))},w.activeAsideResizing=function(e){r.enableClass(e,"aside-resizing")
},w._endDrag=function(e){l(!1),$||(h&&w.snapToRest(e),v=null,m=null,g=null)},w._handleDrag=function(t){!$&&e.dragContent&&(v?m=t.gesture.touches[0].pageX:(v=t.gesture.touches[0].pageX,m=v),!h&&Math.abs(m-v)>w.dragThresholdX&&(v=m,h=!0,w.content.disableAnimation(),g=w.getOpenAmount()),h&&(w.openAmount(g+(m-v)),l(!0)))},w.canDragContent=function(t){return arguments.length&&(e.dragContent=!!t),e.dragContent},w.edgeThreshold=25,w.edgeThresholdEnabled=!1,w.edgeDragThreshold=function(e){return arguments.length&&(f(e)&&e>0?(w.edgeThreshold=e,w.edgeThresholdEnabled=!0):w.edgeThresholdEnabled=!!e),w.edgeThresholdEnabled},w.isDraggableTarget=function(t){var n=w.edgeThresholdEnabled&&!w.isOpen(),i=t.gesture.startEvent&&t.gesture.startEvent.center&&t.gesture.startEvent.center.pageX,r=!n||i<=w.edgeThreshold||i>=w.content.element.offsetWidth-w.edgeThreshold,a=o.backView(),s=y?!0:!a;if(!s){var c=o.currentView()||{};return a.historyId!==c.historyId}return(e.dragContent||w.isOpen())&&r&&!t.gesture.srcEvent.defaultPrevented&&s&&!t.target.tagName.match(/input|textarea|select|object|embed/i)&&!t.target.isContentEditable&&!(t.target.dataset?t.target.dataset.preventScroll:"true"==t.target.getAttribute("data-prevent-scroll"))},e.sideMenuContentTranslateX=0;var _=p,b=angular.bind(w,w.close);e.$watch(function(){return 0!==w.getOpenAmount()},function(e){_(),e&&(_=i.registerBackButtonAction(b,s.sideMenu))});var S=n._registerInstance(w,t.delegateHandle,function(){return o.isActiveScope(e)});e.$on("$destroy",function(){S(),_(),w.$scope=null,w.content&&(w.content.element=null,w.content=null),l(!1)}),w.initialize({left:{width:275},right:{width:275}})}]),function(e){function t(e,i,r,o){var a,s,c,l=document.createElement(d[e]||e);for(a in i)if(angular.isArray(i[a]))for(s=0;s<i[a].length;s++)if(i[a][s].fn)for(c=0;c<i[a][s].t;c++)t(a,i[a][s].fn(c,o),l,o);else t(a,i[a][s],l,o);else n(l,a,i[a]);r.appendChild(l)}function n(e,t,n){e.setAttribute(d[t]||t,n)}function i(e,t){var n=e.split(";"),i=n.slice(t),r=n.slice(0,n.length-i.length);return n=i.concat(r).reverse(),n.join(";")+";"+n[0]}function r(e,t){return e/=t/2,1>e?.5*e*e*e:(e-=2,.5*(e*e*e+2))}var o="translate(32,32)",a="stroke-opacity",c="round",l="indefinite",u="750ms",f="none",d={a:"animate",an:"attributeName",at:"animateTransform",c:"circle",da:"stroke-dasharray",os:"stroke-dashoffset",f:"fill",lc:"stroke-linecap",rc:"repeatCount",sw:"stroke-width",t:"transform",v:"values"},h={v:"0,32,32;360,32,32",an:"transform",type:"rotate",rc:l,dur:u},p={sw:4,lc:c,line:[{fn:function(e,t){return{y1:"ios"==t?17:12,y2:"ios"==t?29:20,t:o+" rotate("+(30*e+(6>e?180:-180))+")",a:[{fn:function(){return{an:a,dur:u,v:i("0;.1;.15;.25;.35;.45;.55;.65;.7;.85;1",e),rc:l}},t:1}]}},t:12}]},v={android:{c:[{sw:6,da:128,os:82,r:26,cx:32,cy:32,f:f}]},ios:p,"ios-small":p,bubbles:{sw:0,c:[{fn:function(e){return{cx:24*Math.cos(2*Math.PI*e/8),cy:24*Math.sin(2*Math.PI*e/8),t:o,a:[{fn:function(){return{an:"r",dur:u,v:i("1;2;3;4;5;6;7;8",e),rc:l}},t:1}]}},t:8}]},circles:{c:[{fn:function(e){return{r:5,cx:24*Math.cos(2*Math.PI*e/8),cy:24*Math.sin(2*Math.PI*e/8),t:o,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:u,v:i(".3;.3;.3;.4;.7;.85;.9;1",e),rc:l}},t:1}]}},t:8}]},crescent:{c:[{sw:4,da:128,os:82,r:26,cx:32,cy:32,f:f,at:[h]}]},dots:{c:[{fn:function(e){return{cx:16+16*e,cy:32,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:u,v:i(".5;.6;.8;1;.8;.6;.5",e),rc:l}},t:1},{fn:function(){return{an:"r",dur:u,v:i("4;5;6;5;4;3;3",e),rc:l}},t:1}]}},t:3}]},lines:{sw:7,lc:c,line:[{fn:function(e){return{x1:10+14*e,x2:10+14*e,a:[{fn:function(){return{an:"y1",dur:u,v:i("16;18;28;18;16",e),rc:l}},t:1},{fn:function(){return{an:"y2",dur:u,v:i("48;44;36;46;48",e),rc:l}},t:1},{fn:function(){return{an:a,dur:u,v:i("1;.8;.5;.4;1",e),rc:l}},t:1}]}},t:4}]},ripple:{f:f,"fill-rule":"evenodd",sw:3,circle:[{fn:function(e){return{cx:32,cy:32,a:[{fn:function(){return{an:"r",begin:-1*e+"s",dur:"2s",v:"0;24",keyTimes:"0;1",keySplines:"0.1,0.2,0.3,1",calcMode:"spline",rc:l}},t:1},{fn:function(){return{an:a,begin:-1*e+"s",dur:"2s",v:".2;1;.2;0",rc:l}},t:1}]}},t:2}]},spiral:{defs:[{linearGradient:[{id:"sGD",gradientUnits:"userSpaceOnUse",x1:55,y1:46,x2:2,y2:46,stop:[{offset:.1,"class":"stop1"},{offset:1,"class":"stop2"}]}]}],g:[{sw:4,lc:c,f:f,path:[{stroke:"url(#sGD)",d:"M4,32 c0,15,12,28,28,28c8,0,16-4,21-9"},{d:"M60,32 C60,16,47.464,4,32,4S4,16,4,32"}],at:[h]}]}},m={android:function(t){function i(){var t=r(Date.now()-o,650),u=1,f=0,d=188-58*t,h=182-182*t;a%2&&(u=-1,f=-64,d=128- -58*t,h=182*t);var p=[0,-101,-90,-11,-180,79,-270,-191][a];n(l,"da",Math.max(Math.min(d,188),128)),n(l,"os",Math.max(Math.min(h,182),0)),n(l,"t","scale("+u+",1) translate("+f+",0) rotate("+p+",32,32)"),s+=4.1,s>359&&(s=0),n(c,"t","rotate("+s+",32,32)"),t>=1&&(a++,a>7&&(a=0),o=Date.now()),e.requestAnimationFrame(i)}var o,a=0,s=0,c=t.querySelector("g"),l=t.querySelector("circle");return function(){o=Date.now(),i()}}};s.controller("$ionicSpinner",["$element","$attrs","$ionicConfig",function(e,n,i){var r;this.init=function(){r=n.icon||i.spinner.icon();var o=document.createElement("div");return t("svg",{viewBox:"0 0 64 64",g:[v[r]]},o,r),e.html(o.innerHTML),this.start(),r},this.start=function(){m[r]&&m[r](e[0])()}}])}(ionic),s.controller("$ionicTab",["$scope","$ionicHistory","$attrs","$location","$state",function(e,t,n,i,r){this.$scope=e,this.hrefMatchesState=function(){return n.href&&0===i.path().indexOf(n.href.replace(/^#/,"").replace(/\/$/,""))},this.srefMatchesState=function(){return n.uiSref&&r.includes(n.uiSref.split("(")[0])},this.navNameMatchesState=function(){return this.navViewName&&t.isCurrentStateNavView(this.navViewName)},this.tabMatchesState=function(){return this.hrefMatchesState()||this.srefMatchesState()||this.navNameMatchesState()}}]),s.controller("$ionicTabs",["$scope","$element","$ionicHistory",function(e,t,n){var i,r=this,o=null,a=null;r.tabs=[],r.selectedIndex=function(){return r.tabs.indexOf(o)},r.selectedTab=function(){return o},r.previousSelectedTab=function(){return a},r.add=function(e){n.registerHistory(e),r.tabs.push(e)},r.remove=function(e){var t=r.tabs.indexOf(e);if(-1!==t){if(e.$tabSelected)if(r.deselect(e),1===r.tabs.length);else{var n=t===r.tabs.length-1?t-1:t+1;r.select(r.tabs[n])}r.tabs.splice(t,1)}},r.deselect=function(e){e.$tabSelected&&(a=o,o=i=null,e.$tabSelected=!1,(e.onDeselect||p)(),e.$broadcast&&e.$broadcast("$ionicHistory.deselect"))},r.select=function(t,a){var s;if(f(t)){if(s=t,s>=r.tabs.length)return;t=r.tabs[s]}else s=r.tabs.indexOf(t);1===arguments.length&&(a=!(!t.navViewName&&!t.uiSref)),o&&o.$historyId==t.$historyId?a&&n.goToHistoryRoot(t.$historyId):i!==s&&(l(r.tabs,function(e){r.deselect(e)}),o=t,i=s,r.$scope&&r.$scope.$parent&&(r.$scope.$parent.$activeHistoryId=t.$historyId),t.$tabSelected=!0,(t.onSelect||p)(),a&&e.$emit("$ionicHistory.change",{type:"tab",tabIndex:s,historyId:t.$historyId,navViewName:t.navViewName,hasNavView:!!t.navViewName,title:t.title,url:t.href,uiSref:t.uiSref}))},r.hasActiveScope=function(){for(var e=0;e<r.tabs.length;e++)if(n.isActiveScope(r.tabs[e]))return!0;return!1}}]),s.controller("$ionicView",["$scope","$element","$attrs","$compile","$rootScope",function(e,t,n,i,r){function o(){var t=u(n.viewTitle)&&"viewTitle"||u(n.title)&&"title";t&&(a(n[t]),$.push(n.$observe(t,a))),u(n.hideBackButton)&&$.push(e.$watch(n.hideBackButton,function(e){d.showBackButton(!e)})),u(n.hideNavBar)&&$.push(e.$watch(n.hideNavBar,function(e){d.showBar(!e)}))}function a(e){u(e)&&e!==v&&(v=e,d.title(v))}function s(){for(var e=0;e<$.length;e++)$[e]();$=[]}function l(t){return t?i(t)(e.$new()):void 0}function f(t){return!!e.$eval(n[t])}var d,h,p,v,m=this,g={},$=[],w=e.$on("ionNavBar.init",function(e,t){e.stopPropagation(),h=t});m.init=function(){w();var n=t.inheritedData("$ionModalController");d=t.inheritedData("$ionNavViewController"),d&&!n&&(e.$on("$ionicView.beforeEnter",m.beforeEnter),e.$on("$ionicView.afterEnter",o),e.$on("$ionicView.beforeLeave",s),e.$on("$ionic.reconnectScope",m.onHJViewActive),e.$on("$ionic.disconnectScopeFirst",m.onHJViewDisActive))},m.onHJViewActive=function(){"function"==typeof e.onHJViewActive&&e.onHJViewActive()},m.onHJViewDisActive=function(){"function"==typeof e.onHJViewDisActive&&e.onHJViewDisActive()},m.beforeEnter=function(t,i){if(i&&!i.viewNotified){i.viewNotified=!0,r.$$phase||e.$digest(),v=u(n.viewTitle)?n.viewTitle:n.title;var o={};for(var a in g)o[a]=l(g[a]);d.beforeEnter(c(i,{title:v,showBack:!f("hideBackButton"),navBarItems:o,navBarDelegate:h||null,showNavBar:!f("hideNavBar"),hasHeaderBar:!!p})),s()}},m.navElement=function(e,t){g[e]=t}}]),s.directive("ionActionSheet",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,link:function(t,n){var i=function(e){27==e.which&&(t.cancel(),t.$apply())},r=function(e){e.target==n[0]&&(t.cancel(),t.$apply())};t.$on("$destroy",function(){n.remove(),e.unbind("keyup",i)}),e.bind("keyup",i),n.bind("click",r)},template:'<div class="action-sheet-backdrop"><div class="action-sheet-wrapper"><div class="action-sheet" ng-class="{\'action-sheet-has-icons\': $actionSheetHasIcon}"><div class="action-sheet-group action-sheet-options"><div class="action-sheet-title" ng-if="titleText" ng-bind-html="titleText"></div><button class="button action-sheet-option" ng-click="buttonClicked($index)" ng-repeat="b in buttons" ng-bind-html="b.text"></button><button class="button destructive action-sheet-destructive" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind-html="destructiveText"></button></div><div class="action-sheet-group action-sheet-cancel" ng-if="cancelText"><button class="button" ng-click="cancel()" ng-bind-html="cancelText"></button></div></div></div></div>'}}]),s.directive("ionCheckbox",["$ionicConfig",function(e){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox"><i class="checkbox-icon"></i></div><div class="item-content disable-pointer-events" ng-transclude></div></label>',compile:function(t,n){var i=t.find("input");l({name:n.name,"ng-value":n.ngValue,"ng-model":n.ngModel,"ng-checked":n.ngChecked,"ng-disabled":n.ngDisabled,"ng-true-value":n.ngTrueValue,"ng-false-value":n.ngFalseValue,"ng-change":n.ngChange,"ng-required":n.ngRequired,required:n.required},function(e,t){u(e)&&i.attr(t,e)});var r=t[0].querySelector(".checkbox");r.classList.add("checkbox-"+e.form.checkbox())}}}]),s.directive("collectionRepeat",e).factory("$ionicCollectionManager",t);var y="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_=/height:.*?px;\s*width:.*?px/,b=3;e.$inject=["$ionicCollectionManager","$parse","$window","$$rAF","$rootScope","$timeout"],t.$inject=["$rootScope","$window","$$rAF"],s.directive("ionContent",["$timeout","$controller","$ionicBind","$ionicConfig",function(e,t,n,i){return{restrict:"E",require:"^?ionNavView",scope:!0,priority:800,compile:function(e,r){function o(e,i,o){function l(){e.$onScrollComplete({scrollTop:s.scrollView.__scrollTop,scrollLeft:s.scrollView.__scrollLeft})}var f=e.$parent;if(e.$watch(function(){return(f.$hasHeader?" has-header":"")+(f.$hasSubheader?" has-subheader":"")+(f.$hasFooter?" has-footer":"")+(f.$hasSubfooter?" has-subfooter":"")+(f.$hasTabs?" has-tabs":"")+(f.$hasTabsTop?" has-tabs-top":"")},function(e,t){i.removeClass(t),i.addClass(e)}),e.$hasHeader=e.$hasSubheader=e.$hasFooter=e.$hasSubfooter=e.$hasTabs=e.$hasTabsTop=!1,n(e,o,{$onScroll:"&onScroll",$onScrollComplete:"&onScrollComplete",hasBouncing:"@",padding:"@",direction:"@",scrollbarX:"@",scrollbarY:"@",startX:"@",startY:"@",scrollEventInterval:"@"}),e.direction=e.direction||"y",u(o.padding)&&e.$watch(o.padding,function(e){(a||i).toggleClass("padding",!!e)}),"false"===o.scroll);else{var d={};c?(i.addClass("overflow-scroll"),d={el:i[0],delegateHandle:r.delegateHandle,startX:e.$eval(e.startX)||0,startY:e.$eval(e.startY)||0,nativeScrolling:!0}):d={el:i[0],delegateHandle:r.delegateHandle,locking:"true"===(r.locking||"true"),bouncing:e.$eval(e.hasBouncing),startX:e.$eval(e.startX)||0,startY:e.$eval(e.startY)||0,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,scrollEventInterval:parseInt(e.scrollEventInterval,10)||10,scrollingComplete:l},s=t("$ionicScroll",{$scope:e,scrollViewOptions:d}),e.$on("$destroy",function(){d&&(d.scrollingComplete=p,delete d.el),a=null,i=null,r.$$element=null})}}var a,s;e.addClass("scroll-content ionic-scroll"),"false"!=r.scroll?(a=h('<div class="scroll"></div>'),a.append(e.contents()),e.append(a)):e.addClass("scroll-content-false");var c="true"===r.overflowScroll||!i.scrolling.jsScrolling();return c&&(c=!e[0].querySelector("[collection-repeat]")),{pre:o}}}}]),s.directive("exposeAsideWhen",["$window",function(e){return{restrict:"A",require:"^ionSideMenus",link:function(t,n,i,r){function o(){var t="large"==i.exposeAsideWhen?"(min-width:768px)":i.exposeAsideWhen;r.exposeAside(e.matchMedia(t).matches),r.activeAsideResizing(!1)}function a(){r.activeAsideResizing(!0),s()}var s=ionic.debounce(function(){t.$apply(o)},300,!1);t.$evalAsync(o),ionic.on("resize",a,e),t.$on("$destroy",function(){ionic.off("resize",a,e)})}}}]);var S="onHold onTap onDoubleTap onTouch onRelease onDragStart onDrag onDragEnd onDragUp onDragRight onDragDown onDragLeft onSwipe onSwipeUp onSwipeRight onSwipeDown onSwipeLeft".split(" ");S.forEach(function(e){s.directive(e,n(e))}),s.directive("ionHeaderBar",i()).directive("ionHeaderBar",r(!0)).directive("ionFooterBar",r(!1)),s.directive("ionInfiniteScroll",["$timeout",function(e){return{restrict:"E",require:["?^$ionicScroll","ionInfiniteScroll"],template:function(e,t){return t.icon?'<i class="icon {{icon()}} icon-refreshing {{scrollingType}}"></i>':'<ion-spinner icon="{{spinner()}}"></ion-spinner>'},scope:!0,controller:"$ionInfiniteScroll",link:function(t,n,i,r){var o=r[1],a=o.scrollCtrl=r[0],s=o.jsScrolling=!a.isNative();if(s)o.scrollView=a.scrollView,t.scrollingType="js-scrolling",a.$element.on("scroll",o.checkBounds);else{var c=ionic.DomUtil.getParentOrSelfWithClass(n[0].parentNode,"overflow-scroll");if(o.scrollEl=c,!c)throw"Infinite scroll must be used inside a scrollable div";o.scrollEl.addEventListener("scroll",o.checkBounds)}var l=u(i.immediateCheck)?t.$eval(i.immediateCheck):!0;l&&e(function(){o.checkBounds()})}}}]),s.directive("ionItem",["$$rAF",function(e){return{restrict:"E",controller:["$scope","$element",function(e,t){this.$scope=e,this.$element=t}],scope:!0,compile:function(t,n){var i=u(n.href)||u(n.ngHref)||u(n.uiSref),r=i||/ion-(delete|option|reorder)-button/i.test(t.html());if(r){var o=h(i?"<a></a>":"<div></div>");o.addClass("item-content"),(u(n.href)||u(n.ngHref))&&(o.attr("ng-href","{{$href()}}"),u(n.target)&&o.attr("target","{{$target()}}")),o.append(t.contents()),t.addClass("item item-complex").append(o)}else t.addClass("item");return function(t,n,i){t.$href=function(){return i.href||i.ngHref},t.$target=function(){return i.target};var r=n[0].querySelector(".item-content");r&&t.$on("$collectionRepeatLeave",function(){r&&r.$$ionicOptionsOpen&&(r.style[ionic.CSS.TRANSFORM]="",r.style[ionic.CSS.TRANSITION]="none",e(function(){r.style[ionic.CSS.TRANSITION]=""}),r.$$ionicOptionsOpen=!1)})}}}}]);var T='<div class="item-left-edit item-delete enable-pointer-events"></div>';s.directive("ionDeleteButton",function(){function e(e){e.stopPropagation()}return{restrict:"E",require:["^^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button icon button-icon",!0),function(t,n,i,r){function o(){s=s||n.controller("ionList"),s&&s.showDelete()&&c.addClass("visible active")}var a=r[0],s=r[1],c=h(T);c.append(n),a.$element.append(c).addClass("item-left-editable"),n.on("click",e),o(),t.$on("$ionic.reconnectScope",o)}}}}),s.directive("itemFloatingLabel",function(){return{restrict:"C",link:function(e,t){var n=t[0],i=n.querySelector("input, textarea"),r=n.querySelector(".input-label");if(i&&r){var o=function(){i.value?r.classList.add("has-input"):r.classList.remove("has-input")};i.addEventListener("input",o);var a=h(i).controller("ngModel");a&&(a.$render=function(){i.value=a.$viewValue||"",o()}),e.$on("$destroy",function(){i.removeEventListener("input",o)})}}}});var x='<div class="item-options invisible"></div>';s.directive("ionOptionButton",[function(){function e(e){e.stopPropagation()}return{restrict:"E",require:"^ionItem",priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button",!0),function(t,n,i,r){r.optionsContainer||(r.optionsContainer=h(x),r.$element.append(r.optionsContainer)),r.optionsContainer.append(n),r.$element.addClass("item-right-editable"),n.on("click",e)}}}}]);var E='<div data-prevent-scroll="true" class="item-right-edit item-reorder enable-pointer-events"></div>';s.directive("ionReorderButton",["$parse",function(e){return{restrict:"E",require:["^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button icon button-icon",!0),t[0].setAttribute("data-prevent-scroll",!0),function(t,n,i,r){var o=r[0],a=r[1],s=e(i.onReorder);t.$onReorder=function(e,n){s(t,{$fromIndex:e,$toIndex:n})},i.ngClick||i.onClick||i.onclick||(n[0].onclick=function(e){return e.stopPropagation(),!1});var c=h(E);c.append(n),o.$element.append(c).addClass("item-right-editable"),a&&a.showReorder()&&c.addClass("visible active")}}}}]),s.directive("keyboardAttach",function(){return function(e,t){function n(e){if(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen){var n=e.keyboardHeight||e.detail.keyboardHeight;t.css("bottom",n+"px"),r=t.controller("$ionicScroll"),r&&(r.scrollView.__container.style.bottom=n+o(t[0])+"px")}}function i(){(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen)&&(t.css("bottom",""),r&&(r.scrollView.__container.style.bottom=""))}ionic.on("native.keyboardshow",n,window),ionic.on("native.keyboardhide",i,window),ionic.on("native.showkeyboard",n,window),ionic.on("native.hidekeyboard",i,window);var r;e.$on("$destroy",function(){ionic.off("native.keyboardshow",n,window),ionic.off("native.keyboardhide",i,window),ionic.off("native.showkeyboard",n,window),ionic.off("native.hidekeyboard",i,window)})}}),s.directive("ionList",["$timeout",function(e){return{restrict:"E",require:["ionList","^?$ionicScroll"],controller:"$ionicList",compile:function(t,n){var i=h('<div class="list">').append(t.contents()).addClass(n.type);return t.append(i),function(t,i,r,o){function a(){function r(e,t){t()&&e.addClass("visible")||e.removeClass("active"),ionic.requestAnimationFrame(function(){t()&&e.addClass("active")||e.removeClass("visible")})}var o=s.listView=new ionic.views.ListView({el:i[0],listEl:i.children()[0],scrollEl:c&&c.element,scrollView:c&&c.scrollView,onReorder:function(t,n,i){var r=h(t).scope();r&&r.$onReorder&&e(function(){r.$onReorder(n,i)})},canSwipe:function(){return s.canSwipeItems()}});t.$on("$destroy",function(){o&&(o.deregister&&o.deregister(),o=null)}),u(n.canSwipe)&&t.$watch("!!("+n.canSwipe+")",function(e){s.canSwipeItems(e)}),u(n.showDelete)&&t.$watch("!!("+n.showDelete+")",function(e){s.showDelete(e)}),u(n.showReorder)&&t.$watch("!!("+n.showReorder+")",function(e){s.showReorder(e)}),t.$watch(function(){return s.showDelete()},function(e,t){if(e||t){e&&s.closeOptionButtons(),s.canSwipeItems(!e),i.children().toggleClass("list-left-editing",e),i.toggleClass("disable-pointer-events",e);var n=h(i[0].getElementsByClassName("item-delete"));r(n,s.showDelete)}}),t.$watch(function(){return s.showReorder()},function(e,t){if(e||t){e&&s.closeOptionButtons(),s.canSwipeItems(!e),i.children().toggleClass("list-right-editing",e),i.toggleClass("disable-pointer-events",e);var n=h(i[0].getElementsByClassName("item-reorder"));r(n,s.showReorder)}})}var s=o[0],c=o[1];e(a)}}}}]),s.directive("menuClose",["$ionicHistory",function(e){return{restrict:"AC",link:function(t,n){n.bind("click",function(){var t=n.inheritedData("$ionSideMenusController");t&&(e.nextViewOptions({historyRoot:!0,disableAnimate:!0,expire:300}),t.close())})}}}]),s.directive("menuToggle",function(){return{restrict:"AC",link:function(e,t,n){e.$on("$ionicView.beforeEnter",function(e,n){if(n.enableBack){var i=t.inheritedData("$ionSideMenusController");i.enableMenuWithBackViews()||t.addClass("hide")}else t.removeClass("hide")}),t.bind("click",function(){var e=t.inheritedData("$ionSideMenusController");e&&e.toggle(n.menuToggle)})}}}),s.directive("ionModal",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="modal-backdrop"><div class="modal-backdrop-bg"></div><div class="modal-wrapper" ng-transclude></div></div>'}}]),s.directive("ionModalView",function(){return{restrict:"E",compile:function(e){e.addClass("modal")}}}),s.directive("ionNavBackButton",["$ionicConfig","$document",function(e,t){return{restrict:"E",require:"^ionNavBar",compile:function(n,i){function r(e){return/ion-|icon/.test(e.className)}var o=t[0].createElement("button");for(var a in i.$attr)o.setAttribute(i.$attr[a],i[a]);i.ngClick||o.setAttribute("ng-click","$ionicGoBack()"),o.className="button back-button hide buttons "+(n.attr("class")||""),o.innerHTML=n.html()||"";for(var s,c,l,u,f=r(n[0]),d=0;d<n[0].childNodes.length;d++)s=n[0].childNodes[d],1===s.nodeType?r(s)?f=!0:s.classList.contains("default-title")?l=!0:s.classList.contains("previous-title")&&(u=!0):c||3!==s.nodeType||(c=!!s.nodeValue.trim());var h=e.backButton.icon();if(!f&&h&&"none"!==h&&(o.innerHTML='<i class="icon '+h+'"></i> '+o.innerHTML,o.className+=" button-clear"),!c){var p=t[0].createElement("span");p.className="back-text",!l&&e.backButton.text()&&(p.innerHTML+='<span class="default-title">'+e.backButton.text()+"</span>"),!u&&e.backButton.previousTitleText()&&(p.innerHTML+='<span class="previous-title"></span>'),o.appendChild(p)}return n.attr("class","hide"),n.empty(),{pre:function(e,t,n,i){i.navElement("backButton",o.outerHTML),o=null}}}}}]),s.directive("ionNavBar",function(){return{restrict:"E",controller:"$ionicNavBar",scope:!0,link:function(e,t,n,i){i.init()}}}),s.directive("ionNavButtons",["$document",function(e){return{require:"^ionNavBar",restrict:"E",compile:function(t,n){var i="left";/^primary|secondary|right$/i.test(n.side||"")&&(i=n.side.toLowerCase());var r=e[0].createElement("span");r.className=i+"-buttons",r.innerHTML=t.html();var o=i+"Buttons";return t.attr("class","hide"),t.empty(),{pre:function(e,t,n,i){var a=t.parent().data("$ionViewController");a?a.navElement(o,r.outerHTML):i.navElement(o,r.outerHTML),r=null}}}}}]),s.directive("navDirection",["$ionicViewSwitcher",function(e){return{restrict:"A",priority:1e3,link:function(t,n,i){n.bind("click",function(){e.nextDirection(i.navDirection)})}}}]),s.directive("ionNavTitle",["$document",function(e){return{require:"^ionNavBar",restrict:"E",compile:function(t,n){var i="title",r=e[0].createElement("span");for(var o in n.$attr)r.setAttribute(n.$attr[o],n[o]);return r.classList.add("nav-bar-title"),r.innerHTML=t.html(),t.attr("class","hide"),t.empty(),{pre:function(e,t,n,o){var a=t.parent().data("$ionViewController");a?a.navElement(i,r.outerHTML):o.navElement(i,r.outerHTML),r=null}}}}}]),s.directive("navTransition",["$ionicViewSwitcher",function(e){return{restrict:"A",priority:1e3,link:function(t,n,i){n.bind("click",function(){e.nextTransition(i.navTransition)})}}}]),s.directive("ionNavView",["$state","$ionicConfig",function(e,t){return{restrict:"E",terminal:!0,priority:2e3,transclude:!0,controller:"$ionicNavView",compile:function(n,i,r){return n.addClass("view-container"),ionic.DomUtil.cachedAttr(n,"nav-view-transition",t.views.transition()),function(t,n,i,o){function a(t){var n=e.$current&&e.$current.locals[c.name];n&&(t||n!==s)&&(s=n,c.state=n.$$state,o.register(n))}var s;r(t,function(e){n.append(e)});var c=o.init();t.$on("$stateChangeSuccess",function(){a(!1)}),t.$on("$viewContentLoading",function(){a(!1)}),a(!0)}}}}]),s.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]).factory("$ionicNgClick",["$parse",function(e){return function(t,n,i){var r=angular.isFunction(i)?i:e(i);n.on("click",function(e){t.$apply(function(){r(t,{$event:e})})}),n.onclick=p}}]).directive("ngClick",["$ionicNgClick",function(e){return function(t,n,i){e(t,n,i.ngClick)}}]).directive("ionStopEvent",function(){return{restrict:"A",link:function(e,t,n){t.bind(n.ionStopEvent,a)}}}),s.directive("ionPane",function(){return{restrict:"E",link:function(e,t){t.addClass("pane")}}}),s.directive("ionPopover",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="popover-backdrop"><div class="popover-wrapper" ng-transclude></div></div>'}}]),s.directive("ionPopoverView",function(){return{restrict:"E",compile:function(e){e.append(h('<div class="popover-arrow">')),e.addClass("popover")}}}),s.directive("ionRadio",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-radio"><input type="radio" name="radio-group"><div class="item-content disable-pointer-events" ng-transclude></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></label>',compile:function(e,t){t.icon&&e.children().eq(2).removeClass("ion-checkmark").addClass(t.icon);var n=e.find("input");return l({name:t.name,value:t.value,disabled:t.disabled,"ng-value":t.ngValue,"ng-model":t.ngModel,"ng-disabled":t.ngDisabled,"ng-change":t.ngChange,"ng-required":t.ngRequired,required:t.required},function(e,t){u(e)&&n.attr(t,e)}),function(e,t,n){e.getValue=function(){return e.ngValue||n.value}}}}}),s.directive("ionRefresher",[function(){return{restrict:"E",replace:!0,require:["?^$ionicScroll","ionRefresher"],controller:"$ionicRefresher",template:'<div class="scroll-refresher invisible" collection-repeat-ignore><div class="ionic-refresher-content" ng-class="{\'ionic-refresher-with-text\': pullingText || refreshingText}"><div class="icon-pulling" ng-class="{\'pulling-rotation-disabled\':disablePullingRotation}"><i class="icon {{pullingIcon}}"></i></div><div class="text-pulling" ng-bind-html="pullingText"></div><div class="icon-refreshing"><ion-spinner ng-if="showSpinner" icon="{{spinner}}"></ion-spinner><i ng-if="showIcon" class="icon {{refreshingIcon}}"></i></div><div class="text-refreshing" ng-bind-html="refreshingText"></div></div></div>',link:function(e,t,n,i){var r=i[0],o=i[1];!r||r.isNative()?o.init():(t[0].classList.add("js-scrolling"),r._setRefresher(e,t[0],o.getRefresherDomMethods()),e.$on("scroll.refreshComplete",function(){e.$evalAsync(function(){r.scrollView.finishPullToRefresh()})}))}}}]),s.directive("ionScroll",["$timeout","$controller","$ionicBind",function(e,t,n){return{restrict:"E",scope:!0,controller:function(){},compile:function(e){function i(e,i,o){n(e,o,{direction:"@",paging:"@",$onScroll:"&onScroll",scroll:"@",scrollbarX:"@",scrollbarY:"@",zooming:"@",minZoom:"@",maxZoom:"@"}),e.direction=e.direction||"y",u(o.padding)&&e.$watch(o.padding,function(e){r.toggleClass("padding",!!e)}),e.$eval(e.paging)===!0&&r.addClass("scroll-paging"),e.direction||(e.direction="y");var a=e.$eval(e.paging)===!0,s={el:i[0],delegateHandle:o.delegateHandle,locking:"true"===(o.locking||"true"),bouncing:e.$eval(o.hasBouncing),paging:a,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,zooming:e.$eval(e.zooming)===!0,maxZoom:e.$eval(e.maxZoom)||3,minZoom:e.$eval(e.minZoom)||.5,preventDefault:!0};a&&(s.speedMultiplier=.8,s.bouncing=!1),t("$ionicScroll",{$scope:e,scrollViewOptions:s})}e.addClass("scroll-view ionic-scroll");var r=h('<div class="scroll"></div>');return r.append(e.contents()),e.append(r),{pre:i}}}}]),s.directive("ionSideMenu",function(){return{restrict:"E",require:"^ionSideMenus",scope:!0,compile:function(e,t){return angular.isUndefined(t.isEnabled)&&t.$set("isEnabled","true"),angular.isUndefined(t.width)&&t.$set("width","275"),e.addClass("menu menu-"+t.side),function(e,n,i,r){e.side=i.side||"left";var o=r[e.side]=new ionic.views.SideMenu({width:t.width,el:n[0],isEnabled:!0});e.$watch(i.width,function(e){var t=+e;t&&t==e&&o.setWidth(+e)}),e.$watch(i.isEnabled,function(e){o.setIsEnabled(!!e)})}}}}),s.directive("ionSideMenuContent",["$timeout","$ionicGesture","$window",function(e,t,n){return{restrict:"EA",require:"^ionSideMenus",scope:!0,compile:function(i,r){function o(o,a,s,c){function l(e){0!==c.getOpenAmount()?(c.close(),e.gesture.srcEvent.preventDefault(),v=null,m=null):v||(v=ionic.tap.pointerCoord(e.gesture.srcEvent))}function f(e){c.isDraggableTarget(e)&&"x"==p(e)&&(c._handleDrag(e),e.gesture.srcEvent.preventDefault())}function d(e){"x"==p(e)&&e.gesture.srcEvent.preventDefault()}function h(e){c._endDrag(e),v=null,m=null}function p(e){if(m)return m;if(e&&e.gesture){if(v){var t=ionic.tap.pointerCoord(e.gesture.srcEvent),n=Math.abs(t.x-v.x),i=Math.abs(t.y-v.y),r=i>n?"y":"x";return Math.max(n,i)>30&&(m=r),r}v=ionic.tap.pointerCoord(e.gesture.srcEvent)}return"y"}var v=null,m=null;u(r.dragContent)?o.$watch(r.dragContent,function(e){c.canDragContent(e)}):c.canDragContent(!0),u(r.edgeDragThreshold)&&o.$watch(r.edgeDragThreshold,function(e){c.edgeDragThreshold(e)});var g={element:i[0],onDrag:function(){},endDrag:function(){},getTranslateX:function(){return o.sideMenuContentTranslateX||0},setTranslateX:ionic.animationFrameThrottle(function(t){var n=g.offsetX+t;a[0].style[ionic.CSS.TRANSFORM]="translate3d("+n+"px,0,0)",e(function(){o.sideMenuContentTranslateX=t})}),setMarginLeft:ionic.animationFrameThrottle(function(e){e?(e=parseInt(e,10),a[0].style[ionic.CSS.TRANSFORM]="translate3d("+e+"px,0,0)",a[0].style.width=n.innerWidth-e+"px",g.offsetX=e):(a[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)",a[0].style.width="",g.offsetX=0)}),setMarginRight:ionic.animationFrameThrottle(function(e){e?(e=parseInt(e,10),a[0].style.width=n.innerWidth-e+"px",g.offsetX=e):(a[0].style.width="",g.offsetX=0),a[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)"}),enableAnimation:function(){o.animationEnabled=!0,a[0].classList.add("menu-animated")},disableAnimation:function(){o.animationEnabled=!1,a[0].classList.remove("menu-animated")},offsetX:0};c.setContent(g);var $={stop_browser_behavior:!1};ionic.DomUtil.getParentOrSelfWithClass(a[0],"overflow-scroll")&&($.prevent_default_directions=["left","right"]);var w=t.on("tap",l,a,$),y=t.on("dragright",f,a,$),_=t.on("dragleft",f,a,$),b=t.on("dragup",d,a,$),S=t.on("dragdown",d,a,$),T=t.on("release",h,a,$);o.$on("$destroy",function(){g&&(g.element=null,g=null),t.off(_,"dragleft",f),t.off(y,"dragright",f),t.off(b,"dragup",d),t.off(S,"dragdown",d),t.off(T,"release",h),t.off(w,"tap",l)})}return i.addClass("menu-content pane"),{pre:o}}}}]),s.directive("ionSideMenus",["$ionicBody",function(e){return{restrict:"ECA",controller:"$ionicSideMenus",compile:function(t,n){function i(t,n,i,r){r.enableMenuWithBackViews(t.$eval(i.enableMenuWithBackViews)),t.$on("$ionicExposeAside",function(n,i){t.$exposeAside||(t.$exposeAside={}),t.$exposeAside.active=i,e.enableClass(i,"aside-open")}),t.$on("$ionicView.beforeEnter",function(e,n){n.historyId&&(t.$activeHistoryId=n.historyId)}),t.$on("$destroy",function(){e.removeClass("menu-open","aside-open")})}return n.$set("class",(n["class"]||"")+" view"),{pre:i}}}}]),s.directive("ionSlideBox",["$timeout","$compile","$ionicSlideBoxDelegate","$ionicHistory","$ionicScrollDelegate",function(e,t,n,i,r){return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",activeSlide:"=?"},controller:["$scope","$element","$attrs",function(t,o,a){function s(e){e&&!c.isScrollFreeze?r.freezeAllScrolls(e):!e&&c.isScrollFreeze&&r.freezeAllScrolls(!1),c.isScrollFreeze=e}var c=this,l=t.$eval(t.doesContinue)===!0,f=u(a.autoPlay)?!!t.autoPlay:!1,d=f?t.$eval(t.slideInterval)||4e3:0,h=new ionic.views.Slider({el:o[0],auto:d,continuous:l,startSlide:t.activeSlide,slidesChanged:function(){t.currentSlide=h.currentIndex(),e(function(){})
},callback:function(n){t.currentSlide=n,t.onSlideChanged({index:t.currentSlide,$index:t.currentSlide}),t.$parent.$broadcast("slideBox.slideChanged",n),t.activeSlide=n,e(function(){})},onDrag:function(){s(!0)},onDragEnd:function(){s(!1)}});h.enableSlide(t.$eval(a.disableScroll)!==!0),h.disableSlideDir(0),t.$watch("activeSlide",function(e){u(e)&&h.slide(e)}),t.$on("slideBox.nextSlide",function(){h.next()}),t.$on("slideBox.prevSlide",function(){h.prev()}),t.$on("slideBox.setSlide",function(e,t){h.slide(t)}),this.__slider=h;var p=n._registerInstance(h,a.delegateHandle,function(){return i.isActiveScope(t)});t.$on("$destroy",function(){p(),h.kill()}),this.slidesCount=function(){return h.slidesCount()},this.onPagerClick=function(e){t.pagerClick({index:e})},e(function(){h.load()})}],template:'<div class="slider"><div class="slider-slides" ng-transclude></div></div>',link:function(e,n,i){function r(){if(!o){var i=e.$new();o=h("<ion-pager></ion-pager>"),n.append(o),o=t(o)(i)}return o}u(i.showPager)||(e.showPager=!0,r().toggleClass("hide",!1)),i.$observe("showPager",function(t){t=e.$eval(t),r().toggleClass("hide",!t)});var o}}}]).directive("ionSlide",function(){return{restrict:"E",require:"^ionSlideBox",compile:function(e){e.addClass("slider-slide")}}}).directive("ionPager",function(){return{restrict:"E",replace:!0,require:"^ionSlideBox",template:'<div class="slider-pager"><span class="slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon ion-record"></i></span></div>',link:function(e,t,n,i){var r=function(e){for(var n=t[0].children,i=n.length,r=0;i>r;r++)r==e?n[r].classList.add("active"):n[r].classList.remove("active")};e.pagerClick=function(e){i.onPagerClick(e)},e.numSlides=function(){return new Array(i.slidesCount())},e.$watch("currentSlide",function(e){r(e)})}}}),s.directive("ionSpinner",function(){return{restrict:"E",controller:"$ionicSpinner",link:function(e,t,n,i){var r=i.init();t.addClass("spinner spinner-"+r)}}}),s.directive("ionTab",["$compile","$ionicConfig","$ionicBind","$ionicViewSwitcher",function(e,t,n,i){function r(e,t){return u(t)?" "+e+'="'+t+'"':""}return{restrict:"E",require:["^ionTabs","ionTab"],controller:"$ionicTab",scope:!0,compile:function(o,a){for(var s="<ion-tab-nav"+r("ng-click",a.ngClick)+r("title",a.title)+r("icon",a.icon)+r("icon-on",a.iconOn)+r("icon-off",a.iconOff)+r("badge",a.badge)+r("badge-style",a.badgeStyle)+r("hidden",a.hidden)+r("disabled",a.disabled)+r("class",a["class"])+"></ion-tab-nav>",c=document.createElement("div"),l=0;l<o[0].children.length;l++)c.appendChild(o[0].children[l].cloneNode(!0));var u=c.childElementCount;o.empty();var f,d;return u&&("ION-NAV-VIEW"===c.children[0].tagName&&(f=c.children[0].getAttribute("name"),c.children[0].classList.add("view-container"),d=!0),1===u&&(c=c.children[0]),d||c.classList.add("pane"),c.classList.add("tab-content")),function(r,o,a,l){function d(){w.tabMatchesState()&&$.select(r,!1)}function p(n){n&&u?(y||(m=r.$new(),g=h(c),i.viewEleIsActive(g,!0),$.$element.append(g),e(g)(m),y=!0),i.viewEleIsActive(g,!0)):y&&g&&(t.views.maxCache()>0?i.viewEleIsActive(g,!1):v())}function v(){m&&m.$destroy(),y&&g&&g.remove(),c.innerHTML="",y=m=g=null}var m,g,$=l[0],w=l[1],y=!1;r.$tabSelected=!1,n(r,a,{onSelect:"&",onDeselect:"&",title:"@",uiSref:"@",href:"@"}),$.add(r),r.$on("$destroy",function(){r.$tabsDestroy||$.remove(r),_.isolateScope().$destroy(),_.remove(),_=c=g=null}),o[0].removeAttribute("title"),f&&(w.navViewName=r.navViewName=f),r.$on("$stateChangeSuccess",d),d();var _=h(s);_.data("$ionTabsController",$),_.data("$ionTabController",w),$.$tabsElement.append(e(_)(r)),r.$watch("$tabSelected",p),r.$on("$ionicView.afterEnter",function(){i.viewEleIsActive(g,r.$tabSelected)}),r.$on("$ionicView.clearCache",function(){r.$tabSelected||v()})}}}}]),s.directive("ionTabNav",[function(){return{restrict:"E",replace:!0,require:["^ionTabs","^ionTab"],template:"<a ng-class=\"{'tab-item-active': isTabActive(), 'has-badge':badge, 'tab-hidden':isHidden()}\" "+' ng-disabled="disabled()" class="tab-item"><span class="badge {{badgeStyle}}" ng-if="badge">{{badge}}</span><i class="icon {{getIconOn()}}" ng-if="getIconOn() && isTabActive()"></i><i class="icon {{getIconOff()}}" ng-if="getIconOff() && !isTabActive()"></i><span class="tab-title" ng-bind-html="title"></span></a>',scope:{title:"@",icon:"@",iconOn:"@",iconOff:"@",badge:"=",hidden:"@",disabled:"&",badgeStyle:"@","class":"@"},link:function(e,t,n,i){var r=i[0],o=i[1];t[0].removeAttribute("title"),e.selectTab=function(e){e.preventDefault(),r.select(o.$scope,!0)},n.ngClick||t.on("click",function(t){e.$apply(function(){e.selectTab(t)})}),e.isHidden=function(){return"true"===n.hidden||n.hidden===!0?!0:!1},e.getIconOn=function(){return e.iconOn||e.icon},e.getIconOff=function(){return e.iconOff||e.icon},e.isTabActive=function(){return r.selectedTab()===o.$scope}}}}]),s.directive("ionTabs",["$ionicTabsDelegate","$ionicConfig",function(e,t){return{restrict:"E",scope:!0,controller:"$ionicTabs",compile:function(n){function i(t,n,i,r){function a(e,t){e.stopPropagation();var n=r.previousSelectedTab();n&&n.$broadcast(e.name.replace("NavView","Tabs"),t)}var s=e._registerInstance(r,i.delegateHandle,r.hasActiveScope);r.$scope=t,r.$element=n,r.$tabsElement=h(n[0].querySelector(".tabs")),t.$watch(function(){return n[0].className},function(e){var n=-1!==e.indexOf("tabs-top"),i=-1!==e.indexOf("tabs-item-hide");t.$hasTabs=!n&&!i,t.$hasTabsTop=n&&!i,t.$emit("$ionicTabs.top",t.$hasTabsTop)}),t.$on("$ionicNavView.beforeLeave",a),t.$on("$ionicNavView.afterLeave",a),t.$on("$ionicNavView.leave",a),t.$on("$destroy",function(){t.$tabsDestroy=!0,s(),r.$tabsElement=r.$element=r.$scope=o=null,delete t.$hasTabs,delete t.$hasTabsTop})}function r(e,t,n,i){i.selectedTab()||i.select(0)}var o=h('<div class="tab-nav tabs">');return o.append(n.contents()),n.append(o).addClass("tabs-"+t.tabs.position()+" tabs-"+t.tabs.style()),{pre:i,post:r}}}}]),s.directive("ionToggle",["$timeout","$ionicConfig",function(e,t){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<div class="item item-toggle"><div ng-transclude></div><label class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></label></div>',compile:function(e,n){var i=e.find("input");return l({name:n.name,"ng-value":n.ngValue,"ng-model":n.ngModel,"ng-checked":n.ngChecked,"ng-disabled":n.ngDisabled,"ng-true-value":n.ngTrueValue,"ng-false-value":n.ngFalseValue,"ng-change":n.ngChange,"ng-required":n.ngRequired,required:n.required},function(e,t){u(e)&&i.attr(t,e)}),n.toggleClass&&e[0].getElementsByTagName("label")[0].classList.add(n.toggleClass),e.addClass("toggle-"+t.form.toggle()),function(e,t){var n=t[0].getElementsByTagName("label")[0],i=n.children[0],r=n.children[1],o=r.children[0],a=h(i).controller("ngModel");e.toggle=new ionic.views.Toggle({el:n,track:r,checkbox:i,handle:o,onChange:function(){a&&(a.$setViewValue(i.checked),e.$apply())}}),e.$on("$destroy",function(){e.toggle.destroy()})}}}}]),s.directive("ionView",function(){return{restrict:"EA",priority:1e3,controller:"$ionicView",compile:function(e){return e.addClass("pane"),e[0].removeAttribute("title"),function(e,t,n,i){i.init()}}}})}();"use strict";angular.module("ngLocale",[],["$provide",function(e){var E={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤ -",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-cn",pluralCat:function(){return E.OTHER}})}]);!function(o,n,e){"use strict";n.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(o,i){function r(){var o,r,t,u;for(o in f)a(c[o])&&i.cookies(o,e);for(o in c)r=c[o],n.isString(r)||(r=""+r,c[o]=r),r!==f[o]&&(i.cookies(o,r),u=!0);if(u){u=!1,t=i.cookies();for(o in c)c[o]!==t[o]&&(a(t[o])?delete c[o]:c[o]=t[o],u=!0)}}var t,c={},f={},u=!1,s=n.copy,a=n.isUndefined;return i.addPollFn(function(){var n=i.cookies();t!=n&&(t=n,s(n,f),s(n,c),u&&o.$apply())})(),u=!0,o.$watch(r),c}]).factory("$cookieStore",["$cookies",function(o){return{get:function(e){var i=o[e];return i?n.fromJson(i):i},put:function(e,i){o[e]=n.toJson(i)},remove:function(n){delete o[n]}}}])}(window,window.angular);!function(e,t,n){"use strict";function r(e){var t;if(t=e.match(u)){var n=new Date(0),r=0,i=0;return t[9]&&(r=o(t[9]+t[10]),i=o(t[9]+t[11])),n.setUTCFullYear(o(t[1]),o(t[2])-1,o(t[3])),n.setUTCHours(o(t[4]||0)-r,o(t[5]||0)-i,o(t[6]||0),o(t[7]||0)),n}return e}function o(e){return parseInt(e,10)}function i(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function s(e,r,o,i){function s(e,n,r,o){return t.isFunction(e)?e:function(){return t.isNumber(e)?[e,n,r,o]:[200,e,n,r]}}function u(e,s,c,u,f,m,p){function v(e){return t.isString(e)||t.isFunction(e)||e instanceof RegExp?e:t.toJson(e)}function k(t){function o(){var n=t.response(e,s,c,f);w.$$respHeaders=n[2],u($(n[0]),$(n[1]),w.getAllResponseHeaders(),$(n[3]||""))}function a(){for(var e=0,t=h.length;t>e;e++)if(h[e]===o){h.splice(e,1),u(-1,n,"");break}}return!i&&m&&(m.then?m.then(a):r(a,m)),o}var w=new a,E=d[0],D=!1;if(E&&E.match(e,s)){if(!E.matchData(c))throw new Error("Expected "+E+" with different data\nEXPECTED: "+v(E.data)+"\nGOT:      "+c);if(!E.matchHeaders(f))throw new Error("Expected "+E+" with different headers\nEXPECTED: "+v(E.headers)+"\nGOT:      "+v(f));if(d.shift(),E.response)return void h.push(k(E));D=!0}for(var T,y=-1;T=l[++y];)if(T.match(e,s,c,f||{})){if(T.response)(i?i.defer:g)(k(T));else{if(!T.passThrough)throw new Error("No response defined !");o(e,s,c,u,f,m,p)}return}throw new Error(D?"No response defined !":"Unexpected request: "+e+" "+s+"\n"+(E?"Expected "+E:"No more request expected"))}function f(e){t.forEach(["GET","DELETE","JSONP","HEAD"],function(t){u[e+t]=function(r,o){return u[e](t,r,n,o)}}),t.forEach(["PUT","POST","PATCH"],function(t){u[e+t]=function(n,r,o){return u[e](t,n,r,o)}})}var l=[],d=[],h=[],g=t.bind(h,h.push),$=t.copy;return u.when=function(e,t,r,o){var a=new c(e,t,r,o),u={respond:function(e,t,r,o){return a.passThrough=n,a.response=s(e,t,r,o),u}};return i&&(u.passThrough=function(){return a.response=n,a.passThrough=!0,u}),l.push(a),u},f("when"),u.expect=function(e,t,n,r){var o=new c(e,t,n,r),i={respond:function(e,t,n,r){return o.response=s(e,t,n,r),i}};return d.push(o),i},f("expect"),u.flush=function(n,r){if(r!==!1&&e.$digest(),!h.length)throw new Error("No pending request to flush !");if(t.isDefined(n)&&null!==n)for(;n--;){if(!h.length)throw new Error("No more pending request to flush !");h.shift()()}else for(;h.length;)h.shift()();u.verifyNoOutstandingExpectation(r)},u.verifyNoOutstandingExpectation=function(t){if(t!==!1&&e.$digest(),d.length)throw new Error("Unsatisfied requests: "+d.join(", "))},u.verifyNoOutstandingRequest=function(){if(h.length)throw new Error("Unflushed requests: "+h.length)},u.resetExpectations=function(){d.length=0,h.length=0},u}function c(e,n,r,o){this.data=r,this.headers=o,this.match=function(n,r,o,i){return e!=n?!1:this.matchUrl(r)?t.isDefined(o)&&!this.matchData(o)?!1:t.isDefined(i)&&!this.matchHeaders(i)?!1:!0:!1},this.matchUrl=function(e){return n?t.isFunction(n.test)?n.test(e):t.isFunction(n)?n(e):n==e:!0},this.matchHeaders=function(e){return t.isUndefined(o)?!0:t.isFunction(o)?o(e):t.equals(o,e)},this.matchData=function(e){return t.isUndefined(r)?!0:r&&t.isFunction(r.test)?r.test(e):r&&t.isFunction(r)?r(e):r&&!t.isString(r)?t.equals(t.fromJson(t.toJson(r)),t.fromJson(e)):r==e},this.toString=function(){return e+" "+n}}function a(){a.$$lastInstance=this,this.open=function(e,t,n){this.$$method=e,this.$$url=t,this.$$async=n,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(e){this.$$data=e},this.setRequestHeader=function(e,t){this.$$reqHeaders[e]=t},this.getResponseHeader=function(e){var r=this.$$respHeaders[e];return r?r:(e=t.lowercase(e),(r=this.$$respHeaders[e])?r:(r=n,t.forEach(this.$$respHeaders,function(n,o){r||t.lowercase(o)!=e||(r=n)}),r))},this.getAllResponseHeaders=function(){var e=[];return t.forEach(this.$$respHeaders,function(t,n){e.push(n+": "+t)}),e.join("\n")},this.abort=t.noop}t.mock={},t.mock.$BrowserProvider=function(){this.$get=function(){return new t.mock.$Browser}},t.mock.$Browser=function(){var e=this;this.isMock=!0,e.$$url="http://server/",e.$$lastUrl=e.$$url,e.pollFns=[],e.$$completeOutstandingRequest=t.noop,e.$$incOutstandingRequestCount=t.noop,e.onUrlChange=function(t){return e.pollFns.push(function(){(e.$$lastUrl!==e.$$url||e.$$state!==e.$$lastState)&&(e.$$lastUrl=e.$$url,e.$$lastState=e.$$state,t(e.$$url,e.$$state))}),t},e.$$checkUrlChange=t.noop,e.cookieHash={},e.lastCookieHash={},e.deferredFns=[],e.deferredNextId=0,e.defer=function(t,n){return n=n||0,e.deferredFns.push({time:e.defer.now+n,fn:t,id:e.deferredNextId}),e.deferredFns.sort(function(e,t){return e.time-t.time}),e.deferredNextId++},e.defer.now=0,e.defer.cancel=function(r){var o;return t.forEach(e.deferredFns,function(e,t){e.id===r&&(o=t)}),o!==n?(e.deferredFns.splice(o,1),!0):!1},e.defer.flush=function(n){if(t.isDefined(n))e.defer.now+=n;else{if(!e.deferredFns.length)throw new Error("No deferred tasks to be flushed");e.defer.now=e.deferredFns[e.deferredFns.length-1].time}for(;e.deferredFns.length&&e.deferredFns[0].time<=e.defer.now;)e.deferredFns.shift().fn()},e.$$baseHref="/",e.baseHref=function(){return this.$$baseHref}},t.mock.$Browser.prototype={poll:function(){t.forEach(this.pollFns,function(e){e()})},addPollFn:function(e){return this.pollFns.push(e),e},url:function(e,n,r){return t.isUndefined(r)&&(r=null),e?(this.$$url=e,this.$$state=t.copy(r),this):this.$$url},state:function(){return this.$$state},cookies:function(e,n){return e?void(t.isUndefined(n)?delete this.cookieHash[e]:t.isString(n)&&n.length<=4096&&(this.cookieHash[e]=n)):(t.equals(this.cookieHash,this.lastCookieHash)||(this.lastCookieHash=t.copy(this.cookieHash),this.cookieHash=t.copy(this.cookieHash)),this.cookieHash)},notifyWhenNoOutstandingRequests:function(e){e()}},t.mock.$ExceptionHandlerProvider=function(){var e;this.mode=function(t){switch(t){case"log":case"rethrow":var n=[];e=function(e){if(n.push(1==arguments.length?e:[].slice.call(arguments,0)),"rethrow"===t)throw e},e.errors=n;break;default:throw new Error("Unknown mode '"+t+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return e},this.mode("rethrow")},t.mock.$LogProvider=function(){function e(e,t,n){return e.concat(Array.prototype.slice.call(t,n))}var n=!0;this.debugEnabled=function(e){return t.isDefined(e)?(n=e,this):n},this.$get=function(){var r={log:function(){r.log.logs.push(e([],arguments,0))},warn:function(){r.warn.logs.push(e([],arguments,0))},info:function(){r.info.logs.push(e([],arguments,0))},error:function(){r.error.logs.push(e([],arguments,0))},debug:function(){n&&r.debug.logs.push(e([],arguments,0))}};return r.reset=function(){r.log.logs=[],r.info.logs=[],r.warn.logs=[],r.error.logs=[],r.debug.logs=[]},r.assertEmpty=function(){var e=[];if(t.forEach(["error","warn","info","log","debug"],function(n){t.forEach(r[n].logs,function(r){t.forEach(r,function(t){e.push("MOCK $log ("+n+"): "+String(t)+"\n"+(t.stack||""))})})}),e.length)throw e.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),e.push(""),new Error(e.join("\n---------\n"))},r.reset(),r}},t.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function(e,r,o,i){var s=[],c=0,a=0,u=function(u,f,l,d){function h(){if(m.notify(g++),l>0&&g>=l){var o;m.resolve(g),t.forEach(s,function(e,t){e.id===p.$$intervalId&&(o=t)}),o!==n&&s.splice(o,1)}$?e.defer.flush():r.$apply()}var g=0,$=t.isDefined(d)&&!d,m=($?i:o).defer(),p=m.promise;return l=t.isDefined(l)?l:0,p.then(null,null,u),p.$$intervalId=c,s.push({nextTime:a+f,delay:f,fn:h,id:c,deferred:m}),s.sort(function(e,t){return e.nextTime-t.nextTime}),c++,p};return u.cancel=function(e){if(!e)return!1;var r;return t.forEach(s,function(t,n){t.id===e.$$intervalId&&(r=n)}),r!==n?(s[r].deferred.reject("canceled"),s.splice(r,1),!0):!1},u.flush=function(e){for(a+=e;s.length&&s[0].nextTime<=a;){var t=s[0];t.fn(),t.nextTime+=t.delay,s.sort(function(e,t){return e.nextTime-t.nextTime})}return e},u}]};var u=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;if(t.mock.TzDate=function(e,n){var o=new Date(0);if(t.isString(n)){var s=n;if(o.origDate=r(n),n=o.origDate.getTime(),isNaN(n))throw{name:"Illegal Argument",message:"Arg '"+s+"' passed into TzDate constructor is not a valid date string"}}else o.origDate=new Date(n);var c=new Date(n).getTimezoneOffset();o.offsetDiff=60*c*1e3-1e3*e*60*60,o.date=new Date(n+o.offsetDiff),o.getTime=function(){return o.date.getTime()-o.offsetDiff},o.toLocaleDateString=function(){return o.date.toLocaleDateString()},o.getFullYear=function(){return o.date.getFullYear()},o.getMonth=function(){return o.date.getMonth()},o.getDate=function(){return o.date.getDate()},o.getHours=function(){return o.date.getHours()},o.getMinutes=function(){return o.date.getMinutes()},o.getSeconds=function(){return o.date.getSeconds()},o.getMilliseconds=function(){return o.date.getMilliseconds()},o.getTimezoneOffset=function(){return 60*e},o.getUTCFullYear=function(){return o.origDate.getUTCFullYear()},o.getUTCMonth=function(){return o.origDate.getUTCMonth()},o.getUTCDate=function(){return o.origDate.getUTCDate()},o.getUTCHours=function(){return o.origDate.getUTCHours()},o.getUTCMinutes=function(){return o.origDate.getUTCMinutes()},o.getUTCSeconds=function(){return o.origDate.getUTCSeconds()},o.getUTCMilliseconds=function(){return o.origDate.getUTCMilliseconds()},o.getDay=function(){return o.date.getDay()},o.toISOString&&(o.toISOString=function(){return i(o.origDate.getUTCFullYear(),4)+"-"+i(o.origDate.getUTCMonth()+1,2)+"-"+i(o.origDate.getUTCDate(),2)+"T"+i(o.origDate.getUTCHours(),2)+":"+i(o.origDate.getUTCMinutes(),2)+":"+i(o.origDate.getUTCSeconds(),2)+"."+i(o.origDate.getUTCMilliseconds(),3)+"Z"});var a=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return t.forEach(a,function(e){o[e]=function(){throw new Error("Method '"+e+"' is not implemented in the TzDate mock")}}),o},t.mock.TzDate.prototype=Date.prototype,t.mock.animate=t.module("ngAnimateMock",["ng"]).config(["$provide",function(e){var n=[];e.value("$$animateReflow",function(e){var t=n.length;return n.push(e),function(){n.splice(t,1)}}),e.decorator("$animate",["$delegate","$$asyncCallback","$timeout","$browser",function(e,r,o){var i={queue:[],cancel:e.cancel,enabled:e.enabled,triggerCallbackEvents:function(){r.flush()},triggerCallbackPromise:function(){o.flush(0)},triggerCallbacks:function(){this.triggerCallbackEvents(),this.triggerCallbackPromise()},triggerReflow:function(){t.forEach(n,function(e){e()}),n=[]}};return t.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(t){i[t]=function(){return i.queue.push({event:t,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),e[t].apply(e,arguments)}}),i}])}]),t.mock.dump=function(e){function n(e){var o;return t.isElement(e)?(e=t.element(e),o=t.element("<div></div>"),t.forEach(e,function(e){o.append(t.element(e).clone())}),o=o.html()):t.isArray(e)?(o=[],t.forEach(e,function(e){o.push(n(e))}),o="[ "+o.join(", ")+" ]"):o=t.isObject(e)?t.isFunction(e.$eval)&&t.isFunction(e.$apply)?r(e):e instanceof Error?e.stack||""+e.name+": "+e.message:t.toJson(e,!0):String(e),o}function r(e,n){n=n||"  ";var o=[n+"Scope("+e.$id+"): {"];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&!i.match(/^(\$|this)/)&&o.push("  "+i+": "+t.toJson(e[i]));for(var s=e.$$childHead;s;)o.push(r(s,n+"  ")),s=s.$$nextSibling;return o.push("}"),o.join("\n"+n)}return n(e)},t.mock.$HttpBackendProvider=function(){this.$get=["$rootScope","$timeout",s]},t.mock.$TimeoutDecorator=["$delegate","$browser",function(e,n){function r(e){var n=[];return t.forEach(e,function(e){n.push("{id: "+e.id+", time: "+e.time+"}")}),n.join(", ")}return e.flush=function(e){n.defer.flush(e)},e.verifyNoPendingTasks=function(){if(n.deferredFns.length)throw new Error("Deferred tasks to flush ("+n.deferredFns.length+"): "+r(n.deferredFns))},e}],t.mock.$RAFDecorator=["$delegate",function(e){var t=[],n=function(e){var n=t.length;return t.push(e),function(){t.splice(n,1)}};return n.supported=e.supported,n.flush=function(){if(0===t.length)throw new Error("No rAF callbacks present");for(var e=t.length,n=0;e>n;n++)t[n]();t=[]},n}],t.mock.$AsyncCallbackDecorator=["$delegate",function(){var e=[],n=function(t){e.push(t)};return n.flush=function(){t.forEach(e,function(e){e()}),e=[]},n}],t.mock.$RootElementProvider=function(){this.$get=function(){return t.element("<div ng-app></div>")}},t.mock.$ControllerDecorator=["$delegate",function(e){return function(n,r,o,i){if(o&&"object"==typeof o){var s=e(n,r,!0,i);return t.extend(s.instance,o),s()}return e(n,r,o,i)}}],t.module("ngMock",["ng"]).provider({$browser:t.mock.$BrowserProvider,$exceptionHandler:t.mock.$ExceptionHandlerProvider,$log:t.mock.$LogProvider,$interval:t.mock.$IntervalProvider,$httpBackend:t.mock.$HttpBackendProvider,$rootElement:t.mock.$RootElementProvider}).config(["$provide",function(e){e.decorator("$timeout",t.mock.$TimeoutDecorator),e.decorator("$$rAF",t.mock.$RAFDecorator),e.decorator("$$asyncCallback",t.mock.$AsyncCallbackDecorator),e.decorator("$rootScope",t.mock.$RootScopeDecorator),e.decorator("$controller",t.mock.$ControllerDecorator)}]),t.module("ngMockE2E",["ng"]).config(["$provide",function(e){e.decorator("$httpBackend",t.mock.e2e.$httpBackendDecorator)}]),t.mock.e2e={},t.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",s],t.mock.$RootScopeDecorator=["$delegate",function(e){function t(){for(var e,t=0,n=[this.$$childHead];n.length;)for(e=n.shift();e;)t+=1,n.push(e.$$childHead),e=e.$$nextSibling;return t}function n(){for(var e,t=this.$$watchers?this.$$watchers.length:0,n=[this.$$childHead];n.length;)for(e=n.shift();e;)t+=e.$$watchers?e.$$watchers.length:0,n.push(e.$$childHead),e=e.$$nextSibling;return t}var r=Object.getPrototypeOf(e);return r.$countChildScopes=t,r.$countWatchers=n,e}],e.jasmine||e.mocha){var f=null,l=[],d=function(){return!!f};t.mock.$$annotate=t.injector.$$annotate,t.injector.$$annotate=function(e){return"function"!=typeof e||e.$inject||l.push(e),t.mock.$$annotate.apply(this,arguments)},(e.beforeEach||e.setup)(function(){l=[],f=this}),(e.afterEach||e.teardown)(function(){var e=f.$injector;l.forEach(function(e){delete e.$inject}),t.forEach(f.$modules,function(e){e&&e.$$hashKey&&(e.$$hashKey=n)}),f.$injector=null,f.$modules=null,f=null,e&&(e.get("$rootElement").off(),e.get("$browser").pollFns.length=0),t.forEach(t.element.fragments,function(e,n){delete t.element.fragments[n]}),a.$$lastInstance=null,t.forEach(t.callbacks,function(e,n){delete t.callbacks[n]}),t.callbacks.counter=0}),e.module=t.mock.module=function(){function e(){if(f.$injector)throw new Error("Injector already created, can not register a module!");var e=f.$modules||(f.$modules=[]);t.forEach(n,function(n){e.push(t.isObject(n)&&!t.isArray(n)?function(e){t.forEach(n,function(t,n){e.value(n,t)})}:n)})}var n=Array.prototype.slice.call(arguments,0);return d()?e():e};var h=function(e,t){this.message=e.message,this.name=e.name,e.line&&(this.line=e.line),e.sourceId&&(this.sourceId=e.sourceId),e.stack&&t&&(this.stack=e.stack+"\n"+t.stack),e.stackArray&&(this.stackArray=e.stackArray)};h.prototype.toString=Error.prototype.toString,e.inject=t.mock.inject=function(){function e(){var e=f.$modules||[],o=!!f.$injectorStrict;e.unshift("ngMock"),e.unshift("ng");var i=f.$injector;i||(o&&t.forEach(e,function(e){"function"==typeof e&&t.injector.$$annotate(e)}),i=f.$injector=t.injector(e,o),f.$injectorStrict=o);for(var s=0,c=n.length;c>s;s++){f.$injectorStrict&&i.annotate(n[s]);try{i.invoke(n[s]||t.noop,this)}catch(a){if(a.stack&&r)throw new h(a,r);throw a}finally{r=null}}}var n=Array.prototype.slice.call(arguments,0),r=new Error("Declaration Location");return d()?e.call(f):e},t.mock.inject.strictDi=function(e){function t(){if(e!==f.$injectorStrict){if(f.$injector)throw new Error("Injector already created, can not modify strict annotations");f.$injectorStrict=e}}return e=arguments.length?!!e:!0,d()?t():t}}}(window,window.angular);!function(e,t){"use strict";var o=t.isDefined,r=t.isUndefined,i=t.isNumber,n=t.isObject,a=t.isArray,c=t.extend,s=t.toJson,u=t.module("LocalStorageModule",[]);u.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie.expiry=e,this.cookie.path=t,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,u,l){var g,f=this,d=f.prefix,h=f.cookie,m=f.notify,p=f.storageType;u?u[0]&&(u=u[0]):u=document,"."!==d.substr(-1)&&(d=d?d+".":"");var S=function(e){return d+e},T=function(){try{var o=p in t&&null!==t[p],r=S("__"+Math.round(1e7*Math.random()));return o&&(g=t[p],g.setItem(r,""),g.removeItem(r)),o}catch(i){return p="cookie",e.$broadcast("LocalStorageModule.notification.error",i.message),!1}}(),y=function(t,o){if(o=r(o)?null:s(o),!T||"cookie"===f.storageType)return T||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:"cookie"}),M(t,o);try{g&&g.setItem(S(t),o),m.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:f.storageType})}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.message),M(t,o)}return!0},v=function(t){if(!T||"cookie"===f.storageType)return T||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),$(t);var o=g?g.getItem(S(t)):null;if(!o||"null"===o)return null;try{return JSON.parse(o)}catch(r){return o}},O=function(){var t,o;for(t=0;t<arguments.length;t++)if(o=arguments[t],T&&"cookie"!==f.storageType)try{g.removeItem(S(o)),m.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:o,storageType:f.storageType})}catch(r){e.$broadcast("LocalStorageModule.notification.error",r.message),_(o)}else T||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:o,storageType:"cookie"}),_(o)},b=function(){if(!T)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=d.length,o=[];for(var r in g)if(r.substr(0,t)===d)try{o.push(r.substr(t))}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.Description),[]}return o},k=function(t){var o=d?new RegExp("^"+d):new RegExp,r=t?new RegExp(t):new RegExp;if(!T||"cookie"===f.storageType)return T||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),x();var i=d.length;for(var n in g)if(o.test(n)&&r.test(n.substr(i)))try{O(n.substr(i))}catch(a){return e.$broadcast("LocalStorageModule.notification.error",a.message),x()}return!0},L=function(){try{return t.navigator.cookieEnabled||"cookie"in u&&(u.cookie.length>0||(u.cookie="test").indexOf.call(u.cookie,"test")>-1)}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),!1}}(),M=function(t,o,c){if(r(o))return!1;if((a(o)||n(o))&&(o=s(o)),!L)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var l="",g=new Date,f="";if(null===o?(g.setTime(g.getTime()+-864e5),l="; expires="+g.toGMTString(),o=""):i(c)&&0!==c?(g.setTime(g.getTime()+24*c*60*60*1e3),l="; expires="+g.toGMTString()):0!==h.expiry&&(g.setTime(g.getTime()+24*h.expiry*60*60*1e3),l="; expires="+g.toGMTString()),t){var d="; path="+h.path;h.domain&&(f="; domain="+h.domain),u.cookie=S(t)+"="+encodeURIComponent(o)+l+d+f}}catch(m){return e.$broadcast("LocalStorageModule.notification.error",m.message),!1}return!0},$=function(t){if(!L)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var o=u.cookie&&u.cookie.split(";")||[],r=0;r<o.length;r++){for(var i=o[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(S(t)+"=")){var n=decodeURIComponent(i.substring(d.length+t.length+1,i.length));try{return JSON.parse(n)}catch(a){return n}}}return null},_=function(e){M(e,null)},x=function(){for(var e=null,t=d.length,o=u.cookie.split(";"),r=0;r<o.length;r++){for(e=o[r];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));_(i)}},w=function(){return p},E=function(e,t,r,i){i=i||t;var a=v(i);return null===a&&o(r)?a=r:n(a)&&n(r)&&(a=c(r,a)),l(t).assign(e,a),e.$watch(t,function(e){y(i,e)},n(e[t]))},R=function(){for(var e=0,o=t[p],r=0;r<o.length;r++)0===o.key(r).indexOf(d)&&e++;return e};return{isSupported:T,getStorageType:w,set:y,add:y,get:v,keys:b,remove:O,clearAll:k,bind:E,deriveKey:S,length:R,cookie:{isSupported:L,set:M,add:M,get:$,remove:_,clearAll:x}}}]})}(window,window.angular);!function(){"use strict";var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){var e=function(e){if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else e=!1;return e},t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var r={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(r,a,i,n){var c=function(t,r,a){var i="show"===r?"":"none",n="hide"===r?"":"none";t.css("display",e(a)?i:n)},o=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var r=[];angular.forEach(t,function(e,t){e&&r.push(t)}),t=r}t&&e.addClass(angular.isArray(t)?t.join(" "):t)},s=function(e,t){e.transclude(t,function(t){var r=e.element.parent(),a=e.element&&e.element[e.element.length-1],i=r&&r[0]||a&&a.parentNode,n=a&&a.nextSibling||null;angular.forEach(t,function(e){i.insertBefore(e,n)})})},l={watcherRemover:void 0,binders:[],group:i.boName,element:a,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=r.$watch(e,function(e){void 0!==e&&(t.removeWatcher(),t.checkBindonce(e))},!0)},checkBindonce:function(e){var t=this,r=e.$promise?e.$promise.then:e.then;"function"==typeof r?r(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var r=this.binders.shift();if(!this.group||this.group==r.group){var a=r.scope.$eval(r.interpolate?n(r.value):r.value);switch(r.attr){case"boIf":e(a)&&s(r,r.scope.$new());break;case"boSwitch":var i,l=r.controller[0];(i=l.cases["!"+a]||l.cases["?"])&&(r.scope.$eval(r.attrs.change),angular.forEach(i,function(e){s(e,r.scope.$new())}));break;case"boSwitchWhen":var u=r.controller[0];u.cases["!"+r.attrs.boSwitchWhen]=u.cases["!"+r.attrs.boSwitchWhen]||[],u.cases["!"+r.attrs.boSwitchWhen].push({transclude:r.transclude,element:r.element});break;case"boSwitchDefault":var u=r.controller[0];u.cases["?"]=u.cases["?"]||[],u.cases["?"].push({transclude:r.transclude,element:r.element});break;case"hide":case"show":c(r.element,r.attr,a);break;case"class":o(r.element,a);break;case"text":r.element.text(a);break;case"html":r.element.html(a);break;case"style":r.element.css(a);break;case"disabled":r.element.prop("disabled",a);break;case"src":r.element.attr(r.attr,a),t&&r.element.prop("src",a);break;case"attr":angular.forEach(r.attrs,function(e,t){var a,i;t.match(/^boAttr./)&&r.attrs[t]&&(a=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=r.scope.$eval(r.attrs[t]),r.element.attr(a,i))});break;case"href":case"alt":case"title":case"id":case"value":r.element.attr(r.attr,a)}}}this.ran=!0}};angular.extend(this,l)}],link:function(e,t,r,a){var i=r.bindonce&&e.$eval(r.bindonce);void 0!==i?a.checkBindonce(i):(a.setupWatcher(r.bindonce),t.bind("$destroy",a.removeWatcher))}};return r}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var r=200;return e.directive(t.directiveName,function(){var e={priority:t.priority||r,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(e,r,a){return function(e,r,i,n){var c=n[0],o=i.boParent;if(o&&c.group!==o){var s=c.element.parent();c=void 0;for(var l;9!==s[0].nodeType&&s.length;){if((l=s.data("$bindonceController"))&&l.group===o){c=l;break}s=s.parent()}if(!c)throw new Error("No bindonce controller: "+o)}c.addBinder({element:r,attr:t.attribute||t.directiveName,attrs:i,value:i[t.directiveName],interpolate:t.interpolate,group:o,transclude:a,controller:n.slice(1),scope:e})}}};return e})})}();var qrcode=function(){function r(t,e){if("undefined"==typeof t.length)throw new Error(t.length+"/"+e);var n=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var n=new Array(t.length-r+e),o=0;o<t.length-r;o+=1)n[o]=t[o+r];return n}(),o={};return o.getAt=function(r){return n[r]},o.getLength=function(){return n.length},o.multiply=function(t){for(var e=new Array(o.getLength()+t.getLength()-1),n=0;n<o.getLength();n+=1)for(var a=0;a<t.getLength();a+=1)e[n+a]^=i.gexp(i.glog(o.getAt(n))+i.glog(t.getAt(a)));return r(e,0)},o.mod=function(t){if(o.getLength()-t.getLength()<0)return o;for(var e=i.glog(o.getAt(0))-i.glog(t.getAt(0)),n=new Array(o.getLength()),a=0;a<o.getLength();a+=1)n[a]=o.getAt(a);for(var a=0;a<t.getLength();a+=1)n[a]^=i.gexp(i.glog(t.getAt(a))+e);return r(n,0).mod(t)},o}var t=function(t,e){var o=236,i=17,c=t,h=n[e],l=null,v=0,w=null,d=new Array,y={},A=function(r,t){v=4*c+17,l=function(r){for(var t=new Array(r),e=0;r>e;e+=1){t[e]=new Array(r);for(var n=0;r>n;n+=1)t[e][n]=null}return t}(v),B(0,0),B(v-7,0),B(0,v-7),T(),E(),D(r,t),c>=7&&M(r),null==w&&(w=m(c,h,d)),k(w,t)},B=function(r,t){for(var e=-1;7>=e;e+=1)if(!(-1>=r+e||r+e>=v))for(var n=-1;7>=n;n+=1)-1>=t+n||t+n>=v||(l[r+e][t+n]=e>=0&&6>=e&&(0==n||6==n)||n>=0&&6>=n&&(0==e||6==e)||e>=2&&4>=e&&n>=2&&4>=n?!0:!1)},p=function(){for(var r=0,t=0,e=0;8>e;e+=1){A(!0,e);var n=a.getLostPoint(y);(0==e||r>n)&&(r=n,t=e)}return t},E=function(){for(var r=8;v-8>r;r+=1)null==l[r][6]&&(l[r][6]=r%2==0);for(var t=8;v-8>t;t+=1)null==l[6][t]&&(l[6][t]=t%2==0)},T=function(){for(var r=a.getPatternPosition(c),t=0;t<r.length;t+=1)for(var e=0;e<r.length;e+=1){var n=r[t],o=r[e];if(null==l[n][o])for(var i=-2;2>=i;i+=1)for(var u=-2;2>=u;u+=1)l[n+i][o+u]=-2==i||2==i||-2==u||2==u||0==i&&0==u?!0:!1}},M=function(r){for(var t=a.getBCHTypeNumber(c),e=0;18>e;e+=1){var n=!r&&1==(t>>e&1);l[Math.floor(e/3)][e%3+v-8-3]=n}for(var e=0;18>e;e+=1){var n=!r&&1==(t>>e&1);l[e%3+v-8-3][Math.floor(e/3)]=n}},D=function(r,t){for(var e=h<<3|t,n=a.getBCHTypeInfo(e),o=0;15>o;o+=1){var i=!r&&1==(n>>o&1);6>o?l[o][8]=i:8>o?l[o+1][8]=i:l[v-15+o][8]=i}for(var o=0;15>o;o+=1){var i=!r&&1==(n>>o&1);8>o?l[8][v-o-1]=i:9>o?l[8][15-o-1+1]=i:l[8][15-o-1]=i}l[v-8][8]=!r},k=function(r,t){for(var e=-1,n=v-1,o=7,i=0,u=a.getMaskFunction(t),f=v-1;f>0;f-=2)for(6==f&&(f-=1);;){for(var g=0;2>g;g+=1)if(null==l[n][f-g]){var c=!1;i<r.length&&(c=1==(r[i]>>>o&1));var h=u(n,f-g);h&&(c=!c),l[n][f-g]=c,o-=1,-1==o&&(i+=1,o=7)}if(n+=e,0>n||n>=v){n-=e,e=-e;break}}},C=function(t,e){for(var n=0,o=0,i=0,u=new Array(e.length),f=new Array(e.length),g=0;g<e.length;g+=1){var c=e[g].dataCount,h=e[g].totalCount-c;o=Math.max(o,c),i=Math.max(i,h),u[g]=new Array(c);for(var l=0;l<u[g].length;l+=1)u[g][l]=255&t.getBuffer()[l+n];n+=c;var v=a.getErrorCorrectPolynomial(h),s=r(u[g],v.getLength()-1),w=s.mod(v);f[g]=new Array(v.getLength()-1);for(var l=0;l<f[g].length;l+=1){var d=l+w.getLength()-f[g].length;f[g][l]=d>=0?w.getAt(d):0}}for(var y=0,l=0;l<e.length;l+=1)y+=e[l].totalCount;for(var A=new Array(y),B=0,l=0;o>l;l+=1)for(var g=0;g<e.length;g+=1)l<u[g].length&&(A[B]=u[g][l],B+=1);for(var l=0;i>l;l+=1)for(var g=0;g<e.length;g+=1)l<f[g].length&&(A[B]=f[g][l],B+=1);return A},m=function(r,t,e){for(var n=u.getRSBlocks(r,t),g=f(),c=0;c<e.length;c+=1){var h=e[c];g.put(h.getMode(),4),g.put(h.getLength(),a.getLengthInBits(h.getMode(),r)),h.write(g)}for(var l=0,c=0;c<n.length;c+=1)l+=n[c].dataCount;if(g.getLengthInBits()>8*l)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*l+")");for(g.getLengthInBits()+4<=8*l&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;;){if(g.getLengthInBits()>=8*l)break;if(g.put(o,8),g.getLengthInBits()>=8*l)break;g.put(i,8)}return C(g,n)};return y.addData=function(r){var t=g(r);d.push(t),w=null},y.isDark=function(r,t){if(0>r||r>=v||0>t||t>=v)throw new Error(r+","+t);return l[r][t]},y.getModuleCount=function(){return v},y.make=function(){A(!1,p())},y.createTableTag=function(r,t){r=r||2,t="undefined"==typeof t?4*r:t;var e="";e+='<table style="',e+=" border-width: 0px; border-style: none;",e+=" border-collapse: collapse;",e+=" padding: 0px; margin: "+t+"px;",e+='">',e+="<tbody>";for(var n=0;n<y.getModuleCount();n+=1){e+="<tr>";for(var o=0;o<y.getModuleCount();o+=1)e+='<td style="',e+=" border-width: 0px; border-style: none;",e+=" border-collapse: collapse;",e+=" padding: 0px; margin: 0px;",e+=" width: "+r+"px;",e+=" height: "+r+"px;",e+=" background-color: ",e+=y.isDark(n,o)?"#000000":"#ffffff",e+=";",e+='"/>';e+="</tr>"}return e+="</tbody>",e+="</table>"},y.createSvgTag=function(r,t){r=r||2,t="undefined"==typeof t?4*r:t;var e,n,o,a,i,u=y.getModuleCount()*r+2*t,f="";for(i="l"+r+",0 0,"+r+" -"+r+",0 0,-"+r+"z ",f+="<svg",f+=' width="'+u+'px"',f+=' height="'+u+'px"',f+=' xmlns="http://www.w3.org/2000/svg"',f+=">",f+='<path d="',o=0;o<y.getModuleCount();o+=1)for(a=o*r+t,e=0;e<y.getModuleCount();e+=1)y.isDark(o,e)&&(n=e*r+t,f+="M"+n+","+a+i);return f+='" stroke="transparent" fill="black"/>',f+="</svg>"},y.createImgTag=function(r,t){r=r||2,t="undefined"==typeof t?4*r:t;var e=y.getModuleCount()*r+2*t,n=t,o=e-t;return s(e,e,function(t,e){if(t>=n&&o>t&&e>=n&&o>e){var a=Math.floor((t-n)/r),i=Math.floor((e-n)/r);return y.isDark(i,a)?0:1}return 1})},y};t.stringToBytes=function(r){for(var t=new Array,e=0;e<r.length;e+=1){var n=r.charCodeAt(e);t.push(255&n)}return t},t.createStringToBytes=function(r,t){var e=function(){for(var e=l(r),n=function(){var r=e.read();if(-1==r)throw new Error;return r},o=0,a={};;){var i=e.read();if(-1==i)break;var u=n(),f=n(),g=n(),c=String.fromCharCode(i<<8|u),h=f<<8|g;a[c]=h,o+=1}if(o!=t)throw new Error(o+" != "+t);return a}(),n="?".charCodeAt(0);return function(r){for(var t=new Array,o=0;o<r.length;o+=1){var a=r.charCodeAt(o);if(128>a)t.push(a);else{var i=e[r.charAt(o)];"number"==typeof i?(255&i)==i?t.push(i):(t.push(i>>>8),t.push(255&i)):t.push(n)}}return t}};var e={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,a=7973,u=21522,f={},g=function(r){for(var t=0;0!=r;)t+=1,r>>>=1;return t};return f.getBCHTypeInfo=function(r){for(var t=r<<10;g(t)-g(n)>=0;)t^=n<<g(t)-g(n);return(r<<10|t)^u},f.getBCHTypeNumber=function(r){for(var t=r<<12;g(t)-g(a)>=0;)t^=a<<g(t)-g(a);return r<<12|t},f.getPatternPosition=function(r){return t[r-1]},f.getMaskFunction=function(r){switch(r){case o.PATTERN000:return function(r,t){return(r+t)%2==0};case o.PATTERN001:return function(r){return r%2==0};case o.PATTERN010:return function(r,t){return t%3==0};case o.PATTERN011:return function(r,t){return(r+t)%3==0};case o.PATTERN100:return function(r,t){return(Math.floor(r/2)+Math.floor(t/3))%2==0};case o.PATTERN101:return function(r,t){return r*t%2+r*t%3==0};case o.PATTERN110:return function(r,t){return(r*t%2+r*t%3)%2==0};case o.PATTERN111:return function(r,t){return(r*t%3+(r+t)%2)%2==0};default:throw new Error("bad maskPattern:"+r)}},f.getErrorCorrectPolynomial=function(t){for(var e=r([1],0),n=0;t>n;n+=1)e=e.multiply(r([1,i.gexp(n)],0));return e},f.getLengthInBits=function(r,t){if(t>=1&&10>t)switch(r){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+r)}else if(27>t)switch(r){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+r)}else{if(!(41>t))throw new Error("type:"+t);switch(r){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+r)}}},f.getLostPoint=function(r){for(var t=r.getModuleCount(),e=0,n=0;t>n;n+=1)for(var o=0;t>o;o+=1){for(var a=0,i=r.isDark(n,o),u=-1;1>=u;u+=1)if(!(0>n+u||n+u>=t))for(var f=-1;1>=f;f+=1)0>o+f||o+f>=t||(0!=u||0!=f)&&i==r.isDark(n+u,o+f)&&(a+=1);a>5&&(e+=3+a-5)}for(var n=0;t-1>n;n+=1)for(var o=0;t-1>o;o+=1){var g=0;r.isDark(n,o)&&(g+=1),r.isDark(n+1,o)&&(g+=1),r.isDark(n,o+1)&&(g+=1),r.isDark(n+1,o+1)&&(g+=1),(0==g||4==g)&&(e+=3)}for(var n=0;t>n;n+=1)for(var o=0;t-6>o;o+=1)r.isDark(n,o)&&!r.isDark(n,o+1)&&r.isDark(n,o+2)&&r.isDark(n,o+3)&&r.isDark(n,o+4)&&!r.isDark(n,o+5)&&r.isDark(n,o+6)&&(e+=40);for(var o=0;t>o;o+=1)for(var n=0;t-6>n;n+=1)r.isDark(n,o)&&!r.isDark(n+1,o)&&r.isDark(n+2,o)&&r.isDark(n+3,o)&&r.isDark(n+4,o)&&!r.isDark(n+5,o)&&r.isDark(n+6,o)&&(e+=40);for(var c=0,o=0;t>o;o+=1)for(var n=0;t>n;n+=1)r.isDark(n,o)&&(c+=1);var h=Math.abs(100*c/t/t-50)/5;return e+=10*h},f}(),i=function(){for(var r=new Array(256),t=new Array(256),e=0;8>e;e+=1)r[e]=1<<e;for(var e=8;256>e;e+=1)r[e]=r[e-4]^r[e-5]^r[e-6]^r[e-8];for(var e=0;255>e;e+=1)t[r[e]]=e;var n={};return n.glog=function(r){if(1>r)throw new Error("glog("+r+")");return t[r]},n.gexp=function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return r[t]},n}(),u=function(){var r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(r,t){var e={};return e.totalCount=r,e.dataCount=t,e},e={},o=function(t,e){switch(e){case n.L:return r[4*(t-1)+0];case n.M:return r[4*(t-1)+1];case n.Q:return r[4*(t-1)+2];case n.H:return r[4*(t-1)+3];default:return void 0}};return e.getRSBlocks=function(r,e){var n=o(r,e);if("undefined"==typeof n)throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+e);for(var a=n.length/3,i=new Array,u=0;a>u;u+=1)for(var f=n[3*u+0],g=n[3*u+1],c=n[3*u+2],h=0;f>h;h+=1)i.push(t(g,c));return i},e}(),f=function(){var r=new Array,t=0,e={};return e.getBuffer=function(){return r},e.getAt=function(t){var e=Math.floor(t/8);return 1==(r[e]>>>7-t%8&1)},e.put=function(r,t){for(var n=0;t>n;n+=1)e.putBit(1==(r>>>t-n-1&1))},e.getLengthInBits=function(){return t},e.putBit=function(e){var n=Math.floor(t/8);r.length<=n&&r.push(0),e&&(r[n]|=128>>>t%8),t+=1},e},g=function(r){var n=e.MODE_8BIT_BYTE,o=t.stringToBytes(r),a={};return a.getMode=function(){return n},a.getLength=function(){return o.length},a.write=function(r){for(var t=0;t<o.length;t+=1)r.put(o[t],8)},a},c=function(){var r=new Array,t={};return t.writeByte=function(t){r.push(255&t)},t.writeShort=function(r){t.writeByte(r),t.writeByte(r>>>8)},t.writeBytes=function(r,e,n){e=e||0,n=n||r.length;for(var o=0;n>o;o+=1)t.writeByte(r[o+e])},t.writeString=function(r){for(var e=0;e<r.length;e+=1)t.writeByte(r.charCodeAt(e))},t.toByteArray=function(){return r},t.toString=function(){var t="";t+="[";for(var e=0;e<r.length;e+=1)e>0&&(t+=","),t+=r[e];return t+="]"},t},h=function(){var r=0,t=0,e=0,n="",o={},a=function(r){n+=String.fromCharCode(i(63&r))},i=function(r){if(0>r);else{if(26>r)return 65+r;if(52>r)return 97+(r-26);if(62>r)return 48+(r-52);if(62==r)return 43;if(63==r)return 47}throw new Error("n:"+r)};return o.writeByte=function(n){for(r=r<<8|255&n,t+=8,e+=1;t>=6;)a(r>>>t-6),t-=6},o.flush=function(){if(t>0&&(a(r<<6-t),r=0,t=0),e%3!=0)for(var o=3-e%3,i=0;o>i;i+=1)n+="="},o.toString=function(){return n},o},l=function(r){var t=r,e=0,n=0,o=0,a={};a.read=function(){for(;8>o;){if(e>=t.length){if(0==o)return-1;throw new Error("unexpected end of file./"+o)}var r=t.charAt(e);if(e+=1,"="==r)return o=0,-1;r.match(/^\s$/)||(n=n<<6|i(r.charCodeAt(0)),o+=6)}var a=n>>>o-8&255;return o-=8,a};var i=function(r){if(r>=65&&90>=r)return r-65;if(r>=97&&122>=r)return r-97+26;if(r>=48&&57>=r)return r-48+52;if(43==r)return 62;if(47==r)return 63;throw new Error("c:"+r)};return a},v=function(r,t){var e=r,n=t,o=new Array(r*t),a={};a.setPixel=function(r,t,n){o[t*e+r]=n},a.write=function(r){r.writeString("GIF87a"),r.writeShort(e),r.writeShort(n),r.writeByte(128),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(255),r.writeByte(255),r.writeByte(255),r.writeString(","),r.writeShort(0),r.writeShort(0),r.writeShort(e),r.writeShort(n),r.writeByte(0);var t=2,o=u(t);r.writeByte(t);for(var a=0;o.length-a>255;)r.writeByte(255),r.writeBytes(o,a,255),a+=255;r.writeByte(o.length-a),r.writeBytes(o,a,o.length-a),r.writeByte(0),r.writeString(";")};var i=function(r){var t=r,e=0,n=0,o={};return o.write=function(r,o){if(r>>>o!=0)throw new Error("length over");for(;e+o>=8;)t.writeByte(255&(r<<e|n)),o-=8-e,r>>>=8-e,n=0,e=0;n=r<<e|n,e+=o},o.flush=function(){e>0&&t.writeByte(n)},o},u=function(r){for(var t=1<<r,e=(1<<r)+1,n=r+1,a=f(),u=0;t>u;u+=1)a.add(String.fromCharCode(u));a.add(String.fromCharCode(t)),a.add(String.fromCharCode(e));var g=c(),h=i(g);h.write(t,n);var l=0,v=String.fromCharCode(o[l]);for(l+=1;l<o.length;){var s=String.fromCharCode(o[l]);l+=1,a.contains(v+s)?v+=s:(h.write(a.indexOf(v),n),a.size()<4095&&(a.size()==1<<n&&(n+=1),a.add(v+s)),v=s)}return h.write(a.indexOf(v),n),h.write(e,n),h.flush(),g.toByteArray()},f=function(){var r={},t=0,e={};return e.add=function(n){if(e.contains(n))throw new Error("dup key:"+n);r[n]=t,t+=1},e.size=function(){return t},e.indexOf=function(t){return r[t]},e.contains=function(t){return"undefined"!=typeof r[t]},e};return a},s=function(r,t,e,n){for(var o=v(r,t),a=0;t>a;a+=1)for(var i=0;r>i;i+=1)o.setPixel(i,a,e(i,a));var u=c();o.write(u);for(var f=h(),g=u.toByteArray(),l=0;l<g.length;l+=1)f.writeByte(g[l]);f.flush();var s="";return s+="<img",s+=' src="',s+="data:image/gif;base64,",s+=f,s+='"',s+=' width="',s+=r,s+='"',s+=' height="',s+=t,s+='"',n&&(s+=' alt="',s+=n,s+='"'),s+="/>"};return t}();!function(r){"function"==typeof define&&define.amd?define([],r):"object"==typeof exports&&(module.exports=r())}(function(){return qrcode});angular.module("monospaced.qrcode",[]).directive("qrcode",["$window",function(e){var r=!!e.CanvasRenderingContext2D,n={L:"Low",M:"Medium",Q:"Quartile",H:"High"},o=function(e,r,n,o){for(var t=0;n>t;t++)for(var i=0;n>i;i++){var a=Math.ceil((i+1)*o)-Math.floor(i*o),c=Math.ceil((t+1)*o)-Math.floor(t*o);e.fillStyle=r.isDark(t,i)?"#000":"#fff",e.fillRect(Math.round(i*o),Math.round(t*o),a,c)}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(e,t,i){var a,c,d,f,l,s,u,v,h,m=t[0],g=t.find("canvas"),M=g[0],w=r?M.getContext("2d"):null,q="download"in i,p=i.href,C=q||p?document.createElement("a"):"",$=/^\s+|\s+$/g,L=function(e){c=Math.max(1,Math.min(parseInt(e,10),40))||5},b=function(e){d=e in n?e:"M"},D=function(e){if(e){f=e.replace($,""),v=qrcode(c,d),v.addData(f);try{v.make()}catch(r){return void(a=r.message)}a=!1,s=v.getModuleCount()}},k=function(e){l=parseInt(e,10)||2*s,u=l/s,M.width=M.height=l},H=function(){if(v){if(a)return C&&(C.removeAttribute("download"),C.title="",C.href="#_"),r||(m.innerHTML='<img src width="'+l+'"height="'+l+'"class="qrcode">'),void e.$emit("qrcode:error",a);if(q&&(m.download="qrcode.png",m.title="Download QR code"),r){if(o(w,v,s,u),q)return void(m.href=M.toDataURL("image/png"))}else if(m.innerHTML=v.createImgTag(u,0),h=t.find("img"),h.addClass("qrcode"),q)return void(m.href=h[0].src);p&&(m.href=p)}};C&&(C.className="qrcode-link",g.wrap(C),m=m.firstChild),L(i.version),b(i.errorCorrectionLevel),k(i.size),i.$observe("version",function(e){e&&(L(e),D(f),k(l),H())}),i.$observe("errorCorrectionLevel",function(e){e&&(b(e),D(f),k(l),H())}),i.$observe("data",function(e){e&&(D(e),k(l),H())}),i.$observe("size",function(e){e&&(k(e),H())}),i.$observe("href",function(e){e&&(p=e,H())})}}}]);var app=angular.module("myApp",["ngCookies","ngAnimate","LocalStorageModule","ngSanitize","ionic","pasvaz.bindonce","monospaced.qrcode"]);app.config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","$injector",function(e,a){return function(e){var r=a.get("$location"),n=a.get("utils");n.clearCurrentViewCache();var o=a.get("AppMaskService");o.setAppMaskVisibility(!1),navigator.splashscreen.hide(),tracelog("[dte] $exceptionHandler, going to error page, current page: "+r.url());var t={};t.callStack=e.stack,r.path("/error").search(t)}}])}]);app.constant("GLOBAL_CONSTANT",{ENVIROMENT:{ENV_NAME:{SIT:"SIT",L:"L",PROD:"PROD",M:"M",U:"U",N:"N",I:"I",H:"H",G:"G"},QQ_APPID:{SIT:"1104566348",L:"1104566348",PROD:"1104566348",M:"1104566348",U:"1104566348",N:"1104566348",I:"1104566348",H:"1104566348",G:"1104566348"},WX_APPID:{SIT:"wx00dc2e2a59bc3a1f",L:"wx00dc2e2a59bc3a1f",PROD:"wx00dc2e2a59bc3a1f",M:"wx00dc2e2a59bc3a1f",U:"wx00dc2e2a59bc3a1f",N:"wx00dc2e2a59bc3a1f",I:"wx00dc2e2a59bc3a1f",H:"wx00dc2e2a59bc3a1f",G:"wx00dc2e2a59bc3a1f"},CGI_PREFIX:{SIT:"https://sit-personal.webank.com/k/hj/",L:"https://sit-personal.webank.com/l/hj/",PROD:"https://personal.webank.com/hj/",M:"https://sit-personal.webank.com/m/hj/",U:"https://sit-personal.webank.com/u/hj/",N:"https://sit-personal.webank.com/n/hj/",I:"https://sit-personal.webank.com/i/hj/",H:"https://sit-personal.webank.com/h/hj/",G:"https://sit-personal.webank.com/g/hj/"},CGI_PREFIX_OP:{SIT:"https://sit-personal.webank.com/k/hjop/",L:"https://sit-personal.webank.com/l/hjop/",PROD:"https://personal.webank.com/hjop/",M:"https://sit-personal.webank.com/m/hjop/",U:"https://sit-personal.webank.com/u/hjop/",N:"https://sit-personal.webank.com/n/hjop/",I:"https://sit-personal.webank.com/i/hjop/",H:"https://sit-personal.webank.com/h/hjop/",G:"https://sit-personal.webank.com/g/hjop/"},CGI_PREFIX_S:{SIT:"https://sit-personal.webank.com/s/hj/",L:"https://sit-personal.webank.com/s/hj/",PROD:"https://personal.webank.com/s/hj/",M:"https://sit-personal.webank.com/s/hj/",U:"https://sit-personal.webank.com/s/hj/",N:"https://sit-personal.webank.com/s/hj/",I:"https://sit-personal.webank.com/s/hj/",H:"https://sit-personal.webank.com/s/hj/",G:"https://sit-personal.webank.com/g/hj/"},TENCENT_CGI_PREFIX:{SIT:"http://sit-hjdata.webank.com/k/hj/",PROD:"http://gzhjdata.webank.com/hj/",L:"http://sit-hjdata.webank.com/l/hj/",M:"http://sit-hjdata.webank.com/m/hj/",U:"http://sit-hjdata.webank.com/u/hj/",N:"http://sit-hjdata.webank.com/n/hj/",I:"http://sit-hjdata.webank.com/i/hj/",H:"http://sit-hjdata.webank.com/h/hj/",G:"http://sit-hjdata.webank.com/g/hj/"},TENCENT_CGI_PREFIX2:{SIT:"http://sit-hjdata.webank.com/k/hj/",PROD:"http://hjdata.webank.com/hj/",L:"http://sit-hjdata.webank.com/l/hj/",M:"http://sit-hjdata.webank.com/m/hj/",U:"http://sit-hjdata.webank.com/u/hj/",N:"http://sit-hjdata.webank.com/n/hj/",I:"http://sit-hjdata.webank.com/i/hj/",H:"http://sit-hjdata.webank.com/h/hj/",G:"http://sit-hjdata.webank.com/g/hj/"},SDK_PREFIX:{SIT:"https://sit-personal.webank.com/k/",L:"https://sit-personal.webank.com/l/",PROD:"https://personal.webank.com/",M:"https://sit-personal.webank.com/m/",U:"https://sit-personal.webank.com/u/",N:"https://sit-personal.webank.com/n/",I:"https://sit-personal.webank.com/i/",H:"https://sit-personal.webank.com/h/",G:"https://sit-personal.webank.com/g/"},DATA_CGI_PREFIX:{SIT:"http://sit-hjdata.webank.com/k/querydata/",L:"http://sit-hjdata.webank.com/l/querydata/",PROD:"http://hjdata.webank.com/querydata/",M:"http://hjdata.webank.com/querydata/",U:"http://sit-hjdata.webank.com/u/querydata/",N:"http://sit-hjdata.webank.com/n/querydata/",I:"http://sit-hjdata.webank.com/i/querydata/",H:"http://sit-hjdata.webank.com/h/querydata/",G:"http://sit-hjdata.webank.com/g/querydata/"},DATA_NOTICE:{SIT:"http://sit-hjdata.webank.com/k/querydata/bulletin/",L:"http://sit-hjdata.webank.com/l/querydata/bulletin/",PROD:"http://hjdata.webank.com/querydata/bulletin/",M:"http://sit-hjdata.webank.com/m/querydata/bulletin/",U:"http://sit-hjdata.webank.com/u/querydata/bulletin/",N:"http://sit-hjdata.webank.com/n/querydata/bulletin/",H:"http://sit-hjdata.webank.com/h/querydata/bulletin/",G:"http://sit-hjdata.webank.com/g/querydata/bulletin/"},BBS_URL_PREFIX:{PROD:"http://bbs.webank.com",SIT:"http://119.29.85.90",L:"http://119.29.85.90",M:"http://119.29.85.90",U:"http://119.29.85.90",N:"http://119.29.85.90",I:"http://119.29.85.90",H:"http://119.29.85.90",G:"http://119.29.85.90"},PDF_VIEW:{PROD:"http://www.webankcdn.net/s/hj/utils/pdfjs/web/viewer.html",SIT:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",L:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",M:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",U:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",N:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",I:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",H:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html",G:"http://sit-hjdata.webank.com/k/common/pdfjs/web/viewer.html"},WEBANK_CDN:{PROD:"https://www.webankcdn.net/",SIT:"https://sit-res.webank.com/",L:"https://sit-res.webank.com/",M:"https://sit-res.webank.com/",U:"https://sit-res.webank.com/",N:"https://sit-res.webank.com/",I:"https://sit-res.webank.com/",H:"https://sit-res.webank.com/",G:"https://sit-res.webank.com/"}},HTTP_TIMEOUT:25e3,LOGIN_PLAT:{QQ:"qq",WX:"weixin",PHONE:"phone"},CGI_RET:{CGI_SUCCESS:"20270000",CGI_SUCCESS_2:"20350000",CGI_SUCCESS_OP:"20530000",CGI_PROCESSING:"20271000",CGI_PROCESSING_2:"20351000",CGI_WEBANK_TOKEN_EXPIRED:"20275055",CGI_WEBANK_TOKEN_EXPIRED_2:"20355055",CGI_WEBANK_TOKEN_EXPIRED_3:"20350055",CGI_WEBANK_TOKEN_EXPIRED_4:"20270055",CGI_UNKNOW_ERROR:"-1",CGI_UNUSED_CARD:"20350006",CGI_UNUSED_CARD_2:"20270006",CGI_NEED_MORE_CARD_NO:"20350080",CGI_NEED_MORE_CARD_NO_2:"20270080",CGI_PWD_ERR_1:"20270021",CGI_PWD_ERR_2:"20270022",CGI_PWD_ERR_3:"20270023",CGI_PWD_ERR_4:"20270024",CGI_PWD_ERR_5:"20270025",CGI_PWD_ERR_6:"20270026",CGI_PWD_ERR_7:"20270003",CGI_PWD_ERR_1_2:"20350021",CGI_PWD_ERR_2_2:"20350022",CGI_PWD_ERR_3_2:"20350023",CGI_PWD_ERR_4_2:"20350024",CGI_PWD_ERR_5_2:"20350025",CGI_PWD_ERR_6_2:"20350026",CGI_PWD_ERR_7_2:"20350003",CGI_COMBINED_BUY:"20275072",CGI_REG_ALREADY_BIND_DIFF:"20350094",CGI_REG_ALREADY_BIND_SAME:"20350095",CGI_RET_TRANS_NEED_OTP:"20270083",CGI_RET_TRANS_BLACK_LIST:"20270084",CGI_RET_TRANS_GRAY_LIST:"20270085",CGI_RET_UNSAFE_OPEN_ACCOUNT:"20350112",CGI_RET_USER_AUTH_FAIL_1:"20351036",CGI_RET_USER_AUTH_FAIL_2:"20271036",CGI_REG_HAS_FAKE_ACCOUNT_RECORD:"20350086"},ACCOUNT_STATE:{USER_STATE_GUEST:1,USER_STATE_LOGIN:2,USER_STATE_HAS_ACCOUNT:3},PROD_TYPE:{GJ:"0",HJ:"2",BX:"3",WNX:"6",TPLUSONE:"8",CURRENTGOLD:"9"},DOC_TYPE:{ID_CARD:"01"},ACCOUNT_TYPE:{INVALID_TYPE:"0",OTHER_BANK_CARD:"1",CURRENT_PLUS:"2",WEBANK_CARD:"3",UNION_PAY:"4"},TRANS_PLAN_JOB_TYPE:{TRANS_OUT:"2",TRANS_IN:"1"},BANK_CARD_TYPE:{DEBIT_CARD:"10"},ORDER_QUERY_TYPE:{PURCHASE:0,REDEEM:1,TRANSIN:2,TRANSIN_FROM_UNION_PAY:21,TRANSOUT:3,CANCEL_INSURANCE:4,PURCHASE_INSURANCE:5,PURCHASE_STOCK:60,CANCEL_STOCK:61,REDEEM_STOCK:62,UNIVERSAL_INSURANCE_PURCHASE:53,UNIVERSAL_INSURANCE_REDEEM:54},ORDER_QUERY_RET_VAL:{UNKNOW:0,APPLY_SUCCESS:1,APPLY_FAILED:2,CONFIRM_SUCCESS:3,CONFIRM_FAILED:4,CANCELD:5,TIMEOUT:6,TO_WEBANK_CARD:9},TRANS_LOG_TYPE:{PURCHASE:0,REDEEM:1,TRANS_IN:10001,TRANS_OUT:10002,UNION_PAY_TO_WEBANK_CARD:21,CANCEL:4,INSURANCE:5,FUND_DIVIDENDS:6,INSURANCE_REDEEM:52,INSURANCE_CANCEL:51,STOCK_PURCHASE:60,STOCK_CANCEL:61,STOCK_REDEEM:62,INSURANCE_PURCHASE2:53,INSURANCE_REDEEM2:54,T_PLUS_ONE_PURCHASE:90,T_PLUS_ONE_REDEEM:91,CFT_PAY:312,CFT_REFUND:313,UNION_PAY_ONLINE:328,UNION_PAY_REFUND:333,T_PLUS_ONE_PURCHASE2:92,T_PLUS_ONE_REDEEM2:93,T_PLUS_ONE_PURCHASE3:94,T_PLUS_ONE_REDEEM3:95,GOLD_TRANSACTION:101},APP_ERROR_CODE:{ERROR_HOME_BASE_DATA:1001,ERROR_EXCHANGE_WEBANK_TOKEN:1002,ERROR_WEALTH_ALL:1003,ERROR_STOCK_CFG:1004,ERROR_INSURANCE_CFG:1005,ERROR_MONETARY:1006,ERROR_BANK_LIMIT:1007,ERROR_HOLIDAY_CFG:1008,ERROR_APPDATA_CFG:1009},WELCOME_VERSION:0,TRANS_STATE:{SUCCESS:1,FAILURE:2,PROCESS:3},PLAN_CATAGRY:{NONE:0,SALARY:1,MORTGAGE:2,RESPECT_PARENT:3,PAY_RENT:4},CALANDAR_CATAGRY:{NONE:0,SALARY:1,MORTGAGE:2,RESPECT_PARENT:3,PAY_RENT:4,ACCOUNT:8,PRODUCT_FORE:9},TRANS_TYPE:{NONE:0,ALL:1,WEBANK_CARD:2,CURRENT_PLUS:3},BACK_TYPE:{TWO_PAGE:2,THREE_PAGE:3,FORE_PAGE:4,FIVE_PAGE:5,SIX_PAGE:6,SEVEN_PAGE:7,EIGHT_PAGE:8,NINE_PAGE:9},OPT_TYPE:{OPEN_ACCOUNT:"100",BIND_CARD:"101",BIND_NEW_PHONE:"102",RESET_PASS:"103",MODIFY_PASS:"104",TRANS:"1000",PLAN:"1001"},ACCOUT_BIZ_TYPE:{PAYMENT:0,RECEIVABLE:1},ACCOUT_SCENE_TYPE:{INSURANCE:"INSURANCE",TPLUSONE:"TPLUSONE",STOCK:"STOCK",TRANSFER:"TRANSFER"},APP_ABILITY:{ABILITY_FEEDBACK:"Ability_feedback",ABILITY_CHECKUPDATE:"Ability_checkNewVer",ABILITY_NATIVEKEYBOARD:"Ability_nativekeyboard",ABILITY_WEMONEYWEBVIEW:"Ability_wemoneywebview",ABILITY_OPERATESPLASH:"Ability_operateSplash",ABILITY_EXITKILLAPP:"Ability_exitKillapp",ABILITY_NATIVEHANDPASSWORD:"Ability_nativeHandPass",ABILITY_LOCATION:"Ability_Location",ABILITY_CALENDAR:"Ability_Calendar",ABILITY_FACEGUIDE:"Ability_FaceGuide",ABILITY_PHONELOGIN:"Ability_PhoneLogin",ABILITY_CHECKQQINSTALL:"Ability_CheckQQInstall",ABILITY_VIDEO_CERTIFICATION:"Ability_VideoCertification",ABILITY_APP_MASK:"Ability_AppMask",ABILITY_STATUS_BAR_COLOR:"Ability_StatusBarColor",ABILITY_INAPPBROWSERHIDEBACK:"Ability_InAppBrowserHideBack",ABILITY_SECURITY_SCAN:"Ability_SecurityScan",ABILITY_GETCOMMONDATA:"Ability_GetCommonData",ABILITY_STARTAPP:"Ability_StartApp",ABILITY_GETCLICKBOARD:"Ability_GetClickBoard",ABILITY_SETWEBVIEWLONGCLICK:"Ability_SetWebViewLongClick",Ability_IOS_H5_SEPARATE_DIR:"Ability_ios_h5_separate_dir",ABILITY_WBlOGIN_SECURITY:"Ability_WbLoginSecurity"},REPORT_EVENT_NAME:{TRANS_OPEN_ACCOUNT:"report_trans_open_account",SAFE_OPEN_ACCOUNT:"safe_open_account",JUMP_ANDROID_NATIVE:"jump_android_native",JUMP_IOS_NATIVE:"jump_ios_native",JUMP_SPLASH_NATIVE:"jump_splash_native",JUMP_WEBVIEW_NATIVE:"jump_webview_native",EXCEPTION:"report_exception",PASSWORD_INVALUED:"password_invalued",REG_BIND_CARD:"reg_bind_card",FACE_VERIFICATION:"face_verification",VIDEO_CERTIFICATION:"video_certification",VIDEO_CERTIFICATION_RESULT:"video_certification_result",TRANSFER_IN:"transfer_in",HAND_PASSWROD_STATE:"hand_passwrod_state",HAND_PASSWROD_CHECK:"hand_passwrod_check"},CHECK_FACE_STATISTIC:{CHECK_FACE_CLICK_QUIT:"check_face_click_quit_",CHECK_FACE_CLICK_QUIT_PERMISSION_ERROR:"check_face_click_quit_pms_err_",CHECK_FACE_CLICK_QUIT_ON_VIDEO_INIT:"check_face_click_quit_on_video_init_",CHECK_FACE_CLICK_QUIT_ON_VIDEO_RESULT:"check_face_click_quit_on_video_result_",CHECK_FACE_CLICK_TRY_AGAIN:"check_face_click_try_again_",CHECK_FACE_CLICK_TRY_AGAIN_ON_VIDEO_INIT:"check_face_click_try_again_on_video_init_",CHECK_FACE_CLICK_TRY_AGAIN_ON_VIDEO_RESULT:"check_face_click_try_again_on_video_result_",CHECK_FACE_CLICK_VIDEO_VERIFY:"check_face_click_video_verify_",CHECK_FACE_CLICK_VIDEO_VERIFY_ON_VIDEO_RESULT:"check_face_click_video_verify_on_video_result_",CHECK_FACE_RESULT:"check_face_result",PV_VIDEO_INIT:"pv_video_init_",PV_VIDEO_RESULT:"pv_video_result_",PV_FACE_PERMISSION_ERROR:"pv_face_permission_error_",PV_FACE_FAILED:"pv_face_failed_",CHECK_FACE_ERROR_CODE:"check_face_error_code"},VIDEO_STATISTIC:{USER_ABORT:"user_abort_",WRONG_ANSWER:"wrong_answer_",USER_DISTURB:"user_disturb_",NETWORK_INTERRUPTER:"network_interrupter_",CONNECT_TIMEOUT:"connect_timeout_",MISS_QUEUE:"miss_queue_",CONFIRM_CELL_NETWORK:"confirm_cell_network",ASK_CELL_NETWORK:"ask_cell_network"},TRANSFER_IN_STATISTIC:{CLICK_TRANS_IN:"click_trans_in_",TRANS_RESULT_SUCCESS:"trans_result_success_",TRANS_RESULT_FAILED:"trans_result_failed_",TRANS_RESULT_PROCESSING:"trans_result_processing_"},REPORT_EXCEPTION:{CALANDER_CLOCK_SET_ERROR:"calander_clock_set_error",CALANDER_CLOCK_SET_FAIL:"calander_clock_set_fail",CALANDER_CLOCK_SET_SUCCESS:"calander_clock_set_success"},TRANS_OPEN_ACCOUNT_STATISTIC:{ENTER_PAGE_OPEN_ACCOUNT_PAGE:"enter_page_open_account_page",INPUT_CMB_CARD:"input_cmb_card",CLICK_CHANGE_CARD_IN_OPEN_ACCOUNT_PAGE:"click_change_card_in_open_account_page",CLICK_NEXT_STEP_IN_OPEN_ACCOUNT_PAGE:"click_next_step_in_open_account_page",CLICK_DIALOG_CANCEL_WHEN_OPEN_ACCOUNT:"click_dialog_cancel_when_open_account",CLICK_DIALOG_CONTINUE_WHEN_OPEN_ACCOUNT:"click_dialog_continue_when_open_account",ENTER_PAGE_OPEN_ACCOUNT_SUCC:"enter_page_open_account_succ",CLICK_BACK_HOME_IN_SUCC_PAGE:"click_back_home_in_succ_page",CLICK_USE_OTHER_BANK_CARD_IN_SUCC_PAGE:"click_user_other_bank_card_in_succ_page",HOME_DIALOG_SHOW:"home_dialog_show",CLICK_CANCEL_IN_HOME_DIALOG:"click_cancel_in_home_dialog",CLICK_CONFIRM_IN_HOME_DIALOG:"click_confirm_in_home_dialog",ENTER_BIND_CARD_PAGE:"enter_bind_card_page",INPUT_CMB_CARD_IN_BIND_CARD_PAGE:"input_cmb_card_in_bind_card_page",CLICK_CHANGE_CARD_IN_BIND_CARD_PAGE:"click_change_card_in_bind_card_page",CLICK_NEXT_STEP_IN_BIND_CARD_PAGE:"click_next_step_in_promopt_page",CLICK_DIALOG_CONFIRM_IN_BIND_CARD_PAGE:"click_dialog_confirm_in_bind_card_page",CLICK_DIALOG_CANCEL_IN_BIND_CARD_PAGE:"click_dialog_cancel_in_bind_card_page",ENTER_PAGE_PROMOPT_PAGE:"enter_page_promopt_page",CLICK_CLOSE_IN_PROMOPT_PAGE:"click_close_in_promopt_page",CLICK_USE_OTHER_BANK_CARD_IN_PROMOPT_PAGE:"click_use_other_bank_card_in_promopt_page"},SAFE_OPEN_ACCOUNT_STATISTIC:{CLICK_NEXT_STEP:"click_next_step",HIT_UNSAFE_ACCOUNT:"hit_unsafe_account",CLICK_CHECK_FACE:"click_check_face",CLICK_STOP_REG:"click_stop_reg",CHECK_FACE_SUCCESS:"check_face_success",CHECK_FACE_FAILURE:"check_face_failure",CHECK_FACE_CANCEL:"check_face_cancel",REG_SUCCESS:"reg_success"},REG_BIND_CARD_STATISTIC:{CLICK_INPUT:"click_input",PV_REG:"pv_reg",CLICK_BACK_ON_REGISTER:"click_back_on_register",REG_CLICK_GET_OTP_BTN:"reg_click_get_otp_btn",REG_CLICK_NEXT_BTN:"reg_click_next_btn",PRE_CHECK_SUCCESS:"pre_check_pass",PRE_CHECK_FAIL:"pre_check_fail",REQ_AGAIN_DURING_PICKING:"req_again_during_picking",QUERY_PICK_FAILED:"query_pick_failed",FINISH_SETTING_PWD:"finish_setting_pwd",REG_CLICK_CLOSE_PWD:"reg_click_close_pwd",REG_CLICK_CHECK_FACE:"reg_click_check_face",REG_CHECK_FACE_SUCCESS:"reg_check_face_success",REG_CHECK_FACE_FAIL:"reg_check_face_fail",REG_CHECK_FACE_CANCEL:"reg_check_face_cancel",PV_BIND_CARD:"pv_bind_card",BIND_CLICK_NEXT_STEP:"bind_click_next_step",PV_REG_RESULT:"pv_reg_result",REG_CLICK_AGREEMENT:"reg_click_agreement",REG_CLICK_CANCEL_AGREEMENT:"reg_click_cancel_agreement",REG_CLICK_VIEW_AGREEMENT:"reg_click_view_agreement",REG_CLICK_VIEW_AGREEMENT_WEPAY:"reg_click_view_agreement_wepay",REG_CLICK_NEXT_BTN:"reg_click_next_btn",REG_INVALID_NAME:"reg_invalid_name",REG_INVALID_ID_CARD:"reg_invalid_id_card",REG_INVALID_PHONE:"reg_invalid_phone",REG_INVALID_OTP:"reg_invalid_OTP",REG_WEAK_PWD:"reg_weak_pwd",REG_PWD_NOT_MATCH:"reg_pwd_not_match",REG_CLICK_CLOSE_LAST_STEP_DLG:"reg_click_close_last_step_dlg",REG_CLICK_CONFIRM_CLOSE_LAST_STEP_DLG:"reg_click_confirm_close_last_step_dlg",REG_CLICK_CANCEL_CLOSE_LAST_STEP_DLG:"reg_click_cancel_close_last_step_dlg",REG_CLICK_FINISH:"reg_click_finish",REG_PICK_FROM_FACE_FAILED_CLICK_FINISH:"reg_pick_from_face_failed_click_finish",REG_CLICK_FINISH_AND_BIND_CARD:"reg_click_finish_and_bind_card",REG_CLICK_SUPPORTED_BANK:"reg_click_supported_bank",BIND_INVALID_CARD_NO:"bind_invalid_card_no",BIND_CLICK_BANK_INTRO:"bind_click_bank_intro",BIND_CLICK_CHANGE_CARD:"bind_click_change_card",BIND_CLICK_VIEW_AGREEMENT:"bind_click_view_agreement",BIND_CLICK_AGREEMENT:"bind_click_agreement",BIND_CLICK_CANCEL_AGREEMENT:"bind_click_cancel_agreement",BIND_CLICK_CONFIRM_CHECK_FACE:"bind_click_confirm_check_face",BIND_CLICK_CANCEL_CHECK_FACE:"bind_click_cancel_check_face",BIND_CLICK_CONFIRM_REGISTER:"bind_click_confirm_register",BIND_CLICK_CANCEL_REGISTER:"bind_click_cancel_register",BIND_RESULT_CLICK_FINISH:"bind_result_click_finish",BIND_RESULT_CLICK_COPY_CARD:"bind_result_click_copy_card",BIND_RESULT_CLICK_HOW_TO_TRANS:"bind_result_click_how_to_trans",VIEW_CARD_INFO:"view_card_info",VIEW_CARD_INFO_CLICK_MORE:"view_card_info_click_more",VIEW_CARD_INFO_CLICK_UNBIND:"view_card_info_click_unbind",VIEW_CARD_INFO_CLICK_COPY:"view_card_info_click_copy",VIEW_CARD_INFO_CLICK_TRANS_INTRO:"view_card_info_click_trans_intro"},INVITE_STATISTIC:{MAIN_KEY:"qr_invite",CLK_SHOW_QR_DLG:"clk_show_qr_dlg_",CLK_CLOSE_QR_DLG:"clk_close_qr_dlg_",CLK_SHARE:"clk_share_",CLK_BACK:"clk_back",SHARE_SUCCESS:"share_success",SHARE_FAIL:"share_fail",REG_SHOW_INVITER:"reg_show_inviter"},PICK_FROM_FACE_FAILED_STATISTIC:{MAIN_KEY:"pick_from_face_failed",PV_FACE_FAIL_WITH_PICK_RIGHT:"pv_face_fail_with_pick_right_",CLK_PICK_RIGHT:"clk_pick_right_",CLK_CLOSE_ON_PICK_RIGHT_RESULT:"clk_close_on_pick_right_result_"},START_APP_STATISTIC:{H5_INIT_TIME:"h5_init_time",APPCONFIG_INIT_TIME:"appconfig_init_time",INITCONTROLLER_INIT_TIME:"initcontroller_init_time",GET_WEBANKTOKEN_TIME:"get_webanktoken_time",GET_HANDPASS_TIME:"get_handpass_time",START_HANDPASS:"start_handpassview_time"},WEPAY_STATISTIC:{WEPAY_BIND_POP_SHOW:"wepay_bind_pop_show",WEPAY_BIND_POP_CLICK_WX:"wepay_bind_pop_click_wx",WEPAY_BIND_POP_CLICK_QQ:"wepay_bind_pop_click_qq",WEPAY_BIND_POP_CLICK_CLOSE:"wepay_bind_pop_click_close",WEPAY_OPEN_POP_SHOW:"wepay_open_pop_show",WEPAY_OPEN_POP_CLICK_MORE:"wepay_open_pop_click_more",WEPAY_OPEN_POP_CLICK_OPEN:"wepay_open_pop_click_open",WEPAY_OPEN_POP_CLICK_CLOSE:"wepay_open_pop_click_close",WEPAY_CLOSED_CLICK_OPEN:"wepay_closed_click_open",WEPAY_CLOSED_CLICK_FAQ:"wepay_closed_click_faq",WEPAY_RESULT_CLICK_WX:"wepay_result_click_wx",WEPAY_RESULT_CLICK_QQ:"wepay_result_click_qq",WEPAY_RESULT_CLICK_BINDTIP:"wepay_result_click_bindtip",WEPAY_RESULT_CLICK_FAQ:"wepay_result_click_faq",WEPAY_UNBIND_CLICK_WX:"wepay_unbind_click_wx",WEPAY_UNBIND_CLICK_QQ:"wepay_unbind_click_qq",WEPAY_UNBIND_CLICK_BINDTIP:"wepay_unbind_click_bindtip",WEPAY_UNBIND_CLICK_FAQ:"wepay_unbind_click_faq",WEPAY_UNBIND_CLICK_MENU:"wepay_unbind_click_menu",WEPAY_UNBIND_CLICK_MENU_CLOSE:"wepay_unbind_click_menu_close",WEPAY_UNBIND_CLICK_MENU_CLOSEPOP_YES:"wepay_unbind_click_menu_closepop_yes",WEPAY_BIND_CLICK_MENU:"wepay_bind_click_menu",WEPAY_BIND_CLICK_MENU_CLOSE:"wepay_bind_click_menu_close",WEPAY_BIND_CLICK_MENU_CLOSEPOP_YES:"wepay_bind_click_menu_closepop_yes",WEPAY_CLICK_STARTWX:"wepay_click_startwx",WEPAY_CLICK_STARTQQ:"wepay_click_startqq"},HANDPASS_TYPE:{OLD:0,NEW:1},USER_PROTOCOL_VER:{WTKK_VER:"00000001",KH_VER:"00000001"},STAT_CONST:{LOGIC_FAILURE_RESULT_TYPE:"LOGIC_FAILURE",FAILURE_RESULT_TYPE:"FAILURE",SUCCESS_RESULT_TYPE:"SUCCESS"},LOGIN_ERR:{LOGIN_ERR_UNKNOWN:-1,LOGIN_ERR_CODEERROR:-2,LOGIN_ERR_NOTEXIST:-3,LOGIN_ERR_MATCHERROR:-4,LOGIN_ERR_CANTLOGIN:-11},LOGIN_OTP_ERR:{OTP_ERR_FAILERROR:-1,OTP_ERR_UNKNOWMUSER:-2,OTP_ERR_BIZERROR:-3},DONATE_PLAN_TYPE:{NONE:"0",FEN:"1",JIAO:"2",YUAN:"3"},DONATE_PLAN_ACTIVITYID:{MFWC:0},DONATE_PLAN_STATUS:{RUN:1,STOP:-1},AD_BANNER_ID:{HOME:1,FIN_RECOM:2},ANDROID_NATIVE_JUMP_FROM:{XG:"XG_JUMP",URLSCHEME:"URLSCHEME_JUMP",WEBVIEW_JUMP:"WEBVIEW_JUMP"},IOS_NATIVE_JUMP_FROM:{XG_LAUNCH:"XG_JUMP_LAUNCH",XG_REMOTE:"XG_JUMP_REMOTE",URLSCHEME_LAUNCH:"URLSCHEME_JUMP_LAUNCH",URLSCHEME_REMOTE:"URLSCHEME_JUMP_REMOTE",WEBVIEW_JUMP:"WEBVIEW_JUMP"},JUMP_APP_DEPENDS_STATE:{APP_INIT:"APP_INIT",WEBANK_TOKEN:"WEBANK_TOKEN",HAND_PASS:"HAND_PASS",HOME_DATA:"HOME_DATA",DEFAULT_DATA:"DEFAULT_DATA"},JUMP_APP_SUB_TYPE:{DEPENDS_NONE:"1",DEPENDS_TOKEN:"2"},JUMP_APP_MODULE_TYPE:{MODULE_WEBVIEW:"1",MODULE_PROD_DETAIL:"2",MODULE_APP_NORMALPAGE:"3"},INSURANCE_PRODUCT_STATUS:{HOLD:0,CONFIRMING:1,REDEEMING:2},INSURANCE_WNX_STATUS:{HOLD:0,CONFIRMING:1,REDEEMING:3,PART_REDEEM:4},STOCK_PRODUCT_STATUS:{HOLD:0,CONFIRMING:1,REDEEMING:2},FINANCIAL_PRODUCT_SORT:{HOLD:30,CONFIRMING:10,REDEEMING:20,WNX_HOLD:31,WNX_CONFIRMING:11,WNX_REDEEMING:21,HOLD_HEAVY:1,REDEEMING_HEAVY:100,CONFIRMING_HEAVY:1e4,INIT_HEAVY:0,TPLUSONE:-1},PWD_INPUT_STYLE:{STYLE_SET_PWD:"set",STYLE_VERIFY:"verify"},CHECK_FACE_SCENE_ID:{OPEN_ACCOUNT:"00001",TRANSFER:"00002",MODIFY_TEL:"00003",RESET_PWD:"00004",MODIFY_PWD:"00005",LOSS_REPORT:"00006",CANCEL_LOSS_REPORT:"00007",UNBIND_CARD:"00008",ACTIVE_58:"00009",CLOSE_ACCOUNT:"00010",BIND_CARD:"00011",ACTIVE_STRONG_ACCOUT:"00012",WE_PAY:"00013",MODIFY_TRANSFER_LIMIT:"00014",UNION_ACCOUNT:"00016"},SHEET_STATUS:{CLICK_CANCEL:1,CLICK_DONE:2,CLICK_HIDE:0},REG_CARD_STATE:{INVALID:0,VALID:1},BIND_CARD_STATE:{INVALID:0,VALID:1},GRAY_BIZ_ID:{FINANCIAL_HOME:1,CGI_DEBUG:2,REG_BIND_CARD:4,FINANCIAL_CALENDAR:6,ASSET_MANAGE:7,INVESTMENT_GOLD:8},QILU_REDEEM_TYPE:{ALL_REDEEM:10,ALL_RENEW:11,PART_REDEEM:12,ALL_RENEW_HEAD:101,PART_REDEEM_HEAD:102,ALL_REDEEM_HEAD:100},REDEEM_TYPE:{NONE:"",WEBANK:"01",HJ:"02",NEXT:"03",PART_WEBANK:"04",PART_HJ:"05"},GLOBAL_EVENT:{EXCHANGE_TOKEN_SUCCESS_AFTER_RESUME:"ExchangeTokenSuccessAfterResume"},RISK_STATUS:{CLICK_MORE_PRODUCT:1,CLICK_BACK:2,CLICK_SUBMIT:3},TRANS_OTP_SCENE:{TRANS_OUT:1,PLAN:2},FACE_CHECK_STATE:{PASS:1,REFUSE:2,CHECKING:0},FACE_CHECK_EXAMINE_TYPE:{OTHER:0,PICK_RIGHT_IN_WRONG:1,PICK_WRONG_IN_RIGHT:2},SECURITY_SCAN:{ENABLE_KEY:"security_scan_enable",LAST_SCAN_TIME:"last_scan_time"},FINANCIAL_PROD_TYPE:{MONETARY:0,FIXED_TIME:1,STOCK:2,SHORT_TERM:3,GOLD_CURRENT:5,GOLD_FIXED_TIME:6},DISPLAY_AREA_TYPE:{FINANCIAL_HOME:100,FINANCIAL_PREDICT:101,INVESTMENT_HOME:200,INVESTMENT_PLATES:210,INVESTMENT_STARS:220,INVESTMENT_GOLD:230},FINANCIAL_TEMPLATE:{DEFAULT:0,T_PLUS_ONE:1,UNIVERSIAL:2},IN_TRANS_QUERY_TYPE:{PURCHASE:"0",REDEEM:"1",FORCE_REDEEM:"4",MARKET_REDEEM:"3",MARKET_PURCHASE:"4"},WEPAY_STATE:{CLOSED:1,OPENED:2,UNBIND:3},WEPAY_SECURITY_STATE:{PASS:0,FORBID:1,CHECKFACE:3},WEPAY_PAYMENT_STATUS:{DEFAULT_0:"0",PAYMENT_CLOSED_1:"1",PAYMENT_WEBANK_FUND_2:"2",PAYMENT_WEBANK_3:"3"},WEPAY_BIND_STATUS:{NOT_OPENED:"-1",INIT_0:"0",SIGNING_1:"1",SIGN_SUCC_2:"2",RELIEVE_3:"3",RESIGINING_4:"4"},SECURITY_CK_CMD:{CONSUMER_PAYMENT_OPEN:"1023"},TPLUS1_TPLT:{ZAX:"ZAX",TLX:"TLX",TPDX:"4"},WEEKEY_YW_DESC:["Sun","Mon","Tues","Wed","Thur","Fri","Sat"],WEEKEY_ZW_DESC:["日","一","二","三","四","五","六"],WEEKEY_LG_ZW_DESC:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],LOCATION_BACK_PATH:{GO_TRANS_RECORD:["home","homeNeedRefresh","financialRecommend","investmentHome","investmentStock","financialHome","transHome","transHomeWithParam","myFinancialInsurance","myFinancialShortPeroid","myFinancialStock","webankCard"],BACKTO_FINANCIAL_DETAIL:["home","homeNeedRefresh","financialRecommend","financialRecommendGJMore","investmentHome","investmentStock","stockClassification","financialHome","financialHomeMore"],BACKTO_MY_FINANCIAL_PAGE:["home","homeNeedRefresh","financialRecommend","investmentHome","financialHome"],BACKTO_MY_FINANCIAL_DETAIL:["home","homeNeedRefresh","myFinancialInsurance","myFinancialShortPeroid","myFinancialStock","financialRecommend","financialHome"],BACKTO_STOCK_AFTER_LOGIN_OR_REGISTER:["home","homeNeedRefresh","financialRecommend","financialRecommendGJMore","investmentHome","investmentStock","stockClassification","financialHome","financialHomeMore"],BACKTO_INSURANCE_AFTER_LOGIN_OR_REGISTER:["home","homeNeedRefresh","financialRecommend","financialRecommendGJMore","financialRecommendDQMore","financialRecommendShortMore","investmentHome","investmentStock","stockClassification","financialHome","financialHomeMore"],BACKTO_MY_FINANCIAL_LIST_PAGE:["home","homeNeedRefresh","myFinancialInsurance","myFinancialShortPeroid","myFinancialStock"],BACKTO_MY_STOCK_DETAIL_PAGE:["home","homeNeedRefresh","myFinancialStock","stockMyProductDetailOnSaleCode"]}});var gBankLimitList=[],gBankLimit={},getBankLimit=function(){for(var i=0;i<gBankLimitList.length;++i){var t={};t.perOne=gBankLimitList[i].perOne,t.perDay=gBankLimitList[i].perDay,gBankLimit[gBankLimitList[i].cardBin]=t}};var STRING_TABLE={NOT_IMPL_YET:"功能尚未实现，敬请期待",CANCEL_TRANS_IN_PLAN_FAILED:"对不起，取消转入计划失败。",CANCEL_TRANS_OUT_PLAN_FAILED:"对不起，取消转出计划失败。",REMAINS_THIS_PERIOD:"本期剩余",DAY_OF_AMOUNT:"天",BEGIN_TO_BENEFIT:"开始获得收益",BEGIN_TO_LOGIN:"坐好，开始登录，一起发财一起飞!",BEGIN_TO_OPENACCOUNT:"想要赚钱，先来开户!",GO:"走起",DAY:"日",MONTH:"月",YEAR:"年",PLEASE_CHECK_AGREE_USER_PROTOCOL:"请勾选协议",PLEASE_CHECK_SELECT_PAYACCOUNT:"请选择付款账户",INVALID_PHONE_NO:"请使用真实电话，方便接收正确验证码",INVALID_CARD_NO:"请输入正确的银行卡号",INVALID_USER_NAME:"请输入正确的姓名",INVALID_OTP:"验证码不正确",NAME_CANNOT_EMPTY:"姓名不能为空",PASSWORD_TOO_WEAK:"密码强度太弱",PASSWORD_NOT_AVAILABLE:"请设置6位数字密码",PASSWORD_NOT_MATCH_TWO_TIMES:"两次密码输入不一致。",PASSWORD_SAME_OLD:"与原交易密码一样，请重新输入",REQUEST_OTP_FAILED:"请求短信验证码失败，请重试。",INVALID_TRANS_AMOUNT:"请输入有效金额",PLEASE_SELECT_TRANS_WAY:"请选择转账方式。",PLEASE_SELECT_REDEEM_WAY:"请选择赎回到您的哪个账户",PLEASE_INPUT_TRANS_DETAILS:"请输入转账备注。",BIND_CARD_SUCCESS:"绑定银行卡成功。",DEFAULT_ERR_DESC:"网络不给力，请稍后再试。",NO_RECOM_PRODUCT:"很遗憾，当前无可购理财产品",INCORRECT_BANK_CARD_NO:"银行卡号不正确",CREDIT_CARD_NOT_SUPPORT:"暂时不支持信用卡",TOO_MACH_MONEY:"土豪，钱太多了，你是在跟我开玩笑吧",INVALID_PLAN_DATE:"定期计划请选择每月1～28日",INVALIDE_PLAN_DATE:"请选择日期",INVALID_SELECT:"请选择一个选项",WEBANK_CARD:"微众银行卡",INSUFF_ACCOUNT_BALANCE:"余额不足",CHOOSE_REDEEM_DEST:"请选择取出至",CHOOSE_REDEEM_DEST2:"请选择赎回至",CHOOSE_PAY_WAY:"请选择支付方式",INVALID_FREQUENCY:"请选择计划频率",INVALID_DATE:"请选择日期",WEBANK_CARD_NOT_ENOUGH_BALANCE:"微众银行卡余额不足，请使用其它银行卡支付",HJ_MIN_REDEEM_PROMOPT:"最少取出0.01元",PLAN_NOT_MODIFIED:"计划没有修改",WEBANK_CARD_DESC:"微众卡",WELCOME_VERSION:0,NETWORK_ERROR:"网络不给力，请稍后重试",PLEASE_SELECT_PURCHASE_FREQUENCY:"请先选择频率",INVALID_RECV_ACCOUNT:"请选择收款账户",INVALID_PAY_ACCOUNT:"请选择付款账户",INVALID_RECV_AND_PAY_ACCOUNT:"请选择收款和付款账户",PLEASE_INPUT_PLAN_NAME:"请输入计划名称",PLEASE_COMMIT_AFTER_MODIFY:"请修改后再保存",AMOUNT_EXCEED_LIMIT:"超出银行卡限额",AMOUNT_EXCEED_OUT_LIMIT:"输入金额超过最大转出额",RECV_ACCOUNT_NOT_SUPPORTED:"暂不支持转账至该银行",ASSET_EXPLANATION:"总资产 =（微众卡 余额）+（活期+ 余额）+（短期+ 理财总额）+（定期+ 理财总额）+（基金 持有市值）；<br>其中到期兑付的产品到期前预估收益不计入总资产，以最终的收益为准。",TOTAL_ASSET:"总资产",DONATE_NO_HJ_ACCOUNT:"暂时未找到您的活期+账户",DONATE_SAME_SELECTION:"请修改设置后再提交",DONATE_PLEASE_SELECT_AGREEMENT:"请先勾选协议",BIND_BANK_CARD_LIMIT_TEXT:"由于合作渠道原因，该银行的卡需要通过汇款进行绑定，建议更换其他银行的卡。",CHANGE_BANK_CARD:"更换其他卡",DONT_CHANGE_CARD:"继续绑定",SAVE_INSURANCE_PRE_BUY_INFO_FAIL:"保存信息失败,请重试"},gProductArr=["低","较低","中等","较高","高"],gRiskArr=["保守型","谨慎型","稳健型","进取型","激进型"];var gHolidayList=[],gHolidayDateList=[],getHolidayDate=function(){for(var l=0;l<gHolidayList.length;++l){var i={},d=gHolidayList[l].start,e=gHolidayList[l].end;i.start=new Date(parseInt(d.substring(0,4),10),parseInt(d.substring(4,6),10)-1,parseInt(d.substring(6,8),10),0,0,0),i.end=new Date(parseInt(e.substring(0,4),10),parseInt(e.substring(4,6),10)-1,parseInt(e.substring(6,8),10),23,59,59),gHolidayDateList.push(i)}},gGoldPickupAddr=[],gGoldPickupResultObj={},gGoldPickupSelectObj={},gGoldPickupSelectArray=[],parseGoldPickupAddr=function(){if(gGoldPickupResultObj={},gGoldPickupAddr&&gGoldPickupAddr.l)for(var l in gGoldPickupAddr.l){var i,d=gGoldPickupAddr.l[l],e=d.p+"省"+d.c+"市";gGoldPickupResultObj[e]?i=gGoldPickupResultObj[e]:(i=[],gGoldPickupResultObj[e]=i),i.push(d)}parseGoldPickupSelectData()},parseGoldPickupSelectData=function(){if(gGoldPickupSelectObj={},gGoldPickupSelectArray=[],gGoldPickupAddr&&gGoldPickupAddr.l){for(var l in gGoldPickupAddr.l){var i=gGoldPickupAddr.l[l],d=gGoldPickupSelectObj[i.p];if(d){var e=!1;for(var r in d.sub)d.sub[r].name==i.c&&(e=!0);if(!e){var t={};t.name=i.c,d.sub.push(t)}}else{d={},d.name=i.p,d.sub=[];var t={};t.name=i.c,d.sub.push(t),gGoldPickupSelectObj[i.p]=d}}for(var l in gGoldPickupSelectObj)gGoldPickupSelectArray.push(gGoldPickupSelectObj[l])}};gDistrictInfo=[[{id:"110000",name:"北京",fullname:"北京市",pinyin:["bei","jing"],location:{lat:39.90469,lng:116.40717},cidx:[0,15]},{id:"120000",name:"天津",fullname:"天津市",pinyin:["tian","jin"],location:{lat:39.0851,lng:117.19937},cidx:[16,31]},{id:"130000",name:"河北",fullname:"河北省",pinyin:["he","bei"],location:{lat:36.85383,lng:113.75434},cidx:[32,42]},{id:"140000",name:"山西",fullname:"山西省",pinyin:["shan","xi"],location:{lat:37.87343,lng:112.56272},cidx:[43,53]},{id:"150000",name:"内蒙古",fullname:"内蒙古自治区",pinyin:["nei","meng","gu"],location:{lat:40.81733,lng:111.76522},cidx:[54,65]},{id:"210000",name:"辽宁",fullname:"辽宁省",pinyin:["liao","ning"],location:{lat:41.83565,lng:123.42925},cidx:[66,79]},{id:"220000",name:"吉林",fullname:"吉林省",pinyin:["ji","lin"],location:{lat:43.89616,lng:125.3268},cidx:[80,88]},{id:"230000",name:"黑龙江",fullname:"黑龙江省",pinyin:["hei","long","jiang"],location:{lat:45.74208,lng:126.66285},cidx:[89,101]},{id:"310000",name:"上海",fullname:"上海市",pinyin:["shang","hai"],location:{lat:31.23037,lng:121.4737},cidx:[102,118]},{id:"320000",name:"江苏",fullname:"江苏省",pinyin:["jiang","su"],location:{lat:34.89558,lng:119.33591},cidx:[119,131]},{id:"330000",name:"浙江",fullname:"浙江省",pinyin:["zhe","jiang"],location:{lat:30.26555,lng:120.1536},cidx:[132,142]},{id:"340000",name:"安徽",fullname:"安徽省",pinyin:["an","hui"],location:{lat:31.86157,lng:117.28565},cidx:[143,158]},{id:"350000",name:"福建",fullname:"福建省",pinyin:["fu","jian"],location:{lat:26.09982,lng:119.29659},cidx:[159,167]},{id:"360000",name:"江西",fullname:"江西省",pinyin:["jiang","xi"],location:{lat:28.67417,lng:115.91004},cidx:[168,178]},{id:"370000",name:"山东",fullname:"山东省",pinyin:["shan","dong"],location:{lat:36.66825,lng:117.02058},cidx:[179,195]},{id:"410000",name:"河南",fullname:"河南省",pinyin:["he","nan"],location:{lat:33.99413,lng:115.98017},cidx:[196,213]},{id:"420000",name:"湖北",fullname:"湖北省",pinyin:["hu","bei"],location:{lat:30.54539,lng:114.34234},cidx:[214,230]},{id:"430000",name:"湖南",fullname:"湖南省",pinyin:["hu","nan"],location:{lat:28.11263,lng:112.98338},cidx:[231,244]},{id:"440000",name:"广东",fullname:"广东省",pinyin:["guang","dong"],location:{lat:23.13171,lng:113.26627},cidx:[245,265]},{id:"450000",name:"广西",fullname:"广西壮族自治区",pinyin:["guang","xi"],location:{lat:22.81521,lng:108.32754},cidx:[266,279]},{id:"460000",name:"海南",fullname:"海南省",pinyin:["hai","nan"],location:{lat:15.04614,lng:117.79565},cidx:[280,298]},{id:"500000",name:"重庆",fullname:"重庆市",pinyin:["chong","qing"],location:{lat:29.56471,lng:106.55073},cidx:[299,336]},{id:"510000",name:"四川",fullname:"四川省",pinyin:["si","chuan"],location:{lat:30.65088,lng:104.07572},cidx:[337,357]},{id:"520000",name:"贵州",fullname:"贵州省",pinyin:["gui","zhou"],location:{lat:25.52073,lng:108.30328},cidx:[358,366]},{id:"530000",name:"云南",fullname:"云南省",pinyin:["yun","nan"],location:{lat:25.0453,lng:102.70973},cidx:[367,382]},{id:"540000",name:"西藏",fullname:"西藏自治区",pinyin:["xi","zang"],location:{lat:29.64725,lng:91.11748},cidx:[383,389]},{id:"610000",name:"陕西",fullname:"陕西省",pinyin:["shan","xi"],location:{lat:34.26486,lng:108.95424},cidx:[390,399]},{id:"620000",name:"甘肃",fullname:"甘肃省",pinyin:["gan","su"],location:{lat:36.05942,lng:103.82634},cidx:[400,413]},{id:"630000",name:"青海",fullname:"青海省",pinyin:["qing","hai"],location:{lat:36.62087,lng:101.78011},cidx:[414,421]},{id:"640000",name:"宁夏",fullname:"宁夏回族自治区",pinyin:["ning","xia"],location:{lat:38.3389,lng:106.48092},cidx:[422,426]},{id:"650000",name:"新疆",fullname:"新疆维吾尔自治区",pinyin:["xin","jiang"],location:{lat:43.79343,lng:87.6271},cidx:[427,444]}],[{id:"110101",fullname:"东城区",location:{lat:39.92855,lng:116.41637}},{id:"110102",fullname:"西城区",location:{lat:39.91231,lng:116.36611}},{id:"110105",fullname:"朝阳区",location:{lat:39.80956,lng:116.47433}},{id:"110106",fullname:"丰台区",location:{lat:39.85856,lng:116.28616}},{id:"110107",fullname:"石景山区",location:{lat:39.90569,lng:116.22299}},{id:"110108",fullname:"海淀区",location:{lat:39.95933,lng:116.29845}},{id:"110109",fullname:"门头沟区",location:{lat:39.94048,lng:116.10146}},{id:"110111",fullname:"房山区",location:{lat:39.74788,lng:116.14294}},{id:"110112",fullname:"通州区",location:{lat:39.90998,lng:116.65714}},{id:"110113",fullname:"顺义区",location:{lat:40.13012,lng:116.65477}},{id:"110114",fullname:"昌平区",location:{lat:40.22077,lng:116.23128}},{id:"110115",fullname:"大兴区",location:{lat:39.72684,lng:116.34159}},{id:"110116",fullname:"怀柔区",location:{lat:40.316,lng:116.63177}},{id:"110117",fullname:"平谷区",location:{lat:40.14062,lng:117.12141}},{id:"110228",fullname:"密云县",location:{lat:40.37625,lng:116.84317}},{id:"110229",fullname:"延庆县",location:{lat:40.45678,lng:115.97503}},{id:"120101",fullname:"和平区",location:{lat:39.11712,lng:117.2147}},{id:"120102",fullname:"河东区",location:{lat:39.12827,lng:117.25228}},{id:"120103",fullname:"河西区",location:{lat:39.10954,lng:117.22336}},{id:"120104",fullname:"南开区",location:{lat:39.13815,lng:117.15011}},{id:"120105",fullname:"河北区",location:{lat:39.14784,lng:117.19674}},{id:"120106",fullname:"红桥区",location:{lat:39.16734,lng:117.15161}},{id:"120110",fullname:"东丽区",location:{lat:39.08652,lng:117.31428}},{id:"120111",fullname:"西青区",location:{lat:39.14111,lng:117.00739}},{id:"120112",fullname:"津南区",location:{lat:38.9375,lng:117.3571}},{id:"120113",fullname:"北辰区",location:{lat:39.22393,lng:117.13544}},{id:"120114",fullname:"武清区",location:{lat:39.38326,lng:117.04412}},{id:"120115",fullname:"宝坻区",location:{lat:39.71755,lng:117.30983}},{id:"120116",fullname:"滨海新区",location:{lat:39.0032,lng:117.71071}},{id:"120221",fullname:"宁河县",location:{lat:39.33076,lng:117.82474}},{id:"120223",fullname:"静海县",location:{lat:38.94737,lng:116.97428}},{id:"120225",fullname:"蓟县",location:{lat:40.04577,lng:117.40829}},{id:"130100",name:"石家庄",fullname:"石家庄市",pinyin:["shi","jia","zhuang"],location:{lat:38.04276,lng:114.5143},cidx:[0,22]},{id:"130200",name:"唐山",fullname:"唐山市",pinyin:["tang","shan"],location:{lat:39.63048,lng:118.18058},cidx:[23,36]},{id:"130300",name:"秦皇岛",fullname:"秦皇岛市",pinyin:["qin","huang","dao"],location:{lat:39.93545,lng:119.59964},cidx:[37,43]},{id:"130400",name:"邯郸",fullname:"邯郸市",pinyin:["han","dan"],location:{lat:36.62556,lng:114.53918},cidx:[44,62]},{id:"130500",name:"邢台",fullname:"邢台市",pinyin:["xing","tai"],location:{lat:37.07055,lng:114.50443},cidx:[63,81]},{id:"130600",name:"保定",fullname:"保定市",pinyin:["bao","ding"],location:{lat:38.87396,lng:115.46459},cidx:[82,106]},{id:"130700",name:"张家口",fullname:"张家口市",pinyin:["zhang","jia","kou"],location:{lat:40.82444,lng:114.88755},cidx:[107,123]},{id:"130800",name:"承德",fullname:"承德市",pinyin:["cheng","de"],location:{lat:40.9515,lng:117.9634},cidx:[124,134]},{id:"130900",name:"沧州",fullname:"沧州市",pinyin:["cang","zhou"],location:{lat:38.30441,lng:116.83869},cidx:[135,150]},{id:"131000",name:"廊坊",fullname:"廊坊市",pinyin:["lang","fang"],location:{lat:39.02177,lng:116.75638},cidx:[151,160]},{id:"131100",name:"衡水",fullname:"衡水市",pinyin:["heng","shui"],location:{lat:37.73886,lng:115.67054},cidx:[161,171]},{id:"140100",name:"太原",fullname:"太原市",pinyin:["tai","yuan"],location:{lat:37.87059,lng:112.55067},cidx:[172,181]},{id:"140200",name:"大同",fullname:"大同市",pinyin:["da","tong"],location:{lat:40.07637,lng:113.30001},cidx:[182,191]},{id:"140300",name:"阳泉",fullname:"阳泉市",pinyin:["yang","quan"],location:{lat:37.85668,lng:113.58047},cidx:[192,196]},{id:"140400",name:"长治",fullname:"长治市",pinyin:["chang","zhi"],location:{lat:36.19581,lng:113.11649},cidx:[197,209]},{id:"140500",name:"晋城",fullname:"晋城市",pinyin:["jin","cheng"],location:{lat:35.49039,lng:112.85113},cidx:[210,215]},{id:"140600",name:"朔州",fullname:"朔州市",pinyin:["shuo","zhou"],location:{lat:39.33159,lng:112.43181},cidx:[216,221]},{id:"140700",name:"晋中",fullname:"晋中市",pinyin:["jin","zhong"],location:{lat:37.68702,lng:112.75278},cidx:[222,232]},{id:"140800",name:"运城",fullname:"运城市",pinyin:["yun","cheng"],location:{lat:35.02628,lng:111.00699},cidx:[233,245]},{id:"140900",name:"忻州",fullname:"忻州市",pinyin:["xin","zhou"],location:{lat:38.4167,lng:112.73418},cidx:[246,259]},{id:"141000",name:"临汾",fullname:"临汾市",pinyin:["lin","fen"],location:{lat:36.08822,lng:111.51962},cidx:[260,276]},{id:"141100",name:"吕梁",fullname:"吕梁市",pinyin:["lv","liang"],location:{lat:37.51934,lng:111.14165},cidx:[277,289]},{id:"150100",name:"呼和浩特",fullname:"呼和浩特市",pinyin:["hu","he","hao","te"],location:{lat:40.84149,lng:111.75199},cidx:[290,298]},{id:"150200",name:"包头",fullname:"包头市",pinyin:["bao","tou"],location:{lat:40.65781,lng:109.84021},cidx:[299,307]},{id:"150300",name:"乌海",fullname:"乌海市",pinyin:["wu","hai"],location:{lat:39.65384,lng:106.79546},cidx:[308,310]},{id:"150400",name:"赤峰",fullname:"赤峰市",pinyin:["chi","feng"],location:{lat:42.2586,lng:118.88894},cidx:[311,322]},{id:"150500",name:"通辽",fullname:"通辽市",pinyin:["tong","liao"],location:{lat:43.65247,lng:122.24469},cidx:[323,330]},{id:"150600",name:"鄂尔多斯",fullname:"鄂尔多斯市",pinyin:["e","er","duo","si"],location:{lat:39.60845,lng:109.78087},cidx:[331,338]},{id:"150700",name:"呼伦贝尔",fullname:"呼伦贝尔市",pinyin:["hu","lun","bei","er"],location:{lat:49.21163,lng:119.76584},cidx:[339,351]},{id:"150800",name:"巴彦淖尔",fullname:"巴彦淖尔市",pinyin:["ba","yan","nao","er"],location:{lat:40.74317,lng:107.38773},cidx:[352,358]},{id:"150900",name:"乌兰察布",fullname:"乌兰察布市",pinyin:["wu","lan","cha","bu"],location:{lat:40.99391,lng:113.13376},cidx:[359,369]},{id:"152200",name:"兴安盟",fullname:"兴安盟",pinyin:["xing","an","meng"],location:{lat:46.08208,lng:122.03818},cidx:[370,375]},{id:"152500",name:"锡林郭勒盟",fullname:"锡林郭勒盟",pinyin:["xi","lin","guo","le","meng"],location:{lat:43.9332,lng:116.04775},cidx:[376,387]},{id:"152900",name:"阿拉善盟",fullname:"阿拉善盟",pinyin:["a","la","shan","meng"],location:{lat:38.85153,lng:105.72898},cidx:[388,390]},{id:"210100",name:"沈阳",fullname:"沈阳市",pinyin:["shen","yang"],location:{lat:41.80563,lng:123.43236},cidx:[391,403]},{id:"210200",name:"大连",fullname:"大连市",pinyin:["da","lian"],location:{lat:38.91369,lng:121.61476},cidx:[404,413]},{id:"210300",name:"鞍山",fullname:"鞍山市",pinyin:["an","shan"],location:{lat:41.10777,lng:122.9946},cidx:[414,420]},{id:"210400",name:"抚顺",fullname:"抚顺市",pinyin:["fu","shun"],location:{lat:41.87971,lng:123.95722},cidx:[421,427]},{id:"210500",name:"本溪",fullname:"本溪市",pinyin:["ben","xi"],location:{lat:41.29413,lng:123.76686},cidx:[428,433]},{id:"210600",name:"丹东",fullname:"丹东市",pinyin:["dan","dong"],location:{lat:39.9998,lng:124.35601},cidx:[434,439]},{id:"210700",name:"锦州",fullname:"锦州市",pinyin:["jin","zhou"],location:{lat:41.09515,lng:121.12703},cidx:[440,446]},{id:"210800",name:"营口",fullname:"营口市",pinyin:["ying","kou"],location:{lat:40.66683,lng:122.2349},cidx:[447,452]},{id:"210900",name:"阜新",fullname:"阜新市",pinyin:["fu","xin"],location:{lat:42.02166,lng:121.67011},cidx:[453,459]},{id:"211000",name:"辽阳",fullname:"辽阳市",pinyin:["liao","yang"],location:{lat:41.26809,lng:123.23736},cidx:[460,466]},{id:"211100",name:"盘锦",fullname:"盘锦市",pinyin:["pan","jin"],location:{lat:41.11996,lng:122.07078},cidx:[467,470]},{id:"211200",name:"铁岭",fullname:"铁岭市",pinyin:["tie","ling"],location:{lat:42.2862,lng:123.84241},cidx:[471,477]},{id:"211300",name:"朝阳",fullname:"朝阳市",pinyin:["chao","yang"],location:{lat:41.57347,lng:120.4508},cidx:[478,484]},{id:"211400",name:"葫芦岛",fullname:"葫芦岛市",pinyin:["hu","lu","dao"],location:{lat:40.711,lng:120.83699},cidx:[485,490]},{id:"220100",name:"长春",fullname:"长春市",pinyin:["chang","chun"],location:{lat:43.81602,lng:125.32357},cidx:[491,500]},{id:"220200",name:"吉林",fullname:"吉林市",pinyin:["ji","lin"],location:{lat:43.83784,lng:126.54944},cidx:[501,509]},{id:"220300",name:"四平",fullname:"四平市",pinyin:["si","ping"],location:{lat:43.16646,lng:124.35036},cidx:[510,515]},{id:"220400",name:"辽源",fullname:"辽源市",pinyin:["liao","yuan"],location:{lat:42.88805,lng:125.14368},cidx:[516,519]},{id:"220500",name:"通化",fullname:"通化市",pinyin:["tong","hua"],location:{lat:41.72829,lng:125.9399},cidx:[520,526]},{id:"220600",name:"白山",fullname:"白山市",pinyin:["bai","shan"],location:{lat:41.9408,lng:126.42443},cidx:[527,532]},{id:"220700",name:"松原",fullname:"松原市",pinyin:["song","yuan"],location:{lat:45.1411,lng:124.82515},cidx:[533,537]},{id:"220800",name:"白城",fullname:"白城市",pinyin:["bai","cheng"],location:{lat:45.6196,lng:122.83871},cidx:[538,542]},{id:"222400",name:"延边",fullname:"延边朝鲜族自治州",pinyin:["yan","bian"],location:{lat:42.89119,lng:129.5091},cidx:[543,550]},{id:"230100",name:"哈尔滨",fullname:"哈尔滨市",pinyin:["ha","er","bin"],location:{lat:45.80216,lng:126.5358},cidx:[551,568]},{id:"230200",name:"齐齐哈尔",fullname:"齐齐哈尔市",pinyin:["qi","qi","ha","er"],location:{lat:47.35431,lng:123.91796},cidx:[569,584]},{id:"230300",name:"鸡西",fullname:"鸡西市",pinyin:["ji","xi"],location:{lat:45.29524,lng:130.96954},cidx:[585,593]},{id:"230400",name:"鹤岗",fullname:"鹤岗市",pinyin:["he","gang"],location:{lat:47.34989,lng:130.29785},cidx:[594,601]},{id:"230500",name:"双鸭山",fullname:"双鸭山市",pinyin:["shuang","ya","shan"],location:{lat:46.64658,lng:131.1591},cidx:[602,609]},{id:"230600",name:"大庆",fullname:"大庆市",pinyin:["da","qing"],location:{lat:46.58758,lng:125.10307},cidx:[610,618]},{id:"230700",name:"伊春",fullname:"伊春市",pinyin:["yi","chun"],location:{lat:47.72752,lng:128.84049},cidx:[619,635]},{id:"230800",name:"佳木斯",fullname:"佳木斯市",pinyin:["jia","mu","si"],location:{lat:46.80019,lng:130.3206},cidx:[636,642]},{id:"230900",name:"七台河",fullname:"七台河市",pinyin:["qi","tai","he"],location:{lat:45.77065,lng:131.00306},cidx:[643,646]},{id:"231000",name:"牡丹江",fullname:"牡丹江市",pinyin:["mu","dan","jiang"],location:{lat:44.55269,lng:129.63244},cidx:[647,656]},{id:"231100",name:"黑河",fullname:"黑河市",pinyin:["hei","he"],location:{lat:50.24523,lng:127.52852},cidx:[657,662]},{id:"231200",name:"绥化",fullname:"绥化市",pinyin:["sui","hua"],location:{lat:46.65246,lng:126.96932},cidx:[663,672]},{id:"232700",name:"大兴安岭",fullname:"大兴安岭地区",pinyin:["da","xing","an","ling"],location:{lat:51.92398,lng:124.59216},cidx:[673,675]},{id:"310101",fullname:"黄浦区",location:{lat:31.23162,lng:121.48461}},{id:"310104",fullname:"徐汇区",location:{lat:31.18826,lng:121.43687}},{id:"310105",fullname:"长宁区",location:{lat:31.22024,lng:121.42394}},{id:"310106",fullname:"静安区",location:{lat:31.22352,lng:121.45591}},{id:"310107",fullname:"普陀区",location:{lat:31.2494,lng:121.397}},{id:"310108",fullname:"闸北区",location:{lat:31.24718,lng:121.4595}},{id:"310109",fullname:"虹口区",location:{lat:31.26451,lng:121.50515}},{id:"310110",fullname:"杨浦区",location:{lat:31.25956,lng:121.52609}},{id:"310112",fullname:"闵行区",location:{lat:31.11325,lng:121.38206}},{id:"310113",fullname:"宝山区",location:{lat:31.40527,lng:121.48941}},{id:"310114",fullname:"嘉定区",location:{lat:31.37482,lng:121.26621}},{id:"310115",fullname:"浦东新区",location:{lat:31.22114,lng:121.54409}},{id:"310116",fullname:"金山区",location:{lat:30.74185,lng:121.34242}},{id:"310117",fullname:"松江区",location:{lat:31.03241,lng:121.22654}},{id:"310118",fullname:"青浦区",location:{lat:31.14979,lng:121.12426}},{id:"310120",fullname:"奉贤区",location:{lat:30.91803,lng:121.4741}},{id:"310230",fullname:"崇明县",location:{lat:31.6229,lng:121.3973}},{id:"320100",name:"南京",fullname:"南京市",pinyin:["nan","jing"],location:{lat:31.84178,lng:118.50467},cidx:[676,686]},{id:"320200",name:"无锡",fullname:"无锡市",pinyin:["wu","xi"],location:{lat:31.49099,lng:120.31237},cidx:[687,694]},{id:"320300",name:"徐州",fullname:"徐州市",pinyin:["xu","zhou"],location:{lat:34.2044,lng:117.28577},cidx:[695,704]},{id:"320400",name:"常州",fullname:"常州市",pinyin:["chang","zhou"],location:{lat:31.81072,lng:119.97365},cidx:[705,711]},{id:"320500",name:"苏州",fullname:"苏州市",pinyin:["su","zhou"],location:{lat:31.29834,lng:120.58319},cidx:[712,720]},{id:"320600",name:"南通",fullname:"南通市",pinyin:["nan","tong"],location:{lat:31.97958,lng:120.89371},cidx:[721,728]},{id:"320700",name:"连云港",fullname:"连云港市",pinyin:["lian","yun","gang"],location:{lat:34.59669,lng:119.22295},cidx:[729,734]},{id:"320800",name:"淮安",fullname:"淮安市",pinyin:["huai","an"],location:{lat:33.61016,lng:119.01595},cidx:[735,742]},{id:"320900",name:"盐城",fullname:"盐城市",pinyin:["yan","cheng"],location:{lat:33.34951,lng:120.16164},cidx:[743,751]},{id:"321000",name:"扬州",fullname:"扬州市",pinyin:["yang","zhou"],location:{lat:32.39358,lng:119.41269},cidx:[752,757]},{id:"321100",name:"镇江",fullname:"镇江市",pinyin:["zhen","jiang"],location:{lat:32.18959,lng:119.425},cidx:[758,763]},{id:"321200",name:"泰州",fullname:"泰州市",pinyin:["tai","zhou"],location:{lat:32.45546,lng:119.92554},cidx:[764,769]},{id:"321300",name:"宿迁",fullname:"宿迁市",pinyin:["su","qian"],location:{lat:33.96193,lng:118.27549},cidx:[770,774]},{id:"330100",name:"杭州",fullname:"杭州市",pinyin:["hang","zhou"],location:{lat:30.27415,lng:120.15515},cidx:[775,787]},{id:"330200",name:"宁波",fullname:"宁波市",pinyin:["ning","bo"],location:{lat:29.87386,lng:121.55027},cidx:[788,798]},{id:"330300",name:"温州",fullname:"温州市",pinyin:["wen","zhou"],location:{lat:27.99492,lng:120.69939},cidx:[799,809]},{id:"330400",name:"嘉兴",fullname:"嘉兴市",pinyin:["jia","xing"],location:{lat:30.74501,lng:120.7555},cidx:[810,816]},{id:"330500",name:"湖州",fullname:"湖州市",pinyin:["hu","zhou"],location:{lat:30.89305,lng:120.08805},cidx:[817,821]},{id:"330600",name:"绍兴",fullname:"绍兴市",pinyin:["shao","xing"],location:{lat:30.03033,lng:120.5802},cidx:[822,827]},{id:"330700",name:"金华",fullname:"金华市",pinyin:["jin","hua"],location:{lat:29.07812,lng:119.64759},cidx:[828,836]},{id:"330800",name:"衢州",fullname:"衢州市",pinyin:["qu","zhou"],location:{lat:28.93592,lng:118.87419},cidx:[837,842]},{id:"330900",name:"舟山",fullname:"舟山市",pinyin:["zhou","shan"],location:{lat:29.98539,lng:122.20778},cidx:[843,846]},{id:"331000",name:"台州",fullname:"台州市",pinyin:["tai","zhou"],location:{lat:28.65611,lng:121.42056},cidx:[847,855]},{id:"331100",name:"丽水",fullname:"丽水市",pinyin:["li","shui"],location:{lat:28.4672,lng:119.92293},cidx:[856,864]},{id:"340100",name:"合肥",fullname:"合肥市",pinyin:["he","fei"],location:{lat:31.82057,lng:117.22901},cidx:[865,873]},{id:"340200",name:"芜湖",fullname:"芜湖市",pinyin:["wu","hu"],location:{lat:31.35246,lng:118.43313},cidx:[874,881]},{id:"340300",name:"蚌埠",fullname:"蚌埠市",pinyin:["beng","bu"],location:{lat:32.91548,lng:117.38932},cidx:[882,888]},{id:"340400",name:"淮南",fullname:"淮南市",pinyin:["huai","nan"],location:{lat:32.62549,lng:116.9998},cidx:[889,894]},{id:"340500",name:"马鞍山",fullname:"马鞍山市",pinyin:["ma","an","shan"],location:{lat:31.67067,lng:118.50611},cidx:[895,899]},{id:"340600",name:"淮北",fullname:"淮北市",pinyin:["huai","bei"],location:{lat:33.67078,lng:116.92622},cidx:[900,903]},{id:"340700",name:"铜陵",fullname:"铜陵市",pinyin:["tong","ling"],location:{lat:30.90887,lng:117.7422},cidx:[904,907]},{id:"340800",name:"安庆",fullname:"安庆市",pinyin:["an","qing"],location:{lat:30.54294,lng:117.06354},cidx:[908,918]},{id:"341000",name:"黄山",fullname:"黄山市",pinyin:["huang","shan"],location:{lat:29.71517,lng:118.33866},cidx:[919,925]},{id:"341100",name:"滁州",fullname:"滁州市",pinyin:["chu","zhou"],location:{lat:32.30181,lng:118.31683},cidx:[926,933]},{id:"341200",name:"阜阳",fullname:"阜阳市",pinyin:["fu","yang"],location:{lat:32.88963,lng:115.81495},cidx:[934,941]},{id:"341300",name:"宿州",fullname:"宿州市",pinyin:["su","zhou"],location:{lat:33.64614,lng:116.96391},cidx:[942,946]},{id:"341500",name:"六安",fullname:"六安市",pinyin:["liu","an"],location:{lat:31.73488,lng:116.52324},cidx:[947,953]},{id:"341600",name:"亳州",fullname:"亳州市",pinyin:["bo","zhou"],location:{lat:33.84461,lng:115.77931},cidx:[954,957]},{id:"341700",name:"池州",fullname:"池州市",pinyin:["chi","zhou"],location:{lat:30.66469,lng:117.49142},cidx:[958,961]},{id:"341800",name:"宣城",fullname:"宣城市",pinyin:["xuan","cheng"],location:{lat:30.94078,lng:118.75866},cidx:[962,968]},{id:"350100",name:"福州",fullname:"福州市",pinyin:["fu","zhou"],location:{lat:26.07421,lng:119.29647},cidx:[969,981]},{id:"350200",name:"厦门",fullname:"厦门市",pinyin:["xia","men"],location:{lat:24.47951,lng:118.08948},cidx:[982,987]},{id:"350300",name:"莆田",fullname:"莆田市",pinyin:["pu","tian"],location:{lat:25.454,lng:119.00771},cidx:[988,992]},{id:"350400",name:"三明",fullname:"三明市",pinyin:["san","ming"],location:{lat:26.26385,lng:117.63922},cidx:[993,1004]},{id:"350500",name:"泉州",fullname:"泉州市",pinyin:["quan","zhou"],location:{lat:24.87389,lng:118.67587},cidx:[1005,1016]},{id:"350600",name:"漳州",fullname:"漳州市",pinyin:["zhang","zhou"],location:{lat:24.51347,lng:117.64725},cidx:[1017,1027]},{id:"350700",name:"南平",fullname:"南平市",pinyin:["nan","ping"],location:{lat:26.64152,lng:118.17783},cidx:[1028,1037]},{id:"350800",name:"龙岩",fullname:"龙岩市",pinyin:["long","yan"],location:{lat:25.07504,lng:117.01722},cidx:[1038,1044]},{id:"350900",name:"宁德",fullname:"宁德市",pinyin:["ning","de"],location:{lat:26.66571,lng:119.54819},cidx:[1045,1053]},{id:"360100",name:"南昌",fullname:"南昌市",pinyin:["nan","chang"],location:{lat:28.68202,lng:115.85794},cidx:[1054,1062]},{id:"360200",name:"景德镇",fullname:"景德镇市",pinyin:["jing","de","zhen"],location:{lat:29.26869,lng:117.17839},cidx:[1063,1066]},{id:"360300",name:"萍乡",fullname:"萍乡市",pinyin:["ping","xiang"],location:{lat:27.62289,lng:113.85427},cidx:[1067,1071]},{id:"360400",name:"九江",fullname:"九江市",pinyin:["jiu","jiang"],location:{lat:29.70548,lng:116.00146},cidx:[1072,1083]},{id:"360500",name:"新余",fullname:"新余市",pinyin:["xin","yu"],location:{lat:27.81776,lng:114.91713},cidx:[1084,1085]},{id:"360600",name:"鹰潭",fullname:"鹰潭市",pinyin:["ying","tan"],location:{lat:28.26019,lng:117.06919},cidx:[1086,1088]},{id:"360700",name:"赣州",fullname:"赣州市",pinyin:["gan","zhou"],location:{lat:25.83109,lng:114.93476},cidx:[1089,1106]},{id:"360800",name:"吉安",fullname:"吉安市",pinyin:["ji","an"],location:{lat:27.11382,lng:114.99376},cidx:[1107,1119]},{id:"360900",name:"宜春",fullname:"宜春市",pinyin:["yi","chun"],location:{lat:27.81443,lng:114.41612},cidx:[1120,1129]},{id:"361000",name:"抚州",fullname:"抚州市",pinyin:["fu","zhou"],location:{lat:27.94781,lng:116.35809},cidx:[1130,1140]},{id:"361100",name:"上饶",fullname:"上饶市",pinyin:["shang","rao"],location:{lat:28.45463,lng:117.94357},cidx:[1141,1152]},{id:"370100",name:"济南",fullname:"济南市",pinyin:["ji","nan"],location:{lat:36.66529,lng:116.99493},cidx:[1153,1162]},{id:"370200",name:"青岛",fullname:"青岛市",pinyin:["qing","dao"],location:{lat:36.06623,lng:120.38299},cidx:[1163,1172]},{id:"370300",name:"淄博",fullname:"淄博市",pinyin:["zi","bo"],location:{lat:36.8131,lng:118.0548},cidx:[1173,1180]},{id:"370400",name:"枣庄",fullname:"枣庄市",pinyin:["zao","zhuang"],location:{lat:34.81071,lng:117.32196},cidx:[1181,1186]},{id:"370500",name:"东营",fullname:"东营市",pinyin:["dong","ying"],location:{lat:37.43365,lng:118.67466},cidx:[1187,1191]},{id:"370600",name:"烟台",fullname:"烟台市",pinyin:["yan","tai"],location:{lat:37.46353,lng:121.44801},cidx:[1192,1203]},{id:"370700",name:"潍坊",fullname:"潍坊市",pinyin:["wei","fang"],location:{lat:36.70686,lng:119.16176},cidx:[1204,1215]},{id:"370800",name:"济宁",fullname:"济宁市",pinyin:["ji","ning"],location:{lat:35.41459,lng:116.58724},cidx:[1216,1226]},{id:"370900",name:"泰安",fullname:"泰安市",pinyin:["tai","an"],location:{lat:36.19994,lng:117.0884},cidx:[1227,1232]},{id:"371000",name:"威海",fullname:"威海市",pinyin:["wei","hai"],location:{lat:37.51348,lng:122.12171},cidx:[1233,1236]},{id:"371100",name:"日照",fullname:"日照市",pinyin:["ri","zhao"],location:{lat:35.41646,lng:119.52719},cidx:[1237,1240]},{id:"371200",name:"莱芜",fullname:"莱芜市",pinyin:["lai","wu"],location:{lat:36.21359,lng:117.67667},cidx:[1241,1242]},{id:"371300",name:"临沂",fullname:"临沂市",pinyin:["lin","yi"],location:{lat:35.10465,lng:118.35646},cidx:[1243,1254]},{id:"371400",name:"德州",fullname:"德州市",pinyin:["de","zhou"],location:{lat:37.4355,lng:116.35927},cidx:[1255,1265]},{id:"371500",name:"聊城",fullname:"聊城市",pinyin:["liao","cheng"],location:{lat:36.45702,lng:115.98549},cidx:[1266,1273]},{id:"371600",name:"滨州",fullname:"滨州市",pinyin:["bin","zhou"],location:{lat:37.38211,lng:117.97279},cidx:[1274,1280]},{id:"371700",name:"菏泽",fullname:"菏泽市",pinyin:["he","ze"],location:{lat:35.23363,lng:115.48115},cidx:[1281,1289]},{id:"410100",name:"郑州",fullname:"郑州市",pinyin:["zheng","zhou"],location:{lat:34.74725,lng:113.62493},cidx:[1290,1301]},{id:"410200",name:"开封",fullname:"开封市",pinyin:["kai","feng"],location:{lat:34.79726,lng:114.30731},cidx:[1302,1307]},{id:"410300",name:"洛阳",fullname:"洛阳市",pinyin:["luo","yang"],location:{lat:34.61812,lng:112.45361},cidx:[1308,1322]},{id:"410400",name:"平顶山",fullname:"平顶山市",pinyin:["ping","ding","shan"],location:{lat:33.76609,lng:113.19241},cidx:[1323,1332]},{id:"410500",name:"安阳",fullname:"安阳市",pinyin:["an","yang"],location:{lat:36.09771,lng:114.3931},cidx:[1333,1341]},{id:"410600",name:"鹤壁",fullname:"鹤壁市",pinyin:["he","bi"],location:{lat:35.747,lng:114.29745},cidx:[1342,1346]},{id:"410700",name:"新乡",fullname:"新乡市",pinyin:["xin","xiang"],location:{lat:35.30323,lng:113.92675},cidx:[1347,1358]},{id:"410800",name:"焦作",fullname:"焦作市",pinyin:["jiao","zuo"],location:{lat:35.21563,lng:113.24201},cidx:[1359,1368]},{id:"410900",name:"濮阳",fullname:"濮阳市",pinyin:["pu","yang"],location:{lat:35.89516,lng:115.49869},cidx:[1369,1374]},{id:"411000",name:"许昌",fullname:"许昌市",pinyin:["xu","chang"],location:{lat:34.0357,lng:113.85233},cidx:[1375,1380]},{id:"411100",name:"漯河",fullname:"漯河市",pinyin:["luo","he"],location:{lat:33.58149,lng:114.01681},cidx:[1381,1385]},{id:"411200",name:"三门峡",fullname:"三门峡市",pinyin:["san","men","xia"],location:{lat:34.77261,lng:111.2003},cidx:[1386,1391]},{id:"411300",name:"南阳",fullname:"南阳市",pinyin:["nan","yang"],location:{lat:32.99073,lng:112.52851},cidx:[1392,1404]},{id:"411400",name:"商丘",fullname:"商丘市",pinyin:["shang","qiu"],location:{lat:34.41427,lng:115.65635},cidx:[1405,1413]},{id:"411500",name:"信阳",fullname:"信阳市",pinyin:["xin","yang"],location:{lat:32.14714,lng:114.09279},cidx:[1414,1423]},{id:"411600",name:"周口",fullname:"周口市",pinyin:["zhou","kou"],location:{lat:33.62583,lng:114.69695},cidx:[1424,1433]},{id:"411700",name:"驻马店",fullname:"驻马店市",pinyin:["zhu","ma","dian"],location:{lat:33.01142,lng:114.02299},cidx:[1434,1443]},{id:"419001",fullname:"济源市",location:{lat:35.06707,lng:112.60273}},{id:"420100",name:"武汉",fullname:"武汉市",pinyin:["wu","han"],location:{lat:30.59276,lng:114.30525},cidx:[1444,1456]},{id:"420200",name:"黄石",fullname:"黄石市",pinyin:["huang","shi"],location:{lat:30.19953,lng:115.0389},cidx:[1457,1462]},{id:"420300",name:"十堰",fullname:"十堰市",pinyin:["shi","yan"],location:{lat:32.61577,lng:110.18734},cidx:[1463,1470]},{id:"420500",name:"宜昌",fullname:"宜昌市",pinyin:["yi","chang"],location:{lat:30.69186,lng:111.28642},cidx:[1471,1483]},{id:"420600",name:"襄阳",fullname:"襄阳市",pinyin:["xiang","yang"],location:{lat:32.009,lng:112.12255},cidx:[1484,1492]},{id:"420700",name:"鄂州",fullname:"鄂州市",pinyin:["e","zhou"],location:{lat:30.39085,lng:114.89495},cidx:[1493,1495]},{id:"420800",name:"荆门",fullname:"荆门市",pinyin:["jing","men"],location:{lat:31.03546,lng:112.19945},cidx:[1496,1500]},{id:"420900",name:"孝感",fullname:"孝感市",pinyin:["xiao","gan"],location:{lat:30.92483,lng:113.91645},cidx:[1501,1507]},{id:"421000",name:"荆州",fullname:"荆州市",pinyin:["jing","zhou"],location:{lat:30.33479,lng:112.24069},cidx:[1508,1515]},{id:"421100",name:"黄冈",fullname:"黄冈市",pinyin:["huang","gang"],location:{lat:30.45347,lng:114.87238},cidx:[1516,1525]},{id:"421200",name:"咸宁",fullname:"咸宁市",pinyin:["xian","ning"],location:{lat:29.84126,lng:114.32245},cidx:[1526,1531]},{id:"421300",name:"随州",fullname:"随州市",pinyin:["sui","zhou"],location:{lat:31.69013,lng:113.38262},cidx:[1532,1534]},{id:"422800",name:"恩施",fullname:"恩施土家族苗族自治州",pinyin:["en","shi"],location:{lat:30.27217,lng:109.48817},cidx:[1535,1542]},{id:"429004",fullname:"仙桃市",location:{lat:30.36251,lng:113.4545}},{id:"429005",fullname:"潜江市",location:{lat:30.40147,lng:112.8993}},{id:"429006",fullname:"天门市",location:{lat:30.66339,lng:113.16614}},{id:"429021",fullname:"神农架林区",location:{lat:31.74457,lng:110.67556}},{id:"430100",name:"长沙",fullname:"长沙市",pinyin:["chang","sha"],location:{lat:28.22778,lng:112.93886},cidx:[1543,1551]},{id:"430200",name:"株洲",fullname:"株洲市",pinyin:["zhu","zhou"],location:{lat:27.82767,lng:113.13396},cidx:[1552,1560]},{id:"430300",name:"湘潭",fullname:"湘潭市",pinyin:["xiang","tan"],location:{lat:27.82975,lng:112.94411},cidx:[1561,1565]},{id:"430400",name:"衡阳",fullname:"衡阳市",pinyin:["heng","yang"],location:{lat:26.89324,lng:112.57195},cidx:[1566,1577]},{id:"430500",name:"邵阳",fullname:"邵阳市",pinyin:["shao","yang"],location:{lat:27.2389,lng:111.4677},cidx:[1578,1589]},{id:"430600",name:"岳阳",fullname:"岳阳市",pinyin:["yue","yang"],location:{lat:29.35728,lng:113.12919},cidx:[1590,1598]},{id:"430700",name:"常德",fullname:"常德市",pinyin:["chang","de"],location:{lat:29.03158,lng:111.69854},cidx:[1599,1607]},{id:"430800",name:"张家界",fullname:"张家界市",pinyin:["zhang","jia","jie"],location:{lat:29.11667,lng:110.47839},cidx:[1608,1611]},{id:"430900",name:"益阳",fullname:"益阳市",pinyin:["yi","yang"],location:{lat:28.55391,lng:112.35516},cidx:[1612,1617]},{id:"431000",name:"郴州",fullname:"郴州市",pinyin:["chen","zhou"],location:{lat:25.77063,lng:113.01485},cidx:[1618,1628]},{id:"431100",name:"永州",fullname:"永州市",pinyin:["yong","zhou"],location:{lat:26.42034,lng:111.61225},cidx:[1629,1639]},{id:"431200",name:"怀化",fullname:"怀化市",pinyin:["huai","hua"],location:{lat:27.56974,lng:110.0016},cidx:[1640,1651]},{id:"431300",name:"娄底",fullname:"娄底市",pinyin:["lou","di"],location:{lat:27.69728,lng:111.99458},cidx:[1652,1656]},{id:"433100",name:"湘西",fullname:"湘西土家族苗族自治州",pinyin:["xiang","xi"],location:{lat:28.31173,lng:109.73893},cidx:[1657,1664]},{id:"440100",name:"广州",fullname:"广州市",pinyin:["guang","zhou"],location:{lat:23.12908,lng:113.26436},cidx:[1665,1675]},{id:"440200",name:"韶关",fullname:"韶关市",pinyin:["shao","guan"],location:{lat:24.81039,lng:113.59723},cidx:[1676,1685]},{id:"440300",name:"深圳",fullname:"深圳市",pinyin:["shen","zhen"],location:{lat:22.54286,lng:114.05956},cidx:[1686,1691]},{id:"440400",name:"珠海",fullname:"珠海市",pinyin:["zhu","hai"],location:{lat:22.27073,lng:113.57668},cidx:[1692,1694]},{id:"440500",name:"汕头",fullname:"汕头市",pinyin:["shan","tou"],location:{lat:23.3535,lng:116.68221},cidx:[1695,1701]},{id:"440600",name:"佛山",fullname:"佛山市",pinyin:["fo","shan"],location:{lat:23.02185,lng:113.12192},cidx:[1702,1706]},{id:"440700",name:"江门",fullname:"江门市",pinyin:["jiang","men"],location:{lat:22.57865,lng:113.08161},cidx:[1707,1713]},{id:"440800",name:"湛江",fullname:"湛江市",pinyin:["zhan","jiang"],location:{lat:21.27134,lng:110.35894},cidx:[1714,1722]},{id:"440900",name:"茂名",fullname:"茂名市",pinyin:["mao","ming"],location:{lat:21.66329,lng:110.92523},cidx:[1723,1727]},{id:"441200",name:"肇庆",fullname:"肇庆市",pinyin:["zhao","qing"],location:{lat:23.0469,lng:112.46528},cidx:[1728,1735]},{id:"441300",name:"惠州",fullname:"惠州市",pinyin:["hui","zhou"],location:{lat:23.11075,lng:114.41679},cidx:[1736,1740]},{id:"441400",name:"梅州",fullname:"梅州市",pinyin:["mei","zhou"],location:{lat:24.28844,lng:116.12264},cidx:[1741,1748]},{id:"441500",name:"汕尾",fullname:"汕尾市",pinyin:["shan","wei"],location:{lat:22.78566,lng:115.37514},cidx:[1749,1752]},{id:"441600",name:"河源",fullname:"河源市",pinyin:["he","yuan"],location:{lat:23.74365,lng:114.70065},cidx:[1753,1758]},{id:"441700",name:"阳江",fullname:"阳江市",pinyin:["yang","jiang"],location:{lat:21.85829,lng:111.98256},cidx:[1759,1762]},{id:"441800",name:"清远",fullname:"清远市",pinyin:["qing","yuan"],location:{lat:23.68201,lng:113.05615},cidx:[1763,1770]},{id:"441999",name:"东莞",fullname:"东莞市",pinyin:["dong","guan"],location:{lat:23.02069,lng:113.75181}},{id:"442099",name:"中山",fullname:"中山市",pinyin:["zhong","shan"],location:{lat:22.51595,lng:113.3926}},{id:"445100",name:"潮州",fullname:"潮州市",pinyin:["chao","zhou"],location:{lat:23.6567,lng:116.62296},cidx:[1771,1773]},{id:"445200",name:"揭阳",fullname:"揭阳市",pinyin:["jie","yang"],location:{lat:23.54972,lng:116.37271},cidx:[1774,1778]},{id:"445300",name:"云浮",fullname:"云浮市",pinyin:["yun","fu"],location:{lat:22.91525,lng:112.04453},cidx:[1779,1783]},{id:"450100",name:"南宁",fullname:"南宁市",pinyin:["nan","ning"],location:{lat:22.81673,lng:108.3669},cidx:[1784,1795]},{id:"450200",name:"柳州",fullname:"柳州市",pinyin:["liu","zhou"],location:{lat:24.32543,lng:109.41552},cidx:[1796,1805]},{id:"450300",name:"桂林",fullname:"桂林市",pinyin:["gui","lin"],location:{lat:25.27361,lng:110.29002},cidx:[1806,1822]},{id:"450400",name:"梧州",fullname:"梧州市",pinyin:["wu","zhou"],location:{lat:23.47703,lng:111.27913},cidx:[1823,1828]},{id:"450500",name:"北海",fullname:"北海市",pinyin:["bei","hai"],location:{lat:21.48112,lng:109.12008},cidx:[1829,1832]},{id:"450600",name:"防城港",fullname:"防城港市",pinyin:["fang","cheng","gang"],location:{lat:21.68713,lng:108.35472},cidx:[1833,1836]},{id:"450700",name:"钦州",fullname:"钦州市",pinyin:["qin","zhou"],location:{lat:21.9797,lng:108.65431},cidx:[1837,1840]},{id:"450800",name:"贵港",fullname:"贵港市",pinyin:["gui","gang"],location:{lat:23.11306,lng:109.59764},cidx:[1841,1845]},{id:"450900",name:"玉林",fullname:"玉林市",pinyin:["yu","lin"],location:{lat:22.65451,lng:110.18098},cidx:[1846,1851]},{id:"451000",name:"百色",fullname:"百色市",pinyin:["bai","se"],location:{lat:23.90216,lng:106.61838},cidx:[1852,1863]},{id:"451100",name:"贺州",fullname:"贺州市",pinyin:["he","zhou"],location:{lat:24.40346,lng:111.56655},cidx:[1864,1867]},{id:"451200",name:"河池",fullname:"河池市",pinyin:["he","chi"],location:{lat:24.69291,lng:108.0854},cidx:[1868,1878]},{id:"451300",name:"来宾",fullname:"来宾市",pinyin:["lai","bin"],location:{lat:23.7521,lng:109.22238},cidx:[1879,1884]},{id:"451400",name:"崇左",fullname:"崇左市",pinyin:["chong","zuo"],location:{lat:22.37895,lng:107.36485},cidx:[1885,1891]},{id:"460100",name:"海口",fullname:"海口市",pinyin:["hai","kou"],location:{lat:20.04422,lng:110.19989},cidx:[1892,1895]},{id:"460200",name:"三亚",fullname:"三亚市",pinyin:["san","ya"],location:{lat:18.25248,lng:109.51209},cidx:[1896,1896]},{id:"460399",name:"三沙",fullname:"三沙市",pinyin:["san","sha"],location:{lat:15.04614,lng:117.79565}},{id:"469001",fullname:"五指山市",location:{lat:18.77515,lng:109.51696}},{id:"469002",fullname:"琼海市",location:{lat:19.25838,lng:110.47464}},{id:"469003",fullname:"儋州市",location:{lat:19.52093,lng:109.58069}},{id:"469005",fullname:"文昌市",location:{lat:19.54329,lng:110.79774}},{id:"469006",fullname:"万宁市",location:{lat:18.79532,lng:110.38975}},{id:"469007",fullname:"东方市",location:{lat:19.09614,lng:108.65367}},{id:"469021",fullname:"定安县",location:{lat:19.68121,lng:110.3593}},{id:"469022",fullname:"屯昌县",location:{lat:19.35182,lng:110.10347}},{id:"469023",fullname:"澄迈县",location:{lat:19.73849,lng:110.00487}},{id:"469024",fullname:"临高县",location:{lat:19.91243,lng:109.69077}},{id:"469025",fullname:"白沙黎族自治县",location:{lat:19.22492,lng:109.45152}},{id:"469026",fullname:"昌江黎族自治县",location:{lat:19.29828,lng:109.05559}},{id:"469027",fullname:"乐东黎族自治县",location:{lat:18.74986,lng:109.17361}},{id:"469028",fullname:"陵水黎族自治县",location:{lat:18.50596,lng:110.0372}},{id:"469029",fullname:"保亭黎族苗族自治县",location:{lat:18.63905,lng:109.70259}},{id:"469030",fullname:"琼中黎族苗族自治县",location:{lat:19.03334,lng:109.83839}},{id:"500101",fullname:"万州区",location:{lat:30.8079,lng:108.40873}},{id:"500102",fullname:"涪陵区",location:{lat:29.70315,lng:107.38982}},{id:"500103",fullname:"渝中区",location:{lat:29.55314,lng:106.5686}},{id:"500104",fullname:"大渡口区",location:{lat:29.48408,lng:106.48225}},{id:"500105",fullname:"江北区",location:{lat:29.60661,lng:106.57439}},{id:"500106",fullname:"沙坪坝区",location:{lat:29.54098,lng:106.45773}},{id:"500107",fullname:"九龙坡区",location:{lat:29.50207,lng:106.5114}},{id:"500108",fullname:"南岸区",location:{lat:29.52168,lng:106.56256}},{id:"500109",fullname:"北碚区",location:{lat:29.80583,lng:106.39628}},{id:"500110",fullname:"綦江区",location:{lat:28.96463,lng:106.92852}},{id:"500111",fullname:"大足区",location:{lat:29.48604,lng:105.78017}},{id:"500112",fullname:"渝北区",location:{lat:29.71798,lng:106.63043}},{id:"500113",fullname:"巴南区",location:{lat:29.40268,lng:106.54041}},{id:"500114",fullname:"黔江区",location:{lat:29.53328,lng:108.77101}},{id:"500115",fullname:"长寿区",location:{lat:29.85781,lng:107.08105}},{id:"500116",fullname:"江津区",location:{lat:29.29014,lng:106.25936}},{id:"500117",fullname:"合川区",location:{lat:29.97288,lng:106.27679}},{id:"500118",fullname:"永川区",location:{lat:29.356,lng:105.92709}},{id:"500119",fullname:"南川区",location:{lat:29.15788,lng:107.09896}},{id:"500223",fullname:"潼南县",location:{lat:30.19054,lng:105.83952}},{id:"500224",fullname:"铜梁区",location:{lat:29.84475,lng:106.05638}},{id:"500226",fullname:"荣昌县",location:{lat:29.40485,lng:105.59444}},{id:"500227",fullname:"璧山区",location:{lat:29.59202,lng:106.22742}},{id:"500228",fullname:"梁平县",location:{lat:30.67373,lng:107.80235}},{id:"500229",fullname:"城口县",location:{lat:31.94767,lng:108.66433}},{id:"500230",fullname:"丰都县",location:{lat:29.86352,lng:107.73085}},{id:"500231",fullname:"垫江县",location:{lat:30.3268,lng:107.33515}},{id:"500232",fullname:"武隆县",location:{lat:29.32543,lng:107.75993}},{id:"500233",fullname:"忠县",location:{lat:30.30026,lng:108.03767}},{id:"500234",fullname:"开县",location:{lat:31.16098,lng:108.39311}},{id:"500235",fullname:"云阳县",location:{lat:30.93063,lng:108.69698}},{id:"500236",fullname:"奉节县",location:{lat:31.01846,lng:109.46406}},{id:"500237",fullname:"巫山县",location:{lat:31.07462,lng:109.8788}},{id:"500238",fullname:"巫溪县",location:{lat:31.3986,lng:109.57016}},{id:"500240",fullname:"石柱土家族自治县",location:{lat:29.99968,lng:108.11415}},{id:"500241",fullname:"秀山土家族苗族自治县",location:{lat:28.44832,lng:109.00714}},{id:"500242",fullname:"酉阳土家族苗族自治县",location:{lat:28.84126,lng:108.76778}},{id:"500243",fullname:"彭水苗族土家族自治县",location:{lat:29.29376,lng:108.16555}},{id:"510100",name:"成都",fullname:"成都市",pinyin:["cheng","du"],location:{lat:30.5702,lng:104.06476},cidx:[1897,1915]},{id:"510300",name:"自贡",fullname:"自贡市",pinyin:["zi","gong"],location:{lat:29.3392,lng:104.77844},cidx:[1916,1921]},{id:"510400",name:"攀枝花",fullname:"攀枝花市",pinyin:["pan","zhi","hua"],location:{lat:26.58228,lng:101.71872},cidx:[1922,1926]},{id:"510500",name:"泸州",fullname:"泸州市",pinyin:["lu","zhou"],location:{lat:28.8717,lng:105.44257},cidx:[1927,1933]},{id:"510600",name:"德阳",fullname:"德阳市",pinyin:["de","yang"],location:{lat:31.12679,lng:104.3979},cidx:[1934,1939]},{id:"510700",name:"绵阳",fullname:"绵阳市",pinyin:["mian","yang"],location:{lat:31.46751,lng:104.6796},cidx:[1940,1948]},{id:"510800",name:"广元",fullname:"广元市",pinyin:["guang","yuan"],location:{lat:32.43549,lng:105.84357},cidx:[1949,1955]},{id:"510900",name:"遂宁",fullname:"遂宁市",pinyin:["sui","ning"],location:{lat:30.53286,lng:105.59273},cidx:[1956,1960]},{id:"511000",name:"内江",fullname:"内江市",pinyin:["nei","jiang"],location:{lat:29.58015,lng:105.05844},cidx:[1961,1965]},{id:"511100",name:"乐山",fullname:"乐山市",pinyin:["le","shan"],location:{lat:29.55221,lng:103.76539},cidx:[1966,1976]},{id:"511300",name:"南充",fullname:"南充市",pinyin:["nan","chong"],location:{lat:30.83731,lng:106.11073},cidx:[1977,1985]},{id:"511400",name:"眉山",fullname:"眉山市",pinyin:["mei","shan"],location:{lat:30.07563,lng:103.84851},cidx:[1986,1991]},{id:"511500",name:"宜宾",fullname:"宜宾市",pinyin:["yi","bin"],location:{lat:28.7513,lng:104.6417},cidx:[1992,2001]},{id:"511600",name:"广安",fullname:"广安市",pinyin:["guang","an"],location:{lat:30.45596,lng:106.63322},cidx:[2002,2006]},{id:"511700",name:"达州",fullname:"达州市",pinyin:["da","zhou"],location:{lat:31.20864,lng:107.46791},cidx:[2007,2013]},{id:"511800",name:"雅安",fullname:"雅安市",pinyin:["ya","an"],location:{lat:30.01543,lng:103.0398},cidx:[2014,2021]},{id:"511900",name:"巴中",fullname:"巴中市",pinyin:["ba","zhong"],location:{lat:31.86715,lng:106.74733},cidx:[2022,2025]},{id:"512000",name:"资阳",fullname:"资阳市",pinyin:["zi","yang"],location:{lat:30.12859,lng:104.62798},cidx:[2026,2029]},{id:"513200",name:"阿坝",fullname:"阿坝藏族羌族自治州",pinyin:["a","ba"],location:{lat:31.8994,lng:102.22477},cidx:[2030,2042]},{id:"513300",name:"甘孜",fullname:"甘孜藏族自治州",pinyin:["gan","zi"],location:{lat:30.04932,lng:101.96254},cidx:[2043,2060]},{id:"513400",name:"凉山",fullname:"凉山彝族自治州",pinyin:["liang","shan"],location:{lat:27.88164,lng:102.26746},cidx:[2061,2077]},{id:"520100",name:"贵阳",fullname:"贵阳市",pinyin:["gui","yang"],location:{lat:26.64702,lng:106.63024},cidx:[2078,2086]},{id:"520200",name:"六盘水",fullname:"六盘水市",pinyin:["liu","pan","shui"],location:{lat:26.68469,lng:104.74668},cidx:[2087,2090]},{id:"520300",name:"遵义",fullname:"遵义市",pinyin:["zun","yi"],location:{lat:28.17544,lng:107.81609},cidx:[2091,2104]},{id:"520400",name:"安顺",fullname:"安顺市",pinyin:["an","shun"],location:{lat:26.25367,lng:105.9462},cidx:[2105,2110]},{id:"520500",name:"毕节",fullname:"毕节市",pinyin:["bi","jie"],location:{lat:27.29847,lng:105.30504},cidx:[2111,2118]},{id:"520600",name:"铜仁",fullname:"铜仁市",pinyin:["tong","ren"],location:{lat:27.69066,lng:109.18099},cidx:[2119,2128]},{id:"522300",name:"黔西南",fullname:"黔西南布依族苗族自治州",pinyin:["qian","xi","nan"],location:{lat:25.08988,lng:104.90437},cidx:[2129,2136]},{id:"522600",name:"黔东南",fullname:"黔东南苗族侗族自治州",pinyin:["qian","dong","nan"],location:{lat:27.14544,lng:107.94483},cidx:[2137,2152]},{id:"522700",name:"黔南",fullname:"黔南布依族苗族自治州",pinyin:["qian","nan"],location:{lat:26.25427,lng:107.52226},cidx:[2153,2164]},{id:"530100",name:"昆明",fullname:"昆明市",pinyin:["kun","ming"],location:{lat:24.87966,lng:102.83322},cidx:[2165,2178]},{id:"530300",name:"曲靖",fullname:"曲靖市",pinyin:["qu","jing"],location:{lat:25.49002,lng:103.79625},cidx:[2179,2187]},{id:"530400",name:"玉溪",fullname:"玉溪市",pinyin:["yu","xi"],location:{lat:24.35193,lng:102.5466},cidx:[2188,2196]},{id:"530500",name:"保山",fullname:"保山市",pinyin:["bao","shan"],location:{lat:25.11205,lng:99.16181},cidx:[2197,2201]},{id:"530600",name:"昭通",fullname:"昭通市",pinyin:["zhao","tong"],location:{lat:27.33817,lng:103.7168},cidx:[2202,2212]},{id:"530700",name:"丽江",fullname:"丽江市",pinyin:["li","jiang"],location:{lat:26.85648,lng:100.2271},cidx:[2213,2217]},{id:"530800",name:"普洱",fullname:"普洱市",pinyin:["pu","er"],location:{lat:22.82521,lng:100.96624},cidx:[2218,2227]},{id:"530900",name:"临沧",fullname:"临沧市",pinyin:["lin","cang"],location:{lat:23.88426,lng:100.08884},cidx:[2228,2235]},{id:"532300",name:"楚雄",fullname:"楚雄彝族自治州",pinyin:["chu","xiong"],location:{lat:25.04495,lng:101.52767},cidx:[2236,2245]},{id:"532500",name:"红河",fullname:"红河哈尼族彝族自治州",pinyin:["hong","he"],location:{lat:23.36422,lng:103.3756},cidx:[2246,2258]},{id:"532600",name:"文山",fullname:"文山壮族苗族自治州",pinyin:["wen","shan"],location:{lat:23.39849,lng:104.21504},cidx:[2259,2266]},{id:"532800",name:"西双版纳",fullname:"西双版纳傣族自治州",pinyin:["xi","shuang","ban","na"],location:{lat:22.00749,lng:100.79739},cidx:[2267,2269]},{id:"532900",name:"大理",fullname:"大理白族自治州",pinyin:["da","li"],location:{lat:25.60648,lng:100.26764},cidx:[2270,2281]},{id:"533100",name:"德宏",fullname:"德宏傣族景颇族自治州",pinyin:["de","hong"],location:{lat:24.43232,lng:98.58486},cidx:[2282,2286]},{id:"533300",name:"怒江",fullname:"怒江傈僳族自治州",pinyin:["nu","jiang"],location:{lat:25.81763,lng:98.8567},cidx:[2287,2290]},{id:"533400",name:"迪庆",fullname:"迪庆藏族自治州",pinyin:["di","qing"],location:{lat:27.81908,lng:99.70305},cidx:[2291,2293]},{id:"540100",name:"拉萨",fullname:"拉萨市",pinyin:["la","sa"],location:{lat:29.64415,lng:91.1145},cidx:[2294,2301]},{id:"542100",name:"昌都",fullname:"昌都地区",pinyin:["chang","du"],location:{lat:31.14073,lng:97.17225},cidx:[2302,2312]},{id:"542200",name:"山南",fullname:"山南地区",pinyin:["shan","nan"],location:{lat:29.23705,lng:91.77313},cidx:[2313,2324]},{id:"542300",name:"日喀则",fullname:"日喀则地区",pinyin:["ri","ka","ze"],location:{lat:29.26706,lng:88.88116},cidx:[2325,2342]},{id:"542400",name:"那曲",fullname:"那曲地区",pinyin:["na","qu"],location:{lat:31.47614,lng:92.05136},cidx:[2343,2352]},{id:"542500",name:"阿里",fullname:"阿里地区",pinyin:["a","li"],location:{lat:30.40051,lng:81.1454},cidx:[2353,2359]},{id:"542600",name:"林芝",fullname:"林芝地区",pinyin:["lin","zhi"],location:{lat:29.64895,lng:94.36155},cidx:[2360,2366]},{id:"610100",name:"西安",fullname:"西安市",pinyin:["xi","an"],location:{lat:34.34127,lng:108.93984},cidx:[2367,2379]},{id:"610200",name:"铜川",fullname:"铜川市",pinyin:["tong","chuan"],location:{lat:34.89673,lng:108.94515},cidx:[2380,2383]},{id:"610300",name:"宝鸡",fullname:"宝鸡市",pinyin:["bao","ji"],location:{lat:34.36194,lng:107.23732},cidx:[2384,2395]},{id:"610400",name:"咸阳",fullname:"咸阳市",pinyin:["xian","yang"],location:{lat:34.32932,lng:108.70929},cidx:[2396,2409]},{id:"610500",name:"渭南",fullname:"渭南市",pinyin:["wei","nan"],location:{lat:34.49997,lng:109.51015},cidx:[2410,2420]},{id:"610600",name:"延安",fullname:"延安市",pinyin:["yan","an"],location:{lat:36.58529,lng:109.48978},cidx:[2421,2433]},{id:"610700",name:"汉中",fullname:"汉中市",pinyin:["han","zhong"],location:{lat:33.06761,lng:107.02377},cidx:[2434,2444]},{id:"610800",name:"榆林",fullname:"榆林市",pinyin:["yu","lin"],location:{lat:38.2852,lng:109.73458},cidx:[2445,2456]},{id:"610900",name:"安康",fullname:"安康市",pinyin:["an","kang"],location:{lat:32.68486,lng:109.02932},cidx:[2457,2466]},{id:"611000",name:"商洛",fullname:"商洛市",pinyin:["shang","luo"],location:{lat:33.87036,lng:109.94041},cidx:[2467,2473]},{id:"620100",name:"兰州",fullname:"兰州市",pinyin:["lan","zhou"],location:{lat:36.19622,lng:103.125},cidx:[2474,2481]},{id:"620200",name:"嘉峪关",fullname:"嘉峪关市",pinyin:["jia","yu","guan"],location:{lat:39.77201,lng:98.29011},cidx:[2482,2482]},{id:"620300",name:"金昌",fullname:"金昌市",pinyin:["jin","chang"],location:{lat:38.52006,lng:102.18759},cidx:[2483,2484]},{id:"620400",name:"白银",fullname:"白银市",pinyin:["bai","yin"],location:{lat:36.5447,lng:104.13773},cidx:[2485,2489]},{id:"620500",name:"天水",fullname:"天水市",pinyin:["tian","shui"],location:{lat:34.58085,lng:105.72486},cidx:[2490,2496]},{id:"620600",name:"武威",fullname:"武威市",pinyin:["wu","wei"],location:{lat:37.9282,lng:102.63797},cidx:[2497,2500]},{id:"620700",name:"张掖",fullname:"张掖市",pinyin:["zhang","ye"],location:{lat:38.92592,lng:100.44981},cidx:[2501,2506]},{id:"620800",name:"平凉",fullname:"平凉市",pinyin:["ping","liang"],location:{lat:35.54303,lng:106.6653},cidx:[2507,2513]},{id:"620900",name:"酒泉",fullname:"酒泉市",pinyin:["jiu","quan"],location:{lat:39.73255,lng:98.49394},cidx:[2514,2520]},{id:"621000",name:"庆阳",fullname:"庆阳市",pinyin:["qing","yang"],location:{lat:35.70978,lng:107.64292},cidx:[2521,2528]},{id:"621100",name:"定西",fullname:"定西市",pinyin:["ding","xi"],location:{lat:35.58113,lng:104.62524},cidx:[2529,2535]},{id:"621200",name:"陇南",fullname:"陇南市",pinyin:["long","nan"],location:{lat:33.401,lng:104.92166},cidx:[2536,2544]},{id:"622900",name:"临夏",fullname:"临夏回族自治州",pinyin:["lin","xia"],location:{lat:35.60122,lng:103.21091},cidx:[2545,2552]},{id:"623000",name:"甘南",fullname:"甘南藏族自治州",pinyin:["gan","nan"],location:{lat:34.98327,lng:102.91102},cidx:[2553,2560]},{id:"630100",name:"西宁",fullname:"西宁市",pinyin:["xi","ning"],location:{lat:36.61729,lng:101.77782},cidx:[2561,2567]},{id:"630200",name:"海东",fullname:"海东市",pinyin:["hai","dong"],location:{lat:36.48209,lng:102.40173},cidx:[2568,2573]},{id:"632200",name:"海北",fullname:"海北藏族自治州",pinyin:["hai","bei"],location:{lat:36.95454,lng:100.90096},cidx:[2574,2577]},{id:"632300",name:"黄南",fullname:"黄南藏族自治州",pinyin:["huang","nan"],location:{lat:35.51991,lng:102.01507},cidx:[2578,2581]},{id:"632500",name:"海南",fullname:"海南藏族自治州",pinyin:["hai","nan"],location:{lat:36.28643,lng:100.62021},cidx:[2582,2586]},{id:"632600",name:"果洛",fullname:"果洛藏族自治州",pinyin:["guo","luo"],location:{lat:34.47141,lng:100.24475},cidx:[2587,2592]},{id:"632700",name:"玉树",fullname:"玉树藏族自治州",pinyin:["yu","shu"],location:{lat:33.00528,lng:97.0065},cidx:[2593,2598]},{id:"632800",name:"海西",fullname:"海西蒙古族藏族自治州",pinyin:["hai","xi"],location:{lat:33.66033,lng:90},cidx:[2599,2606]},{id:"640100",name:"银川",fullname:"银川市",pinyin:["yin","chuan"],location:{lat:38.48644,lng:106.23248},cidx:[2607,2612]},{id:"640200",name:"石嘴山",fullname:"石嘴山市",pinyin:["shi","zui","shan"],location:{lat:38.9841,lng:106.38418},cidx:[2613,2615]},{id:"640300",name:"吴忠",fullname:"吴忠市",pinyin:["wu","zhong"],location:{lat:37.99755,lng:106.19879},cidx:[2616,2620]},{id:"640400",name:"固原",fullname:"固原市",pinyin:["gu","yuan"],location:{lat:35.58333,lng:105.77999},cidx:[2621,2625]},{id:"640500",name:"中卫",fullname:"中卫市",pinyin:["zhong","wei"],location:{lat:37.50026,lng:105.19676},cidx:[2626,2628]},{id:"650100",name:"乌鲁木齐",fullname:"乌鲁木齐市",pinyin:["wu","lu","mu","qi"],location:{lat:43.82663,lng:87.61688},cidx:[2629,2636]},{id:"650200",name:"克拉玛依",fullname:"克拉玛依市",pinyin:["ke","la","ma","yi"],location:{lat:44.67762,lng:84.76297},cidx:[2637,2640]},{id:"652100",name:"吐鲁番",fullname:"吐鲁番地区",pinyin:["tu","lu","fan"],location:{lat:42.9513,lng:89.18954},cidx:[2641,2643]},{id:"652200",name:"哈密",fullname:"哈密地区",pinyin:["ha","mi"],location:{lat:42.81874,lng:93.51626},cidx:[2644,2646]},{id:"652300",name:"昌吉",fullname:"昌吉回族自治州",pinyin:["chang","ji"],location:{lat:43.1014,lng:86.6474},cidx:[2647,2653]},{id:"652700",name:"博尔塔拉",fullname:"博尔塔拉蒙古自治州",pinyin:["bo","er","ta","la"],location:{lat:44.90597,lng:82.06665},cidx:[2654,2656]},{id:"652800",name:"巴音郭楞",fullname:"巴音郭楞蒙古自治州",pinyin:["ba","yin","guo","leng"],location:{lat:41.76404,lng:86.14517},cidx:[2657,2665]},{id:"652900",name:"阿克苏",fullname:"阿克苏地区",pinyin:["a","ke","su"],location:{lat:41.16842,lng:80.26008},cidx:[2666,2674]},{id:"653000",name:"克孜勒苏",fullname:"克孜勒苏柯尔克孜自治州",pinyin:["ke","zi","le","su"],location:{lat:39.7153,lng:76.16661},cidx:[2675,2678]},{id:"653100",name:"喀什",fullname:"喀什地区",pinyin:["ka","shi"],location:{lat:39.47042,lng:75.98976},cidx:[2679,2690]},{id:"653200",name:"和田",fullname:"和田地区",pinyin:["he","tian"],location:{lat:37.11431,lng:79.92247},cidx:[2691,2698]},{id:"654000",name:"伊犁",fullname:"伊犁哈萨克自治州",pinyin:["yi","li"],location:{lat:42.37645,lng:81.84976},cidx:[2699,2708]},{id:"654200",name:"塔城",fullname:"塔城地区",pinyin:["ta","cheng"],location:{lat:46.74532,lng:82.98046},cidx:[2709,2715]},{id:"654300",name:"阿勒泰",fullname:"阿勒泰地区",pinyin:["a","le","tai"],location:{lat:47.84564,lng:88.14023},cidx:[2716,2722]},{id:"659001",fullname:"石河子市",location:{lat:44.30653,lng:86.07893}},{id:"659002",fullname:"阿拉尔市",location:{lat:40.54798,lng:81.28067}},{id:"659003",fullname:"图木舒克市",location:{lat:39.86495,lng:79.06902}},{id:"659004",fullname:"五家渠市",location:{lat:44.16799,lng:87.54017}},{id:"810001",fullname:"中西区",location:{lat:22.281931,lng:114.154334}},{id:"810002",fullname:"湾仔区",location:{lat:22.276345,lng:114.18299}},{id:"810003",fullname:"东区",location:{lat:22.279779,lng:114.225965}},{id:"810004",fullname:"南区",location:{lat:22.245811,lng:114.160023}},{id:"810005",fullname:"油尖旺区",location:{lat:22.311632,lng:114.173347}},{id:"810006",fullname:"深水埗区",location:{lat:22.333775,lng:114.163349}},{id:"810007",fullname:"九龙城区",location:{lat:22.312373,lng:114.193047}},{id:"810008",fullname:"黄大仙区",location:{lat:22.336112,lng:114.203985}},{id:"810009",fullname:"观塘区",location:{lat:22.320679,lng:114.214083}},{id:"810010",fullname:"荃湾区",location:{lat:22.368458,lng:114.121234}},{id:"810011",fullname:"屯门区",location:{lat:22.393896,lng:113.976308}},{id:"810012",fullname:"元朗区",location:{lat:22.44132,lng:114.032528}},{id:"810013",fullname:"北区",location:{lat:22.496143,lng:114.147404}},{id:"810014",fullname:"大埔区",location:{lat:22.44573,lng:114.171713}},{id:"810015",fullname:"西贡区",location:{lat:22.314203,lng:114.264813}},{id:"810016",fullname:"沙田区",location:{lat:22.379715,lng:114.195126}},{id:"810017",fullname:"葵青区",location:{lat:22.363908,lng:114.13918}},{id:"810018",fullname:"离岛区",location:{lat:22.286371,lng:113.946059}},{id:"820001",fullname:"花地玛堂区",location:{lat:22.207882,lng:113.552965}},{id:"820002",fullname:"花王堂区",location:{lat:22.199175,lng:113.549052}},{id:"820003",fullname:"望德堂区",location:{lat:22.193791,lng:113.550252}},{id:"820004",fullname:"大堂区",location:{lat:22.188119,lng:113.55374}},{id:"820005",fullname:"风顺堂区",location:{lat:22.187778,lng:113.54167}},{id:"820006",fullname:"嘉模堂区",location:{lat:22.154124,lng:113.558783}},{id:"820007",fullname:"路凼填海区",location:{lat:22.136546,lng:113.56925}},{id:"820008",fullname:"圣方济各堂区",location:{lat:22.124049,lng:113.559954}}],[{id:"130102",fullname:"长安区",location:{lat:38.03647,lng:114.53952}},{id:"130103",fullname:"桥东区",location:{lat:38.04747,lng:114.50485}},{id:"130104",fullname:"桥西区",location:{lat:38.00407,lng:114.46104}},{id:"130105",fullname:"新华区",location:{lat:38.0509,lng:114.46312}},{id:"130107",fullname:"井陉矿区",location:{lat:38.06499,lng:114.0623}},{id:"130108",fullname:"裕华区",location:{lat:38.0061,lng:114.53122}},{id:"130121",fullname:"井陉县",location:{lat:38.03225,lng:114.14532}},{id:"130123",fullname:"正定县",location:{lat:38.14618,lng:114.57096}},{id:"130124",fullname:"栾城县",location:{lat:37.90025,lng:114.64839}},{id:"130125",fullname:"行唐县",location:{lat:38.43848,lng:114.55294}},{id:"130126",fullname:"灵寿县",location:{lat:38.30864,lng:114.38265}},{id:"130127",fullname:"高邑县",location:{lat:37.61493,lng:114.61148}},{id:"130128",fullname:"深泽县",location:{lat:38.18417,lng:115.20094}},{id:"130129",fullname:"赞皇县",location:{lat:37.66579,lng:114.38592}},{id:"130130",fullname:"无极县",location:{lat:38.17915,lng:114.97638}},{id:"130131",fullname:"平山县",location:{lat:38.25998,lng:114.18605}},{id:"130132",fullname:"元氏县",location:{lat:37.76646,lng:114.52547}},{id:"130133",fullname:"赵县",location:{lat:37.75631,lng:114.77616}},{id:"130181",fullname:"辛集市",location:{lat:37.94316,lng:115.21792}},{id:"130182",fullname:"藁城市",location:{lat:38.02166,lng:114.84676}},{id:"130183",fullname:"晋州市",location:{lat:38.03356,lng:115.0441}},{id:"130184",fullname:"新乐市",location:{lat:38.34338,lng:114.68384}},{id:"130185",fullname:"鹿泉市",location:{lat:38.08587,lng:114.31344}},{id:"130202",fullname:"路南区",location:{lat:39.62527,lng:118.15474}},{id:"130203",fullname:"路北区",location:{lat:39.62429,lng:118.20127}},{id:"130204",fullname:"古冶区",location:{lat:39.71612,lng:118.45885}},{id:"130205",fullname:"开平区",location:{lat:39.67132,lng:118.26174}},{id:"130207",fullname:"丰南区",location:{lat:39.57487,lng:118.08505}},{id:"130208",fullname:"丰润区",location:{lat:39.83269,lng:118.16206}},{id:"130209",fullname:"曹妃甸区",location:{lat:38.93081,lng:118.58495}},{id:"130223",fullname:"滦县",location:{lat:39.74058,lng:118.70351}},{id:"130224",fullname:"滦南县",location:{lat:39.16667,lng:118.06803}},{id:"130225",fullname:"乐亭县",location:{lat:39.42564,lng:118.91252}},{id:"130227",fullname:"迁西县",location:{lat:40.14153,lng:118.3146}},{id:"130229",fullname:"玉田县",location:{lat:39.9005,lng:117.73881}},{id:"130281",fullname:"遵化市",location:{lat:40.18924,lng:117.96567}},{id:"130283",fullname:"迁安市",location:{lat:39.99836,lng:118.70073}},{id:"130302",fullname:"海港区",location:{lat:39.9345,lng:119.61063}},{id:"130303",fullname:"山海关区",location:{lat:39.97892,lng:119.77606}},{id:"130304",fullname:"北戴河区",location:{lat:39.83507,lng:119.48458}},{id:"130321",fullname:"青龙满族自治县",location:{lat:40.40692,lng:118.95012}},{id:"130322",fullname:"昌黎县",location:{lat:39.71284,lng:119.16288}},{id:"130323",fullname:"抚宁县",location:{lat:39.87634,lng:119.24444}},{id:"130324",fullname:"卢龙县",location:{lat:39.8918,lng:118.89294}},{id:"130402",fullname:"邯山区",location:{lat:36.549,lng:114.48605}},{id:"130403",fullname:"丛台区",location:{lat:36.61853,lng:114.49339}},{id:"130404",fullname:"复兴区",location:{lat:36.61693,lng:114.47309}},{id:"130406",fullname:"峰峰矿区",location:{lat:36.41968,lng:114.21302}},{id:"130421",fullname:"邯郸县",location:{lat:36.5939,lng:114.53111}},{id:"130423",fullname:"临漳县",location:{lat:36.33464,lng:114.61955}},{id:"130424",fullname:"成安县",location:{lat:36.44414,lng:114.66999}},{id:"130425",fullname:"大名县",location:{lat:36.28558,lng:115.14788}},{id:"130426",fullname:"涉县",location:{lat:36.58495,lng:113.69142}},{id:"130427",fullname:"磁县",location:{lat:36.37396,lng:114.37392}},{id:"130428",fullname:"肥乡县",location:{lat:36.54811,lng:114.80002}},{id:"130429",fullname:"永年县",location:{lat:36.77771,lng:114.49095}},{id:"130430",fullname:"邱县",location:{lat:36.81987,lng:115.17641}},{id:"130431",fullname:"鸡泽县",location:{lat:36.92031,lng:114.8782}},{id:"130432",fullname:"广平县",location:{lat:36.48345,lng:114.9485}},{id:"130433",fullname:"馆陶县",location:{lat:36.53529,lng:115.30629}},{id:"130434",fullname:"魏县",location:{lat:36.35991,lng:114.93882}},{id:"130435",fullname:"曲周县",location:{lat:36.77918,lng:114.94485}},{id:"130481",fullname:"武安市",location:{lat:36.69671,lng:114.20376}},{id:"130502",fullname:"桥东区",location:{lat:37.06787,lng:114.50713}},{id:"130503",fullname:"桥西区",location:{lat:37.05983,lng:114.46816}},{id:"130521",fullname:"邢台县",location:{lat:37.08627,lng:114.54489}},{id:"130522",fullname:"临城县",location:{lat:37.4443,lng:114.49898}},{id:"130523",fullname:"内丘县",location:{lat:37.28678,lng:114.51207}},{id:"130524",fullname:"柏乡县",location:{lat:37.48244,lng:114.69363}},{id:"130525",fullname:"隆尧县",location:{lat:37.35025,lng:114.77031}},{id:"130526",fullname:"任县",location:{lat:37.12092,lng:114.67132}},{id:"130527",fullname:"南和县",location:{lat:37.0049,lng:114.68376}},{id:"130528",fullname:"宁晋县",location:{lat:37.6198,lng:114.91932}},{id:"130529",fullname:"巨鹿县",location:{lat:37.22107,lng:115.03781}},{id:"130530",fullname:"新河县",location:{lat:37.52867,lng:115.24214}},{id:"130531",fullname:"广宗县",location:{lat:37.07463,lng:115.14261}},{id:"130532",fullname:"平乡县",location:{lat:37.06319,lng:115.03007}},{id:"130533",fullname:"威县",location:{lat:36.97542,lng:115.26669}},{id:"130534",fullname:"清河县",location:{lat:37.03993,lng:115.66718}},{id:"130535",fullname:"临西县",location:{lat:36.87082,lng:115.50104}},{id:"130581",fullname:"南宫市",location:{lat:37.35795,lng:115.40866}},{id:"130582",fullname:"沙河市",location:{lat:36.85516,lng:114.50332}},{id:"130602",fullname:"新市区",location:{lat:38.87758,lng:115.45838}},{id:"130603",fullname:"北市区",location:{lat:38.88256,lng:115.49705}},{id:"130604",fullname:"南市区",location:{lat:38.8546,lng:115.52866}},{id:"130621",fullname:"满城县",location:{lat:38.94892,lng:115.32217}},{id:"130622",fullname:"清苑县",location:{lat:38.76526,lng:115.48989}},{id:"130623",fullname:"涞水县",location:{lat:39.39428,lng:115.71378}},{id:"130624",fullname:"阜平县",location:{lat:38.84915,lng:114.19531}},{id:"130625",fullname:"徐水县",location:{lat:39.01865,lng:115.65586}},{id:"130626",fullname:"定兴县",location:{lat:39.26315,lng:115.8079}},{id:"130627",fullname:"唐县",location:{lat:38.7479,lng:114.98295}},{id:"130628",fullname:"高阳县",location:{lat:38.70007,lng:115.77884}},{id:"130629",fullname:"容城县",location:{lat:39.04285,lng:115.86164}},{id:"130630",fullname:"涞源县",location:{lat:39.36018,lng:114.69424}},{id:"130631",fullname:"望都县",location:{lat:38.709,lng:115.15564}},{id:"130632",fullname:"安新县",location:{lat:38.93535,lng:115.93564}},{id:"130633",fullname:"易县",location:{lat:39.34926,lng:115.49846}},{id:"130634",fullname:"曲阳县",location:{lat:38.62231,lng:114.74501}},{id:"130635",fullname:"蠡县",location:{lat:38.48806,lng:115.5836}},{id:"130636",fullname:"顺平县",location:{lat:38.83759,lng:115.13543}},{id:"130637",fullname:"博野县",location:{lat:38.45766,lng:115.46439}},{id:"130638",fullname:"雄县",location:{lat:38.99446,lng:116.10879}},{id:"130681",fullname:"涿州市",location:{lat:39.48529,lng:115.97439}},{id:"130682",fullname:"定州市",location:{lat:38.51626,lng:114.99025}},{id:"130683",fullname:"安国市",location:{lat:38.41845,lng:115.32664}},{id:"130684",fullname:"高碑店市",location:{lat:39.32658,lng:115.87373}},{id:"130702",fullname:"桥东区",location:{lat:40.78847,lng:114.89436}},{id:"130703",fullname:"桥西区",location:{lat:40.81956,lng:114.86937}},{id:"130705",fullname:"宣化区",location:{lat:40.56434,lng:115.49626}},{id:"130706",fullname:"下花园区",location:{lat:40.5024,lng:115.28751}},{id:"130721",fullname:"宣化县",location:{lat:40.57931,lng:115.00142}},{id:"130722",fullname:"张北县",location:{lat:41.15862,lng:114.71987}},{id:"130723",fullname:"康保县",location:{lat:41.85228,lng:114.60035}},{id:"130724",fullname:"沽源县",location:{lat:41.66964,lng:115.68865}},{id:"130725",fullname:"尚义县",location:{lat:41.07599,lng:113.96919}},{id:"130726",fullname:"蔚县",location:{lat:39.84072,lng:114.58897}},{id:"130727",fullname:"阳原县",location:{lat:40.10366,lng:114.15057}},{id:"130728",fullname:"怀安县",location:{lat:40.6743,lng:114.38564}},{id:"130729",fullname:"万全县",location:{lat:40.76699,lng:114.74055}},{id:"130730",fullname:"怀来县",location:{lat:40.41538,lng:115.51778}},{id:"130731",fullname:"涿鹿县",location:{lat:40.38003,lng:115.21962}},{id:"130732",fullname:"赤城县",location:{lat:40.91295,lng:115.83166}},{id:"130733",fullname:"崇礼县",location:{lat:40.97457,lng:115.28264}},{id:"130802",fullname:"双桥区",location:{lat:40.97469,lng:117.94348}},{id:"130803",fullname:"双滦区",location:{lat:40.95913,lng:117.80024}},{id:"130804",fullname:"鹰手营子矿区",location:{lat:40.47523,lng:117.64999}},{id:"130821",fullname:"承德县",location:{lat:40.76853,lng:118.17382}},{id:"130822",fullname:"兴隆县",location:{lat:40.41727,lng:117.50076}},{id:"130823",fullname:"平泉县",location:{lat:41.0184,lng:118.70202}},{id:"130824",fullname:"滦平县",location:{lat:40.94145,lng:117.33286}},{id:"130825",fullname:"隆化县",location:{lat:41.31381,lng:117.73897}},{id:"130826",fullname:"丰宁满族自治县",location:{lat:41.20894,lng:116.64591}},{id:"130827",fullname:"宽城满族自治县",location:{lat:40.61139,lng:118.48535}},{id:"130828",fullname:"围场满族蒙古族自治县",location:{lat:41.93846,lng:117.76016}},{id:"130902",fullname:"新华区",location:{lat:38.31419,lng:116.86622}},{id:"130903",fullname:"运河区",location:{lat:38.31077,lng:116.83191}},{id:"130921",fullname:"沧县",location:{lat:38.32474,lng:116.60718}},{id:"130922",fullname:"青县",location:{lat:38.58348,lng:116.80318}},{id:"130923",fullname:"东光县",location:{lat:37.88828,lng:116.5371}},{id:"130924",fullname:"海兴县",location:{lat:38.14325,lng:117.49785}},{id:"130925",fullname:"盐山县",location:{lat:38.0583,lng:117.23025}},{id:"130926",fullname:"肃宁县",location:{lat:38.42277,lng:115.82997}},{id:"130927",fullname:"南皮县",location:{lat:38.0378,lng:116.70774}},{id:"130928",fullname:"吴桥县",location:{lat:37.6277,lng:116.39154}},{id:"130929",fullname:"献县",location:{lat:38.19018,lng:116.12279}},{id:"130930",fullname:"孟村回族自治县",location:{lat:38.05341,lng:117.10418}},{id:"130981",fullname:"泊头市",location:{lat:38.08364,lng:116.57828}},{id:"130982",fullname:"任丘市",location:{lat:38.71164,lng:116.09954}},{id:"130983",fullname:"黄骅市",location:{lat:38.37139,lng:117.33012}},{id:"130984",fullname:"河间市",location:{lat:38.44548,lng:116.099}},{id:"131002",fullname:"安次区",location:{lat:39.50311,lng:116.68572}},{id:"131003",fullname:"广阳区",location:{lat:39.5228,lng:116.71051}},{id:"131022",fullname:"固安县",location:{lat:39.43825,lng:116.29852}},{id:"131023",fullname:"永清县",location:{lat:39.32178,lng:116.49904}},{id:"131024",fullname:"香河县",location:{lat:39.76142,lng:117.00645}},{id:"131025",fullname:"大城县",location:{lat:38.70469,lng:116.65423}},{id:"131026",fullname:"文安县",location:{lat:38.87328,lng:116.45848}},{id:"131028",fullname:"大厂回族自治县",location:{lat:39.88665,lng:116.98951}},{id:"131081",fullname:"霸州市",location:{lat:39.12709,lng:116.39134}},{id:"131082",fullname:"三河市",location:{lat:39.98246,lng:117.07822}},{id:"131102",fullname:"桃城区",location:{lat:37.73516,lng:115.67466}},{id:"131121",fullname:"枣强县",location:{lat:37.51337,lng:115.72418}},{id:"131122",fullname:"武邑县",location:{lat:37.80186,lng:115.88751}},{id:"131123",fullname:"武强县",location:{lat:38.0412,lng:115.98253}},{id:"131124",fullname:"饶阳县",location:{lat:38.2353,lng:115.7256}},{id:"131125",fullname:"安平县",location:{lat:38.23447,lng:115.51912}},{id:"131126",fullname:"故城县",location:{lat:37.34748,lng:115.96581}},{id:"131127",fullname:"景县",location:{lat:37.69234,lng:116.2706}},{id:"131128",fullname:"阜城县",location:{lat:37.86885,lng:116.14437}},{id:"131181",fullname:"冀州市",location:{lat:37.55085,lng:115.57938}},{id:"131182",fullname:"深州市",location:{lat:38.00022,lng:115.56001}},{id:"140105",fullname:"小店区",location:{lat:37.73605,lng:112.56566}},{id:"140106",fullname:"迎泽区",location:{lat:37.8632,lng:112.56346}},{id:"140107",fullname:"杏花岭区",location:{lat:37.89403,lng:112.57053}},{id:"140108",fullname:"尖草坪区",location:{lat:37.94036,lng:112.48699}},{id:"140109",fullname:"万柏林区",location:{lat:37.85929,lng:112.51562}},{id:"140110",fullname:"晋源区",location:{lat:37.71525,lng:112.4777}},{id:"140121",fullname:"清徐县",location:{lat:37.60736,lng:112.35885}},{id:"140122",fullname:"阳曲县",location:{lat:38.05828,lng:112.67292}},{id:"140123",fullname:"娄烦县",location:{lat:38.0672,lng:111.79745}},{id:"140181",fullname:"古交市",location:{lat:37.90714,lng:112.17588}},{id:"140202",fullname:"城区",location:{lat:40.07567,lng:113.29853}},{id:"140211",fullname:"南郊区",location:{lat:40.00543,lng:113.14952}},{id:"140212",fullname:"新荣区",location:{lat:40.25585,lng:113.14013}},{id:"140221",fullname:"阳高县",location:{lat:40.36627,lng:113.75412}},{id:"140222",fullname:"天镇县",location:{lat:40.42031,lng:114.0907}},{id:"140223",fullname:"广灵县",location:{lat:39.7602,lng:114.28257}},{id:"140224",fullname:"灵丘县",location:{lat:39.44243,lng:114.2342}},{id:"140225",fullname:"浑源县",location:{lat:39.69873,lng:113.6908}},{id:"140226",fullname:"左云县",location:{lat:40.01349,lng:112.70273}},{id:"140227",fullname:"大同县",location:{lat:40.04016,lng:113.61217}},{id:"140302",fullname:"城区",location:{lat:37.84739,lng:113.60075}},{id:"140303",fullname:"矿区",location:{lat:37.86851,lng:113.5553}},{id:"140311",fullname:"郊区",location:{lat:37.94135,lng:113.58515}},{id:"140321",fullname:"平定县",location:{lat:37.78685,lng:113.65804}},{id:"140322",fullname:"盂县",location:{lat:38.0858,lng:113.41238}},{id:"140402",fullname:"城区",location:{lat:36.20346,lng:113.12303}},{id:"140411",fullname:"郊区",location:{lat:36.22434,lng:113.11185}},{id:"140421",fullname:"长治县",location:{lat:36.05312,lng:113.05135}},{id:"140423",fullname:"襄垣县",location:{lat:36.53581,lng:113.05306}},{id:"140424",fullname:"屯留县",location:{lat:36.31553,lng:112.89221}},{id:"140425",fullname:"平顺县",location:{lat:36.20006,lng:113.43606}},{id:"140426",fullname:"黎城县",location:{lat:36.50227,lng:113.38722}},{id:"140427",fullname:"壶关县",location:{lat:36.11567,lng:113.20733}},{id:"140428",fullname:"长子县",location:{lat:36.12222,lng:112.87795}},{id:"140429",fullname:"武乡县",location:{lat:36.8378,lng:112.86387}},{id:"140430",fullname:"沁县",location:{lat:36.75608,lng:112.69907}},{id:"140431",fullname:"沁源县",location:{lat:36.5001,lng:112.33762}},{id:"140481",fullname:"潞城市",location:{lat:36.33418,lng:113.22893}},{id:"140502",fullname:"城区",location:{lat:35.50154,lng:112.85352}},{id:"140521",fullname:"沁水县",location:{lat:35.69015,lng:112.1866}},{id:"140522",fullname:"阳城县",location:{lat:35.48618,lng:112.41491}},{id:"140524",fullname:"陵川县",location:{lat:35.77512,lng:113.28061}},{id:"140525",fullname:"泽州县",location:{lat:35.50043,lng:112.94366}},{id:"140581",fullname:"高平市",location:{lat:35.79807,lng:112.92358}},{id:"140602",fullname:"朔城区",location:{lat:39.31918,lng:112.43314}},{id:"140603",fullname:"平鲁区",location:{lat:39.51238,lng:112.28832}},{id:"140621",fullname:"山阴县",location:{lat:39.52625,lng:112.81572}},{id:"140622",fullname:"应县",location:{lat:39.55401,lng:113.19095}},{id:"140623",fullname:"右玉县",location:{lat:39.98913,lng:112.46705}},{id:"140624",fullname:"怀仁县",location:{lat:39.82788,lng:113.10012}},{id:"140702",fullname:"榆次区",location:{lat:37.69978,lng:112.70746}},{id:"140721",fullname:"榆社县",location:{lat:37.07084,lng:112.97522}},{id:"140722",fullname:"左权县",location:{lat:37.08243,lng:113.37926}},{id:"140723",fullname:"和顺县",location:{lat:37.32905,lng:113.56972}},{id:"140724",fullname:"昔阳县",location:{lat:37.61282,lng:113.70718}},{id:"140725",fullname:"寿阳县",location:{lat:37.89498,lng:113.17666}},{id:"140726",fullname:"太谷县",location:{lat:37.42119,lng:112.55126}},{id:"140727",fullname:"祁县",location:{lat:37.35775,lng:112.33507}},{id:"140728",fullname:"平遥县",location:{lat:37.18934,lng:112.17557}},{id:"140729",fullname:"灵石县",location:{lat:36.84788,lng:111.77879}},{id:"140781",fullname:"介休市",location:{lat:37.0271,lng:111.91672}},{id:"140802",fullname:"盐湖区",location:{lat:35.01505,lng:110.99817}},{id:"140821",fullname:"临猗县",location:{lat:35.14471,lng:110.77408}},{id:"140822",fullname:"万荣县",location:{lat:35.41534,lng:110.83781}},{id:"140823",fullname:"闻喜县",location:{lat:35.35663,lng:111.22472}},{id:"140824",fullname:"稷山县",location:{lat:35.60401,lng:110.98311}},{id:"140825",fullname:"新绛县",location:{lat:35.61622,lng:111.2247}},{id:"140826",fullname:"绛县",location:{lat:35.49146,lng:111.56878}},{id:"140827",fullname:"垣曲县",location:{lat:35.29762,lng:111.67025}},{id:"140828",fullname:"夏县",location:{lat:35.14136,lng:111.22031}},{id:"140829",fullname:"平陆县",location:{lat:34.83467,lng:111.19474}},{id:"140830",fullname:"芮城县",location:{lat:34.69365,lng:110.69442}},{id:"140881",fullname:"永济市",location:{lat:34.86716,lng:110.44773}},{id:"140882",fullname:"河津市",location:{lat:35.59643,lng:110.71186}},{id:"140902",fullname:"忻府区",location:{lat:38.40429,lng:112.74619}},{id:"140921",fullname:"定襄县",location:{lat:38.47348,lng:112.95722}},{id:"140922",fullname:"五台县",location:{lat:38.72812,lng:113.2554}},{id:"140923",fullname:"代县",location:{lat:39.06689,lng:112.95996}},{id:"140924",fullname:"繁峙县",location:{lat:39.18904,lng:113.26547}},{id:"140925",fullname:"宁武县",location:{lat:39.00147,lng:112.3045}},{id:"140926",fullname:"静乐县",location:{lat:38.35924,lng:111.93875}},{id:"140927",fullname:"神池县",location:{lat:39.09059,lng:112.21077}},{id:"140928",fullname:"五寨县",location:{lat:38.91071,lng:111.84701}},{id:"140929",fullname:"岢岚县",location:{lat:38.70427,lng:111.57296}},{id:"140930",fullname:"河曲县",location:{lat:39.38456,lng:111.13837}},{id:"140931",fullname:"保德县",location:{lat:39.02265,lng:111.08625}},{id:"140932",fullname:"偏关县",location:{lat:39.43613,lng:111.50869}},{id:"140981",fullname:"原平市",location:{lat:38.73051,lng:112.71092}},{id:"141002",fullname:"尧都区",location:{lat:36.08329,lng:111.57776}},{id:"141021",fullname:"曲沃县",location:{lat:35.64105,lng:111.4757}},{id:"141022",fullname:"翼城县",location:{lat:35.73823,lng:111.71836}},{id:"141023",fullname:"襄汾县",location:{lat:35.87618,lng:111.44189}},{id:"141024",fullname:"洪洞县",location:{lat:36.25374,lng:111.67496}},{id:"141025",fullname:"古县",location:{lat:36.26661,lng:111.9205}},{id:"141026",fullname:"安泽县",location:{lat:36.14781,lng:112.25013}},{id:"141027",fullname:"浮山县",location:{lat:35.96802,lng:111.84952}},{id:"141028",fullname:"吉县",location:{lat:36.09789,lng:110.68162}},{id:"141029",fullname:"乡宁县",location:{lat:35.97053,lng:110.84721}},{id:"141030",fullname:"大宁县",location:{lat:36.46511,lng:110.75285}},{id:"141031",fullname:"隰县",location:{lat:36.69344,lng:110.94049}},{id:"141032",fullname:"永和县",location:{lat:36.75952,lng:110.63198}},{id:"141033",fullname:"蒲县",location:{lat:36.41179,lng:111.09648}},{id:"141034",fullname:"汾西县",location:{lat:36.65295,lng:111.56365}},{id:"141081",fullname:"侯马市",location:{lat:35.61908,lng:111.37213}},{id:"141082",fullname:"霍州市",location:{lat:36.56879,lng:111.75505}},{id:"141102",fullname:"离石区",location:{lat:37.51761,lng:111.15081}},{id:"141121",fullname:"文水县",location:{lat:37.43843,lng:112.0285}},{id:"141122",fullname:"交城县",location:{lat:37.55165,lng:112.15478}},{id:"141123",fullname:"兴县",location:{lat:38.46242,lng:111.1276}},{id:"141124",fullname:"临县",location:{lat:37.95106,lng:110.99208}},{id:"141125",fullname:"柳林县",location:{lat:37.42902,lng:110.88937}},{id:"141126",fullname:"石楼县",location:{lat:36.99857,lng:110.83469}},{id:"141127",fullname:"岚县",location:{lat:38.27939,lng:111.67195}},{id:"141128",fullname:"方山县",location:{lat:37.8947,lng:111.24396}},{id:"141129",fullname:"中阳县",location:{lat:37.3572,lng:111.17953}},{id:"141130",fullname:"交口县",location:{lat:36.98217,lng:111.18107}},{id:"141181",fullname:"孝义市",location:{lat:37.14534,lng:111.77903}},{id:"141182",fullname:"汾阳市",location:{lat:37.26542,lng:111.78777}},{id:"150102",fullname:"新城区",location:{lat:40.85844,lng:111.66345}},{id:"150103",fullname:"回民区",location:{lat:40.80772,lng:111.62299}},{id:"150104",fullname:"玉泉区",location:{lat:40.75319,lng:111.67543}},{id:"150105",fullname:"赛罕区",location:{lat:40.79195,lng:111.70171}},{id:"150121",fullname:"土默特左旗",location:{lat:40.72957,lng:111.16358}},{id:"150122",fullname:"托克托县",location:{lat:40.27744,lng:111.19421}},{id:"150123",fullname:"和林格尔县",location:{lat:40.37859,lng:111.82083}},{id:"150124",fullname:"清水河县",location:{lat:39.90892,lng:111.68639}},{id:"150125",fullname:"武川县",location:{lat:41.0965,lng:111.45118}},{id:"150202",fullname:"东河区",location:{lat:40.57643,lng:110.04317}},{id:"150203",fullname:"昆都仑区",location:{lat:40.64178,lng:109.83859}},{id:"150204",fullname:"青山区",location:{lat:40.64559,lng:109.90241}},{id:"150205",fullname:"石拐区",location:{lat:40.67204,lng:110.27227}},{id:"150206",fullname:"白云鄂博矿区",location:{lat:41.76943,lng:109.97372}},{id:"150207",fullname:"九原区",location:{lat:40.61009,lng:109.96718}},{id:"150221",fullname:"土默特右旗",location:{lat:40.56883,lng:110.52421}},{id:"150222",fullname:"固阳县",location:{lat:41.03412,lng:110.0607}},{id:"150223",fullname:"达尔罕茂明安联合旗",location:{lat:41.69854,lng:110.43261}},{id:"150302",fullname:"海勃湾区",location:{lat:39.69184,lng:106.8226}},{id:"150303",fullname:"海南区",location:{lat:39.44096,lng:106.89157}},{id:"150304",fullname:"乌达区",location:{lat:39.5058,lng:106.72609}},{id:"150402",fullname:"红山区",location:{lat:42.26581,lng:118.95927}},{id:"150403",fullname:"元宝山区",location:{lat:42.03888,lng:119.28862}},{id:"150404",fullname:"松山区",location:{lat:42.02856,lng:118.91238}},{id:"150421",fullname:"阿鲁科尔沁旗",location:{lat:43.87244,lng:120.06556}},{id:"150422",fullname:"巴林左旗",location:{lat:43.97094,lng:119.37961}},{id:"150423",fullname:"巴林右旗",location:{lat:43.53391,lng:118.66466}},{id:"150424",fullname:"林西县",location:{lat:43.61702,lng:118.0558}},{id:"150425",fullname:"克什克腾旗",location:{lat:43.26624,lng:117.54421}},{id:"150426",fullname:"翁牛特旗",location:{lat:42.93483,lng:119.00669}},{id:"150428",fullname:"喀喇沁旗",location:{lat:41.92718,lng:118.70273}},{id:"150429",fullname:"宁城县",location:{lat:41.59426,lng:119.34308}},{id:"150430",fullname:"敖汉旗",location:{lat:42.29073,lng:119.92168}},{id:"150502",fullname:"科尔沁区",location:{lat:43.62244,lng:122.25615}},{id:"150521",fullname:"科尔沁左翼中旗",location:{lat:44.12659,lng:123.31216}},{id:"150522",fullname:"科尔沁左翼后旗",location:{lat:42.93511,lng:122.35674}},{id:"150523",fullname:"开鲁县",location:{lat:43.60005,lng:121.3189}},{id:"150524",fullname:"库伦旗",location:{lat:42.73504,lng:121.81073}},{id:"150525",fullname:"奈曼旗",location:{lat:42.86729,lng:120.65779}},{id:"150526",fullname:"扎鲁特旗",location:{lat:44.55631,lng:120.91159}},{id:"150581",fullname:"霍林郭勒市",location:{lat:45.53141,lng:119.66359}},{id:"150602",fullname:"东胜区",location:{lat:39.82127,lng:109.96144}},{id:"150621",fullname:"达拉特旗",location:{lat:40.40016,lng:110.03293}},{id:"150622",fullname:"准格尔旗",location:{lat:39.86426,lng:111.23987}},{id:"150623",fullname:"鄂托克前旗",location:{lat:38.18239,lng:107.47743}},{id:"150624",fullname:"鄂托克旗",location:{lat:39.08989,lng:107.9776}},{id:"150625",fullname:"杭锦旗",location:{lat:39.83352,lng:108.73497}},{id:"150626",fullname:"乌审旗",location:{lat:38.60388,lng:108.81769}},{id:"150627",fullname:"伊金霍洛旗",location:{lat:39.56442,lng:109.74811}},{id:"150702",fullname:"海拉尔区",location:{lat:49.21336,lng:119.73572}},{id:"150721",fullname:"阿荣旗",location:{lat:48.12582,lng:123.45944}},{id:"150722",fullname:"莫力达瓦达斡尔族自治旗",location:{lat:48.47711,lng:124.51936}},{id:"150723",fullname:"鄂伦春自治旗",location:{lat:50.59158,lng:123.72577}},{id:"150724",fullname:"鄂温克族自治旗",location:{lat:49.14678,lng:119.75542}},{id:"150725",fullname:"陈巴尔虎旗",location:{lat:49.32837,lng:119.42429}},{id:"150726",fullname:"新巴尔虎左旗",location:{lat:48.21819,lng:118.26995}},{id:"150727",fullname:"新巴尔虎右旗",location:{lat:48.67191,lng:116.82355}},{id:"150781",fullname:"满洲里市",location:{lat:49.59655,lng:117.37836}},{id:"150782",fullname:"牙克石市",location:{lat:49.28563,lng:120.71174}},{id:"150783",fullname:"扎兰屯市",location:{lat:48.01365,lng:122.73761}},{id:"150784",fullname:"额尔古纳市",location:{lat:50.24315,lng:120.17962}},{id:"150785",fullname:"根河市",location:{lat:50.78046,lng:121.5204}},{id:"150802",fullname:"临河区",location:{lat:40.76645,lng:107.38683}},{id:"150821",fullname:"五原县",location:{lat:41.08879,lng:108.2673}},{id:"150822",fullname:"磴口县",location:{lat:40.33056,lng:107.00864}},{id:"150823",fullname:"乌拉特前旗",location:{lat:40.73662,lng:108.65224}},{id:"150824",fullname:"乌拉特中旗",location:{lat:41.56746,lng:108.52647}},{id:"150825",fullname:"乌拉特后旗",location:{lat:41.08414,lng:107.07481}},{id:"150826",fullname:"杭锦后旗",location:{lat:40.88594,lng:107.15114}},{id:"150902",fullname:"集宁区",location:{lat:40.9906,lng:113.12401}},{id:"150921",fullname:"卓资县",location:{lat:40.89417,lng:112.57785}},{id:"150922",fullname:"化德县",location:{lat:41.90479,lng:114.01089}},{id:"150923",fullname:"商都县",location:{lat:41.5621,lng:113.57718}},{id:"150924",fullname:"兴和县",location:{lat:40.8719,lng:113.83396}},{id:"150925",fullname:"凉城县",location:{lat:40.53165,lng:112.50387}},{id:"150926",fullname:"察哈尔右翼前旗",location:{lat:40.78585,lng:113.21095}},{id:"150927",fullname:"察哈尔右翼中旗",location:{lat:41.27747,lng:112.63544}},{id:"150928",fullname:"察哈尔右翼后旗",location:{lat:41.43589,lng:113.19222}},{id:"150929",fullname:"四子王旗",location:{lat:41.53316,lng:111.70658}},{id:"150981",fullname:"丰镇市",location:{lat:40.43574,lng:113.11056}},{id:"152201",fullname:"乌兰浩特市",location:{lat:46.07282,lng:122.09316}},{id:"152202",fullname:"阿尔山市",location:{lat:47.1771,lng:119.94381}},{id:"152221",fullname:"科尔沁右翼前旗",location:{lat:46.07955,lng:121.95275}},{id:"152222",fullname:"科尔沁右翼中旗",location:{lat:45.06056,lng:121.47694}},{id:"152223",fullname:"扎赉特旗",location:{lat:46.72279,lng:122.8998}},{id:"152224",fullname:"突泉县",location:{lat:45.38282,lng:121.59408}},{id:"152501",fullname:"二连浩特市",location:{lat:43.64305,lng:111.95238}},{id:"152502",fullname:"锡林浩特市",location:{lat:43.93339,lng:116.08608}},{id:"152522",fullname:"阿巴嘎旗",location:{lat:44.02272,lng:114.95034}},{id:"152523",fullname:"苏尼特左旗",location:{lat:43.85921,lng:113.66737}},{id:"152524",fullname:"苏尼特右旗",location:{lat:42.74694,lng:112.65746}},{id:"152525",fullname:"东乌珠穆沁旗",location:{lat:45.5096,lng:116.97215}},{id:"152526",fullname:"西乌珠穆沁旗",location:{lat:44.58716,lng:117.60899}},{id:"152527",fullname:"太仆寺旗",location:{lat:41.87732,lng:115.28305}},{id:"152528",fullname:"镶黄旗",location:{lat:42.23232,lng:113.84751}},{id:"152529",fullname:"正镶白旗",location:{lat:42.28722,lng:115.03077}},{id:"152530",fullname:"正蓝旗",location:{lat:42.24162,lng:115.99239}},{id:"152531",fullname:"多伦县",location:{lat:42.20303,lng:116.48571}},{id:"152921",fullname:"阿拉善左旗",location:{lat:38.83343,lng:105.66626}},{id:"152922",fullname:"阿拉善右旗",location:{lat:39.21536,lng:101.66711}},{id:"152923",fullname:"额济纳旗",location:{lat:41.95449,lng:101.05552}},{id:"210102",fullname:"和平区",location:{lat:41.78985,lng:123.42102}},{id:"210103",fullname:"沈河区",location:{lat:41.79607,lng:123.45852}},{id:"210104",fullname:"大东区",location:{lat:41.86281,lng:123.48682}},{id:"210105",fullname:"皇姑区",location:{lat:41.82053,lng:123.42512}},{id:"210106",fullname:"铁西区",location:{lat:41.80267,lng:123.37722}},{id:"210111",fullname:"苏家屯区",location:{lat:41.66472,lng:123.34432}},{id:"210112",fullname:"东陵区",location:{lat:41.87624,lng:123.47634}},{id:"210113",fullname:"沈北新区",location:{lat:42.05368,lng:123.527}},{id:"210114",fullname:"于洪区",location:{lat:41.79407,lng:123.30813}},{id:"210122",fullname:"辽中县",location:{lat:41.5118,lng:122.73161}},{id:"210123",fullname:"康平县",location:{lat:42.7499,lng:123.35349}},{id:"210124",fullname:"法库县",location:{lat:42.50403,lng:123.40838}},{id:"210181",fullname:"新民市",location:{lat:41.99767,lng:122.828}},{id:"210202",fullname:"中山区",location:{lat:38.91864,lng:121.64511}},{id:"210203",fullname:"西岗区",location:{lat:38.91478,lng:121.61234}},{id:"210204",fullname:"沙河口区",location:{lat:38.90463,lng:121.59451}},{id:"210211",fullname:"甘井子区",location:{lat:38.95223,lng:121.5255}},{id:"210212",fullname:"旅顺口区",location:{lat:38.85129,lng:121.26208}},{id:"210213",fullname:"金州区",location:{lat:39.05015,lng:121.78259}},{id:"210224",fullname:"长海县",location:{lat:39.27276,lng:122.58861}},{id:"210281",fullname:"瓦房店市",location:{lat:39.62644,lng:121.97995}},{id:"210282",fullname:"普兰店市",location:{lat:39.39443,lng:121.96323}},{id:"210283",fullname:"庄河市",location:{lat:39.68037,lng:122.96611}},{id:"210302",fullname:"铁东区",location:{lat:41.08994,lng:122.9912}},{id:"210303",fullname:"铁西区",location:{lat:41.11956,lng:122.96939}},{id:"210304",fullname:"立山区",location:{lat:41.15013,lng:123.02952}},{id:"210311",fullname:"千山区",location:{lat:41.07488,lng:122.96089}},{id:"210321",fullname:"台安县",location:{lat:41.41269,lng:122.43591}},{id:"210323",fullname:"岫岩满族自治县",location:{lat:40.28998,lng:123.28171}},{id:"210381",fullname:"海城市",location:{lat:40.88145,lng:122.68463}},{id:"210402",fullname:"新抚区",location:{lat:41.85928,lng:123.87415}},{id:"210403",fullname:"东洲区",location:{lat:41.85301,lng:124.03923}},{id:"210404",fullname:"望花区",location:{lat:41.85329,lng:123.78439}},{id:"210411",fullname:"顺城区",location:{lat:41.88307,lng:123.94513}},{id:"210421",fullname:"抚顺县",location:{lat:41.78616,lng:124.19596}},{id:"210422",fullname:"新宾满族自治县",location:{lat:41.73371,lng:125.03979}},{id:"210423",fullname:"清原满族自治县",location:{lat:42.10038,lng:124.92411}},{id:"210502",fullname:"平山区",location:{lat:41.22132,lng:123.68338}},{id:"210503",fullname:"溪湖区",location:{lat:41.32919,lng:123.76769}},{id:"210504",fullname:"明山区",location:{lat:41.30877,lng:123.81695}},{id:"210505",fullname:"南芬区",location:{lat:41.10031,lng:123.74509}},{id:"210521",fullname:"本溪满族自治县",location:{lat:41.3027,lng:124.12193}},{id:"210522",fullname:"桓仁满族自治县",location:{lat:41.26706,lng:125.36096}},{id:"210602",fullname:"元宝区",location:{lat:40.13673,lng:124.39582}},{id:"210603",fullname:"振兴区",location:{lat:40.10495,lng:124.36041}},{id:"210604",fullname:"振安区",location:{lat:40.15823,lng:124.4282}},{id:"210624",fullname:"宽甸满族自治县",location:{lat:40.73131,lng:124.78366}},{id:"210681",fullname:"东港市",location:{lat:39.86172,lng:124.15209}},{id:"210682",fullname:"凤城市",location:{lat:40.45279,lng:124.06605}},{id:"210702",fullname:"古塔区",location:{lat:41.11728,lng:121.12834}},{id:"210703",fullname:"凌河区",location:{lat:41.11512,lng:121.15126}},{id:"210711",fullname:"太和区",location:{lat:40.72948,lng:121.10126}},{id:"210726",fullname:"黑山县",location:{lat:41.69391,lng:122.12066}},{id:"210727",fullname:"义县",location:{lat:41.53311,lng:121.23915}},{id:"210781",fullname:"凌海市",location:{lat:41.17371,lng:121.35771}},{id:"210782",fullname:"北镇市",location:{lat:41.59465,lng:121.79854}},{id:"210802",fullname:"站前区",location:{lat:40.67256,lng:122.25896}},{id:"210803",fullname:"西市区",location:{lat:40.66629,lng:122.20668}},{id:"210804",fullname:"鲅鱼圈区",location:{lat:40.22675,lng:122.12169}},{id:"210811",fullname:"老边区",location:{lat:40.68006,lng:122.38012}},{id:"210881",fullname:"盖州市",location:{lat:40.40053,lng:122.3488}},{id:"210882",fullname:"大石桥市",location:{lat:40.64448,lng:122.50917}},{id:"210902",fullname:"海州区",location:{lat:42.01332,lng:121.65617}},{id:"210903",fullname:"新邱区",location:{lat:42.08742,lng:121.79232}},{id:"210904",fullname:"太平区",location:{lat:42.01072,lng:121.67865}},{id:"210905",fullname:"清河门区",location:{lat:41.78306,lng:121.41614}},{id:"210911",fullname:"细河区",location:{lat:42.02539,lng:121.68008}},{id:"210921",fullname:"阜新蒙古族自治县",location:{lat:42.06514,lng:121.75791}},{id:"210922",fullname:"彰武县",location:{lat:42.38649,lng:122.53889}},{id:"211002",fullname:"白塔区",location:{lat:41.27031,lng:123.17424}},{id:"211003",fullname:"文圣区",location:{lat:41.26276,lng:123.18527}},{id:"211004",fullname:"宏伟区",location:{lat:41.21725,lng:123.19637}},{id:"211005",fullname:"弓长岭区",location:{lat:41.15166,lng:123.42012}},{id:"211011",fullname:"太子河区",location:{lat:41.25355,lng:123.18123}},{id:"211021",fullname:"辽阳县",location:{lat:41.08235,lng:122.82444}},{id:"211081",fullname:"灯塔市",location:{lat:41.42616,lng:123.3393}},{id:"211102",fullname:"双台子区",location:{lat:41.19049,lng:122.06017}},{id:"211103",fullname:"兴隆台区",location:{lat:41.13876,lng:122.10558}},{id:"211121",fullname:"大洼县",location:{lat:41.00247,lng:122.08245}},{id:"211122",fullname:"盘山县",location:{lat:41.24265,lng:121.9963}},{id:"211202",fullname:"银州区",location:{lat:42.2862,lng:123.84241}},{id:"211204",fullname:"清河区",location:{lat:42.54682,lng:124.15916}},{id:"211221",fullname:"铁岭县",location:{lat:42.22284,lng:123.72783}},{id:"211223",fullname:"西丰县",location:{lat:42.73835,lng:124.72734}},{id:"211224",fullname:"昌图县",location:{lat:42.78613,lng:124.11092}},{id:"211281",fullname:"调兵山市",location:{lat:42.46755,lng:123.5669}},{id:"211282",fullname:"开原市",location:{lat:42.54645,lng:124.0382}},{id:"211302",fullname:"双塔区",location:{lat:41.5657,lng:120.45372}},{id:"211303",fullname:"龙城区",location:{lat:41.59973,lng:120.41555}},{id:"211321",fullname:"朝阳县",location:{lat:41.36782,lng:120.29592}},{id:"211322",fullname:"建平县",location:{lat:41.4032,lng:119.64396}},{id:"211324",fullname:"喀喇沁左翼蒙古族自治县",location:{lat:41.12738,lng:119.74048}},{id:"211381",fullname:"北票市",location:{lat:41.8008,lng:120.77091}},{id:"211382",fullname:"凌源市",location:{lat:41.24548,lng:119.40134}},{id:"211402",fullname:"连山区",location:{lat:40.77526,lng:120.86908}},{id:"211403",fullname:"龙港区",location:{lat:40.73545,lng:120.89393}},{id:"211404",fullname:"南票区",location:{lat:41.10714,lng:120.74985}},{id:"211421",fullname:"绥中县",location:{lat:40.32565,lng:120.34431}},{id:"211422",fullname:"建昌县",location:{lat:40.82408,lng:119.83715}},{id:"211481",fullname:"兴城市",location:{lat:40.61019,lng:120.75619}},{id:"220102",fullname:"南关区",location:{lat:43.86414,lng:125.35043}},{id:"220103",fullname:"宽城区",location:{lat:43.94288,lng:125.32615}},{id:"220104",fullname:"朝阳区",location:{lat:43.83327,lng:125.28845}},{id:"220105",fullname:"二道区",location:{lat:43.86497,lng:125.37427}},{id:"220106",fullname:"绿园区",location:{lat:43.88041,lng:125.25606}},{id:"220112",fullname:"双阳区",location:{lat:43.52503,lng:125.66464}},{id:"220122",fullname:"农安县",location:{lat:44.43195,lng:125.18512}},{id:"220181",fullname:"九台市",location:{lat:44.15174,lng:125.83949}},{id:"220182",fullname:"榆树市",location:{lat:44.83989,lng:126.533}},{id:"220183",fullname:"德惠市",location:{lat:44.53709,lng:125.70558}},{id:"220202",fullname:"昌邑区",location:{lat:43.88187,lng:126.57436}},{id:"220203",fullname:"龙潭区",location:{lat:43.9106,lng:126.56223}},{id:"220204",fullname:"船营区",location:{lat:43.83395,lng:126.54113}},{id:"220211",fullname:"丰满区",location:{lat:43.82142,lng:126.56206}},{id:"220221",fullname:"永吉县",location:{lat:43.67253,lng:126.49754}},{id:"220281",fullname:"蛟河市",location:{lat:43.72393,lng:127.34477}},{id:"220282",fullname:"桦甸市",location:{lat:42.97208,lng:126.74627}},{id:"220283",fullname:"舒兰市",location:{lat:44.40586,lng:126.96532}},{id:"220284",fullname:"磐石市",location:{lat:42.94662,lng:126.06046}},{id:"220302",fullname:"铁西区",location:{lat:43.14635,lng:124.34515}},{id:"220303",fullname:"铁东区",location:{lat:43.16208,lng:124.40946}},{id:"220322",fullname:"梨树县",location:{lat:43.30717,lng:124.33564}},{id:"220323",fullname:"伊通满族自治县",location:{lat:43.34494,lng:125.30536}},{id:"220381",fullname:"公主岭市",location:{lat:43.50468,lng:124.8228}},{id:"220382",fullname:"双辽市",location:{lat:43.51845,lng:123.50296}},{id:"220402",fullname:"龙山区",location:{lat:42.9015,lng:125.13682}},{id:"220403",fullname:"西安区",location:{lat:42.92689,lng:125.14922}},{id:"220421",fullname:"东丰县",location:{lat:42.67704,lng:125.53056}},{id:"220422",fullname:"东辽县",location:{lat:42.92636,lng:124.99162}},{id:"220502",fullname:"东昌区",location:{lat:41.7285,lng:125.95513}},{id:"220503",fullname:"二道江区",location:{lat:41.7742,lng:126.04262}},{id:"220521",fullname:"通化县",location:{lat:41.3309,lng:126.20889}},{id:"220523",fullname:"辉南县",location:{lat:42.68499,lng:126.04687}},{id:"220524",fullname:"柳河县",location:{lat:42.2847,lng:125.74478}},{id:"220581",fullname:"梅河口市",location:{lat:42.53873,lng:125.7121}},{id:"220582",fullname:"集安市",location:{lat:41.12622,lng:126.19269}},{id:"220602",fullname:"浑江区",location:{lat:41.94507,lng:126.417}},{id:"220605",fullname:"江源区",location:{lat:42.05665,lng:126.59088}},{id:"220621",fullname:"抚松县",location:{lat:42.34202,lng:127.28036}},{id:"220622",fullname:"靖宇县",location:{lat:42.38872,lng:126.81329}},{id:"220623",fullname:"长白朝鲜族自治县",location:{lat:41.41997,lng:128.2005}},{id:"220681",fullname:"临江市",location:{lat:41.81193,lng:126.91798}},{id:"220702",fullname:"宁江区",location:{lat:45.17179,lng:124.81696}},{id:"220721",fullname:"前郭尔罗斯蒙古族自治县",location:{lat:45.1173,lng:124.82357}},{id:"220722",fullname:"长岭县",location:{lat:44.27591,lng:123.9673}},{id:"220723",fullname:"乾安县",location:{lat:45.00457,lng:124.02797}},{id:"220724",fullname:"扶余市",location:{lat:44.99014,lng:126.04972}},{id:"220802",fullname:"洮北区",location:{lat:45.6216,lng:122.85111}},{id:"220821",fullname:"镇赉县",location:{lat:45.84825,lng:123.19987}},{id:"220822",fullname:"通榆县",location:{lat:44.81296,lng:123.08831}},{id:"220881",fullname:"洮南市",location:{lat:45.33559,lng:122.78635}},{id:"220882",fullname:"大安市",location:{lat:45.50711,lng:124.29252}},{id:"222401",fullname:"延吉市",location:{lat:42.89107,lng:129.5091}},{id:"222402",fullname:"图们市",location:{lat:42.96805,lng:129.8439}},{id:"222403",fullname:"敦化市",location:{lat:43.37271,lng:128.23205}},{id:"222404",fullname:"珲春市",location:{lat:42.86249,lng:130.36577}},{id:"222405",fullname:"龙井市",location:{lat:42.76587,lng:129.42641}},{id:"222406",fullname:"和龙市",location:{lat:42.54641,lng:129.01079}},{id:"222424",fullname:"汪清县",location:{lat:43.31281,lng:129.77125}},{id:"222426",fullname:"安图县",location:{lat:43.11166,lng:128.8992}},{id:"230102",fullname:"道里区",location:{lat:45.75567,lng:126.61686}},{id:"230103",fullname:"南岗区",location:{lat:45.76021,lng:126.66837}},{id:"230104",fullname:"道外区",location:{lat:45.79201,lng:126.64932}},{id:"230108",fullname:"平房区",location:{lat:45.59799,lng:126.63768}},{id:"230109",fullname:"松北区",location:{lat:45.80825,lng:126.56279}},{id:"230110",fullname:"香坊区",location:{lat:45.70847,lng:126.66287}},{id:"230111",fullname:"呼兰区",location:{lat:45.88899,lng:126.58796}},{id:"230112",fullname:"阿城区",location:{lat:45.54774,lng:126.95717}},{id:"230123",fullname:"依兰县",location:{lat:46.32489,lng:129.56859}},{id:"230124",fullname:"方正县",location:{lat:45.85253,lng:128.82707}},{id:"230125",fullname:"宾县",location:{lat:45.75864,lng:127.48586}},{id:"230126",fullname:"巴彦县",location:{lat:46.08536,lng:127.4035}},{id:"230127",fullname:"木兰县",location:{lat:45.95038,lng:128.04392}},{id:"230128",fullname:"通河县",location:{lat:45.9901,lng:128.74607}},{id:"230129",fullname:"延寿县",location:{lat:45.4519,lng:128.33162}},{id:"230182",fullname:"双城区",location:{lat:45.38355,lng:126.31227}},{id:"230183",fullname:"尚志市",location:{lat:45.21102,lng:127.96027}},{id:"230184",fullname:"五常市",location:{lat:44.93191,lng:127.16746}},{id:"230202",fullname:"龙沙区",location:{lat:47.31742,lng:123.95763}},{id:"230203",fullname:"建华区",location:{lat:47.35434,lng:123.95546}},{id:"230204",fullname:"铁锋区",location:{lat:47.34076,lng:123.97807}},{id:"230205",fullname:"昂昂溪区",location:{lat:47.15517,lng:123.82234}},{id:"230206",fullname:"富拉尔基区",location:{lat:47.2089,lng:123.62937}},{id:"230207",fullname:"碾子山区",location:{lat:47.51698,lng:122.88777}},{id:"230208",fullname:"梅里斯达斡尔族区",location:{lat:47.3095,lng:123.75281}},{id:"230221",fullname:"龙江县",location:{lat:47.33737,lng:123.20483}},{id:"230223",fullname:"依安县",location:{lat:47.89349,lng:125.30621}},{id:"230224",fullname:"泰来县",location:{lat:46.39389,lng:123.41738}},{id:"230225",fullname:"甘南县",location:{lat:47.92037,lng:123.50624}},{id:"230227",fullname:"富裕县",location:{lat:47.77533,lng:124.47387}},{id:"230229",fullname:"克山县",location:{lat:48.03694,lng:125.87561}},{id:"230230",fullname:"克东县",location:{lat:48.04167,lng:126.24871}},{id:"230231",fullname:"拜泉县",location:{lat:47.59569,lng:126.10005}},{id:"230281",fullname:"讷河市",location:{lat:48.48419,lng:124.88397}},{id:"230302",fullname:"鸡冠区",location:{lat:45.30412,lng:130.98084}},{id:"230303",fullname:"恒山区",location:{lat:45.21072,lng:130.90499}},{id:"230304",fullname:"滴道区",location:{lat:45.34872,lng:130.84367}},{id:"230305",fullname:"梨树区",location:{lat:45.09203,lng:130.69708}},{id:"230306",fullname:"城子河区",location:{lat:45.33693,lng:131.01136}},{id:"230307",fullname:"麻山区",location:{lat:45.21213,lng:130.47817}},{id:"230321",fullname:"鸡东县",location:{lat:45.26002,lng:131.12408}},{id:"230381",fullname:"虎林市",location:{lat:45.76267,lng:132.93695}},{id:"230382",fullname:"密山市",location:{lat:45.52975,lng:131.84631}},{id:"230402",fullname:"向阳区",location:{lat:47.34254,lng:130.2943}},{id:"230403",fullname:"工农区",location:{lat:47.31872,lng:130.27482}},{id:"230404",fullname:"南山区",location:{lat:47.31506,lng:130.28714}},{id:"230405",fullname:"兴安区",location:{lat:47.25286,lng:130.23924}},{id:"230406",fullname:"东山区",location:{lat:47.33872,lng:130.31755}},{id:"230407",fullname:"兴山区",location:{lat:47.3846,lng:130.33302}},{id:"230421",fullname:"萝北县",location:{lat:47.57752,lng:130.8286}},{id:"230422",fullname:"绥滨县",location:{lat:47.28906,lng:131.85224}},{id:"230502",fullname:"尖山区",location:{lat:46.64618,lng:131.1584}},{id:"230503",fullname:"岭东区",location:{lat:46.54464,lng:131.15214}},{id:"230505",fullname:"四方台区",location:{lat:46.59426,lng:131.33446}},{id:"230506",fullname:"宝山区",location:{lat:46.57727,lng:131.40178}},{id:"230521",fullname:"集贤县",location:{lat:46.72844,lng:131.14115}},{id:"230522",fullname:"友谊县",location:{lat:46.76743,lng:131.80795}},{id:"230523",fullname:"宝清县",location:{lat:46.32695,lng:132.19708}},{id:"230524",fullname:"饶河县",location:{lat:46.7982,lng:134.01324}},{id:"230602",fullname:"萨尔图区",location:{lat:46.60302,lng:125.05422}},{id:"230603",fullname:"龙凤区",location:{lat:46.56182,lng:125.13415}},{id:"230604",fullname:"让胡路区",location:{lat:46.65225,lng:124.87083}},{id:"230605",fullname:"红岗区",location:{lat:46.39818,lng:124.89082}},{id:"230606",fullname:"大同区",location:{lat:46.03904,lng:124.81056}},{id:"230621",fullname:"肇州县",location:{lat:45.69886,lng:125.26859}},{id:"230622",fullname:"肇源县",location:{lat:45.5183,lng:125.07795}},{id:"230623",fullname:"林甸县",location:{lat:47.18298,lng:124.8713}},{id:"230624",fullname:"杜尔伯特蒙古族自治县",location:{lat:46.86231,lng:124.44278}},{id:"230702",fullname:"伊春区",location:{lat:47.72798,lng:128.90743}},{id:"230703",fullname:"南岔区",location:{lat:47.13799,lng:129.28365}},{id:"230704",fullname:"友好区",location:{lat:47.8538,lng:128.84071}},{id:"230705",fullname:"西林区",location:{lat:47.48081,lng:129.31286}},{id:"230706",fullname:"翠峦区",location:{lat:47.72582,lng:128.669}},{id:"230707",fullname:"新青区",location:{lat:48.29045,lng:129.53362}},{id:"230708",fullname:"美溪区",location:{lat:47.63508,lng:129.12925}},{id:"230709",fullname:"金山屯区",location:{lat:47.41303,lng:129.42899}},{id:"230710",fullname:"五营区",location:{lat:48.10802,lng:129.24536}},{id:"230711",fullname:"乌马河区",location:{lat:47.72669,lng:128.80019}},{id:"230712",fullname:"汤旺河区",location:{lat:48.45469,lng:129.57097}},{id:"230713",fullname:"带岭区",location:{lat:47.02834,lng:129.02057}},{id:"230714",fullname:"乌伊岭区",location:{lat:48.59057,lng:129.43773}},{id:"230715",fullname:"红星区",location:{lat:48.23941,lng:129.39081}},{id:"230716",fullname:"上甘岭区",location:{lat:47.97469,lng:129.02439}},{id:"230722",fullname:"嘉荫县",location:{lat:48.88942,lng:130.40308}},{id:"230781",fullname:"铁力市",location:{lat:46.98664,lng:128.03243}},{id:"230801",fullname:"佳木斯市区",location:{lat:46.80019,lng:130.3206}},{id:"230822",fullname:"桦南县",location:{lat:46.23925,lng:130.55366}},{id:"230826",fullname:"桦川县",location:{lat:47.023,lng:130.71898}},{id:"230828",fullname:"汤原县",location:{lat:46.73068,lng:129.90495}},{id:"230833",fullname:"抚远县",location:{lat:48.36485,lng:134.30795}},{id:"230881",fullname:"同江市",location:{lat:47.64213,lng:132.51101}},{id:"230882",fullname:"富锦市",location:{lat:47.25022,lng:132.03728}},{id:"230902",fullname:"新兴区",location:{lat:45.81597,lng:130.9321}},{id:"230903",fullname:"桃山区",location:{lat:45.76554,lng:131.02}},{id:"230904",fullname:"茄子河区",location:{lat:45.78487,lng:131.06693}},{id:"230921",fullname:"勃利县",location:{lat:45.75506,lng:130.59144}},{id:"231002",fullname:"东安区",location:{lat:44.58122,lng:129.62672}},{id:"231003",fullname:"阳明区",location:{lat:44.5963,lng:129.63559}},{id:"231004",fullname:"爱民区",location:{lat:44.59608,lng:129.59176}},{id:"231005",fullname:"西安区",location:{lat:44.5775,lng:129.6161}},{id:"231024",fullname:"东宁县",location:{lat:44.08694,lng:131.12463}},{id:"231025",fullname:"林口县",location:{lat:45.27782,lng:130.28315}},{id:"231081",fullname:"绥芬河市",location:{lat:44.4132,lng:131.15012}},{id:"231083",fullname:"海林市",location:{lat:44.59378,lng:129.38064}},{id:"231084",fullname:"宁安市",location:{lat:44.34018,lng:129.4828}},{id:"231085",fullname:"穆棱市",location:{lat:44.91883,lng:130.52468}},{id:"231102",fullname:"爱辉区",location:{lat:50.2521,lng:127.50048}},{id:"231121",fullname:"嫩江县",location:{lat:49.18572,lng:125.22094}},{id:"231123",fullname:"逊克县",location:{lat:49.56391,lng:128.47888}},{id:"231124",fullname:"孙吴县",location:{lat:49.42543,lng:127.33605}},{id:"231181",fullname:"北安市",location:{lat:48.24146,lng:126.49108}},{id:"231182",fullname:"五大连池市",location:{lat:48.51649,lng:126.20451}},{id:"231202",fullname:"北林区",location:{lat:46.6373,lng:126.98566}},{id:"231221",fullname:"望奎县",location:{lat:46.83281,lng:126.48602}},{id:"231222",fullname:"兰西县",location:{lat:46.25241,lng:126.28788}},{id:"231223",fullname:"青冈县",location:{lat:46.68966,lng:126.11387}},{id:"231224",fullname:"庆安县",location:{lat:46.8802,lng:127.50758}},{id:"231225",fullname:"明水县",location:{lat:47.17332,lng:125.906}},{id:"231226",fullname:"绥棱县",location:{lat:47.23609,lng:127.11478}},{id:"231281",fullname:"安达市",location:{lat:46.41773,lng:125.34379}},{id:"231282",fullname:"肇东市",location:{lat:46.05121,lng:125.9625}},{id:"231283",fullname:"海伦市",location:{lat:47.4621,lng:126.97338}},{id:"232721",fullname:"呼玛县",location:{lat:51.72606,lng:126.65291}},{id:"232722",fullname:"塔河县",location:{lat:52.33432,lng:124.71003}},{id:"232723",fullname:"漠河县",location:{lat:52.97209,lng:122.53864}},{id:"320102",fullname:"玄武区",location:{lat:32.04835,lng:118.79809}},{id:"320104",fullname:"秦淮区",location:{lat:32.03899,lng:118.7945}},{id:"320105",fullname:"建邺区",location:{lat:32.00335,lng:118.73145}},{id:"320106",fullname:"鼓楼区",location:{lat:32.06639,lng:118.77013}},{id:"320111",fullname:"浦口区",location:{lat:32.059,lng:118.62841}},{id:"320113",fullname:"栖霞区",location:{lat:32.09636,lng:118.90907}},{id:"320114",fullname:"雨花台区",location:{lat:31.99226,lng:118.7787}},{id:"320115",fullname:"江宁区",location:{lat:31.95266,lng:118.84002}},{id:"320116",fullname:"六合区",location:{lat:32.32222,lng:118.82155}},{id:"320117",fullname:"溧水区",location:{lat:31.38103,lng:118.96995}},{id:"320118",fullname:"高淳区",location:{lat:31.32751,lng:118.8921}},{id:"320202",fullname:"崇安区",location:{lat:31.56597,lng:120.30297}},{id:"320203",fullname:"南长区",location:{lat:31.56347,lng:120.30897}},{id:"320204",fullname:"北塘区",location:{lat:31.60583,lng:120.29374}},{id:"320205",fullname:"锡山区",location:{lat:31.58849,lng:120.35761}},{id:"320206",fullname:"惠山区",location:{lat:31.68096,lng:120.29834}},{id:"320211",fullname:"滨湖区",location:{lat:31.52853,lng:120.28429}},{id:"320281",fullname:"江阴市",location:{lat:31.92005,lng:120.2854}},{id:"320282",fullname:"宜兴市",location:{lat:31.34042,lng:119.82346}},{id:"320302",fullname:"鼓楼区",location:{lat:34.28823,lng:117.18554}},{id:"320303",fullname:"云龙区",location:{lat:34.249,lng:117.22942}},{id:"320305",fullname:"贾汪区",location:{lat:34.44308,lng:117.45353}},{id:"320311",fullname:"泉山区",location:{lat:34.24422,lng:117.19383}},{id:"320312",fullname:"铜山区",location:{lat:34.18044,lng:117.16898}},{id:"320321",fullname:"丰县",location:{lat:34.69396,lng:116.59532}},{id:"320322",fullname:"沛县",location:{lat:34.72166,lng:116.9375}},{id:"320324",fullname:"睢宁县",location:{lat:33.91274,lng:117.94108}},{id:"320381",fullname:"新沂市",location:{lat:34.36927,lng:118.35548}},{id:"320382",fullname:"邳州市",location:{lat:34.3352,lng:118.01246}},{id:"320402",fullname:"天宁区",location:{lat:31.77973,lng:119.97472}},{id:"320404",fullname:"钟楼区",location:{lat:31.80164,lng:119.90143}},{id:"320405",fullname:"戚墅堰区",location:{lat:31.75713,lng:120.0482}},{id:"320411",fullname:"新北区",location:{lat:31.83052,lng:119.97147}},{id:"320412",fullname:"武进区",location:{lat:31.70165,lng:119.94311}},{id:"320481",fullname:"溧阳市",location:{lat:31.41586,lng:119.4846}},{id:"320482",fullname:"金坛市",location:{lat:31.72322,lng:119.59794}},{id:"320505",fullname:"虎丘区",location:{lat:31.29579,lng:120.57186}},{id:"320506",fullname:"吴中区",location:{lat:31.26249,lng:120.63212}},{id:"320507",fullname:"相城区",location:{lat:31.36897,lng:120.64247}},{id:"320508",fullname:"姑苏区",location:{lat:31.30227,lng:120.63132}},{id:"320509",fullname:"吴江区",location:{lat:31.13762,lng:120.64504}},{id:"320581",fullname:"常熟市",location:{lat:31.65382,lng:120.75237}},{id:"320582",fullname:"张家港市",location:{lat:31.87547,lng:120.5555}},{id:"320583",fullname:"昆山市",location:{lat:31.38475,lng:120.98181}},{id:"320585",fullname:"太仓市",location:{lat:31.45911,lng:121.12975}},{id:"320602",fullname:"崇川区",location:{lat:32.00986,lng:120.85737}},{id:"320611",fullname:"港闸区",location:{lat:32.03141,lng:120.81813}},{id:"320612",fullname:"通州区",location:{lat:32.06764,lng:121.07299}},{id:"320621",fullname:"海安县",location:{lat:32.53308,lng:120.46759}},{id:"320623",fullname:"如东县",location:{lat:32.32956,lng:121.18502}},{id:"320681",fullname:"启东市",location:{lat:31.80805,lng:121.65787}},{id:"320682",fullname:"如皋市",location:{lat:32.3716,lng:120.57382}},{id:"320684",fullname:"海门市",location:{lat:31.87165,lng:121.18179}},{id:"320703",fullname:"连云区",location:{lat:34.75974,lng:119.33894}},{id:"320706",fullname:"海州区",location:{lat:34.57203,lng:119.16348}},{id:"320721",fullname:"赣榆区",location:{lat:34.84065,lng:119.1773}},{id:"320722",fullname:"东海县",location:{lat:34.54216,lng:118.77147}},{id:"320723",fullname:"灌云县",location:{lat:34.28407,lng:119.24096}},{id:"320724",fullname:"灌南县",location:{lat:34.08673,lng:119.31563}},{id:"320802",fullname:"清河区",location:{lat:33.59952,lng:119.00805}},{id:"320803",fullname:"淮安区",location:{lat:33.50306,lng:119.14108}},{id:"320804",fullname:"淮阴区",location:{lat:33.63175,lng:119.0349}},{id:"320811",fullname:"清浦区",location:{lat:33.55308,lng:119.02662}},{id:"320826",fullname:"涟水县",location:{lat:33.78098,lng:119.26089}},{id:"320829",fullname:"洪泽县",location:{lat:33.29433,lng:118.8735}},{id:"320830",fullname:"盱眙县",location:{lat:33.01089,lng:118.54499}},{id:"320831",fullname:"金湖县",location:{lat:33.02359,lng:119.02043}},{id:"320902",fullname:"亭湖区",location:{lat:33.38893,lng:120.1953}},{id:"320903",fullname:"盐都区",location:{lat:33.33732,lng:120.15448}},{id:"320921",fullname:"响水县",location:{lat:34.19919,lng:119.57839}},{id:"320922",fullname:"滨海县",location:{lat:33.98975,lng:119.82064}},{id:"320923",fullname:"阜宁县",location:{lat:33.75931,lng:119.80258}},{id:"320924",fullname:"射阳县",location:{lat:33.77496,lng:120.25815}},{id:"320925",fullname:"建湖县",location:{lat:33.46406,lng:119.79858}},{id:"320981",fullname:"东台市",location:{lat:32.86695,lng:120.3205}},{id:"320982",fullname:"大丰市",location:{lat:33.20107,lng:120.50102}},{id:"321002",fullname:"广陵区",location:{lat:32.39463,lng:119.43157}},{id:"321003",fullname:"邗江区",location:{lat:32.37654,lng:119.39823}},{id:"321012",fullname:"江都区",location:{lat:32.43458,lng:119.57006}},{id:"321023",fullname:"宝应县",location:{lat:33.24142,lng:119.35841}},{id:"321081",fullname:"仪征市",location:{lat:32.27203,lng:119.18444}},{id:"321084",fullname:"高邮市",location:{lat:32.78112,lng:119.45558}},{id:"321102",fullname:"京口区",location:{lat:32.19811,lng:119.46962}},{id:"321111",fullname:"润州区",location:{lat:32.19525,lng:119.41217}},{id:"321112",fullname:"丹徒区",location:{lat:32.13188,lng:119.43396}},{id:"321181",fullname:"丹阳市",location:{lat:32.00945,lng:119.60694}},{id:"321182",fullname:"扬中市",location:{lat:32.23702,lng:119.79682}},{id:"321183",fullname:"句容市",location:{lat:31.94482,lng:119.16864}},{id:"321202",fullname:"海陵区",location:{lat:32.49098,lng:119.91956}},{id:"321203",fullname:"高港区",location:{lat:32.31841,lng:119.88116}},{id:"321204",fullname:"姜堰区",location:{lat:32.50882,lng:120.12701}},{id:"321281",fullname:"兴化市",location:{lat:32.91041,lng:119.85272}},{id:"321282",fullname:"靖江市",location:{lat:32.01494,lng:120.27454}},{id:"321283",fullname:"泰兴市",location:{lat:32.17191,lng:120.052}},{id:"321302",fullname:"宿城区",location:{lat:33.96315,lng:118.24238}},{id:"321311",fullname:"宿豫区",location:{lat:33.94686,lng:118.33066}},{id:"321322",fullname:"沭阳县",location:{lat:34.11215,lng:118.80406}},{id:"321323",fullname:"泗阳县",location:{lat:33.72101,lng:118.70335}},{id:"321324",fullname:"泗洪县",location:{lat:33.459,lng:118.21624}},{id:"330102",fullname:"上城区",location:{lat:30.24259,lng:120.16929}},{id:"330103",fullname:"下城区",location:{lat:30.28122,lng:120.18117}},{id:"330104",fullname:"江干区",location:{lat:30.25727,lng:120.20523}},{id:"330105",fullname:"拱墅区",location:{lat:30.31974,lng:120.1421}},{id:"330106",fullname:"西湖区",location:{lat:30.25961,lng:120.13026}},{id:"330108",fullname:"滨江区",location:{lat:30.2084,lng:120.21201}},{id:"330109",fullname:"萧山区",location:{lat:30.18534,lng:120.26457}},{id:"330110",fullname:"余杭区",location:{lat:30.41875,lng:120.2985}},{id:"330122",fullname:"桐庐县",location:{lat:29.79317,lng:119.6915}},{id:"330127",fullname:"淳安县",location:{lat:29.60852,lng:119.04188}},{id:"330182",fullname:"建德市",location:{lat:29.47475,lng:119.28121}},{id:"330183",fullname:"富阳市",location:{lat:30.04885,lng:119.96043}},{id:"330185",fullname:"临安市",location:{lat:30.23383,lng:119.7248}},{id:"330203",fullname:"海曙区",location:{lat:29.85957,lng:121.55084}},{id:"330204",fullname:"江东区",location:{lat:29.86698,lng:121.57011}},{id:"330205",fullname:"江北区",location:{lat:29.88615,lng:121.55468}},{id:"330206",fullname:"北仑区",location:{lat:29.89889,lng:121.84431}},{id:"330211",fullname:"镇海区",location:{lat:29.94899,lng:121.71624}},{id:"330212",fullname:"鄞州区",location:{lat:29.8172,lng:121.547}},{id:"330225",fullname:"象山县",location:{lat:29.47665,lng:121.86932}},{id:"330226",fullname:"宁海县",location:{lat:29.28807,lng:121.42961}},{id:"330281",fullname:"余姚市",location:{lat:30.03711,lng:121.15435}},{id:"330282",fullname:"慈溪市",location:{lat:30.16964,lng:121.26647}},{id:"330283",fullname:"奉化市",location:{lat:29.65503,lng:121.40686}},{id:"330302",fullname:"鹿城区",location:{lat:28.01469,lng:120.65523}},{id:"330303",fullname:"龙湾区",location:{lat:27.93252,lng:120.81303}},{id:"330304",fullname:"瓯海区",location:{lat:28.00708,lng:120.63768}},{id:"330322",fullname:"洞头县",location:{lat:27.83616,lng:121.1572}},{id:"330324",fullname:"永嘉县",location:{lat:28.15336,lng:120.69171}},{id:"330326",fullname:"平阳县",location:{lat:27.6621,lng:120.56595}},{id:"330327",fullname:"苍南县",location:{lat:27.51743,lng:120.42631}},{id:"330328",fullname:"文成县",location:{lat:27.78712,lng:120.09137}},{id:"330329",fullname:"泰顺县",location:{lat:27.55639,lng:119.7175}},{id:"330381",fullname:"瑞安市",location:{lat:27.77838,lng:120.65518}},{id:"330382",fullname:"乐清市",location:{lat:28.11289,lng:120.98338}},{id:"330402",fullname:"南湖区",location:{lat:30.74744,lng:120.78483}},{id:"330411",fullname:"秀洲区",location:{lat:30.76388,lng:120.7092}},{id:"330421",fullname:"嘉善县",location:{lat:30.83075,lng:120.92716}},{id:"330424",fullname:"海盐县",location:{lat:30.52553,lng:120.94579}},{id:"330481",fullname:"海宁市",location:{lat:30.50938,lng:120.68102}},{id:"330482",fullname:"平湖市",location:{lat:30.67585,lng:121.01606}},{id:"330483",fullname:"桐乡市",location:{lat:30.63074,lng:120.56432}},{id:"330502",fullname:"吴兴区",location:{lat:30.85816,lng:120.18562}},{id:"330503",fullname:"南浔区",location:{lat:30.84979,lng:120.41847}},{id:"330521",fullname:"德清县",location:{lat:30.54269,lng:119.97754}},{id:"330522",fullname:"长兴县",location:{lat:31.02663,lng:119.91011}},{id:"330523",fullname:"安吉县",location:{lat:30.63824,lng:119.68219}},{id:"330602",fullname:"越城区",location:{lat:29.98899,lng:120.58199}},{id:"330603",fullname:"柯桥区",location:{lat:30.08189,lng:120.49476}},{id:"330604",fullname:"上虞区",location:{lat:30.03227,lng:120.86858}},{id:"330624",fullname:"新昌县",location:{lat:29.49983,lng:120.90385}},{id:"330681",fullname:"诸暨市",location:{lat:29.71364,lng:120.23632}},{id:"330683",fullname:"嵊州市",location:{lat:29.58849,lng:120.8217}},{id:"330702",fullname:"婺城区",location:{lat:29.08624,lng:119.5715}},{id:"330703",fullname:"金东区",location:{lat:29.09914,lng:119.69311}},{id:"330723",fullname:"武义县",location:{lat:28.8926,lng:119.81651}},{id:"330726",fullname:"浦江县",location:{lat:29.45251,lng:119.89206}},{id:"330727",fullname:"磐安县",location:{lat:29.05403,lng:120.45022}},{id:"330781",fullname:"兰溪市",location:{lat:29.20838,lng:119.46051}},{id:"330782",fullname:"义乌市",location:{lat:29.30558,lng:120.07468}},{id:"330783",fullname:"东阳市",location:{lat:29.28946,lng:120.24191}},{id:"330784",fullname:"永康市",location:{lat:28.88851,lng:120.04731}},{id:"330802",fullname:"柯城区",location:{lat:28.96864,lng:118.87117}},{id:"330803",fullname:"衢江区",location:{lat:28.97964,lng:118.95919}},{id:"330822",fullname:"常山县",location:{lat:28.90141,lng:118.51116}},{id:"330824",fullname:"开化县",location:{lat:29.13609,lng:118.41422}},{id:"330825",fullname:"龙游县",location:{lat:29.02827,lng:119.17225}},{id:"330881",fullname:"江山市",location:{lat:28.73725,lng:118.6269}},{id:"330902",fullname:"定海区",location:{lat:30.01979,lng:122.10679}},{id:"330903",fullname:"普陀区",location:{lat:29.9492,lng:122.30278}},{id:"330921",fullname:"岱山县",location:{lat:30.24369,lng:122.20498}},{id:"330922",fullname:"嵊泗县",location:{lat:30.72573,lng:122.45137}},{id:"331002",fullname:"椒江区",location:{lat:28.67307,lng:121.44297}},{id:"331003",fullname:"黄岩区",location:{lat:28.64965,lng:121.26295}},{id:"331004",fullname:"路桥区",location:{lat:28.58265,lng:121.36508}},{id:"331021",fullname:"玉环县",location:{lat:28.13589,lng:121.23164}},{id:"331022",fullname:"三门县",location:{lat:29.10467,lng:121.39568}},{id:"331023",fullname:"天台县",location:{lat:29.14304,lng:121.00728}},{id:"331024",fullname:"仙居县",location:{lat:28.84683,lng:120.72881}},{id:"331081",fullname:"温岭市",location:{lat:28.3718,lng:121.38599}},{id:"331082",fullname:"临海市",location:{lat:28.8584,lng:121.14495}},{id:"331102",fullname:"莲都区",location:{lat:28.44594,lng:119.91284}},{id:"331121",fullname:"青田县",location:{lat:28.13987,lng:120.28955}},{id:"331122",fullname:"缙云县",location:{lat:28.65928,lng:120.09158}},{id:"331123",fullname:"遂昌县",location:{lat:28.59213,lng:119.27602}},{id:"331124",fullname:"松阳县",location:{lat:28.44947,lng:119.48202}},{id:"331125",fullname:"云和县",location:{lat:28.11591,lng:119.5734}},{id:"331126",fullname:"庆元县",location:{lat:27.61913,lng:119.06266}},{id:"331127",fullname:"景宁畲族自治县",location:{lat:27.9732,lng:119.63581}},{id:"331181",fullname:"龙泉市",location:{lat:28.07434,lng:119.14168}},{id:"340102",fullname:"瑶海区",location:{lat:31.85797,lng:117.30949}},{id:"340103",fullname:"庐阳区",location:{lat:31.87872,lng:117.26497}},{id:"340104",fullname:"蜀山区",location:{lat:31.8512,lng:117.26061}},{id:"340111",fullname:"包河区",location:{lat:31.79352,lng:117.3099}},{id:"340121",fullname:"长丰县",location:{lat:32.47796,lng:117.16766}},{id:"340122",fullname:"肥东县",location:{lat:31.8877,lng:117.46928}},{id:"340123",fullname:"肥西县",location:{lat:31.70653,lng:117.1584}},{id:"340124",fullname:"庐江县",location:{lat:31.25567,lng:117.28736}},{id:"340181",fullname:"巢湖市",location:{lat:31.62329,lng:117.88937}},{id:"340202",fullname:"镜湖区",location:{lat:31.34072,lng:118.38548}},{id:"340203",fullname:"弋江区",location:{lat:31.31185,lng:118.37272}},{id:"340207",fullname:"鸠江区",location:{lat:31.36959,lng:118.39236}},{id:"340208",fullname:"三山区",location:{lat:31.22436,lng:118.23464}},{id:"340221",fullname:"芜湖县",location:{lat:31.13479,lng:118.57529}},{id:"340222",fullname:"繁昌县",location:{lat:31.08291,lng:118.19934}},{id:"340223",fullname:"南陵县",location:{lat:30.91465,lng:118.33405}},{id:"340225",fullname:"无为县",location:{lat:31.30317,lng:117.90224}},{id:"340302",fullname:"龙子湖区",location:{lat:32.9428,lng:117.39347}},{id:"340303",fullname:"蚌山区",location:{lat:32.94448,lng:117.36779}},{id:"340304",fullname:"禹会区",location:{lat:32.92921,lng:117.34211}},{id:"340311",fullname:"淮上区",location:{lat:32.96436,lng:117.35996}},{id:"340321",fullname:"怀远县",location:{lat:32.9701,lng:117.20514}},{id:"340322",fullname:"五河县",location:{lat:33.14507,lng:117.88529}},{id:"340323",fullname:"固镇县",location:{lat:33.31769,lng:117.31666}},{id:"340402",fullname:"大通区",location:{lat:32.63149,lng:117.05335}},{id:"340403",fullname:"田家庵区",location:{lat:32.64709,lng:117.01743}},{id:"340404",fullname:"谢家集区",location:{lat:32.59996,lng:116.85913}},{id:"340405",fullname:"八公山区",location:{lat:32.63142,lng:116.83359}},{id:"340406",fullname:"潘集区",location:{lat:32.77263,lng:116.83626}},{id:"340421",fullname:"凤台县",location:{lat:32.70946,lng:116.71077}},{id:"340503",fullname:"花山区",location:{lat:31.69996,lng:118.5115}},{id:"340504",fullname:"雨山区",location:{lat:31.68216,lng:118.49853}},{id:"340521",fullname:"当涂县",location:{lat:31.5699,lng:118.4978}},{id:"340522",fullname:"含山县",location:{lat:31.73358,lng:118.10241}},{id:"340523",fullname:"和县",location:{lat:31.74423,lng:118.35145}},{id:"340602",fullname:"杜集区",location:{lat:34.22526,lng:117}},{id:"340603",fullname:"相山区",location:{lat:33.95999,lng:116.79425}},{id:"340604",fullname:"烈山区",location:{lat:33.89577,lng:116.8132}},{id:"340621",fullname:"濉溪县",location:{lat:33.91537,lng:116.7662}},{id:"340702",fullname:"铜官山区",location:{lat:30.93426,lng:117.81541}},{id:"340703",fullname:"狮子山区",location:{lat:30.95614,lng:117.87431}},{id:"340711",fullname:"郊区",location:{lat:30.77372,lng:117.75643}},{id:"340721",fullname:"铜陵县",location:{lat:30.95271,lng:117.79147}},{id:"340802",fullname:"迎江区",location:{lat:30.51155,lng:117.09081}},{id:"340803",fullname:"大观区",location:{lat:30.51227,lng:117.03424}},{id:"340811",fullname:"宜秀区",location:{lat:30.61328,lng:116.98726}},{id:"340822",fullname:"怀宁县",location:{lat:30.73381,lng:116.82974}},{id:"340823",fullname:"枞阳县",location:{lat:30.69961,lng:117.22019}},{id:"340824",fullname:"潜山县",location:{lat:30.63107,lng:116.58133}},{id:"340825",fullname:"太湖县",location:{lat:30.45411,lng:116.30885}},{id:"340826",fullname:"宿松县",location:{lat:30.15363,lng:116.1292}},{id:"340827",fullname:"望江县",location:{lat:30.12442,lng:116.69423}},{id:"340828",fullname:"岳西县",location:{lat:30.84939,lng:116.35999}},{id:"340881",fullname:"桐城市",location:{lat:31.03585,lng:116.97416}},{id:"341002",fullname:"屯溪区",location:{lat:29.6958,lng:118.3151}},{id:"341003",fullname:"黄山区",location:{lat:30.27296,lng:118.14161}},{id:"341004",fullname:"徽州区",location:{lat:29.82794,lng:118.33681}},{id:"341021",fullname:"歙县",location:{lat:29.86076,lng:118.41359}},{id:"341022",fullname:"休宁县",location:{lat:29.78618,lng:118.18245}},{id:"341023",fullname:"黟县",location:{lat:29.92476,lng:117.93835}},{id:"341024",fullname:"祁门县",location:{lat:29.85409,lng:117.71715}},{id:"341102",fullname:"琅琊区",location:{lat:32.2948,lng:118.30553}},{id:"341103",fullname:"南谯区",location:{lat:32.35317,lng:118.17138}},{id:"341122",fullname:"来安县",location:{lat:32.45217,lng:118.43575}},{id:"341124",fullname:"全椒县",location:{lat:32.0853,lng:118.27303}},{id:"341125",fullname:"定远县",location:{lat:32.52998,lng:117.69856}},{id:"341126",fullname:"凤阳县",location:{lat:32.866,lng:117.56124}},{id:"341181",fullname:"天长市",location:{lat:32.68945,lng:119.00355}},{id:"341182",fullname:"明光市",location:{lat:32.77699,lng:117.98944}},{id:"341202",fullname:"颍州区",location:{lat:32.88327,lng:115.80672}},{id:"341203",fullname:"颍东区",location:{lat:32.91303,lng:115.85668}},{id:"341204",fullname:"颍泉区",location:{lat:32.92505,lng:115.80847}},{id:"341221",fullname:"临泉县",location:{lat:33.06457,lng:115.25811}},{id:"341222",fullname:"太和县",location:{lat:33.16026,lng:115.62203}},{id:"341225",fullname:"阜南县",location:{lat:32.65887,lng:115.59319}},{id:"341226",fullname:"颍上县",location:{lat:32.62893,lng:116.26455}},{id:"341282",fullname:"界首市",location:{lat:33.25718,lng:115.37451}},{id:"341302",fullname:"埇桥区",location:{lat:33.64004,lng:116.97728}},{id:"341321",fullname:"砀山县",location:{lat:34.44097,lng:116.36606}},{id:"341322",fullname:"萧县",location:{lat:34.18876,lng:116.94724}},{id:"341323",fullname:"灵璧县",location:{lat:33.54232,lng:117.55855}},{id:"341324",fullname:"泗县",location:{lat:33.48289,lng:117.91106}},{id:"341502",fullname:"金安区",location:{lat:31.74933,lng:116.53949}},{id:"341503",fullname:"裕安区",location:{lat:31.73795,lng:116.47995}},{id:"341521",fullname:"寿县",location:{lat:32.57332,lng:116.78708}},{id:"341522",fullname:"霍邱县",location:{lat:32.3532,lng:116.27823}},{id:"341523",fullname:"舒城县",location:{lat:31.46209,lng:116.9487}},{id:"341524",fullname:"金寨县",location:{lat:31.72719,lng:115.93418}},{id:"341525",fullname:"霍山县",location:{lat:31.39279,lng:116.33269}},{id:"341602",fullname:"谯城区",location:{lat:33.87641,lng:115.77914}},{id:"341621",fullname:"涡阳县",location:{lat:33.49285,lng:116.21581}},{id:"341622",fullname:"蒙城县",location:{lat:33.26584,lng:116.5645}},{id:"341623",fullname:"利辛县",location:{lat:33.14484,lng:116.20839}},{id:"341702",fullname:"贵池区",location:{lat:30.68673,lng:117.56733}},{id:"341721",fullname:"东至县",location:{lat:30.09663,lng:117.02766}},{id:"341722",fullname:"石台县",location:{lat:30.21026,lng:117.48619}},{id:"341723",fullname:"青阳县",location:{lat:30.63935,lng:117.84749}},{id:"341802",fullname:"宣州区",location:{lat:30.94622,lng:118.75634}},{id:"341821",fullname:"郎溪县",location:{lat:31.12658,lng:119.17944}},{id:"341822",fullname:"广德县",location:{lat:30.8938,lng:119.41705}},{id:"341823",fullname:"泾县",location:{lat:30.68853,lng:118.4197}},{id:"341824",fullname:"绩溪县",location:{lat:30.06633,lng:118.57993}},{id:"341825",fullname:"旌德县",location:{lat:30.28636,lng:118.54045}},{id:"341881",fullname:"宁国市",location:{lat:30.63364,lng:118.98336}},{id:"350102",fullname:"鼓楼区",location:{lat:26.08198,lng:119.30405}},{id:"350103",fullname:"台江区",location:{lat:26.0527,lng:119.31414}},{id:"350104",fullname:"仓山区",location:{lat:26.04769,lng:119.27345}},{id:"350105",fullname:"马尾区",location:{lat:25.98939,lng:119.4556}},{id:"350111",fullname:"晋安区",location:{lat:26.08135,lng:119.32842}},{id:"350121",fullname:"闽侯县",location:{lat:26.15021,lng:119.13139}},{id:"350122",fullname:"连江县",location:{lat:26.19753,lng:119.53957}},{id:"350123",fullname:"罗源县",location:{lat:26.48939,lng:119.54969}},{id:"350124",fullname:"闽清县",location:{lat:26.22117,lng:118.86352}},{id:"350125",fullname:"永泰县",location:{lat:25.86672,lng:118.93258}},{id:"350128",fullname:"平潭县",location:{lat:25.49876,lng:119.7901}},{id:"350181",fullname:"福清市",location:{lat:25.72024,lng:119.38411}},{id:"350182",fullname:"长乐市",location:{lat:25.96283,lng:119.52324}},{id:"350203",fullname:"思明区",location:{lat:24.44579,lng:118.08243}},{id:"350205",fullname:"海沧区",location:{lat:24.48405,lng:118.03394}},{id:"350206",fullname:"湖里区",location:{lat:24.5118,lng:118.14577}},{id:"350211",fullname:"集美区",location:{lat:24.57591,lng:118.09728}},{id:"350212",fullname:"同安区",location:{lat:24.72286,lng:118.15207}},{id:"350213",fullname:"翔安区",location:{lat:24.61854,lng:118.24722}},{id:"350302",fullname:"城厢区",location:{lat:25.41878,lng:118.99472}},{id:"350303",fullname:"涵江区",location:{lat:25.45879,lng:119.1163}},{id:"350304",fullname:"荔城区",location:{lat:25.43131,lng:119.01501}},{id:"350305",fullname:"秀屿区",location:{lat:25.31839,lng:119.10642}},{id:"350322",fullname:"仙游县",location:{lat:25.36215,lng:118.69181}},{id:"350402",fullname:"梅列区",location:{lat:26.27168,lng:117.64579}},{id:"350403",fullname:"三元区",location:{lat:26.23381,lng:117.6081}},{id:"350421",fullname:"明溪县",location:{lat:26.35595,lng:117.20219}},{id:"350423",fullname:"清流县",location:{lat:26.17781,lng:116.81694}},{id:"350424",fullname:"宁化县",location:{lat:26.26178,lng:116.65443}},{id:"350425",fullname:"大田县",location:{lat:25.69261,lng:117.84713}},{id:"350426",fullname:"尤溪县",location:{lat:26.17004,lng:118.19049}},{id:"350427",fullname:"沙县",location:{lat:26.39617,lng:117.79268}},{id:"350428",fullname:"将乐县",location:{lat:26.72904,lng:117.47096}},{id:"350429",fullname:"泰宁县",location:{lat:26.90012,lng:117.1758}},{id:"350430",fullname:"建宁县",location:{lat:26.83092,lng:116.84604}},{id:"350481",fullname:"永安市",location:{lat:25.94138,lng:117.36518}},{id:"350502",fullname:"鲤城区",location:{lat:24.9075,lng:118.58687}},{id:"350503",fullname:"丰泽区",location:{lat:24.88946,lng:118.613}},{id:"350504",fullname:"洛江区",location:{lat:24.9399,lng:118.6712}},{id:"350505",fullname:"泉港区",location:{lat:25.12014,lng:118.91596}},{id:"350521",fullname:"惠安县",location:{lat:25.03065,lng:118.79695}},{id:"350524",fullname:"安溪县",location:{lat:25.05544,lng:118.18685}},{id:"350525",fullname:"永春县",location:{lat:25.32188,lng:118.29424}},{id:"350526",fullname:"德化县",location:{lat:25.4916,lng:118.24098}},{id:"350527",fullname:"金门县",location:{lat:24.41774,lng:118.22694}},{id:"350581",fullname:"石狮市",location:{lat:24.73172,lng:118.64805}},{id:"350582",fullname:"晋江市",location:{lat:24.78144,lng:118.55199}},{id:"350583",fullname:"南安市",location:{lat:24.9604,lng:118.38627}},{id:"350602",fullname:"芗城区",location:{lat:24.51067,lng:117.65391}},{id:"350603",fullname:"龙文区",location:{lat:24.5033,lng:117.70984}},{id:"350622",fullname:"云霄县",location:{lat:23.95806,lng:117.33965}},{id:"350623",fullname:"漳浦县",location:{lat:24.1171,lng:117.61372}},{id:"350624",fullname:"诏安县",location:{lat:23.71152,lng:117.17508}},{id:"350625",fullname:"长泰县",location:{lat:24.6258,lng:117.75948}},{id:"350626",fullname:"东山县",location:{lat:23.70132,lng:117.42964}},{id:"350627",fullname:"南靖县",location:{lat:24.51453,lng:117.35742}},{id:"350628",fullname:"平和县",location:{lat:24.36344,lng:117.31587}},{id:"350629",fullname:"华安县",location:{lat:25.00446,lng:117.53414}},{id:"350681",fullname:"龙海市",location:{lat:24.44658,lng:117.81813}},{id:"350702",fullname:"延平区",location:{lat:26.63798,lng:118.18202}},{id:"350721",fullname:"顺昌县",location:{lat:26.79301,lng:117.81036}},{id:"350722",fullname:"浦城县",location:{lat:27.91721,lng:118.54138}},{id:"350723",fullname:"光泽县",location:{lat:27.54107,lng:117.33387}},{id:"350724",fullname:"松溪县",location:{lat:27.52629,lng:118.7854}},{id:"350725",fullname:"政和县",location:{lat:27.36609,lng:118.85754}},{id:"350781",fullname:"邵武市",location:{lat:27.34036,lng:117.49253}},{id:"350782",fullname:"武夷山市",location:{lat:27.75671,lng:118.03548}},{id:"350783",fullname:"建瓯市",location:{lat:27.02266,lng:118.30498}},{id:"350784",fullname:"建阳区",location:{lat:27.33175,lng:118.12043}},{id:"350802",fullname:"新罗区",location:{lat:25.09839,lng:117.03736}},{id:"350821",fullname:"长汀县",location:{lat:25.83348,lng:116.35765}},{id:"350822",fullname:"永定县",location:{lat:24.72303,lng:116.73202}},{id:"350823",fullname:"上杭县",location:{lat:25.04943,lng:116.42026}},{id:"350824",fullname:"武平县",location:{lat:25.09535,lng:116.10039}},{id:"350825",fullname:"连城县",location:{lat:25.70997,lng:116.75486}},{id:"350881",fullname:"漳平市",location:{lat:25.29013,lng:117.42001}},{id:"350902",fullname:"蕉城区",location:{lat:26.66022,lng:119.52623}},{id:"350921",fullname:"霞浦县",location:{lat:26.88517,lng:120.00556}},{id:"350922",fullname:"古田县",location:{lat:26.57762,lng:118.74606}},{id:"350923",fullname:"屏南县",location:{lat:26.90853,lng:118.98578}},{id:"350924",fullname:"寿宁县",location:{lat:27.46054,lng:119.50479}},{id:"350925",fullname:"周宁县",location:{lat:27.10474,lng:119.33899}},{id:"350926",fullname:"柘荣县",location:{lat:27.23513,lng:119.90085}},{id:"350981",fullname:"福安市",location:{lat:27.08797,lng:119.64768}},{id:"350982",fullname:"福鼎市",location:{lat:27.32436,lng:120.21671}},{id:"360102",fullname:"东湖区",location:{lat:28.68503,lng:115.89925}},{id:"360103",fullname:"西湖区",location:{lat:28.65619,lng:115.87683}},{id:"360104",fullname:"青云谱区",location:{lat:28.62084,lng:115.9258}},{id:"360105",fullname:"湾里区",location:{lat:28.71479,lng:115.73083}},{id:"360111",fullname:"青山湖区",location:{lat:28.68194,lng:115.96191}},{id:"360121",fullname:"南昌县",location:{lat:28.54538,lng:115.94422}},{id:"360122",fullname:"新建县",location:{lat:28.33369,lng:115.65112}},{id:"360123",fullname:"安义县",location:{lat:28.84444,lng:115.54927}},{id:"360124",fullname:"进贤县",location:{lat:28.37679,lng:116.24249}},{id:"360202",fullname:"昌江区",location:{lat:29.27324,lng:117.18366}},{id:"360203",fullname:"珠山区",location:{lat:29.30005,lng:117.20275}},{id:"360222",fullname:"浮梁县",location:{lat:29.35159,lng:117.21523}},{id:"360281",fullname:"乐平市",location:{lat:28.96173,lng:117.129}},{id:"360302",fullname:"安源区",location:{lat:27.61552,lng:113.87163}},{id:"360313",fullname:"湘东区",location:{lat:27.64069,lng:113.73421}},{id:"360321",fullname:"莲花县",location:{lat:27.12761,lng:113.96123}},{id:"360322",fullname:"上栗县",location:{lat:27.88042,lng:113.79537}},{id:"360323",fullname:"芦溪县",location:{lat:27.63064,lng:114.02956}},{id:"360402",fullname:"庐山区",location:{lat:29.67183,lng:115.98913}},{id:"360403",fullname:"浔阳区",location:{lat:29.72776,lng:115.98999}},{id:"360421",fullname:"九江县",location:{lat:29.76108,lng:116.07484}},{id:"360423",fullname:"武宁县",location:{lat:29.25622,lng:115.10065}},{id:"360424",fullname:"修水县",location:{lat:29.02533,lng:114.54688}},{id:"360425",fullname:"永修县",location:{lat:29.02097,lng:115.80916}},{id:"360426",fullname:"德安县",location:{lat:29.31344,lng:115.75605}},{id:"360427",fullname:"星子县",location:{lat:29.44821,lng:116.04512}},{id:"360428",fullname:"都昌县",location:{lat:29.27307,lng:116.20409}},{id:"360429",fullname:"湖口县",location:{lat:29.73942,lng:116.22025}},{id:"360430",fullname:"彭泽县",location:{lat:29.89613,lng:116.54911}},{id:"360481",fullname:"瑞昌市",location:{lat:29.67658,lng:115.68103}},{id:"360502",fullname:"渝水区",location:{lat:27.80038,lng:114.94461}},{id:"360521",fullname:"分宜县",location:{lat:27.81476,lng:114.69191}},{id:"360602",fullname:"月湖区",location:{lat:28.23902,lng:117.03708}},{id:"360622",fullname:"余江县",location:{lat:28.20991,lng:116.81834}},{id:"360681",fullname:"贵溪市",location:{lat:28.29252,lng:117.24525}},{id:"360702",fullname:"章贡区",location:{lat:25.81751,lng:114.92085}},{id:"360703",fullname:"南康区",location:{lat:25.66144,lng:114.76535}},{id:"360721",fullname:"赣县",location:{lat:25.86062,lng:115.01175}},{id:"360722",fullname:"信丰县",location:{lat:25.38617,lng:114.92285}},{id:"360723",fullname:"大余县",location:{lat:25.40148,lng:114.36195}},{id:"360724",fullname:"上犹县",location:{lat:25.79086,lng:114.53754}},{id:"360725",fullname:"崇义县",location:{lat:25.68165,lng:114.30784}},{id:"360726",fullname:"安远县",location:{lat:25.13702,lng:115.39379}},{id:"360727",fullname:"龙南县",location:{lat:24.91105,lng:114.78993}},{id:"360728",fullname:"定南县",location:{lat:24.7855,lng:115.02739}},{id:"360729",fullname:"全南县",location:{lat:24.74235,lng:114.53012}},{id:"360730",fullname:"宁都县",location:{lat:26.47019,lng:116.00941}},{id:"360731",fullname:"于都县",location:{lat:25.95184,lng:115.41544}},{id:"360732",fullname:"兴国县",location:{lat:26.33779,lng:115.36314}},{id:"360733",fullname:"会昌县",location:{lat:25.60039,lng:115.786}},{id:"360734",fullname:"寻乌县",location:{lat:24.96351,lng:115.64673}},{id:"360735",fullname:"石城县",location:{lat:26.32691,lng:116.35432}},{id:"360781",fullname:"瑞金市",location:{lat:25.88562,lng:116.02709}},{id:"360802",fullname:"吉州区",location:{lat:27.1448,lng:114.99457}},{id:"360803",fullname:"青原区",location:{lat:27.08195,lng:115.01465}},{id:"360821",fullname:"吉安县",location:{lat:27.03935,lng:114.90821}},{id:"360822",fullname:"吉水县",location:{lat:27.22976,lng:115.1355}},{id:"360823",fullname:"峡江县",location:{lat:27.58289,lng:115.31643}},{id:"360824",fullname:"新干县",location:{lat:27.74016,lng:115.38692}},{id:"360825",fullname:"永丰县",location:{lat:27.31815,lng:115.44189}},{id:"360826",fullname:"泰和县",location:{lat:26.78993,lng:114.90887}},{id:"360827",fullname:"遂川县",location:{lat:26.31363,lng:114.52052}},{id:"360828",fullname:"万安县",location:{lat:26.45825,lng:114.78615}},{id:"360829",fullname:"安福县",location:{lat:27.3928,lng:114.6196}},{id:"360830",fullname:"永新县",location:{lat:26.94498,lng:114.24307}},{id:"360881",fullname:"井冈山市",location:{lat:26.74808,lng:114.28953}},{id:"360902",fullname:"袁州区",location:{lat:27.79817,lng:114.42773}},{id:"360921",fullname:"奉新县",location:{lat:28.68793,lng:115.40037}},{id:"360922",fullname:"万载县",location:{lat:28.1061,lng:114.44551}},{id:"360923",fullname:"上高县",location:{lat:28.23337,lng:114.9248}},{id:"360924",fullname:"宜丰县",location:{lat:28.3938,lng:114.80369}},{id:"360925",fullname:"靖安县",location:{lat:28.86138,lng:115.36268}},{id:"360926",fullname:"铜鼓县",location:{lat:28.52182,lng:114.37071}},{id:"360981",fullname:"丰城市",location:{lat:28.1592,lng:115.77121}},{id:"360982",fullname:"樟树市",location:{lat:28.05589,lng:115.54615}},{id:"360983",fullname:"高安市",location:{lat:28.41729,lng:115.37562}},{id:"361002",fullname:"临川区",location:{lat:27.93473,lng:116.30986}},{id:"361021",fullname:"南城县",location:{lat:27.5684,lng:116.63775}},{id:"361022",fullname:"黎川县",location:{lat:27.28236,lng:116.90753}},{id:"361023",fullname:"南丰县",location:{lat:27.21863,lng:116.52526}},{id:"361024",fullname:"崇仁县",location:{lat:27.76437,lng:116.06124}},{id:"361025",fullname:"乐安县",location:{lat:27.42814,lng:115.83109}},{id:"361026",fullname:"宜黄县",location:{lat:27.55489,lng:116.23628}},{id:"361027",fullname:"金溪县",location:{lat:27.91912,lng:116.75485}},{id:"361028",fullname:"资溪县",location:{lat:27.70594,lng:117.06101}},{id:"361029",fullname:"东乡县",location:{lat:28.24771,lng:116.60334}},{id:"361030",fullname:"广昌县",location:{lat:26.83729,lng:116.32573}},{id:"361102",fullname:"信州区",location:{lat:28.42995,lng:117.96469}},{id:"361121",fullname:"上饶县",location:{lat:28.44923,lng:117.9096}},{id:"361122",fullname:"广丰县",location:{lat:28.43631,lng:118.19133}},{id:"361123",fullname:"玉山县",location:{lat:28.68194,lng:118.24481}},{id:"361124",fullname:"铅山县",location:{lat:28.31535,lng:117.70942}},{id:"361125",fullname:"横峰县",location:{lat:28.4072,lng:117.59644}},{id:"361126",fullname:"弋阳县",location:{lat:28.37754,lng:117.44821}},{id:"361127",fullname:"余干县",location:{lat:28.70211,lng:116.6956}},{id:"361128",fullname:"鄱阳县",location:{lat:29.00563,lng:116.70343}},{id:"361129",fullname:"万年县",location:{lat:28.69466,lng:117.05839}},{id:"361130",fullname:"婺源县",location:{lat:29.24791,lng:117.86192}},{id:"361181",fullname:"德兴市",location:{lat:28.94654,lng:117.57884}},{id:"370102",fullname:"历下区",location:{lat:36.66645,lng:117.07641}},{id:"370103",fullname:"市中区",location:{lat:36.65118,lng:116.99744}},{id:"370104",fullname:"槐荫区",location:{lat:36.65142,lng:116.90084}},{id:"370105",fullname:"天桥区",location:{lat:36.67789,lng:116.98737}},{id:"370112",fullname:"历城区",location:{lat:36.68013,lng:117.06533}},{id:"370113",fullname:"长清区",location:{lat:36.55358,lng:116.75199}},{id:"370124",fullname:"平阴县",location:{lat:36.28937,lng:116.45599}},{id:"370125",fullname:"济阳县",location:{lat:36.97847,lng:117.17333}},{id:"370126",fullname:"商河县",location:{lat:37.30907,lng:117.1571}},{id:"370181",fullname:"章丘市",location:{lat:36.67968,lng:117.52578}},{id:"370202",fullname:"市南区",location:{lat:36.07515,lng:120.41283}},{id:"370203",fullname:"市北区",location:{lat:36.08743,lng:120.37479}},{id:"370211",fullname:"黄岛区",location:{lat:35.95995,lng:120.19653}},{id:"370212",fullname:"崂山区",location:{lat:36.10811,lng:120.46803}},{id:"370213",fullname:"李沧区",location:{lat:36.14508,lng:120.43294}},{id:"370214",fullname:"城阳区",location:{lat:36.30744,lng:120.39629}},{id:"370281",fullname:"胶州市",location:{lat:36.26445,lng:120.03354}},{id:"370282",fullname:"即墨市",location:{lat:36.38932,lng:120.44715}},{id:"370283",fullname:"平度市",location:{lat:36.7867,lng:119.95994}},{id:"370285",fullname:"莱西市",location:{lat:36.88808,lng:120.51777}},{id:"370302",fullname:"淄川区",location:{lat:36.6435,lng:117.96673}},{id:"370303",fullname:"张店区",location:{lat:36.80661,lng:118.0179}},{id:"370304",fullname:"博山区",location:{lat:36.49473,lng:117.86172}},{id:"370305",fullname:"临淄区",location:{lat:36.82593,lng:118.30971}},{id:"370306",fullname:"周村区",location:{lat:36.80298,lng:117.86974}},{id:"370321",fullname:"桓台县",location:{lat:36.95933,lng:118.09797}},{id:"370322",fullname:"高青县",location:{lat:37.17105,lng:117.82675}},{id:"370323",fullname:"沂源县",location:{lat:36.18488,lng:118.17077}},{id:"370402",fullname:"市中区",location:{lat:34.86426,lng:117.55601}},{id:"370403",fullname:"薛城区",location:{lat:34.79502,lng:117.2632}},{id:"370404",fullname:"峄城区",location:{lat:34.77228,lng:117.59061}},{id:"370405",fullname:"台儿庄区",location:{lat:34.56261,lng:117.73385}},{id:"370406",fullname:"山亭区",location:{lat:35.09963,lng:117.4613}},{id:"370481",fullname:"滕州市",location:{lat:35.11338,lng:117.16596}},{id:"370502",fullname:"东营区",location:{lat:37.44878,lng:118.58215}},{id:"370503",fullname:"河口区",location:{lat:37.88624,lng:118.52544}},{id:"370521",fullname:"垦利县",location:{lat:37.58748,lng:118.54768}},{id:"370522",fullname:"利津县",location:{lat:37.49028,lng:118.25536}},{id:"370523",fullname:"广饶县",location:{lat:37.05359,lng:118.40702}},{id:"370602",fullname:"芝罘区",location:{lat:37.54061,lng:121.40011}},{id:"370611",fullname:"福山区",location:{lat:37.49794,lng:121.26757}},{id:"370612",fullname:"牟平区",location:{lat:37.38683,lng:121.60042}},{id:"370613",fullname:"莱山区",location:{lat:37.51104,lng:121.44547}},{id:"370634",fullname:"长岛县",location:{lat:37.92135,lng:120.73645}},{id:"370681",fullname:"龙口市",location:{lat:37.64345,lng:120.47872}},{id:"370682",fullname:"莱阳市",location:{lat:36.97878,lng:120.71181}},{id:"370683",fullname:"莱州市",location:{lat:37.17702,lng:119.94217}},{id:"370684",fullname:"蓬莱市",location:{lat:37.81072,lng:120.75882}},{id:"370685",fullname:"招远市",location:{lat:37.35531,lng:120.43421}},{id:"370686",fullname:"栖霞市",location:{lat:37.33505,lng:120.84977}},{id:"370687",fullname:"海阳市",location:{lat:36.77645,lng:121.15846}},{id:"370702",fullname:"潍城区",location:{lat:36.72667,lng:119.02389}},{id:"370703",fullname:"寒亭区",location:{lat:36.77506,lng:119.21994}},{id:"370704",fullname:"坊子区",location:{lat:36.65458,lng:119.16607}},{id:"370705",fullname:"奎文区",location:{lat:36.70864,lng:119.13279}},{id:"370724",fullname:"临朐县",location:{lat:36.51231,lng:118.543}},{id:"370725",fullname:"昌乐县",location:{lat:36.70702,lng:118.82984}},{id:"370781",fullname:"青州市",location:{lat:36.68456,lng:118.47966}},{id:"370782",fullname:"诸城市",location:{lat:35.99583,lng:119.40983}},{id:"370783",fullname:"寿光市",location:{lat:36.85541,lng:118.79098}},{id:"370784",fullname:"安丘市",location:{lat:36.47842,lng:119.21784}},{id:"370785",fullname:"高密市",location:{lat:36.38257,lng:119.75568}},{id:"370786",fullname:"昌邑市",location:{lat:36.85884,lng:119.39862}},{id:"370811",fullname:"任城区",location:{lat:35.4082,lng:116.59649}},{id:"370812",fullname:"兖州区",location:{lat:35.5526,lng:116.7857}},{id:"370826",fullname:"微山县",location:{lat:34.80718,lng:117.12886}},{id:"370827",fullname:"鱼台县",location:{lat:35.01161,lng:116.65046}},{id:"370828",fullname:"金乡县",location:{lat:35.06661,lng:116.31148}},{id:"370829",fullname:"嘉祥县",location:{lat:35.4075,lng:116.34249}},{id:"370830",fullname:"汶上县",location:{lat:35.73281,lng:116.48917}},{id:"370831",fullname:"泗水县",location:{lat:35.66471,lng:117.25216}},{id:"370832",fullname:"梁山县",location:{lat:35.8024,lng:116.09584}},{id:"370881",fullname:"曲阜市",location:{lat:35.58082,lng:116.98648}},{id:"370883",fullname:"邹城市",location:{lat:35.40522,lng:117.00385}},{id:"370902",fullname:"泰山区",location:{lat:36.19198,lng:117.13526}},{id:"370911",fullname:"岱岳区",location:{lat:36.18752,lng:117.0418}},{id:"370921",fullname:"宁阳县",location:{lat:35.75961,lng:116.80727}},{id:"370923",fullname:"东平县",location:{lat:35.93708,lng:116.47024}},{id:"370982",fullname:"新泰市",location:{lat:35.90878,lng:117.768}},{id:"370983",fullname:"肥城市",location:{lat:36.18245,lng:116.76917}},{id:"371002",fullname:"环翠区",location:{lat:37.50212,lng:122.12348}},{id:"371081",fullname:"文登区",location:{lat:37.19397,lng:122.0581}},{id:"371082",fullname:"荣成市",location:{lat:37.16523,lng:122.48628}},{id:"371083",fullname:"乳山市",location:{lat:36.92021,lng:121.5402}},{id:"371102",fullname:"东港区",location:{lat:35.42545,lng:119.46242}},{id:"371103",fullname:"岚山区",location:{lat:35.12206,lng:119.31891}},{id:"371121",fullname:"五莲县",location:{lat:35.75018,lng:119.20875}},{id:"371122",fullname:"莒县",location:{lat:35.57997,lng:118.83687}},{id:"371202",fullname:"莱城区",location:{lat:36.20317,lng:117.65992}},{id:"371203",fullname:"钢城区",location:{lat:36.05866,lng:117.81107}},{id:"371302",fullname:"兰山区",location:{lat:35.05151,lng:118.34787}},{id:"371311",fullname:"罗庄区",location:{lat:34.99636,lng:118.28437}},{id:"371312",fullname:"河东区",location:{lat:35.08729,lng:118.40184}},{id:"371321",fullname:"沂南县",location:{lat:35.55001,lng:118.46566}},{id:"371322",fullname:"郯城县",location:{lat:34.61357,lng:118.36717}},{id:"371323",fullname:"沂水县",location:{lat:35.79034,lng:118.62782}},{id:"371324",fullname:"兰陵县",location:{lat:34.85729,lng:118.07072}},{id:"371325",fullname:"费县",location:{lat:35.26659,lng:117.97711}},{id:"371326",fullname:"平邑县",location:{lat:35.50587,lng:117.64048}},{id:"371327",fullname:"莒南县",location:{lat:35.17486,lng:118.83543}},{id:"371328",fullname:"蒙阴县",location:{lat:35.7101,lng:117.94494}},{id:"371329",fullname:"临沭县",location:{lat:34.91985,lng:118.65063}},{id:"371402",fullname:"德城区",location:{lat:37.45079,lng:116.29941}},{id:"371421",fullname:"陵县",location:{lat:37.33566,lng:116.57634}},{id:"371422",fullname:"宁津县",location:{lat:37.65221,lng:116.80023}},{id:"371423",fullname:"庆云县",location:{lat:37.77528,lng:117.38497}},{id:"371424",fullname:"临邑县",location:{lat:37.18998,lng:116.8666}},{id:"371425",fullname:"齐河县",location:{lat:36.79492,lng:116.76002}},{id:"371426",fullname:"平原县",location:{lat:37.16538,lng:116.43395}},{id:"371427",fullname:"夏津县",location:{lat:36.94856,lng:116.00175}},{id:"371428",fullname:"武城县",location:{lat:37.21317,lng:116.06923}},{id:"371481",fullname:"乐陵市",location:{lat:37.72979,lng:117.23171}},{id:"371482",fullname:"禹城市",location:{lat:36.93394,lng:116.63813}},{id:"371502",fullname:"东昌府区",location:{lat:36.43452,lng:115.98847}},{id:"371521",fullname:"阳谷县",location:{lat:36.11447,lng:115.79131}},{id:"371522",fullname:"莘县",location:{lat:36.23361,lng:115.67072}},{id:"371523",fullname:"茌平县",location:{lat:36.58068,lng:116.25522}},{id:"371524",fullname:"东阿县",location:{lat:36.33503,lng:116.24773}},{id:"371525",fullname:"冠县",location:{lat:36.48335,lng:115.44263}},{id:"371526",fullname:"高唐县",location:{lat:36.86602,lng:116.23111}},{id:"371581",fullname:"临清市",location:{lat:36.83834,lng:115.70504}},{id:"371602",fullname:"滨城区",location:{lat:37.42726,lng:118.02279}},{id:"371621",fullname:"惠民县",location:{lat:37.48982,lng:117.5092}},{id:"371622",fullname:"阳信县",location:{lat:37.64109,lng:117.5782}},{id:"371623",fullname:"无棣县",location:{lat:37.76993,lng:117.62577}},{id:"371624",fullname:"沾化县",location:{lat:37.70058,lng:118.09882}},{id:"371625",fullname:"博兴县",location:{lat:37.15299,lng:118.11096}},{id:"371626",fullname:"邹平县",location:{lat:36.86299,lng:117.74309}},{id:"371702",fullname:"牡丹区",location:{lat:35.25141,lng:115.41666}},{id:"371721",fullname:"曹县",location:{lat:34.82553,lng:115.54214}},{id:"371722",fullname:"单县",location:{lat:34.79438,lng:116.08724}},{id:"371723",fullname:"成武县",location:{lat:34.95245,lng:115.88964}},{id:"371724",fullname:"巨野县",location:{lat:35.39633,lng:116.09495}},{id:"371725",fullname:"郓城县",location:{lat:35.59984,lng:115.94364}},{id:"371726",fullname:"鄄城县",location:{lat:35.5635,lng:115.51005}},{id:"371727",fullname:"定陶县",location:{lat:35.07095,lng:115.57298}},{id:"371728",fullname:"东明县",location:{lat:35.28953,lng:115.09016}},{id:"410102",fullname:"中原区",location:{lat:34.74821,lng:113.61332}},{id:"410103",fullname:"二七区",location:{lat:34.72468,lng:113.6401}},{id:"410104",fullname:"管城回族区",location:{lat:34.75381,lng:113.67739}},{id:"410105",fullname:"金水区",location:{lat:34.79977,lng:113.66072}},{id:"410106",fullname:"上街区",location:{lat:34.8028,lng:113.30892}},{id:"410108",fullname:"惠济区",location:{lat:34.86739,lng:113.61694}},{id:"410122",fullname:"中牟县",location:{lat:34.71903,lng:113.97624}},{id:"410181",fullname:"巩义市",location:{lat:34.74798,lng:113.02206}},{id:"410182",fullname:"荥阳市",location:{lat:34.78762,lng:113.38349}},{id:"410183",fullname:"新密市",location:{lat:34.53952,lng:113.39044}},{id:"410184",fullname:"新郑市",location:{lat:34.39605,lng:113.74161}},{id:"410185",fullname:"登封市",location:{lat:34.45348,lng:113.05028}},{id:"410201",fullname:"开封市区",location:{lat:34.79726,lng:114.30731}},{id:"410221",fullname:"杞县",location:{lat:34.55034,lng:114.78283}},{id:"410222",fullname:"通许县",location:{lat:34.48044,lng:114.46741}},{id:"410223",fullname:"尉氏县",location:{lat:34.41161,lng:114.19297}},{id:"410224",fullname:"开封县",location:{lat:34.757,lng:114.44136}},{id:"410225",fullname:"兰考县",location:{lat:34.8223,lng:114.82115}},{id:"410302",fullname:"老城区",location:{lat:34.68356,lng:112.46958}},{id:"410303",fullname:"西工区",location:{lat:34.66064,lng:112.42827}},{id:"410304",fullname:"瀍河回族区",location:{lat:34.70431,lng:112.51078}},{id:"410305",fullname:"涧西区",location:{lat:34.65774,lng:112.3957}},{id:"410306",fullname:"吉利区",location:{lat:34.90099,lng:112.58888}},{id:"410311",fullname:"洛龙区",location:{lat:34.61866,lng:112.46403}},{id:"410322",fullname:"孟津县",location:{lat:34.82544,lng:112.4451}},{id:"410323",fullname:"新安县",location:{lat:34.72818,lng:112.13242}},{id:"410324",fullname:"栾川县",location:{lat:33.78576,lng:111.61579}},{id:"410325",fullname:"嵩县",location:{lat:34.13451,lng:112.0857}},{id:"410326",fullname:"汝阳县",location:{lat:34.15388,lng:112.47317}},{id:"410327",fullname:"宜阳县",location:{lat:34.51496,lng:112.1792}},{id:"410328",fullname:"洛宁县",location:{lat:34.38917,lng:111.65313}},{id:"410329",fullname:"伊川县",location:{lat:34.42135,lng:112.42568}},{id:"410381",fullname:"偃师市",location:{lat:34.72763,lng:112.78965}},{id:"410402",fullname:"新华区",location:{lat:33.73741,lng:113.29431}},{id:"410403",fullname:"卫东区",location:{lat:33.73469,lng:113.33503}},{id:"410404",fullname:"石龙区",location:{lat:33.89889,lng:112.89888}},{id:"410411",fullname:"湛河区",location:{lat:33.7009,lng:113.27602}},{id:"410421",fullname:"宝丰县",location:{lat:33.8684,lng:113.05479}},{id:"410422",fullname:"叶县",location:{lat:33.62683,lng:113.35737}},{id:"410423",fullname:"鲁山县",location:{lat:33.73854,lng:112.90802}},{id:"410425",fullname:"郏县",location:{lat:33.9718,lng:113.21262}},{id:"410481",fullname:"舞钢市",location:{lat:33.29315,lng:113.52531}},{id:"410482",fullname:"汝州市",location:{lat:34.16717,lng:112.84437}},{id:"410502",fullname:"文峰区",location:{lat:36.09052,lng:114.35688}},{id:"410503",fullname:"北关区",location:{lat:36.10849,lng:114.35511}},{id:"410505",fullname:"殷都区",location:{lat:36.10994,lng:114.30345}},{id:"410506",fullname:"龙安区",location:{lat:36.07609,lng:114.30089}},{id:"410522",fullname:"安阳县",location:{lat:36.21256,lng:114.23182}},{id:"410523",fullname:"汤阴县",location:{lat:35.92138,lng:114.35723}},{id:"410526",fullname:"滑县",location:{lat:35.57534,lng:114.5193}},{id:"410527",fullname:"内黄县",location:{lat:35.94714,lng:114.89936}},{id:"410581",fullname:"林州市",location:{lat:36.08308,lng:113.81908}},{id:"410602",fullname:"鹤山区",location:{lat:35.9547,lng:114.1633}},{id:"410603",fullname:"山城区",location:{lat:35.89765,lng:114.18444}},{id:"410611",fullname:"淇滨区",location:{lat:35.7413,lng:114.29872}},{id:"410621",fullname:"浚县",location:{lat:35.67617,lng:114.55078}},{id:"410622",fullname:"淇县",location:{lat:35.60786,lng:114.19766}},{id:"410702",fullname:"红旗区",location:{lat:35.30351,lng:113.87523}},{id:"410703",fullname:"卫滨区",location:{lat:35.30227,lng:113.86582}},{id:"410704",fullname:"凤泉区",location:{lat:35.3718,lng:113.90598}},{id:"410711",fullname:"牧野区",location:{lat:35.31493,lng:113.90866}},{id:"410721",fullname:"新乡县",location:{lat:35.19079,lng:113.80516}},{id:"410724",fullname:"获嘉县",location:{lat:35.25962,lng:113.65716}},{id:"410725",fullname:"原阳县",location:{lat:35.06569,lng:113.93997}},{id:"410726",fullname:"延津县",location:{lat:35.14194,lng:114.20515}},{id:"410727",fullname:"封丘县",location:{lat:35.04119,lng:114.41861}},{id:"410728",fullname:"长垣县",location:{lat:35.20049,lng:114.66886}},{id:"410781",fullname:"卫辉市",location:{lat:35.39847,lng:114.06459}},{id:"410782",fullname:"辉县市",location:{lat:35.46212,lng:113.8054}},{id:"410802",fullname:"解放区",location:{lat:35.24052,lng:113.23064}},{id:"410803",fullname:"中站区",location:{lat:35.2367,lng:113.18296}},{id:"410804",fullname:"马村区",location:{lat:35.25615,lng:113.3229}},{id:"410811",fullname:"山阳区",location:{lat:35.21414,lng:113.2542}},{id:"410821",fullname:"修武县",location:{lat:35.22361,lng:113.44776}},{id:"410822",fullname:"博爱县",location:{lat:35.17123,lng:113.06453}},{id:"410823",fullname:"武陟县",location:{lat:35.09952,lng:113.40184}},{id:"410825",fullname:"温县",location:{lat:34.94023,lng:113.08057}},{id:"410882",fullname:"沁阳市",location:{lat:35.0876,lng:112.9506}},{id:"410883",fullname:"孟州市",location:{lat:34.90735,lng:112.79134}},{id:"410902",fullname:"华龙区",location:{lat:35.77745,lng:115.07432}},{id:"410922",fullname:"清丰县",location:{lat:35.8851,lng:115.10421}},{id:"410923",fullname:"南乐县",location:{lat:36.06979,lng:115.20491}},{id:"410926",fullname:"范县",location:{lat:35.89516,lng:115.49869}},{id:"410927",fullname:"台前县",location:{lat:35.96931,lng:115.87163}},{id:"410928",fullname:"濮阳县",location:{lat:35.71221,lng:115.02903}},{id:"411002",fullname:"魏都区",location:{lat:34.04611,lng:113.8308}},{id:"411023",fullname:"许昌县",location:{lat:34.12596,lng:113.82272}},{id:"411024",fullname:"鄢陵县",location:{lat:34.10233,lng:114.17739}},{id:"411025",fullname:"襄城县",location:{lat:33.85072,lng:113.50669}},{id:"411081",fullname:"禹州市",location:{lat:34.14048,lng:113.48794}},{id:"411082",fullname:"长葛市",location:{lat:34.21672,lng:113.76827}},{id:"411102",fullname:"源汇区",location:{lat:33.54528,lng:113.9202}},{id:"411103",fullname:"郾城区",location:{lat:33.58705,lng:114.00664}},{id:"411104",fullname:"召陵区",location:{lat:33.58645,lng:114.09389}},{id:"411121",fullname:"舞阳县",location:{lat:33.43765,lng:113.60931}},{id:"411122",fullname:"临颍县",location:{lat:33.80958,lng:113.93443}},{id:"411202",fullname:"湖滨区",location:{lat:34.77141,lng:111.18747}},{id:"411221",fullname:"渑池县",location:{lat:34.76726,lng:111.7619}},{id:"411222",fullname:"陕县",location:{lat:34.72054,lng:111.10338}},{id:"411224",fullname:"卢氏县",location:{lat:34.05438,lng:111.04783}},{id:"411281",fullname:"义马市",location:{lat:34.74725,lng:111.87449}},{id:"411282",fullname:"灵宝市",location:{lat:34.51685,lng:110.89456}},{id:"411302",fullname:"宛城区",location:{lat:33.0036,lng:112.5396}},{id:"411303",fullname:"卧龙区",location:{lat:32.98646,lng:112.53494}},{id:"411321",fullname:"南召县",location:{lat:33.48979,lng:112.42914}},{id:"411322",fullname:"方城县",location:{lat:33.25439,lng:113.01255}},{id:"411323",fullname:"西峡县",location:{lat:33.3056,lng:111.47244}},{id:"411324",fullname:"镇平县",location:{lat:33.03391,lng:112.23448}},{id:"411325",fullname:"内乡县",location:{lat:33.04483,lng:111.84926}},{id:"411326",fullname:"淅川县",location:{lat:33.13815,lng:111.49078}},{id:"411327",fullname:"社旗县",location:{lat:33.05614,lng:112.94793}},{id:"411328",fullname:"唐河县",location:{lat:32.68117,lng:112.80745}},{id:"411329",fullname:"新野县",location:{lat:32.52093,lng:112.36006}},{id:"411330",fullname:"桐柏县",location:{lat:32.37913,lng:113.42892}},{id:"411381",fullname:"邓州市",location:{lat:32.68777,lng:112.08736}},{id:"411402",fullname:"梁园区",location:{lat:34.44379,lng:115.61396}},{id:"411403",fullname:"睢阳区",location:{lat:34.38818,lng:115.65347}},{id:"411421",fullname:"民权县",location:{lat:34.64691,lng:115.14766}},{id:"411422",fullname:"睢县",location:{lat:34.44526,lng:115.07153}},{id:"411423",fullname:"宁陵县",location:{lat:34.45454,lng:115.30516}},{id:"411424",fullname:"柘城县",location:{lat:34.09114,lng:115.30544}},{id:"411425",fullname:"虞城县",location:{lat:34.39737,lng:115.86519}},{id:"411426",fullname:"夏邑县",location:{lat:34.23929,lng:116.12969}},{id:"411481",fullname:"永城市",location:{lat:33.92915,lng:116.44946}},{id:"411502",fullname:"浉河区",location:{lat:32.11683,lng:114.05857}},{id:"411503",fullname:"平桥区",location:{lat:32.10105,lng:114.12561}},{id:"411521",fullname:"罗山县",location:{lat:32.20314,lng:114.51307}},{id:"411522",fullname:"光山县",location:{lat:32.00997,lng:114.91878}},{id:"411523",fullname:"新县",location:{lat:31.64389,lng:114.87929}},{id:"411524",fullname:"商城县",location:{lat:31.79836,lng:115.4069}},{id:"411525",fullname:"固始县",location:{lat:32.16839,lng:115.65481}},{id:"411526",fullname:"潢川县",location:{lat:32.13156,lng:115.05129}},{id:"411527",fullname:"淮滨县",location:{lat:32.47339,lng:115.41987}},{id:"411528",fullname:"息县",location:{lat:32.34282,lng:114.74024}},{id:"411602",fullname:"川汇区",location:{lat:33.64738,lng:114.65048}},{id:"411621",fullname:"扶沟县",location:{lat:34.06,lng:114.39482}},{id:"411622",fullname:"西华县",location:{lat:33.76754,lng:114.52974}},{id:"411623",fullname:"商水县",location:{lat:33.54256,lng:114.61165}},{id:"411624",fullname:"沈丘县",location:{lat:33.4094,lng:115.09856}},{id:"411625",fullname:"郸城县",location:{lat:33.64475,lng:115.17704}},{id:"411626",fullname:"淮阳县",location:{lat:33.7315,lng:114.88614}},{id:"411627",fullname:"太康县",location:{lat:34.06379,lng:114.83779}},{id:"411628",fullname:"鹿邑县",location:{lat:33.86009,lng:115.48443}},{id:"411681",fullname:"项城市",location:{lat:33.46723,lng:114.87562}},{id:"411702",fullname:"驿城区",location:{lat:32.97319,lng:113.99382}},{id:"411721",fullname:"西平县",location:{lat:33.3878,lng:114.02158}},{id:"411722",fullname:"上蔡县",location:{lat:33.26255,lng:114.26435}},{id:"411723",fullname:"平舆县",location:{lat:32.96183,lng:114.61941}},{id:"411724",fullname:"正阳县",location:{lat:32.60566,lng:114.39274}},{id:"411725",fullname:"确山县",location:{lat:32.80207,lng:114.02648}},{id:"411726",fullname:"泌阳县",location:{lat:32.7241,lng:113.32709}},{id:"411727",fullname:"汝南县",location:{lat:33.00685,lng:114.36229}},{id:"411728",fullname:"遂平县",location:{lat:33.14576,lng:114.01319}},{id:"411729",fullname:"新蔡县",location:{lat:32.74926,lng:114.98571}},{id:"420102",fullname:"江岸区",location:{lat:30.59982,lng:114.3096}},{id:"420103",fullname:"江汉区",location:{lat:30.60147,lng:114.27096}},{id:"420104",fullname:"硚口区",location:{lat:30.58145,lng:114.21498}},{id:"420105",fullname:"汉阳区",location:{lat:30.55473,lng:114.21772}},{id:"420106",fullname:"武昌区",location:{lat:30.53054,lng:114.39006}},{id:"420107",fullname:"青山区",location:{lat:30.56792,lng:114.44378}},{id:"420111",fullname:"洪山区",location:{lat:30.49995,lng:114.34392}},{id:"420112",fullname:"东西湖区",location:{lat:30.61996,lng:114.13702}},{id:"420113",fullname:"汉南区",location:{lat:30.30895,lng:114.08469}},{id:"420114",fullname:"蔡甸区",location:{lat:30.58203,lng:114.02919}},{id:"420115",fullname:"江夏区",location:{lat:30.37559,lng:114.32168}},{id:"420116",fullname:"黄陂区",location:{lat:30.88131,lng:114.37509}},{id:"420117",fullname:"新洲区",location:{lat:30.84154,lng:114.80114}},{id:"420202",fullname:"黄石港区",location:{lat:30.22286,lng:115.06611}},{id:"420203",fullname:"西塞山区",location:{lat:30.20489,lng:115.11019}},{id:"420204",fullname:"下陆区",location:{lat:30.17384,lng:114.96118}},{id:"420205",fullname:"铁山区",location:{lat:30.20666,lng:114.90143}},{id:"420222",fullname:"阳新县",location:{lat:29.83039,lng:115.2153}},{id:"420281",fullname:"大冶市",location:{lat:30.09551,lng:114.97977}},{id:"420302",fullname:"茅箭区",location:{lat:32.66081,lng:110.76879}},{id:"420303",fullname:"张湾区",location:{lat:32.65192,lng:110.76916}},{id:"420321",fullname:"郧县",location:{lat:32.83488,lng:110.81197}},{id:"420322",fullname:"郧西县",location:{lat:32.99306,lng:110.42588}},{id:"420323",fullname:"竹山县",location:{lat:32.22566,lng:110.39765}},{id:"420324",fullname:"竹溪县",location:{lat:32.31824,lng:109.71527}},{id:"420325",fullname:"房县",location:{lat:31.99853,lng:111.09241}},{id:"420381",fullname:"丹江口市",location:{lat:32.5404,lng:111.51322}},{id:"420502",fullname:"西陵区",location:{lat:30.71082,lng:111.28581}},{id:"420503",fullname:"伍家岗区",location:{lat:30.64441,lng:111.361}},{id:"420504",fullname:"点军区",location:{lat:30.69322,lng:111.26824}},{id:"420505",fullname:"猇亭区",location:{lat:30.5307,lng:111.43471}},{id:"420506",fullname:"夷陵区",location:{lat:30.7699,lng:111.32488}},{id:"420525",fullname:"远安县",location:{lat:31.06144,lng:111.63985}},{id:"420526",fullname:"兴山县",location:{lat:31.34813,lng:110.74719}},{id:"420527",fullname:"秭归县",location:{lat:30.82578,lng:110.97768}},{id:"420528",fullname:"长阳土家族自治县",location:{lat:30.4725,lng:111.20705}},{id:"420529",fullname:"五峰土家族自治县",location:{lat:30.19983,lng:110.67452}},{id:"420581",fullname:"宜都市",location:{lat:30.37846,lng:111.4501}},{id:"420582",fullname:"当阳市",location:{lat:30.82118,lng:111.78833}},{id:"420583",fullname:"枝江市",location:{lat:30.42583,lng:111.76044}},{id:"420602",fullname:"襄城区",location:{lat:32.01067,lng:112.13423}},{id:"420606",fullname:"樊城区",location:{lat:32.04487,lng:112.13555}},{id:"420607",fullname:"襄州区",location:{lat:32.08718,lng:112.21194}},{id:"420624",fullname:"南漳县",location:{lat:31.77471,lng:111.83902}},{id:"420625",fullname:"谷城县",location:{lat:32.26338,lng:111.65304}},{id:"420626",fullname:"保康县",location:{lat:31.87753,lng:111.26117}},{id:"420682",fullname:"老河口市",location:{lat:32.38671,lng:111.67507}},{id:"420683",fullname:"枣阳市",location:{lat:32.12836,lng:112.77398}},{id:"420684",fullname:"宜城市",location:{lat:31.71976,lng:112.25776}},{id:"420702",fullname:"梁子湖区",location:{lat:30.09996,lng:114.68456}},{id:"420703",fullname:"华容区",location:{lat:30.53434,lng:114.72983}},{id:"420704",fullname:"鄂城区",location:{lat:30.40057,lng:114.89171}},{id:"420802",fullname:"东宝区",location:{lat:31.05193,lng:112.20158}},{id:"420804",fullname:"掇刀区",location:{lat:30.97303,lng:112.20715}},{id:"420821",fullname:"京山县",location:{lat:31.01848,lng:113.11953}},{id:"420822",fullname:"沙洋县",location:{lat:30.70918,lng:112.58854}},{id:"420881",fullname:"钟祥市",location:{lat:31.16797,lng:112.58817}},{id:"420902",fullname:"孝南区",location:{lat:30.91677,lng:113.91049}},{id:"420921",fullname:"孝昌县",location:{lat:31.25803,lng:113.99802}},{id:"420922",fullname:"大悟县",location:{lat:31.56096,lng:114.12694}},{id:"420923",fullname:"云梦县",location:{lat:31.02103,lng:113.75331}},{id:"420981",fullname:"应城市",location:{lat:30.92838,lng:113.57292}},{id:"420982",fullname:"安陆市",location:{lat:31.25554,lng:113.68913}},{id:"420984",fullname:"汉川市",location:{lat:30.66122,lng:113.83907}},{id:"421002",fullname:"沙市区",location:{lat:30.31098,lng:112.25494}},{id:"421003",fullname:"荆州区",location:{lat:30.35269,lng:112.19016}},{id:"421022",fullname:"公安县",location:{lat:30.0583,lng:112.22948}},{id:"421023",fullname:"监利县",location:{lat:29.83928,lng:112.90492}},{id:"421024",fullname:"江陵县",location:{lat:30.04184,lng:112.4247}},{id:"421081",fullname:"石首市",location:{lat:29.72085,lng:112.4255}},{id:"421083",fullname:"洪湖市",location:{lat:29.82756,lng:113.47775}},{id:"421087",fullname:"松滋市",location:{lat:30.1696,lng:111.76743}},{id:"421102",fullname:"黄州区",location:{lat:30.43472,lng:114.88005}},{id:"421121",fullname:"团风县",location:{lat:30.64362,lng:114.87232}},{id:"421122",fullname:"红安县",location:{lat:31.2881,lng:114.61813}},{id:"421123",fullname:"罗田县",location:{lat:30.78397,lng:115.39943}},{id:"421124",fullname:"英山县",location:{lat:30.73518,lng:115.68143}},{id:"421125",fullname:"浠水县",location:{lat:30.45184,lng:115.26551}},{id:"421126",fullname:"蕲春县",location:{lat:30.22617,lng:115.43621}},{id:"421127",fullname:"黄梅县",location:{lat:30.07037,lng:115.94432}},{id:"421181",fullname:"麻城市",location:{lat:31.17333,lng:115.00869}},{id:"421182",fullname:"武穴市",location:{lat:29.84433,lng:115.5613}},{id:"421202",fullname:"咸安区",location:{lat:29.85251,lng:114.2984}},{id:"421221",fullname:"嘉鱼县",location:{lat:29.97057,lng:113.93932}},{id:"421222",fullname:"通城县",location:{lat:29.24535,lng:113.81702}},{id:"421223",fullname:"崇阳县",location:{lat:29.55537,lng:114.03892}},{id:"421224",fullname:"通山县",location:{lat:29.60638,lng:114.48276}},{id:"421281",fullname:"赤壁市",location:{lat:29.72476,lng:113.90054}},{id:"421303",fullname:"曾都区",location:{lat:31.71615,lng:113.3712}},{id:"421321",fullname:"随县",location:{lat:31.8538,lng:113.29995}},{id:"421381",fullname:"广水市",location:{lat:31.61686,lng:113.826}},{id:"422801",fullname:"恩施市",location:{lat:30.29504,lng:109.47918}},{id:"422802",fullname:"利川市",location:{lat:30.29121,lng:108.93595}},{id:"422822",fullname:"建始县",location:{lat:30.60213,lng:109.72213}},{id:"422823",fullname:"巴东县",location:{lat:31.04237,lng:110.34072}},{id:"422825",fullname:"宣恩县",location:{lat:29.98715,lng:109.49185}},{id:"422826",fullname:"咸丰县",location:{lat:29.66521,lng:109.13963}},{id:"422827",fullname:"来凤县",location:{lat:29.49391,lng:109.407}},{id:"422828",fullname:"鹤峰县",location:{lat:29.89084,lng:110.03498}},{id:"430102",fullname:"芙蓉区",location:{lat:28.20279,lng:113.03539}},{id:"430103",fullname:"天心区",location:{lat:28.11264,lng:112.98992}},{id:"430104",fullname:"岳麓区",location:{lat:28.23529,lng:112.93134}},{id:"430105",fullname:"开福区",location:{lat:28.25591,lng:112.98626}},{id:"430111",fullname:"雨花区",location:{lat:28.13551,lng:113.03555}},{id:"430112",fullname:"望城区",location:{lat:28.36121,lng:112.8179}},{id:"430121",fullname:"长沙县",location:{lat:28.24595,lng:113.08093}},{id:"430124",fullname:"宁乡县",location:{lat:28.27741,lng:112.55183}},{id:"430181",fullname:"浏阳市",location:{lat:28.16378,lng:113.64317}},{id:"430202",fullname:"荷塘区",location:{lat:27.85595,lng:113.17329}},{id:"430203",fullname:"芦淞区",location:{lat:27.78499,lng:113.1523}},{id:"430204",fullname:"石峰区",location:{lat:27.87558,lng:113.11784}},{id:"430211",fullname:"天元区",location:{lat:27.82681,lng:113.08231}},{id:"430221",fullname:"株洲县",location:{lat:27.69938,lng:113.14398}},{id:"430223",fullname:"攸县",location:{lat:27.00023,lng:113.34569}},{id:"430224",fullname:"茶陵县",location:{lat:26.77745,lng:113.53927}},{id:"430225",fullname:"炎陵县",location:{lat:26.48979,lng:113.77258}},{id:"430281",fullname:"醴陵市",location:{lat:27.64617,lng:113.49703}},{id:"430302",fullname:"雨湖区",location:{lat:27.85632,lng:112.90737}},{id:"430304",fullname:"岳塘区",location:{lat:27.87266,lng:112.97019}},{id:"430321",fullname:"湘潭县",location:{lat:27.77904,lng:112.95099}},{id:"430381",fullname:"湘乡市",location:{lat:27.7341,lng:112.53504}},{id:"430382",fullname:"韶山市",location:{lat:27.91507,lng:112.5266}},{id:"430405",fullname:"珠晖区",location:{lat:26.89456,lng:112.62039}},{id:"430406",fullname:"雁峰区",location:{lat:26.88864,lng:112.61669}},{id:"430407",fullname:"石鼓区",location:{lat:26.94343,lng:112.59798}},{id:"430408",fullname:"蒸湘区",location:{lat:26.89324,lng:112.57195}},{id:"430412",fullname:"南岳区",location:{lat:27.23258,lng:112.73876}},{id:"430421",fullname:"衡阳县",location:{lat:26.96977,lng:112.37066}},{id:"430422",fullname:"衡南县",location:{lat:26.73831,lng:112.67792}},{id:"430423",fullname:"衡山县",location:{lat:27.23022,lng:112.86831}},{id:"430424",fullname:"衡东县",location:{lat:27.08116,lng:112.95325}},{id:"430426",fullname:"祁东县",location:{lat:26.79965,lng:112.09043}},{id:"430481",fullname:"耒阳市",location:{lat:26.42243,lng:112.85988}},{id:"430482",fullname:"常宁市",location:{lat:26.42093,lng:112.39992}},{id:"430502",fullname:"双清区",location:{lat:27.23285,lng:111.49674}},{id:"430503",fullname:"大祥区",location:{lat:27.2213,lng:111.43888}},{id:"430511",fullname:"北塔区",location:{lat:27.24566,lng:111.45207}},{id:"430521",fullname:"邵东县",location:{lat:27.25844,lng:111.74446}},{id:"430522",fullname:"新邵县",location:{lat:27.32091,lng:111.459}},{id:"430523",fullname:"邵阳县",location:{lat:26.99078,lng:111.27382}},{id:"430524",fullname:"隆回县",location:{lat:27.11402,lng:111.03249}},{id:"430525",fullname:"洞口县",location:{lat:27.06038,lng:110.57583}},{id:"430527",fullname:"绥宁县",location:{lat:26.58201,lng:110.15568}},{id:"430528",fullname:"新宁县",location:{lat:26.43346,lng:110.85674}},{id:"430529",fullname:"城步苗族自治县",location:{lat:26.39051,lng:110.322}},{id:"430581",fullname:"武冈市",location:{lat:26.72659,lng:110.63138}},{id:"430602",fullname:"岳阳楼区",location:{lat:29.37197,lng:113.12931}},{id:"430603",fullname:"云溪区",location:{lat:29.47358,lng:113.27239}},{id:"430611",fullname:"君山区",location:{lat:29.46135,lng:113.00651}},{id:"430621",fullname:"岳阳县",location:{lat:29.14415,lng:113.11635}},{id:"430623",fullname:"华容县",location:{lat:29.53023,lng:112.54095}},{id:"430624",fullname:"湘阴县",location:{lat:28.68925,lng:112.90917}},{id:"430626",fullname:"平江县",location:{lat:28.70203,lng:113.58134}},{id:"430681",fullname:"汨罗市",location:{lat:28.80642,lng:113.06711}},{id:"430682",fullname:"临湘市",location:{lat:29.47684,lng:113.45058}},{id:"430702",fullname:"武陵区",location:{lat:29.05397,lng:111.68396}},{id:"430703",fullname:"鼎城区",location:{lat:28.96672,lng:111.9142}},{id:"430721",fullname:"安乡县",location:{lat:29.41142,lng:112.17096}},{id:"430722",fullname:"汉寿县",location:{lat:28.90549,lng:111.97043}},{id:"430723",fullname:"澧县",location:{lat:29.63318,lng:111.75868}},{id:"430724",fullname:"临澧县",location:{lat:29.44098,lng:111.64735}},{id:"430725",fullname:"桃源县",location:{lat:28.90259,lng:111.48893}},{id:"430726",fullname:"石门县",location:{lat:29.58413,lng:111.37982}},{id:"430781",fullname:"津市市",location:{lat:29.60543,lng:111.87741}},{id:"430802",fullname:"永定区",location:{lat:29.11983,lng:110.53737}},{id:"430811",fullname:"武陵源区",location:{lat:29.34571,lng:110.54997}},{id:"430821",fullname:"慈利县",location:{lat:29.4297,lng:111.13921}},{id:"430822",fullname:"桑植县",location:{lat:29.39971,lng:110.16428}},{id:"430902",fullname:"资阳区",location:{lat:28.591,lng:112.32426}},{id:"430903",fullname:"赫山区",location:{lat:28.5793,lng:112.37409}},{id:"430921",fullname:"南县",location:{lat:29.36162,lng:112.39636}},{id:"430922",fullname:"桃江县",location:{lat:28.51819,lng:112.15571}},{id:"430923",fullname:"安化县",location:{lat:28.37428,lng:111.21303}},{id:"430981",fullname:"沅江市",location:{lat:28.84402,lng:112.35468}},{id:"431002",fullname:"北湖区",location:{lat:25.78398,lng:113.01101}},{id:"431003",fullname:"苏仙区",location:{lat:25.8004,lng:113.04236}},{id:"431021",fullname:"桂阳县",location:{lat:25.7541,lng:112.73368}},{id:"431022",fullname:"宜章县",location:{lat:25.39957,lng:112.94887}},{id:"431023",fullname:"永兴县",location:{lat:26.1272,lng:113.11659}},{id:"431024",fullname:"嘉禾县",location:{lat:25.58766,lng:112.3686}},{id:"431025",fullname:"临武县",location:{lat:25.27596,lng:112.56295}},{id:"431026",fullname:"汝城县",location:{lat:25.55036,lng:113.68493}},{id:"431027",fullname:"桂东县",location:{lat:26.07752,lng:113.94454}},{id:"431028",fullname:"安仁县",location:{lat:26.70942,lng:113.26948}},{id:"431081",fullname:"资兴市",location:{lat:25.97619,lng:113.23601}},{id:"431102",fullname:"零陵区",location:{lat:26.22255,lng:111.63112}},{id:"431103",fullname:"冷水滩区",location:{lat:26.46098,lng:111.59244}},{id:"431121",fullname:"祁阳县",location:{lat:26.58012,lng:111.84015}},{id:"431122",fullname:"东安县",location:{lat:26.39206,lng:111.31644}},{id:"431123",fullname:"双牌县",location:{lat:25.96218,lng:111.66031}},{id:"431124",fullname:"道县",location:{lat:25.52753,lng:111.60007}},{id:"431125",fullname:"江永县",location:{lat:25.27353,lng:111.34385}},{id:"431126",fullname:"宁远县",location:{lat:25.56919,lng:111.94445}},{id:"431127",fullname:"蓝山县",location:{lat:25.36943,lng:112.19678}},{id:"431128",fullname:"新田县",location:{lat:25.9043,lng:112.20329}},{id:"431129",fullname:"江华瑶族自治县",location:{lat:25.18536,lng:111.57952}},{id:"431202",fullname:"鹤城区",location:{lat:27.57771,lng:110.04098}},{id:"431221",fullname:"中方县",location:{lat:27.43992,lng:109.94501}},{id:"431222",fullname:"沅陵县",location:{lat:28.45277,lng:110.39388}},{id:"431223",fullname:"辰溪县",location:{lat:28.00652,lng:110.18368}},{id:"431224",fullname:"溆浦县",location:{lat:27.90834,lng:110.59486}},{id:"431225",fullname:"会同县",location:{lat:26.88718,lng:109.7357}},{id:"431226",fullname:"麻阳苗族自治县",location:{lat:27.86555,lng:109.80256}},{id:"431227",fullname:"新晃侗族自治县",location:{lat:27.35264,lng:109.17492}},{id:"431228",fullname:"芷江侗族自治县",location:{lat:27.44328,lng:109.68519}},{id:"431229",fullname:"靖州苗族侗族自治县",location:{lat:26.57514,lng:109.69627}},{id:"431230",fullname:"通道侗族自治县",location:{lat:26.15794,lng:109.78449}},{id:"431281",fullname:"洪江市",location:{lat:27.20925,lng:109.83655}},{id:"431302",fullname:"娄星区",location:{lat:27.72978,lng:112.0017}},{id:"431321",fullname:"双峰县",location:{lat:27.45702,lng:112.19392}},{id:"431322",fullname:"新化县",location:{lat:27.72663,lng:111.32743}},{id:"431381",fullname:"冷水江市",location:{lat:27.68615,lng:111.43525}},{id:"431382",fullname:"涟源市",location:{lat:27.69271,lng:111.66446}},{id:"433101",fullname:"吉首市",location:{lat:28.26244,lng:109.69811}},{id:"433122",fullname:"泸溪县",location:{lat:28.21639,lng:110.21965}},{id:"433123",fullname:"凤凰县",location:{lat:27.94843,lng:109.59832}},{id:"433124",fullname:"花垣县",location:{lat:28.57211,lng:109.48224}},{id:"433125",fullname:"保靖县",location:{lat:28.70022,lng:109.65904}},{id:"433126",fullname:"古丈县",location:{lat:28.61711,lng:109.95085}},{id:"433127",fullname:"永顺县",location:{lat:29.00515,lng:109.84807}},{id:"433130",fullname:"龙山县",location:{lat:29.4579,lng:109.44387}},{id:"440103",fullname:"荔湾区",location:{lat:23.12586,lng:113.24428}},{id:"440104",fullname:"越秀区",location:{lat:23.12886,lng:113.2668}},{id:"440105",fullname:"海珠区",location:{lat:23.08331,lng:113.3172}},{id:"440106",fullname:"天河区",location:{lat:23.12463,lng:113.36199}},{id:"440111",fullname:"白云区",location:{lat:23.15792,lng:113.27324}},{id:"440112",fullname:"黄埔区",location:{lat:23.18139,lng:113.48067}},{id:"440113",fullname:"番禺区",location:{lat:22.93706,lng:113.3818}},{id:"440114",fullname:"花都区",location:{lat:23.40391,lng:113.22026}},{id:"440115",fullname:"南沙区",location:{lat:22.80169,lng:113.52497}},{id:"440183",fullname:"增城区",location:{lat:23.26093,lng:113.8109}},{id:"440184",fullname:"从化区",location:{lat:23.54835,lng:113.58646}},{id:"440203",fullname:"武江区",location:{lat:24.79268,lng:113.58771}},{id:"440204",fullname:"浈江区",location:{lat:24.80446,lng:113.61095}},{id:"440205",fullname:"曲江区",location:{lat:24.6826,lng:113.60458}},{id:"440222",fullname:"始兴县",location:{lat:24.95269,lng:114.06206}},{id:"440224",fullname:"仁化县",location:{lat:25.08566,lng:113.74918}},{id:"440229",fullname:"翁源县",location:{lat:24.3502,lng:114.13033}},{id:"440232",fullname:"乳源瑶族自治县",location:{lat:24.77591,lng:113.27596}},{id:"440233",fullname:"新丰县",location:{lat:24.05959,lng:114.20689}},{id:"440281",fullname:"乐昌市",location:{lat:25.13014,lng:113.34746}},{id:"440282",fullname:"南雄市",location:{lat:25.11962,lng:114.31084}},{id:"440303",fullname:"罗湖区",location:{lat:22.54895,lng:114.13111}},{id:"440304",fullname:"福田区",location:{lat:22.52291,lng:114.05454}},{id:"440305",fullname:"南山区",location:{lat:22.53332,lng:113.93041}},{id:"440306",fullname:"宝安区",location:{lat:22.55329,lng:113.88308}},{id:"440307",fullname:"龙岗区",location:{lat:22.71991,lng:114.24779}},{id:"440308",fullname:"盐田区",location:{lat:22.55786,lng:114.23748}},{id:"440402",fullname:"香洲区",location:{lat:22.26666,lng:113.54342}},{id:"440403",fullname:"斗门区",location:{lat:22.20903,lng:113.29658}},{id:"440404",fullname:"金湾区",location:{lat:22.14589,lng:113.3642}},{id:"440507",fullname:"龙湖区",location:{lat:23.37246,lng:116.71677}},{id:"440511",fullname:"金平区",location:{lat:23.36525,lng:116.7054}},{id:"440512",fullname:"濠江区",location:{lat:23.28592,lng:116.72664}},{id:"440513",fullname:"潮阳区",location:{lat:23.26489,lng:116.60157}},{id:"440514",fullname:"潮南区",location:{lat:23.25029,lng:116.4331}},{id:"440515",fullname:"澄海区",location:{lat:23.46613,lng:116.75608}},{id:"440523",fullname:"南澳县",location:{lat:23.42178,lng:117.02348}},{id:"440604",fullname:"禅城区",location:{lat:23.00944,lng:113.12249}},{id:"440605",fullname:"南海区",location:{lat:23.02882,lng:113.14278}},{id:"440606",fullname:"顺德区",location:{lat:22.80414,lng:113.2944}},{id:"440607",fullname:"三水区",location:{lat:23.15585,lng:112.89672}},{id:"440608",fullname:"高明区",location:{lat:22.90026,lng:112.89262}},{id:"440703",fullname:"蓬江区",location:{lat:22.59514,lng:113.07845}},{id:"440704",fullname:"江海区",location:{lat:22.56028,lng:113.11103}},{id:"440705",fullname:"新会区",location:{lat:22.45877,lng:113.03231}},{id:"440781",fullname:"台山市",location:{lat:22.25156,lng:112.7939}},{id:"440783",fullname:"开平市",location:{lat:22.37638,lng:112.69851}},{id:"440784",fullname:"鹤山市",location:{lat:22.7653,lng:112.96436}},{id:"440785",fullname:"恩平市",location:{lat:22.18294,lng:112.30532}},{id:"440802",fullname:"赤坎区",location:{lat:21.26624,lng:110.36534}},{id:"440803",fullname:"霞山区",location:{lat:21.19169,lng:110.39821}},{id:"440804",fullname:"坡头区",location:{lat:21.24475,lng:110.4555}},{id:"440811",fullname:"麻章区",location:{lat:21.26331,lng:110.33427}},{id:"440823",fullname:"遂溪县",location:{lat:21.37708,lng:110.25006}},{id:"440825",fullname:"徐闻县",location:{lat:20.32652,lng:110.17502}},{id:"440881",fullname:"廉江市",location:{lat:21.60962,lng:110.28625}},{id:"440882",fullname:"雷州市",location:{lat:20.91444,lng:110.09651}},{id:"440883",fullname:"吴川市",location:{lat:21.44182,lng:110.77824}},{id:"440902",fullname:"茂南区",location:{lat:21.64109,lng:110.91879}},{id:"440904",fullname:"电白区",location:{lat:21.51414,lng:111.01356}},{id:"440981",fullname:"高州市",location:{lat:21.91812,lng:110.85338}},{id:"440982",fullname:"化州市",location:{lat:21.66397,lng:110.63954}},{id:"440983",fullname:"信宜市",location:{lat:22.35429,lng:110.9471}},{id:"441202",fullname:"端州区",location:{lat:23.05196,lng:112.48461}},{id:"441203",fullname:"鼎湖区",location:{lat:23.15815,lng:112.56706}},{id:"441223",fullname:"广宁县",location:{lat:23.63493,lng:112.44112}},{id:"441224",fullname:"怀集县",location:{lat:23.91188,lng:112.18454}},{id:"441225",fullname:"封开县",location:{lat:23.42448,lng:111.51196}},{id:"441226",fullname:"德庆县",location:{lat:23.14376,lng:111.78559}},{id:"441283",fullname:"高要市",location:{lat:23.02581,lng:112.45839}},{id:"441284",fullname:"四会市",location:{lat:23.32743,lng:112.73404}},{id:"441302",fullname:"惠城区",location:{lat:23.08383,lng:114.38273}},{id:"441303",fullname:"惠阳区",location:{lat:22.78851,lng:114.45646}},{id:"441322",fullname:"博罗县",location:{lat:23.17315,lng:114.28973}},{id:"441323",fullname:"惠东县",location:{lat:22.98486,lng:114.71999}},{id:"441324",fullname:"龙门县",location:{lat:23.72763,lng:114.25486}},{id:"441402",fullname:"梅江区",location:{lat:24.30996,lng:116.11699}},{id:"441403",fullname:"梅县区",location:{lat:24.26539,lng:116.08245}},{id:"441422",fullname:"大埔县",location:{lat:24.34792,lng:116.6952}},{id:"441423",fullname:"丰顺县",location:{lat:23.73945,lng:116.18225}},{id:"441424",fullname:"五华县",location:{lat:23.93254,lng:115.77609}},{id:"441426",fullname:"平远县",location:{lat:24.56632,lng:115.89112}},{id:"441427",fullname:"蕉岭县",location:{lat:24.65861,lng:116.17123}},{id:"441481",fullname:"兴宁市",location:{lat:24.1365,lng:115.73119}},{id:"441502",fullname:"城区",location:{lat:22.7787,lng:115.36502}},{id:"441521",fullname:"海丰县",location:{lat:22.96657,lng:115.32341}},{id:"441523",fullname:"陆河县",location:{lat:23.30148,lng:115.65996}},{id:"441581",fullname:"陆丰市",location:{lat:22.94511,lng:115.64462}},{id:"441602",fullname:"源城区",location:{lat:23.73417,lng:114.70246}},{id:"441621",fullname:"紫金县",location:{lat:23.63532,lng:115.18398}},{id:"441622",fullname:"龙川县",location:{lat:24.10014,lng:115.25984}},{id:"441623",fullname:"连平县",location:{lat:24.36956,lng:114.48865}},{id:"441624",fullname:"和平县",location:{lat:24.44201,lng:114.93872}},{id:"441625",fullname:"东源县",location:{lat:23.78817,lng:114.74649}},{id:"441702",fullname:"江城区",location:{lat:21.86182,lng:111.95516}},{id:"441721",fullname:"阳西县",location:{lat:21.75229,lng:111.61791}},{id:"441723",fullname:"阳东县",location:{lat:21.86829,lng:112.0067}},{id:"441781",fullname:"阳春市",location:{lat:22.1703,lng:111.79153}},{id:"441802",fullname:"清城区",location:{lat:23.69795,lng:113.06269}},{id:"441803",fullname:"清新区",location:{lat:23.73474,lng:113.01658}},{id:"441821",fullname:"佛冈县",location:{lat:23.87921,lng:113.53172}},{id:"441823",fullname:"阳山县",location:{lat:24.465,lng:112.64132}},{id:"441825",fullname:"连山壮族瑶族自治县",location:{lat:24.57036,lng:112.09348}},{id:"441826",fullname:"连南瑶族自治县",location:{lat:24.7254,lng:112.28698}},{id:"441881",fullname:"英德市",location:{lat:24.18572,lng:113.41505}},{id:"441882",fullname:"连州市",location:{lat:24.77998,lng:112.37677}},{id:"445102",fullname:"湘桥区",location:{lat:23.67441,lng:116.62834}},{id:"445121",fullname:"潮安县",location:{lat:23.46244,lng:116.67809}},{id:"445122",fullname:"饶平县",location:{lat:23.66412,lng:117.0039}},{id:"445202",fullname:"榕城区",location:{lat:23.52486,lng:116.36692}},{id:"445203",fullname:"揭东区",location:{lat:23.56606,lng:116.41211}},{id:"445222",fullname:"揭西县",location:{lat:23.43141,lng:115.84189}},{id:"445224",fullname:"惠来县",location:{lat:23.03321,lng:116.29511}},{id:"445281",fullname:"普宁市",location:{lat:23.29736,lng:116.16569}},{id:"445302",fullname:"云城区",location:{lat:22.92797,lng:112.04373}},{id:"445321",fullname:"新兴县",location:{lat:22.69573,lng:112.22536}},{id:"445322",fullname:"郁南县",location:{lat:23.23464,lng:111.53536}},{id:"445323",fullname:"云安县",location:{lat:23.07101,lng:112.00324}},{id:"445381",fullname:"罗定市",location:{lat:22.7683,lng:111.57004}},{id:"450102",fullname:"兴宁区",location:{lat:22.85429,lng:108.36836}},{id:"450103",fullname:"青秀区",location:{lat:22.78658,lng:108.49693}},{id:"450105",fullname:"江南区",location:{lat:22.78129,lng:108.27331}},{id:"450107",fullname:"西乡塘区",location:{lat:22.83393,lng:108.31343}},{id:"450108",fullname:"良庆区",location:{lat:22.75619,lng:108.32082}},{id:"450109",fullname:"邕宁区",location:{lat:22.75837,lng:108.48737}},{id:"450122",fullname:"武鸣县",location:{lat:23.15865,lng:108.27463}},{id:"450123",fullname:"隆安县",location:{lat:23.16589,lng:107.6961}},{id:"450124",fullname:"马山县",location:{lat:23.70817,lng:108.17702}},{id:"450125",fullname:"上林县",location:{lat:23.43205,lng:108.60506}},{id:"450126",fullname:"宾阳县",location:{lat:23.21768,lng:108.8103}},{id:"450127",fullname:"横县",location:{lat:22.67999,lng:109.26147}},{id:"450202",fullname:"城中区",location:{lat:24.33941,lng:109.44626}},{id:"450203",fullname:"鱼峰区",location:{lat:24.28154,lng:109.44726}},{id:"450204",fullname:"柳南区",location:{lat:24.33599,lng:109.3859}},{id:"450205",fullname:"柳北区",location:{lat:24.36213,lng:109.40189}},{id:"450221",fullname:"柳江县",location:{lat:24.25465,lng:109.32672}},{id:"450222",fullname:"柳城县",location:{lat:24.65058,lng:109.24468}},{id:"450223",fullname:"鹿寨县",location:{lat:24.47308,lng:109.75179}},{id:"450224",fullname:"融安县",location:{lat:25.22467,lng:109.39764}},{id:"450225",fullname:"融水苗族自治县",location:{lat:25.06629,lng:109.25636}},{id:"450226",fullname:"三江侗族自治县",location:{lat:25.78314,lng:109.60788}},{id:"450302",fullname:"秀峰区",location:{lat:25.28131,lng:110.28903}},{id:"450303",fullname:"叠彩区",location:{lat:25.31402,lng:110.30188}},{id:"450304",fullname:"象山区",location:{lat:25.26159,lng:110.2811}},{id:"450305",fullname:"七星区",location:{lat:25.25235,lng:110.31771}},{id:"450311",fullname:"雁山区",location:{lat:25.06039,lng:110.30914}},{id:"450312",fullname:"临桂区",location:{lat:25.23868,lng:110.2124}},{id:"450321",fullname:"阳朔县",location:{lat:24.77843,lng:110.49663}},{id:"450323",fullname:"灵川县",location:{lat:25.4097,lng:110.32552}},{id:"450324",fullname:"全州县",location:{lat:25.92861,lng:111.07304}},{id:"450325",fullname:"兴安县",location:{lat:25.61169,lng:110.67147}},{id:"450326",fullname:"永福县",location:{lat:24.98001,lng:109.98318}},{id:"450327",fullname:"灌阳县",location:{lat:25.48932,lng:111.16083}},{id:"450328",fullname:"龙胜各族自治县",location:{lat:25.79809,lng:110.01149}},{id:"450329",fullname:"资源县",location:{lat:26.04241,lng:110.65259}},{id:"450330",fullname:"平乐县",location:{lat:24.63325,lng:110.64322}},{id:"450331",fullname:"荔浦县",location:{lat:24.48785,lng:110.39508}},{id:"450332",fullname:"恭城瑶族自治县",location:{lat:24.83135,lng:110.82835}},{id:"450403",fullname:"万秀区",location:{lat:23.47303,lng:111.32033}},{id:"450405",fullname:"长洲区",location:{lat:23.48555,lng:111.27466}},{id:"450421",fullname:"苍梧县",location:{lat:23.05645,lng:111.24049}},{id:"450422",fullname:"藤县",location:{lat:23.37497,lng:110.91497}},{id:"450423",fullname:"蒙山县",location:{lat:24.19355,lng:110.52492}},{id:"450481",fullname:"岑溪市",location:{lat:22.91828,lng:110.9949}},{id:"450502",fullname:"海城区",location:{lat:21.47525,lng:109.1175}},{id:"450503",fullname:"银海区",location:{lat:21.44872,lng:109.13916}},{id:"450512",fullname:"铁山港区",location:{lat:21.52909,lng:109.4216}},{id:"450521",fullname:"合浦县",location:{lat:21.66089,lng:109.20725}},{id:"450602",fullname:"港口区",location:{lat:21.64348,lng:108.38012}},{id:"450603",fullname:"防城区",location:{lat:21.76913,lng:108.35342}},{id:"450621",fullname:"上思县",location:{lat:22.1537,lng:107.98362}},{id:"450681",fullname:"东兴市",location:{lat:21.54792,lng:107.97188}},{id:"450702",fullname:"钦南区",location:{lat:21.93854,lng:108.6569}},{id:"450703",fullname:"钦北区",location:{lat:22.17075,lng:108.57324}},{id:"450721",fullname:"灵山县",location:{lat:22.41651,lng:109.29097}},{id:"450722",fullname:"浦北县",location:{lat:22.27152,lng:109.55698}},{id:"450802",fullname:"港北区",location:{lat:23.11084,lng:109.57339}},{id:"450803",fullname:"港南区",location:{lat:23.07504,lng:109.59996}},{id:"450804",fullname:"覃塘区",location:{lat:23.12718,lng:109.45269}},{id:"450821",fullname:"平南县",location:{lat:23.53919,lng:110.39215}},{id:"450881",fullname:"桂平市",location:{lat:23.3941,lng:110.07901}},{id:"450902",fullname:"玉州区",location:{lat:22.62811,lng:110.15133}},{id:"450921",fullname:"容县",location:{lat:22.85783,lng:110.55786}},{id:"450922",fullname:"陆川县",location:{lat:22.32109,lng:110.26413}},{id:"450923",fullname:"博白县",location:{lat:22.27306,lng:109.97627}},{id:"450924",fullname:"兴业县",location:{lat:22.73636,lng:109.87517}},{id:"450981",fullname:"北流市",location:{lat:22.70837,lng:110.35426}},{id:"451002",fullname:"右江区",location:{lat:23.90115,lng:106.61897}},{id:"451021",fullname:"田阳县",location:{lat:23.73567,lng:106.91567}},{id:"451022",fullname:"田东县",location:{lat:23.59724,lng:107.12608}},{id:"451023",fullname:"平果县",location:{lat:23.32933,lng:107.58988}},{id:"451024",fullname:"德保县",location:{lat:23.3234,lng:106.6155}},{id:"451025",fullname:"靖西县",location:{lat:23.13402,lng:106.41769}},{id:"451026",fullname:"那坡县",location:{lat:23.38739,lng:105.83265}},{id:"451027",fullname:"凌云县",location:{lat:24.34751,lng:106.56159}},{id:"451028",fullname:"乐业县",location:{lat:24.78583,lng:106.56163}},{id:"451029",fullname:"田林县",location:{lat:24.29438,lng:106.22852}},{id:"451030",fullname:"西林县",location:{lat:24.48957,lng:105.09383}},{id:"451031",fullname:"隆林各族自治县",location:{lat:24.77066,lng:105.34389}},{id:"451102",fullname:"八步区",location:{lat:24.41175,lng:111.55197}},{id:"451121",fullname:"昭平县",location:{lat:24.16947,lng:110.81137}},{id:"451122",fullname:"钟山县",location:{lat:24.5264,lng:111.30278}},{id:"451123",fullname:"富川瑶族自治县",location:{lat:24.81433,lng:111.27753}},{id:"451202",fullname:"金城江区",location:{lat:24.68983,lng:108.03719}},{id:"451221",fullname:"南丹县",location:{lat:24.97535,lng:107.54224}},{id:"451222",fullname:"天峨县",location:{lat:24.99911,lng:107.17372}},{id:"451223",fullname:"凤山县",location:{lat:24.54699,lng:107.04221}},{id:"451224",fullname:"东兰县",location:{lat:24.51072,lng:107.37421}},{id:"451225",fullname:"罗城仫佬族自治县",location:{lat:24.77739,lng:108.90465}},{id:"451226",fullname:"环江毛南族自治县",location:{lat:24.82601,lng:108.2583}},{id:"451227",fullname:"巴马瑶族自治县",location:{lat:24.14125,lng:107.25957}},{id:"451228",fullname:"都安瑶族自治县",location:{lat:23.93122,lng:108.10555}},{id:"451229",fullname:"大化瑶族自治县",location:{lat:23.7364,lng:107.99814}},{id:"451281",fullname:"宜州市",location:{lat:24.48513,lng:108.63656}},{id:"451302",fullname:"兴宾区",location:{lat:23.72742,lng:109.23462}},{id:"451321",fullname:"忻城县",location:{lat:24.06617,lng:108.66575}},{id:"451322",fullname:"象州县",location:{lat:23.97374,lng:109.70526}},{id:"451323",fullname:"武宣县",location:{lat:23.59414,lng:109.66325}},{id:"451324",fullname:"金秀瑶族自治县",location:{lat:24.13039,lng:110.18942}},{id:"451381",fullname:"合山市",location:{lat:23.8066,lng:108.88611}},{id:"451402",fullname:"江州区",location:{lat:22.40566,lng:107.35325}},{id:"451421",fullname:"扶绥县",location:{lat:22.63497,lng:107.90411}},{id:"451422",fullname:"宁明县",location:{lat:22.14016,lng:107.07668}},{id:"451423",fullname:"龙州县",location:{lat:22.34262,lng:106.85455}},{id:"451424",fullname:"大新县",location:{lat:22.8304,lng:107.20124}},{id:"451425",fullname:"天等县",location:{lat:23.08134,lng:107.14363}},{id:"451481",fullname:"凭祥市",location:{lat:22.09439,lng:106.76649}},{id:"460105",fullname:"秀英区",location:{lat:20.0076,lng:110.29357}},{id:"460106",fullname:"龙华区",location:{lat:20.02971,lng:110.32941}},{id:"460107",fullname:"琼山区",location:{lat:20.0039,lng:110.35432}},{id:"460108",fullname:"美兰区",location:{lat:20.02864,lng:110.36663}},{id:"460201",fullname:"三亚市",location:{lat:18.25248,lng:109.51209}},{id:"510104",fullname:"锦江区",location:{lat:30.65618,lng:104.08329}},{id:"510105",fullname:"青羊区",location:{lat:30.67485,lng:104.06291}},{id:"510106",fullname:"金牛区",location:{lat:30.69015,lng:104.05293}},{id:"510107",fullname:"武侯区",location:{lat:30.64242,lng:104.04311}},{id:"510108",fullname:"成华区",location:{lat:30.65984,lng:104.10194}},{id:"510112",fullname:"龙泉驿区",location:{lat:30.55663,lng:104.27471}},{id:"510113",fullname:"青白江区",location:{lat:30.87849,lng:104.25122}},{id:"510114",fullname:"新都区",location:{lat:30.82404,lng:104.15801}},{id:"510115",fullname:"温江区",location:{lat:30.68144,lng:103.8559}},{id:"510121",fullname:"金堂县",location:{lat:30.86203,lng:104.41205}},{id:"510122",fullname:"双流县",location:{lat:30.57447,lng:103.92377}},{id:"510124",fullname:"郫县",location:{lat:30.79589,lng:103.90256}},{id:"510129",fullname:"大邑县",location:{lat:30.58757,lng:103.52085}},{id:"510131",fullname:"蒲江县",location:{lat:30.19676,lng:103.50628}},{id:"510132",fullname:"新津县",location:{lat:30.41026,lng:103.81166}},{id:"510181",fullname:"都江堰市",location:{lat:30.98837,lng:103.64662}},{id:"510182",fullname:"彭州市",location:{lat:30.99018,lng:103.95811}},{id:"510183",fullname:"邛崃市",location:{lat:30.41032,lng:103.46436}},{id:"510184",fullname:"崇州市",location:{lat:30.63021,lng:103.67289}},{id:"510302",fullname:"自流井区",location:{lat:29.3374,lng:104.77728}},{id:"510303",fullname:"贡井区",location:{lat:29.34576,lng:104.71526}},{id:"510304",fullname:"大安区",location:{lat:29.36371,lng:104.7739}},{id:"510311",fullname:"沿滩区",location:{lat:29.27234,lng:104.87423}},{id:"510321",fullname:"荣县",location:{lat:29.4445,lng:104.41766}},{id:"510322",fullname:"富顺县",location:{lat:29.18127,lng:104.97495}},{id:"510402",fullname:"东区",location:{lat:26.54639,lng:101.70413}},{id:"510403",fullname:"西区",location:{lat:26.59757,lng:101.63064}},{id:"510411",fullname:"仁和区",location:{lat:26.59092,lng:101.67934}},{id:"510421",fullname:"米易县",location:{lat:26.89067,lng:102.11024}},{id:"510422",fullname:"盐边县",location:{lat:26.68265,lng:101.85393}},{id:"510502",fullname:"江阳区",location:{lat:28.87875,lng:105.43501}},{id:"510503",fullname:"纳溪区",location:{lat:28.77313,lng:105.37131}},{id:"510504",fullname:"龙马潭区",location:{lat:28.91318,lng:105.43779}},{id:"510521",fullname:"泸县",location:{lat:29.1516,lng:105.38185}},{id:"510522",fullname:"合江县",location:{lat:28.81147,lng:105.83135}},{id:"510524",fullname:"叙永县",location:{lat:28.15588,lng:105.44475}},{id:"510525",fullname:"古蔺县",location:{lat:28.03884,lng:105.81239}},{id:"510603",fullname:"旌阳区",location:{lat:31.14263,lng:104.41702}},{id:"510623",fullname:"中江县",location:{lat:31.03304,lng:104.67872}},{id:"510626",fullname:"罗江县",location:{lat:31.31681,lng:104.51021}},{id:"510681",fullname:"广汉市",location:{lat:30.97706,lng:104.28249}},{id:"510682",fullname:"什邡市",location:{lat:31.12736,lng:104.16694}},{id:"510683",fullname:"绵竹市",location:{lat:31.33776,lng:104.22083}},{id:"510703",fullname:"涪城区",location:{lat:31.45498,lng:104.75708}},{id:"510704",fullname:"游仙区",location:{lat:31.47367,lng:104.7667}},{id:"510722",fullname:"三台县",location:{lat:31.09563,lng:105.09459}},{id:"510723",fullname:"盐亭县",location:{lat:31.20819,lng:105.38996}},{id:"510724",fullname:"安县",location:{lat:31.53474,lng:104.56756}},{id:"510725",fullname:"梓潼县",location:{lat:31.63529,lng:105.16118}},{id:"510726",fullname:"北川羌族自治县",location:{lat:31.89148,lng:104.30755}},{id:"510727",fullname:"平武县",location:{lat:32.40858,lng:104.52904}},{id:"510781",fullname:"江油市",location:{lat:31.75691,lng:104.72458}},{id:"510802",fullname:"利州区",location:{lat:32.43396,lng:105.84559}},{id:"510811",fullname:"昭化区",location:{lat:32.3232,lng:105.96304}},{id:"510812",fullname:"朝天区",location:{lat:32.64409,lng:105.89034}},{id:"510821",fullname:"旺苍县",location:{lat:32.2291,lng:106.28974}},{id:"510822",fullname:"青川县",location:{lat:32.5841,lng:105.23822}},{id:"510823",fullname:"剑阁县",location:{lat:32.28849,lng:105.52526}},{id:"510824",fullname:"苍溪县",location:{lat:31.73244,lng:105.93442}},{id:"510903",fullname:"船山区",location:{lat:30.52552,lng:105.56821}},{id:"510904",fullname:"安居区",location:{lat:30.35541,lng:105.45636}},{id:"510921",fullname:"蓬溪县",location:{lat:30.75778,lng:105.70756}},{id:"510922",fullname:"射洪县",location:{lat:30.87113,lng:105.38836}},{id:"510923",fullname:"大英县",location:{lat:30.5945,lng:105.23649}},{id:"511002",fullname:"市中区",location:{lat:29.58702,lng:105.06772}},{id:"511011",fullname:"东兴区",location:{lat:29.59346,lng:105.07459}},{id:"511024",fullname:"威远县",location:{lat:29.52742,lng:104.66885}},{id:"511025",fullname:"资中县",location:{lat:29.76416,lng:104.85212}},{id:"511028",fullname:"隆昌县",location:{lat:29.33948,lng:105.28773}},{id:"511102",fullname:"市中区",location:{lat:29.55544,lng:103.7612}},{id:"511111",fullname:"沙湾区",location:{lat:29.41306,lng:103.55027}},{id:"511112",fullname:"五通桥区",location:{lat:29.40726,lng:103.81846}},{id:"511113",fullname:"金口河区",location:{lat:29.24447,lng:103.07879}},{id:"511123",fullname:"犍为县",location:{lat:29.20828,lng:103.94931}},{id:"511124",fullname:"井研县",location:{lat:29.65305,lng:104.06482}},{id:"511126",fullname:"夹江县",location:{lat:29.73753,lng:103.57156}},{id:"511129",fullname:"沐川县",location:{lat:28.95673,lng:103.90241}},{id:"511132",fullname:"峨边彝族自治县",location:{lat:29.23047,lng:103.26202}},{id:"511133",fullname:"马边彝族自治县",location:{lat:28.83557,lng:103.54635}},{id:"511181",fullname:"峨眉山市",location:{lat:29.60125,lng:103.48447}},{id:"511302",fullname:"顺庆区",location:{lat:30.79653,lng:106.09224}},{id:"511303",fullname:"高坪区",location:{lat:30.78154,lng:106.11877}},{id:"511304",fullname:"嘉陵区",location:{lat:30.75874,lng:106.07176}},{id:"511321",fullname:"南部县",location:{lat:31.35316,lng:106.06734}},{id:"511322",fullname:"营山县",location:{lat:31.0767,lng:106.56553}},{id:"511323",fullname:"蓬安县",location:{lat:31.0286,lng:106.4123}},{id:"511324",fullname:"仪陇县",location:{lat:31.26998,lng:106.3033}},{id:"511325",fullname:"西充县",location:{lat:30.99517,lng:105.90072}},{id:"511381",fullname:"阆中市",location:{lat:31.55837,lng:106.00499}},{id:"511402",fullname:"东坡区",location:{lat:30.04228,lng:103.83211}},{id:"511421",fullname:"仁寿县",location:{lat:29.99572,lng:104.13407}},{id:"511422",fullname:"彭山县",location:{lat:30.19299,lng:103.87283}},{id:"511423",fullname:"洪雅县",location:{lat:29.90496,lng:103.37288}},{id:"511424",fullname:"丹棱县",location:{lat:30.01453,lng:103.51284}},{id:"511425",fullname:"青神县",location:{lat:29.8315,lng:103.84656}},{id:"511502",fullname:"翠屏区",location:{lat:28.76593,lng:104.61947}},{id:"511503",fullname:"南溪区",location:{lat:28.84548,lng:104.96953}},{id:"511521",fullname:"宜宾县",location:{lat:28.68998,lng:104.53316}},{id:"511523",fullname:"江安县",location:{lat:28.72389,lng:105.06688}},{id:"511524",fullname:"长宁县",location:{lat:28.58227,lng:104.9211}},{id:"511525",fullname:"高县",location:{lat:28.43622,lng:104.5176}},{id:"511526",fullname:"珙县",location:{lat:28.43885,lng:104.70878}},{id:"511527",fullname:"筠连县",location:{lat:28.16418,lng:104.51185}},{id:"511528",fullname:"兴文县",location:{lat:28.30361,lng:105.23646}},{id:"511529",fullname:"屏山县",location:{lat:28.65312,lng:104.15125}},{id:"511602",fullname:"广安区",location:{lat:30.47392,lng:106.64188}},{id:"511621",fullname:"岳池县",location:{lat:30.53795,lng:106.43988}},{id:"511622",fullname:"武胜县",location:{lat:30.34935,lng:106.29597}},{id:"511623",fullname:"邻水县",location:{lat:30.33458,lng:106.93048}},{id:"511681",fullname:"华蓥市",location:{lat:30.39001,lng:106.78298}},{id:"511702",fullname:"通川区",location:{lat:31.21473,lng:107.50455}},{id:"511721",fullname:"达县",location:{lat:31.19603,lng:107.51177}},{id:"511722",fullname:"宣汉县",location:{lat:31.35386,lng:107.7271}},{id:"511723",fullname:"开江县",location:{lat:31.08316,lng:107.86852}},{id:"511724",fullname:"大竹县",location:{lat:30.73607,lng:107.20441}},{id:"511725",fullname:"渠县",location:{lat:30.83664,lng:106.97299}},{id:"511781",fullname:"万源市",location:{lat:32.08197,lng:108.03446}},{id:"511802",fullname:"雨城区",location:{lat:30.00534,lng:103.03311}},{id:"511803",fullname:"名山区",location:{lat:30.06982,lng:103.10954}},{id:"511822",fullname:"荥经县",location:{lat:29.79308,lng:102.84671}},{id:"511823",fullname:"汉源县",location:{lat:29.34457,lng:102.65261}},{id:"511824",fullname:"石棉县",location:{lat:29.22799,lng:102.35944}},{id:"511825",fullname:"天全县",location:{lat:30.06672,lng:102.7584}},{id:"511826",fullname:"芦山县",location:{lat:30.14408,lng:102.92826}},{id:"511827",fullname:"宝兴县",location:{lat:30.36806,lng:102.81457}},{id:"511902",fullname:"巴州区",location:{lat:31.85131,lng:106.76897}},{id:"511921",fullname:"通江县",location:{lat:31.9118,lng:107.24493}},{id:"511922",fullname:"南江县",location:{lat:32.34645,lng:106.82907}},{id:"511923",fullname:"平昌县",location:{lat:31.56054,lng:107.10358}},{id:"512002",fullname:"雁江区",location:{lat:30.11758,lng:104.6522}},{id:"512021",fullname:"安岳县",location:{lat:30.09733,lng:105.33537}},{id:"512022",fullname:"乐至县",location:{lat:30.2759,lng:105.02133}},{id:"512081",fullname:"简阳市",location:{lat:30.41133,lng:104.54733}},{id:"513221",fullname:"汶川县",location:{lat:31.47686,lng:103.5903}},{id:"513222",fullname:"理县",location:{lat:31.43659,lng:103.167}},{id:"513223",fullname:"茂县",location:{lat:31.68113,lng:103.85351}},{id:"513224",fullname:"松潘县",location:{lat:32.63813,lng:103.59893}},{id:"513225",fullname:"九寨沟县",location:{lat:33.26142,lng:104.23567}},{id:"513226",fullname:"金川县",location:{lat:31.47597,lng:102.06325}},{id:"513227",fullname:"小金县",location:{lat:30.99918,lng:102.3644}},{id:"513228",fullname:"黑水县",location:{lat:32.06179,lng:102.99021}},{id:"513229",fullname:"马尔康县",location:{lat:31.90585,lng:102.20644}},{id:"513230",fullname:"壤塘县",location:{lat:32.26545,lng:100.97861}},{id:"513231",fullname:"阿坝县",location:{lat:32.90245,lng:101.70634}},{id:"513232",fullname:"若尔盖县",location:{lat:33.57586,lng:102.96187}},{id:"513233",fullname:"红原县",location:{lat:32.79087,lng:102.54438}},{id:"513321",fullname:"康定县",location:{lat:29.9987,lng:101.95651}},{id:"513322",fullname:"泸定县",location:{lat:29.91412,lng:102.23471}},{id:"513323",fullname:"丹巴县",location:{lat:30.87868,lng:101.89077}},{id:"513324",fullname:"九龙县",location:{lat:29.00019,lng:101.50729}},{id:"513325",fullname:"雅江县",location:{lat:30.03145,lng:101.01426}},{id:"513326",fullname:"道孚县",location:{lat:30.97936,lng:101.12508}},{id:"513327",fullname:"炉霍县",location:{lat:31.39005,lng:100.67703}},{id:"513328",fullname:"甘孜县",location:{lat:31.623,lng:99.99266}},{id:"513329",fullname:"新龙县",location:{lat:30.93932,lng:100.31152}},{id:"513330",fullname:"德格县",location:{lat:31.80612,lng:98.58088}},{id:"513331",fullname:"白玉县",location:{lat:31.21014,lng:98.82418}},{id:"513332",fullname:"石渠县",location:{lat:32.97834,lng:98.10294}},{id:"513333",fullname:"色达县",location:{lat:32.26814,lng:100.33264}},{id:"513334",fullname:"理塘县",location:{lat:29.99603,lng:100.26963}},{id:"513335",fullname:"巴塘县",location:{lat:30.00537,lng:99.1105}},{id:"513336",fullname:"乡城县",location:{lat:28.93118,lng:99.79842}},{id:"513337",fullname:"稻城县",location:{lat:29.03704,lng:100.29829}},{id:"513338",fullname:"得荣县",location:{lat:28.71307,lng:99.28639}},{id:"513401",fullname:"西昌市",location:{lat:27.89449,lng:102.26305}},{id:"513422",fullname:"木里藏族自治县",location:{lat:27.92859,lng:101.28048}},{id:"513423",fullname:"盐源县",location:{lat:27.42241,lng:101.50919}},{id:"513424",fullname:"德昌县",location:{lat:27.40289,lng:102.17559}},{id:"513425",fullname:"会理县",location:{lat:26.65527,lng:102.24457}},{id:"513426",fullname:"会东县",location:{lat:26.6346,lng:102.57817}},{id:"513427",fullname:"宁南县",location:{lat:27.06667,lng:102.76052}},{id:"513428",fullname:"普格县",location:{lat:27.3765,lng:102.54092}},{id:"513429",fullname:"布拖县",location:{lat:27.70622,lng:102.81149}},{id:"513430",fullname:"金阳县",location:{lat:27.69654,lng:103.24903}},{id:"513431",fullname:"昭觉县",location:{lat:28.01425,lng:102.84265}},{id:"513432",fullname:"喜德县",location:{lat:28.30666,lng:102.41231}},{id:"513433",fullname:"冕宁县",location:{lat:28.55018,lng:102.17678}},{id:"513434",fullname:"越西县",location:{lat:28.63999,lng:102.5075}},{id:"513435",fullname:"甘洛县",location:{lat:28.95873,lng:102.77033}},{id:"513436",fullname:"美姑县",location:{lat:28.32885,lng:103.13229}},{id:"513437",fullname:"雷波县",location:{lat:28.26272,lng:103.5715}},{id:"520102",fullname:"南明区",location:{lat:26.56822,lng:106.7141}},{id:"520103",fullname:"云岩区",location:{lat:26.60491,lng:106.72566}},{id:"520111",fullname:"花溪区",location:{lat:26.40985,lng:106.67034}},{id:"520112",fullname:"乌当区",location:{lat:26.52645,lng:106.56112}},{id:"520113",fullname:"白云区",location:{lat:26.67856,lng:106.62304}},{id:"520121",fullname:"开阳县",location:{lat:27.05759,lng:106.96486}},{id:"520122",fullname:"息烽县",location:{lat:27.09053,lng:106.7404}},{id:"520123",fullname:"修文县",location:{lat:26.83877,lng:106.59222}},{id:"520181",fullname:"清镇市",location:{lat:26.55607,lng:106.47057}},{id:"520201",fullname:"钟山区",location:{lat:26.4455,lng:105.09417}},{id:"520203",fullname:"六枝特区",location:{lat:26.20141,lng:105.48025}},{id:"520221",fullname:"水城县",location:{lat:26.54658,lng:104.95764}},{id:"520222",fullname:"盘县",location:{lat:25.70993,lng:104.47158}},{id:"520302",fullname:"红花岗区",location:{lat:27.64481,lng:106.8938}},{id:"520303",fullname:"汇川区",location:{lat:27.74979,lng:106.93252}},{id:"520321",fullname:"遵义县",location:{lat:27.53613,lng:106.82993}},{id:"520322",fullname:"桐梓县",location:{lat:28.13321,lng:106.82502}},{id:"520323",fullname:"绥阳县",location:{lat:27.94705,lng:107.1907}},{id:"520324",fullname:"正安县",location:{lat:28.55011,lng:107.44402}},{id:"520325",fullname:"道真仡佬族苗族自治县",location:{lat:28.86264,lng:107.61316}},{id:"520326",fullname:"务川仡佬族苗族自治县",location:{lat:28.56295,lng:107.89888}},{id:"520327",fullname:"凤冈县",location:{lat:27.95465,lng:107.71689}},{id:"520328",fullname:"湄潭县",location:{lat:27.74889,lng:107.46551}},{id:"520329",fullname:"余庆县",location:{lat:27.13255,lng:107.86541}},{id:"520330",fullname:"习水县",location:{lat:28.3274,lng:106.20385}},{id:"520381",fullname:"赤水市",location:{lat:28.59055,lng:105.69744}},{id:"520382",fullname:"仁怀市",location:{lat:27.79234,lng:106.40156}},{id:"520402",fullname:"西秀区",location:{lat:26.24532,lng:105.96533}},{id:"520421",fullname:"平坝县",location:{lat:26.40487,lng:106.25662}},{id:"520422",fullname:"普定县",location:{lat:26.30144,lng:105.74291}},{id:"520423",fullname:"镇宁布依族苗族自治县",location:{lat:26.05716,lng:105.77048}},{id:"520424",fullname:"关岭布依族苗族自治县",location:{lat:25.94357,lng:105.61933}},{id:"520425",fullname:"紫云苗族布依族自治县",location:{lat:25.75117,lng:106.08404}},{id:"520502",fullname:"七星关区",location:{lat:27.29847,lng:105.30504}},{id:"520521",fullname:"大方县",location:{lat:27.14161,lng:105.613}},{id:"520522",fullname:"黔西县",location:{lat:27.00866,lng:106.0323}},{id:"520523",fullname:"金沙县",location:{lat:27.45922,lng:106.22014}},{id:"520524",fullname:"织金县",location:{lat:26.66301,lng:105.77488}},{id:"520525",fullname:"纳雍县",location:{lat:26.7777,lng:105.38269}},{id:"520526",fullname:"威宁彝族回族苗族自治县",location:{lat:26.85641,lng:104.27872}},{id:"520527",fullname:"赫章县",location:{lat:27.12328,lng:104.7274}},{id:"520602",fullname:"碧江区",location:{lat:27.69066,lng:109.18099}},{id:"520603",fullname:"万山区",location:{lat:27.51796,lng:109.21369}},{id:"520621",fullname:"江口县",location:{lat:27.69956,lng:108.83967}},{id:"520622",fullname:"玉屏侗族自治县",location:{lat:27.23637,lng:108.91212}},{id:"520623",fullname:"石阡县",location:{lat:27.51339,lng:108.22338}},{id:"520624",fullname:"思南县",location:{lat:27.93886,lng:108.2528}},{id:"520625",fullname:"印江土家族苗族自治县",location:{lat:27.9941,lng:108.40958}},{id:"520626",fullname:"德江县",location:{lat:28.26408,lng:108.11987}},{id:"520627",fullname:"沿河土家族自治县",location:{lat:28.56397,lng:108.50301}},{id:"520628",fullname:"松桃苗族自治县",location:{lat:28.15414,lng:109.20316}},{id:"522301",fullname:"兴义市",location:{lat:25.09192,lng:104.89553}},{id:"522322",fullname:"兴仁县",location:{lat:25.43511,lng:105.18639}},{id:"522323",fullname:"普安县",location:{lat:25.78429,lng:104.95324}},{id:"522324",fullname:"晴隆县",location:{lat:25.83474,lng:105.21904}},{id:"522325",fullname:"贞丰县",location:{lat:25.38558,lng:105.65043}},{id:"522326",fullname:"望谟县",location:{lat:25.17824,lng:106.09962}},{id:"522327",fullname:"册亨县",location:{lat:24.98368,lng:105.81173}},{id:"522328",fullname:"安龙县",location:{lat:25.09811,lng:105.44333}},{id:"522601",fullname:"凯里市",location:{lat:26.56756,lng:107.9804}},{id:"522622",fullname:"黄平县",location:{lat:26.90533,lng:107.91638}},{id:"522623",fullname:"施秉县",location:{lat:27.03327,lng:108.12413}},{id:"522624",fullname:"三穗县",location:{lat:26.95291,lng:108.67533}},{id:"522625",fullname:"镇远县",location:{lat:27.04914,lng:108.42968}},{id:"522626",fullname:"岑巩县",location:{lat:27.17385,lng:108.8157}},{id:"522627",fullname:"天柱县",location:{lat:26.71895,lng:109.56027}},{id:"522628",fullname:"锦屏县",location:{lat:26.67631,lng:109.20051}},{id:"522629",fullname:"剑河县",location:{lat:26.7286,lng:108.44137}},{id:"522630",fullname:"台江县",location:{lat:26.66903,lng:108.32009}},{id:"522631",fullname:"黎平县",location:{lat:26.22924,lng:109.13718}},{id:"522632",fullname:"榕江县",location:{lat:25.93189,lng:108.52251}},{id:"522633",fullname:"从江县",location:{lat:25.75418,lng:108.90532}},{id:"522634",fullname:"雷山县",location:{lat:26.37834,lng:108.07758}},{id:"522635",fullname:"麻江县",location:{lat:26.49115,lng:107.58937}},{id:"522636",fullname:"丹寨县",location:{lat:26.19841,lng:107.78871}},{id:"522701",fullname:"都匀市",location:{lat:26.25979,lng:107.51867}},{id:"522702",fullname:"福泉市",location:{lat:26.68651,lng:107.5207}},{id:"522722",fullname:"荔波县",location:{lat:25.41124,lng:107.88732}},{id:"522723",fullname:"贵定县",location:{lat:26.58498,lng:107.23447}},{id:"522725",fullname:"瓮安县",location:{lat:27.0779,lng:107.47106}},{id:"522726",fullname:"独山县",location:{lat:25.82219,lng:107.54504}},{id:"522727",fullname:"平塘县",location:{lat:25.82249,lng:107.32287}},{id:"522728",fullname:"罗甸县",location:{lat:25.42536,lng:106.75171}},{id:"522729",fullname:"长顺县",location:{lat:26.02214,lng:106.45244}},{id:"522730",fullname:"龙里县",location:{lat:26.45325,lng:106.97981}},{id:"522731",fullname:"惠水县",location:{lat:26.1329,lng:106.6567}},{id:"522732",fullname:"三都水族自治县",location:{lat:25.98326,lng:107.86971}},{id:"530102",fullname:"五华区",location:{lat:25.33501,lng:102.65934}},{id:"530103",fullname:"盘龙区",location:{lat:25.0312,lng:102.73413}},{id:"530111",fullname:"官渡区",location:{lat:25.01503,lng:102.7437}},{id:"530112",fullname:"西山区",location:{lat:25.03845,lng:102.66481}},{id:"530113",fullname:"东川区",location:{lat:26.08294,lng:103.18773}},{id:"530114",fullname:"呈贡区",location:{lat:24.88554,lng:102.82147}},{id:"530122",fullname:"晋宁县",location:{lat:24.66982,lng:102.59559}},{id:"530124",fullname:"富民县",location:{lat:25.22199,lng:102.49767}},{id:"530125",fullname:"宜良县",location:{lat:24.92005,lng:103.14119}},{id:"530126",fullname:"石林彝族自治县",location:{lat:24.77082,lng:103.2889}},{id:"530127",fullname:"嵩明县",location:{lat:25.33872,lng:103.03687}},{id:"530128",fullname:"禄劝彝族苗族自治县",location:{lat:25.55128,lng:102.47145}},{id:"530129",fullname:"寻甸回族彝族自治县",location:{lat:25.55818,lng:103.25668}},{id:"530181",fullname:"安宁市",location:{lat:24.91954,lng:102.478}},{id:"530302",fullname:"麒麟区",location:{lat:25.49513,lng:103.80481}},{id:"530321",fullname:"马龙县",location:{lat:25.42807,lng:103.57834}},{id:"530322",fullname:"陆良县",location:{lat:25.02941,lng:103.66683}},{id:"530323",fullname:"师宗县",location:{lat:24.82851,lng:103.9899}},{id:"530324",fullname:"罗平县",location:{lat:24.88468,lng:104.3087}},{id:"530325",fullname:"富源县",location:{lat:25.67422,lng:104.25485}},{id:"530326",fullname:"会泽县",location:{lat:26.41791,lng:103.29737}},{id:"530328",fullname:"沾益县",location:{lat:25.60009,lng:103.82226}},{id:"530381",fullname:"宣威市",location:{lat:26.21989,lng:104.10448}},{id:"530402",fullname:"红塔区",location:{lat:24.35423,lng:102.54522}},{id:"530421",fullname:"江川县",location:{lat:24.28744,lng:102.75376}},{id:"530422",fullname:"澄江县",location:{lat:24.67379,lng:102.90819}},{id:"530423",fullname:"通海县",location:{lat:24.11367,lng:102.76647}},{id:"530424",fullname:"华宁县",location:{lat:24.19275,lng:102.92883}},{id:"530425",fullname:"易门县",location:{lat:24.67108,lng:102.16273}},{id:"530426",fullname:"峨山彝族自治县",location:{lat:24.16908,lng:102.40579}},{id:"530427",fullname:"新平彝族傣族自治县",location:{lat:24.07,lng:101.99014}},{id:"530428",fullname:"元江",location:{lat:23.59667,lng:101.99809}},{id:"530502",fullname:"隆阳区",location:{lat:25.12107,lng:99.16579}},{id:"530521",fullname:"施甸县",location:{lat:24.72308,lng:99.18902}},{id:"530522",fullname:"腾冲县",location:{lat:25.02053,lng:98.49097}},{id:"530523",fullname:"龙陵县",location:{lat:24.58682,lng:98.68927}},{id:"530524",fullname:"昌宁县",location:{lat:24.82745,lng:99.60567}},{id:"530602",fullname:"昭阳区",location:{lat:27.32027,lng:103.70594}},{id:"530621",fullname:"鲁甸县",location:{lat:27.18664,lng:103.55792}},{id:"530622",fullname:"巧家县",location:{lat:26.90861,lng:102.93006}},{id:"530623",fullname:"盐津县",location:{lat:28.10859,lng:104.23467}},{id:"530624",fullname:"大关县",location:{lat:27.74806,lng:103.89111}},{id:"530625",fullname:"永善县",location:{lat:28.22909,lng:103.63817}},{id:"530626",fullname:"绥江县",location:{lat:28.5984,lng:103.95841}},{id:"530627",fullname:"镇雄县",location:{lat:27.4415,lng:104.8736}},{id:"530628",fullname:"彝良县",location:{lat:27.62551,lng:104.04805}},{id:"530629",fullname:"威信县",location:{lat:27.84685,lng:105.04906}},{id:"530630",fullname:"水富县",location:{lat:28.63002,lng:104.41562}},{id:"530702",fullname:"古城区",location:{lat:26.87721,lng:100.22549}},{id:"530721",fullname:"玉龙纳西族自治县",location:{lat:26.82152,lng:100.23695}},{id:"530722",fullname:"永胜县",location:{lat:26.68431,lng:100.75086}},{id:"530723",fullname:"华坪县",location:{lat:26.62921,lng:101.2663}},{id:"530724",fullname:"宁蒗彝族自治县",location:{lat:27.28196,lng:100.85198}},{id:"530802",fullname:"思茅区",location:{lat:22.78684,lng:100.97692}},{id:"530821",fullname:"宁洱哈尼族彝族自治县",location:{lat:23.06167,lng:101.04539}},{id:"530822",fullname:"墨江哈尼族自治县",location:{lat:23.43185,lng:101.69223}},{id:"530823",fullname:"景东彝族自治县",location:{lat:24.44697,lng:100.8339}},{id:"530824",fullname:"景谷傣族彝族自治县",location:{lat:23.49704,lng:100.7029}},{id:"530825",fullname:"镇沅",location:{lat:24.00461,lng:101.10843}},{id:"530826",fullname:"江城哈尼族彝族自治县",location:{lat:22.58518,lng:101.86237}},{id:"530827",fullname:"孟连",location:{lat:22.32911,lng:99.58441}},{id:"530828",fullname:"澜沧拉祜族自治县",location:{lat:22.55577,lng:99.93208}},{id:"530829",fullname:"西盟佤族自治县",location:{lat:22.64435,lng:99.59018}},{id:"530902",fullname:"临翔区",location:{lat:23.89516,lng:100.08233}},{id:"530921",fullname:"凤庆县",location:{lat:24.58038,lng:99.92841}},{id:"530922",fullname:"云县",location:{lat:24.4446,lng:100.13111}},{id:"530923",fullname:"永德县",location:{lat:24.01828,lng:99.25929}},{id:"530924",fullname:"镇康县",location:{lat:23.7631,lng:98.82543}},{id:"530925",fullname:"双江",location:{lat:23.4736,lng:99.82768}},{id:"530926",fullname:"耿马傣族佤族自治县",location:{lat:23.53786,lng:99.39767}},{id:"530927",fullname:"沧源佤族自治县",location:{lat:23.14681,lng:99.24583}},{id:"532301",fullname:"楚雄市",location:{lat:25.03288,lng:101.54582}},{id:"532322",fullname:"双柏县",location:{lat:24.68884,lng:101.64206}},{id:"532323",fullname:"牟定县",location:{lat:25.31241,lng:101.54697}},{id:"532324",fullname:"南华县",location:{lat:25.19229,lng:101.27354}},{id:"532325",fullname:"姚安县",location:{lat:25.50423,lng:101.24158}},{id:"532326",fullname:"大姚县",location:{lat:25.72179,lng:101.3244}},{id:"532327",fullname:"永仁县",location:{lat:26.05615,lng:101.66982}},{id:"532328",fullname:"元谋县",location:{lat:25.70436,lng:101.87449}},{id:"532329",fullname:"武定县",location:{lat:25.53038,lng:102.40442}},{id:"532331",fullname:"禄丰县",location:{lat:25.14998,lng:102.079}},{id:"532501",fullname:"个旧市",location:{lat:23.35899,lng:103.16004}},{id:"532502",fullname:"开远市",location:{lat:23.71434,lng:103.26676}},{id:"532503",fullname:"蒙自市",location:{lat:23.39622,lng:103.36481}},{id:"532504",fullname:"弥勒市",location:{lat:24.41051,lng:103.41465}},{id:"532523",fullname:"屏边苗族自治县",location:{lat:22.98372,lng:103.68721}},{id:"532524",fullname:"建水县",location:{lat:23.63499,lng:102.82699}},{id:"532525",fullname:"石屏县",location:{lat:23.70556,lng:102.49621}},{id:"532527",fullname:"泸西县",location:{lat:24.5321,lng:103.76623}},{id:"532528",fullname:"元阳县",location:{lat:23.21999,lng:102.83528}},{id:"532529",fullname:"红河县",location:{lat:23.36907,lng:102.42079}},{id:"532530",fullname:"金平苗族瑶族傣族自治县",location:{lat:22.77966,lng:103.22648}},{id:"532531",fullname:"绿春县",location:{lat:22.99346,lng:102.39293}},{id:"532532",fullname:"河口瑶族自治县",location:{lat:22.52931,lng:103.93936}},{id:"532621",fullname:"文山市",location:{lat:23.38678,lng:104.233}},{id:"532622",fullname:"砚山县",location:{lat:23.60586,lng:104.33709}},{id:"532623",fullname:"西畴县",location:{lat:23.43712,lng:104.6722}},{id:"532624",fullname:"麻栗坡县",location:{lat:23.12525,lng:104.70252}},{id:"532625",fullname:"马关县",location:{lat:23.01298,lng:104.39387}},{id:"532626",fullname:"丘北县",location:{lat:24.04186,lng:104.19581}},{id:"532627",fullname:"广南县",location:{lat:24.04645,lng:105.05516}},{id:"532628",fullname:"富宁县",location:{lat:23.62539,lng:105.63053}},{id:"532801",fullname:"景洪市",location:{lat:22.00008,lng:100.77163}},{id:"532822",fullname:"勐海县",location:{lat:21.95753,lng:100.45223}},{id:"532823",fullname:"勐腊县",location:{lat:21.45941,lng:101.56461}},{id:"532901",fullname:"大理市",location:{lat:25.59158,lng:100.22976}},{id:"532922",fullname:"漾濞彝族自治县",location:{lat:25.66992,lng:99.95814}},{id:"532923",fullname:"祥云县",location:{lat:25.48381,lng:100.55059}},{id:"532924",fullname:"宾川县",location:{lat:25.827,lng:100.57265}},{id:"532925",fullname:"弥渡县",location:{lat:25.34365,lng:100.49131}},{id:"532926",fullname:"南涧彝族自治县",location:{lat:25.04282,lng:100.50974}},{id:"532927",fullname:"巍山彝族回族自治县",location:{lat:25.22714,lng:100.30711}},{id:"532928",fullname:"永平县",location:{lat:25.46454,lng:99.54098}},{id:"532929",fullname:"云龙县",location:{lat:25.88573,lng:99.37096}},{id:"532930",fullname:"洱源县",location:{lat:26.11113,lng:99.95088}},{id:"532931",fullname:"剑川县",location:{lat:26.53692,lng:99.9055}},{id:"532932",fullname:"鹤庆县",location:{lat:26.56013,lng:100.17644}},{id:"533102",fullname:"瑞丽市",location:{lat:24.01278,lng:97.85189}},{id:"533103",fullname:"芒市",location:{lat:24.43379,lng:98.58815}},{id:"533122",fullname:"梁河县",location:{lat:24.80435,lng:98.2967}},{id:"533123",fullname:"盈江县",location:{lat:24.70519,lng:97.93184}},{id:"533124",fullname:"陇川县",location:{lat:24.18305,lng:97.79203}},{id:"533321",fullname:"泸水县",location:{lat:25.82306,lng:98.85804}},{id:"533323",fullname:"福贡县",location:{lat:26.90185,lng:98.86905}},{id:"533324",fullname:"贡山独龙族怒族自治县",location:{lat:27.74104,lng:98.66579}},{id:"533325",fullname:"兰坪白族普米族自治县",location:{lat:26.45353,lng:99.41671}},{id:"533421",fullname:"香格里拉县",location:{lat:27.82961,lng:99.70095}},{id:"533422",fullname:"德钦县",location:{lat:28.46357,lng:98.91699}},{id:"533423",fullname:"维西傈僳族自治县",location:{lat:27.17739,lng:99.28705}},{id:"540102",fullname:"城关区",location:{lat:29.65262,lng:91.13775}},{id:"540121",fullname:"林周县",location:{lat:29.89469,lng:91.2619}},{id:"540122",fullname:"当雄县",location:{lat:30.47192,lng:91.1013}},{id:"540123",fullname:"尼木县",location:{lat:29.43184,lng:90.16464}},{id:"540124",fullname:"曲水县",location:{lat:29.353,lng:90.74367}},{id:"540125",fullname:"堆龙德庆县",location:{lat:29.64602,lng:91.00338}},{id:"540126",fullname:"达孜县",location:{lat:29.66933,lng:91.34979}},{id:"540127",fullname:"墨竹工卡县",location:{lat:29.83375,lng:91.73065}},{id:"542121",fullname:"昌都县",location:{lat:31.13831,lng:97.18039}},{id:"542122",fullname:"江达县",location:{lat:31.49968,lng:98.21822}},{id:"542123",fullname:"贡觉县",location:{lat:30.86016,lng:98.2708}},{id:"542124",fullname:"类乌齐县",location:{lat:31.21155,lng:96.6002}},{id:"542125",fullname:"丁青县",location:{lat:31.4125,lng:95.59572}},{id:"542126",fullname:"察雅县",location:{lat:30.65363,lng:97.56877}},{id:"542127",fullname:"八宿县",location:{lat:30.0532,lng:96.91785}},{id:"542128",fullname:"左贡县",location:{lat:29.67107,lng:97.84088}},{id:"542129",fullname:"芒康县",location:{lat:29.68008,lng:98.59312}},{id:"542132",fullname:"洛隆县",location:{lat:30.74181,lng:95.82482}},{id:"542133",fullname:"边坝县",location:{lat:30.93345,lng:94.7079}},{id:"542221",fullname:"乃东县",location:{lat:29.22484,lng:91.76141}},{id:"542222",fullname:"扎囊县",location:{lat:29.245,lng:91.33735}},{id:"542223",fullname:"贡嘎县",location:{lat:29.28947,lng:90.98421}},{id:"542224",fullname:"桑日县",location:{lat:29.25906,lng:92.01579}},{id:"542225",fullname:"琼结县",location:{lat:29.02464,lng:91.68385}},{id:"542226",fullname:"曲松县",location:{lat:29.06277,lng:92.20222}},{id:"542227",fullname:"措美县",location:{lat:28.43793,lng:91.43361}},{id:"542228",fullname:"洛扎县",location:{lat:28.38569,lng:90.85998}},{id:"542229",fullname:"加查县",location:{lat:29.14023,lng:92.59387}},{id:"542231",fullname:"隆子县",location:{lat:28.40681,lng:92.46177}},{id:"542232",fullname:"错那县",location:{lat:27.99099,lng:91.9571}},{id:"542233",fullname:"浪卡子县",location:{lat:28.96818,lng:90.39809}},{id:"542301",fullname:"日喀则市",location:{lat:29.26969,lng:88.88697}},{id:"542322",fullname:"南木林县",location:{lat:29.68224,lng:89.09936}},{id:"542323",fullname:"江孜县",location:{lat:28.91152,lng:89.60558}},{id:"542324",fullname:"定日县",location:{lat:28.65874,lng:87.12607}},{id:"542325",fullname:"萨迦县",location:{lat:28.89919,lng:88.02172}},{id:"542326",fullname:"拉孜县",location:{lat:29.08164,lng:87.63718}},{id:"542327",fullname:"昂仁县",location:{lat:29.29482,lng:87.23617}},{id:"542328",fullname:"谢通门县",location:{lat:29.43234,lng:88.26166}},{id:"542329",fullname:"白朗县",location:{lat:29.10765,lng:89.26182}},{id:"542330",fullname:"仁布县",location:{lat:29.23089,lng:89.842}},{id:"542331",fullname:"康马县",location:{lat:28.55567,lng:89.68169}},{id:"542332",fullname:"定结县",location:{lat:28.36408,lng:87.76606}},{id:"542333",fullname:"仲巴县",location:{lat:29.72419,lng:84.02454}},{id:"542334",fullname:"亚东县",location:{lat:27.48592,lng:88.90708}},{id:"542335",fullname:"吉隆县",location:{lat:28.85254,lng:85.29737}},{id:"542336",fullname:"聂拉木县",location:{lat:28.15499,lng:85.98232}},{id:"542337",fullname:"萨嘎县",location:{lat:29.32943,lng:85.23421}},{id:"542338",fullname:"岗巴县",location:{lat:28.2746,lng:88.52015}},{id:"542421",fullname:"那曲县",location:{lat:31.46988,lng:92.05355}},{id:"542422",fullname:"嘉黎县",location:{lat:30.64087,lng:93.23236}},{id:"542423",fullname:"比如县",location:{lat:31.47785,lng:93.6813}},{id:"542424",fullname:"聂荣县",location:{lat:32.10784,lng:92.30327}},{id:"542425",fullname:"安多县",location:{lat:32.265,lng:91.68258}},{id:"542426",fullname:"申扎县",location:{lat:30.93043,lng:88.70982}},{id:"542427",fullname:"索县",location:{lat:31.88673,lng:93.78556}},{id:"542428",fullname:"班戈县",location:{lat:31.39199,lng:90.00987}},{id:"542429",fullname:"巴青县",location:{lat:31.9184,lng:94.05345}},{id:"542430",fullname:"尼玛县",location:{lat:31.78448,lng:87.23691}},{id:"542521",fullname:"普兰县",location:{lat:30.29326,lng:81.17739}},{id:"542522",fullname:"札达县",location:{lat:31.47865,lng:79.80321}},{id:"542523",fullname:"噶尔县",location:{lat:32.50028,lng:80.0959}},{id:"542524",fullname:"日土县",location:{lat:33.38747,lng:79.71317}},{id:"542525",fullname:"革吉县",location:{lat:32.39645,lng:81.15106}},{id:"542526",fullname:"改则县",location:{lat:32.30455,lng:84.06305}},{id:"542527",fullname:"措勤县",location:{lat:31.0164,lng:85.15253}},{id:"542621",fullname:"林芝县",location:{lat:29.63657,lng:94.36122}},{id:"542622",fullname:"工布江达县",location:{lat:29.88531,lng:93.24611}},{id:"542623",fullname:"米林县",location:{lat:29.21607,lng:94.21315}},{id:"542624",fullname:"墨脱县",location:{lat:29.32521,lng:95.33304}},{id:"542625",fullname:"波密县",location:{lat:29.85903,lng:95.76761}},{id:"542626",fullname:"察隅县",location:{lat:28.66154,lng:97.46687}},{id:"542627",fullname:"朗县",location:{lat:29.04607,lng:93.07482}},{id:"610102",fullname:"新城区",location:{lat:34.26665,lng:108.96074}},{id:"610103",fullname:"碑林区",location:{lat:34.23053,lng:108.93425}},{id:"610104",fullname:"莲湖区",location:{lat:34.26703,lng:108.9402}},{id:"610111",fullname:"灞桥区",location:{lat:34.2727,lng:109.06458}},{id:"610112",fullname:"未央区",location:{lat:34.29318,lng:108.94712}},{id:"610113",fullname:"雁塔区",location:{lat:34.22259,lng:108.94878}},{id:"610114",fullname:"阎良区",location:{lat:34.66225,lng:109.2262}},{id:"610115",fullname:"临潼区",location:{lat:34.3667,lng:109.21421}},{id:"610116",fullname:"长安区",location:{lat:34.15775,lng:108.90688}},{id:"610122",fullname:"蓝田县",location:{lat:34.15132,lng:109.32345}},{id:"610124",fullname:"周至县",location:{lat:34.1634,lng:108.22213}},{id:"610125",fullname:"户县",location:{lat:34.10847,lng:108.60494}},{id:"610126",fullname:"高陵县",location:{lat:34.53487,lng:109.08822}},{id:"610202",fullname:"王益区",location:{lat:35.06914,lng:109.07593}},{id:"610203",fullname:"印台区",location:{lat:35.11473,lng:109.09986}},{id:"610204",fullname:"耀州区",location:{lat:34.90978,lng:108.98011}},{id:"610222",fullname:"宜君县",location:{lat:35.39877,lng:109.11689}},{id:"610302",fullname:"渭滨区",location:{lat:34.3716,lng:107.15028}},{id:"610303",fullname:"金台区",location:{lat:34.39029,lng:107.13126}},{id:"610304",fullname:"陈仓区",location:{lat:34.35454,lng:107.38745}},{id:"610322",fullname:"凤翔县",location:{lat:34.52114,lng:107.40076}},{id:"610323",fullname:"岐山县",location:{lat:34.44346,lng:107.62101}},{id:"610324",fullname:"扶风县",location:{lat:34.37527,lng:107.90022}},{id:"610326",fullname:"眉县",location:{lat:34.2741,lng:107.74992}},{id:"610327",fullname:"陇县",location:{lat:34.89305,lng:106.8643}},{id:"610328",fullname:"千阳县",location:{lat:34.6426,lng:107.13237}},{id:"610329",fullname:"麟游县",location:{lat:34.67793,lng:107.79339}},{id:"610330",fullname:"凤县",location:{lat:33.91227,lng:106.52203}},{id:"610331",fullname:"太白县",location:{lat:34.05825,lng:107.3191}},{id:"610402",fullname:"秦都区",location:{lat:34.32908,lng:108.70641}},{id:"610403",fullname:"杨陵区",location:{lat:34.27221,lng:108.08455}},{id:"610404",fullname:"渭城区",location:{lat:34.36191,lng:108.73726}},{id:"610422",fullname:"三原县",location:{lat:34.61704,lng:108.9404}},{id:"610423",fullname:"泾阳县",location:{lat:34.52709,lng:108.84262}},{id:"610424",fullname:"乾县",location:{lat:34.52761,lng:108.2394}},{id:"610425",fullname:"礼泉县",location:{lat:34.48165,lng:108.42496}},{id:"610426",fullname:"永寿县",location:{lat:34.48285,lng:108.01349}},{id:"610427",fullname:"彬县",location:{lat:35.03565,lng:108.08108}},{id:"610428",fullname:"长武县",location:{lat:35.20571,lng:107.79866}},{id:"610429",fullname:"旬邑县",location:{lat:35.11184,lng:108.33371}},{id:"610430",fullname:"淳化县",location:{lat:34.79873,lng:108.58059}},{id:"610431",fullname:"武功县",location:{lat:34.26036,lng:108.20018}},{id:"610481",fullname:"兴平市",location:{lat:34.29932,lng:108.4904}},{id:"610502",fullname:"临渭区",location:{lat:34.49823,lng:109.49217}},{id:"610521",fullname:"华县",location:{lat:34.51259,lng:109.7719}},{id:"610522",fullname:"潼关县",location:{lat:34.54438,lng:110.24656}},{id:"610523",fullname:"大荔县",location:{lat:34.79566,lng:109.94217}},{id:"610524",fullname:"合阳县",location:{lat:35.23752,lng:110.14928}},{id:"610525",fullname:"澄城县",location:{lat:35.19024,lng:109.93226}},{id:"610526",fullname:"蒲城县",location:{lat:34.95517,lng:109.58646}},{id:"610527",fullname:"白水县",location:{lat:35.1771,lng:109.59102}},{id:"610528",fullname:"富平县",location:{lat:34.75114,lng:109.18025}},{id:"610581",fullname:"韩城市",location:{lat:35.47669,lng:110.44243}},{id:"610582",fullname:"华阴市",location:{lat:34.56602,lng:110.09207}},{id:"610602",fullname:"宝塔区",location:{lat:36.59141,lng:109.49303}},{id:"610621",fullname:"延长县",location:{lat:36.5793,lng:110.01242}},{id:"610622",fullname:"延川县",location:{lat:36.87813,lng:110.19375}},{id:"610623",fullname:"子长县",location:{lat:37.14258,lng:109.67538}},{id:"610624",fullname:"安塞县",location:{lat:36.86373,lng:109.32897}},{id:"610625",fullname:"志丹县",location:{lat:36.82235,lng:108.76845}},{id:"610626",fullname:"吴起县",location:{lat:36.92728,lng:108.17587}},{id:"610627",fullname:"甘泉县",location:{lat:36.27673,lng:109.3513}},{id:"610628",fullname:"富县",location:{lat:35.98779,lng:109.37976}},{id:"610629",fullname:"洛川县",location:{lat:35.7619,lng:109.43238}},{id:"610630",fullname:"宜川县",location:{lat:36.05026,lng:110.16899}},{id:"610631",fullname:"黄龙县",location:{lat:35.58432,lng:109.84018}},{id:"610632",fullname:"黄陵县",location:{lat:35.57937,lng:109.26291}},{id:"610702",fullname:"汉台区",location:{lat:33.06784,lng:107.03194}},{id:"610721",fullname:"南郑县",location:{lat:32.99932,lng:106.93624}},{id:"610722",fullname:"城固县",location:{lat:33.15665,lng:107.33372}},{id:"610723",fullname:"洋县",location:{lat:33.22275,lng:107.54565}},{id:"610724",fullname:"西乡县",location:{lat:32.98306,lng:107.76669}},{id:"610725",fullname:"勉县",location:{lat:33.15362,lng:106.67314}},{id:"610726",fullname:"宁强县",location:{lat:32.82962,lng:106.2572}},{id:"610727",fullname:"略阳县",location:{lat:33.32733,lng:106.1566}},{id:"610728",fullname:"镇巴县",location:{lat:32.53666,lng:107.89502}},{id:"610729",fullname:"留坝县",location:{lat:33.61758,lng:106.92076}},{id:"610730",fullname:"佛坪县",location:{lat:33.52449,lng:107.9905}},{id:"610802",fullname:"榆阳区",location:{lat:38.27658,lng:109.72126}},{id:"610821",fullname:"神木县",location:{lat:38.84239,lng:110.49896}},{id:"610822",fullname:"府谷县",location:{lat:39.02806,lng:111.06764}},{id:"610823",fullname:"横山县",location:{lat:37.95871,lng:109.29315}},{id:"610824",fullname:"靖边县",location:{lat:37.59931,lng:108.79568}},{id:"610825",fullname:"定边县",location:{lat:37.59454,lng:107.60128}},{id:"610826",fullname:"绥德县",location:{lat:37.50278,lng:110.26317}},{id:"610827",fullname:"米脂县",location:{lat:37.75484,lng:110.18394}},{id:"610828",fullname:"佳县",location:{lat:38.01959,lng:110.49136}},{id:"610829",fullname:"吴堡县",location:{lat:37.45224,lng:110.73967}},{id:"610830",fullname:"清涧县",location:{lat:37.0889,lng:110.12114}},{id:"610831",fullname:"子洲县",location:{lat:37.61075,lng:110.03526}},{id:"610902",fullname:"汉滨区",location:{lat:32.6955,lng:109.02697}},{id:"610921",fullname:"汉阴县",location:{lat:32.89314,lng:108.50866}},{id:"610922",fullname:"石泉县",location:{lat:33.03829,lng:108.24843}},{id:"610923",fullname:"宁陕县",location:{lat:33.31049,lng:108.31428}},{id:"610924",fullname:"紫阳县",location:{lat:32.52025,lng:108.53419}},{id:"610925",fullname:"岚皋县",location:{lat:32.30715,lng:108.90222}},{id:"610926",fullname:"平利县",location:{lat:32.38903,lng:109.3618}},{id:"610927",fullname:"镇坪县",location:{lat:31.88376,lng:109.52677}},{id:"610928",fullname:"旬阳县",location:{lat:32.83417,lng:109.3652}},{id:"610929",fullname:"白河县",location:{lat:32.80906,lng:110.11261}},{id:"611002",fullname:"商州区",location:{lat:33.86273,lng:109.94107}},{id:"611021",fullname:"洛南县",location:{lat:34.09081,lng:110.14833}},{id:"611022",fullname:"丹凤县",location:{lat:33.69585,lng:110.32721}},{id:"611023",fullname:"商南县",location:{lat:33.53112,lng:110.88158}},{id:"611024",fullname:"山阳县",location:{lat:33.53218,lng:109.88193}},{id:"611025",fullname:"镇安县",location:{lat:33.42337,lng:109.15258}},{id:"611026",fullname:"柞水县",location:{lat:33.68607,lng:109.1142}},{id:"620102",fullname:"城关区",location:{lat:36.05709,lng:103.82538}},{id:"620103",fullname:"七里河区",location:{lat:36.06592,lng:103.78576}},{id:"620104",fullname:"西固区",location:{lat:36.08842,lng:103.6281}},{id:"620105",fullname:"安宁区",location:{lat:36.10396,lng:103.71878}},{id:"620111",fullname:"红古区",location:{lat:36.34578,lng:102.85936}},{id:"620121",fullname:"永登县",location:{lat:36.3021,lng:103.05664}},{id:"620122",fullname:"皋兰县",location:{lat:36.33216,lng:103.94751}},{id:"620123",fullname:"榆中县",location:{lat:35.84327,lng:104.11261}},{id:"620201",fullname:"嘉峪关市",location:{lat:39.77201,lng:98.29011}},{id:"620302",fullname:"金川区",location:{lat:38.52014,lng:102.19409}},{id:"620321",fullname:"永昌县",location:{lat:38.24704,lng:101.973}},{id:"620402",fullname:"白银区",location:{lat:36.53454,lng:104.1724}},{id:"620403",fullname:"平川区",location:{lat:36.72774,lng:104.82503}},{id:"620421",fullname:"靖远县",location:{lat:37.0354,lng:105}},{id:"620422",fullname:"会宁县",location:{lat:35.69291,lng:105.05334}},{id:"620423",fullname:"景泰县",location:{lat:37.18137,lng:104.06312}},{id:"620502",fullname:"秦州区",location:{lat:34.58088,lng:105.72417}},{id:"620503",fullname:"麦积区",location:{lat:34.57024,lng:105.88965}},{id:"620521",fullname:"清水县",location:{lat:34.74981,lng:106.13737}},{id:"620522",fullname:"秦安县",location:{lat:34.85918,lng:105.67566}},{id:"620523",fullname:"甘谷县",location:{lat:34.732,lng:105.33564}},{id:"620524",fullname:"武山县",location:{lat:34.72134,lng:104.89089}},{id:"620525",fullname:"张家川回族自治县",location:{lat:34.98843,lng:106.20577}},{id:"620602",fullname:"凉州区",location:{lat:37.92818,lng:102.64198}},{id:"620621",fullname:"民勤县",location:{lat:38.62434,lng:103.09366}},{id:"620622",fullname:"古浪县",location:{lat:37.47013,lng:102.89765}},{id:"620623",fullname:"天祝藏族自治县",location:{lat:36.97184,lng:103.14178}},{id:"620702",fullname:"甘州区",location:{lat:38.92967,lng:100.47801}},{id:"620721",fullname:"肃南裕固族自治县",location:{lat:38.24878,lng:100.70132}},{id:"620722",fullname:"民乐县",location:{lat:38.43064,lng:100.81317}},{id:"620723",fullname:"临泽县",location:{lat:39.15257,lng:100.16449}},{id:"620724",fullname:"高台县",location:{lat:39.37772,lng:99.81943}},{id:"620725",fullname:"山丹县",location:{lat:38.78449,lng:101.08861}},{id:"620802",fullname:"崆峒区",location:{lat:35.54258,lng:106.67477}},{id:"620821",fullname:"泾川县",location:{lat:35.33262,lng:107.36775}},{id:"620822",fullname:"灵台县",location:{lat:35.06541,lng:107.62126}},{id:"620823",fullname:"崇信县",location:{lat:35.30229,lng:107.03536}},{id:"620824",fullname:"华亭县",location:{lat:35.21756,lng:106.65352}},{id:"620825",fullname:"庄浪县",location:{lat:35.20239,lng:106.03666}},{id:"620826",fullname:"静宁县",location:{lat:35.52223,lng:105.73245}},{id:"620902",fullname:"肃州区",location:{lat:39.74502,lng:98.50801}},{id:"620921",fullname:"金塔县",location:{lat:39.98593,lng:98.90271}},{id:"620922",fullname:"瓜州县",location:{lat:40.52023,lng:95.78238}},{id:"620923",fullname:"肃北蒙古族自治县",location:{lat:41.83333,lng:95.70823}},{id:"620924",fullname:"阿克塞哈萨克族自治县",location:{lat:39.63372,lng:94.34023}},{id:"620981",fullname:"玉门市",location:{lat:40.29176,lng:97.04542}},{id:"620982",fullname:"敦煌市",location:{lat:40.14219,lng:94.66197}},{id:"621002",fullname:"西峰区",location:{lat:35.73062,lng:107.65114}},{id:"621021",fullname:"庆城县",location:{lat:36.01526,lng:107.88248}},{id:"621022",fullname:"环县",location:{lat:36.5685,lng:107.30839}},{id:"621023",fullname:"华池县",location:{lat:36.4613,lng:107.99016}},{id:"621024",fullname:"合水县",location:{lat:35.81927,lng:108.01953}},{id:"621025",fullname:"正宁县",location:{lat:35.4917,lng:108.3601}},{id:"621026",fullname:"宁县",location:{lat:35.50223,lng:107.92824}},{id:"621027",fullname:"镇原县",location:{lat:35.67728,lng:107.2006}},{id:"621102",fullname:"安定区",location:{lat:35.57934,lng:104.61093}},{id:"621121",fullname:"通渭县",location:{lat:35.21087,lng:105.24219}},{id:"621122",fullname:"陇西县",location:{lat:35.00391,lng:104.6348}},{id:"621123",fullname:"渭源县",location:{lat:35.13626,lng:104.21502}},{id:"621124",fullname:"临洮县",location:{lat:35.39509,lng:103.85954}},{id:"621125",fullname:"漳县",location:{lat:34.84853,lng:104.4717}},{id:"621126",fullname:"岷县",location:{lat:34.43811,lng:104.03697}},{id:"621202",fullname:"武都区",location:{lat:33.39189,lng:104.92667}},{id:"621221",fullname:"成县",location:{lat:33.75062,lng:105.74222}},{id:"621222",fullname:"文县",location:{lat:32.94396,lng:104.68343}},{id:"621223",fullname:"宕昌县",location:{lat:34.04735,lng:104.39354}},{id:"621224",fullname:"康县",location:{lat:33.32937,lng:105.60855}},{id:"621225",fullname:"西和县",location:{lat:34.01085,lng:105.30143}},{id:"621226",fullname:"礼县",location:{lat:34.18907,lng:105.17844}},{id:"621227",fullname:"徽县",location:{lat:33.76884,lng:106.08785}},{id:"621228",fullname:"两当县",location:{lat:33.909,lng:106.30494}},{id:"622901",fullname:"临夏市",location:{lat:35.6045,lng:103.24317}},{id:"622921",fullname:"临夏县",location:{lat:35.49157,lng:102.99563}},{id:"622922",fullname:"康乐县",location:{lat:35.36986,lng:103.70889}},{id:"622923",fullname:"永靖县",location:{lat:35.94173,lng:103.31587}},{id:"622924",fullname:"广河县",location:{lat:35.481,lng:103.56935}},{id:"622925",fullname:"和政县",location:{lat:35.42535,lng:103.35143}},{id:"622926",fullname:"东乡族自治县",location:{lat:35.66376,lng:103.38933}},{id:"622927",fullname:"积石山县",location:{lat:35.71768,lng:102.87581}},{id:"623001",fullname:"合作市",location:{lat:35.00019,lng:102.91088}},{id:"623021",fullname:"临潭县",location:{lat:34.69275,lng:103.35362}},{id:"623022",fullname:"卓尼县",location:{lat:34.27015,lng:102.84581}},{id:"623023",fullname:"舟曲县",location:{lat:33.78491,lng:104.37155}},{id:"623024",fullname:"迭部县",location:{lat:34.05587,lng:103.22175}},{id:"623025",fullname:"玛曲县",location:{lat:33.9977,lng:102.07226}},{id:"623026",fullname:"碌曲县",location:{lat:34.59103,lng:102.48699}},{id:"623027",fullname:"夏河县",location:{lat:35.20233,lng:102.52158}},{id:"630102",fullname:"城东区",location:{lat:36.59976,lng:101.80319}},{id:"630103",fullname:"城中区",location:{lat:36.5866,lng:101.77013}},{id:"630104",fullname:"城西区",location:{lat:36.6283,lng:101.76585}},{id:"630105",fullname:"城北区",location:{lat:36.6502,lng:101.76628}},{id:"630121",fullname:"大通回族土族自治县",location:{lat:36.92694,lng:101.68545}},{id:"630122",fullname:"湟中县",location:{lat:36.50087,lng:101.57164}},{id:"630123",fullname:"湟源县",location:{lat:36.68246,lng:101.25648}},{id:"630202",fullname:"乐都区",location:{lat:36.48209,lng:102.40173}},{id:"630221",fullname:"平安县",location:{lat:36.50029,lng:102.10848}},{id:"630222",fullname:"民和回族土族自治县",location:{lat:36.32026,lng:102.83087}},{id:"630223",fullname:"互助土族自治县",location:{lat:36.84406,lng:101.95841}},{id:"630224",fullname:"化隆回族自治县",location:{lat:36.09493,lng:102.26404}},{id:"630225",fullname:"循化撒拉族自治县",location:{lat:35.8508,lng:102.4891}},{id:"632221",fullname:"门源回族自治县",location:{lat:37.37615,lng:101.62232}},{id:"632222",fullname:"祁连县",location:{lat:38.17709,lng:100.25305}},{id:"632223",fullname:"海晏县",location:{lat:36.897,lng:100.99504}},{id:"632224",fullname:"刚察县",location:{lat:37.32162,lng:100.14682}},{id:"632321",fullname:"同仁县",location:{lat:35.5163,lng:102.01954}},{id:"632322",fullname:"尖扎县",location:{lat:35.93817,lng:102.03102}},{id:"632323",fullname:"泽库县",location:{lat:35.03605,lng:101.46594}},{id:"632324",fullname:"河南蒙古族自治县",location:{lat:34.73423,lng:101.61647}},{id:"632521",fullname:"共和县",location:{lat:36.283,lng:100.62012}},{id:"632522",fullname:"同德县",location:{lat:35.25386,lng:100.57876}},{id:"632523",fullname:"贵德县",location:{lat:36.04004,lng:101.4336}},{id:"632524",fullname:"兴海县",location:{lat:35.58868,lng:99.98818}},{id:"632525",fullname:"贵南县",location:{lat:35.58688,lng:100.7475}},{id:"632621",fullname:"玛沁县",location:{lat:34.47733,lng:100.23956}},{id:"632622",fullname:"班玛县",location:{lat:32.93269,lng:100.7374}},{id:"632623",fullname:"甘德县",location:{lat:33.96921,lng:99.90075}},{id:"632624",fullname:"达日县",location:{lat:33.74924,lng:99.65153}},{id:"632625",fullname:"久治县",location:{lat:33.42928,lng:101.48289}},{id:"632626",fullname:"玛多县",location:{lat:34.91508,lng:98.20934}},{id:"632721",fullname:"玉树市",location:{lat:32.99336,lng:97.00862}},{id:"632722",fullname:"杂多县",location:{lat:32.89295,lng:95.30102}},{id:"632723",fullname:"称多县",location:{lat:33.36823,lng:97.10865}},{id:"632724",fullname:"治多县",location:{lat:33.85203,lng:95.61335}},{id:"632725",fullname:"囊谦县",location:{lat:32.20295,lng:96.48063}},{id:"632726",fullname:"曲麻莱县",location:{lat:34.12639,lng:95.79722}},{id:"632801",fullname:"格尔木市",location:{lat:33.66033,lng:90}},{id:"632802",fullname:"德令哈市",location:{lat:37.36947,lng:97.36087}},{id:"632821",fullname:"乌兰县",location:{lat:36.92976,lng:98.48003}},{id:"632822",fullname:"都兰县",location:{lat:36.30386,lng:98.09531}},{id:"632823",fullname:"天峻县",location:{lat:37.30096,lng:99.02293}},{id:"632824",fullname:"冷湖行政委员会",location:{lat:38.73523,lng:93.33135}},{id:"632825",fullname:"大柴旦行政委员会",location:{lat:37.85044,lng:95.3621}},{id:"632826",fullname:"茫崖行政委员会",location:{lat:38.25217,lng:90.85742}},{id:"640104",fullname:"兴庆区",location:{lat:38.47371,lng:106.28847}},{id:"640105",fullname:"西夏区",location:{lat:38.49589,lng:106.15652}},{id:"640106",fullname:"金凤区",location:{lat:38.47314,lng:106.24284}},{id:"640121",fullname:"永宁县",location:{lat:38.27749,lng:106.25318}},{id:"640122",fullname:"贺兰县",location:{lat:38.55443,lng:106.34985}},{id:"640181",fullname:"灵武市",location:{lat:38.10269,lng:106.34005}},{id:"640202",fullname:"大武口区",location:{lat:39.01895,lng:106.36803}},{id:"640205",fullname:"惠农区",location:{lat:39.23909,lng:106.78132}},{id:"640221",fullname:"平罗县",location:{lat:38.9135,lng:106.52306}},{id:"640302",fullname:"利通区",location:{lat:37.98472,lng:106.21251}},{id:"640303",fullname:"红寺堡区",location:{lat:37.42533,lng:106.06243}},{id:"640323",fullname:"盐池县",location:{lat:37.78294,lng:107.40789}},{id:"640324",fullname:"同心县",location:{lat:36.98064,lng:105.91448}},{id:"640381",fullname:"青铜峡市",location:{lat:38.02121,lng:106.07875}},{id:"640402",fullname:"原州区",location:{lat:36.00341,lng:106.28779}},{id:"640422",fullname:"西吉县",location:{lat:35.96385,lng:105.72911}},{id:"640423",fullname:"隆德县",location:{lat:35.41667,lng:106.08383}},{id:"640424",fullname:"泾源县",location:{lat:35.49823,lng:106.33067}},{id:"640425",fullname:"彭阳县",location:{lat:35.8496,lng:106.63808}},{id:"640502",fullname:"沙坡头区",location:{lat:37.51608,lng:105.19009}},{id:"640521",fullname:"中宁县",location:{lat:37.49157,lng:105.68518}},{id:"640522",fullname:"海原县",location:{lat:36.56524,lng:105.64359}},{id:"650102",fullname:"天山区",location:{lat:43.79547,lng:87.63356}},{id:"650103",fullname:"沙依巴克区",location:{lat:43.80095,lng:87.59811}},{id:"650104",fullname:"新市区",location:{lat:43.84367,lng:87.574}},{id:"650105",fullname:"水磨沟区",location:{lat:43.83244,lng:87.64248}},{id:"650106",fullname:"头屯河区",location:{lat:43.87711,lng:87.42812}},{id:"650107",fullname:"达坂城区",location:{lat:42.91704,lng:87.52683}},{id:"650109",fullname:"米东区",location:{lat:43.97374,lng:87.65614}},{id:"650121",fullname:"乌鲁木齐县",location:{lat:43.47129,lng:87.40931}},{id:"650202",fullname:"独山子区",location:{lat:44.3287,lng:84.88675}},{id:"650203",fullname:"克拉玛依区",location:{lat:45.60243,lng:84.86782}},{id:"650204",fullname:"白碱滩区",location:{lat:45.68734,lng:85.13208}},{id:"650205",fullname:"乌尔禾区",location:{lat:46.08908,lng:85.69377}},{id:"652101",fullname:"吐鲁番市",location:{lat:42.94244,lng:89.18596}},{id:"652122",fullname:"鄯善县",location:{lat:42.86887,lng:90.21341}},{id:"652123",fullname:"托克逊县",location:{lat:42.79181,lng:88.65384}},{id:"652201",fullname:"哈密市",location:{lat:42.82699,lng:93.51465}},{id:"652222",fullname:"巴里坤哈萨克自治县",location:{lat:43.59848,lng:93.01581}},{id:"652223",fullname:"伊吾县",location:{lat:43.25447,lng:94.69742}},{id:"652301",fullname:"昌吉市",location:{lat:44.01437,lng:87.26749}},{id:"652302",fullname:"阜康市",location:{lat:44.15706,lng:87.98738}},{id:"652323",fullname:"呼图壁县",location:{lat:44.1916,lng:86.89887}},{id:"652324",fullname:"玛纳斯县",location:{lat:44.30413,lng:86.21421}},{id:"652325",fullname:"奇台县",location:{lat:44.02197,lng:89.59399}},{id:"652327",fullname:"吉木萨尔县",location:{lat:44.00061,lng:89.18076}},{id:"652328",fullname:"木垒哈萨克自治县",location:{lat:43.83464,lng:90.28598}},{id:"652701",fullname:"博乐市",location:{lat:44.85387,lng:82.05112}},{id:"652722",fullname:"精河县",location:{lat:44.60055,lng:82.89417}},{id:"652723",fullname:"温泉县",location:{lat:44.96882,lng:81.02478}},{id:"652801",fullname:"库尔勒市",location:{lat:41.72643,lng:86.17369}},{id:"652822",fullname:"轮台县",location:{lat:41.77763,lng:84.25191}},{id:"652823",fullname:"尉犁县",location:{lat:41.34392,lng:86.26075}},{id:"652824",fullname:"若羌县",location:{lat:39.02374,lng:88.16728}},{id:"652825",fullname:"且末县",location:{lat:38.14538,lng:85.52977}},{id:"652826",fullname:"焉耆回族自治县",location:{lat:42.0591,lng:86.57425}},{id:"652827",fullname:"和静县",location:{lat:42.32266,lng:86.38307}},{id:"652828",fullname:"和硕县",location:{lat:42.26817,lng:86.86397}},{id:"652829",fullname:"博湖县",location:{lat:41.98009,lng:86.63254}},{id:"652901",fullname:"阿克苏市",location:{lat:39.48328,lng:81.08432}},{id:"652922",fullname:"温宿县",location:{lat:41.27706,lng:80.23914}},{id:"652923",fullname:"库车县",location:{lat:41.71741,lng:82.96212}},{id:"652924",fullname:"沙雅县",location:{lat:41.2216,lng:82.78209}},{id:"652925",fullname:"新和县",location:{lat:41.54833,lng:82.60912}},{id:"652926",fullname:"拜城县",location:{lat:41.79685,lng:81.87347}},{id:"652927",fullname:"乌什县",location:{lat:41.21472,lng:79.22457}},{id:"652928",fullname:"阿瓦提县",location:{lat:40.64451,lng:80.37306}},{id:"652929",fullname:"柯坪县",location:{lat:40.50826,lng:79.04681}},{id:"653001",fullname:"阿图什市",location:{lat:39.7161,lng:76.16839}},{id:"653022",fullname:"阿克陶县",location:{lat:39.14786,lng:75.9474}},{id:"653023",fullname:"阿合奇县",location:{lat:40.93704,lng:78.44626}},{id:"653024",fullname:"乌恰县",location:{lat:39.71909,lng:75.25841}},{id:"653101",fullname:"喀什市",location:{lat:39.46772,lng:75.99381}},{id:"653121",fullname:"疏附县",location:{lat:38.95409,lng:75.66298}},{id:"653122",fullname:"疏勒县",location:{lat:39.40134,lng:76.04797}},{id:"653123",fullname:"英吉沙县",location:{lat:38.92956,lng:76.17561}},{id:"653124",fullname:"泽普县",location:{lat:38.19174,lng:77.27095}},{id:"653125",fullname:"莎车县",location:{lat:38.41432,lng:77.24629}},{id:"653126",fullname:"叶城县",location:{lat:37.88299,lng:77.41367}},{id:"653127",fullname:"麦盖提县",location:{lat:38.90493,lng:77.65273}},{id:"653128",fullname:"岳普湖县",location:{lat:39.2333,lng:76.77796}},{id:"653129",fullname:"伽师县",location:{lat:39.48806,lng:76.72379}},{id:"653130",fullname:"巴楚县",location:{lat:39.78519,lng:78.54906}},{id:"653131",fullname:"塔什库尔干塔吉克自治县",location:{lat:37.77297,lng:75.2247}},{id:"653201",fullname:"和田市",location:{lat:37.11178,lng:79.91321}},{id:"653221",fullname:"和田县",location:{lat:36.57246,lng:79.90141}},{id:"653222",fullname:"墨玉县",location:{lat:37.2775,lng:79.72917}},{id:"653223",fullname:"皮山县",location:{lat:37.62139,lng:78.283}},{id:"653224",fullname:"洛浦县",location:{lat:37.0737,lng:80.18889}},{id:"653225",fullname:"策勒县",location:{lat:36.99846,lng:80.81005}},{id:"653226",fullname:"于田县",location:{lat:36.85728,lng:81.67712}},{id:"653227",fullname:"民丰县",location:{lat:37.06419,lng:82.69595}},{id:"654002",fullname:"伊宁市",location:{lat:43.9095,lng:81.27725}},{id:"654003",fullname:"奎屯市",location:{lat:44.42689,lng:84.90167}},{id:"654021",fullname:"伊宁县",location:{lat:43.97715,lng:81.52732}},{id:"654022",fullname:"察布查尔锡伯自治县",location:{lat:43.84072,lng:81.15128}},{id:"654023",fullname:"霍城县",location:{lat:44.05599,lng:80.87899}},{id:"654024",fullname:"巩留县",location:{lat:43.48257,lng:82.23175}},{id:"654025",fullname:"新源县",location:{lat:43.42988,lng:83.26157}},{id:"654026",fullname:"昭苏县",location:{lat:43.15724,lng:81.13102}},{id:"654027",fullname:"特克斯县",location:{lat:43.21799,lng:81.83603}},{id:"654028",fullname:"尼勒克县",location:{lat:43.79904,lng:82.5119}},{id:"654201",fullname:"塔城市",location:{lat:46.75145,lng:82.98703}},{id:"654202",fullname:"乌苏市",location:{lat:44.43556,lng:84.67851}},{id:"654221",fullname:"额敏县",location:{lat:46.52457,lng:83.62822}},{id:"654223",fullname:"沙湾县",location:{lat:44.32628,lng:85.61959}},{id:"654224",fullname:"托里县",location:{lat:45.93677,lng:83.60621}},{id:"654225",fullname:"裕民县",location:{lat:46.20109,lng:82.98277}},{id:"654226",fullname:"和布克赛尔蒙古自治县",location:{lat:46.79302,lng:85.72856}},{id:"654301",fullname:"阿勒泰市",location:{lat:47.827,lng:88.13243}},{id:"654321",fullname:"布尔津县",location:{lat:47.69989,lng:86.86313}},{id:"654322",fullname:"富蕴县",location:{lat:46.99362,lng:89.52553}},{id:"654323",fullname:"福海县",location:{lat:47.112,lng:87.48677}},{id:"654324",fullname:"哈巴河县",location:{lat:48.06069,lng:86.4192}},{id:"654325",fullname:"青河县",location:{lat:46.67911,lng:90.37558}},{id:"654326",fullname:"吉木乃县",location:{lat:47.4431,lng:85.8754}}]];
var isReviewVer=!1,isTelePhoneLogin=!1,enableDebugLog=!1,H5_Ver="141",gCurrentScope,APP_ABILITY="",DEBUG=null,gTraceLog=[],gTraceLogCount=1,timer=null,gNoticeInfo={},gTraceLog_Native=[],gTraceLog_Native_temp=[],gAdvConfigNew=null,inSharePage=!1,tracelog=function(e){var g=new Date,t=g.getHours()+":"+g.getMinutes()+":"+g.getSeconds()+"-"+g.getMilliseconds();gTraceLog.push(gTraceLogCount+"."+t+"    "+e),gTraceLogCount++,gTraceLog.length>200&&gTraceLog.shift(),enableDebugLog&&(gTraceLog_Native.push(t+"    "+e),null==timer&&(timer=setInterval(function(){if(gTraceLog_Native_temp=gTraceLog_Native,gTraceLog_Native=[],gTraceLog_Native_temp&&gTraceLog_Native_temp.length>0){var e={};e.CmdID="logToNative",e.Size=gTraceLog_Native_temp.length;for(var g=0;g<gTraceLog_Native_temp.length;g++)e["Content"+g]=gTraceLog_Native_temp[g];CommandChannel.execute(e,function(){},function(){})}},5e3)))};var bankBatchInfoList=[],gBankBatchInfo={},getBankBatchInfo=function(){gBankBatchInfo={};for(var n in bankBatchInfoList)gBankBatchInfo[bankBatchInfoList[n].card_bin]=bankBatchInfoList[n]};"use strict";app.service("$Reg",function(){var e={phone:/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/i,name:/^([\u4e00-\u9fa5]){2,8}$/,firstName:/^([\u4e00-\u9fa5]){1,6}$/,familyName:/^([\u4e00-\u9fa5]){1,2}$/,ident:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/i,pwd:/^[0-9]{6}$/,otp:/^[0-9]{6}$/,address:/^([\u4e00-\u9fa5]){2,20}$/,money:/^\d+(\.\d{1,2})?$/,zip:/^[0-9]{6}$/,bankcard:/^[0-9]+$/};this.test=function($,a){return e[a]&&$?e[a].test($):!1}});"use strict";app.service("$RSA",function(){function t(t,i){return new h(t,i)}function i(t,i){if(i<t.length+11)return alert("Message too long for RSA"),null;for(var r=new Array,o=t.length-1;o>=0&&i>0;)r[--i]=t.charCodeAt(o--);r[--i]=0;for(var s=new _,n=new Array;i>2;){for(n[0]=0;0==n[0];)s.nextBytes(n);r[--i]=n[0]}return r[--i]=2,r[--i]=0,new h(r)}function r(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function o(i,r){null!=i&&null!=r&&i.length>0&&r.length>0?(this.n=t(i,16),this.e=parseInt(r,16)):alert("Invalid RSA public key")}function s(t){return t.modPowInt(this.e,this.n)}function n(t){var r=i(t,this.n.bitLength()+7>>3);if(null==r)return null;var o=this.doPublic(r);if(null==o)return null;var s=o.toString(16);return 0==(1&s.length)?s:"0"+s}function h(t,i,r){null!=t&&("number"==typeof t?this.fromNumber(t,i,r):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function e(){return new h(null)}function u(t,i,r,o,s,n){for(;--n>=0;){var h=i*this[t++]+r[o]+s;s=Math.floor(h/67108864),r[o++]=67108863&h}return s}function f(t,i,r,o,s,n){for(var h=32767&i,e=i>>15;--n>=0;){var u=32767&this[t],f=this[t++]>>15,a=e*u+f*h;u=h*u+((32767&a)<<15)+r[o]+(1073741823&s),s=(u>>>30)+(a>>>15)+e*f+(s>>>30),r[o++]=1073741823&u}return s}function a(t,i,r,o,s,n){for(var h=16383&i,e=i>>14;--n>=0;){var u=16383&this[t],f=this[t++]>>14,a=e*u+f*h;u=h*u+((16383&a)<<14)+r[o]+s,s=(u>>28)+(a>>14)+e*f,r[o++]=268435455&u}return s}function p(t){return ai.charAt(t)}function l(t,i){var r=pi[t.charCodeAt(i)];return null==r?-1:r}function c(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function m(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function v(t){var i=e();return i.fromInt(t),i}function D(t,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(t,i);r=2}this.t=0,this.s=0;for(var o=t.length,s=!1,n=0;--o>=0;){var e=8==r?255&t[o]:l(t,o);0>e?"-"==t.charAt(o)&&(s=!0):(s=!1,0==n?this[this.t++]=e:n+r>this.DB?(this[this.t-1]|=(e&(1<<this.DB-n)-1)<<n,this[this.t++]=e>>this.DB-n):this[this.t-1]|=e<<n,n+=r,n>=this.DB&&(n-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),s&&h.ZERO.subTo(this,this)}function y(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function T(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r,o=(1<<i)-1,s=!1,n="",h=this.t,e=this.DB-h*this.DB%i;if(h-->0)for(e<this.DB&&(r=this[h]>>e)>0&&(s=!0,n=p(r));h>=0;)i>e?(r=(this[h]&(1<<e)-1)<<i-e,r|=this[--h]>>(e+=this.DB-i)):(r=this[h]>>(e-=i)&o,0>=e&&(e+=this.DB,--h)),r>0&&(s=!0),s&&(n+=p(r));return s?n:"0"}function B(){var t=e();return h.ZERO.subTo(this,t),t}function E(){return this.s<0?this.negate():this}function A(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(i=r-t.t,0!=i)return i;for(;--r>=0;)if(0!=(i=this[r]-t[r]))return i;return 0}function d(t){var i,r=1;return 0!=(i=t>>>16)&&(t=i,r+=16),0!=(i=t>>8)&&(t=i,r+=8),0!=(i=t>>4)&&(t=i,r+=4),0!=(i=t>>2)&&(t=i,r+=2),0!=(i=t>>1)&&(t=i,r+=1),r}function C(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)}function S(t,i){var r;for(r=this.t-1;r>=0;--r)i[r+t]=this[r];for(r=t-1;r>=0;--r)i[r]=0;i.t=this.t+t,i.s=this.s}function b(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s}function g(t,i){var r,o=t%this.DB,s=this.DB-o,n=(1<<s)-1,h=Math.floor(t/this.DB),e=this.s<<o&this.DM;for(r=this.t-1;r>=0;--r)i[r+h+1]=this[r]>>s|e,e=(this[r]&n)<<o;for(r=h-1;r>=0;--r)i[r]=0;i[h]=e,i.t=this.t+h+1,i.s=this.s,i.clamp()}function F(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(i.t=0);var o=t%this.DB,s=this.DB-o,n=(1<<o)-1;i[0]=this[r]>>o;for(var h=r+1;h<this.t;++h)i[h-r-1]|=(this[h]&n)<<s,i[h-r]=this[h]>>o;o>0&&(i[this.t-r-1]|=(this.s&n)<<s),i.t=this.t-r,i.clamp()}function w(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]-t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o-=t[r],i[r++]=o&this.DM,o>>=this.DB;o-=t.s}i.s=0>o?-1:0,-1>o?i[r++]=this.DV+o:o>0&&(i[r++]=o),i.t=r,i.clamp()}function M(t,i){var r=this.abs(),o=t.abs(),s=r.t;for(i.t=s+o.t;--s>=0;)i[s]=0;for(s=0;s<o.t;++s)i[s+r.t]=r.am(0,o[s],i,s,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&h.ZERO.subTo(i,i)}function R(t){for(var i=this.abs(),r=t.t=2*i.t;--r>=0;)t[r]=0;for(r=0;r<i.t-1;++r){var o=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,o,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()}function V(t,i,r){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=e());var n=e(),u=this.s,f=t.s,a=this.DB-d(o[o.t-1]);a>0?(o.lShiftTo(a,n),s.lShiftTo(a,r)):(o.copyTo(n),s.copyTo(r));var p=n.t,l=n[p-1];if(0!=l){var c=l*(1<<this.F1)+(p>1?n[p-2]>>this.F2:0),m=this.FV/c,v=(1<<this.F1)/c,D=1<<this.F2,y=r.t,T=y-p,B=null==i?e():i;for(n.dlShiftTo(T,B),r.compareTo(B)>=0&&(r[r.t++]=1,r.subTo(B,r)),h.ONE.dlShiftTo(p,B),B.subTo(n,n);n.t<p;)n[n.t++]=0;for(;--T>=0;){var E=r[--y]==l?this.DM:Math.floor(r[y]*m+(r[y-1]+D)*v);if((r[y]+=n.am(0,E,r,T,0,p))<E)for(n.dlShiftTo(T,B),r.subTo(B,r);r[y]<--E;)r.subTo(B,r)}null!=i&&(r.drShiftTo(p,i),u!=f&&h.ZERO.subTo(i,i)),r.t=p,r.clamp(),a>0&&r.rShiftTo(a,r),0>u&&h.ZERO.subTo(r,r)}}}function x(t){var i=e();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(h.ZERO)>0&&t.subTo(i,i),i}function O(t){this.m=t}function q(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function N(t){return t}function I(t){t.divRemTo(this.m,null,t)}function Z(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function j(t,i){t.squareTo(i),this.reduce(i)}function P(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return i=i*(2-(15&t)*i)&15,i=i*(2-(255&t)*i)&255,i=i*(2-((65535&t)*i&65535))&65535,i=i*(2-t*i%this.DV)%this.DV,i>0?this.DV-i:-i}function k(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function L(t){var i=e();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(h.ZERO)>0&&this.m.subTo(i,i),i}function z(t){var i=e();return t.copyTo(i),this.reduce(i),i}function $(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],o=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=i+this.m.t,t[r]+=this.m.am(0,o,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function G(t,i){t.squareTo(i),this.reduce(i)}function H(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function J(){return 0==(this.t>0?1&this[0]:this.s)}function K(t,i){if(t>4294967295||1>t)return h.ONE;var r=e(),o=e(),s=i.convert(this),n=d(t)-1;for(s.copyTo(r);--n>=0;)if(i.sqrTo(r,o),(t&1<<n)>0)i.mulTo(o,s,r);else{var u=r;r=o,o=u}return i.revert(r)}function Q(t,i){var r;return r=256>t||i.isEven()?new O(i):new k(i),this.exp(t,r)}function U(t){ci[mi++]^=255&t,ci[mi++]^=t>>8&255,ci[mi++]^=t>>16&255,ci[mi++]^=t>>24&255,mi>=yi&&(mi-=yi)}function W(){U((new Date).getTime())}function X(){if(null==li){for(W(),li=oi(),li.init(ci),mi=0;mi<ci.length;++mi)ci[mi]=0;mi=0}return li.next()}function Y(t){var i;for(i=0;i<t.length;++i)t[i]=X()}function _(){}function ti(){this.i=0,this.j=0,this.S=new Array}function ii(t){var i,r,o;for(i=0;256>i;++i)this.S[i]=i;for(r=0,i=0;256>i;++i)r=r+this.S[i]+t[i%t.length]&255,o=this.S[i],this.S[i]=this.S[r],this.S[r]=o;this.i=0,this.j=0}function ri(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function oi(){return new ti}r.prototype.doPublic=s,r.prototype.setPublic=o,r.prototype.encrypt=n;var si,ni=0xdeadbeefcafe,hi=15715070==(16777215&ni);hi&&"Microsoft Internet Explorer"==navigator.appName?(h.prototype.am=f,si=30):hi&&"Netscape"!=navigator.appName?(h.prototype.am=u,si=26):(h.prototype.am=a,si=28),h.prototype.DB=si,h.prototype.DM=(1<<si)-1,h.prototype.DV=1<<si;var ei=52;h.prototype.FV=Math.pow(2,ei),h.prototype.F1=ei-si,h.prototype.F2=2*si-ei;var ui,fi,ai="0123456789abcdefghijklmnopqrstuvwxyz",pi=new Array;for(ui="0".charCodeAt(0),fi=0;9>=fi;++fi)pi[ui++]=fi;for(ui="a".charCodeAt(0),fi=10;36>fi;++fi)pi[ui++]=fi;for(ui="A".charCodeAt(0),fi=10;36>fi;++fi)pi[ui++]=fi;O.prototype.convert=q,O.prototype.revert=N,O.prototype.reduce=I,O.prototype.mulTo=Z,O.prototype.sqrTo=j,k.prototype.convert=L,k.prototype.revert=z,k.prototype.reduce=$,k.prototype.mulTo=H,k.prototype.sqrTo=G,h.prototype.copyTo=c,h.prototype.fromInt=m,h.prototype.fromString=D,h.prototype.clamp=y,h.prototype.dlShiftTo=S,h.prototype.drShiftTo=b,h.prototype.lShiftTo=g,h.prototype.rShiftTo=F,h.prototype.subTo=w,h.prototype.multiplyTo=M,h.prototype.squareTo=R,h.prototype.divRemTo=V,h.prototype.invDigit=P,h.prototype.isEven=J,h.prototype.exp=K,h.prototype.toString=T,h.prototype.negate=B,h.prototype.abs=E,h.prototype.compareTo=A,h.prototype.bitLength=C,h.prototype.mod=x,h.prototype.modPowInt=Q,h.ZERO=v(0),h.ONE=v(1);var li,ci,mi;if(null==ci){ci=new Array,mi=0;var vi;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var Di=window.crypto.random(32);for(vi=0;vi<Di.length;++vi)ci[mi++]=255&Di.charCodeAt(vi)}for(;yi>mi;)vi=Math.floor(65536*Math.random()),ci[mi++]=vi>>>8,ci[mi++]=255&vi;mi=0,W()}_.prototype.nextBytes=Y,ti.prototype.init=ii,ti.prototype.next=ri;var yi=256,Ti=new r,Bi="CB3EE21BCBDEE47396F3407ED3FF7A4615BD3E739759DB71914C951E7666AE245E7CBED44AEE2C18160973CC96B172AD6350589C3A21235CBB270BEA9D677485DADD7BF63462DF25BB31DA892D1D7D4AC8B8E5566318CCEE68DC516181B101ACCA64C849B1D589986B3FC8C4477D48AA47BB889A7B96404513A8FE809A31837E4FA620B5CEC426E9B0F13DF67A300EFF734729A608432E4CD827ED30DE3435103269C7E780A3CA727997CECC2ADC2A18C5E3D5160C142D762408CFD2E71EE472F51D6531C8084EC50FC2380AEE2C3F4677DD25E3704B1C6FDF80E60631C98267B4E6D4A13C73D07ABD466913B0DD118F5C0AA5A8D218C63EBFAF194292BE26A3";return Ti.setPublic(Bi,"10001"),Ti});"use strict";app.service("$RSAForReport",function(){function t(t,i){return new h(t,i)}function i(t,i){if(i<t.length+11)return alert("Message too long for RSA"),null;for(var r=new Array,o=t.length-1;o>=0&&i>0;)r[--i]=t.charCodeAt(o--);r[--i]=0;for(var s=new _,n=new Array;i>2;){for(n[0]=0;0==n[0];)s.nextBytes(n);r[--i]=n[0]}return r[--i]=2,r[--i]=0,new h(r)}function r(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function o(i,r){null!=i&&null!=r&&i.length>0&&r.length>0?(this.n=t(i,16),this.e=parseInt(r,16)):alert("Invalid RSA public key")}function s(t){return t.modPowInt(this.e,this.n)}function n(t){var r=i(t,this.n.bitLength()+7>>3);if(null==r)return null;var o=this.doPublic(r);if(null==o)return null;var s=o.toString(16);return 0==(1&s.length)?s:"0"+s}function h(t,i,r){null!=t&&("number"==typeof t?this.fromNumber(t,i,r):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function e(){return new h(null)}function u(t,i,r,o,s,n){for(;--n>=0;){var h=i*this[t++]+r[o]+s;s=Math.floor(h/67108864),r[o++]=67108863&h}return s}function f(t,i,r,o,s,n){for(var h=32767&i,e=i>>15;--n>=0;){var u=32767&this[t],f=this[t++]>>15,p=e*u+f*h;u=h*u+((32767&p)<<15)+r[o]+(1073741823&s),s=(u>>>30)+(p>>>15)+e*f+(s>>>30),r[o++]=1073741823&u}return s}function p(t,i,r,o,s,n){for(var h=16383&i,e=i>>14;--n>=0;){var u=16383&this[t],f=this[t++]>>14,p=e*u+f*h;u=h*u+((16383&p)<<14)+r[o]+s,s=(u>>28)+(p>>14)+e*f,r[o++]=268435455&u}return s}function a(t){return pi.charAt(t)}function l(t,i){var r=ai[t.charCodeAt(i)];return null==r?-1:r}function c(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function m(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function v(t){var i=e();return i.fromInt(t),i}function D(t,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(t,i);r=2}this.t=0,this.s=0;for(var o=t.length,s=!1,n=0;--o>=0;){var e=8==r?255&t[o]:l(t,o);0>e?"-"==t.charAt(o)&&(s=!0):(s=!1,0==n?this[this.t++]=e:n+r>this.DB?(this[this.t-1]|=(e&(1<<this.DB-n)-1)<<n,this[this.t++]=e>>this.DB-n):this[this.t-1]|=e<<n,n+=r,n>=this.DB&&(n-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),s&&h.ZERO.subTo(this,this)}function y(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function T(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r,o=(1<<i)-1,s=!1,n="",h=this.t,e=this.DB-h*this.DB%i;if(h-->0)for(e<this.DB&&(r=this[h]>>e)>0&&(s=!0,n=a(r));h>=0;)i>e?(r=(this[h]&(1<<e)-1)<<i-e,r|=this[--h]>>(e+=this.DB-i)):(r=this[h]>>(e-=i)&o,0>=e&&(e+=this.DB,--h)),r>0&&(s=!0),s&&(n+=a(r));return s?n:"0"}function B(){var t=e();return h.ZERO.subTo(this,t),t}function F(){return this.s<0?this.negate():this}function d(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(i=r-t.t,0!=i)return i;for(;--r>=0;)if(0!=(i=this[r]-t[r]))return i;return 0}function A(t){var i,r=1;return 0!=(i=t>>>16)&&(t=i,r+=16),0!=(i=t>>8)&&(t=i,r+=8),0!=(i=t>>4)&&(t=i,r+=4),0!=(i=t>>2)&&(t=i,r+=2),0!=(i=t>>1)&&(t=i,r+=1),r}function E(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)}function S(t,i){var r;for(r=this.t-1;r>=0;--r)i[r+t]=this[r];for(r=t-1;r>=0;--r)i[r]=0;i.t=this.t+t,i.s=this.s}function C(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s}function b(t,i){var r,o=t%this.DB,s=this.DB-o,n=(1<<s)-1,h=Math.floor(t/this.DB),e=this.s<<o&this.DM;for(r=this.t-1;r>=0;--r)i[r+h+1]=this[r]>>s|e,e=(this[r]&n)<<o;for(r=h-1;r>=0;--r)i[r]=0;i[h]=e,i.t=this.t+h+1,i.s=this.s,i.clamp()}function g(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(i.t=0);var o=t%this.DB,s=this.DB-o,n=(1<<o)-1;i[0]=this[r]>>o;for(var h=r+1;h<this.t;++h)i[h-r-1]|=(this[h]&n)<<s,i[h-r]=this[h]>>o;o>0&&(i[this.t-r-1]|=(this.s&n)<<s),i.t=this.t-r,i.clamp()}function w(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]-t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o-=t[r],i[r++]=o&this.DM,o>>=this.DB;o-=t.s}i.s=0>o?-1:0,-1>o?i[r++]=this.DV+o:o>0&&(i[r++]=o),i.t=r,i.clamp()}function M(t,i){var r=this.abs(),o=t.abs(),s=r.t;for(i.t=s+o.t;--s>=0;)i[s]=0;for(s=0;s<o.t;++s)i[s+r.t]=r.am(0,o[s],i,s,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&h.ZERO.subTo(i,i)}function R(t){for(var i=this.abs(),r=t.t=2*i.t;--r>=0;)t[r]=0;for(r=0;r<i.t-1;++r){var o=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,o,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()}function V(t,i,r){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=e());var n=e(),u=this.s,f=t.s,p=this.DB-A(o[o.t-1]);p>0?(o.lShiftTo(p,n),s.lShiftTo(p,r)):(o.copyTo(n),s.copyTo(r));var a=n.t,l=n[a-1];if(0!=l){var c=l*(1<<this.F1)+(a>1?n[a-2]>>this.F2:0),m=this.FV/c,v=(1<<this.F1)/c,D=1<<this.F2,y=r.t,T=y-a,B=null==i?e():i;for(n.dlShiftTo(T,B),r.compareTo(B)>=0&&(r[r.t++]=1,r.subTo(B,r)),h.ONE.dlShiftTo(a,B),B.subTo(n,n);n.t<a;)n[n.t++]=0;for(;--T>=0;){var F=r[--y]==l?this.DM:Math.floor(r[y]*m+(r[y-1]+D)*v);if((r[y]+=n.am(0,F,r,T,0,a))<F)for(n.dlShiftTo(T,B),r.subTo(B,r);r[y]<--F;)r.subTo(B,r)}null!=i&&(r.drShiftTo(a,i),u!=f&&h.ZERO.subTo(i,i)),r.t=a,r.clamp(),p>0&&r.rShiftTo(p,r),0>u&&h.ZERO.subTo(r,r)}}}function x(t){var i=e();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(h.ZERO)>0&&t.subTo(i,i),i}function O(t){this.m=t}function q(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function N(t){return t}function I(t){t.divRemTo(this.m,null,t)}function Z(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function j(t,i){t.squareTo(i),this.reduce(i)}function P(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return i=i*(2-(15&t)*i)&15,i=i*(2-(255&t)*i)&255,i=i*(2-((65535&t)*i&65535))&65535,i=i*(2-t*i%this.DV)%this.DV,i>0?this.DV-i:-i}function k(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function L(t){var i=e();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(h.ZERO)>0&&this.m.subTo(i,i),i}function z(t){var i=e();return t.copyTo(i),this.reduce(i),i}function $(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],o=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=i+this.m.t,t[r]+=this.m.am(0,o,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function G(t,i){t.squareTo(i),this.reduce(i)}function H(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function J(){return 0==(this.t>0?1&this[0]:this.s)}function K(t,i){if(t>4294967295||1>t)return h.ONE;var r=e(),o=e(),s=i.convert(this),n=A(t)-1;for(s.copyTo(r);--n>=0;)if(i.sqrTo(r,o),(t&1<<n)>0)i.mulTo(o,s,r);else{var u=r;r=o,o=u}return i.revert(r)}function Q(t,i){var r;return r=256>t||i.isEven()?new O(i):new k(i),this.exp(t,r)}function U(t){ci[mi++]^=255&t,ci[mi++]^=t>>8&255,ci[mi++]^=t>>16&255,ci[mi++]^=t>>24&255,mi>=yi&&(mi-=yi)}function W(){U((new Date).getTime())}function X(){if(null==li){for(W(),li=oi(),li.init(ci),mi=0;mi<ci.length;++mi)ci[mi]=0;mi=0}return li.next()}function Y(t){var i;for(i=0;i<t.length;++i)t[i]=X()}function _(){}function ti(){this.i=0,this.j=0,this.S=new Array}function ii(t){var i,r,o;for(i=0;256>i;++i)this.S[i]=i;for(r=0,i=0;256>i;++i)r=r+this.S[i]+t[i%t.length]&255,o=this.S[i],this.S[i]=this.S[r],this.S[r]=o;this.i=0,this.j=0}function ri(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function oi(){return new ti}r.prototype.doPublic=s,r.prototype.setPublic=o,r.prototype.encrypt=n;var si,ni=0xdeadbeefcafe,hi=15715070==(16777215&ni);hi&&"Microsoft Internet Explorer"==navigator.appName?(h.prototype.am=f,si=30):hi&&"Netscape"!=navigator.appName?(h.prototype.am=u,si=26):(h.prototype.am=p,si=28),h.prototype.DB=si,h.prototype.DM=(1<<si)-1,h.prototype.DV=1<<si;var ei=52;h.prototype.FV=Math.pow(2,ei),h.prototype.F1=ei-si,h.prototype.F2=2*si-ei;var ui,fi,pi="0123456789abcdefghijklmnopqrstuvwxyz",ai=new Array;for(ui="0".charCodeAt(0),fi=0;9>=fi;++fi)ai[ui++]=fi;for(ui="a".charCodeAt(0),fi=10;36>fi;++fi)ai[ui++]=fi;for(ui="A".charCodeAt(0),fi=10;36>fi;++fi)ai[ui++]=fi;O.prototype.convert=q,O.prototype.revert=N,O.prototype.reduce=I,O.prototype.mulTo=Z,O.prototype.sqrTo=j,k.prototype.convert=L,k.prototype.revert=z,k.prototype.reduce=$,k.prototype.mulTo=H,k.prototype.sqrTo=G,h.prototype.copyTo=c,h.prototype.fromInt=m,h.prototype.fromString=D,h.prototype.clamp=y,h.prototype.dlShiftTo=S,h.prototype.drShiftTo=C,h.prototype.lShiftTo=b,h.prototype.rShiftTo=g,h.prototype.subTo=w,h.prototype.multiplyTo=M,h.prototype.squareTo=R,h.prototype.divRemTo=V,h.prototype.invDigit=P,h.prototype.isEven=J,h.prototype.exp=K,h.prototype.toString=T,h.prototype.negate=B,h.prototype.abs=F,h.prototype.compareTo=d,h.prototype.bitLength=E,h.prototype.mod=x,h.prototype.modPowInt=Q,h.ZERO=v(0),h.ONE=v(1);var li,ci,mi;if(null==ci){ci=new Array,mi=0;var vi;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var Di=window.crypto.random(32);for(vi=0;vi<Di.length;++vi)ci[mi++]=255&Di.charCodeAt(vi)}for(;yi>mi;)vi=Math.floor(65536*Math.random()),ci[mi++]=vi>>>8,ci[mi++]=255&vi;mi=0,W()}_.prototype.nextBytes=Y,ti.prototype.init=ii,ti.prototype.next=ri;var yi=256,Ti=new r,Bi="AA1B8F58340A759B2BFE3771B856DE7C6B1F995EF60CA638788C930FC1379490B1D7409497B0244D6C453AAC80C9D80E1A96EA3D24F226F6CD7A08EC5886F08B95529D32890FFFA7967728A7F01105C37D6DF8EE4041D9DF5D18A2CD05C04094073276BA9DBE4CF94479636FD3EF82849F93CB4159B319E2EE97300406E8D436BDD8192E036C33B7744A8B4D419CFA837CD56EF9A27FC33522940EB84DFA0B47306FC0E3B9B93D2611C011970FEE411E637594476E121412D0E9923AC1F384FF1DCFAC643613FC2014264F6D0688F6536534AFB392C1232BF5D77E0595747F4FBE819662152F93BDE95427AEF62D74D1A101D23D4C16B8254F1AFC7A7C3C8DA7";return Ti.setPublic(Bi,"10001"),Ti});"use strict";app.service("$MD5",function(){function n(n,r){var t=(65535&n)+(65535&r),e=(n>>16)+(r>>16)+(t>>16);return e<<16|65535&t}function r(n,r){return n<<r|n>>>32-r}function t(t,e,u,o,c,f){return n(r(n(n(e,t),n(o,f)),c),u)}function e(n,r,e,u,o,c,f){return t(r&e|~r&u,n,r,o,c,f)}function u(n,r,e,u,o,c,f){return t(r&u|e&~u,n,r,o,c,f)}function o(n,r,e,u,o,c,f){return t(r^e^u,n,r,o,c,f)}function c(n,r,e,u,o,c,f){return t(e^(r|~u),n,r,o,c,f)}function f(r,t){r[t>>5]|=128<<t%32,r[(t+64>>>9<<4)+14]=t;var f,i,a,h,g,l=1732584193,v=-271733879,d=-1732584194,C=271733878;for(f=0;f<r.length;f+=16)i=l,a=v,h=d,g=C,l=e(l,v,d,C,r[f],7,-680876936),C=e(C,l,v,d,r[f+1],12,-389564586),d=e(d,C,l,v,r[f+2],17,606105819),v=e(v,d,C,l,r[f+3],22,-1044525330),l=e(l,v,d,C,r[f+4],7,-176418897),C=e(C,l,v,d,r[f+5],12,1200080426),d=e(d,C,l,v,r[f+6],17,-1473231341),v=e(v,d,C,l,r[f+7],22,-45705983),l=e(l,v,d,C,r[f+8],7,1770035416),C=e(C,l,v,d,r[f+9],12,-1958414417),d=e(d,C,l,v,r[f+10],17,-42063),v=e(v,d,C,l,r[f+11],22,-1990404162),l=e(l,v,d,C,r[f+12],7,1804603682),C=e(C,l,v,d,r[f+13],12,-40341101),d=e(d,C,l,v,r[f+14],17,-1502002290),v=e(v,d,C,l,r[f+15],22,1236535329),l=u(l,v,d,C,r[f+1],5,-165796510),C=u(C,l,v,d,r[f+6],9,-1069501632),d=u(d,C,l,v,r[f+11],14,643717713),v=u(v,d,C,l,r[f],20,-373897302),l=u(l,v,d,C,r[f+5],5,-701558691),C=u(C,l,v,d,r[f+10],9,38016083),d=u(d,C,l,v,r[f+15],14,-660478335),v=u(v,d,C,l,r[f+4],20,-405537848),l=u(l,v,d,C,r[f+9],5,568446438),C=u(C,l,v,d,r[f+14],9,-1019803690),d=u(d,C,l,v,r[f+3],14,-187363961),v=u(v,d,C,l,r[f+8],20,1163531501),l=u(l,v,d,C,r[f+13],5,-1444681467),C=u(C,l,v,d,r[f+2],9,-51403784),d=u(d,C,l,v,r[f+7],14,1735328473),v=u(v,d,C,l,r[f+12],20,-1926607734),l=o(l,v,d,C,r[f+5],4,-378558),C=o(C,l,v,d,r[f+8],11,-2022574463),d=o(d,C,l,v,r[f+11],16,1839030562),v=o(v,d,C,l,r[f+14],23,-35309556),l=o(l,v,d,C,r[f+1],4,-1530992060),C=o(C,l,v,d,r[f+4],11,1272893353),d=o(d,C,l,v,r[f+7],16,-155497632),v=o(v,d,C,l,r[f+10],23,-1094730640),l=o(l,v,d,C,r[f+13],4,681279174),C=o(C,l,v,d,r[f],11,-358537222),d=o(d,C,l,v,r[f+3],16,-722521979),v=o(v,d,C,l,r[f+6],23,76029189),l=o(l,v,d,C,r[f+9],4,-640364487),C=o(C,l,v,d,r[f+12],11,-421815835),d=o(d,C,l,v,r[f+15],16,530742520),v=o(v,d,C,l,r[f+2],23,-995338651),l=c(l,v,d,C,r[f],6,-198630844),C=c(C,l,v,d,r[f+7],10,1126891415),d=c(d,C,l,v,r[f+14],15,-1416354905),v=c(v,d,C,l,r[f+5],21,-57434055),l=c(l,v,d,C,r[f+12],6,1700485571),C=c(C,l,v,d,r[f+3],10,-1894986606),d=c(d,C,l,v,r[f+10],15,-1051523),v=c(v,d,C,l,r[f+1],21,-2054922799),l=c(l,v,d,C,r[f+8],6,1873313359),C=c(C,l,v,d,r[f+15],10,-30611744),d=c(d,C,l,v,r[f+6],15,-1560198380),v=c(v,d,C,l,r[f+13],21,1309151649),l=c(l,v,d,C,r[f+4],6,-145523070),C=c(C,l,v,d,r[f+11],10,-1120210379),d=c(d,C,l,v,r[f+2],15,718787259),v=c(v,d,C,l,r[f+9],21,-343485551),l=n(l,i),v=n(v,a),d=n(d,h),C=n(C,g);return[l,v,d,C]}function i(n){var r,t="";for(r=0;r<32*n.length;r+=8)t+=String.fromCharCode(n[r>>5]>>>r%32&255);return t}function a(n){var r,t=[];for(t[(n.length>>2)-1]=void 0,r=0;r<t.length;r+=1)t[r]=0;for(r=0;r<8*n.length;r+=8)t[r>>5]|=(255&n.charCodeAt(r/8))<<r%32;return t}function h(n){return i(f(a(n),8*n.length))}function g(n,r){var t,e,u=a(n),o=[],c=[];for(o[15]=c[15]=void 0,u.length>16&&(u=f(u,8*n.length)),t=0;16>t;t+=1)o[t]=909522486^u[t],c[t]=1549556828^u[t];return e=f(o.concat(a(r)),512+8*r.length),i(f(c.concat(e),640))}function l(n){var r,t,e="0123456789abcdef",u="";for(t=0;t<n.length;t+=1)r=n.charCodeAt(t),u+=e.charAt(r>>>4&15)+e.charAt(15&r);return u}function v(n){return unescape(encodeURIComponent(n))}function d(n){return h(v(n))}function C(n){return l(d(n))}function p(n,r){return g(v(n),v(r))}function s(n,r){return l(p(n,r))}function A(n,r,t){return r?t?p(r,n):s(r,n):t?d(n):C(n)}return A});app.factory("essential",["$q","GLOBAL_CONSTANT","utils","envService","$timeout","$window","localStorageService","cache","localStorage",function(n,e,t,i,o,a,r,u,c){var f=!1,d=null;return{getToken:function(){return n(function(n,e){WebankToken.getToken(function(e){n(e)},function(n){e(n)})})},login:function(){return n(function(n,e){WebankLogin.login(function(e){n(e)},function(n){e(n)})})},getVersion:function(){return n(function(n){AppInfo.getAppInfo(function(e){var t={};t.versionCode=e.verCode,t.versionString=e.verString,t.channelID=e.channelID,t.imei=e.imei,t.mid=e.mid,t.isDebug=e.isDebug,t.appAbility=e.appAbility,n(t)})})},checkFace:function(i,o,a){return n(function(n,r){var u={};u.CmdID="faceVerify",t.checkAbility(e.APP_ABILITY.ABILITY_VIDEO_CERTIFICATION)&&(u.dismissDelayTime=800),t.checkAbility(e.APP_ABILITY.ABILITY_FACEGUIDE)&&(u.shouldShowGuide=o),i&&(u.ecif=i),u.scene=a,CommandChannel.execute(u,function(e){n(e)},function(n){r(n)})})},exchangeWebankToken:function(e,i,r,u){var c=this;return n(function(n,f){window.isChangingWebankToken=!0;var d={};d.cgiName="exchangeWebankToken",d.timeConsuming=t.getDate().getTime();var s={};s.CmdID="exchangeWebankToken",e&&(s.loginWithOpt="loginWithOpt",s.tel=i,s.passport=r,s.otp=u),CommandChannel.execute(s,function(e){c.reportSecurityInfo().then(function(){},function(n){}),window.isChangingWebankToken=!1,d.timeConsuming=t.getDate().getTime()-d.timeConsuming,d.retCode=0,d.status=0,Statistics.reportInterface(d),a.lastExchangeTokenTime=t.getDate().getTime(),n(e)},function(n){window.isChangingWebankToken=!1,d.timeConsuming=t.getDate().getTime()-d.timeConsuming,d.retCode=-1,d.status=-1,d.errMsg=n,Statistics.reportInterface(d),o(function(){if(n){var e={};e.code=n.code,e.msg=n.msg,Statistics.reportEvent("exchangeTokenFailure",e)}},200),f(n)})})},loginQQ:function(){return n(function(n,e){var t={};t.CmdID="loginQQ",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},loginWX:function(){return n(function(n,e){var t={};t.CmdID="loginWX",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},logout:function(){return NativeHandPassBirdge.updateNativeHandPassConfig("","","",""),n(function(n,e){var t={};t.CmdID="logout",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},setPhoneLoginInfo:function(e){return n(function(n,t){var i={};i.CmdID="setPhoneLoginInfo",i.openid=e.openid,i.token=e.token,i.picUrl=e.picUrl,i.userName=e.userName,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},getVersionInReview:function(){return n(function(n,e){var t={};t.CmdID="getVersionInReview",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},getVersionListInReview:function(){return n(function(n,e){var t={};t.CmdID="getVersionListInReview",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},isWXInstalled:function(){return n(function(n,e){var t={};t.CmdID="isWXInstalled",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},isQQInstalled:function(){return n(function(n,e){var t={};t.CmdID="isQQInstalled",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},launchWebView:function(e){return n(function(n,t){var i={};i.CmdID="launchWebView",i.url=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},readSMSVerifyCode:function(){return n(function(n,e){var t={};t.CmdID="readSMSVerifyCode",t.SMSAddress="1065509390621",t.SMSVerifyCodeLength=6,CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},sharePage:function(e,t,i,o,a){return n(function(n,r){var u={};inSharePage=!0,u.CmdID="share",u.share_title=e,u.share_content=t,u.share_preview=i,u.share_target=o,u.share_support=a||"WX|QQ",CommandChannel.execute(u,function(e){inSharePage=!1,n(e)},function(n){inSharePage=!1,r(n)})})},copyStrToPasteboard:function(e){return n(function(n,t){e||t(),e=e.toString();var i={};i.CmdID="copyStrToPasteboard",i.Content=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},getMuid:function(){return n(function(n,e){var t={};t.CmdID="getMuid",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},getIdfa:function(){return n(function(n,e){var t={};t.CmdID="getIdfa",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},enableDebugLog:function(e){return n(function(n,t){var i={};i.CmdID="enableDebugLog",i.Flag=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},showStatusBar:function(e){return n(function(n,t){var i={};i.CmdID="showStatusBar",i.flag=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},dimStatusBarBackground:function(n){n?this.setStatusBarBackgroundColor(34,46,74,1):this.setStatusBarBackgroundColor(68,92,149,1)},setInfoMaskStatusBackground:function(n){n?this.setStatusBarBackgroundColor(54,78,138,1):this.setStatusBarBackgroundColor(68,92,149,1)},setStatusBarBackgroundColor:function(i,o,a,r){return t.checkAbility(e.APP_ABILITY.ABILITY_STATUS_BAR_COLOR)?n(function(n,e){var t={};t.CmdID="SetStatusBarBackgroundColor",t.red=i,t.green=o,t.blue=a,t.alpha=r,CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})}):void 0},getUpdateConfig:function(){return n(function(n,e){var t={};t.CmdID="getUpdateConfig",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},startAppUpdate:function(){return n(function(n,e){var t={};t.CmdID="startUpdateApp",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},exitAndroidApp:function(){return APP_ABILITY&&APP_ABILITY.indexOf(e.APP_ABILITY.ABILITY_EXITKILLAPP)>=0?n(function(n,e){var t={};t.CmdID="exitAppHandler",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})}):void navigator.app.exitApp()},updateSplashConfig:function(e){return n(function(n,t){var i={};i.CmdID="updateSplashConfig",i.SplashConfig=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},getOptForPhoneLogin:function(e,t){return n(function(n,i){var o={};o.CmdID="getPhoneOtp",o.phone=e,o.passport=t,CommandChannel.execute(o,function(e){n(e)},function(n){i(n)})})},resolve:function(){return n(function(n){n()})},reject:function(){return n(function(n,e){e()})},openInAppBrowser:function(n,e){var i=this;if(n){var o=t.parseUrl(n);if(!o)return;if(!(n.indexOf("file:///data/"&&0===n.indexOf(!1))||0===n.indexOf("file:///")&&n.indexOf(!1)||o.host.match(/(.webank.com)$/)||o.host.match(/(.webankcdn.net)$/)||o.host.match(/(.qq.com)$/)))return void tracelog(n+",can not open in app,not webank url!");var a="_blank",r="enableViewportScale=yes,location=no,";e&&(r+=e);var c=t.getParamFromURL(n,"iad_userinfo");if("true"===c){var f=u.getUserInfo().platform;"weixin"===f&&(f="WX"),f=f.toUpperCase(),n=t.appendParamsToURL(n,{iad_user_name:u.getUserInfo().username,iad_user_avatar:u.getUserInfo().picurl,iad_user_platform:f})}var d=window.open(n,a,r);return d.addEventListener("loaderror",function(){}),d.addEventListener("loadstart",function(n){var e=n.url.split("#iacb");if(e&&e[1]){var o=t.getParamFromURL(e[1],"iacb");switch(o){case"iacb_share":i.sharePage(t.getParamFromURL(e[1],"iacb_share_title"),t.getParamFromURL(e[1],"iacb_share_content"),t.getParamFromURL(e[1],"iacb_share_preview"),t.getParamFromURL(e[1],"iacb_share_target"),t.getParamFromURL(e[1],"iacb_share_support"))}}}),d.addEventListener("loadstop",function(){}),d.addEventListener("exit",function(){}),d}},openPdf:function(n,e){if(!f&&(f=!0,d&&(o.cancel(d),d=null),d=o(function(){f=!1,d=null},15e3),n)){var a=i.getEnvVariable().PDF_VIEW+"?file=",r=a+n;e&&(r=r+"&titlename="+e);var u="_blank",c="enableViewportScale=yes,location=no",s=window.open(r,u,c);s.addEventListener("loaderror",function(){t.makeToast("系统繁忙，文件打开错误","short"),s.close(),f=!1}),s.addEventListener("loadstop",function(){f=!1}),s.addEventListener("exit",function(){f=!1})}},openPdf2:function(n,e){if(!f&&(f=!0,d&&(o.cancel(d),d=null),d=o(function(){f=!1,d=null},15e3),n)){var a=i.getEnvVariable().PDF_VIEW+"?file=",r=a+n;e&&(r=r+"&titlename="+e);var u="_blank",c="enableViewportScale=yes,location=no",s=window.open(r,u,c);s.addEventListener("loaderror",function(){t.makeToast("系统繁忙，文件打开错误","short"),s.close(),f=!1}),s.addEventListener("loadstop",function(){f=!1}),s.addEventListener("exit",function(){f=!1})}},getDeviceAuthType:function(){return n(function(n,e){var t={};t.CmdID="DeviceAuthType",CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},notifyStateChange:function(e,t){return n(function(n,i){var o={};o.CmdID="StateChange",o.from=e?e:"",o.to=t?t:"",CommandChannel.execute(o,function(e){n(e)},function(n){i(n)})})},launchVideoCertification:function(e,t,i){return n(function(n,o){var a={};a.CmdID="VideoCertification",a.faceId=e,a.scene=t,a.ecifNo=i,a.dismissDelayTime=0,CommandChannel.execute(a,function(e){n(e)},function(n){o(n)})})},commitServiceScore:function(e,t){return n(function(n,i){var o={};o.CmdID="CommitServiceScore",o.videoSessionId=t,o.score=""+e,CommandChannel.execute(o,function(e){n(e)},function(n){i(n)})})},queryVideoServiceState:function(e){return n(function(n,t){var i={};i.CmdID="QueryVideoServiceState",i.scene=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},startSecurityScan:function(){return n(function(n,e){var t={};t.CmdID="SecurityScan",t.flag=!0,CommandChannel.execute(t,function(e){n(e)},function(n){e(n)})})},getCommonData:function(i){return n(function(n,o){if(!t.checkAbility(e.APP_ABILITY.ABILITY_GETCOMMONDATA))return tracelog("no Ability_GetCommonData ability"),void o("no ability "+e.APP_ABILITY.ABILITY_GETCOMMONDATA);var a={};a.CmdID="GetCommonData",a.key=i,CommandChannel.execute(a,function(e){e||(e={}),n(e)},function(n){o(n)})})},startApp:function(e){return n(function(n,t){var i={};i.CmdID="startApp",i.appName=e,CommandChannel.execute(i,function(e){n(e)},function(n){t(n)})})},isFinancialHomeGray:function(){return this.isGrayWithoutLogin(e.GRAY_BIZ_ID.FINANCIAL_HOME)},isGoldGray:function(){return this.isGrayWithoutLogin(e.GRAY_BIZ_ID.INVESTMENT_GOLD)},isGrayWithoutLogin:function(n){var e="",t=u.getCacheInfo("gray-info-without-login");if(t||(t=c.loadData("gray-info-without-login")),t&&t.whiteList&&t.whiteList.length>0)for(var i=t.whiteList,o=i.length,a=0;o>a;a++)if(i[a].type==n&&i[a].itemId==e)return i[a].inFlag?!0:!1;return!1},getClicpBoardStr:function(){return n(function(n,i){if(t.checkAbility(e.APP_ABILITY.ABILITY_GETCLICKBOARD)){var o={};o.CmdID="getClicpboardStr",CommandChannel.execute(o,function(e){n(e)},function(n){i(n)})}else i()})},setWebViewLongClick:function(i){return n(function(n,o){if(t.checkAbility(e.APP_ABILITY.ABILITY_SETWEBVIEWLONGCLICK)){var a={};a.CmdID="setWebViewLongClick",a.flag=i,CommandChannel.execute(a,function(e){n(e)},function(n){o(n)})}else o()})},reportSecurityInfo:function(){return n(function(n,i){if(t.checkAbility(e.APP_ABILITY.ABILITY_WBlOGIN_SECURITY)){var o={};o.CmdID="WbLoginSecurity",o.loginType="loginType",CommandChannel.execute(o,function(e){n(e)},function(n){i(n)})}else i("no ability"+e.APP_ABILITY.ABILITY_WBlOGIN_SECURITY)})}}}]);app.factory("webankCommonService",["$q","GLOBAL_CONSTANT","essential","utils","cgiService","cache","$timeout","ProdInfoService","localStorage","HJactionLoading","CheckFaceService","$filter",function(e,t,a,n,r,o,_,i,c,l,s,d){return{parseRawWealthDataForBXProduct_V2:function(e,t){var a={};a.yestodayIncome=0,a.accumulatedIncome=0,a.amount=0,a.allAmount=0,a.redeemType="02";var r,o,_=function(){var e=n.getDateByYYYYMMDDString(o.value_date),t=n.getDateByYYYYMMDDString(o.value_date);t.setDate(t.getDate()+1);var _=n.getYYYYMMDDStringByDate(t),i=n.getDateByYYYYMMDDString(o.value_date);i.setDate(i.getDate()+parseInt(o.life_time));var c=n.getYYYYMMDDStringByDate(i),l=n.getDate(),s=parseInt(n.getYYYYMMDDStringByDate(l),10);a.redeemType=1==r.rollflag||5==r.rollflag?"03":0==r.rollflag?"01":"02",a.allAmount=r.buy_in_trans>0?r.buy_in_trans:r.avg_cost;var d=parseInt(n.getDateDifference(e,l));return d>parseInt(o.life_time)&&(d=parseInt(o.life_time)),s>=_&&c>=s?(a.yestodayIncome=parseFloat(r.avg_cost)*o.income_rate/100/365,a.accumulatedIncome=parseFloat(r.avg_cost)*o.income_rate*d/100/365,a.amount=parseFloat(r.avg_cost)):s>c?(a.yestodayIncome=0,a.accumulatedIncome=parseFloat(r.avg_cost)*o.income_rate*d/100/365,a.amount=parseFloat(r.avg_cost)):(a.yestodayIncome=0,a.accumulatedIncome=0,a.amount=parseFloat(r.avg_cost)),a};if(e&&e.finance_wealth&&e.finance_wealth.fund_cycle)for(var c in e.finance_wealth.fund_cycle)if(r=e.finance_wealth.fund_cycle[c],r.prod_code==t){if(o=i.getProdInfo(r.prod_code),!o)return a.yestodayIncome=0,a.accumulatedIncome=0,a.amount=r.avg_cost,a;_()}if(e&&e.finance_wealth&&e.finance_wealth.bank_cycle)for(var c in e.finance_wealth.bank_cycle)if(r=e.finance_wealth.bank_cycle[c],r.prod_code==t){if(o=i.getProdInfo(r.prod_code),!o)return a.yestodayIncome=0,a.accumulatedIncome=0,a.amount=r.avg_cost,a;_()}return a},parseRawWealthDataForConfirmBXProduct:function(e,t){var a={};a.amount=0;var n,r=function(){return n.buy_in_trans>0&&(a.amount=parseFloat(n.buy_in_trans).toFixed(2)),n.refund_amount>0&&(a.refundAmount=parseFloat(n.refund_amount).toFixed(2)),a};if(e&&e.finance_wealth&&e.finance_wealth.fund_cycle)for(var o in e.finance_wealth.fund_cycle){var n=e.finance_wealth.fund_cycle[o];n.prod_code==t&&r()}if(e&&e.finance_wealth&&e.finance_wealth.bank_cycle)for(var o in e.finance_wealth.bank_cycle){var n=e.finance_wealth.bank_cycle[o];n.prod_code==t&&r()}return a},parseRawWealthDataForGPProduct_V2:function(e,t){var a={};if(a.income=parseFloat(0).toFixed(2),a.accumulatedIncome=parseFloat(0).toFixed(2),a.amount=parseFloat(0).toFixed(2),a.share=parseFloat(0).toFixed(2),a.totalShare=parseFloat(0).toFixed(2),a.realValue=parseFloat(0).toFixed(4),a.bonusType=1,a.refundAmount=0,e&&e.finance_wealth&&e.finance_wealth.fund_cycle)for(var n in e.finance_wealth.fund_cycle){var r=e.finance_wealth.fund_cycle[n];if(r.prod_code==t)return a.income=parseFloat(0).toFixed(2),a.accumulatedIncome=parseFloat(0).toFixed(2),a.amount=(parseFloat(r.available_vol)*parseFloat(r.net_value)).toFixed(2),a.share=parseFloat(r.available_vol).toFixed(2),a.totalShare=parseFloat(r.total_vol),a.realValue=parseFloat(r.net_value),a.bonusType=r.dividend_method,r.refund_amount&&r.refund_amount>0&&(a.refundAmount=parseFloat(r.refund_amount).toFixed(2)),a}return a},getTPlusOneIncomeDate:function(e,a){var r=function(e){var t=null,a=parseInt(e.gen_income_date_num,10);isNaN(a)&&(a=1);var r=n.getDate();return t=n.getNextWorkDay(n.isWorkDay(r)?r.getHours()<15?a:a+1:a+1)},o={};return a==t.TPLUS1_TPLT.ZAX?(o.genIncomeDate=r(e),o.viewIncomeDate=r(e),o.viewIncomeDate.setDate(o.viewIncomeDate.getDate()+1)):a==t.TPLUS1_TPLT.TLX?(o.genIncomeDate=n.getDate(),o.genIncomeDate.setDate(o.genIncomeDate.getDate()+1),o.viewIncomeDate=n.getDate(),o.viewIncomeDate.setDate(o.viewIncomeDate.getDate()+2)):a==t.TPLUS1_TPLT.TPDX&&(o.genIncomeDate=r(e),o.viewIncomeDate=n.getNextWorkDay(1,o.genIncomeDate)),o},parseRawWealthDataForTPlusOne:function(e,t){var a=function(e){return void 0===e||null==e?0:e},n={};if(n.income=parseFloat(0).toFixed(2),n.incomeGenDateStr="",n.accumulatedIncome=parseFloat(0).toFixed(2),n.redeemableAmount=parseFloat(0).toFixed(2),n.totalAmount=parseFloat(0).toFixed(2),n.purchaseInTransAmount=parseFloat(0).toFixed(2),n.redeemInTransAmount=parseFloat(0).toFixed(2),n.waitingIncomeWealth={},n.refundAmount=0,n.hasWealth=!1,n.hasConfirmedWealth=!1,e&&e.finance_wealth&&e.finance_wealth.ptx_cycle)for(var r in e.finance_wealth.ptx_cycle){var o=e.finance_wealth.ptx_cycle[r];if(o.prod_code==t)return n.hasWealth=!0,n.income=parseFloat(a(o.last_income)).toFixed(2),n.incomeGenDateStr=o.last_income_date,n.accumulatedIncome=parseFloat(a(o.total_income)).toFixed(2),n.redeemableAmount=parseFloat(a(o.available_vol)).toFixed(2),n.totalAmount=parseFloat(a(o.total_vol)).toFixed(2),n.redeemInTransAmount=(parseFloat(a(o.redeem_in_trans_confirming))+parseFloat(a(o.redeem_in_trans_confirmed))).toFixed(2),n.refundIncome=parseFloat(a(o.refund_income)).toFixed(2),n.hasConfirmedWealth=parseFloat(a(o.available_vol))>parseFloat(a(o.buy_in_trans)),n.purchaseInTransAmount=parseFloat(a(o.buy_in_trans)).toFixed(2),n.refundAmount=parseFloat(a(o.refund_amount)).toFixed(2),n}return n},parseRawWealthData_V3:function(e){var t={},a=0,r=0,o=0;if(a=e.core_account.available_amount,t.BankAmount=isNaN(a)?0:a.toFixed(2),a=0,r=0,o=0,e.finance_wealth&&e.finance_wealth.balance_cycle)for(var _ in e.finance_wealth.balance_cycle)a+=parseFloat(e.finance_wealth.balance_cycle[_].last_income),r+=parseFloat(e.finance_wealth.balance_cycle[_].total_income),o+=parseFloat(e.finance_wealth.balance_cycle[_].available_vol);if(t.yesterdayHJIncome=isNaN(a)?0:a.toFixed(2),t.accumulatedHJIncome=isNaN(r)?0:r.toFixed(2),t.HJAmount=isNaN(o)?0:o.toFixed(2),a=0,r=0,o=0,t.shortProdDetail=[],e.finance_wealth&&e.finance_wealth.fund_cycle)for(var _ in e.finance_wealth.fund_cycle){var c=e.finance_wealth.fund_cycle[_],l=i.getProdInfo(c.prod_code);if(l){if(3==l.product_type&&0==l.templet_type){var s={};s.code=c.prod_code,s.name=l.on_sale_desc+"("+l.value_date.substr(4,4)+")",s.amount=0;var u=n.getDateByYYYYMMDDString(l.value_date),f=n.getDateByYYYYMMDDString(l.value_date);f.setDate(f.getDate()+1);var m=n.getDateByYYYYMMDDString(l.value_date);m.setDate(m.getDate()+parseInt(l.life_time));var p=n.getDate(),g=n.getDateDifference(u,p);g>parseInt(l.life_time)&&(g=parseInt(l.life_time)),c.available_vol>0||c.redeem_in_trans_confirming>0?(p>f&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate*parseInt(g)/100/365,o+=c.avg_cost,s.amount=c.avg_cost):c.redeem_in_trans_confirmed>0?(parseInt(n.getYYYYMMDDStringByDate(p),10)<=parseInt(n.getYYYYMMDDStringByDate(m),10)&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate/100*parseInt(l.life_time)/365,o+=c.redeem_in_trans_confirmed,s.amount=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans,s.amount=c.buy_in_trans),t.shortProdDetail.push(s)}}else tracelog("解析资产V3，获取产品信息失败:"+c.prod_code)}if(e.finance_wealth&&e.finance_wealth.bank_cycle)for(var _ in e.finance_wealth.bank_cycle){var c=e.finance_wealth.bank_cycle[_],l=i.getProdInfo(c.prod_code);if(l){if(3==l.product_type&&0==l.templet_type){var s={};s.code=c.prod_code,s.name=l.on_sale_desc+"("+l.value_date.substr(4,4)+")",s.amount=0;var u=n.getDateByYYYYMMDDString(l.value_date),f=n.getDateByYYYYMMDDString(l.value_date);f.setDate(f.getDate()+1);var m=n.getDateByYYYYMMDDString(l.value_date);m.setDate(m.getDate()+parseInt(l.life_time));var p=n.getDate(),g=n.getDateDifference(u,p);g>parseInt(l.life_time)&&(g=parseInt(l.life_time)),c.available_vol>0||c.redeem_in_trans_confirming>0?(p>f&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate*parseInt(g)/100/365,o+=c.avg_cost):c.redeem_in_trans_confirmed>0?(parseInt(n.getYYYYMMDDStringByDate(p),10)<=parseInt(n.getYYYYMMDDStringByDate(m),10)&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate/100*parseInt(l.life_time)/365,o+=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans),t.shortProdDetail.push(s)}}else tracelog("解析资产V3，获取产品信息失败:"+c.prod_code)}if(e.finance_wealth&&e.finance_wealth.ptx_cycle)for(var _ in e.finance_wealth.ptx_cycle){var c=e.finance_wealth.ptx_cycle[_],l=i.getProdInfo(c.prod_code),s={};s.code=c.prod_code,s.name=l?l.prod_name:"理财产品",s.amount=c.total_vol,o+=parseFloat(c.total_vol),t.shortProdDetail.push(s)}if(t.yesterdayShortIncome=isNaN(a)?0:a.toFixed(2),t.accumulatedShortIncome=isNaN(r)?0:r.toFixed(2),t.ShortAmount=isNaN(o)?0:o.toFixed(2),a=0,r=0,o=0,t.BXProdDetail=[],e.finance_wealth&&e.finance_wealth.wnx_cycle)for(var _ in e.finance_wealth.wnx_cycle){var c=e.finance_wealth.wnx_cycle[_],l=i.getProdInfo(c.prod_code),s={};s.code=c.prod_code,s.name=l?l.prod_name:"理财产品",s.amount=c.total_amount,a+=0,r+=0,o+=c.total_amount,t.BXProdDetail.push(s)}if(e.finance_wealth&&e.finance_wealth.fund_cycle)for(var _ in e.finance_wealth.fund_cycle){var c=e.finance_wealth.fund_cycle[_],l=i.getProdInfo(c.prod_code);if(l){if(1==l.product_type&&0==l.templet_type){var s={};s.code=c.prod_code,s.name=l.on_sale_desc+"("+l.value_date.substr(4,4)+")",s.amount=0;var u=n.getDateByYYYYMMDDString(l.value_date),f=n.getDateByYYYYMMDDString(l.value_date);f.setDate(f.getDate()+1);var m=n.getDateByYYYYMMDDString(l.value_date);m.setDate(m.getDate()+parseInt(l.life_time));var p=n.getDate(),g=n.getDateDifference(u,p);g>parseInt(l.life_time)&&(g=parseInt(l.life_time)),c.available_vol>0||c.redeem_in_trans_confirming>0?(p>f&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate*parseInt(g)/100/365,o+=c.avg_cost,s.amount=c.avg_cost):c.redeem_in_trans_confirmed>0?(parseInt(n.getYYYYMMDDStringByDate(p),10)<=parseInt(n.getYYYYMMDDStringByDate(m),10)&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate/100*parseInt(l.life_time)/365,o+=c.redeem_in_trans_confirmed,s.amount=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans,s.amount+=c.buy_in_trans),t.BXProdDetail.push(s)}}else if(tracelog("解析资产V3，获取产品信息失败:"+c.prod_code),2==c.prod_type||3==c.prod_type){var s={};c.available_vol>0||c.redeem_in_trans_confirming>0?(o+=c.avg_cost,s.amount=c.avg_cost):c.redeem_in_trans_confirmed>0?(o+=c.redeem_in_trans_confirmed,s.amount=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans,s.amount=c.buy_in_trans),s.code=c.prod_code,s.name="理财产品",t.BXProdDetail.push(s)}}if(e.finance_wealth&&e.finance_wealth.bank_cycle)for(var _ in e.finance_wealth.bank_cycle){var c=e.finance_wealth.bank_cycle[_],l=i.getProdInfo(c.prod_code);if(l){if(1==l.product_type&&0==l.templet_type){var s={};s.code=c.prod_code,s.name=l.on_sale_desc+"("+l.value_date.substr(4,4)+")",s.amount=0;var u=n.getDateByYYYYMMDDString(l.value_date),f=n.getDateByYYYYMMDDString(l.value_date);f.setDate(f.getDate()+1);var m=n.getDateByYYYYMMDDString(l.value_date);m.setDate(m.getDate()+parseInt(l.life_time));var p=n.getDate(),g=n.getDateDifference(u,p);g>parseInt(l.life_time)&&(g=parseInt(l.life_time)),c.available_vol>0||c.redeem_in_trans_confirming>0?(p>f&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate*parseInt(g)/100/365,o+=c.avg_cost,s.amount=c.avg_cost):c.redeem_in_trans_confirmed>0?(parseInt(n.getYYYYMMDDStringByDate(p),10)<=parseInt(n.getYYYYMMDDStringByDate(m),10)&&(a+=parseFloat(c.avg_cost)*l.income_rate/100/365),r+=parseFloat(c.avg_cost)*l.income_rate/100*parseInt(l.life_time)/365,o+=c.redeem_in_trans_confirmed,s.amount=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans,s.amount=c.buy_in_trans),t.BXProdDetail.push(s)}}else{tracelog("解析资产V3，获取产品信息失败:"+c.prod_code);var s={};c.available_vol>0||c.redeem_in_trans_confirming>0?(o+=c.avg_cost,s.amount=c.avg_cost):c.redeem_in_trans_confirmed>0?(o+=c.redeem_in_trans_confirmed,s.amount=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans,s.amount=c.buy_in_trans),s.code=c.prod_code,s.name="理财产品",t.BXProdDetail.push(s)}}if(t.yesterdayBXIncome=isNaN(a)?0:a.toFixed(2),t.accumulatedBXIncome=isNaN(r)?0:r.toFixed(2),t.BXAmount=isNaN(o)?0:o.toFixed(2),a=0,r=0,o=0,t.GJProdDetail=[],e.finance_wealth&&e.finance_wealth.fund_cycle)for(var _ in e.finance_wealth.fund_cycle){var c=e.finance_wealth.fund_cycle[_],l=i.getProdInfo(c.prod_code);if(l){if(2==l.product_type){var s={};s.code=c.prod_code,s.name=l.on_sale_desc,s.amount=0,a+=0,r+=0,o+=parseFloat(c.available_vol)*parseFloat(c.net_value),s.amount+=parseFloat(c.available_vol)*parseFloat(c.net_value),o+=parseFloat(c.buy_in_trans),s.amount+=parseFloat(c.buy_in_trans),o+=parseFloat(c.redeem_in_trans_confirming)*parseFloat(c.net_value),s.amount+=parseFloat(c.redeem_in_trans_confirming)*parseFloat(c.net_value),o+=parseFloat(c.redeem_in_trans_confirmed),s.amount+=parseFloat(c.redeem_in_trans_confirmed),c.refund_amount&&(o+=parseFloat(c.refund_amount),s.amount+=parseFloat(c.refund_amount)),t.GJProdDetail.push(s)}}else if(tracelog("解析资产V3，获取产品信息失败:"+c.prod_code),1==c.prod_type){var s={};s.amount=0,o+=parseFloat(c.available_vol)*parseFloat(c.net_value),s.amount+=parseFloat(c.available_vol)*parseFloat(c.net_value),o+=parseFloat(c.buy_in_trans),s.amount+=parseFloat(c.buy_in_trans),o+=parseFloat(c.redeem_in_trans_confirming)*parseFloat(c.net_value),s.amount+=parseFloat(c.redeem_in_trans_confirming)*parseFloat(c.net_value),o+=parseFloat(c.redeem_in_trans_confirmed),s.amount+=parseFloat(c.redeem_in_trans_confirmed),c.refund_amount&&(o+=parseFloat(c.refund_amount),s.amount+=parseFloat(c.refund_amount)),s.code=c.prod_code,s.name="理财产品",t.GJProdDetail.push(s)}}if(t.yesterdayGJIncome=isNaN(a)?0:a.toFixed(2),t.accumulatedGJIncome=isNaN(r)?0:r.toFixed(2),t.GJAmount=isNaN(o)?0:o.toFixed(2),a=0,r=0,o=0,t.StructuredProdDetail=[],e.finance_wealth&&e.finance_wealth.bank_cycle)for(var _ in e.finance_wealth.bank_cycle){var c=e.finance_wealth.bank_cycle[_],l=i.getProdInfo(c.prod_code);if(l){if(4==l.product_type){var s={};s.code=c.prod_code,s.name=l.on_sale_desc,s.amount=0,c.available_vol>0||c.redeem_in_trans_confirming>0?(o+=c.avg_cost,s.amount=c.avg_cost):c.redeem_in_trans_confirmed>0?(o+=c.redeem_in_trans_confirmed,s.amount=c.redeem_in_trans_confirmed):c.buy_in_trans>0&&(o+=c.buy_in_trans,s.amount=c.buy_in_trans),t.StructuredProdDetail.push(s)}}else tracelog("解析资产V3，获取产品信息失败:"+c.prod_code)}t.yesterdayStructuredIncome=isNaN(a)?0:a.toFixed(2),t.accumulatedStructuredIncome=isNaN(r)?0:r.toFixed(2),t.StructuredAmount=isNaN(o)?0:o.toFixed(2),a=0,r=0,o=0;var I=0,D=0,v=0;if(t.GoldProdDetail=[],e.finance_wealth&&e.finance_wealth.pmes_cycle)for(var _ in e.finance_wealth.pmes_cycle){var c=e.finance_wealth.pmes_cycle[_],l=i.getProdInfo("10001");if(l){var s={};s.code=c.prod_code,s.name=c.prod_name,s.amount=0,"C"==c.prod_type?(a+=parseFloat(d("cutGoldWeight")(c.last_income))*l.last_close_price,r+=parseFloat(d("cutGoldWeight")(c.total_income))*l.last_close_price,o+=parseFloat(d("cutGoldWeight")(c.available_vol))*l.last_close_price,s.amount=parseFloat(d("cutGoldWeight")(c.available_vol))*l.last_close_price,I+=parseFloat(d("cutGoldWeight")(c.last_income)),D+=parseFloat(d("cutGoldWeight")(c.total_income)),v+=parseFloat(d("cutGoldWeight")(c.available_vol))):"T"==c.prod_type&&(a+=parseFloat(d("cutGoldWeight")(c.last_income))*l.last_close_price,r+=parseFloat(d("cutGoldWeight")(c.total_income))*l.last_close_price,o+=parseFloat(d("cutGoldWeight")(c.available_vol))*l.last_close_price,s.amount=parseFloat(d("cutGoldWeight")(c.available_vol))*l.last_close_price,I+=parseFloat(d("cutGoldWeight")(c.last_income)),D+=parseFloat(d("cutGoldWeight")(c.total_income)),v+=parseFloat(d("cutGoldWeight")(c.available_vol))),t.GoldProdDetail.push(s)}}return t.yesterdayGoldIncome=isNaN(a)?0:a.toFixed(2),t.accumulatedGoldIncome=isNaN(r)?0:r.toFixed(2),t.GoldAmount=isNaN(o)?0:o.toFixed(2),t.yesterdayGoldIncomeWeight=isNaN(I)?0:d("cutGoldWeight")(I),t.accumulatedGoldIncomeWeight=isNaN(D)?0:d("cutGoldWeight")(D),t.GoldAmountWeight=isNaN(v)?0:d("cutGoldWeight")(v),t.yesterdayTotalIncome=parseFloat(t.yesterdayHJIncome)+parseFloat(t.yesterdayBXIncome)+parseFloat(t.yesterdayShortIncome)+parseFloat(t.yesterdayGJIncome)+parseFloat(t.yesterdayStructuredIncome)+parseFloat(t.yesterdayGoldIncome),t.accumulatedTotalIncome=parseFloat(t.accumulatedHJIncome)+parseFloat(t.accumulatedBXIncome)+parseFloat(t.accumulatedShortIncome)+parseFloat(t.accumulatedGJIncome)+parseFloat(t.accumulatedStructuredIncome)+parseFloat(t.accumulatedGoldIncome),t.totalDepositAmount=parseFloat(t.BXAmount)+parseFloat(t.ShortAmount)+parseFloat(t.GJAmount)+parseFloat(t.StructuredAmount),t.totalProductAmount=parseFloat(t.HJAmount)+parseFloat(t.BXAmount)+parseFloat(t.ShortAmount)+parseFloat(t.GJAmount)+parseFloat(t.StructuredAmount),t.totalAmount=parseFloat(t.HJAmount)+parseFloat(t.BankAmount)+parseFloat(t.BXAmount)+parseFloat(t.ShortAmount)+parseFloat(t.GJAmount)+parseFloat(t.StructuredAmount)+parseFloat(t.GoldAmount),t},getUnableToPayCardList:function(){var e=[],a=o.getCacheInfo("personalInfo").bind_cards_list;if(a)for(var n in a)a[n].status==t.BIND_CARD_STATE.VALID&&0==a[n].can_be_charged&&e.push(a[n]);var r=this.getValidRegCardList();if(r)for(var n in r)e.push(r[n]);return e},getMyGoldCurrentProduct:function(e){if(e&&e.finance_wealth&&e.finance_wealth.pmes_cycle)for(var t in e.finance_wealth.pmes_cycle)if("C"==e.finance_wealth.pmes_cycle[t].prod_type)return e.finance_wealth.pmes_cycle[t];return{available_vol:0,avg_cost:0,last_income:0,pm_acct_no:"",prod_code:"10001",prod_name:"活期金",prod_type:"C",total_income:0,total_vol:0,noAccount:!0}},getMyGoldFixTimeProduct:function(e,t){if(e&&e.finance_wealth&&e.finance_wealth.pmes_cycle)for(var a in e.finance_wealth.pmes_cycle)if("T"==e.finance_wealth.pmes_cycle[a].prod_type&&e.finance_wealth.pmes_cycle[a].pm_acct_no==t)return e.finance_wealth.pmes_cycle[a];return{}},getPayableCardList:function(){var e=o.getCacheInfo("personalInfo").bind_cards_list;if(!e)return[];var a=[];for(var n in e)e[n].status==t.BIND_CARD_STATE.VALID&&1==e[n].can_be_charged&&a.splice(-1,0,e[n]);return a},getValidBandCardList:function(){var e=o.getCacheInfo("personalInfo").bind_cards_list;if(!e)return[];var a=[];for(var n in e)e[n].status==t.BIND_CARD_STATE.VALID&&a.splice(-1,0,e[n]);return a},getUnbindBankCardList:function(){var e=o.getCacheInfo("personalInfo").bind_cards_list,t=[];if(!e)return[];for(var a in e)0==e[a].status&&t.push(e[a]);return t},getUnRegBankCardList:function(){var e=o.getCacheInfo("personalInfo").verification_card_list,t=[];if(!e)return[];for(var a in e)0==e[a].reg_status&&t.push(e[a]);return t},getValidRegCardList:function(){var e=o.getCacheInfo("personalInfo").verification_card_list;if(!e)return[];var a=[];for(var n in e)0!=e[n].current_status||e[n].b_reg_expire||e[n].reg_status!=t.REG_CARD_STATE.VALID||a.push(e[n]);return a},isRetCodePwd:function(e){return e==t.CGI_RET.CGI_PWD_ERR_1||e==t.CGI_RET.CGI_PWD_ERR_2||e==t.CGI_RET.CGI_PWD_ERR_3||e==t.CGI_RET.CGI_PWD_ERR_4||e==t.CGI_RET.CGI_PWD_ERR_5||e==t.CGI_RET.CGI_PWD_ERR_6||e==t.CGI_RET.CGI_PWD_ERR_7||e==t.CGI_RET.CGI_PWD_ERR_1_2||e==t.CGI_RET.CGI_PWD_ERR_2_2||e==t.CGI_RET.CGI_PWD_ERR_3_2||e==t.CGI_RET.CGI_PWD_ERR_4_2||e==t.CGI_RET.CGI_PWD_ERR_5_2||e==t.CGI_RET.CGI_PWD_ERR_6_2||e==t.CGI_RET.CGI_PWD_ERR_7_2?!0:!1},isRetCodePwdRetry:function(e){return e==t.CGI_RET.CGI_PWD_ERR_1||e==t.CGI_RET.CGI_PWD_ERR_2||e==t.CGI_RET.CGI_PWD_ERR_4||e==t.CGI_RET.CGI_PWD_ERR_5||e==t.CGI_RET.CGI_PWD_ERR_1_2||e==t.CGI_RET.CGI_PWD_ERR_2_2||e==t.CGI_RET.CGI_PWD_ERR_4_2||e==t.CGI_RET.CGI_PWD_ERR_5_2?!0:!1},isRetCodeAlreadyBind:function(e){return e==t.CGI_RET.CGI_REG_ALREADY_BIND_DIFF||e==t.CGI_RET.CGI_REG_ALREADY_BIND_SAME?!0:!1},isSuccessState:function(e){return t.CGI_RET.CGI_SUCCESS==e||t.CGI_RET.CGI_SUCCESS_2==e},isProcessingState:function(e){return t.CGI_RET.CGI_PROCESSING==e||t.CGI_RET.CGI_PROCESSING_2==e},getMonetaryValueDate:function(e){return n.getNextWorkDay(e.getHours()<15?1:2)},checkProcessingState:function(a,n,o,i){return e(function(e){var c=0,l=function(){r.requestQueryOrderStatus(a,n,o).then(function(n){var r=n.ret_data.trans_status,o={};a==t.ORDER_QUERY_TYPE.PURCHASE||a==t.ORDER_QUERY_TYPE.REDEEM||a==t.ORDER_QUERY_TYPE.TRANSIN||a==t.ORDER_QUERY_TYPE.TRANSIN_FROM_UNION_PAY||a==t.ORDER_QUERY_TYPE.TRANSOUT||""==a?r==t.ORDER_QUERY_RET_VAL.CONFIRM_SUCCESS||r==t.ORDER_QUERY_RET_VAL.APPLY_SUCCESS?(o.retCode=t.CGI_RET.CGI_SUCCESS,o.policyNo=n.ret_data.policy_no,e(o)):r==t.ORDER_QUERY_RET_VAL.CONFIRM_FAILED||r==t.ORDER_QUERY_RET_VAL.APPLY_FAILED||r==t.ORDER_QUERY_RET_VAL.TIMEOUT||r==t.ORDER_QUERY_RET_VAL.CANCELD||r==t.ORDER_QUERY_RET_VAL.TO_WEBANK_CARD?(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):r==t.ORDER_QUERY_RET_VAL.UNKNOW&&s():a==t.ORDER_QUERY_TYPE.CANCEL_INSURANCE||a==t.ORDER_QUERY_TYPE.PURCHASE_INSURANCE?3==r||1==r?(o.retCode=t.CGI_RET.CGI_SUCCESS,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):2==r||4==r?(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):0==r?s():(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):a==t.ORDER_QUERY_TYPE.PURCHASE_STOCK||a==t.ORDER_QUERY_TYPE.CANCEL_STOCK||a==t.ORDER_QUERY_TYPE.REDEEM_STOCK?3==r||5==r||1==r?(o.retCode=t.CGI_RET.CGI_SUCCESS,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):2==r||4==r?(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):0==r?s():(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):a==t.ORDER_QUERY_TYPE.UNIVERSAL_INSURANCE_PURCHASE||a==t.ORDER_QUERY_TYPE.UNIVERSAL_INSURANCE_REDEEM?3==r||1==r?(o.retCode=t.CGI_RET.CGI_SUCCESS,o.retMsg=n.ret_data.ori_rtn_desc,o.policyNo=n.ret_data.policy_no,e(o)):2==r||4==r?(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):0==r?s():(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,e(o)):r==t.ORDER_QUERY_RET_VAL.APPLY_SUCCESS||r==t.ORDER_QUERY_RET_VAL.CONFIRM_SUCCESS||r==t.ORDER_QUERY_RET_VAL.CANCELD?(o.retCode=t.CGI_RET.CGI_SUCCESS,o.retMsg=n.ret_data.ori_rtn_desc,o.retData=n.ret_data,e(o)):r==t.ORDER_QUERY_RET_VAL.APPLY_FAILED||r==t.ORDER_QUERY_RET_VAL.CONFIRM_FAILED||r==t.ORDER_QUERY_RET_VAL.TIMEOUT||r==t.ORDER_QUERY_RET_VAL.TO_WEBANK_CARD?(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,o.retData=n.ret_data,e(o)):r==t.ORDER_QUERY_RET_VAL.UNKNOW?s():(o.retCode=t.CGI_RET.CGI_UNKNOW_ERROR,o.retMsg=n.ret_data.ori_rtn_desc,o.retData=n.ret_data,e(o))},function(e){s()})},s=function(){c++;var a;if(a=i?i:5,a>=c)_(l,2e3);else{var n={};n.retCode=t.CGI_RET.CGI_PROCESSING,e(n)}};l(a,n)})},isSingleTransactionExceedLimit:function(e,t,a){if(a)return!1;var n=gBankLimit[e];return n?parseFloat(t)>n.perOne:!1},isBankCardInBatchProcessing:function(e){if(!gBankBatchInfo)return!1;try{var t=gBankBatchInfo[e];if(!t)return!1;var a=parseInt(t.start_time,10),r=parseInt(t.end_time,10),o=n.getDate(),_=o.toTimeString().split(" ")[0].replace(new RegExp(":","gm"),""),i=parseInt(_,10);return i>=a&&r>=i}catch(c){return!1}},getBankBatchProcessingMsg:function(e,t){var a="",n=gBankBatchInfo[e];if(!n)return"当前为银行结算时间，无法完成交易。";var r=n.start_time,o=n.end_time;return a+=t,a+=r.substr(0,2),a+=":",a+=r.substr(2,2),a+="-",a+=o.substr(0,2),a+=":",a+=o.substr(2,2),a+="为系统结算时间，可能导致交易失败。建议您更换银行卡或稍后再试。"},findCardFromUnbindCardList:function(e){var t=null,a=this.getUnbindBankCardList();for(var n in a)if(a[n].other_account==e){t=a[n];break}return t},findCardFromUnregisterCardList:function(e){var t=null,a=this.getUnRegBankCardList();for(var n in a)if(a[n].other_account==e){t=a[n];break}return t},findCardFromBindCardList:function(e){var t=null,a=this.getValidBandCardList();if(a&&a.length>0)for(var n in a)if(a[n].other_account==e){t=a[n];break}return t},findCardFromPayableCardList:function(e){var t=null,a=this.getPayableCardList();if(a&&a.length>0)for(var n in a)if(a[n].other_account==e){t=a[n];break}return t},findCardFromRegisterCardList:function(e){var t=this.getValidRegCardList();for(var a in t)if(t[a].other_account==e)return t[a];return null},isUserStrongAccount:function(){var e=o.getCacheInfo("personalInfo");return e?4==e.acct_type:!1},doesAccountNeedTransVerification:function(){return!1},isTransVerificationAccountV2:function(){var e=o.getCacheInfo("personalInfo");return e?e.is_trans_openaccount:!1},doesAccountNeedTransVerificationV2:function(){if(s.hasVideoCertAbility()){var e="gray-info-"+t.GRAY_BIZ_ID.REG_BIND_CARD,a=o.getCacheInfo(e);if(a&&"true"==a.in)return!1}if(!this.isTransVerificationAccountV2())return!1;var n=o.getCacheInfo("personalInfo");return!n||!n.verification_card_list||n.verification_card_list.length<=0?!1:0==n.verification_card_list[0].current_status},isInAccountVerificationPeriod:function(){if(!this.doesAccountNeedTransVerificationV2())return!1;var e=o.getCacheInfo("personalInfo"),t=e.verification_card_list[0].reg_datetime;if(!t||t.length<14)return!1;var a=t.substr(0,8),r=t.substr(8,6),_=n.getDate(),i=n.getYYYYMMDDStringByDate(_),c=n.getHHMMSSStringByDate(_);return parseInt(i,10)<=parseInt(a,10)?parseInt(i,10)==parseInt(a,10)?parseInt(c,10)<parseInt(r,10):!0:!1},getVerificationCardList:function(){var e=o.getCacheInfo("personalInfo");return e?e.verification_card_list:null},isTransVerificationAccount:function(){return!1},getFinancialProductsBuyTime:function(){var e=this,t=c.loadDataByUser("ProductsBuyTime")||{};return _(function(){e.getConfirmingListAndUpdate().then(function(e){if(e&&e.product_list&&e.product_list.length>0){for(var a=e.product_list,r=!1,o=0;o<a.length;o++)try{var _=n.getDateByDate8AndTime6String(a[o].trans_date,a[o].trans_time).valueOf();_&&t[a[o].prod_code]!=_&&(t[a[o].prod_code]=_,r=!0)}catch(i){}r&&c.saveDataByUser("ProductsBuyTime",t)}})}),t},setFinancialProductBuyTime:function(e,t){var a=c.loadDataByUser("ProductsBuyTime")||{};"number"==typeof t&&(a[e]=t,c.saveDataByUser("ProductsBuyTime",a))},getConfirmingListAndUpdate:function(){var t=e.defer();return _(function(){t.notify(o.getCacheInfo("confirmingList"))}),r.requestConfirmingList().then(function(e){t.resolve(e&&e.ret_data)},function(){t.reject(null)}),t.promise},getIncomeHistoryAndUpdate:function(){var t=e.defer();_(function(){t.notify(o.getCacheInfo("IncomeHistoryThreeDays"))});var a=n.getDate(),i=n.getYYYYMMDDStringByDate(a),c=n.getBeforeWorkDay(3,a),l=n.getYYYYMMDDStringByDate(c);return r.requestIncomeHistory(l,i).then(function(e){o.setCacheInfo("IncomeHistoryThreeDays",e.ret_data),t.resolve(e.ret_data)},function(){t.reject(null)}),t.promise},getProductsAgreementsAndUpdate:function(e){var t=o.getCacheInfo("productsAgreements");t&&e(t),r.requestProductsAgreements().then(function(t){t&&t.ret_data&&e(t.ret_data)},function(){})},canUseNewRegAndBandFunc:function(){return e(function(e,a){if(DEBUG)return void e();s.hasVideoCertAbility()||a();var n="gray-info-"+t.GRAY_BIZ_ID.REG_BIND_CARD,_=o.getCacheInfo(n);_?"true"==_.in?e():a():(l.show(),r.requestGrayInfo(t.GRAY_BIZ_ID.REG_BIND_CARD).then(function(t){l.hide(),"true"==t.ret_data.in?e():a()},function(){l.hide(),a()}))})},getSubProductInfoFromStructured:function(e,t){var a,n;if(e&&e.sub_product)for(var r in e.sub_product){var o=e.sub_product[r];o.prod_code==t?a=o:n=o}return[a,n]},parseCommonInfoOfStructured:function(e,t){if(e.sub_product){var a,n=function(t){var a=["append_buy_increment_min_amount","append_buy_min_amount","fund_process_mode","income_rate","increase_amount","min_amount","modify_redeem_method_deadline_date","modify_redeem_method_deadline_time","p_buy_max_amount","p_day_buy_total_amount","p_hold_min_amount","p_redeem_min_amount","refund_arrival_days","risk_level","ta_code","actual_income","link_help_sub","change_type"];for(var n in a)e[a[n]]=void 0!=t[a[n]]?t[a[n]]:void 0};if(t)for(var r in e.sub_product){var o=e.sub_product[r];o.prod_code==t&&(a=o)}n(a||e.sub_product[0])}}}}]);app.factory("cgiService",["$q","GLOBAL_CONSTANT","WebService","TencentWebService","TencentWebService2","envService","$http","$sce","cache","$timeout",function(e,t,n,r,u,o,s,i,c){return{requestUserWealth:function(){return n.get("query/wealth/all/v2","","wealthNew")},requestConfigFile:function(e){return u.get("productinfo/getproductinfo",e)},requestProdInfoByCode:function(e){return u.post("productinfo/getproductlistbycode",e)},requestProdNoticeByCode:function(e){return u.post("bulletin/query",e)},requestFinancialRecommendInfoTencent:function(){return u.get("productinfo/getfinancepageviewinfo")},requestFinancialRecommendInfoWeb:function(){var e=c.getCacheInfo("ExtraUserInfo"),t={};return e&&(t.permissionContext=e.permissionContext),n.get("productinfo/getfinancepageviewinfo",t,"getfinancepageviewinfo")},requestFinancialRecommendInfoTencentV2:function(){return u.get("productinfo/getfinancepageviewinfoV2")},requestFinancialRecommendInfoWebV2:function(){var e=c.getCacheInfo("ExtraUserInfo"),t={};return e&&(t.permissionContext=e.permissionContext),n.get("productinfo/getfinancepageviewinfoV2",t,"getfinancepageviewinfoV2")},requestDefaultRecommendInfo:function(){return u.get("productinfo/getinitpageviewinfo")},requestConfirmInsuranceProductList:function(){return n.get("insurance/query/can_cancellist","","confirmInsuranceProductList")},requestStockCancelProductList:function(){return n.get("stock_fund/query/can_cancellist","","stockCancelList")},requestConfirmingList:function(){return n.get("query/wealth/unconfirm","","confirmingList")},requestRefundFeeInfo:function(e){return n.post("universal_insurance/query/refund_fee_info",e)},requestBuyUniversalInsurance:function(e){var t=c.getCacheInfo("ExtraUserInfo");return t&&(e.permission_context=t.permissionContext),n.post("universal_insurance/buy",e)},requestSavePurchaseUniversalInsuranceInfo:function(e){return n.post("universal_insurance/settings/save",e)},requestBuyTPlus1WithTlxTemplate:function(e){var t=c.getCacheInfo("ExtraUserInfo");return t&&(e.permission_context=t.permissionContext),n.post("universal_insurance/tplus1/buy",e)},requestRedeemUniversalInsurance:function(e){return n.post("universal_insurance/redeem",e)},requestInsuranceReview:function(e){return n.post("universal_insurance/set/refund_info",e)},requestProductCanCancelList:function(e){var t={prod_code:e};return n.get("query/prod/cancellist",t)},requestStockCancelProduct:function(e){return n.post("stock_fund/cancel_buy",e)},requestInsuranceCancelProduct:function(e){return n.post("insurance/cancel_buy",e)},requestStockHistoryValue:function(e,t,n){var u={};return u.prod_code=e,u.start_date=t,u.end_date=n,r.get("history/query/stock_rates",u)},requestStockTotalIncome:function(e){var t={};return t.prod_type="0",e&&(t.prod_code=e),n.get("history/query/total_income",t,"StockTotalIncome")},requestInsuranceTotalIncome:function(e){var t={};return t.prod_type="3",e&&(t.prod_code=e),n.get("history/query/total_income",t,"InsuranceTotalIncome")},requestTPlusOneTotalIncome:function(e){var t={};return t.prod_type="8",e&&(t.prod_code=e),n.get("history/query/total_income",t,"tPlusOneTotalIncome")},requestEarningsDate:function(){return n.get("query/wealth/earnings_date")},requestStockBonusType:function(e){return n.post("stock_fund/modify_pay_type",e)},requestProductHistoryIncomeRate:function(e,t,n){var u={};return u.prod_code=e,u.start_date=t,u.end_date=n,r.get("history/query/rates",u)},requestTPlusOneProductHistoryIncomeRate:function(e,t,n){var u={};return u.prod_code=e,u.start_date=t,u.end_date=n,r.get("history/query/tplus1",u)},requestPersonalInfo:function(){var e={};return e.gesture_pwd_type=t.HANDPASS_TYPE.NEW,n.get("user/query_personnal_info/v1",e,"personalInfo")},requestRegisterOTP:function(e){return n.post("user/register_phone_check_num",e)},requestOTPAndCheckBindPhone:function(e){return n.post("user/register_phone_check_num_self",e)},requestPhoneLoginOTP:function(e){return n.post("get/phone_num/without_auth",e)},requestRegisterPreCheck:function(e){return n.post("finance/account/pre_check",e)},requestRegister:function(e){return n.post("finance/account/reg/v2",e)},requestActiveUnionAccount:function(e){return n.post("finance/account/union_acct/active",e)},requestRegisterAndBindCard:function(e){return n.post("finance/account/reg",e)},requestBindCard:function(e){return n.post("finance/account/bind_card",e)},requestBindCardV2:function(e){return n.post("finance/account/bind_card/v2",e)},requestUnbindCard:function(e){return n.post("finance/account/unbind_card",e)},requestUnbindCardV2:function(e){return n.post("finance/account/unbind_card/v2",e)},requestBankInfo:function(e,t){var r={};return r.account=e,r.usage=t,n.get("query/bank_info",r)},requestPurchaseMonetaryFund:function(e){return n.post("finance/buy_v2",e)},requestRedeemMonetaryFund:function(e){return n.post("finance/sale_v2",e)},requestOtpVerifyForChangePassword:function(e){return n.post("user/veriry_phone_check_num_self",e)},requestModifyPassword:function(e){return n.post("user/password/modify",e)},requestVerifyPassword:function(e){return n.post("user/password/verify",e)},requestSetPassword:function(e){return n.post("user/password/reset",e)},requestSetPasswordV2:function(e){return n.post("user/password/reset/v2",e)},requestUnbindOpenID:function(e){return n.post("finance/account/unbind_openid",e)},requestbindOpenID:function(e){return n.post("finance/account/bind_openid",e)},requestProductBalance:function(e){var t={};return t.product_code=e,n.get("finance/query/regular_balance",t)},requestInsuranceRedeemType:function(e){return n.post("insurance/modify_sale_type",e)},requestpartRedeemType:function(e){return n.post("fund/reserve_redeem/query",e)},requestModifypartRedeemType:function(e){return n.post("fund/reserve_redeem/set",e)},requestBuyFinacialProduct:function(e){var t=c.getCacheInfo("ExtraUserInfo");return t&&(e.permission_context=t.permissionContext),n.post("insurance/buy",e)},requestBuyFinacialLimit:function(e){return n.get("user/query/buy_limit",e)},requestCalendarInfo:function(e,t){return t&&""!=t?n.get("calendar/query",e,t):n.get("calendar/query",e)},getAllOnSaleCodeHistoryProducts:function(e){return u.get("productinfo/gethistoryproductlist",e)},requestTransPlans:function(){return n.get("schedule/list")},requestModifyTransPlan:function(e){return n.post("schedule/modify",e)},requestAddTransPlan:function(e){return n.post("schedule/add",e)},requestDeleteTransPlan:function(e){return n.post("schedule/del",e)},requestBuyFinacialProductByPatch:function(e){return n.post("insurance/batch_buy",e)},requestPurchaseOrderList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=0,n.get("finance/query/orderlist",r)},requestRedeemOrderList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=1,n.get("finance/query/orderlist",r)},requestInsuranceOrderList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=5,n.get("finance/query/orderlist",r)},requestWebankAccountTurnInOrderList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=2,n.get("finance/query/orderlist",r)},requestWebankAccountTurnOutOrderList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=2,n.get("finance/query/orderlist",r)},requestIncomeHistory:function(e,t,r){var u={};return u.index=0,u.size=r?r:1e3,u.start_date=e,u.end_date=t,n.get("history/query/earnings",u,"IncomeHistory")},requestBaseAccountTransOut:function(e,t,r,u,o,s,i,c){var a={};return a.name=e,a.bank_name=t,a.account_no=r,a.trans_amount=u,a.password=o,a.remark=s,a.phone_check_num=i,a.ignore_risk=c&&""!=c,a.ignore_session=c,n.post("finance/single_turn_out",a)},requestBaseAccountTransIn:function(e,t,r,u,o,s,i){var c={};return c.name=e,c.account_no=t,c.bank_name=r,c.bank_code=u,c.trans_amount=o,c.password=s,c.remark=i,n.post("finance/single_turn_in",c)},requestUionPayTrasferJumpUrl:function(e,t,r,u){var o={account_no:e,trans_amount:t,password:r,notice_addr:u};return n.post("finance/unionpay_turn_in",o)},requestAssessment:function(){return n.get("risk/assessment/query","","assessment")},requestSubmitAssessmet:function(e){return n.post("risk/assessment/submit",e)},requestStockPurchase:function(e){var t=c.getCacheInfo("ExtraUserInfo");return t&&(e.permission_context=t.permissionContext),n.post("stock_fund/buy",e)},requestStockRedeem:function(e){return n.post("stock_fund/sale",e)},requestCombinedPurchase:function(e){return n.post("finance/batch_buy",e)},getMessageList:function(e){return n.get("msg_center/getmsglist",e)},getTypeMessageList:function(e){return n.get("msg_center/gettypemsg",e)},setMessageUnread:function(){return n.get("msg_center/setallmsgread")},getUnreadMessageNum:function(e){return n.get("msg_center/getusermsgstatus",e)},reportReadMessage:function(e){return n.get("msg_center/viewmsg",e)},clearMessage:function(){return n.get("msg_center/clearmsg")},clearMessageByType:function(e){var t={};return t.msgType=e,n.get("msg_center/clearmsg",t)},clearMessageByRichType:function(e){var t={};return t.richType=e,n.get("msg_center/cleartypemsg",t)},clearMessageByRichType:function(e){var t={};return t.richType=e,n.get("msg_center/cleartypemsg",t)},requestQueryOrderStatus:function(e,t,r){var u={};return void 0!=e&&(u.query_type=e),u.trans_serno=t,u.prod_code=r,n.get("finance/query/order_status",u)},requestPasswordFactor:function(){return n.get("user/get_random_num")},requestAllTransList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=2e4,r.is_newdonate="1",n.get("finance/query/translist",r)},requestWebankAccountTransList:function(e,t){var r={};return r.index=0,r.size=1e3,r.start_date=e,r.end_date=t,r.query_type=1e4,r.is_newdonate="1",n.get("finance/query/translist",r)},requestDonateList:function(e,t){var r={};return r.index=e,r.page_size=t,n.get("finance/query/donatelist",r)},requestReportUserWithoutReg:function(){return n.get("data/report")},requestIsNeedInviteCode:function(){return r.get("reg_invite/isneedinvitecode")},requestCheckInviteCode:function(e){var t={};return t.inviteCode=e,r.get("reg_invite/checkreginvitecode",t)},requestShareInviteCode:function(e){var t={};return t.context=e,r.get("reg_invite/getrewordinvitecode",t)},requestActiveAccount:function(e){return n.post("finance/account/active",e)},requestUserinfoCheck:function(e){return n.post("finance/account/usrinfo_check",e)},requestModifyPhone:function(e){return n.post("finance/account/modify_phoneno",e)},requestQueryRegUids:function(){return n.get("finance/account/query_reg_uids")},requestUpdateHandPassword:function(e,r){var u={};return u.password=e,u.type=t.HANDPASS_TYPE.NEW,u.session_id=r,n.post("password/insert_update",u)},requestReportError:function(e){return n.post("data/report_v2",e)},requestReportData:function(e){return n.post("data/report_v2",e)},requestReportToTencent:function(e){return u.post("data/report_v2",e,"TENCENT_CGI_PREFIX")},requestReportToTencentGet:function(e){return u.get("data/report_v2",e,null,"TENCENT_CGI_PREFIX")},requestThreeHandred:function(e){return r.get("history/query/stock300",e)},requestTimeline:function(){var e={};return e.index=0,e.size=4,e.query_type=2e4,n.get("finance/query/timeline",e,"timeline")},requestRedPacket:function(){return n.get("redpacket/queryallredpackets")},requestRedPacketStatus:function(e){return n.get("redpacket/queryusestatus",{orig_busi_seq:e})},requestOperateSplashConfig:function(){return u.get("get_splash_config")},reqeustHistoryPayee:function(){return n.get("user/query_saved_cards","","historyPayee")},setUserSetting:function(e){return n.post("user/setting/set",e)},requestUserSettings:function(e){var t={};t.type=e;var r=null;return"LIMIT00008"==e&&(r="accountLimit"),n.get("user/setting/query",t,r)},requestUserAddress:function(e){var t={};return t.type="universal_insurance",t.prod_code=e,n.get("user/setting/query",t)},requestUserLimitInActiviy:function(e){var t={product_code_arr:e};return n.get("user/querylimit",t)},requestHomeFinancialConfig:function(){return n.get("productinfo/gethomepageviewinfo","","homeFinancial")},requestProductsAgreements:function(){return u.get("productinfo/getproductagreement","","productsAgreements")},requestAddDonatePlan:function(e){return n.post("commweal/add_donate_plan",e)},requestQueryDonatePlan:function(e){var t={};return t.activityId=e,n.get("commweal/query_donate_plan",t)},requestModifyDonatePlan:function(e){return n.get("commweal/modify_donate_plan",e)},requestDonateRunStatus:function(){return u.get("commonweal/query_commonweal_config")},requestCheckADCondition:function(e){return n.get("user/querylimit_base",e)},requestReportRelationship:function(e){return u.post("user/report_token",e,"TENCENT_CGI_PREFIX")},requestVipCardNo:function(){return n.get("finance/account/query_vip_cardno")},requestGrayInfoWithoutLogin:function(e){var t=e?e:{};return r.get("check_whitelist",t,"gray-info-without-login")},requestGrayInfo:function(e){var t={};return t.type=e,n.get("check_whitelist",t,"gray-info-"+e)},requestGrayInfoNew:function(e){var t=e?e:{};return n.get("check_whitelist/v2",t,"gray-info-v2")},requestWePaySafeMode:function(){var e={};return e.security_ck_cmd=t.SECURITY_CK_CMD.CONSUMER_PAYMENT_OPEN,n.post("finance/account/security_check",e)},requestOpenWePay:function(e,t,r){var u={};return u.session_id=e,u.face_id=t,u.artificial_faceck_id=r,n.post("finance/account/consumer_payment/open",u)},requestCloseWePay:function(e){var t={};return t.user_pwd=e,n.post("finance/account/consumer_payment/close",t)},requestExamineJoblist:function(e,t,r,u){var o={};return o.ori_biz_scene_id=e,t&&(o.check_result_list=[t]),u&&(o.check_mode_list=[u]),o.ecif_no=r,n.post("/user/query_examine_joblist",o)},getPageFragment:function(t){return e(function(e,n){if(t){var r=o.getEnvVariable().DATA_CGI_PREFIX+t;r=decodeURIComponent(r),s.get(i.trustAsResourceUrl(r)).success(function(t){e(t)}).error(function(){n()})}else n()})},requestExtraUserInfo:function(){return n.get("user/queryextuserinfo","","ExtraUserInfo")},requestInTransWealthInfo:function(e){return n.get("finance/query/trans_detail/in_transit",e)},requestHandPass:function(){var e={};return e.gesture_pwd_type=t.HANDPASS_TYPE.NEW,n.get("/user/query_gesture_pwd",e)},gold:{currentProductPurchase:function(e){return n.post("gold/buy_mt",e)},currentProductRedeem:function(e){return n.post("gold/redeem",e)},getGoldPrice:function(){return n.get("gold/query_current_price")},getGoldPriceTencent:function(){return u.get("gold/current_price")},getHistoryGoldPrice:function(e){return u.get("gold/history_price",e)},getTodayGoldPrice:function(){return u.get("gold/minute_price")},fixTimeProductPurchase:function(e){return n.post("gold/buy_ins",e)},fixTimeProductRedeem:function(e){return n.post("gold/redeem",e)},queryRequest:function(e){return n.get("gold/query_order",e,"goldRequestData")},cancelRequest:function(e){return n.post("gold/cancel_order",e)},currentProductExtract:function(e){return n.post("gold/demand_gold_pickup",e)},currentProductExtractQuery:function(){return n.get("gold/query_pickup",null,"goldExtractData")},currentProductExtractCancel:function(e){return n.post("gold/cancel_gold_pickup",e)},currentProductInvestmentAdd:function(e){return n.post("gold/schedule/add",e)},currentProductInvestmentQuery:function(){return n.get("gold/schedule/query",null,"goldInvestmentData")},currentProductInvestmentDel:function(e){return n.post("gold/schedule/delete",e)},currentProductInvestmentModify:function(e){return n.post("gold/schedule/modify",e)}},promo:{isOver:function(){return n.get("welfare/isover",null,null,"CGI_PREFIX_OP")},whitelist:function(){return n.get("welfare/whitelist",null,null,"CGI_PREFIX_OP")},getInviteCode:function(){return n.get("welfare/getinvitecode",null,null,"CGI_PREFIX_OP")},verifyInviteCode:function(e){return n.get("welfare/verifyinvitecode",e,null,"CGI_PREFIX_OP")},applyInviteCode:function(e){return n.get("welfare/applyinvitecode",e,null,"CGI_PREFIX_OP")},findRecords:function(){return n.get("welfare/queryhistory",null,null,"CGI_PREFIX_OP")},findRecordByActivityId:function(e){return n.get("welfare/queryhistorybyid",e,null,"CGI_PREFIX_OP")},setSocialInfo:function(e,t){return n.post("welfare/setsocialinfo",{nickname:e,headimgurl:t},"CGI_PREFIX_OP")},setRecordRead:function(){return n.post("welfare/set_record_read",null,"CGI_PREFIX_OP")}},groupon:{querygrouponprodcodelist:function(){return c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?n.get("groupon/querygrouponprodcodelist",null,null,"CGI_PREFIX_OP"):u.get("groupon/querygrouponprodcodelist")},queryusergrouponinfo:function(e){return n.get("groupon/queryusergrouponinfo",{prod_code:e},null,"CGI_PREFIX_OP")},creategroupon:function(e,t,r){return n.post("groupon/creategroupon",{owner:{nick:e,head:t},prod_code:r},"CGI_PREFIX_OP")}},requestCommonConfig:function(){return e(function(e,t){var n=o.getEnvVariable().DATA_CGI_PREFIX+"common.json";n=decodeURIComponent(n),s.get(n).success(function(t){e(t)}).error(function(){t()})})},querySocialData:function(e){return u.get("/history/query/platform_data",{sign:e})},requestWeArticle:function(){return r.get("article/hotlist",null,"weArticle")},requestWeArticleList:function(e){return r.get("article/list",{index:e||0})},requestAssetData:function(e){var t=e?e:{};return n.post("query/asset/data",t)},requestAssetDataDetail:function(e){var t=e?e:{};return n.post("query/asset/datadetail",t)}}}]);app.factory("utils",["GLOBAL_CONSTANT","$MD5","$RSA","$location","$timeout","$RSAForReport","$ionicHistory","cache",function(t,e,r,n,a,i,o,s){var u=function(){var t=new Date,e=t.getTime(),r=60*t.getTimezoneOffset()*1e3,n=e+r,a=n+288e5;return new Date(a)};return{makeToast:function(t,e,r){e=e?e:"short",r=r?r:"center",t?window.plugins.toast.hide(function(){window.plugins.toast.show(t,e,r)}):window.plugins.toast.show(STRING_TABLE.DEFAULT_ERR_DESC,e,r)},makeDebugToast:function(t,e){DEBUG&&window.plugins.toast.show("DBG:"+t,e?e:"short","center")},reportCustomEvent:function(t,e){var r={};r.eventParam=e,Statistics.reportEvent(t,r)},clickButtonReport:function(t){var e={};e.buttonName=t,Statistics.reportEvent("clickButton",e)},reportWebCrash:function(t,e){var r={};r.callstack=t,r.statestack=e,Statistics.reportEvent("webCrash",r)},getRSAString:function(t){var e=r.encrypt(t);return e.length<512&&(e=r.encrypt(t)),e.length<512&&(e=r.encrypt(t)),e.length<512&&(e=r.encrypt(t)),e.length<512&&(e=r.encrypt(t)),e},getRSAStringForReport:function(t){if(!t)return"";var e=i.encrypt(t);return e.length<512&&(e=i.encrypt(t)),e.length<512&&(e=i.encrypt(t)),e.length<512&&(e=i.encrypt(t)),e.length<512&&(e=i.encrypt(t)),e},debugMsg:function(){},logMessage:function(t,e){},isPasswordStrongEnough:function(t){for(var r=["012345","123456","234567","345678","456789","567890","678901","789012","890123","901234","123321","123123","520131","521131","211314","201314","521521","520520","654321","000000","111111","222222","333333","444444","555555","666666","777777","888888","999999","987654","876543","765432","654321"],n=0;n<r.length;++n)if(e(r[n])==t)return!1;return!0},isPasswordWithUserBirthday:function(t,r){if(18==r.length){var n=r.substr(6,6),a=r.substr(8,6);return e(n)==t||e(a)==t?!0:!1}if(15==r.length){var i=r.substr(6,6);return e(i)==t?!0:!1}if(8==r.length){var n=r.substr(0,6),a=r.substr(2,6);return e(n)==t||e(a)==t?!0:!1}},isPasswordWithUserPhone:function(t,r){if(r&&r.length>10){var n=r.substr(3,6),a=r.substr(4,6),i=r.substr(5,6);return e(n)==t||e(a)==t||e(i)==t?!0:!1}return!1},isMaskedPhoneNumber:function(t){return t?t.indexOf("*****")>-1:!1},isiOSDevice:function(){return-1!=navigator.userAgent.indexOf("iPhone")},getIOSVersion:function(){if(-1==navigator.userAgent.indexOf("iPhone"))return null;if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}return null},isValidName:function(t){return/(^[\u4e00-\u9fa5]{1}[·\u4e00-\u9fa5]*$)|(^[A-Za-z]{1}[A-Za-z\s]*$)/.test(t)},isValidNameInput:function(t){return/(^[\u4e00-\u9fa5]{1}[·\u4e00-\u9fa5]*$)|(^[A-Za-z]{1}[A-Za-z\s]*$)/.test(t)?"finish":"fail"},isCGITokenExpiredIgnored:function(t){return"msg_center/getusermsgstatus"==t||"data/report_v2"==t||"msg_center/getmsglist"==t||"msg_center/gettypemsg"==t||"redpacket/queryredpackets"==t||"query/wealth/all/v2"==t||"productinfo/getproductlistbycode"==t||"user/query_personnal_info/v1"==t||"risk/assessment/query"==t||"history/query/earnings"==t||"productinfo/getproductinfo"==t||"/user/querylimit_base"==t||"redpacket/queryallredpackets"==t||"finance/query/timeline"==t||"productinfo/getfinancepageviewinfo"==t||"redpacket/queryusestatus"==t},isValidIDCardNumber:function(t){var e={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},r="";if(!t)return!1;if(18!=t.length)return!1;if(!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(t))return r="身份证号格式错误",!1;if(!e[t.substr(0,2)])return r="地址编码错误",!1;if(18==t.length){t=t.split("");for(var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=[1,0,"X",9,8,7,6,5,4,3,2],i=0,o=0,s=0,u=0;17>u;u++)o=t[u],s=n[u],i+=o*s;var g=a[i%11];if("X"==g){if("X"!=t[17]&&"x"!=t[17])return r="校验位错误",!1}else if(t[17]!=g)return r="校验位错误",!1}return!0},isInGrayList:function(t,e){if(void 0==t)return!1;var r=void 0==e?"":e,n=s.getCacheInfo("gray-info-v2");if(n&&n.whiteList&&n.whiteList.length>0)for(var a=n.whiteList,i=a.length,o=0;i>o;o++)if(a[o].type==t&&a[o].itemId==r)return a[o].inFlag?!0:!1;return!1},isOldEnough:function(t,e){if(!t)return!1;if(t.length<14)return!1;var r=t.substr(6,8),n=u(),a=n.getFullYear(),i=n.getMonth()+1,o=n.getDate();10>o&&(o="0"+o),10>i&&(i="0"+i);var s=a+""+i+o,g=1e4*parseInt(e);return parseInt(s,10)-parseInt(r,10)>=g?!0:!1},isOldEnoughByBirthday:function(t,e){if(!t)return!1;if(8!=t.length)return!1;var r=u(),n=r.getFullYear(),a=r.getMonth()+1,i=r.getDate();10>i&&(i="0"+i),10>a&&(a="0"+a);var o=n+""+a+i,s=1e4*parseInt(e);return parseInt(o,10)-parseInt(t,10)>=s?!0:!1},isYoungThan:function(t,e){if(!t)return!1;if(t.length<14)return!1;var r=t.substr(6,8),n=u(),a=n.getFullYear(),i=n.getMonth()+1,o=n.getDate();10>o&&(o="0"+o),10>i&&(i="0"+i);var s=a+""+i+o,g=1e4*parseInt(e);return parseInt(s,10)-parseInt(r,10)<g?!0:!1},isYoungThanByBirthday:function(t,e){if(!t)return!1;if(8!=t.length)return!1;var r=u(),n=r.getFullYear(),a=r.getMonth()+1,i=r.getDate();10>i&&(i="0"+i),10>a&&(a="0"+a);var o=n+""+a+i,s=1e4*parseInt(e);return parseInt(o,10)-parseInt(t,10)<s?!0:!1},isValidIDCardInput:function(t){return t.length>=18?/(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)?"finish":"fail":/^[0-9]*$/.test(t)?"ok":"fail"},isValidPhoneNumber:function(t){return/^1[0-9]{10}$/.test(t)},isValidPhoneInput:function(t){return t.length>=11?/^1[0-9]{10}$/.test(t)?"finish":"fail":/^1[0-9]*$/.test(t)?"ok":"fail"},isValidPhoneOtpNumber:function(t){return/^[0-9]{6}$/.test(t)},isValidPhoneOtpInput:function(t){return t.length>=6?/^[0-9]{6}$/.test(t)?"finish":"fail":/^[0-9]*$/.test(t)?"ok":"fail"},isValidEmail:function(t){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)},isValidTransferAmount:function(t){if(t&&"."==t.toString().charAt(0))return!1;var e=parseFloat(t);if(isNaN(e))return!1;if(.01>e)return!1;try{return t.toString().split(".")[1].length<=2}catch(r){return!0}},isNumber:function(t){return/^[0-9]*$/.test(t)},getDateTimeStringByDate:function(t){var e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear(),a=t.getHours(),i=t.getMinutes();return e=10>e?"0"+e:e,r=10>r?"0"+r:r,a=10>a?"0"+a:a,i=10>i?"0"+i:i,n+"-"+r+"-"+e+" "+a+":"+i},getPullingDateString:function(t){var e;try{if(!t)return"";e=new Date(t)}catch(r){return""}var n=e.getDate(),a=e.getMonth()+1,i=e.getFullYear(),o=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return n=10>n?"0"+n:n,a=10>a?"0"+a:a,o=10>o?"0"+o:o,s=10>s?"0"+s:s,u=10>u?"0"+u:u,"<br>最后更新:"+i+"-"+a+"-"+n+" "+o+":"+s+":"+u},getTodayStirng:function(t){t=t||"-";var e=u(),r=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return 10>r&&(r="0"+r),10>n&&(n="0"+n),a+t+n+t+r},getYesterdayString:function(){var t=u();t.setDate(t.getDate()-1);var e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear();return 10>e&&(e="0"+e),10>r&&(r="0"+r),n+""+r+e},getBeforeYesterdayString:function(){var t=u();t.setDate(t.getDate()-2);var e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear();return 10>e&&(e="0"+e),10>r&&(r="0"+r),n+""+r+e},getDateByYYYYMMDDString:function(t){if(!t)return null;var e=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),n=parseInt(t.substring(6,8),10);return new Date(e,r-1,n)},getEndDateByYYYYMMDDString:function(t){if(!t)return null;var e=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),n=parseInt(t.substring(6,8),10);return new Date(e,r-1,n,23,59,59)},getUTCMsByYYYYMMDDString:function(t){var e=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),n=parseInt(t.substring(6,8),10);return Date.UTC(e,r-1,n)},getDateAndTimeStr:function(t,e,r){var n=parseInt(t.substring(0,4),10),a=parseInt(t.substring(4,6),10),i=parseInt(t.substring(6,8),10),o=parseInt(e.substring(0,2),10),s=parseInt(e.substring(2,4),10),u=parseInt(e.substring(4,6),10);return r?n+"-"+a+"-"+i+" "+o+":"+s:n+"-"+a+"-"+i+" "+o+":"+s+":"+u},getDateAndTimeStrTwo:function(t,e,r){var n=t.substring(0,4),a=t.substring(4,6),i=t.substring(6,8),o=e.substring(0,2),s=e.substring(2,4),u=e.substring(4,6);return r?n+"-"+a+"-"+i+" "+o+":"+s:n+"-"+a+"-"+i+" "+o+":"+s+":"+u},getAllDatesBetweenDates:function(t,e){if(!t||!e)return[];for(var r=[],n=t.getTime(),a=e.getTime(),i=n+864e5;a>i;)r.push(new Date(i)),i+=864e5;return r},getYYYYMMDDStringByDate:function(t,e){if(!t)return null;e||(e="");var r=t.getFullYear()+"",n=t.getMonth()+1,a=t.getDate(),i=""+n;10>n&&(i="0"+i);var o=""+a;return 10>a&&(o="0"+a),r+e+i+e+o},getHHMMSSStringByDate:function(t,e){if(!t)return null;e||(e="");var r=t.getHours(),n=t.getMinutes(),a=t.getSeconds(),i=""+r;10>r&&(i="0"+i);var o=""+n;10>n&&(o="0"+n);var s=""+a;return 10>a&&(s="0"+a),i+e+o+e+s},getHHMMStringByDate:function(t,e){if(!t)return null;e||(e="");var r=t.getHours(),n=t.getMinutes(),a=""+r;10>r&&(a="0"+a);var i=""+n;return 10>n&&(i="0"+n),a+e+i},getDateDifference:function(t,e){return(e-t)/864e5},getSecondDifference:function(t,e){return parseInt((e-t)/1e3)},isToday:function(t){if(!t)return!1;var e=u();return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()?!0:!1},isTomorrow:function(t){if(!t)return!1;var e=u();return e.setDate(e.getDate()+1),t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()?!0:!1},isTomorrowTomorrow:function(t){if(!t)return!1;var e=u();return e.setDate(e.getDate()+2),t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()?!0:!1},getDateByDateAndTimeString:function(t,e){if(t&&e){var r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),i=parseInt(e.substr(0,2),10),o=parseInt(e.substr(3,2),10),s=parseInt(e.substr(6,2),10);return new Date(r,n-1,a,i,o,s)}return void 0},getDateByDate8AndTime6String:function(t,e){if(t&&e){var r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),i=parseInt(e.substr(0,2),10),o=parseInt(e.substr(2,2),10),s=parseInt(e.substr(4,2),10);return new Date(r,n-1,a,i,o,s)}return void 0},getDateByDateString:function(t){var e=parseInt(t.substring(0,4),10),r=parseInt(t.substring(5,7),10),n=parseInt(t.substring(8,10),10),a=parseInt(t.substring(11,13),10),i=parseInt(t.substring(14,16),10),o=parseInt(t.substring(17,19),10);return new Date(e,r-1,n,a,i,o)},getDateDiffToday:function(t){var e=u();return e.setDate(e.getDate()+t),e},getDateDiffMonth:function(t){var e=u();return e.setMonth(e.getMonth()+t),e},isCurrentTimeValid:function(t,e){var r=u();return r>t&&e>r?!0:!1},isCurrentDateValid:function(t,e){var r=u(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);return r>n&&a>r?!0:!1},isInWorkTime:function(t,e){var r=[t,e],n=new u,a=60*parseInt(n.getHours(),10)+parseInt(n.getMinutes(),10),i=r[0].split(":"),o=r[1].split(":"),s=60*parseInt(i[0],10)+parseInt(i[1],10),g=60*parseInt(o[0],10)+parseInt(o[1],10);return a>=s&&g>=a?!0:!1},getNextWorkDay:function(t,e){var r;r=e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):u();for(var n=0;t>n;){r.setDate(r.getDate()+1);for(var a=!1,i=0;i<gHolidayDateList.length;++i)r>=gHolidayDateList[i].start&&r<=gHolidayDateList[i].end&&(a=!0);a||6!=r.getDay()&&0!=r.getDay()&&n++}return r},getBeforeWorkDay:function(t,e){var r;r=e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):u();for(var n=0;t>n;){r.setDate(r.getDate()-1);for(var a=!1,i=0;i<gHolidayDateList.length;++i)r>=gHolidayDateList[i].start&&r<=gHolidayDateList[i].end&&(a=!0);a||6!=r.getDay()&&0!=r.getDay()&&n++}return r},isWorkDay:function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(6==e.getDay()||0==e.getDay())return!1;for(var r=!0,n=0;n<gHolidayDateList.length;++n)e>=gHolidayDateList[n].start&&e<=gHolidayDateList[n].end&&(r=!1);return r},isHoliDay:function(t){for(var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=!1,n=0;n<gHolidayDateList.length;++n)e>=gHolidayDateList[n].start&&e<=gHolidayDateList[n].end&&(r=!0);return r},getAmountForRule:function(t,e,r){if(void 0===e&&(e=0),(void 0===r||0===r)&&(r=1),e>t)return 0;var n=parseInt((1e4*parseFloat(t).toFixed(4)).toFixed(0)),a=parseInt((1e4*parseFloat(e).toFixed(4)).toFixed(0)),i=parseInt((1e4*parseFloat(r).toFixed(4)).toFixed(0)),o=(n-a)%i;return 0==o?parseFloat(n)/1e4:parseFloat(n-o)/1e4},asyncLoop:function(t,e,r){var n=0,a=!1,i={next:function(){a||(t>n?(n++,e(i)):(a=!0,r()))},iteration:function(){return n-1},"break":function(){a=!0,r()}};return i.next(),i},abridgeAccountNumber:function(t){return!t||t.length<4?t:"("+t.substr(t.length-4)+")"},goToErrorPage:function(t,e){tracelog("[dte] going to error page, current page: "+n.url()),tracelog("[dte] errMsg: "+t),tracelog("[dte] errCode: "+e);var r={};t||(t=STRING_TABLE.NETWORK_ERROR),e&&(t+="("+e+")"),r.errMsg=t,n.path("/error").search(r)},getWeekdayByDate:function(t){if(!t)return"";var e=t.getDay(),r="";switch(e){case 0:r="星期日";break;case 1:r="星期一";break;case 2:r="星期二";break;case 3:r="星期三";break;case 4:r="星期四";break;case 5:r="星期五";break;case 6:r="星期六"}return r},getTransactionStateByCode:function(e){return e?e==t.CGI_RET.CGI_PROCESSING||e==t.CGI_RET.CGI_PROCESSING_2?t.TRANS_STATE.PROCESS:e==t.CGI_RET.CGI_SUCCESS||e==t.CGI_RET.CGI_SUCCESS_2?t.TRANS_STATE.SUCCESS:t.TRANS_STATE.FAILURE:t.TRANS_STATE.FAILURE},convertCurrencyToChineseStyle:function(t){if(!t)return"";var e,r,n,a,i,o,s,u,g,l,f,c,h,d,p=99999999999.99,y="零",v="壹",D="贰",A="叁",b="肆",C="伍",m="陆",w="柒",I="捌",S="玖",F="拾",T="佰",M="仟",R="万",Y="亿",k="",E="元",x="角",B="分",_="";if(t=t.toString(),""==t)return"";if(null!=t.match(/[^,.\d]/))return"";if(null==t.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return"";if(t=t.replace(/,/g,""),t=t.replace(/^0+/,""),Number(t)>p)return"";if(a=t.split("."),a.length>1?(e=a[0],r=a[1],r=r.substr(0,2)):(e=a[0],r=""),i=new Array(y,v,D,A,b,C,m,w,I,S),o=new Array("",F,T,M),s=new Array("",R,Y),u=new Array(x,B),n="",Number(e)>0){for(g=0,l=0;l<e.length;l++)f=e.length-l-1,c=e.substr(l,1),h=f/4,d=f%4,"0"==c?g++:(g>0&&(n+=i[0]),g=0,n+=i[Number(c)]+o[d]),0==d&&4>g&&(n+=s[h],g=0);n+=E}if(""!=r)for(l=0;l<r.length;l++)c=r.substr(l,1),"0"!=c&&(n+=i[Number(c)]+u[l]);return""==n&&(n=y+E),""==r&&(n+=_),n=k+n},md5:function(t){function e(t,e){return t<<e|t>>>32-e}function r(t,e){var r,n,a,i,o;return a=2147483648&t,i=2147483648&e,r=1073741824&t,n=1073741824&e,o=(1073741823&t)+(1073741823&e),r&n?2147483648^o^a^i:r|n?1073741824&o?3221225472^o^a^i:1073741824^o^a^i:o^a^i}function n(t,e,r){return t&e|~t&r}function a(t,e,r){return t&r|e&~r}function i(t,e,r){return t^e^r}function o(t,e,r){return e^(t|~r)}function s(t,a,i,o,s,u,g){return t=r(t,r(r(n(a,i,o),s),g)),r(e(t,u),a)}function u(t,n,i,o,s,u,g){return t=r(t,r(r(a(n,i,o),s),g)),r(e(t,u),n)}function g(t,n,a,o,s,u,g){return t=r(t,r(r(i(n,a,o),s),g)),r(e(t,u),n)}function l(t,n,a,i,s,u,g){return t=r(t,r(r(o(n,a,i),s),g)),r(e(t,u),n)}function f(t){for(var e,r=t.length,n=r+8,a=(n-n%64)/64,i=16*(a+1),o=Array(i-1),s=0,u=0;r>u;)e=(u-u%4)/4,s=u%4*8,o[e]=o[e]|t.charCodeAt(u)<<s,u++;return e=(u-u%4)/4,s=u%4*8,o[e]=o[e]|128<<s,o[i-2]=r<<3,o[i-1]=r>>>29,o}function c(t){var e,r,n="",a="";for(r=0;3>=r;r++)e=t>>>8*r&255,a="0"+e.toString(16),n+=a.substr(a.length-2,2);return n}function h(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}var d,p,y,v,D,A,b,C,m,w=Array(),I=7,S=12,F=17,T=22,M=5,R=9,Y=14,k=20,E=4,x=11,B=16,_=23,L=6,N=10,O=15,P=21;for(t=h(t),w=f(t),A=1732584193,b=4023233417,C=2562383102,m=271733878,d=0;d<w.length;d+=16)p=A,y=b,v=C,D=m,A=s(A,b,C,m,w[d+0],I,3614090360),m=s(m,A,b,C,w[d+1],S,3905402710),C=s(C,m,A,b,w[d+2],F,606105819),b=s(b,C,m,A,w[d+3],T,3250441966),A=s(A,b,C,m,w[d+4],I,4118548399),m=s(m,A,b,C,w[d+5],S,1200080426),C=s(C,m,A,b,w[d+6],F,2821735955),b=s(b,C,m,A,w[d+7],T,4249261313),A=s(A,b,C,m,w[d+8],I,1770035416),m=s(m,A,b,C,w[d+9],S,2336552879),C=s(C,m,A,b,w[d+10],F,4294925233),b=s(b,C,m,A,w[d+11],T,2304563134),A=s(A,b,C,m,w[d+12],I,1804603682),m=s(m,A,b,C,w[d+13],S,4254626195),C=s(C,m,A,b,w[d+14],F,2792965006),b=s(b,C,m,A,w[d+15],T,1236535329),A=u(A,b,C,m,w[d+1],M,4129170786),m=u(m,A,b,C,w[d+6],R,3225465664),C=u(C,m,A,b,w[d+11],Y,643717713),b=u(b,C,m,A,w[d+0],k,3921069994),A=u(A,b,C,m,w[d+5],M,3593408605),m=u(m,A,b,C,w[d+10],R,38016083),C=u(C,m,A,b,w[d+15],Y,3634488961),b=u(b,C,m,A,w[d+4],k,3889429448),A=u(A,b,C,m,w[d+9],M,568446438),m=u(m,A,b,C,w[d+14],R,3275163606),C=u(C,m,A,b,w[d+3],Y,4107603335),b=u(b,C,m,A,w[d+8],k,1163531501),A=u(A,b,C,m,w[d+13],M,2850285829),m=u(m,A,b,C,w[d+2],R,4243563512),C=u(C,m,A,b,w[d+7],Y,1735328473),b=u(b,C,m,A,w[d+12],k,2368359562),A=g(A,b,C,m,w[d+5],E,4294588738),m=g(m,A,b,C,w[d+8],x,2272392833),C=g(C,m,A,b,w[d+11],B,1839030562),b=g(b,C,m,A,w[d+14],_,4259657740),A=g(A,b,C,m,w[d+1],E,2763975236),m=g(m,A,b,C,w[d+4],x,1272893353),C=g(C,m,A,b,w[d+7],B,4139469664),b=g(b,C,m,A,w[d+10],_,3200236656),A=g(A,b,C,m,w[d+13],E,681279174),m=g(m,A,b,C,w[d+0],x,3936430074),C=g(C,m,A,b,w[d+3],B,3572445317),b=g(b,C,m,A,w[d+6],_,76029189),A=g(A,b,C,m,w[d+9],E,3654602809),m=g(m,A,b,C,w[d+12],x,3873151461),C=g(C,m,A,b,w[d+15],B,530742520),b=g(b,C,m,A,w[d+2],_,3299628645),A=l(A,b,C,m,w[d+0],L,4096336452),m=l(m,A,b,C,w[d+7],N,1126891415),C=l(C,m,A,b,w[d+14],O,2878612391),b=l(b,C,m,A,w[d+5],P,4237533241),A=l(A,b,C,m,w[d+12],L,1700485571),m=l(m,A,b,C,w[d+3],N,2399980690),C=l(C,m,A,b,w[d+10],O,4293915773),b=l(b,C,m,A,w[d+1],P,2240044497),A=l(A,b,C,m,w[d+8],L,1873313359),m=l(m,A,b,C,w[d+15],N,4264355552),C=l(C,m,A,b,w[d+6],O,2734768916),b=l(b,C,m,A,w[d+13],P,1309151649),A=l(A,b,C,m,w[d+4],L,4149444226),m=l(m,A,b,C,w[d+11],N,3174756917),C=l(C,m,A,b,w[d+2],O,718787259),b=l(b,C,m,A,w[d+9],P,3951481745),A=r(A,p),b=r(b,y),C=r(C,v),m=r(m,D);return(c(A)+c(b)+c(C)+c(m)).toLowerCase()},des:function(t,e){function r(t,e,r,a,i,o){var s,u,g,l,f,c,h,d,p,y,v,D,A,b,C=new Array(16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756),m=new Array(-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344),w=new Array(520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584),I=new Array(8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928),S=new Array(256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080),F=new Array(536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312),T=new Array(2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154),M=new Array(268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696),R=n(t),Y=0,k=e.length,E=0,x=32==R.length?3:9;for(d=3==x?r?new Array(0,32,2):new Array(30,-2,-2):r?new Array(0,32,2,62,30,-2,64,96,2):new Array(94,62,-2,32,64,2,30,-2,-2),2==o?e+="        ":1==o?(g=8-k%8,e+=String.fromCharCode(g,g,g,g,g,g,g,g),8==g&&(k+=8)):o||(e+="\x00\x00\x00\x00\x00\x00\x00\x00"),result="",tempresult="",1==a&&(p=i.charCodeAt(Y++)<<24|i.charCodeAt(Y++)<<16|i.charCodeAt(Y++)<<8|i.charCodeAt(Y++),v=i.charCodeAt(Y++)<<24|i.charCodeAt(Y++)<<16|i.charCodeAt(Y++)<<8|i.charCodeAt(Y++),Y=0);k>Y;){for(c=e.charCodeAt(Y++)<<24|e.charCodeAt(Y++)<<16|e.charCodeAt(Y++)<<8|e.charCodeAt(Y++),h=e.charCodeAt(Y++)<<24|e.charCodeAt(Y++)<<16|e.charCodeAt(Y++)<<8|e.charCodeAt(Y++),1==a&&(r?(c^=p,h^=v):(y=p,D=v,p=c,v=h)),g=252645135&(c>>>4^h),h^=g,c^=g<<4,g=65535&(c>>>16^h),h^=g,c^=g<<16,g=858993459&(h>>>2^c),c^=g,h^=g<<2,g=16711935&(h>>>8^c),c^=g,h^=g<<8,g=1431655765&(c>>>1^h),h^=g,c^=g<<1,c=c<<1|c>>>31,h=h<<1|h>>>31,u=0;x>u;u+=3){for(A=d[u+1],b=d[u+2],s=d[u];s!=A;s+=b)l=h^R[s],f=(h>>>4|h<<28)^R[s+1],g=c,c=h,h=g^(m[l>>>24&63]|I[l>>>16&63]|F[l>>>8&63]|M[63&l]|C[f>>>24&63]|w[f>>>16&63]|S[f>>>8&63]|T[63&f]);g=c,c=h,h=g}c=c>>>1|c<<31,h=h>>>1|h<<31,g=1431655765&(c>>>1^h),h^=g,c^=g<<1,g=16711935&(h>>>8^c),c^=g,h^=g<<8,g=858993459&(h>>>2^c),c^=g,h^=g<<2,g=65535&(c>>>16^h),h^=g,c^=g<<16,g=252645135&(c>>>4^h),h^=g,c^=g<<4,1==a&&(r?(p=c,v=h):(c^=y,h^=D)),tempresult+=String.fromCharCode(c>>>24,c>>>16&255,c>>>8&255,255&c,h>>>24,h>>>16&255,h>>>8&255,255&h),E+=8,512==E&&(result+=tempresult,tempresult="",E=0)}return result+tempresult}function n(t){pc2bytes0=new Array(0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964),pc2bytes1=new Array(0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697),pc2bytes2=new Array(0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272),pc2bytes3=new Array(0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144),pc2bytes4=new Array(0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256),pc2bytes5=new Array(0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488),pc2bytes6=new Array(0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746),pc2bytes7=new Array(0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568),pc2bytes8=new Array(0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578),pc2bytes9=new Array(0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488),pc2bytes10=new Array(0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800),pc2bytes11=new Array(0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744),pc2bytes12=new Array(0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128),pc2bytes13=new Array(0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261);for(var e,r,n,a=t.length>8?3:1,i=new Array(32*a),o=new Array(0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0),s=0,u=0,g=0;a>g;g++){left=t.charCodeAt(s++)<<24|t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++),right=t.charCodeAt(s++)<<24|t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++),n=252645135&(left>>>4^right),right^=n,left^=n<<4,n=65535&(right>>>-16^left),left^=n,right^=n<<-16,n=858993459&(left>>>2^right),right^=n,left^=n<<2,n=65535&(right>>>-16^left),left^=n,right^=n<<-16,n=1431655765&(left>>>1^right),right^=n,left^=n<<1,n=16711935&(right>>>8^left),left^=n,right^=n<<8,n=1431655765&(left>>>1^right),right^=n,left^=n<<1,n=left<<8|right>>>20&240,left=right<<24|right<<8&16711680|right>>>8&65280|right>>>24&240,right=n;for(var l=0;l<o.length;l++)o[l]?(left=left<<2|left>>>26,right=right<<2|right>>>26):(left=left<<1|left>>>27,right=right<<1|right>>>27),left&=-15,right&=-15,e=pc2bytes0[left>>>28]|pc2bytes1[left>>>24&15]|pc2bytes2[left>>>20&15]|pc2bytes3[left>>>16&15]|pc2bytes4[left>>>12&15]|pc2bytes5[left>>>8&15]|pc2bytes6[left>>>4&15],r=pc2bytes7[right>>>28]|pc2bytes8[right>>>24&15]|pc2bytes9[right>>>20&15]|pc2bytes10[right>>>16&15]|pc2bytes11[right>>>12&15]|pc2bytes12[right>>>8&15]|pc2bytes13[right>>>4&15],n=65535&(r>>>16^e),i[u++]=e^n,i[u++]=r^n<<16}return i}function a(t){for(var e="0x",r=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),n=0;n<t.length;n++)e+=r[t.charCodeAt(n)>>4]+r[15&t.charCodeAt(n)];return e}return a(r(e,t,1,0))},loadImage:function(t,e){var r=new Image;r.onload=function(){e(!0,t)},r.onerror=function(){e(!1,t)},r.src=t},getDate:function(){return u()},checkAbility:function(t){return APP_ABILITY&&APP_ABILITY.indexOf(t)>=0},arrayUnique:function(t){var e={},r=[];for(var n in t)e[t[n]]||(e[t[n]]=!0,r.push(t[n]));return r},setCalendarClock:function(t,e){var r=this,n=function(t){a(function(){e(t)})},i=t.startDate,o=new Date(i.getTime()+6e5),s=t.remainBefore||5,u=t.title||"微众银行理财产品开抢啦！",g="",l=t.note||"",f=function(t){"0"==t?n({result:-1,msg:"设置失败"}):r.queryCalendarClock({note:l},function(t){t&&2==t.result?n({result:2,msg:"真的设置成功了"}):!t||-1!=t.result&&1!=t.result||n({result:-2,msg:t.msg})})},c=function(t){n({result:-1,msg:t})},h=window.plugins||window.plugins.calendar||window.plugins.calendar.getCalendarOptions||window.plugins.calendar.getCalendarOptions();h?(h.firstReminderMinutes=s,h.recurrence="daily",h.recurrenceEndDate=new Date(i.getTime()+828e5),h.calendarId=1,window.plugins.calendar.createEventWithOptions(u,g,l,i,o,h,f,c)):n({result:-1,msg:"取事件失败"})},queryCalendarClock:function(t,e){var r=new Date(this.getDate().getTime()-864e5),n=this.getDateDiffMonth(12),i=t.note,o=function(t){a(function(){e(t)})};window.plugins.calendar.findEvent(t.title||null,null,i,r,n,function(t){var e=[];if(t&&t.length)for(var r=0;r<t.length;r++)t[r].message==i&&e.push(t[r]);o(e.length>0?{result:2,msg:"查询到匹配闹钟",data:t}:{result:1,mag:"未查询到匹配闹钟"})},function(t){var e="";t&&(e=JSON.stringify(t)),o({result:-1,msg:"异常:"+e})})},getFeeRateInString:function(t){var e=[];try{var r=t.split(/;|；/);if(r.length>0)for(var n=0;n<r.length;n++){var a=r[n].split(/:|：/);a.length>0&&e.push({amount:a[0],rate:a[1],ifDiscount:a[2]||!1})}}catch(i){e=[]}finally{return e}},getFeeRateByAmount:function(t,e,r,n){var a=n+"%",i=!0;if(void 0!=t){var o=this.getFeeRateInString(t);if(o.length>0){for(var s=0;s<o.length&&!(1*e<1*o[s].amount);s++);s>o.length-1&&(s=o.length-1),a=o[s].rate,i=o[s].ifDiscount}else a=0}if(a=a||"",a.indexOf("%")>-1){var u=parseFloat(a.split("%")[0]).toFixed(2),g=i?(u*parseFloat(r||0)).toFixed(2):u;return{isPercent:!0,feeRate:u,realFeeRate:g}}return{isPercent:!1,coast:parseFloat(a).toFixed(2),realCoast:i?(parseFloat(a)*parseFloat(r||0)).toFixed(2):parseFloat(a).toFixed(2)}},getCoastByAmount:function(t,e,r,n){var a=this.getFeeRateByAmount(t,e,r,n);return a.isPercent?{realCoast:(parseFloat(e)*parseFloat(a.realFeeRate)/(100+parseFloat(a.realFeeRate))).toFixed(2),coast:(parseFloat(e)*parseFloat(a.feeRate)/(100+parseFloat(a.feeRate))).toFixed(2)}:{realCoast:a.realCoast,coast:a.coast}},base64encode:function(t){var e,r,n,a,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=t.length,r=0,e="";n>r;){if(a=255&t.charCodeAt(r++),r==n){e+=s.charAt(a>>2),e+=s.charAt((3&a)<<4),e+="==";break}if(i=t.charCodeAt(r++),r==n){e+=s.charAt(a>>2),e+=s.charAt((3&a)<<4|(240&i)>>4),e+=s.charAt((15&i)<<2),e+="=";break}o=t.charCodeAt(r++),e+=s.charAt(a>>2),e+=s.charAt((3&a)<<4|(240&i)>>4),e+=s.charAt((15&i)<<2|(192&o)>>6),e+=s.charAt(63&o)}return e},base64decode:function(t){var e,r,n,a,i,o,s,u=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(o=t.length,i=0,s="";o>i;){do e=u[255&t.charCodeAt(i++)];while(o>i&&-1==e);if(-1==e)break;do r=u[255&t.charCodeAt(i++)];while(o>i&&-1==r);if(-1==r)break;s+=String.fromCharCode(e<<2|(48&r)>>4);do{if(n=255&t.charCodeAt(i++),61==n)return s;n=u[n]}while(o>i&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(a=255&t.charCodeAt(i++),61==a)return s;a=u[a]}while(o>i&&-1==a);if(-1==a)break;s+=String.fromCharCode((3&n)<<6|a)}return s},clone:function(t){var e;if("object"==typeof t)if(null===t)e=null;else if(t instanceof Array){e=[];for(var r=0,n=t.length;n>r;r++)e.push(this.clone(t[r]))}else{e={};for(var a in t)e[a]=this.clone(t[a])}else e=t;return e},parseUrl:function(t){if(!t)return null;var e=document.createElement("a");e.href=t;var r={protocol:e.protocol,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,hash:e.hash,host:e.host};return r},formatMoneyString:function(t){var e=parseFloat(t).toFixed(2),r=e.split(".");e=r[0];for(var n=e.split("").reverse(),a="",i=0;i<n.length;i++)a+=n[i]+((i+1)%3==0&&i+1!=n.length?",":"");return a.split("").reverse().join("")+"."+r[1]},getParamFromURL:function(t,e){var r="",n=[];if(t.indexOf("?")>=0)for(var a=t.split("?")[1].split("&"),i=0;i<a.length;i++)if(n=a[i].split("="),n[0]===e){r=decodeURIComponent(n[1]);break}return r},appendParamsToURL:function(t,e){var r=[];for(var n in e)r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));var a=r.join("&");return t+=t.indexOf("?")<0?"?":"&",t+a},clearCurrentViewCache:function(){var t=o.currentView();
a(function(){o.clearCache([t.stateId])},600)},resetHistory:function(t){t||o.clearHistory()},getStrLength:function(t){for(var e=0,r=t.length,n=-1,a=0;r>a;a++)n=t.charCodeAt(a),e+=n>=0&&128>=n?1:2;return e},sTrim:function(t){return t?t.replace(/\s+/g,""):void 0},isEmptyObject:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}}}]);app.factory("envService",["$q","GLOBAL_CONSTANT","$location","$rootScope","utils",function(E,I,N,_,R){var P={QQ_APPID:I.ENVIROMENT.QQ_APPID.PROD,WX_APPID:I.ENVIROMENT.WX_APPID.PROD,CGI_PREFIX:I.ENVIROMENT.CGI_PREFIX.PROD,CGI_PREFIX_OP:I.ENVIROMENT.CGI_PREFIX_OP.PROD,CGI_PREFIX_S:I.ENVIROMENT.CGI_PREFIX_S.PROD,TENCENT_CGI_PREFIX:I.ENVIROMENT.TENCENT_CGI_PREFIX.PROD,TENCENT_CGI_PREFIX2:I.ENVIROMENT.TENCENT_CGI_PREFIX2.PROD,ENV_NAME:I.ENVIROMENT.ENV_NAME.PROD,SDK_PREFIX:I.ENVIROMENT.SDK_PREFIX.PROD,DATA_CGI_PREFIX:I.ENVIROMENT.DATA_CGI_PREFIX.PROD,BBS_URL_PREFIX:I.ENVIROMENT.BBS_URL_PREFIX.PROD,DATA_NOTICE:I.ENVIROMENT.DATA_NOTICE.PROD,PDF_VIEW:I.ENVIROMENT.PDF_VIEW.PROD,WEBANK_CDN:I.ENVIROMENT.WEBANK_CDN.PROD};return{setEnv:function(T){return P.ENV_NAME=T,P.QQ_APPID=I.ENVIROMENT.QQ_APPID[T],P.WX_APPID=I.ENVIROMENT.WX_APPID[T],P.CGI_PREFIX=I.ENVIROMENT.CGI_PREFIX[T],P.CGI_PREFIX_OP=I.ENVIROMENT.CGI_PREFIX_OP[T],P.CGI_PREFIX_S=I.ENVIROMENT.CGI_PREFIX_S[T],P.TENCENT_CGI_PREFIX=I.ENVIROMENT.TENCENT_CGI_PREFIX[T],P.TENCENT_CGI_PREFIX2=I.ENVIROMENT.TENCENT_CGI_PREFIX2[T],P.DATA_CGI_PREFIX=I.ENVIROMENT.DATA_CGI_PREFIX[T],P.SDK_PREFIX=I.ENVIROMENT.SDK_PREFIX[T],P.BBS_URL_PREFIX=I.ENVIROMENT.BBS_URL_PREFIX[T],P.DATA_NOTICE=I.ENVIROMENT.DATA_NOTICE[T],P.PDF_VIEW=I.ENVIROMENT.PDF_VIEW[T],P.WEBANK_CDN=I.ENVIROMENT.WEBANK_CDN[T],E(function(){var E={CmdID:"setEnv"};E.EnvName=P.ENV_NAME,E.EvnURL=P.SDK_PREFIX,CommandChannel.execute(E,function(){_.$apply(function(){N.path("/forEnv").replace()})},function(){R.makeToast("设置环境变量失败")})})},getEnvVariable:function(){return P}}}]);app.factory("cache",["$q","GLOBAL_CONSTANT","localStorageService","GLOBAL_CONSTANT",function(t,e,n,e){var o={},c={},r={};return{clear:function(){c={}},getUserStatus:function(){return o.userStatus},setUserStatus:function(t){o.userStatus=t,t==e.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&n.set("hasReg","true")},getUserInfo:function(){return o.userInfo},setUserInfo:function(t){tracelog("[dte] setUserInfo: "+JSON.stringify(t)),o.userInfo=t},getDeviceInfo:function(){return o.deviceInfo},setDeviceInfo:function(t){o.deviceInfo=t},getCacheInfo:function(t){return c[t]},setCacheInfo:function(t,e){c[t]=e},setCacheTime:function(t,e){r[t]=e},getCacheTime:function(t){return r[t]?r[t]:0},setTopicDataInfo:function(t){o.topicData=JSON.stringify(t)},getTopicDataInfo:function(){return null==o.topicData?null:JSON.parse(o.topicData)}}}]);app.factory("WebService",["$http","$q","envService","GLOBAL_CONSTANT","cache","utils","$location","$window","CGIStatisticService",function(e,t,a,r,i,_,o,n,s){return{get:function(d,E,T,c){return t(function(t,g){tracelog("[dte] 请求后台："+d),tracelog(d+": "+JSON.stringify(E));var C=a.getEnvVariable().CGI_PREFIX+d;c&&a.getEnvVariable()[c]&&(C=a.getEnvVariable()[c]+d);var I=i.getDeviceInfo(),p=i.getUserInfo(),S={};S.app_ver_code=I.versionCode,S.app_ver=I.versionString,S.terminal_type=I.terminal_type,S.os_ver=I.os_ver,S.h5_ver=H5_Ver,S.net_type="",S.imei=I.uuid,S.mid=I.mid,S.machine_info=I.machine_info,S.uid_type=p.platform,S.uid=p.openid,S.session=p.token,S.session_type="token",S.wx_union_id=p.unionid,S.channel_id=I.channelID||"",p.openid||(tracelog("[dte] 请求参数缺失，"+JSON.stringify(p)),_.makeDebugToast("请求参数缺失，请联系开发")),r.LOGIN_PLAT.QQ===S.uid_type?S.appid=a.getEnvVariable().QQ_APPID:r.LOGIN_PLAT.WX===S.uid_type?S.appid=a.getEnvVariable().WX_APPID:r.LOGIN_PLAT.PHONE===S.uid_type&&(S.appid=a.getEnvVariable().QQ_APPID),E&&(S.param=JSON.stringify(E));var u={};u.cgiName=d,u.timeConsuming=_.getDate().getTime(),u.cgiParams=S,e.get(C,{params:S,timeout:r.HTTP_TIMEOUT}).then(function(e){tracelog(d+": "+JSON.stringify(e)),u.timeConsuming=_.getDate().getTime()-u.timeConsuming,u.retCode=e.data.ret_code,u.status=0,u.resultType=r.STAT_CONST.SUCCESS_RESULT_TYPE,u.retData=e;var a=e.data;return a.ret_code!==r.CGI_RET.CGI_SUCCESS&&a.ret_code!==r.CGI_RET.CGI_SUCCESS_2&&a.ret_code!==r.CGI_RET.CGI_SUCCESS_OP&&a.ret_code!==r.CGI_RET.CGI_PROCESSING&&a.ret_code!==r.CGI_RET.CGI_COMBINED_BUY?(u.status=-2,u.resultType=r.STAT_CONST.LOGIC_FAILURE_RESULT_TYPE,u.retCode=e.data.ret_code,s.reportCGIInfo(u),g(a)):(s.reportCGIInfo(u),n.lastExchangeTokenTime=_.getDate().getTime(),i.setCacheInfo(T,a.ret_data,_.getDate().getTime()),t(a))},function(e){if(tracelog(d+": "+JSON.stringify(e)),tracelog("[dte] WebService: "+JSON.stringify(e)),u.timeConsuming=_.getDate().getTime()-u.timeConsuming,u.retData=e,e.data&&e.data.ret_code&&e.data.ret_msg){if(e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED||e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED_2||e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED_3||e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED_4){if(_.isCGITokenExpiredIgnored(d))return tracelog("忽略登录态过期:"+d),void g("登录态过期");tracelog("[dte] webank登录态过期:"+d);var t={};t.cgiName=d,t.errorCode=e.data.ret_code,t.errorDetail=e.data.token_status,Statistics.reportEvent("wbTokenExpired",t),_.makeToast(e.data.ret_msg),g("登录态过期"),o.path("/login/noBack")}else g(e.data);u.status=-2,u.resultType=r.STAT_CONST.FAILURE_RESULT_TYPE,u.retCode=e.data.ret_code}else{var t={};if(t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,g(t),u.status=-2,u.resultType=r.STAT_CONST.FAILURE_RESULT_TYPE,u.retCode=e.status,0==e.status){var t={};t.cgiName=d,Statistics.reportEvent("wbLocalNetworkError",t)}else if(401==e.status){tracelog("webank登录态过期 401"+d);var t={};t.cgiName=d,Statistics.reportEvent("wbTokenExpired_401",t)}}s.reportCGIInfo(u)})})},post:function(d,E,T){return t(function(t,c){tracelog("请求后台："+d),tracelog(d+": "+JSON.stringify(E)),tracelog(JSON.stringify(E));var g=a.getEnvVariable().CGI_PREFIX+d;T&&a.getEnvVariable()[T]&&(g=a.getEnvVariable()[T]+d);var C=i.getDeviceInfo(),I=i.getUserInfo(),p={};p.app_ver_code=C.versionCode,p.app_ver=C.versionString,p.terminal_type=C.terminal_type,p.os_ver=C.os_ver,p.h5_ver=H5_Ver,p.net_type="",p.imei=C.uuid,p.mid=C.mid,p.machine_info=C.machine_info,p.uid_type=I.platform,p.uid=I.openid,p.session=I.token,p.session_type="token",p.wx_union_id=I.unionid,p.channel_id=C.channelID||"",I.openid||(tracelog("[dte] 请求参数缺失，"+JSON.stringify(I)),_.makeDebugToast("请求参数缺失，请联系开发")),r.LOGIN_PLAT.QQ===p.uid_type?p.appid=a.getEnvVariable().QQ_APPID:r.LOGIN_PLAT.WX===p.uid_type?p.appid=a.getEnvVariable().WX_APPID:r.LOGIN_PLAT.PHONE===p.uid_type&&(p.appid=a.getEnvVariable().QQ_APPID);var S={};S.cgiName=d,S.timeConsuming=_.getDate().getTime(),S.userParams=E,S.cgiParams=p,e.post(g,E,{params:p,timeout:r.HTTP_TIMEOUT}).then(function(e){tracelog(d+": "+JSON.stringify(e)),S.timeConsuming=_.getDate().getTime()-S.timeConsuming,S.retCode=e.data.ret_code,S.status=0,S.resultType=r.STAT_CONST.SUCCESS_RESULT_TYPE,S.retData=e;var a=e.data;return a.ret_code!==r.CGI_RET.CGI_SUCCESS&&a.ret_code!==r.CGI_RET.CGI_SUCCESS_2&&a.ret_code!==r.CGI_RET.CGI_SUCCESS_OP&&a.ret_code!==r.CGI_RET.CGI_PROCESSING&&a.ret_code!==r.CGI_RET.CGI_COMBINED_BUY?(S.status=-2,S.resultType=r.STAT_CONST.LOGIC_FAILURE_RESULT_TYPE,S.retCode=e.data.ret_code,s.reportCGIInfo(S),c(a)):(n.lastExchangeTokenTime=_.getDate().getTime(),s.reportCGIInfo(S),t(a))},function(e){if(tracelog("[dte] WebService: "+JSON.stringify(e)),S.timeConsuming=_.getDate().getTime()-S.timeConsuming,S.retData=e,e.data&&e.data.ret_code&&e.data.ret_msg){if(e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED||e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED_2||e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED_3||e.data.ret_code==r.CGI_RET.CGI_WEBANK_TOKEN_EXPIRED_4){if(_.isCGITokenExpiredIgnored(d))return tracelog("忽略登录态过期:"+d),void c("登录态过期");tracelog("webank登录态过期"+d);var t={};t.cgiName=d,t.errorCode=e.data.ret_code,Statistics.reportEvent("wbTokenExpired",t),_.makeToast(e.data.ret_msg),c("登录态过期"),o.path("/login/noBack")}else c(e.data);S.status=-2,S.resultType=r.STAT_CONST.FAILURE_RESULT_TYPE,S.retCode=e.data.ret_code}else{var t={};if(t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,c(t),S.status=-2,S.resultType=r.STAT_CONST.FAILURE_RESULT_TYPE,S.retCode=e.status,0==e.status){var t={};t.cgiName=d,Statistics.reportEvent("wbLocalNetworkError",t)}else if(401==e.status){tracelog("webank登录态过期 401"+d);var t={};t.cgiName=d,Statistics.reportEvent("wbTokenExpired_401",t)}}s.reportCGIInfo(S)})})}}}]);app.factory("TencentWebService",["$http","$q","envService","GLOBAL_CONSTANT","cache","utils","$location",function(e,t,i,_,a,r){return{get:function(n,o,s){return t(function(t,T){tracelog("请求后台："+n);var d=i.getEnvVariable().TENCENT_CGI_PREFIX+n,C=a.getDeviceInfo(),u=a.getUserInfo(),c={};c.app_ver_code=C.versionCode,c.app_ver=C.versionString,c.terminal_type=C.terminal_type,c.os_ver=C.os_ver,c.h5_ver=H5_Ver,c.net_type="",c.imei=C.uuid,c.mid=C.mid,c.machine_info=C.machine_info,c.channel_id=C.channelID||"",u&&(c.uid_type=u.platform,c.uid=u.openid,c.session=u.token,c.session_type="token",c.wx_union_id=u.unionid),_.LOGIN_PLAT.QQ===c.uid_type?c.appid=i.getEnvVariable().QQ_APPID:_.LOGIN_PLAT.WX===c.uid_type?c.appid=i.getEnvVariable().WX_APPID:_.LOGIN_PLAT.PHONE===c.uid_type&&(c.appid=i.getEnvVariable().QQ_APPID),o&&(c.param=JSON.stringify(o));var p={};p.cgiName=n,p.timeConsuming=r.getDate().getTime(),e.get(d,{params:c,timeout:_.HTTP_TIMEOUT}).then(function(e){p.timeConsuming=r.getDate().getTime()-p.timeConsuming,p.retCode=e.data.ret_code,p.status=0,p.resultType=_.STAT_CONST.SUCCESS_RESULT_TYPE;var i=e.data;return i.ret_code!==_.CGI_RET.CGI_SUCCESS&&i.ret_code!==_.CGI_RET.CGI_SUCCESS_2&&i.ret_code!==_.CGI_RET.CGI_PROCESSING&&i.ret_code!==_.CGI_RET.CGI_COMBINED_BUY?(p.status=-2,p.resultType=_.STAT_CONST.LOGIC_FAILURE_RESULT_TYPE,p.retCode=e.data.ret_code,Statistics.reportInterface(p),T(i)):(Statistics.reportInterface(p),a.setCacheInfo(s,i.ret_data),t(i))},function(e){if(p.timeConsuming=r.getDate().getTime()-p.timeConsuming,e.data&&e.data.ret_code&&e.data.ret_msg)T(e.data),p.status=-2,p.resultType=_.STAT_CONST.FAILURE_RESULT_TYPE,p.retCode=e.data.ret_code;else{var t={};t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,T(t),p.status=-2,p.resultType=_.STAT_CONST.FAILURE_RESULT_TYPE,p.retCode=e.status}Statistics.reportInterface(p)})})},post:function(n,o){return t(function(t,s){tracelog("请求后台："+n);var T=i.getEnvVariable().TENCENT_CGI_PREFIX+n,d=a.getDeviceInfo(),C=a.getUserInfo(),u={};u.app_ver_code=d.versionCode,u.app_ver=d.versionString,u.terminal_type=d.terminal_type,u.os_ver=d.os_ver,u.h5_ver=H5_Ver,u.net_type="",u.imei=d.uuid,u.mid=d.mid,u.machine_info=d.machine_info,u.channel_id=d.channelID||"",C&&(u.uid_type=C.platform,u.uid=C.openid,u.session=C.token,u.session_type="token",u.wx_union_id=C.unionid),_.LOGIN_PLAT.QQ===u.uid_type?u.appid=i.getEnvVariable().QQ_APPID:_.LOGIN_PLAT.WX===u.uid_type?u.appid=i.getEnvVariable().WX_APPID:_.LOGIN_PLAT.PHONE===u.uid_type&&(u.appid=i.getEnvVariable().QQ_APPID);var c={};c.cgiName=n,c.timeConsuming=r.getDate().getTime(),e.post(T,o,{params:u,timeout:_.HTTP_TIMEOUT}).then(function(e){c.timeConsuming=r.getDate().getTime()-c.timeConsuming,c.retCode=e.data.ret_code,c.status=0,c.resultType=_.STAT_CONST.SUCCESS_RESULT_TYPE;var i=e.data;return i.ret_code!==_.CGI_RET.CGI_SUCCESS&&i.ret_code!==_.CGI_RET.CGI_SUCCESS_2&&i.ret_code!==_.CGI_RET.CGI_PROCESSING&&i.ret_code!==_.CGI_RET.CGI_COMBINED_BUY?(c.status=-2,c.resultType=_.STAT_CONST.LOGIC_FAILURE_RESULT_TYPE,c.retCode=e.data.ret_code,Statistics.reportInterface(c),s(i)):(Statistics.reportInterface(c),t(i))},function(e){if(c.timeConsuming=r.getDate().getTime()-c.timeConsuming,e.data&&e.data.ret_code&&e.data.ret_msg)s(e.data),c.status=-2,c.resultType=_.STAT_CONST.FAILURE_RESULT_TYPE,c.retCode=e.data.ret_code;else{var t={};t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,s(t),c.status=-2,c.resultType=_.STAT_CONST.FAILURE_RESULT_TYPE,c.retCode=e.status}Statistics.reportInterface(c)})})}}}]);app.factory("TencentWebService2",["$http","$q","envService","GLOBAL_CONSTANT","cache","utils","$location","CGIStatisticService",function(e,t,a,n,r,_,i,o){return{get:function(i,s,T,d){return t(function(t,C){tracelog("请求后台："+i);var u=a.getEnvVariable().TENCENT_CGI_PREFIX2+i;d&&a.getEnvVariable()[d]&&(u=a.getEnvVariable()[d]+i);var I=r.getDeviceInfo(),p=r.getUserInfo(),c={};c.app_ver_code=I.versionCode,c.app_ver=I.versionString,c.terminal_type=I.terminal_type,c.os_ver=I.os_ver,c.h5_ver=H5_Ver,c.net_type="",c.imei=I.uuid,c.mid=I.mid,c.machine_info=I.machine_info,c.channel_id=I.channelID||"",p&&(c.uid_type=p.platform,c.uid=p.openid,c.session=p.token,c.session_type="token",c.wx_union_id=p.unionid),n.LOGIN_PLAT.QQ===c.uid_type?c.appid=a.getEnvVariable().QQ_APPID:n.LOGIN_PLAT.WX===c.uid_type?c.appid=a.getEnvVariable().WX_APPID:n.LOGIN_PLAT.PHONE===c.uid_type&&(c.appid=a.getEnvVariable().QQ_APPID),s&&(c.param=JSON.stringify(s));var E={};E.cgiName=i,E.timeConsuming=_.getDate().getTime(),E.cgiParams=c,e.get(u,{params:c}).then(function(e){E.timeConsuming=_.getDate().getTime()-E.timeConsuming,E.retCode=e.data.ret_code,E.status=0,E.resultType=n.STAT_CONST.SUCCESS_RESULT_TYPE,E.retData=e;var a=e.data;return a.ret_code!==n.CGI_RET.CGI_SUCCESS&&a.ret_code!==n.CGI_RET.CGI_SUCCESS_2&&a.ret_code!==n.CGI_RET.CGI_PROCESSING&&a.ret_code!==n.CGI_RET.CGI_COMBINED_BUY?(E.status=-2,E.resultType=n.STAT_CONST.LOGIC_FAILURE_RESULT_TYPE,E.retCode=e.data.ret_code,o.reportTencentCGIInfo(E),C(a)):(o.reportTencentCGIInfo(E),r.setCacheInfo(T,a.ret_data),t(a))},function(e){if(E.timeConsuming=_.getDate().getTime()-E.timeConsuming,E.retData=e,e.data&&e.data.ret_code&&e.data.ret_msg)C(e.data),E.status=-2,E.resultType=n.STAT_CONST.FAILURE_RESULT_TYPE,E.retCode=e.data.ret_code;else{var t={};t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,C(t),E.status=-2,E.resultType=n.STAT_CONST.FAILURE_RESULT_TYPE,E.retCode=e.status}o.reportTencentCGIInfo(E)})})},post:function(i,s,T){return t(function(t,d){tracelog("请求后台："+i);var C=a.getEnvVariable().TENCENT_CGI_PREFIX2+i;T&&a.getEnvVariable()[T]&&(C=a.getEnvVariable()[T]+i);var u=r.getDeviceInfo(),I=r.getUserInfo(),p={};p.app_ver_code=u.versionCode,p.app_ver=u.versionString,p.terminal_type=u.terminal_type,p.os_ver=u.os_ver,p.h5_ver=H5_Ver,p.net_type="",p.imei=u.uuid,p.mid=u.mid,p.machine_info=u.machine_info,p.channel_id=u.channelID||"",I&&(p.uid_type=I.platform,p.uid=I.openid,p.session=I.token,p.session_type="token",p.wx_union_id=I.unionid),n.LOGIN_PLAT.QQ===p.uid_type?p.appid=a.getEnvVariable().QQ_APPID:n.LOGIN_PLAT.WX===p.uid_type?p.appid=a.getEnvVariable().WX_APPID:n.LOGIN_PLAT.PHONE===p.uid_type&&(p.appid=a.getEnvVariable().QQ_APPID);var c={};c.cgiName=i,c.timeConsuming=_.getDate().getTime(),c.userParams=s,c.cgiParams=p,e.post(C,s,{params:p}).then(function(e){c.timeConsuming=_.getDate().getTime()-c.timeConsuming,c.retCode=e.data.ret_code,c.status=0,c.resultType=n.STAT_CONST.SUCCESS_RESULT_TYPE,c.retData=e;var a=e.data;return a.ret_code!==n.CGI_RET.CGI_SUCCESS&&a.ret_code!==n.CGI_RET.CGI_SUCCESS_2&&a.ret_code!==n.CGI_RET.CGI_PROCESSING&&a.ret_code!==n.CGI_RET.CGI_COMBINED_BUY?(c.status=-2,c.resultType=n.STAT_CONST.LOGIC_FAILURE_RESULT_TYPE,c.retCode=e.data.ret_code,o.reportTencentCGIInfo(c),d(a)):(o.reportTencentCGIInfo(c),t(a))},function(e){if(c.timeConsuming=_.getDate().getTime()-c.timeConsuming,c.retData=e,e.data&&e.data.ret_code&&e.data.ret_msg)d(e.data),c.status=-2,c.resultType=n.STAT_CONST.FAILURE_RESULT_TYPE,c.retCode=e.data.ret_code;else{var t={};t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,d(t),c.status=-2,c.resultType=n.STAT_CONST.FAILURE_RESULT_TYPE,c.retCode=e.status}o.reportTencentCGIInfo(c)})})}}}]);app.factory("session",["GLOBAL_CONSTANT",function(){var n={};return{saveSession:function(s,e){n[s]=e},restoreSession:function(s){return n[s]}}}]);app.factory("dataService",["$q","$http","$timeout","envService","$interval","utils","cgiService","GLOBAL_CONSTANT","cache","NoticeService",function(e,t,n,r,a,c,o,i,u,s){var f=!1,d=r.getEnvVariable().DATA_NOTICE,l=function(){P()},g={},_={},v=function(t){var r={};t.code&&(r.prod_code=t.code),t.showPlace&&(r.show_place=t.showPlace);var a=e.defer(),c=[];return c=s.getNoticeFromCache(r),n(function(){a.notify(c)}),s.getNoticeFromServer(r).then(function(e){e?a.resolve(e):a.reject()},function(){c||a.reject()}),a.promise},h=function(e){return e.key&&_[e.key]?(n.cancel(_[e.key]),_[e.key]=null,v(e)):v(e)},p=function(e){var t="";return e&&e.code&&(t=d+"detail-"+e.code+".json"),h(angular.extend({url:t,key:"productNotice"+e.code},e||{}))},y=function(t){var r=e.defer();return h(angular.extend({url:d+"common-special.json",key:"productBuy"},t||{})).then(function(e){if(t.code)if(e&&e.length>0){var n=[];if($.each(e,function(e,r){r.prod_code==t.code&&n.push(r)}),t.showPlace){var a=[];$.each(n,function(e,n){if(-1!=$.inArray(t.showPlace+="",n.show_place.split(",")))if(n.specl_notice_indate||n.specl_notice_offdate){var r=c.getDate();c.getDateByYYYYMMDDString(n.specl_notice_indate)<=r&&c.getDateByYYYYMMDDString(n.specl_notice_offdate)>=r&&a.push(n)}else a.push(n)}),r.resolve(a)}else r.resolve(n)}else r.reject("data is null");else r.resolve(e)},function(){r.reject()},function(e){e&&e.length>0&&n(function(){var t=[];$.each(e,function(e,n){if(n.specl_notice_indate||n.specl_notice_offdate){var r=c.getDate();c.getDateByYYYYMMDDString(n.specl_notice_indate)<=r&&c.getDateByYYYYMMDDString(n.specl_notice_offdate)>=r&&t.push(n)}else t.push(n)}),r.notify(t)})}),r.promise},S="",P=function(t){var r=e.defer(),a=function(){o.requestRedPacket().then(function(e){if(e&&e.ret_data&&e.ret_data.redPackets&&e.ret_data.redPackets.length>0){var t="";g[S]&&$.each(g[S],function(e,n){2==n.status&&n.selectId&&(t=n.selectId)});var n=!1;if(t)for(var a=0;a<e.ret_data.redPackets.length;a++)if(e.ret_data.redPackets[a].redPacketID==t){e.ret_data.redPackets[a].selected=!0,n=!0;break}if(!n)for(var a=0;a<e.ret_data.redPackets.length;a++)if(2==e.ret_data.redPackets[a].status){e.ret_data.redPackets[a].selected=!0;break}g[S]=e.ret_data.redPackets,r.resolve({status:u.getUserStatus(),data:g[S]})}else g[S]=null,r.reject(null)},function(){g[S]=null,r.reject(null)})};return u.getUserStatus()&&u.getUserStatus()>=i.ACCOUNT_STATE.USER_STATE_LOGIN&&u.getUserInfo()&&u.getUserInfo().openid?(S="redPacket"+u.getUserInfo().openid,(!t||t&&!t.update)&&g[S]?(n(function(){r.notify({status:u.getUserStatus(),data:g[S]})}),a()):a()):r.reject(null),r.promise};return f||(f=!0,l()),{getPorductAgreement:function(e){return y(angular.extend({showPlace:4},e||{}))},getProductNotice:function(e){return p(angular.extend({showPlace:1},e||{}))},getBuyNotice:function(e){return y(angular.extend({showPlace:3},e||{}))},getBuySign:function(e){return y(angular.extend({showPlace:5},e||{}))},getRedPacket:function(e){return P(e)},getPackageId:function(e){if(S&&g[S]){var t=null;$.each(g[S],function(e,n){n.selected&&(t=n)}),e(t)}else e()},clearPackageCache:function(){S&&g[S]&&(g[S]=null)},requestActivityConfig:function(e,t){var n=u.getUserStatus();if(n&&n>i.ACCOUNT_STATE.USER_STATE_LOGIN&&u.getUserInfo()&&u.getUserInfo().openid){var r="activity"+u.getUserInfo().openid;if(!e||e.length<=0)return;o.requestUserLimitInActiviy(e).then(function(e){if(e&&e.ret_data&&e.ret_data.length>0){var n={};$.each(e.ret_data,function(e,t){n[t.prod_code]=t}),g[r]=$.extend(g[r],n),"function"==typeof t&&t(n)}},function(){})}},getActivityConfig:function(e,t){var n=function(e){"function"==typeof t&&t(e)},r=u.getUserStatus();if(r&&r>i.ACCOUNT_STATE.USER_STATE_LOGIN&&u.getUserInfo()&&u.getUserInfo().openid){var a="activity"+u.getUserInfo().openid,c=function(){if(g[a]){var t=null;for(var r in g[a])r==e&&(t=g[a][r]);n(t)}};c(),this.requestActivityConfig([e],function(){c()})}}}}]);app.factory("BaseConfigService",["$q","$http","$timeout","$rootScope","localStorage","cgiService",function(t,a,n,i,o,e){var c=!1,g={bank_limit:"gBankLimitList",holidays:"gHolidayList",config_bank_batch:"bankBatchInfoList",gold_pickup_addr:"gGoldPickupAddr"},r=function(t){tracelog("尝试更新配置文件");var a=[],n=null;$.each(g,function(t,i){var e={};n=o.loadData("config_"+t);var e={name:t,sign:n&&n.sign||null};window[i]=n&&n.data||{},a.push(e)});var i={};i.productInfoList=a,e.requestConfigFile(i).then(function(a){tracelog("更新配置成功"),d(a.ret_data,t),c=!0},function(){tracelog("更新配置失败")}),!c&&gBankLimitList&&gHolidayList&&bankBatchInfoList&&gGoldPickupAddr&&(tracelog("使用cache数据解析配置"),getBankLimit(),getHolidayDate(),getBankBatchInfo(),parseGoldPickupAddr(),c=!0)},d=function(t,a){t&&t.productInfoList&&($.each(t.productInfoList,function(t,a){if(a.changed&&g[a.name]){tracelog(a.name+"配置有更新");try{window[g[a.name]]=JSON.parse(a.content),o.saveData("config_"+a.name,{sign:a.sign,data:window[g[a.name]]})}catch(n){tracelog("解析产品信息失败:"+a.name)}}}),tracelog("所有配置拉取完毕，解析配置"),getBankLimit(),getHolidayDate(),getBankBatchInfo(),parseGoldPickupAddr(),tracelog("解析配置完毕"),"function"==typeof a&&a())};return{getConfig:function(t){r(t)},getFinish:function(){return c}}}]);app.factory("commonDirectiveService",["$q","$http","$timeout","localStorage","HJactionPwdInput","HJactionLoading","cgiService","webankCommonService","HJactionPop","ResetPasswdService","utils","cache","GLOBAL_CONSTANT",function(e,t,n,o,i,s,r,c,u,a,p,d,f){var l=function(e){var t=e.pwdSubTitle,n=e.payWayDesc,o=e.pwdTransDesc,d=e.callback||function(){},f=e._isVerify||!1,l=function(e){var t={};t.user_pwd=e.RSA,t.user_old_pwd=t.user_pwd,s.show(),r.requestVerifyPassword(t).then(function(t){s.hide(),d(e.RSA,t.ret_data.session_id)},function(e){s.hide(),c.isRetCodePwd(e.ret_code)?u.show(c.isRetCodePwdRetry(e.ret_code)?{oneLineTextLeft:e.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(e){1==e?w():2==e&&a.goPage()}}:{oneLineTextLeft:e.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(e){1==e||2==e&&a.goPage()}}):p.makeToast(e.ret_msg)})},w=function(){i.show({pwdSubTitle:t,showType:"keyboardAndPwd",payWayDesc:n,pwdTransDesc:o,onFinishInput:function(e){f?d(e.RSA):l(e)}})};w()},w=function(e){e._isVerify=!0,l(e)},g=function(e,t){return c.isRetCodePwd(e.ret_code)?(u.show(c.isRetCodePwdRetry(e.ret_code)?{oneLineTextLeft:e.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(e){1==e?t():2==e&&a.goPage()}}:{oneLineTextLeft:e.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(e){1==e||2==e&&a.goPage()}}),!0):!1},_=function(t){return e(function(e,o){var i=1*t.productRiskLevel,s=gProductArr[i]||"中等";if(!t.sliderUpConfirmOption||!t.riskOption)return void o();var r=function(){k({riskOption:t.riskOption}).then(function(t){if(t.status==f.RISK_STATUS.CLICK_SUBMIT)if(u=d.getCacheInfo("assessment"))if(i>1*u.cust_risk_level)c();else{var s="您的投资类型为 "+gRiskArr[u.cust_risk_level]+"，适合购买该产品";n(function(){p.makeToast(s,"short")},100),e({canBuy:!0})}else o();else o()},function(){o()})},c=function(){n(function(){t.sliderUpConfirmOption.show=!0,t.sliderUpConfirmOption.headText='<h1>您的风险评估结果为<span class="p-c-lorange mgl5">'+gRiskArr[u.cust_risk_level]+'</span></h1><p>该产品风险等级为<span class="p-c-lorange mgl5">'+s+"</span>，按监管要求已超出您的风险承受能力。如果您仍然购买，则视为您愿意承担该产品的风险。</p>",t.sliderUpConfirmOption.buttonList=[{text:"仍然购买",red:!0},{text:"重新评估"}],t.sliderUpConfirmOption.onClose=function(t){1==t?e({isForce:1,canBuy:!0}):2==t?r():o()}},20)},u=d.getCacheInfo("assessment");u?1*u.cust_risk_level<i?c():e({canBuy:!0}):r()})},k=function(t){return e(function(e,o){return t&&t.riskOption?(t.riskOption.show=!1,t.riskOption.isParentBack=t.isParentBack,t.riskOption.onEndOfProcess=function(t){e(t)},void n(function(){t.riskOption.show=!0})):void o()})};return{verifyPassword:l,getUserPwdInput:w,processWrongPwdByCode:g,beginUserRiskAssessment:k,checkProductRiskSetting:_}}]);app.factory("CommonClickFnService",["GLOBAL_CONSTANT","LocationService","$ionicViewSwitcher","$location","$timeout","utils","cache","essential",function(e,n,i,t,o,c,a,r){return{mainTabClickFun:function(t,o){if(t!=o)switch(i.nextTransition("none"),t){case 1:var s=a.getUserStatus();if(c.clickButtonReport("index_home"),s==e.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){var l={};l.refresh=!0,n.go("home",l)}else n.go("default");break;case 2:c.clickButtonReport("index_finance"),n.go(r.isFinancialHomeGray()?"financialHome":"financialRecommend");break;case 3:c.clickButtonReport("index_transfer"),n.go("transHome");break;case 4:c.clickButtonReport("index_investment"),n.go("investmentHome")}}}}]);app.factory("localStorage",["$q","GLOBAL_CONSTANT","localStorageService","cache","utils",function(r,t,e,n,a){var u=function(){var r=n.getUserInfo();return r?a.md5(r.openid):null};return{loadDataByUser:function(r){try{var t=u();if(!t)return null;var n=e.get(t);if(!n||n.length<=0)return null;var a=JSON.parse(n);return a[r]}catch(c){return null}},saveDataByUser:function(r,t){try{var n=u();if(!n)return!1;var a=e.get(n),c={};return a&&a.length>0&&(c=JSON.parse(a)),c[r]=t,e.set(n,JSON.stringify(c))}catch(l){return!1}},removeDataByUser:function(r){try{var t=u();if(!t)return!1;var n=e.get(t);if(!n||n.length<=0)return!0;var a=JSON.parse(n);return delete a[r],!0}catch(c){return!1}},loadData:function(r){try{return e.get(r)}catch(t){return null}},saveData:function(r,t){try{return e.set(r,t)}catch(n){return!1}},removeData:function(r){try{return e.remove(r)}catch(t){return!1}}}}]);"use strict";app.factory("PopupService",["$rootScope","localStorage","cgiService",function(n,e,o){var t=!1,i=["Notice","AccountActive","IncomeArrival","HomeBigBanner","RedPacket","WePay"],c=[],a=["Notice","AccountActive","IncomeArrival","HomeBigBanner","NewBee","RedPacket","WePay","WePayBindTip"],r=function(e){n.$emit("POPUP_SHOW",e)},f=function(n){c.length===i.length&&t&&r(a[n])},d=function(n){var e=a.indexOf(n),o=e+1;return 0>o?!1:o>a.length-1?!1:void f(o)},u=function(n,e){i.indexOf(e)>=0&&c.indexOf(e)<0&&(c.push(e),f(0))};n.$on("POPUP_DATA_LOADED",u);var g=function(){t=!0,f(0)},P=function(){t=!1,c=[]},s=function(){var t=e.loadData("config_notice");window.gNoticeInfo=t&&t.data||{};var i={name:"notice",sign:t&&t.sign||null},c={productInfoList:[i]};o.requestConfigFile(c).then(function(o){var t=o.ret_data;if(t&&t.productInfoList&&t.productInfoList.length){var i=t.productInfoList[0];if(i&&"notice"===i.name){if(i.changed)try{window.gNoticeInfo=JSON.parse(i.content),e.saveData("config_notice",{sign:i.sign,data:window.gNoticeInfo})}catch(c){window.gNoticeInfo={},tracelog("PopupService.loadNotice 解析失败")}}else window.gNoticeInfo={}}else window.gNoticeInfo={};n.$emit("POPUP_DATA_LOADED","Notice")},function(){n.$emit("POPUP_DATA_LOADED","Notice")})};return{start:g,stop:P,next:d,loadNotice:s}}]);"use strict";app.factory("SocialDataService",["$q","localStorage","cgiService",function(n,t,e){var a=function(){var n={sign:"",content:["","",""],expired:-1},e=t.loadData("social_data");return e&&e.sign&&(n={sign:e.sign,content:e.content,expired:e.expired}),n},c=function(n){var t="",e=a();return e&&e.content&&e.content.length&&n>=0&&n<e.content.length&&(t=e.content[n]),t},i=function(c){return n(function(n,i){var o=null,r=a();!r.sign||!r.expired||r.expired<Date.now()?e.querySocialData(r.sign).then(function(e){var a=e.ret_data;a&&a.hasOwnProperty("changed")&&a.changed&&(r={sign:a.sign,content:a.content,expired:1e3*(a.updateTime+86400)},t.saveData("social_data",r),r.content.length>c&&(o=r.content[c])),n(o)},i):n(o)})};return{local:c,sync:i}}]);"use strict";app.factory("AdBannerService",["$q","$http","$sce","localStorage","cgiService",function(n,i,o,a,e){var t=function(){window.gAdvConfigNew={};var n=a.loadData("config_adv_config_new");n&&n.data&&(window.gAdvConfigNew=n.data)},d=function(){window.gAdvConfigNew={},a.removeData("config_adv_config_new")},g=function(n,i){window.gAdvConfigNew[n]=i;var o=a.loadData("config_adv_config_new");o.data[n]=i,a.saveData("config_adv_config_new",o)},c=function(n,i){var o=window.gAdvConfigNew[n];if(window.gAdvConfigNew&&o&&o&&o.length>1&&i>0&&i<o.length){var a=o.splice(0,i);o=o.concat(a),g(n,o)}},f=function(){if(window.gAdvConfigNew)for(var n,i=["adv_id_1","adv_id_2"],o=0,a=i.length;a>o;o++)n=i[o],c(n,1)},w=function(){var i=n.defer(),o=a.loadData("config_adv_config_new");window.gAdvConfigNew=o&&o.data||{};var t={name:"adv_config_new",sign:o&&o.sign||null},g={productInfoList:[t]};return e.requestConfigFile(g).then(function(n){var o=!1,e=n.ret_data;if(e&&e.productInfoList&&e.productInfoList.length){var t=e.productInfoList[0];if(t&&"adv_config_new"===t.name&&t.changed){o=!0;try{window.gAdvConfigNew=JSON.parse(t.content),a.saveData("config_adv_config_new",{sign:t.sign,data:window.gAdvConfigNew})}catch(g){d(),tracelog("AdBannerService.sync 解析失败")}}}else o=!0,d();i.resolve(o)},function(){d(),i.reject()}),i.promise};return t(),{sync:w,signal:f,signalToIndex:c}}]);app.factory("CommonConfigService",["$q","$http","$timeout","envService","localStorage","cgiService",function(n,t,o,e){var a=null,c=function(n){var o=e.getEnvVariable().DATA_CGI_PREFIX+"common.json",c=t.get(o);c.then(function(t){tracelog("拉取公共配置信息成功！"),t.data&&(a=t.data,n&&n(a))},function(t){n&&n(null),tracelog("拉取公共配置信息成功！"+t)})};return{updateConfig:function(n){c(n)},getCommonConfig:function(){return a||c(null),a}}}]);app.factory("FinancialOrganizationService",["$q","GLOBAL_CONSTANT","essential","utils","cgiService","cache","$timeout","ProdInfoService","localStorage","HJactionLoading","CheckFaceService",function(s,a,e,t,l,o,i,r,n){function p(s,e,t){if(s){var i=r.getProdInfo(s.productSubCode);if(i){var p=function(a){var e=0;if(0==i.templet_type?e=i.min_amount||0:2==i.templet_type?e=i.p_start_buy_min_amount||0:1==i.templet_type&&(e=i.p_start_purchase_min_amount||0),e>a||0==a)t&&t("off");else if(t&&t("none"),1==s.saleStatusDataLogicFlag){var l=1;0==i.templet_type?l=i.total_amount||1:2==i.templet_type?l=i.quota||1:1==i.templet_type&&(l=i.quota||1);var o=parseInt(100*parseInt(a)/parseInt(l));o>=50?(s.saleStatusTagFlag="抢",s.saleStatusTagDesc="快来买"):o>=10?(s.saleStatusTagFlag="少",s.saleStatusTagDesc="快没了"):o>=1?(s.saleStatusTagFlag="少",s.saleStatusTagDesc="仅"+o+"%"):(s.saleStatusTagFlag="少",s.saleStatusTagDesc="1%"),s.showQuota="",s.saleStatusTag&&(s.showQuota='<div class="show-sale-wrap"><i class="show-sale-status">'+s.saleStatusTagFlag+'</i><span class="show-sale-desc">'+s.saleStatusTagDesc+"</span></div>"),t&&t(s.showQuota)}},c=o.getUserStatus();if(c==a.ACCOUNT_STATE.USER_STATE_GUEST)return void(0==i.templet_type?p(i.quota_total):2==i.templet_type?p(i.remain_total_quota):1==i.templet_type&&p(i.remain_total_quota));var h=n.loadData("insuranceBalance"+s.productSubCode);void 0!=h?p(h):0==i.templet_type?p(i.quota_total):2==i.templet_type?p(i.remain_total_quota):1==i.templet_type&&p(i.remain_total_quota),e&&l.requestProductBalance(s.productSubCode).then(function(a){a.ret_data&&(n.saveData("insuranceBalance"+s.productSubCode,a.ret_data.quota_total),p(a.ret_data.quota_total))})}}}function c(s){var a="";if(s.tag&&s.tag.length>0){s.tagRed=s.tagRed||[],a=s.tagRed[0]?1==s.tag.length?'<p><span class="s-pr6 s-red">':'<p><span class="ui-px-r s-pr6 s-red">':1==s.tag.length?'<p><span class="s-pr6">':'<p><span class="ui-px-r s-pr6">';for(var e=0;e<s.tag.length-1;e++)a+=s.tagRed[e+1]?s.tag[e]+'</span><span class="s-pl6 s-red':s.tag[e]+'</span><span class="s-pl6',a+=s.tag[e+2]?' s-pr6 ui-px-r">':'">';a+=s.tag[e]+"</span></p>"}return a}function h(s,a,e){if(a.showLeft="",a.showRight="",a.showSeal="",s.htmlStr="",s.productCode=a.productSubCode||a.productCode,a.showLeft='<div class="left new-fund"><i class="ui-new-fund"></i></div>',!a.beforeTime){var t="number";parseFloat(a.earningsRate)<0&&(t="number s-green"),a.showLeft='<div class="left"><p class="'+t+'">'+a.earningsRate.split(".")[0]+'<span class="s-fz24">.'+a.earningsRate.split(".")[1]+'</span><span class="s-fz12">%</span></p><p class="tip">'+a.earningsDesc+"</p></div>"}a.showRight='<div class="right"><h1>'+a.productDesc+"</h1><h2>"+a.productName+"</h2>"+c(a)+"</div>",a.showSeal="";var l;if(0==a.saleStatus){a.sealWords=a.sealDesc||"";var o=a.sealWords.split("<br>");l=o.length,1>l&&(l=1),l>3&&(l=3),a.sealClass="ui-watermark"}else 2==a.saleStatus?(l=1,a.sealClass="ui-watermark off",a.sealWords=a.sealDesc||""):1==a.saleStatus&&(a.sealWords="",p(a,e,function(e){a.showSeal="none"==e?"":"off"==e?'<i class="ui-watermark off"><div class="row-1"><span>售罄</span></div></i>':e,s.htmlStr=a.showLeft+a.showRight+a.showSeal}));a.sealWords&&(a.showSeal='<i class="'+a.sealClass+'"><div class="row-'+l+'"><span>'+a.sealWords+"</span></div></i>"),s.htmlStr=a.showLeft+a.showRight+a.showSeal}function u(s,a){if(a.showLeft="",a.showRight="",a.showSeal="",s.htmlStr="",s.productCode=a.productSubCode||a.productCode,a.showLeft='<div class="left new-fund"><i class="ui-new-fund"></i></div>',!a.beforeTime){var e="number";parseFloat(a.earningsRate)<0&&(e="number s-green"),a.showLeft='<div class="left"><p class="'+e+'">'+a.earningsRate.split(".")[0]+'<span class="s-fz24">.'+a.earningsRate.split(".")[1]+'</span><span class="s-fz12">%</span></p><p class="tip">'+a.earningsDesc+"</p></div>"}if(a.showRight='<div class="right"><h1>'+a.productDesc+"</h1><h2>"+a.productName+"</h2>"+c(a)+"</div>",a.showSeal="",0==a.saleStatus){var t=a.sealDesc||"",l=t.split("<br>"),o=l.length;1>o&&(o=1),o>3&&(o=3),a.showSeal='<i class="ui-watermark"><div class="row-'+o+'"> <span>'+t+"</span> </div> </i>"}s.htmlStr=a.showLeft+a.showRight+a.showSeal}function d(s,e,t,l){e.showLeft="",e.showRight="",e.showSeal="",s.htmlStr="",s.productCode=e.productSubCode||e.productCode;var o='<span class="category gold">黄金</span>',i="%";if(l==a.FINANCIAL_PROD_TYPE.STOCK&&(o='<span class="category">基金</span>'),(l==a.FINANCIAL_PROD_TYPE.GOLD_CURRENT||l==a.FINANCIAL_PROD_TYPE.GOLD_FIXED_TIME)&&(i="克"),e.showLeft='<div class="left new-fund"><i class="ui-new-fund"></i></div>',!e.beforeTime){var r="number";parseFloat(e.earningsRate)<0&&(r="number s-green"),e.showLeft='<div class="left"><p class="'+r+'">'+e.earningsRate.split(".")[0]+'<span class="s-fz24">.'+e.earningsRate.split(".")[1]+'</span><span class="s-fz12">'+i+'</span></p><p class="tip">'+e.earningsDesc+"</p></div>"}if(e.showRight='<div class="right"><h1>'+o+e.productDesc+"</h1><h2>"+e.productName+"</h2>"+c(e)+"</div>",e.showSeal="",0==e.saleStatus){var n=e.sealDesc||"",p=n.split("<br>"),h=p.length;1>h&&(h=1),h>3&&(h=3),e.showSeal='<i class="ui-watermark"><div class="row-'+h+'"> <span>'+n+"</span> </div> </i>"}s.htmlStr=e.showLeft+e.showRight+e.showSeal}function w(s,e,t,l){e.showLeft="",e.showRight="",e.showSeal="",s.htmlStr="",s.productCode=e.productSubCode||e.productCode;var o="%";if((l==a.FINANCIAL_PROD_TYPE.GOLD_CURRENT||l==a.FINANCIAL_PROD_TYPE.GOLD_FIXED_TIME)&&(o="克"),e.showLeft='<div class="left new-fund"><i class="ui-new-fund"></i></div>',!e.beforeTime){var i="number s-fz24";parseFloat(e.earningsRate)<0&&(i="number s-fz24 s-green"),e.showLeft='<div class="left"><p class="'+i+'">'+e.earningsRate+'<span class="s-fz12">'+o+'</span></p><p class="tip">'+e.earningsDesc+"</p></div>"}if(e.showRight='<div class="right"><h1>'+e.productName+"</h1>"+c(e)+"</div>",e.showSeal="",0==e.saleStatus){var r=e.sealDesc||"",n=r.split("<br>"),p=n.length;1>p&&(p=1),p>3&&(p=3),e.showSeal='<i class="ui-watermark"><div class="row-'+p+'"> <span>'+r+"</span> </div> </i>"}s.htmlStr=e.showLeft+e.showRight+e.showSeal}function f(s,a,e){if(a.showLeft="",a.showRight="",a.showSeal="",s.htmlStr="",s.productCode=a.productSubCode||a.productCode,a.showLeft='<div class="left new-fund"><i class="ui-new-fund"></i></div>',!a.beforeTime){var t="number s-fz24";parseFloat(a.earningsRate)<0&&(t="number s-fz24 s-green"),a.earningsRate=a.earningsRate||"",a.showLeft='<div class="left"><p class="'+t+'">'+a.earningsRate+'<span class="s-fz12">%</span></p><p class="tip">'+a.earningsDesc+"</p></div>"}a.showRight='<div class="right"><h1>',a.isNewOwner&&(a.showRight+='<span class="category blue">新手专享</span>'),a.showRight+=a.productName+"</h1><p>",a.productPeroid&&(a.showRight+='<span class="ui-px-r s-pr6 s-red">'+a.productPeroid+"</span>"),a.minAmountDesc&&(a.showRight+='<span class="s-pl6">'+a.minAmountDesc+"</span>"),a.showRight+="</p></div>",a.showSeal="";var l;if(0==a.saleStatus){a.sealWords=a.sealDesc||"";var o=a.sealWords.split("<br>");l=o.length,1>l&&(l=1),l>3&&(l=3),a.sealClass="ui-watermark"}else 2==a.saleStatus?(l=1,a.sealClass="ui-watermark off",a.sealWords=a.sealDesc||""):1==a.saleStatus&&(a.sealWords="",p(a,e,function(e){"none"==e?a.showSeal="":"off"==e?(a.showSeal='<i class="ui-watermark off"><div class="row-1"><span>售罄</span></div></i>',s.displayIndex=2):a.showSeal=e,s.htmlStr=a.showLeft+a.showRight+a.showSeal}));a.sealWords&&(a.showSeal='<i class="'+a.sealClass+'"><div class="row-'+l+'"><span>'+a.sealWords+"</span></div></i>"),s.htmlStr=a.showLeft+a.showRight+a.showSeal}return{getBalance:p,parseFinancialListData:h,parseInvestmentListData:u,parseInvestmentListDataNew:d,parseFinancialMoreListData:f,parseInvestmentMoreListData:w}}]);app.factory("NoticeService",["localStorage","cgiService","$q","utils","$timeout",function(e,t,o,n,r){function c(t,o){r(function(){e.saveData(t,o)})}function i(t){var o=e.loadData(t);return o?o:void 0}function a(e,t){t.length>0&&(f[e]=t)}function u(e){var t=f[e];return t?t:void 0}var f={},v="noticeInfo_",d=function(e){var t,o=v+e.prod_code+"_"+e.show_place,n=u(o);if(n)t=n;else{var r=i(o);r&&(a(o,r),t=r)}return t},l=function(e){var n=v+e.prod_code+"_"+e.show_place;return o(function(o,r){t.requestProdNoticeByCode(e).then(function(e){if(e){var t=e.ret_data;c(n,t),a(n,t),o(t)}else r()},function(){r()})})};return{getNoticeFromCache:d,getNoticeFromServer:l}}]);"use strict";app.factory("homeService",["$q","GLOBAL_CONSTANT","webankCommonService","$location","cgiService","utils","cache",function(t,n,e,r,c,a,s){var i={},o=!1;return{getCheckActive:function(){return o},setCheckActive:function(t){o=t},setTransferedData:function(t,n){i[t]=n},getTransferedData:function(t){return i[t]},setRecomProductList:function(t){i.recomList=t},getRecomProductList:function(){return i.recomList},parseTransPlans:function(t){var e={};e.transOutPlans=[],e.transInPlans=[];for(var r=0;r<t.length;r++)t[r].job_type==n.TRANS_PLAN_JOB_TYPE.TRANS_IN?e.transInPlans.splice(-1,0,t[r]):e.transOutPlans.splice(-1,0,t[r]);return e}}}]);app.factory("IncomeHistoryService",["commonPath",function(o){return $.extend({},o,{locationHash:"/income"})}]);app.factory("BindCardVerifyPromptService",["commonPath","utils","webankCommonService","BindNewCardService1",function(n,e,i,o){var r=null;return $.extend({},n,{locationHash:"/verifyBindCardPrompt",perGoPage:function(n,e,r,t,a){i.isInAccountVerificationPeriod()?n(e,r,t,a):o.goPage(null,null,{operType:"verification"})},saveSession:function(n){r=n},getSession:function(){return r},clearSession:function(){r=null}})}]);app.factory("CombinedFinancialService",["utils",function(){var e,n;return{setSelectLevel:function(n){e=n},getSelectLevel:function(){return e},setCallbackPage:function(e){n=e},getCallbackPage:function(){return n}}}]);app.factory("BindBankCardService",["commonPath","webankCommonService","HJactionPop","$timeout","commonDirectiveService","LocationService","cache","$q","cgiService","utils","GLOBAL_CONSTANT","CheckFaceService",function(n,e,i,o,t,a,c,r,u,s,l,d){var f=null,C=null,g=null,h=!1;return $.extend({},n,{locationHash:"",goToBindCard:function(n,o,t,a,r){var u=this;h||(h=!0,e.canUseNewRegAndBandFunc().then(function(){tracelog("bf isInAsyncExamine");var e=c.getCacheInfo("personalInfo"),i=e&&e.ecif_no?e.ecif_no:"";d.isInAsyncExamine(l.CHECK_FACE_SCENE_ID.BIND_CARD,l.FACE_CHECK_STATE.CHECKING,i,l.FACE_CHECK_EXAMINE_TYPE.PICK_RIGHT_IN_WRONG).then(function(e){h=!1,e?(tracelog("isInAsyncExamine success"),s.makeToast("您的上一笔绑卡请求正在人工复核中，请等待审核结果短信告知","long")):(u.locationHash="/bindBankCard",u.goPage(n,o,t,a,r))},function(){h=!1,tracelog("query pickingFromFaceFailed failed"),s.makeToast("连接失败，请检查您的网络设置")})},function(){h=!1,!e.isTransVerificationAccountV2()||t&&"verification"==t.operType?(u.locationHash="/bindNewCard1",u.goPage(n,o,t,a,r)):i.show({oneLineTextLeft:"通过汇款方式绑卡验证的账户，不能解绑卡，不能再绑定其他银行卡",oneButtonText:"知道了",popClose:function(){}})}),e.canUseNewRegAndBandFunc().then(function(){},function(){}))},saveBindCardResult:function(n){g=n?JSON.stringify(n):null},loadBindCardResult:function(){return g?JSON.parse(g):null},saveDataForCardBinding:function(n){f=n?JSON.stringify(n):null},loadDataForCardBinding:function(){return f?JSON.parse(f):null},getPwdSession:function(){return C},perGoPage:function(n,e,i,o,t){this.perCheck(n,e,i,o,t)},perCheck:function(n,o,a,c,r){var u=e.getValidBandCardList().length+e.getValidRegCardList().length;u>=5?i.show({oneLineTextLeft:"最多只能绑5张卡，不能再绑了",oneButtonText:"知道了",popClose:function(){}}):t.verifyPassword({pwdSubTitle:"绑定银行卡",callback:function(e,i){C=i,n(o,a,c,r)}})}})}]);app.factory("BindNewCardService1",["commonPath","webankCommonService","HJactionPop","$timeout","commonDirectiveService",function(e,n,o,t,i){return $.extend({},e,{locationHash:"/bindNewCard1",perGoPage:function(e,n,o,t,i){this.perCheck(e,n,o,t,i)},perCheck:function(e,t,c,a,r){n.getValidBandCardList().length>=5?o.show({oneLineTextLeft:"最多只能绑5张卡，不能再绑了",oneButtonText:"知道了",popClose:function(){}}):!n.isTransVerificationAccount()||a&&"verification"==a.operType?i.verifyPassword({pwdSubTitle:"绑定银行卡",callback:function(){e(t,c,a,r)}}):o.show({oneLineTextLeft:"通过汇款方式绑卡验证的账户，不能解绑卡，不能再绑定其他银行卡",oneButtonText:"知道了",popClose:function(){}})}})}]);app.factory("BindNewCardService2",["commonPath","CheckFaceService","cache","HJactionPop","GLOBAL_CONSTANT","$timeout","utils",function(e,n,o,t,c,i,a){return $.extend({},e,{locationHash:"/bindNewCard2",perGoPage:function(e,n,o,t,c){this.perCheck(e,n,o,t,c)},perCheck:function(e,f,r,C,h){var s=C;if(s&&s.checkFace&&(s.checkFace=!1,!n.isFaceIdValid(c.CHECK_FACE_SCENE_ID.BIND_CARD))){var I=o.getCacheInfo("personalInfo").bind_cards_list;if(I&&I.length&&I.length>=1)return void t.show({oneLineTextLeft:"为了您的账户安全，需要您先通过人脸验证",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(t){if(2==t){var h=o.getCacheInfo("personalInfo"),s=h&&h.ecif_no?h.ecif_no:"";n.startFaceVerify(c.CHECK_FACE_SCENE_ID.BIND_CARD,s).then(function(n){i(function(){var e="gray-info-"+c.GRAY_BIZ_ID.REG_BIND_CARD,n=o.getCacheInfo(e);n&&"true"==n.in||a.makeToast("恭喜您通过验证，请继续绑定银行卡","short")},500),C.faceId=n.faceId,C.videoSessionId=n.videoSessionId,e(f,r,C)},function(){},function(){})}}})}s&&s.checkOTP&&e(f,r,C,h)}})}]);app.factory("LoginService",["utils","essential","cgiService","$q","commonPath","ProdInfoService","GLOBAL_CONSTANT",function(e,t,a,n,c,r,o){var i,_;return $.extend({},c,{locationHash:"/login",isAppResumed:!1,setAppResumed:function(e){this.isAppResumed=e},getAppResumed:function(){return this.isAppResumed},setCallbackPage:function(e,t){i=e,_=t},getSucceedPage:function(){return void 0==i?"":i},getBackPage:function(){return void 0==_?"":_},getLoginBankData:function(){return n(function(e,t){var n=!1,c=!1,i=!1,_=!1,l=!1,f=!1;tracelog("拉取UserWealth"),a.requestUserWealth().then(function(e){tracelog("拉取UserWealth成功");var a=[];if(e.ret_data&&e.ret_data.finance_wealth){if(e.ret_data.finance_wealth.balance_cycle)for(var c in e.ret_data.finance_wealth.balance_cycle)e.ret_data.finance_wealth.balance_cycle[c].prod_code&&a.push(e.ret_data.finance_wealth.balance_cycle[c].prod_code);if(e.ret_data.finance_wealth.fund_cycle)for(var c in e.ret_data.finance_wealth.fund_cycle)e.ret_data.finance_wealth.fund_cycle[c].prod_code&&a.push(e.ret_data.finance_wealth.fund_cycle[c].prod_code);if(e.ret_data.finance_wealth.wnx_cycle)for(var c in e.ret_data.finance_wealth.wnx_cycle)e.ret_data.finance_wealth.wnx_cycle[c].prod_code&&a.push(e.ret_data.finance_wealth.wnx_cycle[c].prod_code);if(e.ret_data.finance_wealth.bank_cycle)for(var c in e.ret_data.finance_wealth.bank_cycle)e.ret_data.finance_wealth.bank_cycle[c].prod_code&&a.push(e.ret_data.finance_wealth.bank_cycle[c].prod_code);if(e.ret_data.finance_wealth.pmes_cycle)for(var c in e.ret_data.finance_wealth.pmes_cycle)e.ret_data.finance_wealth.pmes_cycle[c].prod_code&&a.push(e.ret_data.finance_wealth.pmes_cycle[c].prod_code)}r.requestProdInfo(a).then(function(){tracelog("按产品拉取产品信息成功"),_=!0,h()},function(e){tracelog("按产品拉取产品信息失败"+JSON.stringify(e)),t()}),n=!0,h()},function(e){tracelog("拉取UserWealth失败: "+JSON.stringify(e)),t()}),tracelog("拉取PersonalInfo"),a.requestPersonalInfo().then(function(){tracelog("拉取PersonalInfo成功"),c=!0,h()},function(e){tracelog("拉取PersonalInfo失败: "+JSON.stringify(e)),t()}),tracelog("拉取Assessment"),a.requestAssessment().then(function(){tracelog("拉取Assessment成功"),i=!0,h()},function(e){tracelog("拉取Assessment失败: "+JSON.stringify(e)),t()}),a.requestExtraUserInfo().then(function(){tracelog("拉取ExtraUserInfo成功"),l=!0,h()},function(e){tracelog("拉取ExtraUserInfo失败: "+JSON.stringify(e)),l=!0,h()}),tracelog("拉取白名单配制");var s={cycle:[]},d={type:o.GRAY_BIZ_ID.FINANCIAL_CALENDAR,itemId:""},u={type:o.GRAY_BIZ_ID.ASSET_MANAGE,itemId:""};s.cycle.push(d),s.cycle.push(u),a.requestGrayInfoNew(s).then(function(){tracelog("拉取白名单配制成功"),f=!0,h()},function(){tracelog("拉取白名单配制失败"),f=!0,h()});var h=function(){n&&l&&c&&i&&_&&f&&(tracelog("拉取到全部数据"),e())}})}})}]);app.factory("RegisterService",["utils","LocationService","webankCommonService","$q","cgiService","CheckFaceService","GLOBAL_CONSTANT",function(e,n,t){var i,r,u,o,s,a,c,l=null;return{go:function(){t.canUseNewRegAndBandFunc().then(function(){n.go("/registerV2",null,null,null,!0)},function(){n.go("/register",null,null,null,!0)})},setCallbackPage:function(e,n){i=e,r=n},getSucceedPage:function(){return i?i:"default"},getBackPage:function(){return r?r:"default"},saveRegisterSession1:function(e){u=e},resumeRegisterSession1:function(){return u},saveRegisterSession2:function(e){o=e},saveRegisterSession3:function(e){s=e},resumeRegisterSession2:function(){return o},resumeRegisterSession3:function(){return s},saveUserPara:function(e){a=e},getUserPara:function(){return a},saveResultPara:function(e){c=e},getResultPara:function(){return c},clearRegister:function(){u=void 0,o=void 0,s=void 0,a=void 0,c=void 0,i=void 0,r=void 0,l=null},saveDataForRegister:function(e){l=e?JSON.stringify(e):null},loadDataForRegister:function(){return l?JSON.parse(l):null}}}]);app.factory("RegisterV2Service",["utils",function(){return{saveSession:function(){},loadSession:function(){}}}]);"use strict";app.factory("XGService",["GLOBAL_CONSTANT","$MD5","$q","localStorage","cache",function(e,n,t,r,_){var o=function(e){return n(n(e).toUpperCase()).toUpperCase()},u=function(e){if(e){var n={CmdID:"XGSetAccount",account:e};CommandChannel.execute(n,function(){},function(){})}},a=function(e,n){var r=t.defer();if(n&&n.indexOf(" ")<0){var _={CmdID:e,tag:n};CommandChannel.execute(_,function(){r.resolve(n)},function(){r.reject(n)})}else r.reject(n);return r.promise},c=function(e){return DEBUG?a("XGSetTag",e+"_test"):a("XGSetTag",e)},i=function(e){return DEBUG?a("XGDelTag",e+"_test"):a("XGDelTag",e)},T=function(){var n=_.getUserStatus(),t=r.loadData("ACCOUNT_STATUS_MAX");if(!t||4*n>t){var a,T,s;switch(n){case e.ACCOUNT_STATE.USER_STATE_GUEST:a=["1_login_not_reg_user","1_reg_user"],T="1_not_login_user",s=o(_.getDeviceInfo().uuid);break;case e.ACCOUNT_STATE.USER_STATE_LOGIN:a=["1_not_login_user","1_reg_user"],T="1_login_not_reg_user",s=o(_.getUserInfo().openid);break;case e.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT:a=["1_not_login_user","1_login_not_reg_user"],T="1_reg_user"}i(a[0]).then(function(){return i(a[1])}).then(function(){return c(T)}).then(function(e){r.saveData("ACCOUNT_STATUS_MAX",4*n),u(s)},function(e){r.removeData("ACCOUNT_STATUS_MAX")})}};return{updateAccountStatus:T}}]);app.factory("InsuranceProductDetailService",["utils","commonPath","cache","cgiService","webankCommonService","HJactionLoading","GLOBAL_CONSTANT","ProdInfoService","LocationService",function(n,c,e,o,t,i,a,r,u){return $.extend({},c,{locationHash:"/insuranceProductDetails",perGoPage:function(n,c,e,o,t){t=t||{};var i=function(i){i=i||0,n(c,e,o,$.extend(t,{backNum:i}))};r.requestProdInfo([c]).then(function(n){n&&n[c]&&n[c].jump_descript?u.go("/bankProductJumping",null,{showText:n[c].jump_descript,successCallback:function(){i(1)}}):i()},function(){i()})}})}]);app.factory("InsurancePurchaseService",["utils","commonPath","dataService","AnnouncementService","$timeout","cache","GLOBAL_CONSTANT","BuySignService","webankCommonService","HJactionPop","BindCardVerifyPromptService","ProdInfoService",function(e,n,c,t,o,a,i,r,u,l,f,d){var _;return $.extend({},n,{locationHash:"/insurancePurchase",saveSession:function(e){_=e},resumeSession:function(){return _},clearSession:function(){_=void 0},perGoPage:function(n,i,_,s){if(u.doesAccountNeedTransVerificationV2())return void l.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(e){2==e&&f.goPage()}});var p=null,v=null,h=i,g=d.getProdInfo(i),y=g&&g.on_sale_code,w=function(e){e=e||0,n(i,_,s,{backNum:e})},S=function(n,c){var t=e.getDate();return(!n||e.getDateByYYYYMMDDString(n)<=t)&&(!c||e.getDateByYYYYMMDDString(c)>=t)?!0:!1},P=function(e){var n=!1,t=a.getCacheInfo("wealthNew");if(t&&t.finance_wealth&&t.finance_wealth.fund_cycle)for(var u in t.finance_wealth.fund_cycle){var l=d.getProdInfo(t.finance_wealth.fund_cycle[u].prod_code);!l||1!=l.product_type&&3!=l.product_type||0!=l.templet_type||l.on_sale_code!=y||(n=!0)}if(t&&t.finance_wealth&&t.finance_wealth.bank_cycle)for(var u in t.finance_wealth.bank_cycle){var l=d.getProdInfo(t.finance_wealth.bank_cycle[u].prod_code);!l||1!=l.product_type&&3!=l.product_type||0!=l.templet_type||l.on_sale_code!=y||(n=!0)}if(n)return void w(e);if(!i)return void w(e);var f=function(n){if(v){if(o.cancel(v),v=null,!(n&&n.length>0))return void w(e);var c=[];if($.each(n,function(e,n){-1!=$.inArray("5",n.show_place.split(","))&&d.getProdInfo(n.prod_code)&&S(n.specl_notice_indate,n.specl_notice_offdate)&&c.push(n)}),!(c.length>0))return void w(e);var t=[];$.each(c,function(e,n){n.prod_code==h&&t.push(n)});var a=t[0]||c[0];a&&r.goPage(null,null,{detail:a,successCallback:function(){w(1)}},{backNum:e})}};c.getBuySign({code:h}).then(f,function(){v&&(o.cancel(v),v=null),w(e)},f)},m=function(){var e=function(e){p&&(o.cancel(p),p=null,e&&e.length>0?t.goPage(null,null,{code:h,successCallback:function(){v=o(function(){v=null,w()},2e3),P(1)}}):P(0))};c.getBuyNotice({code:h}).then(e,function(){p&&(o.cancel(p),p=null,P(0))},e)};h?(p=o(function(){p=null,w()},2e3),m()):w()}})}]);app.factory("InsurancePurchaseService2",["utils","commonPath","dataService","AnnouncementService","$timeout","cache","GLOBAL_CONSTANT","BuySignService","webankCommonService","HJactionPop","BindCardVerifyPromptService",function(e,n,o,c,t,i,u,a,r,s,l){var f;return $.extend({},n,{locationHash:"/insurancePurchase2",pageType:{purchasePage:0,fillBuyInfoPage:1},saveSession:function(e){f=e},resumeSession:function(){return f},clearSession:function(){f=void 0},perGoPage:function(e,n,i,u){if(r.doesAccountNeedTransVerificationV2())return void s.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(e){2==e&&l.goPage()}});var a=null,f=n,p=function(o){o=o||0,e(n,i,u,{backNum:o})},g=function(){var e=function(e){a&&(t.cancel(a),a=null,e&&e.length>0?c.goPage(null,null,{code:f,successCallback:function(){p(1)}}):p(0))};o.getBuyNotice({code:f}).then(e,function(){a&&(t.cancel(a),a=null,p(0))},e)};f&&u.pageType==this.pageType.purchasePage?(a=t(function(){a=null,p()},2e3),g()):p()}})}]);app.factory("InsuranceMyProdDetailService",["commonPath","LocationService","ProdInfoService",function(n,o,c){return $.extend({},n,{locationHash:"/insuranceMyProdDetail",perGoPage:function(n,e,t,r){var i=function(o){o=o||0,n(e,t,r,{backNum:o})};c.requestProdInfo([e]).then(function(n){n&&n[e]&&n[e].jump_descript?o.go("/bankProductJumping",null,{showText:n[e].jump_descript,successCallback:function(){i(1)}}):i()},function(){i()})}})}]);app.factory("InsuranceHistoryListService",["utils","commonPath",function(t,n){return $.extend({},n,{locationHash:"/insuranceHistoryList"})}]);app.factory("InsuranceHistoryProductDetailService",["utils","commonPath",function(t,n){return $.extend({},n,{locationHash:"/insuranceHistoryProductDetail"})}]);app.factory("StockProductDetailService",["utils","commonPath",function(t,o){return $.extend({},o,{locationHash:"/stockProductDetail"})}]);app.factory("StockPurchaseService",["utils","commonPath","$timeout","dataService","AnnouncementService","webankCommonService","HJactionPop","BindCardVerifyPromptService",function(n,e,o,t,c,i,u,a){var r;return $.extend({},e,{locationHash:"/stockPurchase",saveSession:function(n){r=n},resumeSession:function(){return r},clearSession:function(){r=void 0},perGoPage:function(n,e,r,l){if(i.doesAccountNeedTransVerificationV2())return void u.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(n){2==n&&a.goPage()}});var s=function(o){o=o||0,n(e,r,l,{backNum:o})},f=function(){var n=function(n){v&&(o.cancel(v),v=null,n&&n.length>0?c.goPage(null,null,{code:d,successCallback:function(){s(1)}}):s(0))};t.getBuyNotice({code:d}).then(n,function(){v&&(o.cancel(v),v=null,s(0))},n)},v=null,d=e;d?(v=o(function(){v=null,s()},2e3),f()):s(0)}})}]);app.factory("StockTransRulesService",["utils","commonPath",function(t,n){return $.extend({},n,{locationHash:"/stockTransRules"})}]);app.factory("StockAssetDetailService",["utils","commonPath",function(t,e){return $.extend({},e,{locationHash:"/stockAssetDetail"})}]);app.factory("StockProdManagerService",["utils","commonPath",function(o,a){return $.extend({},a,{locationHash:"/stockProdManager"})}]);app.factory("StockMoreDetailService",["utils","commonPath",function(t,o){return $.extend({},o,{locationHash:"/stockMoreDetail"})}]);app.factory("StockConfirmPurchaseDetailService",["utils","commonPath",function(t,o){return $.extend({},o,{locationHash:"/stockConfirmPurchaseDetail"})}]);app.factory("StockConfirmRedeemDetailService",["utils","commonPath",function(e,t){return $.extend({},t,{locationHash:"/stockConfirmRedeemDetail"})}]);app.factory("StockMyProdDetailService",["utils","commonPath",function(t,o){return $.extend({},o,{locationHash:"/stockMyProductDetail"})}]);app.factory("StockRedeemService",["utils","commonPath",function(e,t){return $.extend({},t,{locationHash:"/stockRedeem"})}]);app.factory("StockValueHistoryService",["utils","commonPath",function(t,o){return $.extend({},o,{locationHash:"/stockCleanValueHistory"})}]);app.factory("MonetaryService",["utils",function(){var a={};return{setCallbackPage:function(t,e){a[t]=e},getCallbackPage:function(t){return a[t]}}}]);"use strict";app.factory("FinancialRecommendService",["$location","commonPath",function(n,c){return $.extend({},c,{locationHash:"/financialRecommend"})}]);app.factory("ProdCommonActionService",["utils","ProdInfoService","essential","InsuranceProductDetailService","LocationService","StockProductDetailService","GLOBAL_CONSTANT","InsuranceMyProdDetailService","TPlusOneService",function(e,o,t,r,n,i,c,P,_){var T=function(e){var o=e.prod_code;e.templet_type==c.FINANCIAL_TEMPLATE.DEFAULT?r.goPage(o):e.templet_type==c.FINANCIAL_TEMPLATE.UNIVERSIAL?n.go("/insuranceProductDetails2/"+o):e.templet_type==c.FINANCIAL_TEMPLATE.T_PLUS_ONE&&_.goPage(o)};return{goToFixTimeOrShortTemplate:function(e){T(e)},goToProd:function(t){var r=o.getProdInfo(t);return r?void(r.product_type==c.FINANCIAL_PROD_TYPE.MONETARY?n.go("/monetaryMyProdDetail/"+t):r.product_type==c.FINANCIAL_PROD_TYPE.FIXED_TIME||r.product_type==c.FINANCIAL_PROD_TYPE.SHORT_TERM?T(r):r.product_type==c.FINANCIAL_PROD_TYPE.STOCK?i.goPage(t):r.product_type==c.FINANCIAL_PROD_TYPE.GOLD_CURRENT?n.go("/goldCurrentProdDetail"):r.product_type==c.FINANCIAL_PROD_TYPE.GOLD_FIXED_TIME&&n.go("/goldFixTimeProdDetail/"+t)):void e.makeToast("产品信息拉取中，请稍后重试","short")},onClickProd:function(r){var n=this.goToProd;o.requestProdInfo([r]).then(function(){t.resolve()},function(){e.makeToast("产品信息拉取中，请稍后重试","short"),t.reject()}).then(function(){n(r)})}}}]);app.factory("TPlusOneService",["commonPath","LocationService","ProdInfoService","cgiService","utils","$timeout","GLOBAL_CONSTANT","RecentAccountService","localStorage",function(e,t,a,n,o,r,i,l,s){var c=null,u=null,h=null;return $.extend({},e,{locationHash:"/TPlusOneDetail",saveDataForPurchaseResult:function(e){h=e?JSON.stringify(e):null},clearDataForPurchaseResult:function(){h=null},loadDataForPurchaseResult:function(){if(h){var e=JSON.parse(h);return h=null,e}return null},saveDataForPurchase:function(e){c=e?JSON.stringify(e):null},clearDataForPurchase:function(){c=null},loadDataForPurchase:function(){if(c){var e=JSON.parse(c);return c=null,e}return null},saveDataForRedeem:function(e){u=e?JSON.stringify(e):null},loadDataForeRedeem:function(){if(u){var e=JSON.parse(u);return u=null,e}return null},clearDataForRedeem:function(){u=null},saveRecentlyUsedAccountForPurchase:function(e,t){var a=null;e==i.ACCOUNT_TYPE.CURRENT_PLUS?a=i.ACCOUNT_TYPE.CURRENT_PLUS:e==i.ACCOUNT_TYPE.WEBANK_CARD?a=i.ACCOUNT_TYPE.WEBANK_CARD:e==i.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=t),a&&l.saveRecentlyUsedBankCard(i.ACCOUT_BIZ_TYPE.PAYMENT,a,i.ACCOUT_SCENE_TYPE.TPLUSONE)},getViewData:function(e,t,a,l){var c=o.getDate(),u=o.getDate();u.setDate(c.getDate()-l);var h=o.getYYYYMMDDStringByDate(u),d=o.getYYYYMMDDStringByDate(c);d=""+(parseInt(d)-1);var p={chart:{type:"area",pinchType:"",zoomType:"",marginTop:15},navigator:{enabled:!1},credits:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},series:[{name:"7日年化收益",data:null,lineWidth:1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(.6).get("rgba")],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]}}],yAxis:{gridLineWidth:.5,gridLineColor:"#E9ECEF",labels:{format:"{value:point.y:.2f}%",y:4},lineWidth:0,opposite:!1,tickmarkPlacement:"on",showLastLabel:!0},xAxis:{type:"datetime",lineWidth:0,ordinal:!0,labels:{format:"{value:%m-%d}",align:"center",style:{overflow:"visible",textOverflow:"none"}},tickLength:5,showLastLabel:!0},tooltip:{valueDecimals:2,shared:!0,valueSuffix:"",enabled:!1},plotOptions:{area:{fillOpacity:.5,enableMouseTracking:!1,pointPlacement:"between",lineWidth:1,allowPointSelect:!1,marker:{enabled:!1}}}},f="prodRealValue_"+a,g=[],m=s.loadData(f),T=m&&m.timeRanger||null,v=function(a){var n=-1,l=-1,s=[],c=[];e.show7DayBtn=!0,e.show1MonBtn=!0,e.show2MonBtn=!0,e.chartOptions=p,e.historyIncomeInfo=[],e.historyIncomeInfoAll=[];for(var u in a)if(u>=h&&d>=u){-1==n&&-1==l&&(n=l=parseFloat(a[u].expect_income_rate));var f={},m=parseFloat(a[u].million_income_value),T=parseFloat(a[u].expect_income_rate);f.date=u,f.incomeTenThousand=m.toFixed(4),f.incomeRate=T.toFixed(4),n>T&&(n=T),T>l&&(l=T),e.historyIncomeInfoAll.push(f);var v=o.getUTCMsByYYYYMMDDString(u),y=[];y.push(v),y.push(parseFloat(a[u].expect_income_rate)),g.push(y),s.push(v),c.push(a[u].expect_income_rate)}e.historyIncomeInfoAll.sort(function(e,t){return t.date-e.date});for(var O=Math.min(e.historyIncomeInfoAll.length,7),_=0;O>_;_++)e.historyIncomeInfo.push(e.historyIncomeInfoAll[_]);e.chartOptions.yAxis.tickPositions=[0,1,2,3,4,5,6],e.chartOptions.series[0].threshold=0;var D=[],P=10,C=s.length*(1-1/P),A=C/6,S=s.length*(1/(2*P));if(e.prodInfo.prod_type==i.TPLUS1_TPLT.TPDX)D.push(s[0]),D.push(s[s.length-1]);else for(var _=0;7>_;_++)D.push(s[parseInt(S+A*_)]);e.chartOptions.xAxis.tickPositions=D,e.chartOptions.series[0].data=g,r(function(){t.showChart&&t.showChart()},100)},y=function(){n.requestTPlusOneProductHistoryIncomeRate(a,h,d).then(function(e){v(e.ret_data),e&&e.ret_data&&e.ret_data instanceof Object&&Object.keys(e.ret_data).length>0&&s.saveData(f,{timeRanger:{begin:h,end:d,time:o.getDate().getTime()},data:e.ret_data})},function(){m&&m.data&&v(m.data)})};T?d>T.end||h<T.begin||o.getDate().getTime()-T.time>6048e5?y():v(m.data):y()}})}]);"use strict";app.factory("commonPath",["$q","cgiService","localStorageService","cache","$location","$ionicHistory",function(t,a,n,e,i,s){return{parentHash:"/",data:{},isDataUsed:!1,locationHash:"/",parentSearch:"",backData:"",session:null,hisArr:[],goPage:function(t,a,n,e,o){var c=this,r=function(t,a,n){if(i.path()&&(c.parentHash=i.path()),i.search()&&(c.parentSearch=i.search()),"number"==typeof t||t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++)t[e]="/"+t[e]}else t=[];n&&(c.isDataUsed=!1,c.data=n),a?i.path(c.locationHash+t.join("")).search(a):i.path(c.locationHash+t.join(""))},h=function(t,a,n,e){(o||!c.isLoginPage())&&(e?s.backHistoryAndGo(e,function(){r(t,a,n)}):r(t,a,n))};"function"==typeof this.perGoPage?this.perGoPage(h,t,a,n,e):h(t,a,n,e)},backPage:function(t,a){if(t&&(!t||t.forceBack)||!this.isLoginPage()){var n;"number"==typeof t?(n=t,a&&(this.backData=a)):"object"==typeof t&&(t.backData&&(this.backData=t.backData),(t.backState||t.backUrl)&&(n=s.getHistoryCount(t.backState,t.backUrl))),n=n||1,n*=-1,s.goBack(n)}},isLoginPage:function(){var t=s.currentStateName();return"login"==t||"loginWithFlag"==t?!0:!1},getParentHash:function(){return this.parentHash},getBackView:function(){return s.backView()},getParentSearch:function(){return this.parentSearch},getSearch:function(){return i.search()},setSearch:function(t){i.search(t)},getData:function(t){return t?$.extend(this.data,{parentHash:this.parentHash}):this.data},setData:function(t){this.data=t},getBackData:function(){return this.backData},setBackData:function(t){this.backData=t},setCommonSession:function(t){this.session=t},getCommonSession:function(){return this.session},clearCommonSession:function(){this.session=null},getUnusedData:function(){return this.isDataUsed?null:(this.isDataUsed=!0,this.data)}}}]);"use strict";app.factory("LocationService",["commonPath",function(o){return $.extend({},o,{locationHash:"/",go:function(o,t,n,a,c){o&&o[0]&&(o="/"==o[0]?o:"/"+o),this.locationHash=o,this.goPage("",t,n,a,c)}})}]);"use strict";app.factory("UnbindOpenIDService",["$q","cgiService","localStorageService","cache","$location","commonPath",function(e,c,n,i,o,t){return $.extend({},t,{locationHash:"/unbindOpenID"})}]);"use strict";app.factory("ChangePasswdService",["$location","commonPath",function(a,n){return $.extend({},n,{locationHash:"/changePassword"})}]);"use strict";app.factory("ResetPasswdService",["commonPath","HJactionPop","cache","CheckFaceService","GLOBAL_CONSTANT","$timeout","utils",function(e,t,n,o,c,a,s){return $.extend({},e,{locationHash:"/resetPasswd",perGoPage:function(e,t,n,o,c){this.perCheck(e,t,n,o,c)},perCheck:function(e,i,f,r,u){var h=!1,p=n.getCacheInfo("personalInfo");p&&p.acct_type&&1*p.acct_type==4&&(h=!0),h?t.show({oneLineTextLeft:"需要先通过人脸验证，是否继续？",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(t){if(2==t){var i=n.getCacheInfo("personalInfo"),f=i&&i.ecif_no?i.ecif_no:"";o.startFaceVerify(c.CHECK_FACE_SCENE_ID.RESET_PWD,f).then(function(t){a(function(){s.makeToast("人脸验证通过","short")},500),e(null,null,{dstPage:"resetPassword",faceId:t.faceId})},function(){},function(){})}}}):e(i,f,r,u)}})}]);"use strict";app.factory("HomeNoticeService",["$location","commonPath","dataService","envService",function(e,o){return $.extend({},o,{locationHash:"/homeNotice"})}]);"use strict";app.factory("messageService",["$q","cgiService","localStorageService","cache","GLOBAL_CONSTANT","commonPath","WePayService","PromoCenterService",function(e,t,n,r,s,i,a,g){var o={},d=function(e){var t="";r.getUserInfo()&&r.getUserInfo().openid&&(t=r.getUserInfo().openid),(e||o.openid!=t)&&(o.openid=t,o.index=0,o.haveNext=!0,o.msgList=[],o.oldIndex=-1,o.idList=[],o.redPointId=0)};return d(!0),$.extend({},i,{locationHash:"/messageCenter",getMessageList:function(i){return e(function(e,a){if(d(),r.getUserStatus()<=s.ACCOUNT_STATE.USER_STATE_LOGIN)return a();if(i||o.msgList&&$.each(o.msgList,function(e,t){t.status="R"}),i&&!o.haveNext)return e(o.msgList);var g=i?o.index:0;return o.oldIndex==g?e(o.msgList):(o.oldIndex=g,void t.getMessageList({index:g}).then(function(t){return t.ret_data&&t.ret_data.msg_list?(o.index=t.ret_data.next_index,o.haveNext=t.ret_data.have_next,$.each(t.ret_data.msg_list,function(e,t){if(!o.idList[""+t.msgid]){if(o.idList[""+t.msgid]=1,t.extra)try{t.extra=JSON.parse(t.extra)}catch(n){t.extra=void 0}o.msgList.push(t)}}),o.msgList.length>0&&(o.msgList.sort(function(e,t){return t.msgid-e.msgid}),n.set(r.getUserInfo().openid+"unreadMessageNumLastMsgid",o.msgList[0].msgid)),e(o.msgList)):void 0},function(){return o.oldIndex=-1,a({result:2})}))})},getUnreadMessageNum:function(){return e(function(e,i){if(d(),r.getUserStatus()<=s.ACCOUNT_STATE.USER_STATE_LOGIN)return i();var a=n.get(r.getUserInfo().openid+"unreadMessageNumLastMsgid")||0;t.getUnreadMessageNum({checkSeq:1*a}).then(function(t){return o.oldIndex=-1,e(t.ret_data.new_msg_cnt)},function(){return i()})})},clickRedPoint:function(){return e(function(e,t){if(d(),r.getUserStatus()<=s.ACCOUNT_STATE.USER_STATE_LOGIN)return t();if(!r.getUserInfo()||!r.getUserInfo().openid)return t();var i=1*n.get(r.getUserInfo().openid+"clickRedPointMsgid")||0,u=1*o.redPointId||0;n.set(r.getUserInfo().openid+"clickRedPointMsgid",i>u?i:u),a.clearRedFlag(),g.cleanRedPoint()})},getRedPoint:function(){return e(function(e,i){if(d(),r.getUserStatus()<=s.ACCOUNT_STATE.USER_STATE_LOGIN)return i();if(!r.getUserInfo()||!r.getUserInfo().openid)return i();var a=n.get(r.getUserInfo().openid+"clickRedPointMsgid")||0;t.getUnreadMessageNum({checkSeq:1*a}).then(function(t){return 1*t.ret_data.new_msg_cnt>0?(o.redPointId=t.ret_data.max_msg_id||0,e(!0)):e(!1)},function(){return i()})})},getNotice:function(){return e(function(e,i){if(r.getUserStatus()<=s.ACCOUNT_STATE.USER_STATE_LOGIN)return i();if(!r.getUserInfo()||!r.getUserInfo().openid)return i();var a=n.get(r.getUserInfo().openid+"reportReadMessage");t.getMessageList({msgType:"notice",index:0}).then(function(t){if(t.ret_data&&t.ret_data.msg_list&&t.ret_data.msg_list.length>0){var n=null;return t.ret_data.msg_list.sort(function(e,t){t.msgid-e.msgid}),n=t.ret_data.msg_list[0],n.msgid!=a&&"U"==n.status||(n=null),e(n)}return i()},function(){return i()})})},getTypeMessageList:function(i,a){return e(function(e,g){if(r.getUserStatus()<=s.ACCOUNT_STATE.USER_STATE_LOGIN)return g();if(!r.getUserInfo()||!r.getUserInfo().openid)return g();var o=n.get(r.getUserInfo().openid+"reportReadMessage");t.getTypeMessageList({msgType:i,richType:a,index:0}).then(function(t){if(t.ret_data&&t.ret_data.msg_list&&t.ret_data.msg_list.length>0){var n={},r=t.ret_data.msg_list;for(var s in r)if(r[s].msgid!=o&&"R"!=r[s].status){var i=r[s];if(!i.msgType||"rich"==i.msgType){if(!i.extra)continue;try{var a=JSON.parse(i.extra);if(!a.type)continue;i.msgType=a.type,i.extraObj=a}catch(d){continue}}n[i.msgType]?n[i.msgType].push(i):n[i.msgType]=[i]}return e(n)}return g()},function(){return g()})})},reportReadMessage:function(e){return r.getUserInfo()&&r.getUserInfo().openid&&n.set(r.getUserInfo().openid+"reportReadMessage",e),t.reportReadMessage({msg_id:e})},clearMessage:function(){return d(!0),t.clearMessage()},getIsMoreData:function(){return o.haveNext},setMessageUnread:function(){t.setMessageUnread().then(function(e){e&&"20270000"==e.ret_code},function(){})}})}]);"use strict";app.factory("PromoCenterService",["commonPath","cgiService",function(o,e){var t=!1,n=function(){t=!0},r=function(){return t},c=function(){e.clearMessageByRichType("red").then(function(){t=!1})};return $.extend({},o,{locationHash:"/promo/center",setRedPoint:n,getRedPoint:r,cleanRedPoint:c})}]),app.factory("PromoApplyService",["commonPath",function(o){return $.extend({},o,{locationHash:"/promo/apply"})}]),app.factory("PromoApplyResultService",["commonPath",function(o){var e={},t=function(o){return o?void(e=o):e};return $.extend({},o,{locationHash:"/promo/apply/result",applyResult:t})}]),app.factory("PromoInviteService",["commonPath",function(o){return $.extend({},o,{locationHash:"/promo/invite"})}]),app.factory("PromoRecordService",["commonPath",function(o){return $.extend({},o,{locationHash:"/promo/record"})}]),app.factory("PromoRecordDetailService",["commonPath",function(o){var e={},t=function(o){return o?void(e=o):e};return $.extend({},o,{locationHash:"/promo/record/detail",record:t})}]);app.factory("CheckFaceService",["cgiService","HJactionPop","$http","envService","HJactionLoading","IONIC_BACK_PRIORITY","$ionicPlatform","$q","$ionicBody","$compile","$templateRequest","$sce","$rootScope","utils","commonPath","GLOBAL_CONSTANT","cache","localStorageService","essential","$timeout","AppMaskService",function(e,t,n,r,o,c,a,E,s,C,I,_,u,f,T,A,l,d,S,F,g){function R(){u.$on("$stateChangeStart",function(){G()}),At.$on("$destroy",function(){G()})}function N(){x(void 0),q(void 0),ut={},ft={}}function O(){var e=l.getUserInfo(),t=e.openid,n=d.get(dt+t);return n=n?n:"true"}function v(e){window.guideViewShowFinished=!1;var t=l.getUserInfo(),n=t.openid;e?d.set(dt+n,"true"):d.set(dt+n,"false")}function h(e,t){var n=e.scene;S.checkFace(e.ecif,O(),n).then(function(i){tracelog(JSON.stringify(i));try{var r=JSON.parse(JSON.stringify(i));r.scene=e.scene,Statistics.reportEvent(A.CHECK_FACE_STATISTIC.CHECK_FACE_RESULT,r)}catch(o){}if((f.checkAbility(A.APP_ABILITY.ABILITY_FACEGUIDE)&&window.guideViewShowFinished||i&&i.isFinishedGuide)&&v(!1),f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_ERROR_CODE+"_"+e.scene+"_"+i.errorCode),"0"==i.errorCode)Z(n,{faceId:i&&i.bizSeqNo?i.bizSeqNo:"",ts:f.getDate(),faceArea:i.faceArea,faceNcRate:i&&i.faceNcRate?i.faceNcRate:0}),y(e,i.bizSeqNo,"",t);else if("6"==i.errorCode)D(t);else if("7"==i.errorCode||"8"==i.errorCode)P(e,i.errorCode,t);else{X(n,{faceId:i&&i.bizSeqNo?i.bizSeqNo:"",ts:f.getDate(),faceArea:i.faceArea,faceNcRate:i&&i.faceNcRate?i.faceNcRate:0});var c=i.bizSeqNo;f.checkAbility(A.APP_ABILITY.ABILITY_FACEGUIDE)?f.checkAbility(A.APP_ABILITY.ABILITY_VIDEO_CERTIFICATION)&&e.videoEnable&&c?nt(e.scene).then(function(n){w(e,{faceId:n.faceId},t)},function(n){switch(f.makeDebugToast(JSON.stringify(ut[e.scene]),"long"),n.code){case vt:case Ot:case ht:H(e,i,t)}}):H(e,i,t):M(e,t)}},function(){H(e,{},t)})}function m(e,n,i){var r=navigator.connection.type;r===Connection.CELL||r===Connection.CELL_2G||r===Connection.CELL_3G||r===Connection.CELL_4G?(Statistics.reportEvent(A.VIDEO_STATISTIC.ASK_CELL_NETWORK,{}),t.show({oneLineTextLeft:"您正在使用运营商网络, 视频验证会产生流量费用",twoButtonText1:"取消",twoButtonText2:"接入",popClose:function(t){2==t&&(Statistics.reportEvent(A.VIDEO_STATISTIC.CONFIRM_CELL_NETWORK,{}),p(e,n,i))}})):r===Connection.UNKNOWN||r===Connection.NONE?t.show({oneLineTextLeft:"您的手机没有连接网络，无法进行视频验证",oneButtonText:"我知道了",popClose:function(){}}):p(e,n,i)}function p(e,t,n){o.show(),S.launchVideoCertification(e,t.scene,t.ecif).then(function(i){B(t,e,i,n),o.hide()})}function L(e,t){return f.checkAbility(A.APP_ABILITY.ABILITY_FACEGUIDE)?(tracelog("start getDeviceAuthType"),void S.getDeviceAuthType().then(function(n){tracelog("success end getDeviceAuthType");var i=0;-1!==[mt,pt,Lt,yt,Kt,Dt].indexOf(1*n)&&(i=1*n),P(e,i,t)},function(){tracelog("fail end getDeviceAuthType"),h(e,t)})):void h(e,t)}function y(e,t,n,i){t=t?t:"",n=n?n:"",G(),g.setEnable(!0),i.resolve({faceId:t,videoSessionId:n})}function K(e,t){e=e?e:{},e.faceId=e.faceId?e.faceId:"",e.videoSessionId=e.videoSessionId?e.videoSessionId:"",G(),g.setEnable(!0),t.reject(e)}function D(e){f.checkAbility(A.APP_ABILITY.ABILITY_FACEGUIDE)&&(G(),g.setEnable(!0),e.notify(-1))}function V(e,t){var n={};n.data={},n.func={},n.func.back=function(){G(),t.notify(-1)},n.func.verifyUserFace=function(){L(e,t)},Y("../html/common/face-guide-old-tpl.html",n,t)}function P(e,t,n){var i={};i.data={},i.func={};var r={line1:"您可尝试在手机应用权限管理中",line2:"打开微众银行的摄像头和麦克风权限"};return t===mt?void h(e,n):(t===pt||t===Lt?f.isiOSDevice()?(r.line1='请在iPhone的 "设置-隐私-相机" 选项中',r.line2="允许微众银行访问您的相机"):(r.line1="您可尝试在手机应用权限管理中",r.line2="打开微众银行的摄像头权限"):t===yt||t===Kt?f.isiOSDevice()?(r.line1='请在iPhone的 "设置-隐私-麦克风" 选项中',r.line2="允许微众银行访问您的麦克风"):(r.line="您可尝试在手机应用权限管理中",r.line2="打开微众银行的麦克风权限"):t===Dt&&(f.isiOSDevice()?(r.line1='请在iPhone的 "设置-隐私" 选项中',r.line2="允许微众银行访问您的麦克风和相机"):(r.line1="您可尝试在手机应用权限管理中",r.line2="打开微众银行的摄像头和麦克风权限")),f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.PV_FACE_PERMISSION_ERROR+"_"+t+"_"+e.scene),i.data.line1=r.line1,i.data.line2=r.line2,i.func.back=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_QUIT_PERMISSION_ERROR+e.scene),K(null,n)},void Y("../html/common/face-permission-error-tpl.html",i,n))}function M(e,t){var n={};n.data={},n.func={},n.data.canRetry=!0,n.func.back=function(){K(null,t)},n.func.verifyUserFace=function(){L(e,t)},Y("../html/common/face-failed-old-tpl.html",n,t)}function H(e,t,n){var i={};i.data={},i.func={},i.data.canRetry=!0,f.makeDebugToast(JSON.stringify(t,"long")),i.func.back=function(){var t="";null!=rt(e.scene,It,_t,!0)&&(t="_pickRight"),f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_QUIT+e.scene+t),K(null,n)},i.func.verifyUserFace=function(){var t="";null!=rt(e.scene,It,_t,!0)&&(t="_pickRight"),f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_TRY_AGAIN+e.scene+t),L(e,n)},i.func.showPickUserFromFaceFailed=function(){return e.scene==A.CHECK_FACE_SCENE_ID.BIND_CARD||e.scene==A.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT?null!=rt(e.scene,It,_t,!0):!1},null!=rt(e.scene,It,_t,!0)&&f.reportCustomEvent(A.PICK_FROM_FACE_FAILED_STATISTIC.MAIN_KEY,A.PICK_FROM_FACE_FAILED_STATISTIC.PV_FACE_FAIL_WITH_PICK_RIGHT+e.scene),at().then(function(){i.data.expectedResultTips="预计10分钟内反馈结果"},function(){i.data.expectedResultTips="预计12小时内反馈结果"}),i.func.pickUserFromFaceFailed=function(){f.reportCustomEvent(A.PICK_FROM_FACE_FAILED_STATISTIC.MAIN_KEY,A.PICK_FROM_FACE_FAILED_STATISTIC.CLK_PICK_RIGHT+e.scene);var t=ut[e.scene][ut[e.scene].length-1].faceId;K({errorCode:Vt.FAIL_WITH_YELLOW,faceId:t,videoSessionId:""},n)},i.data.prettyErrorMsgList=[],k(t)?(i.data.canRetry=!1,i.data.singleErrorMsg="无法匹配您的信息，请联系当地公安局补拍照片"):t&&t.hasOwnProperty("errorArray")&&(i.data.prettyErrorMsgList=b(t.errorArray)),Y("../html/common/face-failed-tpl.html",i,n)}function U(e,t,n){var i={};i.data={},i.func={},i.data.messageList=e,i.data.title="人工复核",i.func.back=function(){f.reportCustomEvent(A.PICK_FROM_FACE_FAILED_STATISTIC.MAIN_KEY,A.PICK_FROM_FACE_FAILED_STATISTIC.CLK_CLOSE_ON_PICK_RIGHT_RESULT+n),G(),angular.isFunction(t)&&t()},Y("../html/common/face-pop-message-error-tpl.html",i)}function k(e){if(!e||!e.hasOwnProperty("errorArray"))return!1;for(i in e.errorArray)if(e.errorArray.hasOwnProperty(i)&&"-6"==e.errorArray[i].retCode)return!0;return!1}function b(e){if(!e||0==e.length)return[];var t={"-6001":"别闹噢，竟然检测不到您的脸","-6002":"脸上光线太亮","-6003":"脸上光线太暗","-6004":"左脸光线太亮","-6005":"右脸光线太亮","-6006":"没有平视摄像头","-6008":"戴了眼镜","-6009":"人脸距离手机太近","-6010":"人脸距离手机太远","-6011":"人脸晃动幅度过大","-6012":"读数字时速度不稳定","-5008":"读错数字或噪声太大","-5013":"声音太小，请大声跟读数字"},n=[];for(i in e)if(e.hasOwnProperty(i)&&e[i]&&e[i].retCode&&e[i].retMessage){var r=e[i].retCode;if(t[r]){var o=t[r];if(!(n.length<3))break;n.push(o)}}return n}function w(e,t,n){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.PV_VIDEO_INIT+e.scene);{var i=t&&t.faceId?t.faceId:"";e&&e.scene?e.scene:""}G();var r={};r.data={},r.func={},r.data.pageStatus=St,r.data.singleErrorMsg="建议您接入人工视频进行验证",r.func.back=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_QUIT_ON_VIDEO_INIT+e.scene),K(null,n)},r.func.pickUserFromFaceFailed=function(){var t=ut[e.scene][ut[e.scene].length-1].faceId;K({errorCode:Vt.FAIL_WITH_YELLOW,faceId:t},n)},r.func.verifyUserFace=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_TRY_AGAIN_ON_VIDEO_INIT+e.scene),L(e,n)},r.func.launchVideoCertification=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_VIDEO_VERIFY+e.scene),m(i,e,n)},Y("../html/common/video-certification-tpl.html",r,n)}function B(e,t,n,i){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.PV_VIDEO_RESULT+e.scene),f.makeDebugToast(JSON.stringify(n),"long"),f.reportCustomEvent(A.REPORT_EVENT_NAME.VIDEO_CERTIFICATION_RESULT,n);var r=(f.getDate(),{title:"您未完成视频验证",msg:"",reportKey:A.VIDEO_STATISTIC.USER_ABORT}),o={title:"验证失败",msg:"",msgList:["回答问题错误","相貌与公安部照片不符"],reportKey:A.VIDEO_STATISTIC.WRONG_ANSWER},c={title:"验证失败",msg:"本次视频已全程录像，请您注意在视频中的言行举止，如存在违法行为，我行将保留移交司法机关处理的权利。",reportKey:A.VIDEO_STATISTIC.USER_DISTURB},a={title:"网络中断",msg:"建议您转移到网络状况良好的环境",msg2:"再次接入人工视频验证",reportKey:A.VIDEO_STATISTIC.NETWORK_INTERRUPTER},E={title:"连接超时",msg:"建议您转移到网络状况良好的环境进行视频验证",reportKey:A.VIDEO_STATISTIC.CONNECT_TIMEOUT},s={title:"您错过了排队等待",msg:"",reportKey:A.VIDEO_STATISTIC.MISS_QUEUE},C=101,I=102,_=110,u=111,T=200,l=201,d=202,F={},g=F.data={},R=F.func={};g.showFaceVerifyBtn=!0,g.canRetry=!0,g.retMsg=a,n.code==C||n.code==_||n.code==u?(g.pageStatus=gt,g.retMsg=a):n.code==I?(g.pageStatus=gt,g.retMsg=E):n.code==T?(g.pageStatus=St,g.singleErrorMsg="建议您接入人工视频进行验证",g.retMsg=s):n.code==l||n.code==d?(g.retMsg=n.code==l?r:a,1==n.checkResult?(g.pageStatus=Ft,g.headUrl=n.headUrl,g.videoSessionId=n.sessionId,g.name=n.name?n.name:"",x(g.videoSessionId),R.notifyVideoSuccess=function(){y(e,"",g.videoSessionId,i)},R.commitServiceScore=function(t){S.commitServiceScore(t,g.videoSessionId).then(null,function(e){Statistics.reportEvent("commitVideoRateFailed",{msg:JSON.stringify(e)})}),y(e,"",g.videoSessionId,i)}):-1!=[3,23].indexOf(n.checkResult)?(g.canRetry=!1,g.showFaceVerifyBtn=!1,g.pageStatus=gt,g.retMsg=c):-1!=[2,11,12,13,19].indexOf(n.checkResult)?(g.canRetry=!1,g.showFaceVerifyBtn=!1,g.pageStatus=gt,g.retMsg=o):-1!=[0,21,24,29].indexOf(n.checkResult)?(g.pageStatus=gt,g.retMsg=r):-1!=[4,31,39].indexOf(n.checkResult)?(g.pageStatus=gt,g.retMsg=a):-1!=[22].indexOf(n.checkResult)?(g.pageStatus=gt,g.retMsg=a):g.pageStatus=gt):g.pageStatus=gt,f.reportCustomEvent(A.REPORT_EVENT_NAME.VIDEO_CERTIFICATION,g.retMsg.reportKey+e.scene),R.back=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_QUIT_ON_VIDEO_RESULT+g.retMsg.reportKey+e.scene),K(null,i)},R.verifyUserFace=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_TRY_AGAIN_ON_VIDEO_RESULT+g.retMsg.reportKey+e.scene),L(e,i)},R.launchVideoCertification=function(){f.reportCustomEvent(A.REPORT_EVENT_NAME.FACE_VERIFICATION,A.CHECK_FACE_STATISTIC.CHECK_FACE_CLICK_VIDEO_VERIFY_ON_VIDEO_RESULT+g.retMsg.reportKey+e.scene),m(t,e,i)},Y("../html/common/video-certification-tpl.html",F,i)}function Y(e,t){At.func=t.func,At.data=t.data,G(),I(_.getTrustedResourceUrl(e)).then(function(e){lt=t.element=C(e)(At),s.append(lt),lt.addClass("pop-bg-hj"),lt.addClass("active").removeClass("invisible")},function(){})}function G(){lt&&(lt.remove(),lt=null)}function W(e){var t=null;if(e&&ft&&ft[e])t=ft[e][ft[e].length-1].faceId;else{var n=A.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT;e==A.CHECK_FACE_SCENE_ID.BIND_CARD&&ft&&ft[n]&&(t=ft[n][ft[n].length-1].faceId)}return t}function x(e){st=e}function $(){return st}function J(e){var t=null;if(!(e&&ft&&ft[e])){var n=A.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT;if(e==A.CHECK_FACE_SCENE_ID.BIND_CARD&&ft&&ft[n]&&(t=ft[n][ft[n].length-1])){var i=f.getDate();if(f.getSecondDifference(t.ts,i)<900)return!0}return!1}if(t=ft[e][ft[e].length-1]){var i=f.getDate();if(f.getSecondDifference(t.ts,i)<900)return!0}return!1}function q(e){Tt=e}function z(){return Tt}function Q(){return f.checkAbility(A.APP_ABILITY.ABILITY_FACEGUIDE)}function j(){return f.checkAbility(A.APP_ABILITY.ABILITY_VIDEO_CERTIFICATION)}function X(e,t){e&&t&&t.faceId&&(!ut[e]&&(ut[e]=[]),ut[e].push(t))}function Z(e,t){e&&t&&t.faceId&&(!ft[e]&&(ft[e]=[]),ft[e].push(t))}function et(e){return JSON.stringify(ut[e])}function tt(){ut={}}function nt(e){return E(function(t,n){S.queryVideoServiceState(e).then(function(i){tracelog(JSON.stringify(i)),It=i.strategyUseTime,_t=i.strategyFailCount;var r=!1;r=f.isiOSDevice()?"1"===i.isWorkTime:i.isWorkTime;var o=(i.workTime,i.strategyWaitNum),c=i.waitNum,a=null;return e==A.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT?n({code:Ot,message:et(e)}):(a=rt(e,It,_t,!1),null!=a&&it(e,It,_t)&&o>=c&&r?t(a):n({code:Ot,message:et(e)}))},function(){return n({code:vt,message:et(e)})})})}function it(e,t,n){if(!ut||!ut[e]||0===ut[e].length||ut[e].length<n)return!1;for(var i=1;n>=i;i++){var r=ut[e][ut[e].length-i];if(f.getDate()-r.ts>1e3*t)break;if(r&&r.faceArea!=Nt)return!1}return!0}function rt(e,t,n,i){if(!ut||!ut[e]||0===ut[e].length||ut[e].length<n)return null;for(var r=null,o=0,c=1;n>=c;c++){var a=ut[e][ut[e].length-c];f.getDate()-a.ts>1e3*t||(o++,!(null==r||a.faceNcRate>r.faceNcRate)||i&&a.faceArea!==Rt||(r=a))}return o>=n?r:null}function ot(e,t,n){e=e?e:"",t=t?t:"";var i={scene:e,ecif:t,videoEnable:n},r=E.defer();return f.checkAbility(A.APP_ABILITY.ABILITY_FACEGUIDE)?L(i,r):V(i,r),g.setEnable(!1),r.promise}function ct(e,t){at().then(function(){messageList=["已成功提交人工复核，","审核结果将在10分钟内以短信形式反馈，","敬请留意短信通知。"],U(messageList,t,e)},function(){messageList=["已成功提交人工复核，","审核结果将在12小时内以短信形式反馈，","敬请留意短信通知。"],U(messageList,t,e)})}function at(){return e.requestCommonConfig().then(function(e){var t=e.async_examine_time_start,n=e.async_examine_time_end,i=new Date,r=i.getHours()>9?i.getHours():"0"+i.getHours(),o=i.getMinutes()>9?i.getMinutes():"0"+i.getMinutes(),c=r+":"+o;return n>c&&c>t?S.resolve():S.reject()},function(){return S.reject()})}function Et(t,n,i){return E(function(r,o){e.requestExamineJoblist(t,n,i,A.FACE_CHECK_EXAMINE_TYPE.PICK_RIGHT_IN_WRONG).then(function(e){Ct=!1;var n=!1;if(e&&e.ret_data&&e.ret_data.length>0)for(var i=0;i<e.ret_data.length;i++)if(e.ret_data[i].biz_scene==t&&e.ret_data[i].check_result==A.FACE_CHECK_STATE.CHECKING){n=!0;break}r(n)},function(e){Ct=!1,o(e)})})}var st,Ct=!1,It=7200,_t=3,ut={},ft={},Tt=void 0,At=u.$new(!0),lt=null,dt="shouldShowFaceGuide",St="videoInit",Ft="videoSuccess",gt="videoFail",Rt="Y",Nt="R",Ot=1,vt=2,ht=3,mt=0,pt=1,Lt=7,yt=2,Kt=8,Dt=3,Vt={FAIL_WITH_YELLOW:"fail_with_yellow"};return R(),{getFaceId:W,getVideoCertificationSessionId:$,setVideoCertificationSessionId:x,isFaceIdValid:J,setEcif:q,getEcif:z,hasFaceGuideAbility:Q,hasVideoCertAbility:j,resetFaceFailedRecord:tt,clearAllData:N,startFaceVerify:ot,showPickUserFromFaceFailedMsg:ct,FACE_ERROR_CODE:Vt,isInAsyncExamine:Et,checkIsInWorkTime:at}}]);app.factory("AppMaskService",["essential","utils","GLOBAL_CONSTANT","$q",function(i,t,e,n){function a(i){return s||!i?(tracelog("enter setAppMaskVisibility"),t.checkAbility(e.APP_ABILITY.ABILITY_APP_MASK)?n(function(t,e){tracelog("setAppMaskVisibility: "+i);var n={};n.CmdID="AppMaskVisibility",n.flag=i,CommandChannel.execute(n,function(i){t(i)},function(i){e(i)})}):void tracelog("no setAppMaskVisibility ability")):void 0}var s=!0;return{setAppMaskVisibility:a,setEnable:function(i){s=i}}}]);"use strict";app.factory("VersionManagerService",["cgiService","HJactionPop","$q","essential","utils","envService","$http",function(t,e,o,n,_,i,r){function a(t){var e={};e.eventParam=t,e.currentVersion=A,e.targetVersion=O,Statistics.reportEvent(l.MAIN_KEY,e)}function s(){p().then(function(t){E||c(t.updateInfo,t.versionDetail)},function(t){tracelog(t)})}function u(t){t&&t.downloadUrl&&e.show({oneLineTextLeft:"即将为您下载并安装最新版本，是否继续",twoButtonText1:"取消",twoButtonText2:"更新",popClose:function(e){2==e?(a(l.VALUE_KEY.CLK_UPDATE_ON_ABOUT_CONFIRM),cordova.InAppBrowser.open(t.downloadUrl,"_system","")):a(l.VALUE_KEY.CLK_UPDATE_ON_ABOUT_CANCEL)}})}function p(){return o(function(t,e){d().then(function(o){return o&&o.updateList?void n.getVersion().then(function(n){var _=n&&n.versionString?n.versionString:null;if(A=_,_&&o.updateList[_]&&o.updateList[_].target){var i=o.updateList[_],r=o.versions[i.target];O=i.target,t({updateInfo:i,versionDetail:r})}else e("no update")},function(){e("get version error")}):void e("no native update info")},function(){e("request update failed")})})}function c(t,o){E=!0;var n="";1==t.isForce?(n=o.forceTitle,a(l.VALUE_KEY.PV_FORCE_UPDATE),e.show({multiLineText:{head:n,items:["您的客户端版本过低, 为了更好的为您提供服务, 并且保证您的账户安全, 建议您升级到最新版本."]},oneButtonText:"更新("+o.pkgSize+")",doNotDismiss:!0,popClose:function(){a(l.VALUE_KEY.CLK_FORCE_DOWNLOAD),cordova.InAppBrowser.open(o.downloadUrl,"_system","")}})):(n=o.optionTitle,a(l.VALUE_KEY.PV_OPTION_UPDATE),e.show({multiLineText:{head:n,items:o.desc},twoButtonText1:"忽略",twoButtonText2:"更新("+o.pkgSize+")",popClose:function(t){2===t?(a(l.VALUE_KEY.CLK_OPTION_DOWNLOAD),cordova.InAppBrowser.open(o.downloadUrl,"_system","")):a(l.VALUE_KEY.CLK_OPTION_CANCEL)}}))}function d(){var t="";return t=_.isiOSDevice()?i.getEnvVariable().WEBANK_CDN+"s/hj/appconf/ios/update_version.json":i.getEnvVariable().WEBANK_CDN+"s/hj/appconf/android/update_version.json",o(function(e,o){t=decodeURIComponent(t),r.get(t).success(function(t){e(t)}).error(function(){o()})})}var E=!1,A="",O="",l={MAIN_KEY:"app_update",VALUE_KEY:{PV_FORCE_UPDATE:"pv_force_udpate",CLK_FORCE_DOWNLOAD:"clk_force_download",PV_OPTION_UPDATE:"pv_option_udpate",CLK_OPTION_CANCEL:"clk_option_cancel",CLK_OPTION_DOWNLOAD:"clk_option_download",PV_UPDATE_SHOW_ON_ABOUT:"pv_update_show_on_about",CLK_UPDATE_ON_ABOUT:"clk_update_on_about",CLK_UPDATE_ON_ABOUT_CANCEL:"clk_update_on_about_cancel",CLK_UPDATE_ON_ABOUT_CONFIRM:"clk_update_on_about_confirm"}};return{tryUpdateNativeVersion:s,checkUpdate:p,showUpdateConfirmDlg:u,STATISTIC:l,report:a}}]);"use strict";app.factory("InfoPhoneService",["commonPath",function(n){return $.extend({},n,{locationHash:"/phone"})}]);"use strict";app.factory("InfoResetPhoneService",["commonPath","cache","HJactionPop","CheckFaceService","commonDirectiveService","GLOBAL_CONSTANT","utils","$timeout",function(e,t,n,o,c,a,i,f){return $.extend({},e,{locationHash:"/resetPhone",perGoPage:function(e,t,n,o,c){this.perCheck(e,t,n,o,c)},perCheck:function(e){var r=!1,u=t.getCacheInfo("personalInfo");u&&u.acct_type&&1*u.acct_type==4&&(r=!0),r?n.show({oneLineTextLeft:"需要先通过人脸验证，是否继续？",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(n){if(2==n){var c=t.getCacheInfo("personalInfo"),r=c&&c.ecif_no?c.ecif_no:"";o.startFaceVerify(a.CHECK_FACE_SCENE_ID.RESET_PWD,r).then(function(t){f(function(){i.makeToast("人脸验证通过","short")},500),e(null,null,{faceId:t.faceId})})}}}):c.verifyPassword({pwdSubTitle:"验证身份",callback:function(t){e(null,null,{pwd:t})}})}})}]);"use strict";app.factory("BindInfoService",["commonPath",function(n){return $.extend({},n,{locationHash:"/bindInfo"})}]);"use strict";app.factory("ManagePasswordService",["commonPath",function(a){return $.extend({},a,{locationHash:"/managePassword"})}]);"use strict";app.factory("HandPasswordService",["$location","commonPath","localStorageService","cache","GLOBAL_CONSTANT","LoginService","essential","$timeout","utils","$ionicViewSwitcher","cgiService","$MD5","JumpToModuleService","$ionicHistory",function(n,a,e,t,i,s,o,c,r,d,l,u,P,h){var g="/handPassword",f="Key_LocalHandPass_Lock",H=!1,_="",p=!0,A=null,T=null,S=null,k=function(){o.logout().then(function(){t.clear(),t.setUserStatus(i.ACCOUNT_STATE.USER_STATE_GUEST);var a={};a.username="",a.picurl="../img/tx@2x.png",a.platform="",a.openid="",a.token="",t.setUserInfo(a),d.nextTransition("none"),n.path("/login")},function(){})},v=function(){c(function(){d.nextTransition("none"),n.path("/ChangeHandPassword/nativeHandPass")})},C=function(n){c(function(){if(tracelog("onNativeEnteredHandPass,pass:"+n),n){var a=t.getCacheInfo("personalInfo");if(a&&a.webank_card_no&&a.ecif_no){var e=a.ecif_no;n=u(n+e),T?(T(n),T=null):l.requestUpdateHandPassword(n,"").then(function(){r.makeToast("手势密码设置成功");var a=t.getCacheInfo("personalInfo");a&&a.webank_card_no&&""!=a.webank_card_no&&(a.gesture_password=n);var e=t.getUserInfo();if(e){var i=e.openid,s=e.picurl,o=e.username;NativeHandPassBirdge.updateNativeHandPassConfig(n,i,s,o),NativeHandPassBirdge.clearLock(i)}},function(n){r.makeToast(n.ret_msg)})}}})};return $.extend({},a,{locationHash:g,setLoacalHandPwd:function(n){_=n},setHandpassLock:function(n){H=n;var a=t.getUserInfo();if(a){var i=a.openid;i&&e.set(f+i,H)}},getLocalHandpwd:function(){return _},gethandpassLock:function(){var n=t.getUserInfo();if(n){var a=n.openid;return H=a?e.get(f+a):!1}return!1},setCheckHandWhenLoginFlag:function(n){p=n},hasLocalHandpwd:function(){return _&&""!=_},finishSetting:function(){P.updateAppState(i.JUMP_APP_DEPENDS_STATE.HAND_PASS,!0),!h.backView()||h.backView()&&"init"==h.backView().stateName?n.path("/home"):this.backPage()},finishCheck:function(){S=null,P.updateAppState(i.JUMP_APP_DEPENDS_STATE.HAND_PASS,!0),"function"==typeof A?(tracelog("finishCheck,checkSucPage is fnction"),A(),s.setCallbackPage("","")):"string"==typeof A?(tracelog("finishCheck,checkSucPage="+A),""==A&&(A="home"),n.path("/"+A),A=null,s.setCallbackPage("","")):(tracelog("finishCheck,default"),n.path("/home"))},getDefPara:function(n){return A=n,this.hasLocalHandpwd()?this.getCheckHandPara():this.getSettingHandPara("")},getCheckHandPara:function(){return"checkHand/"},getSettingHandPara:function(n){var a="setHand";return n||(n=""),a=a+"/"+n},onNativeClickChangeHandpass:function(){tracelog("native click changeHandPass"),v(),r.clickButtonReport("gesture-forget")},onNativeClickRelogin:function(){tracelog("native click reloginLogin"),k(),r.clickButtonReport("gesture-other")},onNativeEnteredHandpass:function(n){tracelog("native call entered handpass"),C(n)},startHandPassword:function(n,a){if(p){var e=t.getCacheInfo("personalInfo");if(a&&null!=a.handpass||e&&e.webank_card_no&&""!=e.webank_card_no){var s=a&&null!=a.handpass?a.handpass:e.gesture_password;if(this.setLoacalHandPwd(s),S=a,t.getUserStatus()==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT)if(this.setCheckHandWhenLoginFlag(!1),P.updateAppState(i.JUMP_APP_DEPENDS_STATE.HAND_PASS,!1),APP_ABILITY&&APP_ABILITY.indexOf(i.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0){if(this.getDefPara(n),this.hasLocalHandpwd()){var o=t.getUserInfo();if(o){var c=o.openid,r=o.picurl,d=o.username;NativeHandPassBirdge.showVerifyHandPass(s,c,r,d)}}else NativeHandPassBirdge.showSettingHandPass();this.finishCheck()}else this.goPage(this.getDefPara(n),null,null,null,!0)}}},startHandPasswordWhenResume:function(){var n=t.getCacheInfo("personalInfo");if(!n||!n.webank_card_no||""==n.webank_card_no)return this.setCheckHandWhenLoginFlag(!0),void c(function(){r.goToErrorPage("personalInfo err")},100);var a=n.gesture_password;this.setLoacalHandPwd(a),P.updateAppState(i.JUMP_APP_DEPENDS_STATE.HAND_PASS,!1),this.goPage(this.getDefPara()),this.setCheckHandWhenLoginFlag(!1)},startSettingHandPassword:function(n){APP_ABILITY&&APP_ABILITY.indexOf(i.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0&&(P.updateAppState(i.JUMP_APP_DEPENDS_STATE.HAND_PASS,!1),T=n,NativeHandPassBirdge.showSettingHandPass(this.onNativeEnteredHandpass))},getCachedHandPass:function(){return S},clearCachedHandPass:function(){S=null},init:function(){this.setCheckHandWhenLoginFlag(!0),H=!1,this.setLoacalHandPwd(""),A=null,NativeHandPassBirdge.clickChangeHandPass=this.onNativeClickChangeHandpass,NativeHandPassBirdge.clickRelogin=this.onNativeClickRelogin,NativeHandPassBirdge.enteredHandPass=this.onNativeEnteredHandpass}})}]);var HAND_START_AT_TIME=60,NativeHandPassBirdge={clickChangeHandPass:null,clickRelogin:null,enteredHandPass:null,showVerifyHandPass:function(n,a,e,t){var i={};i.CmdID="handPassWord",i.Pass=n,i.Type="Verify_Hand",i.Pass=n,i.OpenID=a,i.Head=e,i.Nick=t,i.BackTime=HAND_START_AT_TIME+"",CommandChannel.execute(i,function(){},function(){})},showSettingHandPass:function(){var n={};n.CmdID="handPassWord",n.Pass="",n.Type="Setting_Hand",n.BackTime=HAND_START_AT_TIME+"",CommandChannel.execute(n,function(){},function(){})},updateNativeHandPassConfig:function(n,a,e,t){var i={};i.CmdID="handPassWord",i.Type="Update_Config",i.Pass=n,i.OpenID=a,i.Head=e,i.Nick=t,i.BackTime=HAND_START_AT_TIME+"",CommandChannel.execute(i,function(){},function(){})},clearLock:function(n){var a={};a.CmdID="handPassWord",a.Type="Clear_lock",a.OpenID=n,CommandChannel.execute(a,function(){},function(){})},onNativeClickChangeHand:function(){this.clickChangeHandPass&&this.clickChangeHandPass()},onNativeClickRelogin:function(){this.clickRelogin&&this.clickRelogin()},onNativeEnteredHandPass:function(n){this.enteredHandPass&&this.enteredHandPass(n)}};navigator.NativeHandPassBirdge=NativeHandPassBirdge;app.factory("TransRecordService",["commonPath",function(n){return $.extend({},n,{locationHash:"/transRecord"})}]);"use strict";app.factory("AnnouncementService",["$location","commonPath","dataService","envService",function(t,e,n,o){return $.extend({},e,{locationHash:"/announcement",getBuyNotice:function(t,e){var c=o.getEnvVariable().DATA_NOTICE,i=function(t){if("function"==typeof e)if(t&&t.length>0){t.sort(function(t,e){return t.show_sort-e.show_sort});var n=t[0];n.strTitle=n.notice_title,n.strDesc=n.notice_desc,n.pdfUrl=c+n.location,n.strDate=getDateStr(n.upload_date,n.upload_time),e(n)}else e(null)};n.getBuyNotice(t).then(i,function(){"function"==typeof e&&e(null)},i)}})}]);"use strict";app.factory("WebankCardService",["commonPath",function(a){return $.extend({},a,{locationHash:"/webankCard"})}]);"use strict";app.factory("WebankIntroduceService",["commonPath",function(e){return $.extend({},e,{locationHash:"/webankIntroduce"})}]);"use strict";app.factory("BindingCardDetailService",["$location","commonPath",function(n,i){var o=null;return $.extend({},i,{locationHash:"/viewCardInfo",saveSession:function(n){n&&(o=JSON.stringify(n))},loadSession:function(){return o?JSON.parse(o):null}})}]);"use strict";app.factory("AboutService",["$location","commonPath",function(t,o){return $.extend({},o,{locationHash:"/about"})}]);"use strict";app.factory("HelpDetailService",["$location","commonPath",function(t,e){return $.extend({},e,{locationHash:"/helpDetail"})}]);"use strict";app.factory("SecurityService",["cgiService",function(n){var i=function(i){var t={module_id:"APP_SRCFILE_SECURE",data_list:{info:i.join("|")}};n.requestReportToTencent(t).then(function(n){},function(n){})},t=function(n){},e={ios:function(){CommandChannel.execute({CmdID:"iOSSecurity"},function(n){i([n.signerIdentity,n.WebankApp,n["verify.signature"]])},t)},android:function(){}};return{check:function(){ionic.Platform.isIOS()?e.ios():ionic.Platform.isAndroid()&&e.android()}}}]);app.factory("ProdInfoService",["localStorage","cgiService","$q","utils","$timeout",function(e,t,o,n,r){function _(t,o){r(function(){e.saveData(t,o)})}function a(t,o,n){if(n&&n.sub_product){e.saveData("prodInfo_"+n.prod_code,o);for(var r in n.sub_product)if(n.sub_product[r]&&n.sub_product[r].prod_code){var a={};a.linkCode=n.prod_code,_("prodInfo_"+n.sub_product[r].prod_code,a)}}else e.saveData("prodInfo_"+t,o)}function d(t){var o=e.loadData("prodInfo_"+t);return o&&o.linkCode?e.loadData("prodInfo_"+o.linkCode):o}function p(e,t,o){if(o&&o.sub_product){u[o.prod_code]=t;for(var n in o.sub_product)o.sub_product[n]&&o.sub_product[n].prod_code&&(u[o.sub_product[n].prod_code]={linkCode:o.prod_code})}else u[e]=t}function c(e){var t=u[e];return t&&t.linkCode?u[t.linkCode]:t}var u={},i=function(e){return o(function(o,r){var _={},u=[],i=!0,f=n.arrayUnique(e);$.each(f,function(e,t){var o={};o.name=t,o.sign="";var n=c(t);if(n)s(n.content),_[t]=n.content,o.sign=n.sign;else{var r=d(t);r?(s(r.content),p(t,r,r.content),_[t]=r.content,o.sign=r.sign):i=!1}u.push(o)}),i&&o(_);var l={};l.productInfoList=u,t.requestProdInfoByCode(l).then(function(e){e.ret_data&&e.ret_data.productInfoList&&$.each(e.ret_data.productInfoList,function(e,t){if(t&&t.changed&&t.content&&""!=t.content)try{var o=JSON.parse(t.content);if(o){s(o);var n={};n.sign=t.sign,n.content=o,a(o.prod_code,n,o),p(o.prod_code,n,o),_[o.prod_code]=o}}catch(r){tracelog("解析产品信息失败:"+t.name)}}),i||o(_)},function(){r(_)})})},f=function(e){var t=c(e);if(t)return s(t.content),t.content;var o=d(e);return o?(p(e,o,o.content),s(o.content),o.content):void 0},s=function(e){1==e.product_type&&2==e.templet_type?l(e):1!=e.product_type&&3!=e.product_type||0!=e.templet_type?2==e.product_type?m(e):0==e.product_type?v(e):4==e.product_type:y(e)},l=function(e){e.age_down_limit=parseInt(e.age_down_limit,10),e.age_up_limit=parseInt(e.age_up_limit,10),e.buy_confirm_day=parseInt(e.buy_confirm_day,10),e.expe_income_rate=parseFloat(e.expe_income_rate).toFixed(2),e.hesitation_period=parseInt(e.hesitation_period,10),e.p_refund_step=e.p_refund_step?parseInt(e.p_refund_step):1},y=function(e){e.increase_amount||(e.increase_amount=1),e.append_buy_increment_min_amount||(e.append_buy_increment_min_amount=1),void 0==e.refund_arrival_days&&(e.refund_arrival_days=3),e.roll_prod_code&&""!=e.roll_prod_code||(e.can_roll="0"),e.can_redeem_type_principal&&"1"==e.can_redeem_type_principal&&(e.can_roll="0"),void 0==e.p_buy_max_amount&&(e.p_buy_max_amount=0),void 0==e.p_day_buy_total_amount&&(e.p_day_buy_total_amount=0),"QL21"==e.on_sale_code&&(e.product_type=3)},m=function(e){e.offer_buy_fee_rate&&(e.offer_buy_fee_rate=e.offer_buy_fee_rate.split("%")[0]),e.trade_fee_rate&&e.trade_fee_rate.apply_buy_fee_rate&&(e.trade_fee_rate.apply_buy_fee_rate=e.trade_fee_rate.apply_buy_fee_rate.split("%")[0]),void 0==e.refund_arrival_days&&(e.refund_arrival_days=3)},v=function(){};return{requestProdInfo:i,getProdInfo:f}}]);app.factory("JumpToModuleService",["utils","GLOBAL_CONSTANT","$interval","LocationService","ProdCommonActionService","essential",function(e,r,o,E,_,n){var P=r.JUMP_APP_DEPENDS_STATE,a=[P.APP_INIT,P.DEFAULT_DATA],u=[P.APP_INIT,P.HAND_PASS,P.HOME_DATA],t=null,i={},T=r.JUMP_APP_SUB_TYPE,A=new Array,p={},m=null,M=200,s=0,O=function(r,o,E){try{if(!r||!o)return;t||(t={}),t.subType=r,t.moduleType=o,t.jumpParam=E;var E=e.base64decode(t.jumpParam),_=JSON.parse(E);if(t.jumpParamJson=_,tracelog("jumpToModule:subType="+r+",moduleType="+o+",jumpParam"+E+",jumpParamJson"+JSON.stringify(_)),t.jumpParamJson)if(e.isiOSDevice()){if(t.jumpParamJson.iosMinVer&&H5_Ver<t.jumpParamJson.iosMinVer)return void tracelog("jumpToModule: ios H5ver too low")}else if(t.jumpParamJson.andridMinVer&&H5_Ver<t.jumpParamJson.andridMinVer)return void tracelog("jumpToModule: android H5ver too low");l()}catch(n){}},l=function(){t&&(s=e.getDate(),m=o(function(){D()},M))},D=function(){var r=e.getDate();if(r-s>3e5)return U(),void f();for(var o=0;o<A.length;o++){for(var E=A[o],_=0,n=0;n<E.length;n++){var P=E[n];if(!i[P]||0==i[P])break;_++}_==E.length&&N(E)}},N=function(e){if(t&&e&&1!=window.isChangingWebankToken)if(e!=a||t.subType!=T.DEPENDS_TOKEN||t.hasJumpToLogin)for(var r=0;r<p[e].length;r++){var o=p[e][r];if(o==t.subType){J(t),U(),f();break}}else t.hasJumpToLogin=!0,E.go("/login")},f=function(){o.cancel(m),m=null},J=function(e){if(e&&t.jumpParamJson){var o=t.jumpParamJson.action_param;o&&(e.moduleType==r.JUMP_APP_MODULE_TYPE.MODULE_WEBVIEW?(tracelog("startJump : MODULE_WEBVIEW"),n.openInAppBrowser(o)):e.moduleType==r.JUMP_APP_MODULE_TYPE.MODULE_PROD_DETAIL?(tracelog("startJump : MODULE_PROD_DETAIL"),_.onClickProd(o)):e.moduleType==r.JUMP_APP_MODULE_TYPE.MODULE_APP_NORMALPAGE&&(tracelog("startJump : MODULE_APP_NORMALPAGE"),E.go(o)))}},U=function(){t=null},d=function(){A=[a,u],p[a]=[T.DEPENDS_NONE],p[u]=[T.DEPENDS_NONE,T.DEPENDS_TOKEN]};return d(),{onAndroidNativeJump:function(o,E){if(e.reportCustomEvent(r.REPORT_EVENT_NAME.JUMP_ANDROID_NATIVE,o+","+E),o&&E&&(o==r.ANDROID_NATIVE_JUMP_FROM.XG||o==r.ANDROID_NATIVE_JUMP_FROM.URLSCHEME)){var _=E.subType,n=E.moduleType,P=E.jumpParam;O(_,n,P)}},onIOSNativeJump:function(o,E){if(e.reportCustomEvent(r.REPORT_EVENT_NAME.JUMP_IOS_NATIVE,o+","+E),o&&E)if(o==r.IOS_NATIVE_JUMP_FROM.XG_LAUNCH||o==r.IOS_NATIVE_JUMP_FROM.XG_REMOTE){var _=E.subType,n=E.moduleType,P=E.jumpParam;O(_,n,P)}else if(o==r.IOS_NATIVE_JUMP_FROM.URLSCHEME_LAUNCH||o==r.IOS_NATIVE_JUMP_FROM.URLSCHEME_REMOTE){var a=E.split("&"),u={};if(a&&a.length>0)for(var t=0;t<a.length;t++){var i=a[t],T=i.substr(0,i.indexOf("=")),A=i.substr(i.indexOf("=")+1);u[T]=A}var _=u.subType,n=u.moduleType,P=u.jumpParam;O(_,n,P)}},onSplashJump:function(o){if(e.reportCustomEvent(r.REPORT_EVENT_NAME.JUMP_SPLASH_NATIVE,o),o){var E=o.split("&"),_={};if(E&&E.length>0)for(var n=0;n<E.length;n++){var P=E[n],a=P.substr(0,P.indexOf("=")),u=P.substr(P.indexOf("=")+1);_[a]=u}var t=_.subType,i=_.moduleType,T=_.jumpParam;O(t,i,T)}},onWebViewJump:function(o,E){if(e.reportCustomEvent(r.REPORT_EVENT_NAME.JUMP_WEBVIEW_NATIVE,o+","+E),o&&E&&(o==r.IOS_NATIVE_JUMP_FROM.WEBVIEW_JUMP||o==r.ANDROID_NATIVE_JUMP_FROM.WEBVIEW_JUMP)){var _=e.base64decode(E),n=_.split("&"),P={};if(n&&n.length>0)for(var a=0;a<n.length;a++){var u=n[a],t=u.substr(0,u.indexOf("=")),i=u.substr(u.indexOf("=")+1);P[t]=i}var T=P.subType,A=P.moduleType,p=P.jumpParam;O(T,A,p)}},updateAppState:function(e,o){i||(i={}),e==r.JUMP_APP_DEPENDS_STATE.APP_INIT||(e==r.JUMP_APP_DEPENDS_STATE.HOME_DATA?1==o&&(i[r.JUMP_APP_DEPENDS_STATE.DEFAULT_DATA]=!1):e==r.JUMP_APP_DEPENDS_STATE.DEFAULT_DATA&&1==o&&(i[r.JUMP_APP_DEPENDS_STATE.HOME_DATA]=!1)),i[e]=o},destory:function(){i=null}}}]);app.factory("NativeCallService",["utils","GLOBAL_CONSTANT","JumpToModuleService","essential","cache",function(utils,GLOBAL_CONSTANT,JumpToModuleService,essential,cache){var onAndroidNativeCall=function(arg){arg&&""!=arg&&(arg=eval("("+arg+")"),arg.ActionName&&(arg.ActionName==GLOBAL_CONSTANT.ANDROID_NATIVE_JUMP_FROM.XG||arg.ActionName==GLOBAL_CONSTANT.ANDROID_NATIVE_JUMP_FROM.URLSCHEME?JumpToModuleService.onAndroidNativeJump(arg.ActionName,arg.ActionContent):arg.ActionName==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.WEBVIEW_JUMP&&JumpToModuleService.onWebViewJump(arg.ActionName,arg.ActionContent)))},onIOSNativeCall=function(e){if(tracelog("onIOSNativeCall:"+JSON.stringify(e)),e&&e.CmdID&&"guideViewShowFinished"===e.CmdID)return void(window.guideViewShowFinished=!0);var n=cache.getDeviceInfo(),a=null;n?(a=parseInt(n.versionCode),handleIOSNativeCall(e,a)):essential.getVersion().then(function(n){a=parseInt(n.versionCode),handleIOSNativeCall(e,a)})},handleIOSNativeCall=function(e,n){try{if(!e)return;var a={},i=null,o=null;if(100505>n){var t=e.replace(/\n/g,"");t=t.replace(/\"{/g,"{"),t=t.replace(/}\"/g,"}"),a=JSON.parse(t),i=a.ActionName,o=a.ActionContent}else a=e,i=a.ActionName,o=a.ActionContent,(i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.XG_LAUNCH||i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.XG_REMOTE)&&(o=JSON.parse(o));a&&i&&(i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.URLSCHEME_LAUNCH||i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.URLSCHEME_REMOTE?JumpToModuleService.onIOSNativeJump(i,o):i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.XG_LAUNCH||i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.XG_REMOTE?JumpToModuleService.onIOSNativeJump(i,o):i==GLOBAL_CONSTANT.IOS_NATIVE_JUMP_FROM.WEBVIEW_JUMP&&JumpToModuleService.onWebViewJump(i,o))}catch(N){}},onOperateSplashNativeCall=function(e,n){e&&("JUMP_TO_WEBVIEW"==e?n&&essential.openInAppBrowser(n):"JUMP_TO_APP"==e&&n&&JumpToModuleService.onSplashJump(n))},bindFunction=function(){navigator.onAndroidNativeCall=onAndroidNativeCall,navigator.onOperateSplashNativeCall=onOperateSplashNativeCall,navigator.onIOSNativeCall=onIOSNativeCall};return bindFunction(),{init:function(){bindFunction()}}}]);app.factory("CGIStatisticService",["$q","GLOBAL_CONSTANT","$location","utils","cache","envService","$http",function(e,t,i,n,r,a,o){var _=!1,s=!1;return{requestConfig:function(){if(!s){var e=r.getCacheInfo("personalInfo");if(e){s=!0;var t=a.getEnvVariable().CGI_PREFIX+"check_whitelist",i={};i.type=2,i.id=e.ecif_no,this.get(t,i).then(function(e){"true"==e.ret_data.in&&(_=!0)})}}},get:function(i,n){return e(function(e,_){var s=r.getDeviceInfo(),d=r.getUserInfo(),p={};p.app_ver_code=s.versionCode,p.app_ver=s.versionString,p.terminal_type=s.terminal_type,p.os_ver=s.os_ver,p.h5_ver=H5_Ver,p.net_type="",p.imei=s.uuid,p.mid=s.mid,p.machine_info=s.machine_info,p.uid_type=d.platform,p.uid=d.openid,p.session=d.token,p.session_type="token",p.wx_union_id=d.unionid,p.channel_id=s.channelID||"",t.LOGIN_PLAT.QQ===p.uid_type?p.appid=a.getEnvVariable().QQ_APPID:t.LOGIN_PLAT.WX===p.uid_type?p.appid=a.getEnvVariable().WX_APPID:t.LOGIN_PLAT.PHONE===p.uid_type&&(p.appid=a.getEnvVariable().QQ_APPID),n&&(p.param=JSON.stringify(n)),o.get(i,{params:p}).then(function(i){var n=i.data;return n.ret_code!==t.CGI_RET.CGI_SUCCESS&&n.ret_code!==t.CGI_RET.CGI_SUCCESS_2&&n.ret_code!==t.CGI_RET.CGI_PROCESSING&&n.ret_code!==t.CGI_RET.CGI_COMBINED_BUY?_(n):e(n)},function(e){if(e.data&&e.data.ret_code&&e.data.ret_msg)_(e.data);else{var t={};t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,_(t)}})})},post:function(i,n){return e(function(e,_){var s=r.getDeviceInfo(),d=r.getUserInfo(),p={};p.app_ver_code=s.versionCode,p.app_ver=s.versionString,p.terminal_type=s.terminal_type,p.os_ver=s.os_ver,p.h5_ver=H5_Ver,p.net_type="",p.imei=s.uuid,p.mid=s.mid,p.machine_info=s.machine_info,p.uid_type=d.platform,p.uid=d.openid,p.session=d.token,p.session_type="token",p.wx_union_id=d.unionid,p.channel_id=s.channelID||"",t.LOGIN_PLAT.QQ===p.uid_type?p.appid=a.getEnvVariable().QQ_APPID:t.LOGIN_PLAT.WX===p.uid_type?p.appid=a.getEnvVariable().WX_APPID:t.LOGIN_PLAT.PHONE===p.uid_type&&(p.appid=a.getEnvVariable().QQ_APPID),o.post(i,n,{params:p}).then(function(i){var n=i.data;return n.ret_code!==t.CGI_RET.CGI_SUCCESS&&n.ret_code!==t.CGI_RET.CGI_SUCCESS_2&&n.ret_code!==t.CGI_RET.CGI_PROCESSING&&n.ret_code!==t.CGI_RET.CGI_COMBINED_BUY?_(n):e(n)},function(e){if(e.data&&e.data.ret_code&&e.data.ret_msg)_(e.data);else{var t={};t.ret_msg="系统繁忙，请稍后再试。",t.ret_code=e.status,_(t)}})})},doReportCGIVerboseInfo:function(e,t){try{var i={};i.module_id="CLIENT_PARAMS_DETAIL",i.data_list=[];var n={};n.info=e.cgiName+"|"+JSON.stringify(e.cgiParams)+"|"+JSON.stringify(e.userParams)+"|"+JSON.stringify(e.retData)+"|"+e.timeConsuming,i.data_list.push(n),this.post(t,i)}catch(r){tracelog("something wrong")}},reportToMTA:function(e){if(e&&!DEBUG){var t={};t.cgiName=e.cgiName,t.timeConsuming=e.timeConsuming,t.status=e.status,t.resultType=e.resultType,t.retCode=e.retCode,Statistics.reportInterface(t)}},doReportCGIInfo:function(e,t){_&&this.doReportCGIVerboseInfo(e,t)},reportTencentCGIInfo:function(e){if(this.reportToMTA(e),r.getUserStatus()==t.ACCOUNT_STATE.USER_STATE_LOGIN){var i=a.getEnvVariable().CGI_PREFIX+"data/report_v2";this.doReportCGIInfo(e,i)}},reportCGIInfo:function(e){var t=a.getEnvVariable().CGI_PREFIX+"data/report_v2";this.reportToMTA(e),this.doReportCGIInfo(e,t)}}}]);app.factory("SecurityScanService",["GLOBAL_CONSTANT","utils","localStorage","essential","cgiService",function(t,e,a,n,S){function r(){if(c(),e.checkAbility(t.APP_ABILITY.ABILITY_SECURITY_SCAN)){var r=6048e5,s=a.loadDataByUser(t.SECURITY_SCAN.LAST_SCAN_TIME);s=null==s?0:s,1==a.loadDataByUser(t.SECURITY_SCAN.ENABLE_KEY)&&i()-s>r&&(a.saveDataByUser(t.SECURITY_SCAN.LAST_SCAN_TIME,i()),tracelog("startSecurityScan"),e.makeDebugToast("startSecurityScan"),S.requestCommonConfig().then(function(t){t&&1==t.qq_guanjia_sdk_open&&n.startSecurityScan().then(function(t){Statistics.reportEvent("SecurityScan",{result:JSON.stringify(t)})},function(t){Statistics.reportEvent("SecurityScan",{result:JSON.stringify(t)})})}))}}function i(){return(new Date).getTime()}function c(){null===a.loadDataByUser(t.SECURITY_SCAN.ENABLE_KEY)&&a.saveDataByUser(t.SECURITY_SCAN.ENABLE_KEY,"1")}return{startScan:r}}]);"use strict";app.factory("InviteService",["commonPath","$q","cgiService","WebService",function(t,e,n,i){function r(){tracelog("set invite red point"),a=!0}function u(){return e(function(t,e){i.get("welfare/whitelist",null,null,"CGI_PREFIX_OP").then(function(n){n&&n.ret_data?t(n.ret_data):e()},function(t){e()})})}function c(){return e(function(t,e){i.get("welfare/getinvitecode",null,null,"CGI_PREFIX_OP").then(function(n){n&&n.ret_data?t(n.ret_data):e()},function(t){e(t)})})}function o(){return e(function(t,e){i.get("welfare/queryinviter",null,null,"CGI_PREFIX_OP").then(function(n){n&&n.ret_data?t(n.ret_data):e()},function(t){e(t)})})}var a=!1;return $.extend({requestInviter:o,requestInviteCode:c,requestInviteWhiteList:u,setRedPoint:r,clearRedPoint:function(){n.clearMessageByRichType("red").then(function(){a=!1})},getRedPoint:function(){return a},USER_TYPE:{DITUI:"ditui",SEED:"seed",NORMAL:"normal"}},t,{locationHash:"/invite"})}]);app.factory("TransferHomeService",["commonPath",function(e){return $.extend({},e,{locationHash:"/transHome"})}]);app.factory("TransferInService",["commonPath","GLOBAL_CONSTANT","$timeout","dataService","AnnouncementService","webankCommonService","HJactionPop","BindCardVerifyPromptService",function(n,e,o,t,c,i,u,a){var r=null;return $.extend({},n,{locationHash:"/transIn",saveSession:function(n){r=n},getSession:function(){return r},clearSession:function(){r=null},perGoPage:function(n,r,l,f){if(i.doesAccountNeedTransVerificationV2())return void u.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(n){2==n&&a.goPage()}});var s=function(e){e=e||0,n(r,l,f,{backNum:e})},S=function(){var n=function(n){v&&(o.cancel(v),v=null,n&&n.length>0?c.goPage(null,null,{code:T,successCallback:function(){s(1)}}):s(0))};t.getBuyNotice({code:T}).then(n,function(){v&&(o.cancel(v),v=null,s(0))},n)},v=null,T="001234",d=f&&f.type;T&&d&&d==e.TRANS_TYPE.CURRENT_PLUS?(v=o(function(){v=null,s()},2e3),S()):s()}})}]);app.factory("TransferOutServiceV2",["commonPath",function(n){var t=null;return $.extend({},n,{locationHash:"/transOutV2",saveSession:function(n){t=JSON.parse(JSON.stringify(n))},getSession:function(){return t},clearSession:function(){t=null}})}]);app.factory("TransferOutService",["commonPath","HJactionPop","BindCardVerifyPromptService","webankCommonService",function(n,e,o,t){var i=null;return $.extend({},n,{locationHash:"/transOut",perGoPage:function(n,i,r,a,c){return t.doesAccountNeedTransVerificationV2()?void e.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(n){2==n&&o.goPage()}}):void n(i,r,a,c)},saveSession:function(n){i=n},getSession:function(){return i},clearSession:function(){i=null}})}]);app.factory("PlanServiceV2",["commonPath","utils","HJactionMenu","$q",function(e,t,n,a){var r=null;return $.extend({},e,{locationHash:"/planV2",getNextPlanExecuteDate:function(e){if(e>28||1>e)return null;var t=new Date,n=t.getFullYear(),a=t.getMonth();return t.getDate()>=e&&(11==a?(n++,a=0):a++),new Date(n,a,e)},getNextPlanExecuteDateByUser:function(e){return a(function(a,r){if(e>28||1>e)return void r();var o=t.getDate(),u=o.getFullYear(),c=o.getMonth(),l=0,i=u;11==c?(l=0,i=u+1):l=c+1;var f="本月（"+(c+1)+"月"+e+"日）开始执行",s="下个月（"+(l+1)+"月"+e+"日）开始执行";n.show({headText:"请设置计划修改后开始执行的时间",buttonStyleArr:["color:#f24b35;"],buttonArr:[f,s],cancenText:"取消",clickCallback:function(t){0==t?a(new Date(u,c,e)):1==t?a(new Date(i,l,e)):r()}})})},saveSession:function(e){r=e},getSession:function(){return r},clearSession:function(){r=null}})}]);app.factory("PlanService",["commonPath","utils","HJactionMenu","$q",function(e,t,n,a){var r=null;return $.extend({},e,{locationHash:"/plan",getNextPlanExecuteDate:function(e){if(e>28||1>e)return null;var n=t.getDate(),a=n.getFullYear(),r=n.getMonth();return n.getDate()>=e&&(11==r?(a++,r=0):r++),new Date(a,r,e)},getNextPlanExecuteDateByUser:function(e){return a(function(a,r){if(e>28||1>e)return void r();var o=t.getDate(),u=o.getFullYear(),c=o.getMonth(),l=0,i=u;11==c?(l=0,i=u+1):l=c+1;var f="本月（"+(c+1)+"月"+e+"日）开始执行",s="下个月（"+(l+1)+"月"+e+"日）开始执行";n.show({headText:"请设置计划修改后开始执行的时间",buttonStyleArr:["color:#f24b35;"],buttonArr:[f,s],cancenText:"取消",clickCallback:function(t){0==t?a(new Date(u,c,e)):1==t?a(new Date(i,l,e)):r()}})})},saveSession:function(e){r=e},getSession:function(){return r},clearSession:function(){r=null}})}]);app.factory("MortgatePlanService",["commonPath","utils",function(e,t){var n=null;return $.extend({},e,{locationHash:"/planMortgage",getNextPlanExecuteDate:function(e){if(e>28||1>e)return null;var n=t.getDate(),a=n.getFullYear(),o=n.getMonth();return n.getDate()>=e&&(11==o?(a++,o=0):o++),new Date(a,o,e)},saveSession:function(e){n=e},getSession:function(){return n},clearSession:function(){n=null}})}]);app.factory("SalaryPlanService",["commonPath","utils",function(e,n){var t=null;return $.extend({},e,{locationHash:"/planSalary",getNextPlanExecuteDate:function(e){if(e>28||1>e)return null;var t=n.getDate(),a=t.getFullYear(),l=t.getMonth();return t.getDate()>=e&&(11==l?(a++,l=0):l++),new Date(a,l,e)},saveSession:function(e){t=e},getSession:function(){return t},clearSession:function(){t=null}})}]);app.factory("TaxPlanService",["commonPath","utils","$timeout","cache","cgiService","GLOBAL_CONSTANT",function(n,t,a,e,o,r){return{clearTaxPlanCache:function(){e.setCacheInfo("taxPlanInfo",null)},updateTaxPlanCache:function(n){e.setCacheInfo("taxPlanInfo",n)},getTaxPlanInfo:function(){var n=e.getCacheInfo("taxPlanInfo");return n},getTaxConfig:function(){var n=e.getCacheInfo("taxConfig");return n},requstTaxPlan:function(n,t){var a=function(t){tracelog("查询收益捐计划成功:"+JSON.stringify(t)),t&&t.ret_data&&e.setCacheInfo("taxPlanInfo",t.ret_data),n&&n(t)},c=function(n){tracelog("查询收益捐计划成功:"+JSON.stringify(n)),t&&t(n)};return o.requestQueryDonatePlan(r.DONATE_PLAN_ACTIVITYID.MFWC).then(a,c)},requstTaxConfig:function(n,t){var a=function(t){tracelog("查询公益配置信息成功:"+JSON.stringify(t)),t&&t.ret_data&&e.setCacheInfo("taxConfig",t.ret_data),n&&n(t)},r=function(n){tracelog("查询公益配置信息失败:"+JSON.stringify(n)),t&&t(n)};return o.requestDonateRunStatus().then(a,r)}}}]);var BIZ_SCENE_FOR_RECENT_ACCOUNT={TRANS_IN:1,MONETARY_TRANS_IN:2,WEBANK_TRANS_IN:3,TRANS_OUT:4,MONETARY_TRANS_OUT:5,WEBANK_TRANS_OUT:6,PLAN:7,SALARY_PLAN:8,MORTGATE_PLAN:9,BUY_INSURANCE:10,BUY_STOCK_FUND:11,REDEEM_STOCK_FUND:12};app.factory("RecentAccountService",["utils","essential","localStorage",function(e,a,n){var r="recent-bank-card-local-storage-key",t="recent-account-local-storage-key";return{saveRecentlyUsedBankCard:function(e,a,t){var c="";return t&&(c=t),n.saveDataByUser(r+e+c,a)},loadRecentlyUsedBankCard:function(e,a){var t="";return a&&(t=a),n.loadDataByUser(r+e+t)},saveRecentlyUsedAccountInfo:function(e,a,r){var c={};return c.cardNo=a,c.userName=r,n.saveDataByUser(t+e,c)},loadRecentlyUsedAccountInfo:function(e){return n.loadDataByUser(t+e)}}}]);app.factory("TransferOutAccountSelectorService",["commonPath",function(n){var e=null;return $.extend({},n,{locationHash:"/selectTransOutAccount",saveSession:function(n){e=n},getSession:function(){return e},clearSession:function(){e=null}})}]);app.factory("TransferOtpService",["commonPath",function(t){return $.extend({},t,{locationHash:"/transOtp"})}]);app.factory("TransOutScenePlanService",["commonPath",function(n){var e=null;return $.extend({},n,{locationHash:"/transOutScenePlan",saveSession:function(n){e=n},getSession:function(){return e},clearSession:function(){e=null}})}]);app.factory("WePayService",["commonDirectiveService","HJactionLoading","CheckFaceService","cgiService","cache","utils","GLOBAL_CONSTANT","HJactionPop","essential","LocationService","localStorage","envService","$timeout","CommonConfigService",function(e,t,n,o,a,i,c,u,r,s,f,l,T){var _=function(e){var r=function(e,n){e?h=S():n&&i.makeToast(n),t.hide(),g&&(g(e),g=null)},f=function(e,n,a){t.show(),o.requestOpenWePay(e,n,a).then(function(e){e&&p().then(function(){r(!0),s.go("/wepayResult/suc")},function(){})},function(){r(!1),s.go("/wepayResult/fail")})};t.show(),o.requestWePaySafeMode().then(function(o){o&&o.ret_data&&(o.ret_data.retcode==c.WEPAY_SECURITY_STATE.PASS?f(e):o.ret_data.retcode==c.WEPAY_SECURITY_STATE.CHECKFACE?(t.hide(),u.show({oneLineTextLeft:"为了您的账户安全，需要您先通过人脸验证",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(t){if(1==t)r(!1,null);else if(2==t){var o=a.getCacheInfo("personalInfo"),i=o&&o.ecif_no?o.ecif_no:"";n.startFaceVerify(c.CHECK_FACE_SCENE_ID.WE_PAY,i,!1).then(function(t){f(e,t.faceId,t.videoSessionId)},function(){r(!1,"人脸验证失败")},function(){r(!1,null)})}}})):(r(!1),s.go("/wepayResult/fail")))},function(e){r(!1,e.ret_msg)})},A=function(n){var a=function(e,n){W&&(e?(i.makeToast("已关闭We支付"),h=S()):n&&i.makeToast(n),t.hide(),W(e),W=null)},c=function(n){o.requestCloseWePay(n).then(function(e){e&&p().then(function(){a(!0)},function(){})},function(n){var o=function(){t.hide(),e.getUserPwdInput({pwdSubTitle:"关闭We支付",callback:function(e){A(e)}})};e.processWrongPwdByCode(n,o)||a(!1,n.ret_msg)})};t.show(),c(n)},p=function(){return o.requestExtraUserInfo()},S=function(){var e=a.getCacheInfo("ExtraUserInfo");return e&&e.acct_attr_info&&(e.acct_attr_info.consumer_payment_status==c.WEPAY_PAYMENT_STATUS.PAYMENT_WEBANK_FUND_2||e.acct_attr_info.consumer_payment_status==c.WEPAY_PAYMENT_STATUS.PAYMENT_WEBANK_3)?e.acct_attr_info.consumer_payment_status_qq==c.WEPAY_BIND_STATUS.SIGN_SUCC_2||e.acct_attr_info.consumer_payment_status_wx==c.WEPAY_BIND_STATUS.SIGN_SUCC_2?c.WEPAY_STATE.OPENED:c.WEPAY_STATE.UNBIND:c.WEPAY_STATE.CLOSED},P=function(){var e=null,t=a.getCacheInfo("personalInfo");return null!=t&&(e=t.webank_card_no),r.copyStrToPasteboard(e)},E=function(){return B=f.loadDataByUser("wePayNewUserFlag"),null==B&&(B=!1),B},I=function(e){B=e,f.saveDataByUser("wePayNewUserFlag",B)},d=function(e){v=e},C=function(){return!1},g=null,W=null,y=f.loadDataByUser("wePaySettingTip"),w=!1,h=c.WEPAY_STATE.CLOSED,B=!1;E();var v=!0;return{startOpenWepay:function(t){e.verifyPassword({pwdSubTitle:"开通We支付",callback:function(e,t){_(t)}}),g=t},startCloseWepay:function(t){e.getUserPwdInput({pwdSubTitle:"关闭We支付",callback:function(e){A(e)}}),W=t},startWXBindCard:function(){var e=!1;i.checkAbility(c.APP_ABILITY.ABILITY_STARTAPP)&&r.isWXInstalled().then(function(t){tracelog("[We支付]获取用户WX安装状态:"+t.isWXInstalled),"true"==t.isWXInstalled&&(e=!0)});var t=function(t){if(e){var n=t?"微众卡号已复制，请在微信的“我-钱包-银行卡”添加微众卡":"请在微信的“我-钱包-银行卡”添加微众卡";u.show({oneLineTextLeft:n,twoButtonText1:"暂不添加",twoButtonText2:"立即添加",popClose:function(e){1==e||2==e&&(i.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_CLICK_STARTWX),r.startApp(i.isiOSDevice()?"weixin://":"com.tencent.mm"))}})}else{var n=t?"微众卡号已复制，请安装微信后在“我-钱包-银行卡”添加微众卡":"请安装微信后在“我-钱包-银行卡”添加微众卡";u.show({oneLineTextLeft:n,oneButtonText:"我知道了",popClose:function(){}})}};T(function(){P().then(function(){t(!0)},function(){t(!1)})},100)},startQQBindCard:function(){var e=!1;i.checkAbility(c.APP_ABILITY.ABILITY_STARTAPP)&&i.checkAbility(c.APP_ABILITY.ABILITY_CHECKQQINSTALL)&&r.isQQInstalled().then(function(t){tracelog("[We支付]获取用户QQ安装状态:"+t.isQQInstalled),"true"==t.isQQInstalled&&(e=!0)});var t=function(t){if(e){var n=t?"微众卡号已复制，请在QQ“我-QQ钱包-账户”添加微众卡":"请在QQ“我-QQ钱包-账户”添加微众卡";u.show({oneLineTextLeft:n,twoButtonText1:"暂不添加",twoButtonText2:"立即添加",popClose:function(e){1==e||2==e&&(i.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_CLICK_STARTQQ),r.startApp(i.isiOSDevice()?"mqqapi://":"com.tencent.mobileqq"))}})}else{var n=t?"微众卡号已复制，请安装QQ后在“我-QQ钱包-账户”添加微众卡":"请安装QQ后在“我-QQ钱包-账户”添加微众卡";u.show({oneLineTextLeft:n,oneButtonText:"我知道了",popClose:function(){}})}};T(function(){P().then(function(){t(!0)},function(){t(!1)})},100)},getWePayStatus:function(){return S()},setSettingTipFlag:function(e){y=e,f.saveDataByUser("wePaySettingTip",y)},getSettingTipFlag:function(){return y&&C()},setRedFlag:function(e){w=e},getRedFlag:function(){return w&&S()==c.WEPAY_STATE.CLOSED&&C()},clearRedFlag:function(){w=!1,o.clearMessageByRichType("red")},clearWePayPop:function(){o.clearMessageByRichType("payment")},openFAQ:function(){s.go("/helpDetail/2")},openBindHelp:function(){s.go("/wepayHelpDetail/1")},canShowBindTipAtHome:function(){var e=a.getCacheInfo("personalInfo");return null==B&&E(),S()==c.WEPAY_STATE.UNBIND&&B&&v&&e&&"3"==e.acct_type?!0:!1},setNewUserFlag:function(e){I(e)},setCanShowBindTipFlag:function(e){d(e)},openAgreement:function(){var e=l.getEnvVariable().DATA_CGI_PREFIX+"html/wepay/agreement.pdf";r.openPdf2(e,"消费支付服务协议")},canUseWePay:function(){return C()}}}]);"use strict";app.factory("StockClassificationService",["$location","commonPath",function(t,o){return $.extend({},o,{locationHash:"/stockClassification"})}]);app.filter("lastFewChars",function(){var t=function(t,r){return t.length<r?t:t.substr(t.length-r)};return t}),app.filter("longProdName",function(){return function(t){return t.length>9?t.substr(0,9)+"...":t}}),app.filter("abridgeAccountNumber",function(){var t=function(t){return!t||t.length<4?t:"("+t.substr(t.length-4)+")"};return t}),app.filter("splitAccountNumber",function(){var t=function(t){if(t){t=t.toString();for(var r=[],e=0;e<Math.ceil(t.length/4)-1;e++)r.push(t.substr(4*e,4));return r.push(t.substr(4*e)),r.join(" ")}return t};return t}),app.filter("formatDateToCN",function(){return function(t){return t.substring(0,4)+"年"+t.substring(4,6)+"月"+t.substring(6,8)+"日"}}),app.filter("formatDateToCNWithoutYear",function(){return function(t){return t?parseInt(t.substring(4,6),10)+"月"+parseInt(t.substring(6,8),10)+"日":void 0}}),app.filter("formatDateForTimeLine",function(){return function(t){if(t){var r=parseInt(t.substring(0,4),10),e=parseInt(t.substring(4,6),10),n=parseInt(t.substring(6,8),10),a=new Date;return r==a.getFullYear()&&e==a.getMonth()+1&&n==a.getDate()?"今天":parseInt(t.substring(4,6),10)+"月"+parseInt(t.substring(6,8),10)+"日"}}}),app.filter("formatDateObjToString",function(){return function(t){if(t){var r=t.getFullYear(),e=t.getMonth()+1,n=t.getDate();return 10>e&&(e="0"+e),10>n&&(n="0"+n),r+"-"+e+"-"+n}}}),app.filter("formatDateObjToTimeString",function(){return function(t){if(t){var r=t.getHours(),e=t.getMinutes();return 10>r&&(r="0"+r),10>e&&(e="0"+e),r+":"+e}}}),app.filter("formatDateObjToStringV2",["utils",function(t){return function(r){if(r){var e=r.getFullYear(),n=r.getMonth()+1,a=r.getDate();10>n&&(n="0"+n),10>a&&(a="0"+a);var u=n+"-"+a,i=t.getDate();return i.getFullYear()!=e?e+"-"+u:u}}}]),app.filter("formatDateObjToMDString",function(){return function(t){if(t){var r=t.getMonth()+1,e=t.getDate();return 10>r&&(r="0"+r),10>e&&(e="0"+e),r+"-"+e}}}),app.filter("formatDateObjToYMString",function(){return function(t){if(t){var r=t.getFullYear(),e=t.getMonth()+1;return 10>e&&(e="0"+e),r+"-"+e}}}),app.filter("formatDateObjToCNString",function(){return function(t){var r=(t.getFullYear(),t.getMonth()+1),e=t.getDate();return r+"月"+e+"日"}}),app.filter("formatDateObjToCNStringV2",["utils",function(t){return function(r){var e=r.getFullYear(),n=r.getMonth()+1,a=r.getDate(),u=n+"月"+a+"日",i=t.getDate();return i.getFullYear()!=e?e+"年"+u:u}}]),app.filter("formatYYYYMMDDString",function(){return function(t){if(t){var r=t.substring(0,4),e=t.substring(4,6),n=t.substring(6,8);return r+"-"+e+"-"+n}}}),app.filter("formatYYYYMMDDStringV2",["utils",function(t){return function(r){if(r){var e=t.getDate(),n=r.substring(0,4),a=r.substring(4,6),u=r.substring(6,8),i=a+"-"+u;return n==e.getFullYear()?i:n+"-"+i}}}]),app.filter("formatYYYYMMDDToCNString",["utils",function(t){return function(r){if(r){var e=t.getDate(),n=r.substring(0,4),a=r.substring(4,6),u=r.substring(6,8),i=a+"月"+u+"日";return n==e.getFullYear()?i:n+"年"+i}}}]),app.filter("formatMoneyString",function(){return function(t){for(var r=parseFloat(t).toFixed(0),e=r.split("").reverse(),n="",a=0;a<e.length;a++)n+=e[a]+((a+1)%3==0&&a+1!=e.length?",":"");return n.split("").reverse().join("")}}),app.filter("formatMoneyStringV2",function(){return function(t){var r;r=parseFloat(t)>=0?parseFloat(t).toFixed(2):(-1*parseFloat(t)).toFixed(2);var e=r.split("").reverse(),n="";n+=e[0],n+=e[1],n+=e[2];for(var a=3;a<e.length;a++)n+=e[a]+((a+1)%3==0&&a+1!=e.length?",":"");return parseFloat(t)<0&&(n+="-"),n.split("").reverse().join("")}}),app.filter("formatPhoneMask",function(){return function(t){var r=t;return t&&(t+="",r=t.substr(0,3)+"****"+t.substr(7,4)),r}}),app.filter("formatWeekdayFormDate",function(){return function(t){var r=t.getDay(),e="";switch(r){case 0:e="星期日";break;case 1:e="星期一";break;case 2:e="星期二";break;case 3:e="星期三";break;case 4:e="星期四";break;case 5:e="星期五";break;case 6:e="星期六"}return e}}),app.filter("formatDateWithoutYear",function(){return function(t){var r=t.getMonth()+1,e=t.getDate(),n=10>r?"0"+r:""+r,a=10>e?"0"+e:""+e;return n+"-"+a}}),app.filter("formatDateObjToCNWithoutYear",function(){return function(t){var r=t.getMonth()+1,e=t.getDate();return r+"月"+e+"日"}}),app.filter("formatMoneyShort",function(){return function(t){var r=parseInt(t);return r>=1e8?(r=parseFloat(r/1e8).toFixed(1e6>r%1e8?0:1e6>r%1e7?1:r%1e8>=95e6?0:r%1e7>=95e5?1:2),r+"亿"):r>=1e4?(r=1e3>r?parseFloat(r/1e4):parseFloat(r/1e4).toFixed(100>r%1e4?0:100>r%1e3?1:r%1e4>=9500?0:r%1e3>=950?1:2),r+"万"):r+""}}),app.filter("formatName",function(){return function(t){if(t){var r=t.split("");return r.pop(),r.push(" *"),r.join("")}return t}}),app.filter("GetDayFromDateObj",function(){return function(t){var r=t.getDate(),e=10>r?"0"+r:""+r;return e}}),app.filter("toTrusted",["$sce",function(t){return function(r){return t.trustAsHtml(r)}}]),app.filter("formatTimeStringToHHMM",function(){return function(t){if(!t)return"";var r=t.split(":");return r.length<2?"":r[0]+":"+r[1]}}),app.filter("formatTimeStringToHHMMV2",function(){return function(t){return t?t.substr(0,2)+":"+t.substr(2,2):""}}),app.filter("cutGoldWeight",function(){return function(t){var r=Math.floor(parseFloat((1e4*t).toFixed(8))),e=parseFloat(r/1e4).toFixed(4);return parseFloat(e)}}),app.filter("formatGoldString",function(){return function(t){var r=Math.floor(parseFloat((1e4*t).toFixed(8))),e=parseFloat(r/1e4).toFixed(4),n=e.split("").reverse(),a="";a+=n[0],a+=n[1],a+=n[2],a+=n[3],a+=n[4];for(var u=5;u<n.length;u++)a+=n[u]+((u+2)%3==0&&u+1!=n.length?",":"");return a.split("").reverse().join("")}}),app.filter("fromatDateTimeToMD",["utils",function(t){return function(r){if(!r)return"";try{return r.getFullYear()==t.getDate().getFullYear()?r.getMonth()+1+"-"+r.getDate():r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()}catch(e){return""}}}]),app.filter("fromatDateTimeToMDV2",function(){return function(t){if(!t)return"";try{return t.getMonth()+1+"-"+t.getDate()}catch(r){return""}}});"use strict";app.factory("$Message",["$rootScope","$compile","$document","$timeout","$window",function(t,n,o,i){var e='<div class="popup-container popup-showing active" ng-if="isShow"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3></div><div class="popup-body" ng-bind-html="template"></div><div class="popup-buttons"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button button-positive" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>',u=!1,p=t.$new();p.isShow=!1;var a=angular.element(e),c=function(t){t=angular.extend({title:"提示",template:"",buttons:[{text:"确认",type:"button-clear button-full",onTap:function(){i(function(){s(),t.cb()},500)}}],$buttonTapped:function(t,n){(t.onTap||angular.noop)(n)}},t||{}),angular.extend(p,t),u||(o[0].body.appendChild(a[0]),n(a)(p),u=!0)},l=function(t){p.isShow||(c(t),p.isShow=!0)},s=function(){p.isShow=!1};return{alert:function(t,n){var o="提示",i="";"string"==typeof t?i=t:(i=t.text,o=t.title),n=n?n:function(){},l({title:o,template:i,cb:n})},confirm:function(){},show:function(){}}}]);"use strict";app.factory("$NumKeyboard",["$rootScope","$compile","$document","$timeout","$Message",function(t,e,n){var o='        <div class="pwd-keyboard" ng-if="isShow">            <table>                <tr  class="keyboard-row">                    <td wb-click="$buttonTapped($event)">1</td>                    <td wb-click="$buttonTapped($event)">2</td>                    <td wb-click="$buttonTapped($event)">3</td>                </tr>                <tr  class="keyboard-row">                    <td wb-click="$buttonTapped($event)">4</td>                    <td wb-click="$buttonTapped($event)">5</td>                    <td wb-click="$buttonTapped($event)">6</td>                </tr>                <tr  class="keyboard-row">                    <td wb-click="$buttonTapped($event)">7</td>                    <td wb-click="$buttonTapped($event)">8</td>                    <td wb-click="$buttonTapped($event)">9</td>                </tr>                <tr  class="keyboard-row">                    <td wb-click="$buttonTapped($event)" class="o"></td>                    <td wb-click="$buttonTapped($event)">0</td>                    <td wb-click="$buttonTapped($event)" class="o">&larr;</td>                </tr>            </table>        </div>',d=t.$new();d.isShow=!1;var a=!1,c=angular.element(o),i=function(t){d.$buttonTapped=function(e){if(e.stopPropagation(),angular.isDefined(t.onBtnTap)){var n=e.target.innerHTML;t.onBtnTap(n),"确定"==n&&r()}},a||(n[0].body.appendChild(c[0]),e(c)(d),a=!0)},p=function(e){i(e),d.isShow=!0,t.hasKeyboard=!0},r=function(){d.$buttonTapped=function(){},d.isShow=!1,t.hasKeyboard=!1};return t.$on("$stateChangeStart",function(){r()}),{show:function(t){r(),p({onBtnTap:t})},hide:function(){r()},isShow:function(){return d.isShow}}}]);"use strict";app.directive("pwdInput",["$RSA","$MD5","$NumKeyboard","$Reg","$rootScope","cgiService","$timeout","utils","essential","GLOBAL_CONSTANT","HJactionLoading",function(i,e,n,o,a,t,r,d,s,w,c){var l="",p=!1;return a.$on("$stateChangeStart",function(){l="",p=!1}),{restrict:"EA",require:"?ngModel",scope:{ngModel:"=?",errorMessage:"=?",isPwdShow:"=?",isPwdKeyboardShow:"=?isPwdKeyboardShow",sigOnPwdCommit:"=?",pwdTitle:"=?pwdTitle",pwdTransDesc:"=?pwdTransDesc",pwdSubTitle:"=?pwdSubTitle",pwdDisplay:"=?pwdDisplay",payWayDesc:"=?payWayDesc",onClickChangePayWay:"=?onClickChangePayWay",onPwdInputFinish:"=onPwdInputFinish",isFactorNeeded:"=?isFactorNeeded",canChangePayWay:"=?",closePop:"&closePop",commitCallback:"=?"},templateUrl:"../js/directive/password/pwd-input.html",replace:!0,controller:["$scope","$element","$attrs",function(){}],link:function(a,p,g,u){void 0==a.canChangePayWay&&(a.canChangePayWay=!0),a.isPwdKeyboardShow=!1,a.isWaitingFactor=!1;var y=!1,P=a.vm={};P.originPwd=new Array(6),a.pwdDisplay||(a.pwdDisplay=new Array(6)),P.displayPwd=new Array(6);var S=0,h="←",m={empty:"密码不能为空",valid:"密码格式错误,仅支持6位数字"},A={test:function(){return{$valid:o.test(P.originPwd.join(""),"pwd"),errorMessage:m.valid}},clear:function(){f()}};u.$setViewValue(A);var f=function(){S=0,P.originPwd=new Array(6),P.displayPwd=new Array(6),a.pwdDisplay=new Array(6),a.isWaitingFactor=!1,u.$setViewValue(A)};P.onInputClick=function(i){i.stopPropagation(),i.preventDefault(),void 0!=a.errorMessage&&(a.errorMessage=""),n.isShow()||f(),n.show(D);i.y-50},void 0==a.isFactorNeeded&&(a.isFactorNeeded=!0);var v=function(){return a.isFactorNeeded&&""==l?(d.makeToast(STRING_TABLE.DEFAULT_ERR_DESC),A.clear(),void n.show(D)):(6>S&&d.reportCustomEvent(w.REPORT_EVENT_NAME.PASSWORD_INVALUED,"passwod_invalued"),A.MD5=e(P.originPwd.join("")),A.originPwd=P.originPwd.join(""),A.randomFactor=l,A.RSA=i.encrypt(P.originPwd.join("")+String(l)),A.RSA.length<512&&(A.RSA=i.encrypt(P.originPwd.join("")+String(l))),A.RSA.length<512&&(A.RSA=i.encrypt(P.originPwd.join("")+String(l))),A.RSA.length<512&&(A.RSA=i.encrypt(P.originPwd.join("")+String(l))),A.RSA.length<512&&(A.RSA=i.encrypt(P.originPwd.join("")+String(l))),u.$setViewValue(A),null!=a.sigOnPwdCommit?a.sigOnPwdCommit++:a.sigOnPwdCommit=0,void(a.commitCallback&&r(function(){a.commitCallback()},10)))},C=function(){n.hide(),a.isPwdShow=!1,s.dimStatusBarBackground(!1),y?(a.isWaitingFactor=!0,c.show()):v()},D=function(i){i==h?S>0&&(S--,P.originPwd[S]="",a.pwdDisplay&&(a.pwdDisplay[S]=""),P.displayPwd[S]=""):""==i||(S>5?C():(P.displayPwd[S]="●",a.pwdDisplay&&(a.pwdDisplay[S]="●"),P.originPwd[S]=i,S++,6==S&&C()))};a.pwdTitle||(a.pwdTitle="请输入微众交易密码"),a.onClickClose=function(){a.isPwdShow=!1,s.dimStatusBarBackground(!1),r(function(){a.closePop()})};var F=function(){l="",y=!0,t.requestPasswordFactor().then(function(i){l=i.ret_data.factor,y=!1,a.isWaitingFactor&&(a.isWaitingFactor=!1,c.isShow()&&c.hide(),v())},function(){y=!1,a.isWaitingFactor=!1,c.isShow()&&c.hide()})};a.$watch("isPwdShow",function(){a.isPwdShow?(A.clear(),s.dimStatusBarBackground(!0),n.show(D),a.isFactorNeeded&&F()):n.hide()}),a.$watch("isPwdKeyboardShow",function(){a.isPwdKeyboardShow?(A.clear(),a.isFactorNeeded&&F(),n.show(D)):n.hide()})}}}]);"use strict";app.directive("wbClick",["$parse","$timeout",function(t,n){return{compile:function(c){var e=t(c.attr("wb-click"));return function(t,c){var o="";o="ontouchstart"in document.documentElement?"touchstart":"click",c.on(o,function(c){c.preventDefault(),c.stopPropagation(),n(function(){e(t,{$event:c})})})}}}}]);app.directive("passwordSetting",["$RSA","$MD5","$NumKeyboard","$Reg","$rootScope","cgiService","$timeout","utils","essential","GLOBAL_CONSTANT",function(i,n,e,r,t,o,d,s){var a="",w=!1,g=6,c="密码用于转账、理财等操作时，验证您的身份",u="请再次输入",l="两次输入不一致",S="设置微众银行交易密码",P="确认微众银行交易密码",p="密码强度太弱",y="pwd-warning",f="pwd-warning red",A=1,F=2;return t.$on("$stateChangeStart",function(){a="",w=!1}),{restrict:"EA",require:"?ngModel",scope:{ngModel:"=?",setPassword:"=setPassword",onSettingPasswordFinish:"=onSettingPasswordFinish",onSettingPasswordCanceled:"=onSettingPasswordCanceled",onSettingPasswordError:"=onSettingPasswordError",isFactorNeeded:"=?isFactorNeeded",pwdPopupStyle:"=?pwdPopupStyle"},templateUrl:"../js/directive/password-setting/password-setting.html",replace:!0,controller:["$scope","$element","$attrs",function(){}],link:function(e,r,t,w){e.setPassword=function(){$(),e.isShown=!0,e.isFactorNeeded&&m()},e.onClickCloseButton=function(){e.isShown=!1,v.clear(),e.onSettingPasswordCanceled()},e.onPwdClick=function(i){-1==i?e.index>0&&(e.index--,R.originPwd[e.inputOrder][e.index]="",R.displayPwd[e.index]=""):e.index>5?N():(R.displayPwd[e.index]="●",R.originPwd[e.inputOrder][e.index]=i,e.index++,6==e.index&&d(function(){N()},50))};var R=e.vm={},h=function(){R.displayPwd=new Array(6),R.originPwd=[],R.originPwd.push(new Array(g)),R.originPwd.push(new Array(g)),e.inputOrder=0,e.index=0},$=function(){e.isWaitingFactor=!1,e.isFactorRequesting=!1,e.isFactorNeeded=!1,e.isShown=!1,e.wording=c,e.wordingStyle=y,e.firstStep=!0,e.title=S,h()};$();var v={clear:function(){x()}};w.$setViewValue(v);var x=function(){e.index=0,R.originPwd[0]=new Array(6),R.originPwd[1]=new Array(6),R.displayPwd=new Array(6),w.$setViewValue(v)},j=function(){return e.isFactorNeeded&&""==a?(s.makeToast(STRING_TABLE.DEFAULT_ERR_DESC),void v.clear()):(v.MD5=n(R.originPwd[0].join("")),v.originPwd=R.originPwd[0].join(""),v.randomFactor=a,v.RSA=i.encrypt(R.originPwd[0].join("")+String(a)),v.RSA.length<512&&(v.RSA=i.encrypt(R.originPwd[0].join("")+String(a))),v.RSA.length<512&&(v.RSA=i.encrypt(R.originPwd[0].join("")+String(a))),v.RSA.length<512&&(v.RSA=i.encrypt(R.originPwd[0].join("")+String(a))),v.RSA.length<512&&(v.RSA=i.encrypt(R.originPwd[0].join("")+String(a))),w.$setViewValue(v),v.clear(),e.isShown=!1,e.onSettingPasswordFinish(),void v.clear())},C=function(){e.firstStep=!1,e.inputOrder=1,e.index=0,R.displayPwd=new Array(6),e.wordingStyle=y,e.wording=u,e.title=P},E=function(i,n){e.inputOrder=0,e.firstStep=!0,e.index=0,R.displayPwd=new Array(6),e.wording=i,e.wordingStyle=f,e.title=S,e.onSettingPasswordError(i,n)},N=function(){return 0==e.inputOrder?void(s.isPasswordStrongEnough(n(R.originPwd[0].join("")))?C():E(p,F)):R.originPwd[0].join("")!=R.originPwd[1].join("")?void E(l,A):void(e.isFactorRequesting?e.isWaitingFactor=!0:j())},m=function(){a="",e.isFactorRequesting=!0,o.requestPasswordFactor().then(function(i){a=i.ret_data.factor,e.isFactorRequesting=!1,e.isWaitingFactor&&(e.isWaitingFactor=!1,j())},function(){e.isFactorRequesting=!1,e.isWaitingFactor=!1})}}}}]);app.directive("payWaySelector",["essential",function(a){return{restrict:"E",transclude:!0,templateUrl:"../js/directive/pay-way-selector/pay-way-selector.html",scope:{isShow:"=showPayWaySelector",payWayTitle:"=?payWayTitle",bindCardList:"=bindCardList",cardInfo:"=cardInfo",bindNewCard:"=?bindNewCard",webankAccount:"=?webankAccount",callbackFunc:"=?callbackFunc"},link:function(c){c.onClickClose=function(){c.isShow=!1,a.dimStatusBarBackground(!1),c.callbackFunc&&c.callbackFunc()},c.onSelectCard=function(n){c.cardInfo.bankBinCode=n.other_bank_bin_code,c.cardInfo.userName=n.other_name,c.cardInfo.cardNo=n.other_account,c.cardInfo.cardTypeCode=n.other_card_type_code,c.cardInfo.cardType=n.other_card_type,c.cardInfo.bankName=n.other_bank_name,c.isShow=!1,a.dimStatusBarBackground(!1),c.webankAccount&&(c.webankAccount.isWebankAccountSelected=!1),c.callbackFunc&&c.callbackFunc()},c.onSelectWebankAccount=function(){c.webankAccount.isAvaliable&&(c.webankAccount.isWebankAccountSelected=!0,c.isShow=!1,a.dimStatusBarBackground(!1),c.callbackFunc&&c.callbackFunc())},c.$watch("isShow",function(n){if(a.dimStatusBarBackground(n),c.webankAccount&&c.webankAccount.isWebankAccountSelected){c.showSelectWebankFlag="jc on";for(var e=0;e<c.bindCardList.length;++e)c.bindCardList[e].showSelectBankFlag=""}else{c.showSelectWebankFlag="jc";for(var e=0;e<c.bindCardList.length;++e)c.bindCardList[e].showSelectBankFlag=c.bindCardList[e].other_account==c.cardInfo.cardNo?"on":""}c.webankAccount&&!c.webankAccount.isAvaliable&&(c.showSelectWebankFlag="jc off")}),c.onClickUseNewCard=function(){c.isShow=!1,a.dimStatusBarBackground(!1),c.bindNewCard()}},controller:["$scope",function(c){angular.forEach(c.bindCardList,function(a){a.bankImg="../img/bankHead/yh-"+(a.other_bank_bin_code||0)+"@2x.png"}),c.isShow=!1,a.dimStatusBarBackground(!1),c.payWayTitle||(c.payWayTitle=STRING_TABLE.CHOOSE_PAY_WAY)}]}}]);app.directive("accountSelector",["GLOBAL_CONSTANT","$timeout","cache","essential",function(t,n,a,c){return{restrict:"E",transclude:!0,templateUrl:"../js/directive/account-selector/account-selector.html",scope:{show:"=?show",hide:"=?hide",bindCard:"=?bindCard",onAccountSelected:"=?onAccountSelected",accountData:"=?accountData",inputAmount:"=?inputAmount",hideAmount:"=?hideAmount"},link:function(o){var u=function(){d(),c.dimStatusBarBackground(!0),o.isShow=!0},e=function(){c.dimStatusBarBackground(!1),n(function(){o.isShow=!1},50)},r=function(){o.onAccountSelected&&o.onAccountSelected()};o.ifHideAmount={webank:!1,plus:!1},o.hideAmount&&(100==o.hideAmount&&(o.ifHideAmount.webank=!0),200==o.hideAmount&&(o.ifHideAmount.plus=!0),300==o.hideAmount&&(o.ifHideAmount.webank=!0,o.ifHideAmount.plus=!0)),o.show=function(){u()},o.hide=function(){e()},o.onClickClose=function(){e()},o.onSelectCard=function(n){o.accountData.otherBankAccount.cardInfo.bankBinCode=n.other_bank_bin_code,o.accountData.otherBankAccount.cardInfo.userName=n.other_name,o.accountData.otherBankAccount.cardInfo.cardNo=n.other_account,o.accountData.otherBankAccount.cardInfo.cardTypeCode=n.other_card_type_code,o.accountData.otherBankAccount.cardInfo.cardType=n.other_card_type,o.accountData.otherBankAccount.cardInfo.bankName=n.other_bank_name,o.accountData.ctrlData.accountType=t.ACCOUNT_TYPE.OTHER_BANK_CARD,e(),r()},o.onSelectWebankAccount=function(n){1*o.inputAmount&&1*n<1*o.inputAmount||(o.accountData.ctrlData.accountType=t.ACCOUNT_TYPE.WEBANK_CARD,e(),r())},o.onSelectUnionPay=function(){o.accountData.ctrlData.accountType=t.ACCOUNT_TYPE.UNION_PAY,e(),r()},o.onSelectCurrentPlus=function(n){1*o.inputAmount&&1*n<1*o.inputAmount||(o.accountData.ctrlData.accountType=t.ACCOUNT_TYPE.CURRENT_PLUS,e(),r())},o.$watch("isShow",function(){A()}),o.onClickUseNewCard=function(){e(),o.bindCard()};var i=0,A=function(){var n=0,a=null,c=!0;if(c=c&&o.accountData.otherBankAccount,c=c&&o.accountData.otherBankAccount.otherAccountList,c&&(a=o.accountData.otherBankAccount.otherAccountList,n=a.length),o.accountData.ctrlData.accountType==t.ACCOUNT_TYPE.WEBANK_CARD)i=100;else if(o.accountData.ctrlData.accountType==t.ACCOUNT_TYPE.OTHER_BANK_CARD)for(var u=0;n>u;++u)a[u].other_account==o.accountData.otherBankAccount.cardInfo.cardNo&&(i=u);else i=o.accountData.ctrlData.accountType==t.ACCOUNT_TYPE.CURRENT_PLUS?200:-1};o.onClassWebank=function(t){var n=o.ifHideAmount.webank?"":"jc";return n+=100==i?" on":" ",1*o.inputAmount&&(n+=1*t<1*o.inputAmount?" off ":""),n},o.onClassPlus=function(t){var n=o.ifHideAmount.plus?"":"jc";return n+=200==i?" on":" ",1*o.inputAmount&&(n+=1*t<1*o.inputAmount?" off ":""),n},o.onClassUnionPay=function(){return o.accountData.ctrlData.accountType===t.ACCOUNT_TYPE.UNION_PAY?"on":""},o.onClassBankCard=function(t){return i==t?"on":""},o.onSrcPlus1=function(t){return 1*o.inputAmount&&1*t<1*o.inputAmount?"../img/slice/hq@3x_grey.png":"../img/slice/hq@3x.png"},o.onSrcPlus=function(t){return 1*o.inputAmount&&1*t<1*o.inputAmount?"../img/bankHead/yh-0@2x_grey.png":"../img/bankHead/yh-0@2x.png"},o.onSrcWebank=function(t){return 1*o.inputAmount&&1*t<1*o.inputAmount?"../img/bankHead/yh-0@2x_grey.png":"../img/bankHead/yh-0@2x.png"};var d=function(){o.accountList=[];var t=a.getCacheInfo("personalInfo");if(null!=t&&t.webank_card_no&&(o.webankCardNumber=t.webank_card_no),o.accountData.webankAccount){var n={};n.type="webank",n.account=o.accountData.webankAccount,void 0==n.account.showBalance&&(n.account.showBalance=!0),o.accountList.push(n)}if(o.accountData.otherBankAccount){var n={};n.type="otherBank",n.account=o.accountData.otherBankAccount,o.accountList.push(n)}if(o.accountData.disabledOtherBankAccount){var n={};n.type="disabledOtherBank",n.account={},n.account.otherAccountList=o.accountData.disabledOtherBankAccount,o.accountList.push(n)}if(o.accountData.unionPay&&o.accountList.push({type:"unionPay",account:o.accountData.unionPay}),o.accountData.currentPlus){var n={};n.type="currentPlus",n.account=o.accountData.currentPlus,void 0==n.account.showBalance&&(n.account.showBalance=!0),o.accountList.push(n)}o.accountList.sort(function(t,n){return void 0==t.account.priority&&(t.account.priority=1e3),void 0==n.account.priority&&(n.account.priority=1e3),t.account.priority-n.account.priority});var c=!0;c=c&&o.accountData.otherBankAccount,c=c&&o.accountData.otherBankAccount.otherAccountList,c&&angular.forEach(o.accountData.otherBankAccount.otherAccountList,function(t){t.bankImg="../img/bankHead/yh-"+(t.other_bank_bin_code||0)+"@2x.png"});var u=!!o.accountData.disabledOtherBankAccount;u&&angular.forEach(o.accountData.disabledOtherBankAccount,function(t){t.bankImg="../img/bankHead/yh-"+(t.other_bank_bin_code||0)+"@2x-gray.png"}),A()};o.isShow=!1,o.accountData.ctrlData||(o.accountData.ctrlData={},o.accountData.ctrlData.title=STRING_TABLE.CHOOSE_PAY_WAY,o.accountData.ctrlData.canBindNewCard=!0,o.accountData.ctrlData.accountType=t.ACCOUNT_TYPE.INVALID_TYPE),d()},controller:["$scope",function(){}]}}]);app.factory("HJactionMenu",["$rootScope","$timeout","cache","IONIC_BACK_PRIORITY","$ionicPlatform","$compile","$ionicBody","essential",function(n,t,i,e,c,a,o,l){function r(i){var r=n.$new(!0);angular.extend(r,{clickCallback:null,buttonArr:[],cancelText:"取消",headText:""},i||{});var s='<div class="action-sheet-backdrop" ng-click="onClickBackdrop()">                                <div class="pop-qx slide-in-up" style="-webkit-transition: all cubic-bezier(0.36, 0.66, 0.04, 1) 500ms;transition: all cubic-bezier(0.36, 0.66, 0.04, 1) 500ms;position: absolute">                                    <div class="a">                                        <p class="xy-title px-a" ng-click="onClickHead($event)" ng-show="headText">{{headText}}</p>                                        <p ng-class="onClassPop($last)"  ng-repeat="item in buttonArr  track by $index" style="{{buttonStyleArr[$index]}}" ng-click="onClickItem($index)" ng-bind="item"></p>                                    </div>                                    <p class="b" ng-click="onClickCancel()">{{cancelText}}</p>                                </div>                            </div>',u=null,d=function(){r.buttonArr.length>0&&(l.dimStatusBarBackground(!0),u=r.element=a(s)(r),o.append(u),t(function(){u.addClass("active"),u.children().removeClass("slide-in-up")}))};r.onClickItem=function(n){l.dimStatusBarBackground(!1),!r.clickCallback(n)},r.onClickCancel=function(){r.clickCallback(-1)},r.onClickHead=function(n){n&&n.stopPropagation&&n.stopPropagation()},r.onClassPop=function(n){return n?"":"px-a"},r.onClickBackdrop=function(){p()};var p=function(){l.dimStatusBarBackground(!1),u&&(u.children().addClass("slide-in-up"),u.removeClass("active"),t(function(){u&&u.remove(),u=null},400),r.$deregisterBackButton()),k(),r.$destroy()},k=n.$on("$stateChangeStart",function(){p()});return r.$deregisterBackButton=c.registerBackButtonAction(function(){t(p)},e.actionSheet),d(),p}return{show:r}}]);app.factory("HJactionPop",["$rootScope","$timeout","cache","IONIC_BACK_PRIORITY","$ionicPlatform","$compile","$ionicBody","essential",function(e,t,n,i,o,s,d,a){function l(n){var l=e.$new(!0);angular.extend(l,{},n||{});var c='<div class="action-sheet-backdrop invisible">                    <div class="pop-bg">                        <div class="pop bg-b ">                            <header class="hd" ng-if="textHead" >                                <em ng-bind-html="textHead | toTrusted"></em><i class="close" ng-hide="hideClose" ng-click="popCloseInSide(0)"></i>                            </header>                            <div class="qx-box" ng-if="showInput">                                <input type="text" ng-model="inputDefaultText" class="yqm"/>                            </div>                            <div class="qx-box" ng-if="oneLineTextLeft">                                <p class="qx-v" ng-bind-html="oneLineTextLeft | toTrusted"></p>                            </div>                            <p class="qx-m" ng-if="oneLineTextMiddle" ng-bind-html="oneLineTextMiddle | toTrusted"></p>                            <p class="qx-k" ng-if="oneLineTextDefault" ng-bind="oneLineTextDefault"></p>                            <dl class="qx-box" ng-if="multiLineText">                                <dt ng-if="multiLineText.head" ng-bind="multiLineText.head"                                 style="text-align: center; border-bottom: 1px solid #e5e5e5; padding-bottom: 10px"></dt>                                <dd ng-repeat="item in multiLineText.items">{{item}}</dd>                            </dl>                            <footer class="ft-a px-b" ng-if="oneButtonText" ng-bind="oneButtonText" ng-click="popCloseInSide(1)">确定</footer>                            <footer class="qx-menu flex px-b" ng-if="twoButtonText1 && twoButtonText2">                                <div class="item p-line-r" ng-bind="twoButtonText1" ng-click="popCloseInSide(1)"></div>                                <div class="item" ng-bind="twoButtonText2" ng-click="popCloseInSide(2)"></div>                            </footer>                        </div>                    </div>                </div>',p=null,u=function(){a.dimStatusBarBackground(!0),p=l.element=s(c)(l),d.append(p),t(function(){p.addClass("active").removeClass("invisible")})};l.popCloseInSide=function(e){n.doNotDismiss||r(),n&&"function"==typeof n.popClose&&n.popClose(e)},l.onClickHead=function(e){e&&e.stopPropagation&&e.stopPropagation()};var r=function(){a.dimStatusBarBackground(!1),p&&(p.removeClass("active"),t(function(){p&&(p.addClass("invisible"),p.remove(),p=null),l.showPop=!1},1),l.$deregisterBackButton()),g()},g=e.$on("$stateChangeStart",function(){r()});return l.$deregisterBackButton=o.registerBackButtonAction(function(){n.doNotDismiss||t(r)},i.actionSheet),l.onClickBackdrop=function(){r()},l.$on("$destroy",function(){r()}),u(),r}return{show:l}}]);app.factory("HJactionLoading",["$compile","$ionicBody","$rootScope","essential","$timeout",function(n,o,a,i,l){var s=a.$new(!0),t=null,u='<div class="pop-bg-hj" ng-show="showLoading">                <div class="pop-load">                    <ul class="pop-ball"><li><span></span></li><li><span></span></li><li><span></span></li><li><span></span></li></ul>                </div>            </div>',c=!1,e=null,p=function(){c||(e=s.element=n(u)(s),o.append(e),c=!0)},d=function(){i.dimStatusBarBackground(!0),p(),s.showLoading=!0,t&&(l.cancel(t),t=null),t=l(function(){t=null,r()},25e3)},r=function(){i.dimStatusBarBackground(!1),s.showLoading=!1,t&&(l.cancel(t),t=null)},g=function(){return s.showLoading};return a.$on("$stateChangeStart",function(){s.showLoading&&r()}),s.$on("$destory",function(){r(),c=!1,e&&(e.remove(),e=null)}),{show:d,hide:r,isShow:g}}]);app.factory("HJactionPwdInput",["HJactionLoading","IONIC_BACK_PRIORITY","$compile","$ionicBody","$RSA","$MD5","$NumKeyboard","$Reg","$rootScope","cgiService","$timeout","utils","essential","GLOBAL_CONSTANT",function(n,i,o,a,e,d,c,t,r,s,l,w,p,g){var y=r.$new(!0),u='<div>                <div class="pop-bg-hj" ng-if="isPwdShow">                    <div class="pop bg-a">                        <header class="hd">{{pwdTitle}}<i class="close" ng-click="onClickClose()"></i></header>                        <p class="w-a" ng-if="pwdSubTitle" ng-bind="pwdSubTitle"></p>                        <p class="w-b" ng-if="pwdTransDesc" ng-bind="pwdTransDesc"></p>                        <ol class="code-list">                            <li ng-repeat="str in vm.displayPwd track by $index" ng-bind="str"></li>                        </ol>                        <div class="gh-w">                            <span class="w-l" ng-if="payWayDesc" ng-bind="payWayDesc"></span>                            <span class="w-r" ng-if="payWayDesc && canChangePayWay" ng-click="onClickChangePayWay()">更换</span>                        </div>                    </div>                </div>            </div>',P=!1,h="",S=0,f="←",A=y.vm={originPwd:new Array(6),displayPwd:new Array(6)},C=function(n){n==f?S>0&&(S--,A.originPwd[S]="",A.displayPwd[S]="",y.onClickKeyboard(A.displayPwd)):""==n||(S>5?T():(A.displayPwd[S]="●",A.originPwd[S]=n,S++,y.onClickKeyboard(A.displayPwd),6==S&&T()))},R=null,T=function(){c.hide(),R=l(function(){y.isPwdShow=!1},100),y.isFactorNeeded&&P?n.show():b()},b=function(){return y.isFactorNeeded&&""==h?(w.makeToast(STRING_TABLE.DEFAULT_ERR_DESC),D.clear(),void c.show(onPwdClick)):(6>S&&w.reportCustomEvent(g.REPORT_EVENT_NAME.PASSWORD_INVALUED,"passwod_invalued"),D.MD5=d(A.originPwd.join("")),D.originPwd=A.originPwd.join(""),D.randomFactor=h,D.RSA=e.encrypt(A.originPwd.join("")+String(h)),D.RSA.length<512&&(D.RSA=e.encrypt(A.originPwd.join("")+String(h))),D.RSA.length<512&&(D.RSA=e.encrypt(A.originPwd.join("")+String(h))),D.RSA.length<512&&(D.RSA=e.encrypt(A.originPwd.join("")+String(h))),D.RSA.length<512&&(D.RSA=e.encrypt(A.originPwd.join("")+String(h))),void y.onFinishInput(D))},v=function(){S=0,A.originPwd=new Array(6),A.displayPwd=new Array(6),y.pwdDisplay=new Array(6),y.isWaitingFactor=!1},k=function(){y.isFactorNeeded&&(h="",P=!0,s.requestPasswordFactor().then(function(i){h=i.ret_data.factor,P=!1,n.isShow()&&(n.hide(),b())},function(){P=!1,n.hide()}))},D={clear:function(){v()}},$=!1,m=null,N=function(){$||("keyboardAndPwd"==y.showType&&(m=y.element=o(u)(y),a.append(m)),$=!0)},_=function(n){p.dimStatusBarBackground(!0),angular.extend(y,{pwdTitle:"请输入微众交易密码",pwdTransDesc:"",pwdSubTitle:"",pwdDisplay:new Array(6),showType:"keyboardAndPwd",onClickKeyboard:function(){},onFinishInput:function(){},onCanceled:function(){},isFactorNeeded:!0,payWayDesc:"",canChangePayWay:!1,onClickChangePayWay:function(){}},n||{}),k(),N(n),R&&(l.cancel(R),R=null),y.isPwdShow=!0,D.clear(),c.show(C)},E=function(){p.dimStatusBarBackground(!1),R&&(l.cancel(R),R=null),y.isPwdShow=!1,c.hide()},F=function(){return R?!1:y.isPwdShow},W=function(){E(),$=!1,m&&(m.remove(),m=null)},I=r.$on("$stateChangeStart",function(){W()});return y.$on("$destory",function(){W(),I()}),y.onClickClose=function(){y.onCanceled(),E()},{show:_,hide:E,isShow:F}}]);app.directive("commonSelect",["$ionicModal","essential",function(e,t){return{restrict:"E",templateUrl:"../js/directive/common-select/common-select.html",scope:{listItems:"=",headerText:"=",value:"=",callback:"=",showSelect:"=",setSelected:"="},link:function(o){e.fromTemplateUrl("common-select-items.html",{scope:o}).then(function(e){o.modal=e}),o.showItems=function(e){e&&e.preventDefault(),o.modal.show(),t.dimStatusBarBackground(!0)},o.hideItems=function(){o.modal.hide(),t.dimStatusBarBackground(!1)},o.showSelect=function(){o.showItems()},o.setSelected=function(e){if(o.listItems instanceof Array)for(var t=0;t<o.listItems.length;t++)o.listItems[t]._selected=!1,o.listItems[t].text==e&&(o.listItems[t]._selected=!0)},o.$on("$destroy",function(){o.modal.remove(),t.dimStatusBarBackground(!1)}),o.$on("modal.hidden",function(){t.dimStatusBarBackground(!1)}),o.$on("modal.removed",function(){t.dimStatusBarBackground(!1)}),o.onClassItem=function(e){return e._selected?"px-b selected":"px-b"},o.validateSingle=function(e){for(var t=0;t<o.listItems.length;t++)o.listItems[t]._selected=!1;e._selected=!0,o.obj=e,o.value&&(o.value=e.id),o.hideItems(),"function"==typeof o.callback&&o.callback(o.obj)}}}}]);app.directive("hjCommonPicker",["$timeout","$ionicScrollDelegate","$ionicModal",function(c,e,i){return{restrict:"AE",scope:{showCommonPicker:"="},link:function(t,n,o){var r=t.vm={},a=null,l=!1,s=(new Date).getTime(),y=!1,u=!1;r.provinceHandle="provinceHandle"+s,r.cityHandle="cityHandle"+s,r.countryHandle="countryHandle"+s,r.backdrop=!1,r.backdropClickToClose=!1,r.tag=o.tag||"-",r.provinceList=[],r.cityList=[],r.countryList=[],r.returnOk=function(){a&&a.hide(),r._callback(1)},r.clickToClose=function(){r.backdropClickToClose&&a&&a.hide()},r._callback=function(e){r.callback&&c(function(){r.callback({type:e,select1:r.province&&r.province.name,select2:r.city&&r.city.name,select3:r.country&&r.country.name})})},r.getData=function(i){if(!(r.selected1||r.selected2||r.selected3)){switch(c.cancel(r.scrolling),c.cancel(r.dataing),i){case"province":if(!r.cityData)return!1;var t=!0,n=r.cityData.length,o=r.provinceHandle,a=r.cityHandle;break;case"city":if(!r.province.sub)return!1;var l=!0,n=r.province.sub.length,o=r.cityHandle,a=r.countryHandle;break;case"country":if(!r.city.sub)return!1;var s=!0,o=r.countryHandle,n=r.city.sub.length}var v=e.$getByHandle(o).getScrollPosition().top,d=Math.round(v/36);0>d&&(d=0),d>n-1&&(d=n-1),v===36*d?r.dataing=c(function(){t&&(r.province=r.cityData[d],r.activeLiClass("province",d),r.city=r.province.sub[0],r.activeLiClass("city",0),r.country={},r.city&&r.city.sub&&(r.country=r.city.sub[0],r.activeLiClass("country",0))),l&&(r.city=r.province.sub[d],r.activeLiClass("city",d),r.country={},r.city&&r.city.sub&&(r.country=r.city.sub[0]),r.activeLiClass("country",0)),s&&(r.country=r.city.sub[d],r.activeLiClass("country",d)),a&&e.$getByHandle(a).scrollTop(),y=!1,u=!1,r.cityList!=(r.province&&r.province.sub)&&(y=!0,r.cityList=[]),r.countryList!=(r.city&&r.city.sub)&&(u=!0,r.countryList=[]),c(function(){y&&(r.cityList=r.province&&r.province.sub),u&&(r.countryList=r.city&&r.city.sub)}),r._callback(2)},10):r.scrolling=c(function(){e.$getByHandle(o).scrollTo(0,36*d,!0)},150)}},r.activeLiClass=function(c,e){"province"==c?(r.provinceDiv||(r.provinceDiv=document.getElementById("provinceDiv")),r.provinceDiv&&$(r.provinceDiv).find("li").removeClass("s-black").eq(e).addClass("s-black")):"city"==c?(r.cityDiv||(r.cityDiv=document.getElementById("cityDiv")),r.cityDiv&&$(r.cityDiv).find("li").removeClass("s-black").eq(e).addClass("s-black")):"country"==c&&(r.countryDiv||(r.countryDiv=document.getElementById("countryDiv")),r.countryDiv&&$(r.countryDiv).find("li").removeClass("s-black").eq(e).addClass("s-black"))},r.initScroll=function(){if(r.province=null,r.city=null,r.country=null,r.provinceList=r.cityData||[],r.cityData&&r.selected1)for(var i in r.cityData)if(r.selected1==r.cityData[i].name){r.province=r.cityData[i],r.provinceIndex=i;break}if(r.province||(r.province=r.cityData&&r.cityData[0],r.provinceIndex=0),r.province&&r.selected2)for(var i in r.province.sub)if(r.selected2==r.province.sub[i].name){r.city=r.province.sub[i],r.cityIndex=i;break}if(r.city||(r.city=r.province&&r.province[0],r.cityIndex=0),r.city&&r.selected3)for(var i in r.vm.city)r.selected3==r.city.sub[i].name&&(r.country=r.city.sub[i],r.countryIndex=i);r.country||(r.country=r.city&&r.city[0],r.countryIndex=0),r.province&&(r.cityList=r.province.sub,e.$getByHandle(r.provinceHandle).scrollTo(0,36*r.provinceIndex)),r.city&&(r.countryList=r.city.sub,e.$getByHandle(r.cityHandle).scrollTo(0,36*r.cityIndex)),r.country&&e.$getByHandle(r.countryHandle).scrollTo(0,36*r.countryIndex),r.selected1="",r.selected2="",r.selected3="",c(function(){r.activeLiClass("province",r.provinceIndex),r.activeLiClass("city",r.cityIndex),r.activeLiClass("country",r.countryIndex)},300)};var v=function(c){r.okText=c.okText||"确定",r.cityData=c.srcData,r.callback=c.callback,r.selected1=c.selected1,r.selected2=c.selected2,r.selected3=c.selected3};t.showCommonPicker=function(e){return v(e),l?(r.initScroll(),void(a&&a.show())):(a&&a.remove(),l=!0,void i.fromTemplateUrl("../js/directive/common-picker/common-picker.html",{scope:t,animation:"slide-in-up",backdropClickToClose:r.backdropClickToClose}).then(function(e){a=e,c(function(){r.getData("province"),r.initScroll(),a.show()},100)}))},t.$on("$destroy",function(){a&&a.remove()})}}}]);app.directive("redPacket",["$rootScope","$location","envService","$sce","$timeout","dataService","LocationService","RegisterService","GLOBAL_CONSTANT","cache","PopupService",function(e,t,n,a,c,o,r,i,A,u,P){return{restrict:"EA",templateUrl:"../js/directive/red-packet/red-packet.html",scope:{init:"=?init"},link:function(t){var n=function(n){if(e.$emit("POPUP_DATA_LOADED","RedPacket"),n&&n.status){var a=n.data||[];t.redPacketAmount=0,t.redPacketNum=0;for(var c=0,o=0;o<a.length;o++)2==a[o].status&&(c+=1e3*a[o].amount,t.redPacketNum++);t.redPacketAmount=parseInt(c)/1e3}};t.init=function(){t.show=!1,t.showPanel=!1,t.redPacketAmount=0,t.redPacketNum=0,o.getRedPacket().then(n,function(){e.$emit("POPUP_DATA_LOADED","RedPacket")},n)};var a=e.$on("POPUP_SHOW",function(e,n){"RedPacket"===n&&(t.redPacketAmount>0?t.show=!0:P.next("RedPacket"))});t.$on("$destroy",function(){a()}),t.onClickBuoy=function(){var e=u.getUserStatus();e&&(t.btnStr="去购买",t.showPanel=!0,e==A.ACCOUNT_STATE.USER_STATE_LOGIN?t.btnStr="去开户":e==A.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT)},t.onClickClose=function(){t.showPanel=!1},t.onClickGoBtn=function(){var e=u.getUserStatus();e&&(e==A.ACCOUNT_STATE.USER_STATE_LOGIN?(i.setCallbackPage("home","default"),i.go()):e==A.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&r.go("/transIn"))}}}}]);app.directive("goldPrice",["GLOBAL_CONSTANT","$timeout","cache","essential","ProdInfoService","utils","$interval","cgiService","cache","GoldCurrentService","LocationService",function(e,t,a,r,i,n,o,d,a,l,c){return{restrict:"E",transclude:!0,templateUrl:"../js/directive/gold-price/gold-price.html",scope:{},link:function(e){e.data={},e.func={},e.data.prodInfo=i.getProdInfo("10001"),e.data.realValueMapClass="item mod-tab-title active",e.data.historyValueClass="item mod-tab-title",e.data.showRealValueMap=!0,e.data.showHistoryValue=!1,e.renderData=[],e.srcDataObj={},e.defaultChart={chart:{type:"line",pinchType:"",zoomType:"",marginTop:15},navigator:{enabled:!1},credits:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},series:[{data:null,lineWidth:2,states:{hover:{enabled:!1}}}],yAxis:{gridLineWidth:.5,gridLineColor:"#E9ECEF",labels:{format:"{value:point.y:.0f}",y:4},lineWidth:0,opposite:!1,tickmarkPlacement:"on",showLastLabel:!0,tickPositioner:function(){var e,t=Math.floor(this.dataMin),a=Math.ceil(this.dataMax),r=a-t,i=r/3,n=t-r/6,o=a+r/6;return e=[n],e.push(n+i),e.push(n+2*i),e.push(n+3*i),e.push(o),e}},xAxis:{ordinal:!1,type:"datetime",lineWidth:0,labels:{align:"center",style:{overflow:"visible",textOverflow:"none"},formatter:function(){var e=new Date(this.value).getHours()+"";return 10>e&&(e="0"+e),e+=":00"}},tickLength:5,showLastLabel:!0},tooltip:{valueDecimals:2,valueSuffix:"",enabled:!0,pointFormatter:function(){var t="时间:",a=new Date(this.x);t+=n.getHHMMStringByDate(a,":"),t+="<br/>",t+="价格:",t+=parseFloat(this.y).toFixed(3);var r=this.x,i=e.srcDataObj[r];return e.onMoveCallback(i.a,i.b),t},headerFormat:""},plotOptions:{line:{enableMouseTracking:!0,pointPlacement:"between",lineWidth:1,marker:{enabled:!1}}}};var a=function(){d.gold.getTodayGoldPrice().then(function(t){if(tracelog("查询今日黄金行情成功"),t.ret_data&&t.ret_data.l){e.renderData=[],e.srcDataObj={};var a=n.getYYYYMMDDStringByDate(n.getDate());for(var i in t.ret_data.l){var o=t.ret_data.l[i].m+"00",d=n.getDateByDate8AndTime6String(a,o).getTime(),l=parseFloat(((t.ret_data.l[i].a+t.ret_data.l[i].b)/2).toFixed(2)),c=[d,l];e.renderData.push(c),e.srcDataObj[d]=t.ret_data.l[i]}r()}},function(){tracelog("查询今日黄金行情失败")})},r=function(){e.chartOptions=angular.copy(e.defaultChart),e.chartOptions.series[0].data=e.renderData,t(function(){e.func.showChart&&e.func.showChart(e.chartOptions,function(t){e.chartHandle=t})})},c=function(){var t=l.getGoldPrice();if(t){e.data.price=t.midPrice,e.data.buyPrice=t.buyPrice,e.data.salePrice=t.salePrice,e.data.change=parseFloat(parseFloat((e.data.price-e.data.prodInfo.last_close_price)/e.data.prodInfo.last_close_price*100).toFixed(2));var a=n.getDate().getTime(),r={};r.a=t.buyPrice,r.b=t.salePrice,e.srcDataObj&&(e.srcDataObj[a]=r),e.renderData&&e.renderData.length>1&&(e.renderData[e.renderData.length-1][0]=a,e.renderData[e.renderData.length-1][1]=parseFloat(parseFloat(e.data.price).toFixed(2)),e.chartOptions=angular.copy(e.defaultChart),e.chartOptions.series[0].data=e.renderData,e.func.showChart(e.chartOptions))}},s=function(){l.refreshGoldPrice()},u=function(){e.data.historyValueList=[];var t={},a=n.getDate();a.setDate(a.getDate()-90),t.start_date=n.getYYYYMMDDStringByDate(a),t.end_date=n.getYYYYMMDDStringByDate(n.getDate()),d.gold.getHistoryGoldPrice(t).then(function(t){if(tracelog("查询历史金价成功"),t.ret_data&&t.ret_data.l){e.data.historyValueData=t.ret_data;for(var a=0;a<t.ret_data.l.length&&7>a;++a){var r={};r.date=t.ret_data.l[a].d,r.value=t.ret_data.l[a].p,r.change=a<t.ret_data.l.length-1?parseFloat((t.ret_data.l[a].p-t.ret_data.l[a+1].p)/t.ret_data.l[a+1].p*100).toFixed(2):0,r.change>=0?r.class="item s-red":r.change<0&&(r.class="item s-green"),e.data.historyValueList.push(r)}}},function(){tracelog("查询历史金价失败")})},g=function(){var t=[],a=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(n.getDate()),e.data.prodInfo.market_open_time).getTime(),r=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(n.getDate()),e.data.prodInfo.market_close_time).getTime();t.push(a);for(var i=1;;){var o=a+3*i*36e5;if(!(r-o>=72e5))break;t.push(o),i++}t.push(r),e.defaultChart.xAxis.tickPositions=t,e.defaultChart.xAxis.min=t[0],e.defaultChart.xAxis.max=t[t.length-1]},h=function(){if("1"==e.data.prodInfo.can_trans){var t=n.getDate(),a=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(t),e.data.prodInfo.market_open_time),r=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(t),e.data.prodInfo.market_close_time);e.data.transLimit=t>a&&r>t?!1:!0}else e.data.transLimit=!0},m=function(){u(),p(),document.addEventListener("pause",f,!1),document.addEventListener("resume",p,!1)};e.$on("$destroy",function(){tracelog("goldPrice.destroy"),f(),document.removeEventListener("pause",f),document.removeEventListener("resume",p)}),e.$on("$ionic.reconnectScope",function(){tracelog("goldPrice.HJViewActive"),p(),document.addEventListener("pause",f,!1),document.addEventListener("resume",p,!1)}),e.$on("$ionic.disconnectScopeFirst",function(){tracelog("goldPrice.HJViewDisActive"),f(),document.removeEventListener("pause",f),document.removeEventListener("resume",p)});var p=function(){tracelog("goldPrice.onEnter"),h(),g(),a(),e.data.initGoldPriceTimer&&o.cancel(e.data.initGoldPriceTimer),e.data.initGoldPriceTimer=o(a,36e4),s(),e.data.refreshGoldPriceTimer&&o.cancel(e.data.refreshGoldPriceTimer),e.data.refreshGoldPriceTimer=o(s,5e3),c(),e.data.updateGoldPriceTimer&&o.cancel(e.data.updateGoldPriceTimer),e.data.updateGoldPriceTimer=o(c,1e3)},f=function(){tracelog("goldPrice.onLeave"),e.data.refreshGoldPriceTimer&&o.cancel(e.data.refreshGoldPriceTimer),e.data.initGoldPriceTimer&&o.cancel(e.data.initGoldPriceTimer),e.data.updateGoldPriceTimer&&o.cancel(e.data.updateGoldPriceTimer)};m()},controller:["$scope",function(e){e.onClickRealValueMap=function(){e.data.showRealValueMap||(e.data.realValueMapClass="item mod-tab-title active",e.data.historyValueClass="item mod-tab-title",e.data.showRealValueMap=!0,e.data.showHistoryValue=!1)},e.onClickHistoryValue=function(){e.data.showHistoryValue||(e.data.realValueMapClass="item mod-tab-title",e.data.historyValueClass="item mod-tab-title active",e.data.showRealValueMap=!1,e.data.showHistoryValue=!0)},e.onMoveCallback=function(a,r){t(function(){e.data.buyPrice=a,e.data.salePrice=r})},e.onClickViewMoreHistory=function(){c.go("/goldPriceHistory",e.data.historyValueData)}}]}}]);app.directive("userAgreement",["dataService","$timeout","LocationService","HJactionMenu","essential",function(e,r,t,n,a){return{restrict:"E",transclude:!0,templateUrl:"../js/directive/user-agreement/user-agreement.html",scope:{isAgreed:"=?isAgreed",agreementDescArr:"=?agreementDesc",agreementCallback:"=?agreementCallback",agreementType:"=?agreementType",agreementDetail:"=?agreementDetail",agreementCode:"=?agreementCode",onClickAgreeCheckbox:"=?onClickAgreeCheckbox"},link:function(c){c.isAgreed=c.isAgreed||!1,c.checkBoxClassStr=c.isAgreed?"checkbox-wrap":"checkbox-wrap off",c.agreementDescArr=c.agreementDescArr||[],c.agreementDescArr="string"==typeof c.agreementDescArr?[c.agreementDescArr]:c.agreementDescArr,c.showPanel=!1,c.agreementCode=c.agreementCode||0;for(var o=0;o<c.agreementDescArr.length-1;o++)c.agreementDescArr[o]+=",";c.agreementType=c.agreementType||0,c.agreementType&&0==c.agreementDescArr.length&&c.agreementDescArr.push(["","《账户服务协议》","《委托扣款协议》","《微众银行服务协议》","《微众银行隐私政策》"][c.agreementType]),c.onClickCheckBox=function(){c.isAgreed=!c.isAgreed,c.checkBoxClassStr=c.isAgreed?"checkbox-wrap":"checkbox-wrap off",r(function(){"function"==typeof c.onClickAgreeCheckbox&&c.onClickAgreeCheckbox()})},c.items={name:[],pdfUrl:[]};var m=function(e){e&&e.length>0&&(e.sort(function(e,r){return e.show_sort-r.show_sort}),c.items.name=[],c.items.pdfUrl=[],$.each(e,function(e,r){c.items.name.push(r.app_show_name),c.items.pdfUrl.push(r.location)}))};1*c.agreementType>0&&1*c.agreementType<=100||e.getPorductAgreement({code:c.agreementCode}).then(m,function(){},m);var g=null;c.onClickAgreement=function(e){"function"==typeof c.agreementCallback&&c.agreementCallback(e),1*c.agreementType>0&&1*c.agreementType<100?t.go("/agreementDetail"+c.agreementType):1*c.agreementType==100||c.items.pdfUrl&&c.items.pdfUrl.length>0&&(1==c.items.pdfUrl.length?a.openPdf(c.items.pdfUrl[0],c.items.name[0]):g=n.show({buttonArr:c.items.name,cancenText:"取消",clickCallback:function(e){a.openPdf(c.items.pdfUrl[e],c.items.name[e])}}))},c.checkClass=function(){return c.isAgreed?"checkbox-wrap":"checkbox-wrap off"},c.$on("$destroy",function(){g&&g()})}}}]);app.directive("announcement",["utils","$timeout","dataService","envService","essential",function(e,n,t,r,o){return{restrict:"A",transclude:!0,templateUrl:"../js/directive/announcement/announcement.html",scope:{code:"=?code",hideAgree:"=?hideAgree"},link:function(e){e.dataList={announceArr:[],announceTitle:"产品公告",agreeTitle:"服务协议及风险提示",agreeArr:[]};var n=function(n){n&&n.length>0&&(e.dataList.announceArr=[],$.each(n,function(n,t){e.dataList.announceArr.push({name:t.app_show_name||"公告",url:t.location,show_sort:t.show_sort||0})}),e.dataList.announceArr.sort(function(e,n){return n.show_sort-e.show_sort}))};t.getProductNotice({code:e.code}).then(n,function(){},n);var r=function(n){n&&n.length>0&&(e.dataList.agreeArr=[],$.each(n,function(n,t){e.dataList.agreeArr.push({name:t.app_show_name||"协议",url:t.location,show_sort:t.show_sort||0})}),e.dataList.agreeArr.sort(function(e,n){return e.show_sort-n.show_sort}))};e.hideAgree||t.getPorductAgreement({code:e.code}).then(r,null,r),e.onClass=function(e){return e?"p-c-lgray":"p-c-lgray px-a"},e.onClickItem=function(e){o.openPdf(e.url,e.name)}}}}]);app.directive("highcharts",function(){return{restrict:"A",scope:{showChart:"=showChart",chartOptions:"=chartOptions"},link:function(t,r){var h={lang:{rangeSelectorZoom:""}},n=null;Highcharts.setOptions(h),t.showChart=function(){var h=t.chartOptions;h.chart.renderTo=r[0],n=new Highcharts.Chart(h)}}}});app.directive("stockcharts",function(){return{scope:{showChart:"=showChart",chartOptions:"=chartOptions"},link:function(e,t){var r={lang:{rangeSelectorZoom:""}},s=null;Highcharts.setOptions(r),e.x=0,e.showChart=function(){var r=e.$parent.data.chartOptions;s?(s.setOptions(r),s.redraw()):(r.chart.renderTo=t[0],new Highcharts.StockChart(r))}}}}),app.directive("hjstockcharts",function(){return{scope:{showChart:"=showChart"},link:function(e,t){var r={lang:{rangeSelectorZoom:""}},s=null,o=null;Highcharts.setOptions(r);var a=function(e){o&&o(e)};e.showChart=function(e,r){e&&e.onMouseMove&&(o=e.onMouseMove),s?(s.reflow(),e&&e.series&&e.series[0]&&e.series[0].data&&s.series[0].update({data:e.series[0].data}),e&&e.series&&e.series[1]&&e.series[1].data&&s.series[1].update({data:e.series[1].data})):(e.chart.renderTo=t[0],s=new Highcharts.StockChart(e),t.unbind("mousemove").bind("mousemove",a),t.unbind("touchmove").bind("touchmove",a),r&&r(s))}}}});app.directive("popConfirm",["$location","envService","$sce","$timeout","essential",function(o,e,t,i,u){return{restrict:"EA",templateUrl:"../js/directive/pop-confirm/pop-confirm.html",scope:{outValue:"=?outValue"},controller:["$scope","$element",function(o,e){o.$watch("outValue.showPop",function(t,a){if(t)o.showPop=!0,u.dimStatusBarBackground(!0),i(function(){var o=e.children();o.addClass("active").removeClass("invisible")});else if(a){var n=e.children();n&&n.removeClass("active"),i(function(){n&&n.addClass("invisible"),o.showPop=!1,u.dimStatusBarBackground(!1)},100)}}),o.popClose=function(e){o.outValue&&"function"==typeof o.outValue.popClose&&(o.outValue.showPop=!1,u.dimStatusBarBackground(!0),i(function(){o.outValue.popClose(e,o.outValue.inputDefaultText)}))}}]}}]);app.directive("fancySelect",["$ionicModal","$ionicScrollDelegate","$timeout","essential",function(e,t,a,n){return{restrict:"E",templateUrl:"../js/directive/fancy-select/fancy-select.html",scope:{listItems:"=",headerText:"=",value:"=",callback:"=",showSelect:"="},link:function(c){var l=t.$getByHandle("myContent");if(!c.items){c.items=[];for(var o=1;29>o;o++){var i="每月"+o+"日";c.items.push({text:i,_selected:!1,value:o})}}e.fromTemplateUrl("fancy-select-items.html",{scope:c}).then(function(e){c.modal=e}),c.showItems=function(e){e&&e.preventDefault(),c.modal.show(),n.dimStatusBarBackground(!0)},c.bindItemClass=function(e){return e._selected?"px-b selected":"px-b"},c.hideItems=function(){c.modal.hide(),n.dimStatusBarBackground(!1)},c.showSelect=function(e){var t=-1;try{e&&(t=e.getDate())}catch(n){}for(var o in c.items){var i=c.items[o];i._selected=!1,i.value==t&&(i._selected=!0)}c.showItems(),t>3&&a(function(){l.scrollTo(0,44*(t-3),!0)},100)},c.$on("modal.hidden",function(){n.dimStatusBarBackground(!1)}),c.$on("modal.removed",function(){n.dimStatusBarBackground(!1)}),c.$on("$destroy",function(){c.modal.remove()}),c.validateSingle=function(e,t){for(var a=0;a<c.items.length;a++)c.items[a]._selected=!1;e._selected=!0,c.text=e.text,c.value=e.id,c.hideItems(),"function"==typeof c.callback&&c.callback(c.text,t+1)}}}}]);app.directive("sliderUpConfirm",["$rootScope","$sce","$timeout","essential","$ionicPlatform","IONIC_BACK_PRIORITY","$ionicModal","GLOBAL_CONSTANT",function(i,n,o,t,r,e,p){return{restrict:"EA",templateUrl:"../js/directive/slider-up-confirm/slider-up-confirm.html",scope:{sliderUpConfirmOption:"=?sliderUpConfirmOption"},link:function(n){var r=null,e=function(){p.fromTemplateUrl("slider-up-confirm.html",{scope:n,animation:"slide-in-up",backdropClickToClose:!0}).then(function(i){n.modal=i}),n.$watch("sliderUpConfirmOption.show",function(i,n){i?l():n&&s()})},l=function(){n.sliderUpConfirmOption.onClose=n.sliderUpConfirmOption.onClose||function(){},n.sliderUpConfirmOption.headText=n.sliderUpConfirmOption.headText||"",n.sliderUpConfirmOption.cancelBtnText=n.sliderUpConfirmOption.cancelBtnText||"取消",n.sliderUpConfirmOption.buttonList=n.sliderUpConfirmOption.buttonList||[],$.each(n.sliderUpConfirmOption.buttonList,function(i,n){n.strClass=n.red?"p-c-lred px-b px-lt":n.gray?"p-c-lgray px-b px-lt":"px-b px-lt"}),n.modal.show(),t.dimStatusBarBackground(!0),r=i.$on("$stateChangeStart",function(){s()})},s=function(){n.modal.hide()},d=function(){n&&n.sliderUpConfirmOption&&n.sliderUpConfirmOption.show&&(n.sliderUpConfirmOption.show=!1,n.sliderUpConfirmOption.headText="",n.sliderUpConfirmOption.cancelBtnText="取消",n.sliderUpConfirmOption.buttonList=[]),r&&r(),r=null};n.onClickItem=function(i){i>=0&&"p-c-lgray px-b px-lt"==n.sliderUpConfirmOption.buttonList[i].strClass||(i+=1,s(),o(function(){n.sliderUpConfirmOption.onClose(i)}))},n.$on("modal.hidden",function(){t.dimStatusBarBackground(!1),d()}),n.$on("$destroy",function(){n.modal.remove(),d()}),e()}}}]);app.directive("sliderUpPartRedeem",["$rootScope","$sce","$timeout","essential","$ionicPlatform","IONIC_BACK_PRIORITY","$ionicModal","GLOBAL_CONSTANT","$ionicSlideBoxDelegate","utils",function(e,t,E,n,o,a,r,R,m,i){return{restrict:"EA",templateUrl:"../js/directive/slider-up-part-redeem/slider-up-part-redeem.html",scope:{option:"=?option"},link:function(t){var o=null,a=0,p={};p[R.QILU_REDEEM_TYPE.ALL_REDEEM]=0,p[R.QILU_REDEEM_TYPE.PART_REDEEM]="02";var l=0,d=0,s=1,_=2;t.initPageAllRewnewClass="flex p-bgc-fff px mgt10",t.initPageAllRedeemClass="flex p-bgc-fff px mgt10",t.initPageAllPartRedeemClass="flex p-bgc-fff px mgt10";var c={};c[R.QILU_REDEEM_TYPE.ALL_REDEEM]="全额赎回至",c[R.QILU_REDEEM_TYPE.PART_REDEEM]="部分赎回至",t.selectPageHead="",t.data={},t.data.partRedeemAmount=0;var f=function(){r.fromTemplateUrl("slider-up-part-redeem.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.modal=e}),t.$watch("option.show",function(e,t){e?L():t&&D()})},P=function(){t.lastSelected=a,t.initPageAllRewnewClass="flex p-bgc-fff px mgt10",t.initPageAllRedeemClass="flex p-bgc-fff px mgt10",!t.option.greyPartRedeem&&(t.initPageAllPartRedeemClass="flex p-bgc-fff px mgt10"),t.lastSelected==R.QILU_REDEEM_TYPE.ALL_RENEW?t.initPageAllRewnewClass="flex p-bgc-fff px mgt10 checked":t.lastSelected==R.QILU_REDEEM_TYPE.ALL_REDEEM?(t.initPageAllRedeemClass="flex p-bgc-fff px mgt10 checked open",t.settingPageRedeemType=p[R.QILU_REDEEM_TYPE.ALL_REDEEM]||0):t.lastSelected==R.QILU_REDEEM_TYPE.PART_REDEEM&&(!t.option.greyPartRedeem&&(t.initPageAllPartRedeemClass="flex p-bgc-fff px mgt10 checked open"),t.settingPageRedeemAmount=l,t.settingPageRewnewAmount=parseFloat(1*t.option.redeemAmount-1*l).toFixed(2),t.settingPagePartRedeemType=p[R.QILU_REDEEM_TYPE.PART_REDEEM]||0),t.onClickReturn=function(){D()}},A=function(e,E){t.selectPageHead=c[e],t.selectPageWebankClass="flex p-bgc-fff px mgt10",t.selectPageHJClass="flex p-bgc-fff px mgt10",1*E==1?t.selectPageWebankClass="flex p-bgc-fff px mgt10 checked":1*E==2&&(t.selectPageHJClass="flex p-bgc-fff px mgt10 checked"),t.onClickSelectRedeemType=function(t){e==R.QILU_REDEEM_TYPE.ALL_REDEEM?(a=R.QILU_REDEEM_TYPE.ALL_REDEEM,p[R.QILU_REDEEM_TYPE.ALL_REDEEM]=t,M({selectType:R.QILU_REDEEM_TYPE.ALL_REDEEM,redeemType:t})):(p[R.QILU_REDEEM_TYPE.PART_REDEEM]=t,m.slide(s),u(t))},t.onClickReturn=function(){e==R.QILU_REDEEM_TYPE.ALL_REDEEM?(m.slide(d),P()):(m.slide(s),u())}},u=function(e){t.data.partRedeemAmount=1*l||"",t.partRedeemLastSelected=e||p[R.QILU_REDEEM_TYPE.PART_REDEEM],t.partRenewAmount=parseFloat(1*t.option.redeemAmount-1*l).toFixed(2),t.partRedeemErrorStr="",t.showInput=!0,t.onClickReturn=function(){m.slide(d),P()},t.onClickPartRedeemType=function(){m.slide(_),A(R.QILU_REDEEM_TYPE.PART_REDEEM,p[R.QILU_REDEEM_TYPE.PART_REDEEM])},t.onChangeInput()};t.onChangeInput=function(){l=t.data.partRedeemAmount,t.partRedeemErrorStr="",t.partRedeemTipsStr="",l&&("0"==l?t.partRedeemErrorStr="请输入有效金额":1*l<t.minRedeemAmount?t.partRedeemErrorStr="最小赎回金额:"+i.formatMoneyString(t.minRedeemAmount)+"元":t.option.redeemAmount-1*l<t.minBalanceAmount&&(t.partRedeemErrorStr="本次最大赎回金额:"+i.formatMoneyString(t.option.redeemAmount-t.minBalanceAmount)+"元")),l=1*l,t.partRenewAmount=parseFloat(1*t.option.redeemAmount-l).toFixed(2),t.partRedeemErrorStr||(t.partRedeemTipsStr="到期后部分本金及其收益赎回，剩余部分本金自动购买下一期、收益以分红发放",l&&("01"==t.partRedeemLastSelected?t.partRedeemTipsStr='到期后<span class="p-c-lorange">'+i.formatMoneyString(t.data.partRedeemAmount)+'</span>元及其收益赎回至微众卡,剩余<span class="p-c-lorange">'+i.formatMoneyString(t.partRenewAmount)+"元</span>本金自动购买下一期,收益赎回至微众卡":"02"==t.partRedeemLastSelected&&(t.partRedeemTipsStr='到期后<span class="p-c-lorange">'+i.formatMoneyString(t.data.partRedeemAmount)+'</span>元及其收益赎回至活期+,剩余<span class="p-c-lorange">'+i.formatMoneyString(t.partRenewAmount)+"元</span>本金自动购买下一期,收益赎回至活期+"))),T()};var L=function(){t.option.onConfirmSelect=t.option.onConfirmSelect||function(){},a=t.option.selectItem||a,t.option.redeemAmount=1*t.option.redeemAmount||0,t.option.redeemIncome=1*t.option.redeemIncome||0,a==R.QILU_REDEEM_TYPE.ALL_REDEEM?p[R.QILU_REDEEM_TYPE.ALL_REDEEM]=t.option.redeemType&&t.option.redeemType[R.QILU_REDEEM_TYPE.ALL_REDEEM]||p[R.QILU_REDEEM_TYPE.ALL_REDEEM]:a==R.QILU_REDEEM_TYPE.PART_REDEEM&&(p[R.QILU_REDEEM_TYPE.PART_REDEEM]=t.option.redeemType&&t.option.redeemType[R.QILU_REDEEM_TYPE.PART_REDEEM]||p[R.QILU_REDEEM_TYPE.PART_REDEEM]),t.option.showPartRedeem=!!t.option.showPartRedeem,l=t.option.partRedeemAmount||l,t.minRedeemAmount=1*t.option.minRedeemAmount||0,t.minBalanceAmount=1*t.option.minBalanceAmount||0,t.minRedeemAmount+t.minBalanceAmount>t.option.redeemAmount&&(t.option.greyPartRedeem=!0,t.initPageAllPartRedeemClass="flex p-bgc-fff px mgt10 txt-disabled"),t.modal.show(),n.dimStatusBarBackground(!0),t.showInput=!1,o=e.$on("$stateChangeStart",function(){D()}),m.currentIndex()!=d&&m.slide(d,0),m.enableSlide(!1),P()},M=function(e){D(),E(function(){t.option.onConfirmSelect(e)})},T=function(){t.saveButtonClass="txt-r txt-disabled",t.partRedeemLastSelected&&!t.partRedeemErrorStr&&1*t.data.partRedeemAmount&&(t.saveButtonClass="txt-r")};t.onClickRedeemType=function(e){var E=function(){m.slide(_),A(R.QILU_REDEEM_TYPE.ALL_REDEEM,p[R.QILU_REDEEM_TYPE.ALL_REDEEM])},n=function(){t.option.greyPartRedeem||(m.slide(s),u())};e==R.QILU_REDEEM_TYPE.ALL_RENEW?(a=R.QILU_REDEEM_TYPE.ALL_RENEW,M({selectType:R.QILU_REDEEM_TYPE.ALL_RENEW})):e==R.QILU_REDEEM_TYPE.ALL_REDEEM?E():e==R.QILU_REDEEM_TYPE.PART_REDEEM?n():e==R.QILU_REDEEM_TYPE.ALL_REDEEM_HEAD?E():e==R.QILU_REDEEM_TYPE.PART_REDEEM_HEAD&&n()},t.onClickSavePartRedeem=function(){"txt-r txt-disabled"!=t.saveButtonClass&&(a=R.QILU_REDEEM_TYPE.PART_REDEEM,p[R.QILU_REDEEM_TYPE.PART_REDEEM]=t.partRedeemLastSelected,l=t.data.partRedeemAmount,M({selectType:R.QILU_REDEEM_TYPE.PART_REDEEM,redeemType:t.partRedeemLastSelected,partRedeemAmount:t.data.partRedeemAmount,partRenewAmount:t.partRenewAmount}))};var D=function(){t.modal.hide()},g=function(){t&&t.option&&t.option.show&&(t.option.show=!1),o&&o(),o=null};t.$on("modal.hidden",function(){n.dimStatusBarBackground(!1),g()}),t.$on("$destroy",function(){t.modal.remove(),g()}),f()}}}]);app.directive("riskAssessment",["$rootScope","$sce","$timeout","essential","$ionicPlatform","IONIC_BACK_PRIORITY","$ionicModal","GLOBAL_CONSTANT","$ionicSlideBoxDelegate","utils","HJactionPop","HJactionLoading","cgiService","cache",function(n,s,e,a,t,o,i,p,r,d,c,l,h,u){return{restrict:"EA",templateUrl:"../js/directive/risk-assessment/risk-assessment.html",scope:{option:"=?option"},link:function(n){var s={INTRODUCTION:1,QUESTIONS:2,RESULT:3},a=null,i=100;n.submitClass="btn-c off",n.showIndex=0,n.leavePageAnimate="slide-in-side";var x=[{head:"",Title:"1.您目前的职业状况是？ ",data:[" A.无业或退休<span>（0分）</span>"," B.自由职业或佣金收入<span>（4分）</span>"," C.自营事业<span>（6分）</span>"," D.机关、事业单位或社会团体人员<span>（8分）</span>"," E.企业职工<span>（10分）</span>"],index:i,scoreArr:[0,4,6,8,10]},{head:"",Title:"2.您的家庭年收入为（税后折合人民币）？ ",data:[" A.5万元以下<span>（0分）</span>"," B.5-20万元<span>（2分）</span>"," C.20-50万元<span>（3分）</span>"," D.50-100万元<span>（4分）</span>"," E.100万元以上<span>（5分）</span>"],index:i,scoreArr:[0,2,3,4,5]},{head:"",Title:"3. 在您每年的家庭收入中，可用于金融投资（储蓄存款除外）的比例为？",data:[" A.10%以下 <span>（0分）</span>"," B.10%-25%<span>（2分）</span>"," C.25%-50% <span>（4分）</span>"," D.50%以上<span>（5分）</span>"],index:i,scoreArr:[0,2,4,5]},{head:"",Title:"4.哪项最能说明您的投资经验？ ",data:[" A.只投资过存款、国债<span>（0分）</span>"," B.大部分投资于存款、国债等，较少投资于股票、基金等风险产品<span>（2分）</span>"," C.资产均衡地分布于存款、国债、银行理财产品、信托产品、股票、基金等<span>（4分）</span>"," D.大部分投资于股票、基金、外汇等风险产品，较少投资于存款、国债<span>（6分）</span>"],index:i,scoreArr:[0,2,4,6]},{head:"",Title:"5.您有多少年投资风险产品的经验（如：股票、基金、外汇、金融衍生产品等）？",data:["A.没有经验<span>（0分）</span>","B.2年以下<span>（2分）</span>","C.2-5年<span>（6分）</span>","D.5-8年<span>（8分）</span>","E.8年以上<span>（10分）</span>"],index:i,scoreArr:[0,2,6,8,10]},{head:"",Title:"6.哪项描述最符合您的股票投资经验和认识？",data:["A.没有经验，不了解股票的运作<span>（-2分）</span>","B.一定经验，较大程度依赖股评、朋友推荐等<span>（0分）</span>","C.丰富经验，大部分投资都基于技术面分析<span>（2分）</span>","D.专业经验，大部分投资都基于技术面和基本面的全面分析<span>（4分）</span>"],index:i,scoreArr:[-2,0,2,4]},{head:"",Title:"7.哪项描述最符合您的投资态度和目的？",data:[" A.厌恶风险，不希望本金损失，希望获得稳定回报<span>（0分）</span>"," B.保守投资，不希望本金损失，愿意承担一定幅度的收益波动<span>（4分）</span>"," C.寻求较高收益，愿意承担有限本金损失<span>（8分）</span>"," D.希望赚取高回报，愿意承担较大本金损失<span>（10分）</span>"],index:i,scoreArr:[0,4,8,10]},{head:"",Title:"8.您有10万元本金，以下投资情况，您会选择哪一种？",data:[" A.100%的机会获得1%本金的收益，并保证本金<span>（0分）</span>"," B.50%的机会获得5%本金的收益，并有较高可能保本<span>（4分）</span>"," C.25%的机会获得50%本金的收益，并有一定的可能损失本金<span>（6分）</span>"," D.10%的机会获得100%本金的收益，并有较高可能损失本金<span>（10分）</span>"],index:i,scoreArr:[0,4,6,10]},{head:"",Title:"9.短期投资（不超过1年）出现何种波动时，您会明显焦虑？",data:[" A.本金无损失，但收益未达预期<span>（-1分）</span>"," B.本金5%以下损失<span>（0分）</span>"," C.本金5%-20％损失<span>（2分）</span>"," D.本金20-50％损失<span>（4分）</span>"," E.本金50％以上损失<span>（5分）</span>"],index:i,scoreArr:[-1,0,2,4,5]},{head:"",Title:"10.长期投资（1年以上）出现何种波动时，您会明显焦虑？",data:[" A.本金无损失，但收益未达预期<span>（-1分）</span>"," B.本金5%以下损失<span>（0分）</span>"," C.本金5%-20％损失<span>（2分）</span>"," D.本金20-50％损失<span>（4分）</span>"," E.本金50％以上损失<span>（5分）</span>"],index:i,scoreArr:[-1,0,2,4,5]},{head:"",Title:"11.投资于理财、股票、基金等金融投资品（不含存款和国债）时，您可接受的最长投资期限是？",data:["A.1年以下<span>（4分）</span>","B.1-3年<span>（6分）</span>","C.3-5年<span>（8分）</span>","D.5年以上<span>（10分）</span>"],index:i,scoreArr:[4,6,8,10]},{head:"",Title:"12.如您打算购买保险，最符合您对保险的需求是？",data:["A.基础类：满足基本保险需求，考虑意外险、人身险、财产险、医疗险等<span>（0分）</span>","B.储蓄投资类：准备教育金与养老金、资产的传承与分配<span>（5分）</span>","C.理财型投资类：实现保障和投资的双重需求<span>（10分）</span>"],index:i,scoreArr:[0,5,10]}];n.showIndex=0,n.renderDataLength=x.length,n.showData=x[n.showIndex],n.showNext=!1,n.showPrev=!1;var T=function(a){var t=function(){n.leavePageAnimate="slide-in-side",r.slide(0),e(function(){r.enableSlide(!1)})},o=function(){for(var s in x)x[s].index=i;n.showIndex=0,n.renderDataLength=x.length,n.showData=x[n.showIndex],B(),r.slide(1),r.enableSlide(!1)},p=function(){};switch(a){case s.INTRODUCTION:t();break;case s.QUESTIONS:o();break;case s.RESULT:p()}},A=function(){n.$watch("option.show",function(n,s){n?I():s&&f()})},I=function(){T(s.INTRODUCTION),n.$deregisterBackButton=t.registerBackButtonAction(function(){C()},o.modal)},f=function(n,s){w(n,s)},w=function(s,a){n.$deregisterBackButton&&(n.$deregisterBackButton(),n.$deregisterBackButton=null),"back"==a&&(n.leavePageAnimate="slide-in-side right-side-out"),e(function(){n&&n.option&&(!n.option.isParentBack||s)&&(n.option.show=!1)},30)},C=function(){var s=function(){f(null,"back"),n.option.onEndOfProcess({status:p.RISK_STATUS.CLICK_BACK})};1==r.currentIndex()?c.show({oneLineTextLeft:"本次风险评估未完成，终止后将不保存当前进度，确定终止？",twoButtonText1:"终止",twoButtonText2:"继续评估",popClose:function(e){1==e&&s(n.option.isParentBack)}}):s()};n.onClickBeginAnswer=function(){T(s.QUESTIONS)};var B=function(){n.showData=x[n.showIndex],n.showNext=!1,n.showPrev=!1,n.showIndex>0&&(n.showPrev=!0),n.showIndex<n.renderDataLength-1&&n.showData.index>-1&&n.showData.index<n.showData.data.length&&(n.showNext=!0)},D=function(s,e,a){l.show(),h.requestSubmitAssessmet({score:s,cust_risk_level:e,answer_list:a}).then(function(s){if(l.hide(),s&&s.ret_data&&1*s.ret_data.cust_risk_level>=0){var e=1*s.ret_data.cust_risk_level;u.setCacheInfo("assessment",{cust_risk_level:e}),n.leavePageAnimate="",f(!0),n.option.onEndOfProcess({status:p.RISK_STATUS.CLICK_SUBMIT,cust_risk_level:e})}else d.makeToast(STRING_TABLE.DEFAULT_ERR_DESC,"short")},function(){l.hide(),d.makeToast(STRING_TABLE.DEFAULT_ERR_DESC,"short")})};n.isItemActive=function(n,s){return n.index==s},n.onClickItem=function(s,t){s.index=t,n.showIndex==n.renderDataLength-1?n.submitClass="btn-c":a=e(function(){n.onClickNext(s)},200)},n.onClickPrev=function(){a&&(e.cancel(a),a=null),6==n.showIndex&&0==x[3].index?n.showIndex-=3:n.showIndex>0?n.showIndex--:n.showIndex=0,B()},n.onClickNext=function(s){return a&&(e.cancel(a),a=null),s.index<0||s.index>s.data.length?void d.makeToast(STRING_TABLE.INVALID_SELECT,"short"):(3==n.showIndex&&0==n.showData.index?(x[4].index=0,x[5].index=0,n.showIndex+=3):n.showIndex<n.renderDataLength-1?n.showIndex++:n.showIndex=n.renderDataLength-1,void B())},n.onClickBack=function(){C()},n.onClickSubmit=function(){if(n.submitClass.search("off")>0)return void d.makeToast("请选择后再提交","short");for(var e=0,a=[],t=["A","B","C","D","E","F","G"],o=0;o<x.length;o++)e+=x[o].scoreArr[x[o].index],a.push(t[x[o].index]);var i=0;10>=e?i=0:30>=e?i=1:50>=e?i=2:70>=e?i=3:90>=e&&(i=4),c.show({textHead:"本次评估结果 <span class='og'>"+gRiskArr[i]+"</span>",oneLineTextLeft:"本人保证以上所填全部信息为本人真实的意思表示，并接受贵行评估意见，点击确认视为签名确认",twoButtonText1:"重新评测",twoButtonText2:"确认",popClose:function(n){1==n?T(s.INTRODUCTION):2==n&&D(e,i,a.join(","))}})},n.$on("$destroy",function(){e(function(){w()},200)}),A()}}}]);app.directive("a",function(){return{restrict:"E",link:function(e,n,t){(t.ngClick||""===t.href||"#"===t.href)&&n.on("click",function(e){e.preventDefault()})}}}),app.directive("button",function(){return{restrict:"E",link:function(e,n,t){t.ngClick&&n.on("click",function(e){e.preventDefault()})}}}),app.directive("textarea",["$timeout",function(e){return{restrict:"E",scope:{focusFlag:"=?focusFlag"},link:function(n,t){n.$watch("focusFlag",function(n){1==n&&e(function(){t[0].focus()},100)})}}}]),app.directive("compile",["$compile",function(e){return function(n,t,i){n.$watch(function(e){return e.$eval(i.compile)},function(i){t.html(i),e(t.contents())(n)})}}]),function(e){"use strict";e.views.SliderUpDown=e.views.View.inherit({initialize:function(e){function n(){if(c.offsetHeight&&(d=f.children,v=d.length,2==v)){l=new Array(v);var n=d[0].clientHeight;f.style.height=v*n+"px",h=n||c.offsetHeight||c.getBoundingClientRect().height;for(var i=v;i--;){var o=d[i];o.style.height=n+"px",o.setAttribute("data-index",i),t(i,p>i?-h:i>p?h:0,0)}d[1].style.visibility="visible",e.slidesChanged&&e.slidesChanged()}}function t(e,n,t){i(e,n,t),l[e]=n}function i(e,n,t){var i=d[e],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=t+"ms",o.webkitTransform="translate(0,"+n+"px)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateY("+n+"px)")}var o=this,s=function(){},r=function(e){setTimeout(e||s,0)},a={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var t in n)if(void 0!==e.style[n[t]])return!0;return!1}(document.createElement("swipe"))},c=e.el,u=0;if(c){var d,l,v,h,f=c;e=e||{};var m,p=0,E=e.speed||300,g={},w={},L={handleEvent:function(t){switch(("mousedown"==t.type||"mouseup"==t.type||"mousemove"==t.type)&&(t.touches=[{pageX:t.pageX,pageY:t.pageY}]),t.type){case"mousedown":this.start(t);break;case"touchstart":this.start(t);break;case"touchmove":this.touchmove(t);break;case"mousemove":this.touchmove(t);break;case"touchend":r(this.end(t));break;case"mouseup":r(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":r(this.transitionEnd(t));break;case"resize":r(n)}e.stopPropagation&&t.stopPropagation()},start:function(e){var n=e.touches[0];g={x:n.pageX,y:n.pageY,time:+new Date},m=void 0,w={},a.touch?(f.addEventListener("touchmove",this,!1),f.addEventListener("touchend",this,!1)):(f.addEventListener("mousemove",this,!1),f.addEventListener("mouseup",this,!1),document.addEventListener("mouseup",this,!1))},touchmove:function(n){if(!(n.touches.length>1||n.scale&&1!==n.scale||o.slideIsDisabled)){var t=n.touches[0];if(w={x:t.pageX-g.x,y:t.pageY-g.y},"undefined"==typeof m&&(m=!!(m||Math.abs(w.y)<Math.abs(w.x))),!m){var s=w.y<=0?0:1;s==u&&(0!=w.y&&(p?e.upDownContent1.freezeScroll(!0):e.upDownContent0.freezeScroll(!0)),p==u&&(n.preventDefault(),i(0,w.y+l[0],0),i(1,w.y+l[1],0))),e.onDrag&&e.onDrag()}}},end:function(){e.upDownContent0.freezeScroll(!1),e.upDownContent1.freezeScroll(!1);var n=+new Date-g.time,i=Number(n)<250&&Math.abs(w.y)>20||Math.abs(w.y)>h/2,o=w.y<0?0:1;m||(i?(o==u&&p==u&&(p?(t(1,l[1]+h,E),t(0,l[0]+h,E),p=0):(t(0,l[0]-h,E),t(1,l[1]-h,E),p=1)),u=p,e.callback&&e.callback(p,d[p])):(t(0,l[0],E),t(1,l[1],E))),a.touch?(f.removeEventListener("touchmove",L,!1),f.removeEventListener("touchend",L,!1)):(f.removeEventListener("mousemove",L,!1),f.removeEventListener("mouseup",L,!1),document.removeEventListener("mouseup",L,!1)),e.onDragEnd&&e.onDragEnd()},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==p&&e.transitionEnd&&e.transitionEnd.call(n,p,d[p])}};this.setup=function(){n()},this.isTransitions=function(){return a.transitions},this.currentIndex=this.selected=function(){return p},this.beginListen=function(){a.addEventListener?(a.touch?f.addEventListener("touchstart",L,!1):f.addEventListener("mousedown",L,!1),a.transitions&&(f.addEventListener("webkitTransitionEnd",L,!1),f.addEventListener("msTransitionEnd",L,!1),f.addEventListener("oTransitionEnd",L,!1),f.addEventListener("otransitionend",L,!1),f.addEventListener("transitionend",L,!1)),window.addEventListener("resize",L,!1)):window.onresize=function(){n()}},this.isDownLoaded=!1,this.isUpLoaded=!1,this.loadDownBound=function(){this.isDownLoaded||(this.unload(),this.beginListen(),u=0,this.isDownLoaded=!0)},this.loadUpBound=function(){this.isUpLoaded||(this.unload(),this.beginListen(),u=1,this.isUpLoaded=!0)},this.unload=function(){(this.isDownLoaded||this.isUpLoaded)&&(a.addEventListener?(f.removeEventListener("touchstart",L,!1),f.removeEventListener("webkitTransitionEnd",L,!1),f.removeEventListener("msTransitionEnd",L,!1),f.removeEventListener("oTransitionEnd",L,!1),f.removeEventListener("otransitionend",L,!1),f.removeEventListener("transitionend",L,!1),window.removeEventListener("resize",L,!1)):window.onresize=null,this.isDownLoaded=!1,this.isUpLoaded=!1)}}}})}(ionic),app.directive("hjUpDownBox",["$timeout","$ionicScrollDelegate",function(e,n){return{restrict:"E",replace:!0,transclude:!0,scope:{init:"=upDownInit"},controller:["$scope","$element","$attrs",function(t,i){function o(){var e=d.scrollEl.children[0].scrollHeight,n=!1;if(d.currentIndex){var t=u.getScrollPosition().top;n=-1!==e&&0>=t?!0:!1}else{var t=c.getScrollPosition().top;n=-1!==e&&t>=e-d.scrollEl.clientHeight?!0:!1}r(n,d.currentIndex)}function s(e){return n._instances.filter(function(n){return n.$element&&n.$element[0]&&n.$element[0].attributes&&n.$element[0].attributes.hjcontentindex==e+1?!0:!1})[0]}function r(e,n){e?n?a.loadUpBound():a.loadDownBound():a.unload()}var a,c,u,d=this;t.init=function(n,t){e(function(){try{if(d.currentIndex=0,c=s(0),u=s(1),c&&u||t(!1),d.scrollEl=i[0].children[0],a=new ionic.views.SliderUpDown({el:i[0],upDownContent0:c,upDownContent1:u,callback:function(e){d.scrollEl.removeEventListener("scroll",o),d.currentIndex=e,d.scrollEl=i[0].children[d.currentIndex],d.scrollEl.addEventListener("scroll",o)}}),!a||!a.isTransitions)return void t(!1);e(function(){a.setup()}),n&&d.scrollEl.addEventListener("scroll",o)}catch(r){t(!1)}})},t.$on("$destroy",function(){d.scrollEl&&d.scrollEl.removeEventListener&&d.scrollEl.removeEventListener("scroll",o),a&&a.unload&&a.unload()})}],template:'<div ng-transclude style="position: relative;overflow: hidden;height: 100%;"></div>',link:function(e,n){var t=n.children();if(2==t.length)for(var i=0;i<t.length;i++)n.children()[i].attributes.hjcontentindex=i+1}}}]),function(e){"use strict";e.views.HJSlider=e.views.View.inherit({initialize:function(e){function n(){if(m.offsetWidth){E=D.children,L=E.length,E.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&E.length<3&&(D.appendChild(E[0].cloneNode(!0)),D.appendChild(D.children[1].cloneNode(!0)),E=D.children),g=new Array(E.length),w=m.offsetWidth||m.getBoundingClientRect().width,3>L?(b=w,x=w):(b=parseInt(w*(1-p/100)),x=parseInt(w*(1-2*p/100))),D.style.width=E.length*w+"px";for(var n=E.length;n--;){var t=E[n];if(t.style.width=b+"px",t.setAttribute("data-index",n),f.transitions){t.style.left=n*-b+"px";var i=w;n==y+1&&(i=b),r(n,y>n?-b:n>y?i:0,0)}}e.continuous&&f.transitions&&(r(o(y-1),-w,0),r(o(y+1),w,0)),f.transitions||(D.style.left=y*-w+"px"),m.style.visibility="visible",e.slidesChanged&&e.slidesChanged()}}function t(n){e.continuous?s(y-1,n):y&&s(y-1,n)}function i(n){e.continuous?s(y+1,n):y<E.length-1&&s(y+1,n)}function o(e){return(E.length+e%E.length)%E.length}function s(n,t){if(y!=n){if(f.transitions){var i=Math.abs(y-n)/(y-n);if(e.continuous){var s=i;i=-g[o(n)]/w,i!==s&&(n=-i*E.length+n)}for(var a=Math.abs(y-n)-1;a--;)r(o((n>y?n:y)-a-1),w*i,0);n=o(n),r(y,w*i,t||T),r(n,0,t||T),e.continuous&&r(o(n-i),-(w*i),0)}else n=o(n),c(y*-w,n*-w,t||T);y=n,h(e.callback&&e.callback(y,E[y]))}}function r(e,n,t){a(e,n,t),g[e]=n}function a(e,n,t){var i=E[e],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=t+"ms",o.webkitTransform="translate("+n+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+n+"px)")}function c(n,t,i){if(!i)return void(D.style.left=t+"px");var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>i?(D.style.left=t+"px",$&&u(),e.transitionEnd&&e.transitionEnd.call(event,y,E[y]),void clearInterval(s)):void(D.style.left=(t-n)*(Math.floor(r/i*100)/100)+n+"px")},4)}function u(){k=setTimeout(i,$)}function d(){$=e.auto||0,clearTimeout(k)}var l=this,v=function(){},h=function(e){setTimeout(e||v,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var t in n)if(void 0!==e.style[n[t]])return!0;return!1}(document.createElement("swipe"))},m=e.el,p=e.cutPencent;if(m){var E,g,w,L,b,x,D=m.children[0];e=e||{};var y=parseInt(e.startSlide,10)||0,T=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var k,S,$=e.auto||0,C={},z={},I={handleEvent:function(t){switch(("mousedown"==t.type||"mouseup"==t.type||"mousemove"==t.type)&&(t.touches=[{pageX:t.pageX,pageY:t.pageY}]),t.type){case"mousedown":this.start(t);break;case"touchstart":this.start(t);break;case"touchmove":this.touchmove(t);break;case"mousemove":this.touchmove(t);break;case"touchend":h(this.end(t));break;case"mouseup":h(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(t));break;case"resize":h(n)}e.stopPropagation&&t.stopPropagation()},start:function(e){var n=e.touches[0];C={x:n.pageX,y:n.pageY,time:+new Date},S=void 0,z={},f.touch?(D.addEventListener("touchmove",this,!1),D.addEventListener("touchend",this,!1)):(D.addEventListener("mousemove",this,!1),D.addEventListener("mouseup",this,!1),document.addEventListener("mouseup",this,!1))},touchmove:function(n){if(!(n.touches.length>1||n.scale&&1!==n.scale||l.slideIsDisabled)){e.disableScroll&&n.preventDefault();var t=n.touches[0];z={x:t.pageX-C.x,y:t.pageY-C.y},"undefined"==typeof S&&(S=!!(S||Math.abs(z.x)<Math.abs(z.y))),S||(n.preventDefault(),d(),e.continuous?(a(o(y-1),z.x+g[o(y-1)],0),a(y,z.x+g[y],0),a(o(y+1),z.x+g[o(y+1)],0)):(z.x=z.x/(!y&&z.x>0||y==E.length-1&&z.x<0?Math.abs(z.x)/b+1:1),a(y-1,z.x+g[y-1],0),a(y,z.x+g[y],0),a(y+1,z.x+g[y+1],0)),e.onDrag&&e.onDrag())}},end:function(){var n=+new Date-C.time,t=Number(n)<250&&Math.abs(z.x)>20||Math.abs(z.x)>b/2,i=!y&&z.x>0||y==E.length-1&&z.x<0;e.continuous&&(i=!1);var s=z.x<0;if(!S)if(t&&!i){if(s){var a;e.continuous?(a=w,r(o(y-1),-a,0),r(o(y+2),a,0),r(y,g[y]-a,T),r(o(y+1),g[o(y+1)]-a,T)):(y==L-2?a=x:(a=b,r(y+2,a,T)),r(y-1,-a,0),r(y,g[y]-a,T),r(o(y+1),g[o(y+1)]-a,T)),y=o(y+1)}else{var a;e.continuous?(a=w,r(o(y+1),a,0),r(o(y-2),-a,0),r(y,g[y]+a,T),r(o(y-1),g[o(y-1)]+a,T)):(r(y,b,T),r(y-1,0,T),r(y+1,w,0)),y=o(y-1)}e.callback&&e.callback(y,E[y])}else e.continuous?(r(o(y-1),-w,T),r(y,0,T),r(o(y+1),w,T)):y==L-1?(r(y-1,w-2*b,T),r(y,w-b,T)):0==y?(r(y,0,T),r(y+1,b,T)):(r(y-1,-b,T),r(y,0,T),r(y+1,b,T));f.touch?(D.removeEventListener("touchmove",I,!1),D.removeEventListener("touchend",I,!1)):(D.removeEventListener("mousemove",I,!1),D.removeEventListener("mouseup",I,!1),document.removeEventListener("mouseup",I,!1)),e.onDragEnd&&e.onDragEnd()},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==y&&($&&u(),e.transitionEnd&&e.transitionEnd.call(n,y,E[y]))}};this.update=function(){setTimeout(n)},this.setup=function(){n()},this.loop=function(n){return arguments.length&&(e.continuous=!!n),e.continuous},this.enableSlide=function(e){return arguments.length&&(this.slideIsDisabled=!e),!this.slideIsDisabled},this.slide=this.select=function(e,n){d(),s(e,n)},this.prev=this.previous=function(){d(),t()},this.next=function(){d(),i()},this.stop=function(){d()},this.start=function(){u()},this.autoPlay=function(e){!$||0>$?d():($=e,u())},this.currentIndex=this.selected=function(){return y},this.slidesCount=this.count=function(){return L},this.kill=function(){d(),D.style.width="",D.style.left="",E&&(E=[]),f.addEventListener?(D.removeEventListener("touchstart",I,!1),D.removeEventListener("webkitTransitionEnd",I,!1),D.removeEventListener("msTransitionEnd",I,!1),D.removeEventListener("oTransitionEnd",I,!1),D.removeEventListener("otransitionend",I,!1),D.removeEventListener("transitionend",I,!1),window.removeEventListener("resize",I,!1)):window.onresize=null},this.load=function(){n(),$&&u(),f.addEventListener?(f.touch?D.addEventListener("touchstart",I,!1):D.addEventListener("mousedown",I,!1),f.transitions&&(D.addEventListener("webkitTransitionEnd",I,!1),D.addEventListener("msTransitionEnd",I,!1),D.addEventListener("oTransitionEnd",I,!1),D.addEventListener("otransitionend",I,!1),D.addEventListener("transitionend",I,!1)),window.addEventListener("resize",I,!1)):window.onresize=function(){n()}}}}})}(ionic),app.directive("hjSlideBox",["$timeout","$compile","$ionicSlideBoxDelegate","$ionicHistory","$ionicScrollDelegate",function(e,n,t,i,o){return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",activeSlide:"=?"},controller:["$scope","$element","$attrs",function(n,s,r){function a(e){e&&!c.isScrollFreeze?o.freezeAllScrolls(e):!e&&c.isScrollFreeze&&o.freezeAllScrolls(!1),c.isScrollFreeze=e}var c=this,u=n.$eval(n.doesContinue)===!0,d=!!n.autoPlay,l=d?n.$eval(n.slideInterval)||4e3:0,v=r.cutPencent||0,h=new ionic.views.HJSlider({el:s[0],auto:l,continuous:u,startSlide:n.activeSlide,cutPencent:v,slidesChanged:function(){n.currentSlide=h.currentIndex(),e(function(){})},callback:function(t){n.currentSlide=t,n.onSlideChanged({index:n.currentSlide,$index:n.currentSlide}),n.$parent.$broadcast("slideBox.slideChanged",t),n.activeSlide=t,e(function(){})},onDrag:function(){a(!0)},onDragEnd:function(){a(!1)}});h.enableSlide(n.$eval(r.disableScroll)!==!0),n.$watch("activeSlide",function(e){void 0!=e&&h.slide(e)}),n.$on("slideBox.nextSlide",function(){h.next()}),n.$on("slideBox.prevSlide",function(){h.prev()}),n.$on("slideBox.setSlide",function(e,n){h.slide(n)}),this.__slider=h;var f=t._registerInstance(h,r.delegateHandle,function(){return i.isActiveScope(n)});n.$on("$destroy",function(){f(),h.kill()}),this.slidesCount=function(){return h.slidesCount()},this.onPagerClick=function(e){n.pagerClick({index:e})},e(function(){h.load()})}],template:'<div class="slider"><div  ng-transclude></div></div>'}}]);app.directive("handpasswordCanvas",["$timeout","$MD5","cache","HandPasswordService",function(a,t,n,s){return{restrict:"AE",replace:!0,templateUrl:"../js/directive/handpassword/handpassword-canvas.html",scope:{handpasswordCanvasData:"=handpasswordCanvasData"},link:function(a,e){function r(a,t,n,s){a.circle(t,n,y).attr({stroke:s,"stroke-width":2})}function o(a){if(b)for(var t=0;t<b.length;t++)A.circle(b[t].x,b[t].y,50*y/126).attr({fill:a,stroke:a,"stroke-width":2})}function i(a,t,n,s){if(n&&0!=n.length){for(var e="",r=1;r<n.length;r++)e+="L"+n[r].x+","+n[r].y;t&&(e+="L"+t.x+","+t.y);var o="M"+n[0].x+","+n[0].y;e&&(o+=e,a.path(o).attr({stroke:s,"stroke-width":2}))}}function d(){b=[],m=[],x=[];var a=3;y=(S-2*k)/8.2;for(var t=0;a>t;t++)for(var n=0;a>n;n++){var s=(1+3.1*t)*y+k,e=(1+3.1*n)*y+k;m.push({x:s,y:e}),x.push({x:s,y:e,num:a*n+t+1})}return m}function h(a){var t=a.currentTarget.getBoundingClientRect(),n={x:a.touches[0].clientX-t.left,y:a.touches[0].clientY-t.top};return n}function u(a,t){a.clear();for(var n=0;n<m.length;n++)r(a,m[n].x,m[n].y,H);for(var n=0;n<b.length;n++)r(a,b[n].x,b[n].y,Y);if(o(Y),i(a,t,b,Y),t)for(var n=0;n<x.length;n++)if(Math.abs(t.x-x[n].x)<y&&Math.abs(t.y-x[n].y)<y){c(x[n],n);break}}function c(t,n){o(Y),_&&_.indexOf(""+t.num)>0||(b.push(t),_+=t.num),1==a.handpasswordCanvasData.mode&&1==a.handpasswordCanvasData.settingStep&&a.handpasswordCanvasData.statusListener&&a.handpasswordCanvasData.statusListener.onPointChanged(t.num,Y),x.splice(n,1)}function v(t){if(b&&b.length>0)for(var n=b[b.length-1],s=t,e=0;e<x.length;e++){var r=x[e];if(!(_&&_.indexOf(""+r.num)>0)){var o=f(r,n,s);if(o>0&&y>o){b.push(x[e]),_+=r.num,1==a.handpasswordCanvasData.mode&&1==a.handpasswordCanvasData.settingStep&&a.handpasswordCanvasData.statusListener&&a.handpasswordCanvasData.statusListener.onPointChanged(r.num,Y);break}}}}function f(a,t,n){var s,e,r,o=0;if(s=p(t,n),e=p(t,a),r=p(n,a),1e-6>=r||1e-6>=e)return o=-1;if(1e-6>=s)return o=-1;if(r*r>=s*s+e*e)return o=-1;if(e*e>=s*s+r*r)return o=-1;var i=(s+e+r)/2,d=Math.sqrt(i*(i-s)*(i-e)*(i-r));return o=2*d/s}function p(a,t){var n=0,s=a.x,e=t.x,r=a.y,o=t.y;return n=Math.sqrt((e-s)*(e-s)+(r-o)*(r-o))}function l(e){var r=t(e),o=t(r),i=n.getCacheInfo("personalInfo"),d=s.getCachedHandPass(),h=!1;if(i&&i.webank_card_no&&i.ecif_no&&(h=!0),h||d){var c=h?i.ecif_no:d.ecif;o=t(o+c),a.handpasswordCanvasData.onEnteredPassword(o,e.length),2==a.handpasswordCanvasData.mode&&a.handpasswordCanvasData.checkpwd!=o&&(Y=X,u(A,null)),1==a.handpasswordCanvasData.mode&&2==a.handpasswordCanvasData.settingStep&&a.handpasswordCanvasData.settingTempPwd!=o&&(Y=X,u(A,null)),a.handpasswordCanvasData.statusListener&&a.handpasswordCanvasData.statusListener.onEnteredOver()}}function w(){Y=O,1==a.handpasswordCanvasData.mode&&1==a.handpasswordCanvasData.settingStep&&a.handpasswordCanvasData.statusListener&&a.handpasswordCanvasData.statusListener.onInit(),_="",d(),A.clear();for(var t=0;t<m.length;t++)r(A,m[t].x,m[t].y,H)}function g(){E.addEventListener("touchstart",function(t){if(!a.handpasswordCanvasData.lock&&!q){a.handpasswordCanvasData.onTouchStart();var n=h(t);w();for(var s=0;s<m.length;s++)if(Math.abs(n.x-m[s].x)<y&&Math.abs(n.y-m[s].y)<y){I=!0,c(x[s],s),u(A,n);break}}},!1),E.addEventListener("touchmove",function(t){return a.handpasswordCanvasData.lock||q?void 0:D(t)?void C():void(I&&(v(h(t)),I&&u(A,h(t))))},!1),E.addEventListener("touchend",function(){C()},!1),E.addEventListener("touchcancel",function(){C()},!1)}function C(){q=!0,setTimeout(function(){q=!1},100),a.handpasswordCanvasData.lock||(a.handpasswordCanvasData.onTouchEnd(),I&&(I=!1,u(A,null),l(_),setTimeout(function(){w()},500)))}function D(a){return-1!=navigator.userAgent.indexOf("iPhone")&&(a.pageX<5||a.pageX>M-5||a.pageY<10||a.pageY>P-10)?!0:!1}var m,x,y,k=2,b=[],L=e[0].children[0],E=e[0].children[1],M=$(window).get(0).innerWidth,P=$(window).get(0).innerHeight,S=a.handpasswordCanvasData.canvasWidth,T=a.handpasswordCanvasData.canvasHeight,A=Raphael(L,S,T),I=!1,_="",H="#7087bc",O="#a0bcff",X="#f29360",Y=O,q=!1;L.setAttribute("id","id_page");var R="width:"+S+";height:"+T+";display:inline-block;";L.setAttribute("style",R);var W=(parseInt($(e).css("width"))-S)/2,j=(parseInt($(e).css("height"))-T)/2,B="width:"+S+";height:"+T+";position: absolute;left:"+W+";top:"+j+";";E.setAttribute("style",B),E.addEventListener("touchmove",function(a){a.preventDefault()},!1),w(),g()},controller:["$scope","$timeout",function(){}]}}]);app.directive("passwordStatusCanvas",["$timeout",function(){return{restrict:"AE",replace:!0,templateUrl:"../js/directive/handpassword/passwordstatus-canvas.html",scope:{handpasswordCanvasData:"=handpasswordCanvasData"},link:function(a,t){function n(a,t,n,r){a.circle(t,n,f).attr({stroke:r,"stroke-width":1})}function r(a){for(var t=0;t<l.length;t++)h.circle(l[t].x,l[t].y,f).attr({fill:a,stroke:a,"stroke-width":1})}function e(){l=[],c=[],u=[];var a=3;f=(v-2*d)/8.2;for(var t=0;a>t;t++)for(var n=0;a>n;n++){var r=(1+3.1*t)*f+d,e=(1+3.1*n)*f+d;c.push({x:r,y:e}),u.push({x:r,y:e,num:a*n+t+1})}return c}function o(a,t){a.clear();for(var e=0;e<c.length;e++)n(a,c[e].x,c[e].y,C);r(t)}function s(){a.handpasswordCanvasData.setStatusListener(w)}function i(){e(),h.clear();for(var a=0;a<c.length;a++)n(h,c[a].x,c[a].y,C)}var c,u,f,d=2,l=[],p=t[0],v=a.handpasswordCanvasData.preCanvasWidth,h=Raphael(p,v,v),w={},C="#7087bc";w.onPointChanged=function(a){for(var t=0;t<u.length;t++)if(a==u[t].num){l.push(u[t]),u.splice(t,1);break}},w.onInit=function(){i()},w.onEnteredOver=function(){o(h,C)},i(),s()},controller:["$scope","$timeout",function(){}]}}]);app.directive("loading",["essential",function(t){return{restrict:"AE",transclude:!0,templateUrl:"../js/directive/loading/loading.html?a=1",scope:!0,controller:["$scope","$element",function(a){a.$watch("data.showLoading",function(n){n===!0?t.dimStatusBarBackground(!0):n===!1&&t.dimStatusBarBackground(!1),a.showLoading=n})}]}}]);app.directive("keyboardInput",["$interval","$timeout","GLOBAL_CONSTANT","essential","utils",function(t,n,a,e,o){return{restrict:"AE",transclude:!0,templateUrl:"../js/directive/keyboard-input/keyboard-input.html",scope:{keyboardInputData:"=?keyboardInputData",hjShowKeyboard:"=?hjShowKeyboard",hjReflashKeyboard:"=?hjReflashKeyboard",hjModel:"=?hjModel",hjPlaceholder:"=?hjPlaceholder",hjChange:"&hjChange",hjClick:"&hjClick",hjFocus:"&hjFocus",hjBlur:"&hjBlur"},link:function(l,u,r){function i(){-1!=navigator.userAgent.indexOf("iPhone")&&(F="#3e6cff",V=2),P=u.children().children()[0],B=$(u).find("#inputfield").css("color"),x=v(B),A=$(u).find("#inputfield").css("font-size"),C=u.children().children()[1].clientWidth,T=u.children().children()[1].clientHeight;var t=$(u).find("#inputfield").css("paddingTop"),a=$(u).find("#inputfield").css("paddingBottom"),e=$(u).find("#inputfield").css("lineHeight"),o=parseInt(e);o&&o>0&&(R=(o-4-parseInt(A))/2),N=parseInt(A)-6,$(u).find("#svg").css("paddingTop",t),$(u).find("#svg").css("paddingBottom",a),T=T-parseInt(t)-parseInt(a),L=0,w=0,K=Raphael(P,C+"px",T+"px"),M=null,O=!0,z=!0,r.placeholder&&(S=r.placeholder),r.maxlength&&(W=r.maxlength),r.accuracy&&(_=1*r.accuracy),r.hjtype&&(Y=r.hjtype),d(),p(),E=!0,l.keyboardInputData.model&&n(function(){k()},100)}function d(){l.keyboardInputData.model&&0!=l.keyboardInputData.model.length||(m(K,S),L=0,w=0)}function p(){$(u).find("#inputfield").bind("touchstart",function(){l.longPress=!0,X=t(function(){l.longPress&&e.setWebViewLongClick("false"),t.cancel(X),X=null},200),n(function(){l.longPress&&c()},600)}),$(u).find("#inputfield").bind("touchend",function(){l.longPress=!1,null!=X&&(t.cancel(X),X=null),e.setWebViewLongClick("true")})}function c(){tracelog("Long click keyboard input"),l.hjModel&&l.hjModel.length>=W||q&&e.getClicpBoardStr().then(function(t){if(t&&t.str){var n=o.sTrim(t.str);n&&""!=n&&(J=n,l.keyboardInputData.pasteBtnClass="custom-input-tip",s(w-30))}},function(){})}function s(t){$(u).find("#pastebtn").css("left",t)}function f(){l.keyboardInputData.pasteBtnClass="custom-input-tip hide"}function h(t){if(t){var n=!1,a=t.replace(/[0-9]*/g,"");return"je"==Y?(""==a||"."==a)&&(n=!0):"sfz"==Y?("x"==a||"X"==a||""==a)&&(n=!0):("yhk"==Y||"sz"==Y)&&""==a&&(n=!0),n?!0:(o.makeToast("粘贴的内容不符合输入要求","short"),!1)}return!1}function b(){z=!0,r.type&&u.children().children().attr("type",r.type),r.pattern&&u.children().children().attr("pattern",r.pattern),r.placeholder&&(l.keyboardInputData.placeholder=r.placeholder),r.maxlength&&(l.keyboardInputData.maxlength=r.maxlength)}function I(){M||(O=!0,k(),g(K,F),M=t(function(){O&&(k(),n(function(){O?g(K,F):k()},600))},1e3))}function y(){M&&(k(),O=!1,t.cancel(M),M=null,k())}function k(){l.keyboardInputData.model&&l.keyboardInputData.model.length>0?D(K,l.keyboardInputData.model,x):d()}function g(t,n){var a="";a+="L"+(w+1)+","+(T-R);var e="M"+(w+1)+","+(0+R);a&&(e+=a,t.path(e).attr({stroke:n,"stroke-width":V}))}function D(t,n,a){if(t){t.clear();var e=n;if(e&&e.length>0){if("yhk"==Y)if(n==H&&U)e=U;else{var o=e,l=/\d{4}/g,u=o.match(l);u&&(u.push(o.substring(u.join("").length)),e=u.join(" "))}var r=t.text(0,N+R,e);if(r.attr({fill:a,"font-size":A,"text-anchor":"start"}),H=n,U=e,L=r[0]&&r[0].clientWidth||0,w=L,L>C-1-V){t.clear();var r=t.text(C-1-V-L,N+R,e);r.attr({fill:a,"font-size":A,"text-anchor":"start"}),w=C-1-V}}else L=0,w=0}}function m(t,n){if(t&&(t.clear(),n&&n.length>0)){var a=t.text(0,N+R,n);a.attr({fill:"#d6dae4","font-size":A,"text-anchor":"start"})}}function v(t){for(var n=/^rgb\(([0-9]{0,3})\,\s([0-9]{0,3})\,\s([0-9]{0,3})\)/g,a=t.replace(n,"$1 $2 $3").split(" "),e="#",o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],l=0;3>l;l++){for(var u=null,r=a[l],i=[];r>16;)u=r%16,r=r/16>>0,i.push(o[u]);i.push(o[r]),e+=i.reverse().join("")}return e}l.keyboardInputData||(l.keyboardInputData={}),APP_ABILITY&&APP_ABILITY.indexOf(a.APP_ABILITY.ABILITY_NATIVEKEYBOARD)>=0?(l.keyboardInputData.svgInput=!0,l.keyboardInputData.flag=!0):(l.keyboardInputData.svgInput=!1,l.keyboardInputData.flag=!1);var j=r.class;j||(j=""),j.indexOf("w-input")<0&&(j+=" w-input"),$(u).find("#inputfield").attr("class",j);var P=null,B=null,x=null,A=null,C=null,T=null,L=null,w=0,K=null,M=null,O=!0,S="",W=99,Y="",_=2,z=!0,N=10,R=0,E=!1,F="#000000",V=1,G=!1,H=null,U=null,X=null,q=!1,J=null,Q=function(){q=o.checkAbility(a.APP_ABILITY.ABILITY_GETCLICKBOARD),l.keyboardInputData.pasteBtnClass="custom-input-tip hide",n(l.keyboardInputData.svgInput?function(){i()}:function(){b()})};Q(),l.onPaste=function(){if(f(),J){l.keyboardInputData.model||(l.keyboardInputData.model="");var t=l.keyboardInputData.model,n=t+J;n.length>W&&(n=n.substring(0,W)),h(n)&&(l.keyboardInputData.model=n,l.hjModel=n,l.change(),l.blur()),J=null}},l.$watch("hjModel",function(t){z&&null!=t&&void 0!=t&&l.keyboardInputData&&(l.keyboardInputData.svgInput?(l.keyboardInputData.model=t.toString(),k()):l.hjModelinside=t.toString())}),l.$watch("hjPlaceholder",function(t){null!=t&&void 0!=t&&l.keyboardInputData&&(l.keyboardInputData.svgInput?(S=t,d()):l.keyboardInputData.placeholder=t)}),l.input=function(t){if(z=!1,l.keyboardInputData.svgInput){if("je"==Y&&l.keyboardInputData.model&&t){if("."==t){if(l.keyboardInputData.model.indexOf(t)>=0)return}else if("0"==l.keyboardInputData.model)return;if(l.keyboardInputData.model.split(".")[1]&&l.keyboardInputData.model.split(".")[1].length>=_)return;if("."==t||l.keyboardInputData.model.indexOf(".")>=0);else if(l.keyboardInputData.model.split(".")[0]&&l.keyboardInputData.model.split(".")[0].length>=9)return}if(l.keyboardInputData.model||(l.keyboardInputData.model=""),l.keyboardInputData.model.length>=W)return;f(),l.keyboardInputData.model+=t,l.hjModel=l.keyboardInputData.model,n(function(){k(),g(K,F)}),l.change()}z=!0},l.backspace=function(t){if(z=!1,l.keyboardInputData.svgInput){if(l.keyboardInputData.model||(l.keyboardInputData.model=""),""==l.keyboardInputData.model)return;l.keyboardInputData.model=t?"":l.keyboardInputData.model.substring(0,l.keyboardInputData.model.length-1),f(),n(function(){k(),g(K,F)}),l.change()}z=!0},l.change=function(t,a,e){n(function(){l.hjModel=l.keyboardInputData.svgInput?l.keyboardInputData.model:l.hjModelinside}),n(function(){l.hjChange(t,a,e)})},l.hjShowKeyboard=function(){$(u).find("#inputfield").focus()},l.hjReflashKeyboard=function(){Q()},l.blur=function(){f(),l.keyboardInputData.svgInput&&(navigator.WBNumberPadPlugin.hideKeyboard(),y()),G&&n(function(){l.hjBlur(),G=!1}),z=!0},l.focus=function(){l.keyboardInputData.svgInput&&(navigator.WBNumberPadPlugin.showKeyboard(Y,l.input,l.backspace,l.blur),I()),n(function(){l.hjFocus(),G=!0})},l.click=function(){l.keyboardInputData.svgInput&&(navigator.WBNumberPadPlugin.showKeyboard(Y,l.input,l.backspace,l.blur),I()),n(function(){l.hjClick(),G=!0})},r.$observe("placeholder",function(t){null!=t&&void 0!=t&&l.keyboardInputData&&(l.keyboardInputData.svgInput?(S=t,d()):l.keyboardInputData.placeholder=t)})}}}]);"use strict";app.directive("noticeMarquee",function(){return{restrict:"E",templateUrl:"../js/directive/notice-marquee/notice-marquee.html",controller:["$scope","$rootScope","$window","GLOBAL_CONSTANT","cache","LocationService","localStorage","$timeout",function(e,t,i,o,n,a,c,r){var s=function(){if(gNoticeInfo&&gNoticeInfo["notice-id"]){var t=gNoticeInfo["notice-marquee-text"];e.id=gNoticeInfo["notice-id"];var a=!0;if(a=n.getUserStatus()===o.ACCOUNT_STATE.USER_STATE_GUEST?1===c.loadData("notice-marquee-"+e.id):1===c.loadDataByUser("notice-marquee-"+e.id),t&&!a){e.text=t;var s=i.innerWidth+10*t.length,u=parseInt(gNoticeInfo["notice-marquee-speed"])||50,f=parseInt(s/u);e.show=!0,r(function(){e.style={animation:"marquee "+f+"s linear infinite","-webkit-animation":"marquee "+f+"s linear infinite"}},10)}}},u=function(){e.show=!1,e.id&&"undefined"!==e.id&&(n.getUserStatus()===o.ACCOUNT_STATE.USER_STATE_GUEST?c.saveData("notice-marquee-"+e.id,1):c.saveDataByUser("notice-marquee-"+e.id,1))};e.show=!1,e.style={},e.text="",e.onClickView=function(){a.go("/messageNotice")},e.onClickClose=function(){u()};var f=t.$on("POPUP_DATA_LOADED",function(t,i){"Notice"===i&&(gNoticeInfo&&gNoticeInfo["notice-id"]?e.show||s():u())}),d=t.$on("$stateChangeStart",function(t,i,o,n){("home"===n.name||"defaultPage"===n.name)&&(e.style={},e.show=!1)});e.$on("$destroy",function(){f(),d(),e.style={},e.show=!1})}]}});"use strict";app.directive("socialData",function(){return{restrict:"A",scope:{socialData:"@"},templateUrl:"../js/directive/social-data/social-data.html",controller:["$scope","SocialDataService",function(a,t){var c=["user","trade","income"],e=c.indexOf(a.socialData);a.data=t.local(e),t.sync(e).then(function(t){""===t?a.data=null:t&&(a.data=t)},function(t){a.data=null})}]}});app.controller("DefaultPageController",["$scope","$location","$http","essential","envService","$timeout","cache","LoginService","utils","localStorageService","GLOBAL_CONSTANT","CombinedFinancialService","cgiService","$q","RegisterService","$stateParams","$ionicViewSwitcher","$rootScope","HandPasswordService","MonetaryService","InsuranceProductDetailService","localStorage","LocationService","StockProductDetailService","$ionicHistory","ProdInfoService","JumpToModuleService","SecurityService","PopupService","XGService","VersionManagerService","ProdCommonActionService","CommonClickFnService","InviteService",function(t,e,o,r,a,n,c,d,i,u,p,s,T,l,f,_,L,v,P,S,m,y,g,h,C,A,k,D,E,R,b,U,I){h5TimeRecord&&(h5TimeRecord.h5DefaulCtrlStart=(new Date).getTime()),h5TimeRecord&&r.getCommonData("timeRecord").then(function(t){var e=angular.extend(t,h5TimeRecord);Statistics.reportEvent("detailTimeRecord",e),h5TimeRecord=null},function(t){});var N,O=(t.data={},function(){b.tryUpdateNativeVersion(),k.updateAppState(p.JUMP_APP_DEPENDS_STATE.DEFAULT_DATA,!1),w(),x(),q(),t.showInvestment=r.isFinancialHomeGray(),F(),H(),n(function(){navigator.splashscreen.hide()},10),D.check(),R.updateAccountStatus(),document.addEventListener("resume",V,!1),N=v.$on("POPUP_DATA_LOADED",function(t,e){"RedPacket"===e&&v.$emit("POPUP_SHOW","RedPacket")})}),w=function(){"true"==u.get("isReg")?c.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_LOGIN?(t.data.buttonDesc=" 开户 ",t.data.logoClass="logo v",n(function(){t.data.buttonDesc="开户"},100)):(t.data.buttonDesc=" 登录 ",t.data.logoClass="logo v",n(function(){t.data.buttonDesc="登录"},100)):(t.data.buttonDesc=" 开户 ",t.data.logoClass="logo v",n(function(){t.data.buttonDesc="开户"},100));var e=c.getUserInfo();c.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_LOGIN?(t.data.isLogin=!0,t.data.avatarUrl=e.picurl||"../img/tx@2x.png"):t.data.isLogin=!1},$=function(){t.initRedpacket&&t.initRedpacket()},x=function(){var e=y.loadData("defaultRecommend");if(e&&e.ret_data&&e.ret_data.productTypeList)for(var o in e.ret_data.productTypeList)0==e.ret_data.productTypeList[o].productType?e.ret_data.productTypeList[o].productList.length>0&&(t.data.monetaryProd=e.ret_data.productTypeList[o].productList[0]):1==e.ret_data.productTypeList[o].productType?e.ret_data.productTypeList[o].productList.length>0&&(t.data.insuranceProd=e.ret_data.productTypeList[o].productList[0]):2==e.ret_data.productTypeList[o].productType?e.ret_data.productTypeList[o].productList.length>0&&(t.data.stockProd=e.ret_data.productTypeList[o].productList[0]):3==e.ret_data.productTypeList[o].productType&&e.ret_data.productTypeList[o].productList.length>0&&(t.data.shortPeroidProd=e.ret_data.productTypeList[o].productList[0])},q=function(){T.requestDefaultRecommendInfo().then(function(t){tracelog("查询默认推荐信息成功"),y.saveData("defaultRecommend",t),x()},function(){tracelog("查询默认推荐信息失败")})},F=function(){t.showInvestment?T.requestFinancialRecommendInfoTencentV2().then(function(t){tracelog("查询理财推荐信息成功web"),y.saveData("financialRecommendV2",t);var e=[];if(t&&t.ret_data&&t.ret_data.productTypeList)for(var o in t.ret_data.productTypeList)if(0==t.ret_data.productTypeList[o].productType)for(var r in t.ret_data.productTypeList[o].productList)e.push(t.ret_data.productTypeList[o].productList[r].productCode);else if(1==t.ret_data.productTypeList[o].productType||3==t.ret_data.productTypeList[o].productType)for(var r in t.ret_data.productTypeList[o].productList)e.push(t.ret_data.productTypeList[o].productList[r].productSubCode);else if(2==t.ret_data.productTypeList[o].productType)for(var r in t.ret_data.productTypeList[o].productList)e.push(t.ret_data.productTypeList[o].productList[r].productCode);A.requestProdInfo(e).then(function(){k.updateAppState(p.JUMP_APP_DEPENDS_STATE.DEFAULT_DATA,!0),tracelog("按产品拉取产品信息成功")},function(){tracelog("按产品拉取产品信息失败")})},function(){tracelog("查询理财推荐信息失败web")}):T.requestFinancialRecommendInfoTencent().then(function(t){tracelog("查询理财推荐信息成功web"),y.saveData("financialRecommend",t);var e=[];if(t&&t.ret_data&&t.ret_data.productTypeList)for(var o in t.ret_data.productTypeList)if(0==t.ret_data.productTypeList[o].productType)for(var r in t.ret_data.productTypeList[o].productList)e.push(t.ret_data.productTypeList[o].productList[r].productCode);else if(1==t.ret_data.productTypeList[o].productType||3==t.ret_data.productTypeList[o].productType)for(var r in t.ret_data.productTypeList[o].productList)e.push(t.ret_data.productTypeList[o].productList[r].productSubCode);else if(2==t.ret_data.productTypeList[o].productType)for(var r in t.ret_data.productTypeList[o].productList)e.push(t.ret_data.productTypeList[o].productList[r].productCode);A.requestProdInfo(e).then(function(){k.updateAppState(p.JUMP_APP_DEPENDS_STATE.DEFAULT_DATA,!0),tracelog("按产品拉取产品信息成功")},function(){tracelog("按产品拉取产品信息失败")})},function(){tracelog("查询理财推荐信息失败web")})};t.go=function(){i.clickButtonReport("index_go"),c.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_LOGIN?(f.setCallbackPage("home","default"),L.nextDirection("forward"),f.go(),i.clickButtonReport("index_kaihu")):c.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?e.path("/home"):(i.clickButtonReport("index_denglu"),d.setCallbackPage(function(){g.go("/home",null,null,null,!0)},function(){g.go("/default",null,null,null,!0)}),g.go("/login"))},t.onClickRecomStockProduct=function(){t.data.stockProd&&A.requestProdInfo([t.data.stockProd.productCode]).then(function(){r.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var e=A.getProdInfo(t.data.stockProd.productCode);return e?void h.goPage(t.data.stockProd.productCode):void i.makeToast("产品信息拉取中，请稍后重试","short")})},t.onClickMainTab=function(t){I.mainTabClickFun(t,1)},t.onClickSettingsBtn=function(){L.nextDirection("back"),i.clickButtonReport("index_setting"),e.path("/accountSettings")},t.onClickMonetaryProduct=function(){t.data.monetaryProd&&A.requestProdInfo([t.data.monetaryProd.productCode]).then(function(){r.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var e=A.getProdInfo(t.data.monetaryProd.productCode);return e?void g.go("/monetaryMyProdDetail/"+t.data.monetaryProd.productCode):void i.makeToast("产品信息拉取中，请稍后重试","short")})},t.onClickShortPeroidProduct=function(){t.data.shortPeroidProd&&U.onClickProd(t.data.shortPeroidProd.productSubCode)},t.onClickInsuranceProduct=function(){t.data.insuranceProd&&A.requestProdInfo([t.data.insuranceProd.productSubCode]).then(function(){r.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var e=A.getProdInfo(t.data.insuranceProd.productSubCode);return e?void(0==e.templet_type?m.goPage(t.data.insuranceProd.productSubCode):2==e.templet_type&&g.go("/insuranceProductDetails2/"+t.data.insuranceProd.productSubCode)):void i.makeToast("产品信息拉取中，请稍后重试","short")})};var M=!1;t.back=function(){M?r.exitAndroidApp():(M=!0,i.makeToast("再按一次退出微众银行","short","bottom"),n(function(){M=!1},2500))};var H=function(){n(function(){$(),E.loadNotice()},10)},V=function(){H()};t.$on("$destroy",function(){N(),document.removeEventListener("resume",V)}),t.onHJViewActive=function(){O()},t.onHJViewDisActive=function(){N(),document.removeEventListener("resume",V)},O()}]);app.controller("WelcomeControllerV2",["$scope","$location","envService","$timeout","localStorageService","GLOBAL_CONSTANT","cache","essential","utils","WelcomeServiceV2",function(e,i,n,t,r,a,o,s,c,d){c.isiOSDevice()&&s.showStatusBar("false"),function(){$.fn.touchwipe=function(e){var i={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return e&&$.extend(i,e),this.each(function(){function e(){this.removeEventListener("touchmove",n),r=null,o=!1}function n(n){if(i.preventDefaultEvents&&n.preventDefault(),o){var t=n.touches[0].pageX,s=n.touches[0].pageY,c=r-t,d=a-s;Math.abs(c)>=i.min_move_x?(e(),c>0?i.wipeLeft(n):i.wipeRight(n)):Math.abs(d)>=i.min_move_y&&(e(),d>0?i.wipeDown(n):i.wipeUp(n))}}function t(e){1==e.touches.length&&(r=e.touches[0].pageX,a=e.touches[0].pageY,o=!0,this.addEventListener("touchmove",n,!1))}var r,a,o=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",t,!1)}),this}}(),$(document).ready(function(){function e(){if(1!=o&&n>=2&&t-1>=n){$(".con_wrap_"+n).addClass("wrap_hide"),1==s&&($(".first_load").removeClass("first_load"),s=0);{setTimeout(function(){$(".con_wrap_"+(n-1)).removeClass("wrap_show"),$(".con_wrap_"+n).addClass("wrap_show").removeClass("wrap_prepare"),n==t&&$(".pager_wrap").fadeOut(),$(".pager_list li").removeClass("current"),$(".pager_list li:nth-child("+(n-1)+")").addClass("current"),o=0},c)}if(o=1,n++,6==n){var e=a.WELCOME_VERSION;r.set("welcomePageKey",e)}}}function i(){if(1!=o&&t>=n&&n>=3){{setTimeout(function(){$(".con_wrap_"+(n+1)).addClass("wrap_prepare").removeClass("wrap_show").removeClass("wrap_hide"),$(".con_wrap_"+n).addClass("wrap_show").removeClass("wrap_hide"),n==t-1&&$(".pager_wrap").fadeIn(),$(".pager_list li").removeClass("current"),$(".pager_list li:nth-child("+(n-1)+")").addClass("current"),o=0},c)}o=1,n--}}var n=1,t=6,o=1,s=1,c=300;$(".wrap").touchwipe({wipeDown:function(){wipe_down()},wipeUp:function(){wipe_up()},wipeLeft:function(){e()},wipeRight:function(){i()},min_move_x:80,min_move_y:80,preventDefaultEvents:!0});setTimeout(function(){$(".con_wrap_1").addClass("cover_hide");setTimeout(function(){$(".con_wrap_1").removeClass("wrap_show"),$(".con_wrap_2").addClass("wrap_show").addClass("first_load").removeClass("wrap_prepare"),$(".pager_wrap").fadeIn(),n=2,o=0,navigator.splashscreen.hide()},300)},300)});var f={versions:function(){var e,i=window.navigator.userAgent;if(i.indexOf("Trident")>-1)return"IE";if(i.indexOf("Presto")>-1)return"Opera";if(i.indexOf("Gecko")>-1&&-1==i.indexOf("KHTML"))return"Firefox";if(i.indexOf("AppleWebKit"&&i.indexOf("Safari")>-1)>-1)return i.indexOf("Chrome")>-1?"Chrome":i.indexOf("OPR")?"Opera_webkit":"Safari";if(i.indexOf("Mobile")>-1)if(i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){if(i.indexOf("iPhone")>-1)return"iPhone";if(i.indexOf("iPod")>-1)return"iPod";if(i.indexOf("iPad")>-1)return"iPad"}else{if(i.indexOf("Android")>-1||i.indexOf("Linux")>-1)return e=i.substr(i.indexOf("Android")+8,3),{type:"Android",version:e};if(i.indexOf("BB10")>-1)return"BB10";if(i.indexOf("IEMobile"))return"Windows Phone"}}};"Android"==f.versions().type&&$(".wrap").addClass("android_hack"),e.beginUse=function(){var e=d.getData();return e&&"about"==e.fromPage?(d.setData(null),void d.backPage()):void i.path(o.getUserStatus()==a.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?"/home":"/")},e.$on("$destroy",function(){c.isiOSDevice()&&s.showStatusBar("true")})}]),app.factory("WelcomeServiceV2",["$location","commonPath",function(e,i){return $.extend({},i,{locationHash:"/welcome2"})}]);app.controller("ErrorController",["$scope","$location","$stateParams","utils","cgiService","essential","cache","GLOBAL_CONSTANT","$ionicHistory",function(r,e,t,i,a,c,s,o,n){r.func={};var l=e.search();e.search("");try{if(l.callStack){var v=[],u=n.viewHistory().views,w=n.viewHistory().currentView&&n.viewHistory().currentView.viewId;if(u&&w){var h=0;v.push(n.viewHistory().currentView.stateId);for(var S="";(S=u[w]&&u[w].backViewId)&&(v.push(u[S].stateId),w=S,!(h++>8)););}var g=l.callStack.replace(/[\n\r]/g,"|");i.reportWebCrash(g,v.join("|"))}r.errMsg=l.errMsg,r.errMsg||(r.errMsg="系统繁忙，请稍后重试")}catch(p){r.errMsg="系统繁忙，请稍后重试"}r.func.onClickBackHome=function(){e.path(s.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?"/home/"+!0:"/")}}]);app.controller("InitController",["$scope","$location","envService","$timeout","cache","localStorage","$ionicViewSwitcher","GLOBAL_CONSTANT","essential","HandPasswordService","cgiService","utils","$http","BaseConfigService","ability","HJactionLoading","JumpToModuleService","LoginService","AdBannerService","AppMaskService","CommonConfigService",function(e,t,i,n,a,o,r,s,c,d,u,T,l,g,f,h,_,S,A,p,I){e.data={},h5TimeRecord&&(h5TimeRecord.h5InitCtrlStart=(new Date).getTime());var m=function(){_.updateAppState(s.JUMP_APP_DEPENDS_STATE.APP_INIT,!1),navigator.splashscreen.show(),p.setAppMaskVisibility(!1),h.show(),v(),_.updateAppState(s.JUMP_APP_DEPENDS_STATE.APP_INIT,!0)},v=function(){var e=s.WELCOME_VERSION;e=1*e;var i=o.loadData("welcomePageKey");e>0&&(!i||e>1*i)?(h.hide(),r.nextTransition("none"),t.path("/welcome2")):E()},E=function(){O(),c.getVersion().then(function(e){tracelog("初始化设备信息成功 "+JSON.stringify(e));var t={};t.versionCode=e.versionCode,t.versionString=e.versionString,t.channelID=e.channelID,t.mid=e.mid,t.terminal_type=device.platform,t.os_ver=device.version,t.machine_info=device.model,p.setAppMaskVisibility(!1),DEBUG=e.isDebug,DEBUG&&(enableDebugLog=!0,c.enableDebugLog("true")),T.isiOSDevice()?(t.channelID="ios",t.versionCode<100334||100401==t.versionCode?c.getMuid().then(function(e){tracelog("获取Muid成功"),t.uuid=e},function(){tracelog("获取Muid失败"),t.uuid=""}).then(function(){a.setDeviceInfo(t),D()}):c.getIdfa().then(function(e){tracelog("获取Idfa成功"),t.uuid=e;var i={};i.idfa=e,Statistics.reportEvent("iOS-Idfa",i)},function(){tracelog("获取Idfa失败"),t.uuid=""}).then(function(){a.setDeviceInfo(t),D()})):(t.uuid=e.imei,a.setDeviceInfo(t),D())},function(){tracelog("初始化设备信息失败"),w("deviceInfo")})},D=function(){g.getConfig(),u.requestGrayInfoWithoutLogin({cycle:[{type:s.GRAY_BIZ_ID.FINANCIAL_HOME,itemId:""},{type:s.GRAY_BIZ_ID.INVESTMENT_GOLD,itemId:""}]}).then(function(e){e&&e.ret_data&&e.ret_data.whiteList&&o.saveData("gray-info-without-login",e.ret_data)},function(){}),P(),N(),U()},P=function(){L(),tracelog("尝试自动登录"),tracelog("[dte] checkLoginStatus-->exchangeWebankToken"),isTelePhoneLogin=!1;var e=!1;h5TimeRecord&&(h5TimeRecord.h5GetWbTkStart=(new Date).getTime()),c.exchangeWebankToken().then(function(t){return tracelog("[dte] checkLoginStatus-->exchangeWebankToken finish(success)"),tracelog("换取bank token成功，根据用户状态，转入默认或首页"),tracelog("用户开户状态："+ +t.status),h5TimeRecord&&(h5TimeRecord.h5GetWbTkEnd=(new Date).getTime()),4&parseInt(t.status)?(a.setUserStatus(s.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),c.getToken()):2&parseInt(t.status)?(a.setUserStatus(s.ACCOUNT_STATE.USER_STATE_LOGIN),e=!0,c.getToken()):(a.setUserStatus(s.ACCOUNT_STATE.USER_STATE_GUEST),c.reject())},function(){return h5TimeRecord&&(h5TimeRecord.h5GetWbTkFail=(new Date).getTime()),tracelog("[dte] checkLoginStatus-->exchangeWebankToken finish(fail)"),tracelog("直接换取bank token失败，需要使用微信和qq授权"),a.setUserStatus(s.ACCOUNT_STATE.USER_STATE_GUEST),c.reject()}).then(function(e){tracelog("获取用户资料成功"),a.setUserInfo(e),u.requestGrayInfo(s.GRAY_BIZ_ID.REG_BIND_CARD);var t={cycle:[]},i={type:s.GRAY_BIZ_ID.FINANCIAL_CALENDAR,itemId:""},n={type:s.GRAY_BIZ_ID.ASSET_MANAGE,itemId:""};return t.cycle.push(i),t.cycle.push(n),u.requestGrayInfoNew(t),h5TimeRecord&&(h5TimeRecord.h5GetHandPswdStart=(new Date).getTime()),k(t),u.requestHandPass()},function(){if(tracelog("获取用户资料失败"),void 0==a.getUserInfo()){var t={};t.username="",t.picurl="../img/tx@2x.png",t.platform="",t.openid="",t.token="",t.unionid="",a.setUserInfo(t)}return h.hide(),e?(h5TimeRecord&&(h5TimeRecord.h5GetHandPswdStart=(new Date).getTime()),u.requestHandPass()):c.reject()}).then(function(e){if(tracelog("获取手势密码成功 result："+e),e&&e.ret_data){var t={};t.ecif=e.ret_data.ecif_no,t.handpass=e.ret_data.gesture_password,t.handpass||(t.handpass=""),h5TimeRecord&&(h5TimeRecord.h5ShowHandPasswordEnd=(new Date).getTime()),d.startHandPassword(null,t),C()}else R()},function(){tracelog("登陆失败或获取Token失败或获取手势密码失败"),R()})},C=function(){h.hide(),n(function(){navigator.splashscreen.hide(),p.setAppMaskVisibility(!1)},350),a.getUserStatus()==s.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?(A.signal(),APP_ABILITY&&APP_ABILITY.indexOf(s.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0?t.path("/home"):S.getLoginBankData()):R()},R=function(){n(function(){navigator.splashscreen.hide(),p.setAppMaskVisibility(!1)},350),t.path("/default")},N=function(){APP_ABILITY&&APP_ABILITY.indexOf(s.APP_ABILITY.ABILITY_OPERATESPLASH)>=0&&u.requestOperateSplashConfig().then(function(e){var t=e.ret_data;if(t){var i={};i.id=t.id,i.startTime=t.startTime,i.endTime=t.endTime,i.severTime=t.serverTime,i.localTime=parseInt(T.getDate().getTime()/1e3).toString(),i.delayTime=t.delayTime,i.picUrl=t.picUrl,i.actionType=t.actionType,i.actionParam=t.actionParam,c.updateSplashConfig(JSON.stringify(i))}},function(){})},U=function(){I.updateConfig(null)},L=function(){if("true"==o.loadData("activeApp"))return void tracelog("已上报设备激活，本次不上报");var e=a.getDeviceInfo(),t={};t.module_id="promote",t.data_list={},t.data_list.channel="",T.isiOSDevice()?e.versionCode<100334||100401==e.versionCode?t.data_list.idfamd5=e.uuid:t.data_list.idfa=e.uuid:(t.data_list.imei=e.uuid,t.data_list.mid=e.mid),u.requestReportToTencent(t).then(function(){tracelog("上报设备激活成功"),o.saveData("activeApp","true")},function(){tracelog("上报设备激活失败")})},k=function(){var e={};e.module_id="login",e.obj_id="",e.data_list=[];var t={};t.has_reg=a.getUserStatus()==s.ACCOUNT_STATE.USER_STATE_LOGIN?"0":"1",e.data_list.push(t),tracelog("上报用户登录"),u.requestReportError(e)},O=function(){var e={};e.version=H5_Ver,Statistics.reportEvent("webVersion",e)},w=function(e){n(function(){T.goToErrorPage()},200);var t={};t.webTimeout=e,Statistics.reportEvent("timeout",t),navigator.splashscreen.hide()};m()}]);app.controller("HomeController",["$rootScope","$scope","$ionicModal","$filter","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","InsuranceProductDetailService","FinancialRecommendService","IncomeHistoryService","SalaryPlanService","HomeNoticeService","MortgatePlanService","PlanService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","TransOutScenePlanService","BindCardVerifyPromptService","StockProductDetailService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PlanServiceV2","PopupService","XGService","WePayService","ProdCommonActionService","VersionManagerService","AdBannerService","InsuranceMyProdDetailService","PromoCenterService","CommonClickFnService","HJactionPop","HJactionPwdInput","commonDirectiveService","InviteService",function(e,t,n,a,o,r,i,c,s,l,u,d,m,p,f,g,v,_,y,h,T,E,I,S,D,P,C,A,k,B,R,Y,L,F,N,w,O,M,x,b,H,W,G,U,J,j,V,q,X,K,Z,Q,z,et,tt,nt,at,ot,rt,it,ct){h5TimeRecord&&(h5TimeRecord.h5HomeCtrlStart=(new Date).getTime()),h5TimeRecord&&f.getCommonData("timeRecord").then(function(e){var t=angular.extend(e,h5TimeRecord);Statistics.reportEvent("detailTimeRecord",t),h5TimeRecord=null},function(e){});var st=t.func={},lt=t.data={};z.tryUpdateNativeVersion(),lt.yesterdayGJIncome=0,lt.yesterdayBXIncome=0,lt.yesterdayShortIncome=0,lt.hasQiLu=!1,lt.newBeeButtonStr="知道了",lt.maskClass="mask-oval";var ut=s.getIOSVersion();ut&&ut[0]<7&&(lt.maskClass="mask-oval mask-oval-ios6");var dt=!1,mt=!0,pt=0,ft=0,gt=0,vt=0,_t=!1,yt=function(){lt.showBigBanner=!1,lt.accumulatedMonetaryTotalIncome=0,lt.accumulatedInsuranceTotalIncome=0,lt.accumulatedStockTotalIncome=0,lt.shortPeroidMaskClass="p-mask-sp p-mask-sp-splus no-banner",dt=!1,mt=!0,pt=0,ft=0,gt=0,vt=0,_t=!1},ht=function(){t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft="稍后您可点击左上角头像—>微众卡—>人脸验证激活，完成激活",t.data.outValue.oneButtonText="知道了",t.data.outValue.popClose=function(){i.setCheckActive(!0)}};st.isShowSocialData=function(){return"0.00"===parseFloat(lt.totalAmount).toFixed(2)&&"0.00"===parseFloat(lt.yesterdayTotalIncome).toFixed(2)&&"0.00"===parseFloat(lt.accumulatedMonetaryTotalIncome+lt.accumulatedInsuranceTotalIncome+lt.accumulatedStockTotalIncome).toFixed(2)};var Tt=function(){function e(){it.verifyPassword({pwdSubTitle:"账户升级",callback:function(e){var t={};t.password=e,t.strong_acct_active_type="2",o.requestActiveAccount(t).then(function(){s.makeToast("升级成功","short")},function(e){s.makeToast(e.ret_msg,"short")})}})}return i.getCheckActive()?void X.next("AccountActive"):void(p.getCacheInfo("personalInfo")&&p.getCacheInfo("personalInfo").is_acct_class2_up_class1===!0?ot.show({oneLineTextLeft:"您的账户升级请求已受理, 请验证密码以完成账户升级",twoButtonText1:"取消",twoButtonText2:"验证密码",popClose:function(t){2==t&&e()}}):p.getCacheInfo("personalInfo")&&"2"==p.getCacheInfo("personalInfo").acct_type?h.isFaceIdValid(r.CHECK_FACE_SCENE_ID.ACTIVE_STRONG_ACCOUT)||(t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft="您在线下开的代发工资账户，需要通过人脸验证后才能使用",t.data.outValue.twoButtonText1="稍后再说",t.data.outValue.twoButtonText2="人脸验证",t.data.outValue.popClose=function(e){if(1==e)m(function(){ht()},100);else if(2==e){var n=p.getCacheInfo("personalInfo"),a=n&&n.ecif_no?n.ecif_no:"";h.startFaceVerify(r.CHECK_FACE_SCENE_ID.ACTIVE_STRONG_ACCOUT,a).then(function(e){m(function(){s.makeToast("人脸验证通过","short")},500);var n={};n.face_id=e.faceId,o.requestActiveAccount(n).then(function(){return tracelog("[dte] HomeController.accountActive-->requestActiveAccount-->exchangeWebankToken"),f.exchangeWebankToken()},function(e){return s.makeToast(e.ret_msg,"short"),f.reject()}).then(function(){return p.setUserStatus(r.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),g.getLoginBankData()},function(){return f.reject()}).then(function(){m(function(){lt.outValue={},lt.outValue.showPop=!0,lt.outValue.oneLineTextLeft="人脸验证成功，代发工资账户已可正常使用。",lt.outValue.oneButtonText="知道了",t.data.outValue.popClose=function(){}},500)})})}}):X.next("AccountActive"))},Et=function(){if(p.getCacheInfo("HomeStockTotalIncome")){var e=p.getCacheInfo("HomeStockTotalIncome");return e.length>=1&&(lt.accumulatedStockTotalIncome=parseFloat(e[0].totalEarnings)),void o.requestStockTotalIncome().then(function(e){p.setCacheInfo("HomeStockTotalIncome",e.ret_data)})}o.requestStockTotalIncome().then(function(e){tracelog("查询股基累积收益成功"),e.ret_data&&e.ret_data.length>=1&&(lt.accumulatedStockTotalIncome=parseFloat(e.ret_data[0].totalEarnings),p.setCacheInfo("HomeStockTotalIncome",e.ret_data))},function(){tracelog("查询股基累积收益失败")})},It=function(){if(p.getCacheInfo("tPlusOneTotalIncome")){var e=p.getCacheInfo("tPlusOneTotalIncome");return e.length>=1&&(lt.accumulatedTPlusOneTotalIncome=parseFloat(e[0].totalEarnings)),void o.requestTPlusOneTotalIncome().then(function(e){p.setCacheInfo("tPlusOneTotalIncome",e.ret_data)})}o.requestTPlusOneTotalIncome().then(function(e){tracelog("查询保险累积收益成功"),e.ret_data&&(e.ret_data.length>=1&&(lt.accumulatedTPlusOneTotalIncome=parseFloat(e.ret_data[0].totalEarnings)),p.setCacheInfo("tPlusOneTotalIncome",e.ret_data))},function(){tracelog("查询保险累积收益失败")})},St=function(){if(p.getCacheInfo("HomeInsuranceTotalIncome")){var e=p.getCacheInfo("HomeInsuranceTotalIncome");return e.length>=1&&(lt.accumulatedInsuranceTotalIncome=parseFloat(e[0].totalEarnings)),void o.requestInsuranceTotalIncome().then(function(e){p.setCacheInfo("HomeInsuranceTotalIncome",e.ret_data)})}o.requestInsuranceTotalIncome().then(function(e){tracelog("查询保险累积收益成功"),e.ret_data&&(e.ret_data.length>=1&&(lt.accumulatedInsuranceTotalIncome=parseFloat(e.ret_data[0].totalEarnings)),p.setCacheInfo("HomeInsuranceTotalIncome",e.ret_data))},function(){tracelog("查询保险累积收益失败")})},Dt=function(){Et(),St(),It()},Pt=function(){if(p.getCacheInfo("IncomeHistory")){var e=p.getCacheInfo("IncomeHistory"),t=s.getDate();t.setDate(t.getDate()-1);var n=s.getYYYYMMDDStringByDate(t);if(e[n])for(var a in e[n]){var i=e[n][a];i.prod_type==r.PROD_TYPE.GJ?(lt.yesterdayGJIncome+=parseFloat(i.income),lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome)+parseFloat(i.income)):i.prod_type==r.PROD_TYPE.BX?(lt.yesterdayBXIncome=parseFloat(lt.yesterdayBXIncome)+parseFloat(i.income),lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome)+parseFloat(i.income)):i.prod_type==r.PROD_TYPE.TPLUSONE&&(lt.yesterdayShortIncome=parseFloat(lt.yesterdayShortIncome)+parseFloat(i.income),lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome)+parseFloat(i.income))}lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome).toFixed(2),lt.yesterdayBXIncome=parseFloat(lt.yesterdayBXIncome).toFixed(2),parseFloat(lt.yesterdayBXIncome)>=0&&(lt.yesterdayBXIncome="+"+lt.yesterdayBXIncome),lt.yesterdayGJIncome=parseFloat(lt.yesterdayGJIncome).toFixed(2),parseFloat(lt.yesterdayGJIncome)>=0&&(lt.yesterdayGJIncome="+"+lt.yesterdayGJIncome),lt.yesterdayShortIncome=parseFloat(lt.yesterdayShortIncome).toFixed(2),parseFloat(lt.yesterdayShortIncome)>=0&&(lt.yesterdayShortIncome="+"+lt.yesterdayShortIncome);var c=s.getDate(),l=s.getYYYYMMDDStringByDate(c),u=s.getDate();u.setDate(u.getDate()-2);var d=s.getYYYYMMDDStringByDate(u);return void o.requestIncomeHistory(d,l).then(function(){})}var c=s.getDate(),l=s.getYYYYMMDDStringByDate(c),u=s.getDate();u.setDate(u.getDate()-2);var d=s.getYYYYMMDDStringByDate(u);o.requestIncomeHistory(d,l).then(function(e){if(e.ret_data){var t=s.getDate();t.setDate(t.getDate()-1);var n=s.getYYYYMMDDStringByDate(t);if(e.ret_data[n])for(var a in e.ret_data[n]){var o=e.ret_data[n][a];o.prod_type==r.PROD_TYPE.GJ?(lt.yesterdayGJIncome+=parseFloat(o.income),lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome)+parseFloat(o.income)):o.prod_type==r.PROD_TYPE.BX&&(lt.yesterdayBXIncome=parseFloat(lt.yesterdayBXIncome)+parseFloat(o.income),lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome)+parseFloat(o.income))}lt.yesterdayTotalIncome=parseFloat(lt.yesterdayTotalIncome).toFixed(2),lt.yesterdayBXIncome=parseFloat(lt.yesterdayBXIncome).toFixed(2),parseFloat(lt.yesterdayBXIncome)>=0&&(lt.yesterdayBXIncome="+"+lt.yesterdayBXIncome),lt.yesterdayGJIncome=parseFloat(lt.yesterdayGJIncome).toFixed(2),parseFloat(lt.yesterdayGJIncome)>=0&&(lt.yesterdayGJIncome="+"+lt.yesterdayGJIncome)}},function(){})};lt.RECOM_PROD_TYPE={CURRENT_PLUS:0,TIME_DEPOSIT:1,STOCK:2,SHORT_PEROID:3,GOLD:5},lt.financialRecomData={};var Ct=function(e){if(e){if(e.productType==lt.RECOM_PROD_TYPE.TIME_DEPOSIT&&e.productList&&e.productList[0]&&e.productList[0].productCode){var t=W.getProdInfo(e.productList[0].productCode);t&&"QL21"==t.on_sale_code&&(e.productType=lt.RECOM_PROD_TYPE.SHORT_PEROID)}if(e.productType==lt.RECOM_PROD_TYPE.CURRENT_PLUS){if(lt.hasHJ)return}else if(e.productType==lt.RECOM_PROD_TYPE.TIME_DEPOSIT){if(lt.hasBX)return}else if(e.productType==lt.RECOM_PROD_TYPE.STOCK){if(lt.hasGJ)return}else e.productType==lt.RECOM_PROD_TYPE.SHORT_PEROID&&lt.hasShort;var n=e.productList;if(n&&!(n.length<=0)){var a=n[0],o={};if(o.isIncomeRateShown=1==a.showEarningRate,o.text1=a.productDesc,o.text2="",o.prodCode=a.productCode,o.isIncomeRateShown){o.incomeRate=parseFloat(a.earningsRate).toFixed(2);var r=a.productDesc.split("$RATE$");r&&r.length>=2&&(o.text1=r[0],o.text2=r[1])}lt.financialRecomData[e.productType]=o}}},At=function(e){if(lt.financialRecomData={},e)for(var t in e)Ct(e[t])},kt=function(){var e=p.getCacheInfo("homeFinancial");e?(At(e.productTypeList),o.requestHomeFinancialConfig()):o.requestHomeFinancialConfig().then(function(e){At(e.ret_data.productTypeList)})},Bt=function(t){lt.yesterdayGJIncome=0,lt.yesterdayBXIncome=0,lt.yesterdayShortIncome=0;var n=c.parseRawWealthData_V3(t);lt.totalAmount=parseFloat(n.totalAmount).toFixed(2),lt.totalProductAmount=parseFloat(n.totalProductAmount).toFixed(2),lt.amountFontSize=parseFloat(lt.totalAmount)>=1e8?"font-size:36px;":"font-size:40px;",lt.yesterdayTotalIncome=parseFloat(n.yesterdayTotalIncome).toFixed(2),lt.accumulatedMonetaryTotalIncome=parseFloat(n.accumulatedTotalIncome);var a=parseFloat(n.BankAmount);lt.showBanner=a>100,lt.weBankCardAmount=a.toFixed(2),lt.showWeBankCard=a>0,a=parseFloat(n.HJAmount),lt.hasHJ=a>0,lt.HJAmount=parseFloat(a).toFixed(2),a=parseFloat(n.yesterdayHJIncome),lt.yesterdayHJIncome=a.toFixed(2),a>=0&&(lt.yesterdayHJIncome="+"+lt.yesterdayHJIncome),a=parseFloat(n.ShortAmount),lt.hasShort=a>0,lt.ShortAmount=parseFloat(a).toFixed(2),a=parseFloat(n.yesterdayShortIncome),lt.yesterdayShortIncome=(parseFloat(lt.yesterdayShortIncome)+parseFloat(a)).toFixed(2),a>=0&&(lt.yesterdayShortIncome="+"+lt.yesterdayShortIncome),a=parseFloat(n.BXAmount),lt.hasBX=a>0,lt.BXAmount=parseFloat(a).toFixed(2),a=parseFloat(n.yesterdayBXIncome),lt.yesterdayBXIncome=(parseFloat(lt.yesterdayBXIncome)+parseFloat(a)).toFixed(2),a>=0&&(lt.yesterdayBXIncome="+"+lt.yesterdayBXIncome),a=parseFloat(n.GJAmount),lt.hasGJ=a>0,lt.GJAmount=parseFloat(a).toFixed(2),a=parseFloat(n.yesterdayGJIncome),lt.GoldAmount=parseFloat(n.GoldAmount).toFixed(2),lt.GoldAmountWeight=parseFloat(n.GoldAmountWeight),lt.yesterdayGoldIncome=parseFloat(n.yesterdayGoldIncome),lt.yesterdayGoldIncomeWeight=parseFloat(n.yesterdayGoldIncomeWeight);var o=c.getMyGoldCurrentProduct(t);lt.hasGold=o.noAccount?!1:!0,pt=Math.ceil(parseFloat(n.BankAmount)/parseFloat(lt.totalAmount)*100),isNaN(pt)&&(pt=0),ft=Math.ceil(parseFloat(n.HJAmount)/parseFloat(lt.totalAmount)*100),isNaN(ft)&&(ft=0),gt=Math.ceil(parseFloat(n.BXAmount)/parseFloat(lt.totalAmount)*100),isNaN(gt)&&(gt=0),vt=0==parseFloat(n.GJAmount)?0:100-ft-gt-pt,Dt(),Pt(),m(function(){if(t&&t.finance_wealth&&t.finance_wealth.fund_cycle)for(var e in t.finance_wealth.fund_cycle){var n=W.getProdInfo(t.finance_wealth.fund_cycle[e].prod_code);if(n){if(n&&"QL21"==n.on_sale_code){var a=w.loadDataByUser("newBeeGuideFlag1");1!=a&&(lt.hasQiLu=!0,lt.newBeeButtonStr="下一条")}}else;}}),e.$emit("POPUP_DATA_LOADED","AccountActive"),kt()},Rt=function(e){e&&(lt.avatarUrl=e.picurl||"../img/tx@2x.png")},Yt=function(){var e=p.getCacheInfo("wealthNew");lt.showLoading=!1,Bt(e),Rt(p.getUserInfo()),T.startHandPassword(null),V.requestConfig()},Lt=function(){m(function(){s.goToErrorPage(STRING_TABLE.NETWORK_ERROR,r.APP_ERROR_CODE.ERROR_WEALTH_ALL)},2e3);var e={};e.webTimeout="home",Statistics.reportEvent("timeout",e)},Ft=function(){lt.showLoading=!1,dt=!1,mt&&m(function(){navigator.splashscreen.hide()},1e3),mt=!1,cn()},Nt=function(e){dt||(lt.showLoading=void 0==e?!0:e,dt=!0,g.getLoginBankData().then(Yt,Lt).then(Ft))},wt=function(){lt.showMsgDot=lt.hasNewNormalMessage||nt.getRedPoint()||Z.getRedFlag()||ct.getRedPoint()},Ot=function(){y.getRedPoint().then(function(e){lt.hasNewNormalMessage=e?!0:!1,wt()})},Mt=function(){y.getTypeMessageList("notice,home_banner","earning,red,payment").then(function(t){if(t&&t.notice&&t.notice.length>0){var n=t.notice[0];R.goPage(null,null,n)}if(t&&t.earning&&t.earning.length>0){var n=t.earning[0];n.extraObj&&(lt.arrivalData=n)}if(e.$emit("POPUP_DATA_LOADED","IncomeArrival"),t&&t.home_banner&&t.home_banner.length>0?tn(t.home_banner):(en=null,e.$emit("POPUP_DATA_LOADED","HomeBigBanner")),t&&t.payment&&t.payment.length>0){var n=t.payment[0];n.extraObj&&(lt.wePayPopData=n)}else lt.wePayPopData=null;if(e.$emit("POPUP_DATA_LOADED","WePay"),t&&t.red&&t.red.length>0){var n=t.red[0];n.extraObj&&n.extraObj.usage&&"wepay"==n.extraObj.usage?(Z.setSettingTipFlag("true"),Z.setRedFlag(!0)):n.extraObj&&"fuli"===n.extraObj.usage?nt.setRedPoint():n.extraObj&&"invite"===n.extraObj.usage&&ct.setRedPoint(),wt()}},function(){lt.arrivalData=null,e.$emit("POPUP_DATA_LOADED","IncomeArrival"),en=null,e.$emit("POPUP_DATA_LOADED","HomeBigBanner"),lt.wePayPopData=null,e.$emit("POPUP_DATA_LOADED","WePay")})},xt=function(){};lt.timeLinePassAwayItem=[],lt.timeLineTodayItem=null,lt.timelineFuture=[];var bt,Ht=function(e){lt.timeLinePassAwayItem=[],lt.timeLineTodayItem=null,lt.timelineFuture=[];var t=s.getDate(),n=s.getYYYYMMDDStringByDate(t);if(e){var a=[],o=[];for(var r in e){var i=e[r];i.trans_serno&&""!=i.trans_serno?o.push(i):a.push(i)}var c=function(e,t){return e.trans_date!=t.trans_date?parseFloat(e.trans_date)-parseFloat(t.trans_date):parseFloat(e.trans_time)-parseFloat(t.trans_time)};if(a.sort(c),o.sort(c),a.length>0){var l=a[0];l.trans_date==n&&(lt.timeLineTodayItem=l,a.splice(0,1))}if(o.length>0&&!lt.timeLineTodayItem){var u=o[o.length-1];u.trans_date==n&&(lt.timeLineTodayItem=u,o.splice(o.length-1,1))}a.length>2&&(_t=!0,a.splice(2,a.length-2)),o.length>2&&o.splice(0,o.length-2),lt.timeLinePassAwayItem=o,lt.timelineFuture=a}},Wt=function(e){Ht(e.ret_data.product_list)},Gt=function(){var e=p.getCacheInfo("timeline");e?Ht(e.product_list):o.requestTimeline().then(Wt,xt)},Ut=function(e,t){var n=null;for(var a in e)if(e[a].id==t){n=e[a];break}if(null!=n)if(n.categry==r.PLAN_CATAGRY.SALARY)B.goPage("",n);else if(n.categry==r.PLAN_CATAGRY.MORTGAGE)Y.goPage("",n);else if(n.categry==r.PLAN_CATAGRY.RESPECT_PARENT||n.categry==r.PLAN_CATAGRY.PAY_RENT){var o={scene:n.categry,planInfo:n};x.goPage("",o)}else c.isUserStrongAccount()?q.goPage("",n):L.goPage("",n)},Jt=function(){var e=w.loadDataByUser("newBeeGuideFlag"),t=w.loadDataByUser("newBeeGuideFlag1");1!=e?(lt.isNewBeeGuideShown=!0,f.dimStatusBarBackground(!0)):1!=t?m(function(){lt.hasQiLu?(lt.isNewBeeShortPeroid=!0,f.dimStatusBarBackground(!0)):X.next("NewBee")},100):X.next("NewBee")},jt=function(){m(function(){t.initRedpacket&&t.initRedpacket()},100)},Vt=function(){var e=p.getCacheInfo("personalInfo"),t=p.getDeviceInfo();if(e&&e.ecif_no&&t&&t.uuid){var n={};n.ecif=G(G(e.ecif_no)),n.XGDeviceID=t.uuid,Statistics.reportEvent("userInfo",n);var a=p.getUserInfo();if(a){var r={};r.refreshToken=s.getRSAStringForReport(a.refreshtoken),o.requestReportRelationship(r)}}},$t=null,qt=function(n){bt=e.$on(r.GLOBAL_EVENT.EXCHANGE_TOKEN_SUCCESS_AFTER_RESUME,function(){Ot(),e.$emit("POPUP_DATA_LOADED","AccountActive"),X.loadNotice(),Mt(),t.initRedpacket&&t.initRedpacket(),X.start()});var a=l.search();l.search("");var o=null;if(a&&(o=a.refresh),z.tryUpdateNativeVersion(),yt(),J.updateAppState(r.JUMP_APP_DEPENDS_STATE.HOME_DATA,!1),N.backView()&&"error"==N.backView().stateName&&p.getCacheInfo("personalInfo")&&T.startHandPassword(null),lt.isShowNewCalenDarModel=!0,lt.ShowPlatFormClass="ios",s.isInGrayList(6,"")||(lt.isShowNewCalenDarModel=!1),ionic.Platform.isAndroid()&&(lt.ShowPlatFormClass="android"),lt.isShowNewCalenDarModel){lt.today=new Date;var i,c,u,d;i=lt.today.getMonth()-6,c=lt.today.getFullYear(),0>i&&(i=12+i,c--),u=new Date(c,i,1),i=lt.today.getMonth()+7,c=lt.today.getFullYear(),i>11&&(i-=12,c++),d=new Date(c,i,0),lt.nextSeventthDateStr=s.getYYYYMMDDStringByDate(new Date(lt.today.getTime()+5184e5)),lt.maxDateStr=s.getYYYYMMDDStringByDate(d),lt.hasNoneEventSceneEvent=null,lt.hasNextSeventDaysEvent=null,lt.isNeedShowHomeCalendarRedHot=!1,lt.todayStr=s.getYYYYMMDDStringByDate(lt.today),lt.todayWeekDesc=r.WEEKEY_LG_ZW_DESC[lt.today.getDay()],lt.productIncomedList={};var g=p.getCacheInfo("monthsCalendarData"),v=p.getCacheInfo("wealthNew");v&&g&&!s.isEmptyObject(g)&&g.calendarEventList&&g.calendarEventList.length>0&&hn(g),yn(u,d)}if(void 0==p.getCacheInfo("wealthNew")||void 0==p.getCacheInfo("personalInfo"))Nt();else{var v=p.getCacheInfo("wealthNew");Bt(v),Rt(p.getUserInfo()),(o||!n)&&Nt(!1),navigator.splashscreen.hide()}t.showInvestment=f.isFinancialHomeGray(),t.data.notice={show:!1},t.func.notice={view:function(){t.data.notice.show=!1,f.dimStatusBarBackground(!1),w.saveDataByUser("notice-"+gNoticeInfo["notice-id"],1),M.go("/messageNotice")},hide:function(){t.data.notice.show=!1,f.dimStatusBarBackground(!1),w.saveDataByUser("notice-"+gNoticeInfo["notice-id"],1)}},m(X.loadNotice,100),Xt(),lt.arrivalData=null,lt.showArrival=!1,Mt(),dn(),nn(),et.sync().then(function(e){e&&nn()},function(){nn()}),jt(),Gt(),Kt(),Vt(),j.check(),K.updateAccountStatus(),lt.wePay_isAgreed=!1,lt.wePay_agreementName=["消费支付服务协议"],vn(),lt.isGoldGray=f.isGoldGray(),lt.stockTabClass=lt.isGoldGray?"fund flex px-b":"fund flex px"},Xt=function(){W.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){f.reject()}).then(function(){var e=W.getProdInfo("001234");e&&(lt.HJIncomeRate=parseFloat(e.income_rate).toFixed(3))})},Kt=function(){t.showInvestment?o.requestFinancialRecommendInfoWebV2().then(function(e){tracelog("查询理财推荐信息成功web"),w.saveData("financialRecommendV2",e);var t=[];if(e&&e.ret_data&&e.ret_data.productTypeList)for(var n in e.ret_data.productTypeList)if(0==e.ret_data.productTypeList[n].productType)for(var a in e.ret_data.productTypeList[n].productList)t.push(e.ret_data.productTypeList[n].productList[a].productCode);else if(1==e.ret_data.productTypeList[n].productType||3==e.ret_data.productTypeList[n].productType)for(var a in e.ret_data.productTypeList[n].productList)t.push(e.ret_data.productTypeList[n].productList[a].productSubCode);else if(2==e.ret_data.productTypeList[n].productType)for(var a in e.ret_data.productTypeList[n].productList)t.push(e.ret_data.productTypeList[n].productList[a].productCode);W.requestProdInfo(t).then(function(){tracelog("按产品拉取产品信息成功"),J.updateAppState(r.JUMP_APP_DEPENDS_STATE.HOME_DATA,!0)},function(){tracelog("按产品拉取产品信息失败")})},function(){tracelog("查询理财推荐信息失败web")}):o.requestFinancialRecommendInfoWeb().then(function(e){tracelog("查询理财推荐信息成功web"),w.saveData("financialRecommend",e);var t=[];if(e&&e.ret_data&&e.ret_data.productTypeList)for(var n in e.ret_data.productTypeList)if(0==e.ret_data.productTypeList[n].productType)for(var a in e.ret_data.productTypeList[n].productList)t.push(e.ret_data.productTypeList[n].productList[a].productCode);else if(1==e.ret_data.productTypeList[n].productType||3==e.ret_data.productTypeList[n].productType)for(var a in e.ret_data.productTypeList[n].productList)t.push(e.ret_data.productTypeList[n].productList[a].productSubCode);else if(2==e.ret_data.productTypeList[n].productType)for(var a in e.ret_data.productTypeList[n].productList)t.push(e.ret_data.productTypeList[n].productList[a].productCode);W.requestProdInfo(t).then(function(){tracelog("按产品拉取产品信息成功"),J.updateAppState(r.JUMP_APP_DEPENDS_STATE.HOME_DATA,!0)},function(){tracelog("按产品拉取产品信息失败")})},function(){tracelog("查询理财推荐信息失败web")})},Zt=function(){if(null==lt.midBannerConfig)return void(t.data.sectionHtml="");var e=w.loadData("homeBannerHtml");e&&""!=e.toString().trim()&&(lt.shortPeroidMaskClass="p-mask-sp p-mask-sp-splus"),t.data.sectionHtml=O.trustAsHtml(e),u.get(O.trustAsResourceUrl(lt.midBannerConfig.url)).success(function(e){w.saveData("homeBannerHtml",e),e&&""!=e.toString().trim()&&(lt.shortPeroidMaskClass="p-mask-sp p-mask-sp-splus"),t.data.sectionHtml=O.trustAsHtml(e)})},Qt=function(e){lt.midBannerConfig=e,p.setCacheInfo("homeMiddleBanner",e),Zt()},zt=function(){if(!gAdvConfigNew||!gAdvConfigNew.adv_id_1||!gAdvConfigNew.adv_id_1.length)return void Qt(null);var e=gAdvConfigNew.adv_id_1;if(e[0].condition){lt.midBannerConfig=p.getCacheInfo("homeMiddleBanner"),Zt();for(var t=[],n=[],a=0,r=e.length;r>a;a++){var i=e[a];i.condition?t.push({id:a,condition:i.condition}):n.push(a)}o.requestCheckADCondition({query_limit_list:t}).then(function(t){for(var a=-1,o=t.ret_data.result_list,r=0,i=o.length;i>r;r++)if("true"===o[r].result){a=parseInt(o[r].id,10);break}if(n.length){var c;c=-1===a?n[0]:n[0]<a?n[0]:a,Qt(e[c]),et.signalToIndex("adv_id_1",c)}else-1===a?Qt(null):(Qt(e[a]),et.signalToIndex("adv_id_1",a))},function(){Qt(null)})}else Qt(e[0])},en=null,tn=function(n){try{var a=[];for(var o in n){var r=n[o];if("home_banner"==r.msgType){var i={};i.content=JSON.parse(r.content),i.msgID=r.msgid,parseInt(r.server_time,10)>parseInt(i.content.starttime,10)&&parseInt(r.server_time,10)<parseInt(i.content.endtime,10)&&"u"==r.status.toLowerCase()&&a.push(i)}}if(a.sort(function(e,t){return e.msgID<t.msgID}),a.length>0&&(en=a[0]),null==en)return void e.$emit("POPUP_DATA_LOADED","HomeBigBanner");var c=d.getEnvVariable().DATA_CGI_PREFIX+en.content.banner_url;u.get(O.trustAsResourceUrl(c)).success(function(n){t.data.bigBannerHtml=O.trustAsHtml(n),e.$emit("POPUP_DATA_LOADED","HomeBigBanner")})}catch(s){tracelog("[home] parse big home banner failed"),en=null,e.$emit("POPUP_DATA_LOADED","HomeBigBanner")}},nn=function(){zt()};lt.showMsgDot=!1,st.isTimelineShown=function(){return lt.timelineFuture.length>0||lt.timeLineTodayItem&&!lt.timeLineTodayItem.trans_serno},st.onClickCloseNewBeeGuide=function(){lt.isNewBeeGuideShown=!1,f.dimStatusBarBackground(!1),w.saveDataByUser("newBeeGuideFlag",1),lt.hasQiLu&&(lt.isNewBeeShortPeroid=!0,f.dimStatusBarBackground(!0))},st.onClickNewBeeShortPeroid=function(){f.dimStatusBarBackground(!1),lt.isNewBeeShortPeroid=!1,w.saveDataByUser("newBeeGuideFlag1",1)},st.onClickTimelineItem=function(e){W.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=W.getProdInfo("001234");if(!t)return void s.makeToast("产品信息拉取中，请稍后重试","short");var n=e.financejob_id,a=p.getCacheInfo("planList");return a?void Ut(a,n):(lt.showLoading=!0,void o.requestTransPlans().then(function(e){lt.showLoading=!1,Ut(e.ret_data,n)}).then(function(){lt.showLoading=!1}))})},st.getTimelineTodayItemStyle=function(){return lt.timeLineTodayItem&&lt.timeLineTodayItem.trans_serno&&""!=lt.timeLineTodayItem.trans_serno?"item past":"item"},st.getTimeTodayLiItemClass=function(){return lt.timeLineTodayItem&&lt.timeLineTodayItem.trans_serno&&""!=lt.timeLineTodayItem.trans_serno?"past flex":"present flex"},st.getTimelineTodayItemContinueLineStyle=function(){return lt.timeLineTodayItem&&lt.timeLineTodayItem.trans_serno&&""!=lt.timeLineTodayItem.trans_serno?"past line px-a":"future line px-a"},st.hasMorePlanInTimeLine=function(e){var t=lt.timelineFuture.indexOf(e);return lt.timelineFuture.length!=t+1||_t?!0:!1},st.onClickSettingsBtn=function(){P.nextDirection("back"),s.clickButtonReport("index_cebianlan"),y.clickRedPoint(),l.path("/accountSettings/home")},st.onClickTransLog=function(){s.clickButtonReport("index_chaxun"),E.goPage("","","all")},st.onClickMyIncomes=function(){s.clickButtonReport("index_shouyi"),k.goPage()},st.onClickMainTab=function(e){at.mainTabClickFun(e,1)},st.onClickCalendarMore=function(){l.path("/financialCalendar/")},st.onClickHomeMiddleBanner=function(){if(null!=lt.midBannerConfig){var e=lt.midBannerConfig.action;e.action_type==sn.APP_JUMP?e.prod_code?W.requestProdInfo([e.prod_code]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=W.getProdInfo(e.prod_code);return t?void(e.jump_to_common_page?M.go(e.action_param):Q.goToProd(e.prod_code)):void s.makeToast("产品信息拉取中，请稍后重试","short")}):M.go(e.action_param):e.action_type==sn.BROWSER_JUMP&&f.openInAppBrowser(e.action_param);var t={};t.clickADBanner="home",t.id=lt.midBannerConfig.id,Statistics.reportEvent("clickADBanner",t);var n={};n.module_id="click_ad_banner",n.data_list=[];var a={};a.id=lt.midBannerConfig.id,a.typeName="homeBanner",n.data_list.push(a),o.requestReportToTencentGet(n)}},st.onClickWeBankCard=function(){S.goPage()},st.onClickViewMyHJProducts=function(){s.clickButtonReport("index_huoqi"),W.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var e=W.getProdInfo("001234");return e?void M.go("/monetaryMyProdDetail/001234"):void s.makeToast("产品信息拉取中，请稍后重试","short")})},st.onClickCancelMask=function(){lt.isMaskShown=!1,f.setInfoMaskStatusBackground(!1)},st.onClickAssetExplanation=function(){lt.maskTitle=STRING_TABLE.TOTAL_ASSET,lt.maskDetail=O.trustAsHtml(STRING_TABLE.ASSET_EXPLANATION),lt.isMaskShown=!0,f.setInfoMaskStatusBackground(!0)},st.onClickRecomStock=function(){s.clickButtonReport("finance_"+e);var e=null;return lt.financialRecomData[lt.RECOM_PROD_TYPE.STOCK]&&(e=lt.financialRecomData[lt.RECOM_PROD_TYPE.STOCK].prodCode),e?void W.requestProdInfo([e]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=W.getProdInfo(e);return t?void H.goPage(e):void s.makeToast("产品信息拉取中，请稍后重试","short")}):void M.go(t.showInvestment?"investmentStock":"financialRecommendGJMore")},st.onClickViewMyInsurance=function(){s.clickButtonReport("index_dingqi"),M.go("/myFinancialInsurance")},st.onClickPurchaseInsurance=function(){s.clickButtonReport("index_dingqi_purchase"),M.go(t.showInvestment?"financialHome":"financialRecommendDQMore")},st.onClickRecomInsurance=function(){s.clickButtonReport("finance_"+e);var e=null;return lt.financialRecomData[lt.RECOM_PROD_TYPE.TIME_DEPOSIT]&&(e=lt.financialRecomData[lt.RECOM_PROD_TYPE.TIME_DEPOSIT].prodCode),e?void W.requestProdInfo([e]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=W.getProdInfo(e);return t?void Q.goToFixTimeOrShortTemplate(t):void s.makeToast("产品信息拉取中，请稍后重试","short")}):void M.go(t.showInvestment?"financialHome":"financialRecommendDQMore")},st.onClickViewMyShortPeroid=function(){s.clickButtonReport("index_short_peroid"),M.go("/myFinancialShortPeroid")},st.onClickPurchaseShortPeroid=function(){s.clickButtonReport("index_short_peroid_purchase"),M.go(t.showInvestment?"financialHome":"financialRecommendShortMore")},st.onClickRecomShortPeroid=function(){s.clickButtonReport("short_peroid_"+e);var e=null;return lt.financialRecomData[lt.RECOM_PROD_TYPE.SHORT_PEROID]&&(e=lt.financialRecomData[lt.RECOM_PROD_TYPE.SHORT_PEROID].prodCode),e?void W.requestProdInfo([e]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=W.getProdInfo(e);return t?void Q.goToFixTimeOrShortTemplate(t):void s.makeToast("产品信息拉取中，请稍后重试","short")}):void M.go(t.showInvestment?"financialHome":"financialRecommendShortMore")},st.onClickViewMyStockProducts=function(){s.clickButtonReport("index_guji"),M.go("/myFinancialStock")},st.onClickPurchaseStockProducts=function(){s.clickButtonReport("index_guji_purchase"),M.go(t.showInvestment?"investmentStock":"financialRecommendGJMore")},st.onClickSalaryPlan=function(){s.clickButtonReport("zhuanzhang_gongzi"),W.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var e=W.getProdInfo("001234");return e?void B.goPage():void s.makeToast("产品信息拉取中，请稍后重试","short")})};var an=!1;st.back=function(){an?f.exitAndroidApp():(an=!0,s.makeToast("再按一次退出微众银行","short","bottom"),m(function(){an=!1},2500))};var on=s.getPullingDateString(p.getCacheTime("home"));t.refreshText="下拉即可刷新"+on;var rn=null;st.refreshData=function(){m(function(){t.$apply(function(){t.refreshingText1="正在刷新"+on})}),Nt(!1),rn=m(function(){t.$broadcast("scroll.refreshComplete"),rn=null},1e4)};var cn=function(){var e=s.getDate().getTime();p.setCacheTime("home",e),on=s.getPullingDateString(e),rn&&(m.cancel(rn),rn=null),t.$broadcast("scroll.refreshComplete"),t.refreshText="下拉即可刷新"+on;var n=p.getCacheInfo("monthsCalendarData");n&&!s.isEmptyObject(n)&&n.calendarEventList&&n.calendarEventList.length>0&&hn(n)};st.pullingData=function(){m(function(){t.$apply(function(){t.refreshText="松手即可刷新"+on,t.refreshingText1="正在刷新"+on})})},st.endPullingData=function(){m(function(){t.$apply(function(){t.refreshText="下拉即可刷新"+on})})};var sn={CLOSE:-1,APP_JUMP:0,BROWSER_JUMP:1};st.onClickBigBanner=function(e){if(lt.showBigBanner=!1,o.clearMessageByType("home_banner"),en&&en.content){var t=null;for(var n in en.content.action){var a=en.content.action[n];if(a.action_id==e){t=a;break}}if(null!=t)if(t.action_type==sn.APP_JUMP){s.clickButtonReport("big_banner_app_jump");var r=t.prod_code;r?W.requestProdInfo(r).then(function(){f.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var e=W.getProdInfo(r);e&&(t.jump_to_common_page?M.go(t.action_param):Q.goToProd(r))}):M.go(t.action_param)}else t.action_type==sn.BROWSER_JUMP?(s.clickButtonReport("big_banner_browser_jump"),f.openInAppBrowser(t.action_param)):t.action_type===sn.CLOSE&&s.clickButtonReport("big_banner_close")}},st.onClickArrivalDetail=function(e){y.reportReadMessage(e.msgid),lt.showArrival=!1,lt.arrivalData=null,M.go("/incomeArrival",null,e)},st.onClickCloseArrival=function(e){y.reportReadMessage(e.msgid),lt.showArrival=!1,lt.arrivalData=null,X.stop(),qt(!0)};var ln=function(){X.stop()},un=function(){bt(),X.stop(),document.removeEventListener("pause",ln),$t&&v.cancel($t),$t=null,rn&&(m.cancel(rn),rn=null)},dn=function(){Ot(),X.start(),document.addEventListener("pause",ln,!1)};t.onHJViewActive=function(){qt(!0),s.resetHistory(!0)},t.onHJViewDisActive=function(){un()};var mn=function(){if(gNoticeInfo&&gNoticeInfo["notice-id"]&&gNoticeInfo["notice-popup-bank"]&&1!==w.loadDataByUser("notice-"+gNoticeInfo["notice-id"])){t.data.notice.head=gNoticeInfo["notice-head"],t.data.notice.title=gNoticeInfo["notice-title"],t.data.notice.date=gNoticeInfo["notice-date"],t.data.notice.nickName=gNoticeInfo["notice-nickname"],t.data.notice.desc=gNoticeInfo["notice-desc"];var e=gNoticeInfo["notice-popup-bank"];if("all"===e.toLowerCase())t.data.notice.show=!0,f.dimStatusBarBackground(!0);else{var n=p.getCacheInfo("personalInfo");if(n&&n.bind_cards_list&&n.bind_cards_list.length){var a=!1;$.each(n.bind_cards_list,function(t,n){a||(a=e.indexOf(n.other_bank_bin_code)>-1)}),a?(t.data.notice.show=!0,f.dimStatusBarBackground(!0)):X.next("Notice")}else X.next("Notice")}}else X.next("Notice")};t.$on("$destroy",function(){un(),pn()}),e.$$listeners.POPUP_SHOW=[];var pn=e.$on("POPUP_SHOW",function(e,t){switch(t){case"Notice":mn();break;case"AccountActive":Tt();break;case"IncomeArrival":lt.arrivalData?lt.showArrival=!0:X.next("IncomeArrival");break;case"HomeBigBanner":null==en?X.next("HomeBigBanner"):lt.showBigBanner=!0;break;case"NewBee":Jt();break;
case"WePay":gn();break;case"WePayBindTip":_n()}}),fn=function(){X.next("WePay")},gn=function(){lt.wePayPopData&&Z.getWePayStatus()==r.WEPAY_STATE.CLOSED&&Z.canUseWePay()?(tracelog("弹出We支付消息"),s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_OPEN_POP_SHOW),lt.showOpenWePayTip=!0):X.next("WePay")};st.onClickCloseOpenWePayTip=function(e){lt.showOpenWePayTip=!1,X.next("WePay"),Z.clearWePayPop(),e&&s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_OPEN_POP_CLICK_CLOSE)},st.onClickOpenWePay=function(){return lt.wePay_isAgreed?(s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_OPEN_POP_CLICK_OPEN),Z.startOpenWepay(fn),void st.onClickCloseOpenWePayTip()):void s.makeToast("请勾选服务条款")},st.onClickWePayMoreMsg=function(){Z.openFAQ(),s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_OPEN_POP_CLICK_MORE)},st.clickAgreementCheckBox=function(){vn()},st.onClickViewGoldProducts=function(){s.clickButtonReport("index_gold"),M.go("/myFinancialGold")},st.onClickGoldCurrentProd=function(){s.clickButtonReport("index_gold"),M.go("/goldCurrentProdDetail")};var vn=function(){lt.openWepayBtnClass=1==lt.wePay_isAgreed?"p-btn p-btn-block":"p-btn p-btn-block off"};st.clickAgreement=function(){Z.openAgreement()},st.onClickCloseBindWePayTip=function(e){lt.showWePayBindTip=!1,X.next("WePayBindTip"),Z.setNewUserFlag(!1),e&&s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_BIND_POP_CLICK_CLOSE)},st.onClickWXBind=function(){s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_BIND_POP_CLICK_WX),Z.startWXBindCard(),st.onClickCloseBindWePayTip()},st.onClickQQBind=function(){s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_BIND_POP_CLICK_QQ),Z.startQQBindCard(),st.onClickCloseBindWePayTip()};var _n=function(){Z.canShowBindTipAtHome()&&Z.canUseWePay()?(tracelog("弹出We绑卡消息"),s.clickButtonReport(r.WEPAY_STATISTIC.WEPAY_BIND_POP_SHOW),lt.showWePayBindTip=!0):X.next("WePayBindTip")},yn=function(e,t){lt.dayEventListMonthsTemp={},lt.productInComeListMonthCalendarTemp=[];var n="",a="";n=s.getYYYYMMDDStringByDate(e),a=s.getYYYYMMDDStringByDate(t);var r={startTime:n,endTime:a};o.requestCalendarInfo(r,"monthsCalendarData").then(function(e){var t=p.getCacheInfo("wealthNew");if(t){var n=e.ret_data;hn(n)}},function(e){tracelog("获取计划数据与产品预告配制时间轴信息失败, 原因："+e.ret_msg)})},hn=function(e){if(lt.allEventList={},e&&e.calendarEventList&&e.calendarEventList.length>0){var t=e.calendarEventList[0]&&e.calendarEventList[0].jobList;if(t&&t.length>0)for(var n=0;n<t.length;n++){var a=t[n].next_time;t[n].execute_time=a,t[n].category=parseInt(t[n].category)?parseInt(t[n].category):r.CALANDAR_CATAGRY.NONE,(!t[n].status||"5"!=t[n].status&&"6"!=t[n].status&&"7"!=t[n].status)&&(lt.allEventList[a]?lt.allEventList[a].push(t[n]):(lt.allEventList[a]=[],lt.allEventList[a].push(t[n])))}var o=e.calendarEventList[2]&&e.calendarEventList[2].earningList;if(o&&o.length>0)for(var i=0;i<o.length;i++){var a=o[i].date;if(a==lt.todayStr){var c=o[i].prodCode;c&&(lt.productIncomedList[c]=o[i])}}}Tn(),En()},Tn=function(){var e=p.getCacheInfo("wealthNew"),t=[],n=[];if(e&&e.finance_wealth&&e.finance_wealth.fund_cycle)for(var a in e.finance_wealth.fund_cycle)n.push(e.finance_wealth.fund_cycle[a].prod_code),t.push(e.finance_wealth.fund_cycle[a]);if(e&&e.finance_wealth&&e.finance_wealth.bank_cycle)for(var a in e.finance_wealth.bank_cycle)n.push(e.finance_wealth.bank_cycle[a].prod_code),t.push(e.finance_wealth.bank_cycle[a]);for(var a=0;a<n.length;a++){var o=W.getProdInfo(n[a]);if(o){if(1!=o.product_type&&3!=o.product_type||0!=o.templet_type)continue;var i,c=o.value_date,l=parseInt(c,10)>20151116&&o.value_end_date;l?i=s.getDateByYYYYMMDDString(o.value_end_date):(i=s.getDateByYYYYMMDDString(c),i.setDate(i.getDate()+parseInt(o.life_time)-1));var u,d=(s.getYYYYMMDDStringByDate(i),0),m=0,f=0;u=o.arrival_account_date?s.getDateByYYYYMMDDString(o.arrival_account_date):s.getNextWorkDay(1,i);var g=s.getYYYYMMDDStringByDate(u);if(g>=lt.todayStr&&lt.maxDateStr>=g&&(t[a].buy_in_trans>0?(d=parseFloat(t[a].buy_in_trans)+parseFloat(t[a].buy_in_trans)*parseFloat(o.income_rate)*parseInt(o.life_time)/100/365,m=parseFloat(t[a].buy_in_trans)*parseFloat(o.income_rate)*parseInt(o.life_time)/100/365,f=parseFloat(t[a].buy_in_trans)):t[a].available_vol>0&&(d=parseFloat(t[a].avg_cost)+parseFloat(t[a].avg_cost)*parseFloat(o.income_rate)*parseInt(o.life_time)/100/365,m=parseFloat(t[a].avg_cost)*parseFloat(o.income_rate)*parseInt(o.life_time)/100/365,f=parseFloat(t[a].avg_cost)),d>0)){if(g==lt.todayStr&&!s.isEmptyObject(lt.productIncomedList)&&lt.productIncomedList[n[a]]&&!s.isEmptyObject(lt.productIncomedList[n[a]]))continue;var v={productArrivalTotalIncome:d,category:r.CALANDAR_CATAGRY.ACCOUNT,principal:f,earning:m,execute_time:g};lt.allEventList[g]?lt.allEventList[g].push(v):(lt.allEventList[g]=[],lt.allEventList[g].push(v))}}}},En=function(){if(s.isEmptyObject(lt.allEventList))return lt.hasNoneEventSceneEvent=!1,void(lt.hasNextSeventDaysEvent=!1);var e=0;lt.selectNoneEventSceneEvent={},lt.selectNoneEventSceneEventHtml="";var t=s.getYYYYMMDDStringByDate(new Date);lt.maxRepeatDateStr=lt.nextSeventthDateStr;var n=In(t);if(n){if("[object Array]"===Object.prototype.toString.call(n)&&n.length>0){for(var a=n.length,o=0,i=0;a>i;i++)if(o=parseInt(n[i].category),n[i].job_type&&(1==n[i].job_type||3==n[i].job_type)&&o!=r.CALANDAR_CATAGRY.ACCOUNT){lt.selectNoneEventSceneEvent=n[i];break}if(s.isEmptyObject(lt.selectNoneEventSceneEvent))for(var c=0;a>c;c++)if(o=parseInt(n[c].category),n[c].job_type&&1!=n[c].job_type&&3!=n[c].job_type&&o==r.CALANDAR_CATAGRY.ACCOUNT){lt.selectNoneEventSceneEvent=n[c];break}s.isEmptyObject(lt.selectNoneEventSceneEvent)&&(lt.selectNoneEventSceneEvent=n[0]),e=n.length}else lt.selectNoneEventSceneEvent=n,e=1;if(s.isEmptyObject(lt.selectNoneEventSceneEvent))lt.hasNextSeventDaysEvent=!1;else{lt.hasNextSeventDaysEvent=!0;var l=parseInt(lt.selectNoneEventSceneEvent.category),u=s.getDateByYYYYMMDDString(lt.selectNoneEventSceneEvent.execute_time),d=new Date(lt.today.getFullYear(),lt.today.getMonth(),lt.today.getDate());switch(l){case r.CALANDAR_CATAGRY.SALARY:case r.CALANDAR_CATAGRY.NONE:case r.CALANDAR_CATAGRY.MORTGAGE:case r.CALANDAR_CATAGRY.RESPECT_PARENT:case r.CALANDAR_CATAGRY.PAY_RENT:if(lt.selectNoneEventSceneEventHtml+='<span class="ui-row-con" >',1==e)if(u.getTime()==d.getTime())lt.selectNoneEventSceneEventHtml+="今天将执行"+lt.selectNoneEventSceneEvent.remark+"计划";else if(u.getTime()==d.getTime()+864e5)lt.selectNoneEventSceneEventHtml+="明天将执行"+lt.selectNoneEventSceneEvent.remark+"计划";else if(u.getTime()==d.getTime()+1728e5)lt.selectNoneEventSceneEventHtml+="后天将执行"+lt.selectNoneEventSceneEvent.remark+"计划";else{var m=u.getDay(),p=d.getDay(),f=parseInt((u.getTime()-d.getTime())/864e5);lt.selectNoneEventSceneEventHtml+=p+f>7?u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将执行"+lt.selectNoneEventSceneEvent.remark+"计划":u.getMonth()+1+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将执行"+lt.selectNoneEventSceneEvent.remark+"计划":u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将执行"+lt.selectNoneEventSceneEvent.remark+"计划":u.getMonth()+1+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将执行"+lt.selectNoneEventSceneEvent.remark+"计划"}else if(e>1)if(u.getTime()==d.getTime())lt.selectNoneEventSceneEventHtml+="今天将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注";else if(u.getTime()==d.getTime()+864e5)lt.selectNoneEventSceneEventHtml+="明天将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注";else if(u.getTime()==d.getTime()+1728e5)lt.selectNoneEventSceneEventHtml+="后天将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注";else{var m=u.getDay(),p=d.getDay(),f=parseInt((u.getTime()-d.getTime())/864e5);lt.selectNoneEventSceneEventHtml+=p+f>7?u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注":u.getMonth()+1+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注":u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注":u.getMonth()+1+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将有"+lt.selectNoneEventSceneEvent.remark+"计划等"+e+"个事件需要关注"}lt.selectNoneEventSceneEventHtml+='</span><i class="ui-row-arrow"></i>';break;case r.CALANDAR_CATAGRY.ACCOUNT:if(lt.selectNoneEventSceneEventHtml+='<span class="ui-row-con" >',e>1)if(u.getTime()==d.getTime())lt.selectNoneEventSceneEventHtml+="今天将有产品收益到账等"+e+"个事件需要关注";else if(u.getTime()==d.getTime()+864e5)lt.selectNoneEventSceneEventHtml+="明天将有产品收益到账等"+e+"个事件需要关注";else if(u.getTime()==d.getTime()+1728e5)lt.selectNoneEventSceneEventHtml+="后天将有产品收益到账等"+e+"个事件需要关注";else{var m=u.getDay(),p=d.getDay(),f=parseInt((u.getTime()-d.getTime())/864e5);lt.selectNoneEventSceneEventHtml+=p+f>7?u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账等"+e+"个事件需要关注":u.getMonth()+1+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账等"+e+"个事件需要关注":u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账等"+e+"个事件需要关注":u.getMonth()+1+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账等"+e+"个事件需要关注"}else if(1==e)if(u.getTime()==d.getTime())lt.selectNoneEventSceneEventHtml+="今天将有产品收益到账";else if(u.getTime()==d.getTime()+864e5)lt.selectNoneEventSceneEventHtml+="明天将有产品收益到账";else if(u.getTime()==d.getTime()+1728e5)lt.selectNoneEventSceneEventHtml+="后天将有产品收益到账";else{var m=u.getDay(),p=d.getDay(),f=parseInt((u.getTime()-d.getTime())/864e5);lt.selectNoneEventSceneEventHtml+=p+f>7?u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账":u.getMonth()+1+"月"+u.getDate()+"日（下周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账":u.getFullYear()!=d.getFullYear()?u.getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账":u.getMonth()+1+"月"+u.getDate()+"日（本周"+r.WEEKEY_ZW_DESC[m]+"）将有产品收益到账"}lt.selectNoneEventSceneEventHtml+='</span><i class="ui-row-arrow"></i>'}}}else lt.hasNextSeventDaysEvent=!1,lt.maxRepeatDateStr=lt.maxDateStr,t=Sn(lt.nextSeventthDateStr),n=In(t),lt.hasNoneEventSceneEvent=n?!0:!1};st.onClickNoneEvenScene=function(){var e=lt.selectNoneEventSceneEvent&&lt.selectNoneEventSceneEvent.execute_time,t=s.getDateByYYYYMMDDString(e);t=new Date(t.getFullYear(),t.getMonth(),1);var n=s.getYYYYMMDDStringByDate(t);l.path("/financialCalendar/"+n)};var In=function(e){if(lt.allEventList[e]&&lt.allEventList[e].length>0)return lt.allEventList[e];var t=Sn(e);return t>lt.maxRepeatDateStr?null:In(t)},Sn=function(e){var t="",n=s.getDateByYYYYMMDDString(e),a=n.getTime()+864e5;return a=new Date(a),t=s.getYYYYMMDDStringByDate(a)};st.onClickHomeCalendar=function(){lt.hasNextSeventDaysEvent?st.onClickNoneEvenScene():!lt.hasNextSeventDaysEvent&&lt.hasNoneEventSceneEvent?l.path("/financialCalendar/"+lt.todayStr):lt.hasNextSeventDaysEvent||lt.hasNoneEventSceneEvent||l.path("/financialCalendar/"+lt.todayStr)},st.onClickAssetTotal=function(){return s.isInGrayList(7)?void l.path("asset"):void tracelog("不在资产管理特性白名单内")},qt(),s.resetHistory()}]);app.controller("AssetController",["$rootScope","$filter","$scope","$location","$timeout","cgiService","utils","essential","ProdInfoService","LocationService","cache","$sce","webankCommonService",function(t,a,e,r,s,o,i,n,d,_,l,p,u){var c=e.func={},D=e.data={},g=function(){D.today=new Date,D.todayStr=i.getYYYYMMDDStringByDate(D.today),D.selectedDate=D.today,D.open_date=i.getYYYYMMDDStringByDate(D.today),D.showLoading=!1,D.asset_currentDate_data={},D.asset_currentDate_group_data=[],D.asset_currentDate_list_data=[],D.xMin=Date.UTC(D.today.getFullYear(),D.today.getMonth(),D.today.getDate()),D.xMax=Date.UTC(D.today.getFullYear(),D.today.getMonth(),D.today.getDate()),D.yMin=0,D.yMax=0,D.seriesData=[],D.hasUserAssetData=!0,D.tickPositions=[],D.noDataDateList={},D.isDateHasData=!0,D.isAfterExtremeRequestingData=!1,D.groupChartAnimation=!0,D.dateGroupData={},D.isHomeIncome=!0,y();var t=_.getData();if(t&&t.currentDate){D.selectedDate=t.currentDate;var a=l.getCacheInfo("asset_data_list");if(a&&a.asset_period_data&&a.asset_period_data.length>0){var e=l.getCacheInfo("asset_nodata_date_list");e&&!i.isEmptyObject(e)&&(D.noDataDateList=e);var r=l.getCacheInfo("date_group_data_list");if(r&&!i.isEmptyObject(r)&&(D.dateGroupData=r),a.asset_period_data.length>2){var s=i.getDateByYYYYMMDDString(a.asset_period_data[a.asset_period_data.length-1].trans_date),o=i.getDateByYYYYMMDDString(a.asset_period_data[0].trans_date),n=new Date(D.selectedDate.getTime()+3888e6);n.getTime()>s.getTime()?n=s:D.noDataDateList&&!i.isEmptyObject(D.noDataDateList)&&D.noDataDateList[i.getYYYYMMDDStringByDate(n)]&&!i.isEmptyObject(D.noDataDateList[i.getYYYYMMDDStringByDate(n)])&&(n=i.getDateByYYYYMMDDString(a.asset_period_data[a.asset_period_data.length-2].trans_date));var d=new Date(n-7776e6);d.getTime()<o.getTime()&&(d=o);for(var p=a.asset_period_data.length,u=-1,c=-1,g=!1,Y=!1,f=0;p>f;f++){var m=a.asset_period_data[f];if(i.getYYYYMMDDStringByDate(n)==m.trans_date?(u=f,g=!0):i.getYYYYMMDDStringByDate(d)==m.trans_date&&(c=f,Y=!0),g&&Y)break}if(-1!=c&&-1!=u){var M=a.asset_period_data.slice(c,u);p>1&&u==p-1&&M.push(a.asset_period_data[p-1])}var k={open_date:a.open_date,asset_period_data:M};D.groupChartAnimation=!0,D.isHomeIncome=!1,v(k)}else D.groupChartAnimation=!0,v(a)}else h("",i.getYYYYMMDDStringByDate(D.today));_.setData({})}else h("",i.getYYYYMMDDStringByDate(D.today))},y=function(){var t=i.getYYYYMMDDStringByDate(D.today),a={};D.assert_period_data_today=[],D.assert_period_data_today[0]={trans_date:t,kpi_value:0},D.assert_today_group_today=[],D.assert_today_list_today=[];var e=l.getCacheInfo("wealthNew");if(e){var r=u.parseRawWealthData_V3(e);if(r&&!i.isEmptyObject(r)&&r.totalAmount>0){D.assert_period_data_today[0].kpi_value=r.totalAmount;var s={product_type:"7",kpi_value:r.BankAmount,trans_date:t,asset_ratio:parseFloat(r.BankAmount/r.totalAmount).toFixed(4)};s.kpi_value>0&&(a={},a.kpi_value=s.kpi_value,a.product="",a.product_type=s.product_type,a.asset_ratio=s.asset_ratio,D.assert_today_list_today.push(a),D.assert_today_group_today.push(s));var o={product_type:"0",kpi_value:r.HJAmount,trans_date:t,asset_ratio:parseFloat(r.HJAmount/r.totalAmount).toFixed(4)};o.kpi_value>0&&(a={},a.kpi_value=o.kpi_value,a.product="",a.product_type=o.product_type,a.asset_ratio=o.asset_ratio,D.assert_today_list_today.push(a),D.assert_today_group_today.push(o));var n={product_type:"3",kpi_value:r.ShortAmount,trans_date:t,asset_ratio:parseFloat(r.ShortAmount/r.totalAmount).toFixed(4)};n.kpi_value>0&&D.assert_today_group_today.push(n);var d={product_type:"1",kpi_value:r.BXAmount,trans_date:t,asset_ratio:parseFloat(r.BXAmount/r.totalAmount).toFixed(4)};d.kpi_value>0&&D.assert_today_group_today.push(d);var _={product_type:"2",kpi_value:r.GJAmount,trans_date:t,asset_ratio:parseFloat(r.GJAmount/r.totalAmount).toFixed(4)};_.kpi_value>0&&D.assert_today_group_today.push(_);for(var p=r.BXProdDetail||[],c=0;c<p.length;c++)a={},a.kpi_value=p[c].amount,a.product=p[c].code,a.product_type="1",a.asset_ratio=parseFloat(p[c].amount/r.totalAmount).toFixed(4),D.assert_today_list_today.push(a);for(var g=r.GJProdDetail||[],y=0;y<g.length;y++)a={},a.kpi_value=g[y].amount,a.product=g[y].code,a.product_type="2",a.asset_ratio=parseFloat(g[y].amount/r.totalAmount).toFixed(4),D.assert_today_list_today.push(a);for(var h=r.shortProdDetail||[],Y=0;Y<h.length;Y++)a={},a.kpi_value=h[Y].amount,a.product=h[Y].code,a.product_type="3",a.asset_ratio=parseFloat(h[Y].amount/r.totalAmount).toFixed(4),D.assert_today_list_today.push(a)}}},h=function(t,a){var e={start_date:t,end_date:a};D.showLoading=!0,n.dimStatusBarBackground(!0),o.requestAssetData(e).then(function(t){D.showLoading=!1,n.dimStatusBarBackground(!1),t.ret_data&&(t.ret_data&&t.ret_data.asset_period_data&&t.ret_data.asset_period_data.length>0&&t.ret_data.asset_period_data.sort(function(t,a){return parseInt(t.trans_date)-parseInt(a.trans_date)}),l.setCacheInfo("asset_data_list",t.ret_data),v(t.ret_data))},function(t){D.showLoading=!1,n.dimStatusBarBackground(!1),v(),tracelog("获取资产分布数据信息失败, 原因："+t.ret_msg)})},Y=function(){var t=D.noDataDateList[i.getYYYYMMDDStringByDate(D.selectedDate)];if(t&&!i.isEmptyObject(t))D.isDateHasData=!1;else if(i.getYYYYMMDDStringByDate(D.selectedDate)==i.getYYYYMMDDStringByDate(D.today)){D.isDateHasData=!0;var a={};a.asset_today_data=[],a.asset_today_group=[],a.asset_today_list=[],angular.copy(D.assert_period_data_today,a.asset_today_data),angular.copy(D.assert_today_group_today,a.asset_today_group),angular.copy(D.assert_today_list_today,a.asset_today_list),x(a)}else{D.isDateHasData=!0;var e=i.getYYYYMMDDStringByDate(D.selectedDate);if(D.dateGroupData[e]&&!i.isEmptyObject(D.dateGroupData[e]))x(D.dateGroupData[e]);else{var r={trans_date:e};o.requestAssetDataDetail(r).then(function(t){if(t.ret_data){x(t.ret_data);var a=t.ret_data;D.dateGroupData[e]=a,l.setCacheInfo("date_group_data_list",D.dateGroupData)}},function(t){tracelog("获取资产分组数据信息失败, 原因："+t.ret_msg)})}}},v=function(t){if(M(t),t&&t.asset_period_data&&t.asset_period_data.length>0&&t.asset_period_data[t.asset_period_data.length-1]&&t.asset_period_data[t.asset_period_data.length-1].trans_date==D.todayStr||D.isHomeIncome){var a=[];if(D.seriesData&&D.seriesData.length>0)if(D.noDataDateList&&!i.isEmptyObject(D.noDataDateList))angular.forEach(D.noDataDateList,function(t,e){var r=i.getDateByYYYYMMDDString(e),s=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());a=[],a.push(s),a.push(0),D.seriesData.push(a)});else{D.seriesData.sort(function(t,a){var e=t[0]?t[0]:t.x,r=a[0]?a[0]:a.x;return e-r});var r=new Date(D.seriesData[D.seriesData.length-1][0]),s=new Date(r.getFullYear(),r.getMonth(),r.getDate());if(new Date(D.today.getFullYear(),D.today.getMonth(),D.today.getDate()).getTime()>s.getTime()){var o=i.getAllDatesBetweenDates(r,new Date(D.today.getFullYear(),D.today.getMonth(),D.today.getDate())),n=o.length;if(n>0)for(var d=0;n>d;d++){var _=Date.UTC(o[d].getFullYear(),o[d].getMonth(),o[d].getDate()),p=i.getYYYYMMDDStringByDate(o[d]);D.xMax<=_&&(D.xMax=_),a=[],a.push(_),a.push(0),D.seriesData.push(a),D.noDataDateList[p]={flag:!1,desc:"暂无数据"},l.setCacheInfo("asset_nodata_date_list",D.noDataDateList)}}}var u=l.getCacheInfo("asset_data_list"),c=!1;if(u?u.asset_period_data&&u.asset_period_data[u.asset_period_data.length-1]&&u.asset_period_data[u.asset_period_data.length-1].trans_date==D.todayStr?(u.asset_period_data.sort(function(t,a){return t.trans_date-a.trans_date}),u.asset_period_data[u.asset_period_data.length-1]=D.assert_period_data_today[0],c=!0):u.asset_period_data&&u.asset_period_data.push(D.assert_period_data_today[0]):(u={asset_period_data:[],open_date:D.todayStr},u.asset_period_data.push(D.assert_period_data_today[0])),l.setCacheInfo("asset_data_list",u),!c){var g=Date.UTC(D.today.getFullYear(),D.today.getMonth(),D.today.getDate());a=[],a.push(g),a.push(parseInt(D.assert_period_data_today[0].kpi_value)),D.seriesData.push(a)}}if(D.seriesData&&D.seriesData.length>0){D.seriesData.sort(function(t,a){var e=t[0]?t[0]:t.x,r=a[0]?a[0]:a.x;return e-r});var y=new Date(D.seriesData[D.seriesData.length-1][0]),h=new Date(D.seriesData[0][0]),v=Date.UTC(y.getFullYear(),y.getMonth(),y.getDate()),m=Date.UTC(h.getFullYear(),h.getMonth(),h.getDate());D.tickPositions.push(m),D.tickPositions.push(v),D.assetChart=new Highcharts.StockChart({title:{text:""},chart:{backgroundColor:{linearGradient:{x1:0,y1:0,x2:1,y2:1},stops:[[0,"#445c95"],[1,"#445c99"]]},pinchType:"none",zoomType:"none",events:{load:function(){},click:function(t){i.getYYYYMMDDStringByDate(D.selectedDate)==i.getYYYYMMDDStringByDate(new Date(t.xAxis[0].value))?tracelog("重复点击资产变化曲线的同一个点，不重新取数据"):i.getYYYYMMDDStringByDate(y)<i.getYYYYMMDDStringByDate(new Date(t.xAxis[0].value))?i.getYYYYMMDDStringByDate(D.selectedDate)==i.getYYYYMMDDStringByDate(y)?tracelog("重复点击资产变化曲线的同一个点，不重新取数据"):(D.selectedDate=y,Y(),e.$apply(),f()):(D.selectedDate=new Date(t.xAxis[0].value),Y(),e.$apply(),f())},selection:function(){}},type:"areaspline",renderTo:"assetChart_container"},plotOptions:{series:{color:{linearGradient:[0,0,300,300],stops:[[0,"rgba(111,210,187,0.2)"],[.3,"rgba(111,210,187,1.0)"],[.6,"rgba(102,194,225,0.6)"],[1,"rgba(102,194,225,0.8)"]]},events:{click:function(t){i.getYYYYMMDDStringByDate(D.selectedDate)==i.getYYYYMMDDStringByDate(new Date(t.point.x))?tracelog("重复点击资产变化曲线的同一个点，不重新取数据"):(D.selectedDate=new Date(t.point.x),Y(),e.$apply(),f())},afterAnimate:function(){f()}},states:{hover:{enabled:!1}}},areaspline:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"rgba(114,204,255,0.2)"],[.5,"rgba(114,204,255,0.1)"],[1,"rgba(94,122,188,0.2)"]]},lineWidth:2,trackByArea:!0}},xAxis:{type:"datetime",labels:{formatter:function(){var t=new Date(this.value);return t.getFullYear()!=D.today.getFullYear()?t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate():t.getMonth()+1+"-"+t.getDate()},align:"center",style:{color:"#98a5c4"}},lineColor:"#4b649f",lineWidth:1,tickColor:"#7da3de",tickPosition:"inside",showFirstLabel:!0,showLastLabel:!0,ordinal:!1,tickPositions:D.tickPositions},yAxis:{title:{text:""},labels:{style:{color:"#98a5c4"},formatter:function(){var t=parseInt(this.value);return t/1e5>1?t=10*Math.ceil(t/1e5)+"万":t/100>1?t=100*Math.ceil(t/100):t/10>1&&(t=10*Math.ceil(t/10)),t}},tickPositioner:function(){var t=[],a=0;if(null!==this.dataMax){var e=this.dataMax;if(0==e)t=[0,1,2,3,4];else{var r=e/3,s=0;for(a;e>=a-r;a+=r)s=a,t.push(s)}}return t},gridLineWidth:1,gridLineColor:"#4b649f",opposite:!1,showLastLabel:!0,allowDecimals:!1,tickAmount:5},tooltip:{crosshairs:[!1,!1],style:{display:"none"}},series:[{name:"",data:D.seriesData}],legend:{enabled:!1},scrollbar:{enabled:!1,liveRedraw:!1},rangeSelector:{enabled:!1},exporting:{enabled:!1},navigator:{enabled:!1},credits:{enabled:!1}},function(){Y()})}else D.hasUserAssetData=!1},f=function(){for(var t=Date.UTC(D.selectedDate.getFullYear(),D.selectedDate.getMonth(),D.selectedDate.getDate()),a=$("#assetChart_container").highcharts(),e=a.series[0].data,r=-1,s=e.length-1;s>=0;s--)if(e[s]&&e[s].x==t){r=s;break}if(-1!=r){D.halo&&D.halo.attr({d:[]}),D.plotLine&&!i.isEmptyObject(D.plotLine)&&D.plotLine.destroy(),D.circleGraphic&&!i.isEmptyObject(D.circleGraphic)&&D.circleGraphic.destroy(),D.pointselected=e[r],D.halo=a.renderer.path();var o={opacity:.45,size:8};D.halo=D.halo.add(a.seriesGroup),D.halo.attr($.extend({fill:"#6890e2","fill-opacity":1,zIndex:-11},o)).attr({d:D.pointselected.haloPath(10)});var n=a.xAxis[0],d=a.yAxis[0],_=a.renderer,l=n.toPixels(D.pointselected.x),p=d.toPixels(D.pointselected.y),u=d.toPixels(0);D.plotLine=_.path(["M",l,u,"L",l,p]).attr({"stroke-width":1,"stroke-dasharray":"2, 2",stroke:"#81aae5"}).add(),D.circleGraphic=_.circle(l,p,4).attr({fill:"#66c2e1","stroke-width":1,stroke:"#ffffff",zIndex:"11"}).add()}},m=function(t){var a={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,margin:[0,0,0,0],spacing:[0,0,0,0],renderTo:"group-circle"},title:{text:""},tooltip:{style:{display:"none"}},plotOptions:{series:{allowPointSelect:!1,states:{hover:{enabled:!1}},dataLabels:{enabled:!1},animation:D.groupChartAnimation},pie:{innerSize:"60%"}},series:[{type:"pie",ignoreHiddenPoint:!0,data:t}],exporting:{enabled:!1},navigator:{enabled:!1},credits:{enabled:!1}};D.groupChart=new Highcharts.Chart(a)},M=function(t){if(t&&t.asset_period_data&&t.asset_period_data.length>0){D.seriesData=[];var a=t.asset_period_data.length;D.open_date=t.open_date?t.open_date:D.todayStr;for(var e=[],r=0;a>r;r++){var s=t.asset_period_data[r],o=i.getDateByYYYYMMDDString(s.trans_date),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());D.xMin>=n&&(D.xMin=n),D.xMax<=n&&(D.xMax=n);var d=i.getDateByYYYYMMDDString(s.trans_date),_=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate());e=[],e.push(_),e.push(parseInt(s.kpi_value)),D.yMin>=parseInt(s.kpi_value)&&(D.yMin=parseInt(s.kpi_value)),D.yMax<=parseInt(s.kpi_value)&&(D.yMax=parseInt(s.kpi_value)),D.seriesData.push(e)}}},k=function(t,a){for(var e={},r=t.length,s=0;r>s;s++)if(t[s]&&t[s].product_type==a){e=t[s];break}return e},x=function(t){if(t){var e=[];D.asset_currentDate_data=[];var r=t.asset_today_data;r&&r.length>0&&(D.asset_currentDate_data=r[0]),D.asset_currentDate_group_data=[];var o=t.asset_today_group;if(o&&o.length>0){var _=k(o,"7");i.isEmptyObject(_)||D.asset_currentDate_group_data.push(_),_=k(o,"0"),i.isEmptyObject(_)||D.asset_currentDate_group_data.push(_),_=k(o,"3"),i.isEmptyObject(_)||D.asset_currentDate_group_data.push(_),_=k(o,"1"),i.isEmptyObject(_)||D.asset_currentDate_group_data.push(_),_=k(o,"2"),i.isEmptyObject(_)||D.asset_currentDate_group_data.push(_);for(var l=D.asset_currentDate_group_data.length,u=0;l>u;u++){var c=D.asset_currentDate_group_data[u];D.asset_currentDate_group_data[u].kpi_value=parseFloat(D.asset_currentDate_group_data[u].kpi_value).toFixed(2);var g=(100*parseFloat(c.asset_ratio)).toFixed(1);1>g&&(g=1);var y={y:parseFloat(g),color:""},h=parseInt(c.product_type);switch(h){case 0:y.color="#71bbdd";break;case 1:y.color="#4f9be9";break;case 2:y.color="#e26153";break;case 3:y.color="#41a8e3";break;case 4:break;case 5:break;case 6:break;case 7:y.color="#587dd5"}e.push(y)}e&&e.length>0&&s(function(){m(e)},1)}D.asset_currentDate_list_data=[];var Y=t.asset_today_list;if(Y&&Y.length>0){D.asset_currentDate_list_data=Y,D.asset_currentDate_list_data.sort(function(t,a){return a.kpi_value-t.kpi_value});for(var v=D.asset_currentDate_list_data.length,f=[],M=[],x=0;v>x;x++)D.asset_currentDate_list_data[x].kpi_value=parseFloat(D.asset_currentDate_list_data[x].kpi_value).toFixed(2),D.asset_currentDate_list_data[x].asset_ratio=(100*parseFloat(D.asset_currentDate_list_data[x].asset_ratio)).toFixed(2)+"%",D.asset_currentDate_list_data[x].productClass="",0==parseInt(D.asset_currentDate_list_data[x].product_type)?(D.asset_currentDate_list_data[x].productClass="hqj",D.asset_currentDate_list_data[x].product_name="活期+"):1==parseInt(D.asset_currentDate_list_data[x].product_type)?D.asset_currentDate_list_data[x].productClass="dqj":2==parseInt(D.asset_currentDate_list_data[x].product_type)?D.asset_currentDate_list_data[x].productClass="jj":3==parseInt(D.asset_currentDate_list_data[x].product_type)?D.asset_currentDate_list_data[x].productClass="sqj":7==parseInt(D.asset_currentDate_list_data[x].product_type)&&(D.asset_currentDate_list_data[x].productClass="wzk",D.asset_currentDate_list_data[x].product_name="微众卡");for(var b=0;v>b;b++)if(0!=parseInt(D.asset_currentDate_list_data[b].product_type)&&7!=parseInt(D.asset_currentDate_list_data[b].product_type)){var C=d.getProdInfo(D.asset_currentDate_list_data[b].product);if(C){var S="";S=C.product_type&&1==C.product_type&&2==C.templet_type?C.prod_name:!C.product_type||1!=C.product_type&&3!=C.product_type||0!=C.templet_type?C.product_type&&2==C.product_type?a("longProdName")(C.on_sale_desc)+"<br />("+C.on_sale_code+")":C.prod_name:C.on_sale_desc+"<br />("+C.value_date.substr(4,4)+")",D.asset_currentDate_list_data[b].product_name=p.trustAsHtml(S)}else f.push(D.asset_currentDate_list_data[b].product),M.push(b)}f&&f.length>0&&d.requestProdInfo(f).then(function(){n.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),n.reject()}).then(function(){for(var t=0;t<M.length;t++){var e=M[t],r=d.getProdInfo(D.asset_currentDate_list_data[e].product);if(r){var s="";s=r.product_type&&1==r.product_type&&2==r.templet_type?r.prod_name:!r.product_type||1!=r.product_type&&3!=r.product_type||0!=r.templet_type?r.product_type&&2==r.product_type?a("longProdName")(r.on_sale_desc)+"<br />("+r.on_sale_code+")":r.prod_name:r.on_sale_desc+"<br />("+r.value_date.substr(4,4)+")",D.asset_currentDate_list_data[t].product_name=p.trustAsHtml(s)}}})}}};e.$on("$destroy",function(){b()}),e.onHJViewActive=function(){g()},e.onHJViewDisActive=function(){b()},c.back=function(){_.go("/home")},c.onClickDate=function(t){if(t&&D.hasUserAssetData){var a={};a.currentDate=t,_.setData(a);var e=i.getYYYYMMDDStringByDate(new Date(t.getFullYear(),t.getMonth(),1));r.path("assetCalendar/"+e)}};var b=function(){D.assetChart&&(D.assetChart=null),D.groupChart&&(D.groupChart=null)};g()}]);app.controller("AssetCalendarController",["$scope","$interval","$ionicModal","$ionicSlideBoxDelegate","$timeout","$location","$stateParams","cgiService","GLOBAL_CONSTANT","SalaryPlanService","MortgatePlanService","TransOutScenePlanService","cache","essential","webankCommonService","PlanService","PlanServiceV2","ProdInfoService","LocationService","$ionicGesture","$ionicScrollDelegate","utils","ProdCommonActionService","PopupService","localStorage","InsuranceMyProdDetailService",function(t,e,n,r,a,o,i,s,h,d,u,c,l,g,M,D,m,L,Y,_,f,S){var I=t.data={},v=t.func={},x=function(){I.ShowPlatFormClass="ios",I.showLoading=!1,(ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4||ionic.Platform.isIOS()&&ionic.Platform.version()<7)&&(I.ShowPlatFormClass="android-43"),I.inputDateStr=i.inputDateStr,I.today=S.getDate(),I.todayStr=S.getYYYYMMDDStringByDate(I.today),I.minDate=I.today,I.maxDate=I.today,I.monthList=[],I.initshowMonthSlideIndex=1,I.asset_data_list=[],I.isRequestAssertData=!1;var t=l.getCacheInfo("asset_data_list");t&&t.asset_period_data&&t.asset_period_data.length>0?(t.asset_period_data.sort(function(t,e){return parseInt(t.trans_date)-parseInt(e.trans_date)}),y(t)):F("",S.getYYYYMMDDStringByDate(I.today))},y=function(t){if(I.asset_data_list=t.asset_period_data,I.minDate=S.getDateByYYYYMMDDString(I.asset_data_list[0].trans_date),I.maxDate=S.getDateByYYYYMMDDString(I.asset_data_list[I.asset_data_list.length-1].trans_date),I.asset_data_list[I.asset_data_list.length-1].trans_date==I.todayStr&&I.asset_data_list.length>1&&(I.maxDate=S.getDateByYYYYMMDDString(I.asset_data_list[I.asset_data_list.length-2].trans_date)),I.open_date=t.open_date,w(),I.monthList.length<3)for(var e=3-I.monthList.length,n=I.monthList[0].monthFirstDate,o=n.getMonth(),i=n.getFullYear(),h=0;e>h;h++){o--,0>o&&(o=12+o,i--);var d={monthFirstDate:new Date(i,o,1),dateRowList:[]};I.monthList.unshift(d)}I.monthList=R(I.monthList,I.asset_data_list),I.currentMonthIndex=I.monthList.length-1;for(var u=0;u<I.monthList.length;u++){var c=S.getYYYYMMDDStringByDate(I.monthList[u].monthFirstDate);if(c&&c==I.inputDateStr){I.currentMonthIndex=u;break}}if(r.disableSlideDir(0),I.currentMonthList=[],0==I.currentMonthIndex?(I.currentMonthList[0]=I.monthList[I.monthList.length-1],I.currentMonthList[1]=I.monthList[I.currentMonthIndex],I.currentMonthList[2]=I.monthList[I.currentMonthIndex+1]):I.currentMonthIndex==I.monthList.length-1?(I.currentMonthList[0]=I.monthList[I.currentMonthIndex-1],I.currentMonthList[1]=I.monthList[I.currentMonthIndex],I.currentMonthList[2]=I.monthList[0],a(function(){r.disableSlideDir(2);var t="#assertcalendarDelegateHandle1";I.UnDragLeftElement=angular.element(document.querySelector(t)),I.UnDragLeftGesture=_.on("dragend",A,I.UnDragLeftElement)})):(I.currentMonthList[0]=I.monthList[I.currentMonthIndex-1],I.currentMonthList[1]=I.monthList[I.currentMonthIndex],I.currentMonthList[2]=I.monthList[I.currentMonthIndex+1]),I.currentMonthSelected=I.currentMonthList[I.initshowMonthSlideIndex].monthFirstDate.getMonth()+1,I.currentMonthSelected<10&&(I.currentMonthSelected="0"+I.currentMonthSelected),I.currentYearSelected=I.currentMonthList[I.initshowMonthSlideIndex].monthFirstDate.getFullYear(),I.currentMonthList[1].monthFirstDate.getFullYear()===I.minDate.getFullYear()&&I.currentMonthList[1].monthFirstDate.getMonth()===I.minDate.getMonth())a(function(){r.disableSlideDir(I.UnDragLeftGesture?3:1);var t="#assertcalendarDelegateHandle1";I.UnDragRightElement=angular.element(document.querySelector(t)),I.UnDragRightGesture=_.on("dragend",C,I.UnDragRightElement)});else if(S.getYYYYMMDDStringByDate(I.monthList[I.currentMonthIndex].monthFirstDate)<=S.getYYYYMMDDStringByDate(I.minDate)&&S.getYYYYMMDDStringByDate(I.minDate)>I.open_date){var M=I.minDate.getFullYear(),D=I.minDate.getMonth();D++,D>11&&(D-=12,M++);var m=S.getYYYYMMDDStringByDate(new Date(M,D,0)),L={start_date:"",end_date:m};I.showLoading=!0,g.dimStatusBarBackground(!0),s.requestAssetData(L).then(function(t){if(I.showLoading=!1,g.dimStatusBarBackground(!1),t.ret_data&&t.ret_data.asset_period_data&&t.ret_data.asset_period_data.length>0){var e=l.getCacheInfo("asset_data_list"),n=t.ret_data.asset_period_data;n.sort(function(t,e){return e.trans_date-t.trans_date});for(var o=0;o<n.length;o++)e.asset_period_data&&e.asset_period_data.unshift(n[o]);e.asset_period_data=B(e.asset_period_data),e.asset_period_data.sort(function(t,e){return t.trans_date-e.trans_date}),l.setCacheInfo("asset_data_list",e);var i=t.ret_data.asset_period_data;i.sort(function(t,e){return t.trans_date-e.trans_date});var s=S.getDateByYYYYMMDDString(i[0].trans_date);I.minDate=s;for(var h=S.getDateByYYYYMMDDString(i[i.length-1].trans_date),d=s.getMonth(),u=s.getFullYear(),c=h.getMonth(),M=h.getFullYear(),D=d,m=u,L=[];D>=0&&!(m>M||m==M&&D>c);){var Y={monthFirstDate:new Date(m,D,1),dateRowList:[]};L.push(Y),D++,D>11&&(D=0,m++)}if(L.length>0){L=R(L,i),L.reverse();for(var f=L.length,v=0,x=0;f>x;x++){for(var y=L[x],p=-1,F=0;F<I.monthList.length;F++)if(S.getYYYYMMDDStringByDate(y.monthFirstDate)==S.getYYYYMMDDStringByDate(I.monthList[F].monthFirstDate)){p=F;break}-1==p?(v++,I.monthList.unshift(y)):I.monthList[p]=y}v>0&&(r.disableSlideDir(0),I.currentMonthIndex=I.currentMonthIndex+v,I.currentMonthList[0]=I.monthList[I.currentMonthIndex-1],I.currentMonthList[1]=I.monthList[I.currentMonthIndex],I.currentMonthList[2]=I.monthList[I.currentMonthIndex+1]),a(function(){var t=k("assertcalendarDelegateHandle1");t&&t.resize(),t&&t.scrollTop(!0),r.update()})}}else I.showLoading=!1,g.dimStatusBarBackground(!1),a(function(){r.disableSlideDir(1);var t="#assertcalendarDelegateHandle1";I.UnDragRightElement=angular.element(document.querySelector(t)),I.UnDragRightGesture=_.on("dragend",C,I.UnDragRightElement)})},function(t){I.showLoading=!1,g.dimStatusBarBackground(!1),a(function(){r.disableSlideDir(1)}),tracelog("获取资产分布数据信息失败, 原因："+t.ret_msg)})}},p=function(){if(!(I.today.getTime()<I.minDate.getTime()+76896e5)){var t=parseInt(I.currentMonthSelected)-1,e=parseInt(I.currentYearSelected);t-=2,0>t&&(t+=12,e--);var n=new Date(e,t,1);if(n.getTime()<I.minDate.getTime()&&S.getYYYYMMDDStringByDate(n)>I.open_date){var o=S.getYYYYMMDDStringByDate(new Date(I.currentYearSelected,parseInt(I.currentMonthSelected),0)),i={start_date:"",end_date:o};I.isRequestAssertData=!0,s.requestAssetData(i).then(function(t){if(t.ret_data&&t.ret_data.asset_period_data&&t.ret_data.asset_period_data.length>0){var e=l.getCacheInfo("asset_data_list"),n=t.ret_data.asset_period_data;n.sort(function(t,e){return e.trans_date-t.trans_date});for(var o=0;o<n.length;o++)e.asset_period_data&&e.asset_period_data.unshift(n[o]);e.asset_period_data=B(e.asset_period_data),e.asset_period_data.sort(function(t,e){return t.trans_date-e.trans_date}),l.setCacheInfo("asset_data_list",e);var i=t.ret_data.asset_period_data;i.sort(function(t,e){return t.trans_date-e.trans_date});var s=S.getDateByYYYYMMDDString(i[0].trans_date);I.minDate=s;for(var h=S.getDateByYYYYMMDDString(i[i.length-1].trans_date),d=s.getMonth(),u=s.getFullYear(),c=h.getMonth(),g=h.getFullYear(),M=d,D=u,m=[];M>=0&&!(D>g||D==g&&M>c);){var L={monthFirstDate:new Date(D,M,1),dateRowList:[]};m.push(L),M++,M>11&&(M=0,D++)}if(m.length>0){m=R(m,i),m.reverse();for(var Y=m.length,f=0,v=0;Y>v;v++){for(var x=m[v],y=-1,p=0;p<I.monthList.length;p++)if(S.getYYYYMMDDStringByDate(x.monthFirstDate)==S.getYYYYMMDDStringByDate(I.monthList[p].monthFirstDate)){y=p;break}-1==y?(f++,I.monthList.unshift(x)):I.monthList[y]=x}if(f>=0){a(function(){r.disableSlideDir(0),I.UnDragRightGesture&&(_.off(I.UnDragRightGesture,"dragend",C),I.UnDragRightGesture=null)}),I.currentMonthIndex=I.currentMonthIndex+f;for(var F=0;Y>F;F++)for(var w=m[F],U=0;U<I.currentMonthList.length;U++)S.getYYYYMMDDStringByDate(w.monthFirstDate)==S.getYYYYMMDDStringByDate(I.currentMonthList[U].monthFirstDate)&&(I.currentMonthList[U]=w);r.update()}}I.isRequestAssertData=!1}},function(t){I.isRequestAssertData=!1,tracelog("获取资产分布数据信息失败, 原因："+t.ret_msg)})}}},B=function(t){for(var e=[],n={},r=0;r<t.length;r++){var a=t[r];n[a.trans_date]||(e.push(a),n[a.trans_date]=!0)}return e},F=function(t,e){var n={start_date:t,end_date:e};I.showLoading=!0,g.dimStatusBarBackground(!0),s.requestAssetData(n).then(function(t){I.showLoading=!1,g.dimStatusBarBackground(!1),t.ret_data&&t.ret_data.asset_period_data&&t.ret_data.asset_period_data.length>0&&y(t.ret_data)},function(t){I.showLoading=!1,g.dimStatusBarBackground(!1),tracelog("获取资产分布数据信息失败, 原因："+t.ret_msg)})},w=function(){for(var t=I.minDate.getMonth(),e=I.minDate.getFullYear(),n=I.maxDate.getMonth(),r=I.maxDate.getFullYear(),a=t,o=e;a>=0&&!(o>r||o==r&&a>n);){var i={monthFirstDate:new Date(o,a,1),dateRowList:[]};I.monthList.push(i),a++,a>11&&(a=0,o++)}},R=function(t,e){for(var t=t?t:I.monthList,n=0;n<t.length;n++){var r=t[n].monthFirstDate,a=[],o=[],i=0,s=new Date(r.getFullYear(),r.getMonth(),1).getDate(),h=r.getMonth(),d=r.getFullYear();11==h?(h=0,d++):h++;for(var u=new Date(d,h,0).getDate(),c=s;u>=c;c++){var l=new Date(r.getFullYear(),r.getMonth(),c),g=S.getYYYYMMDDStringByDate(l),M=l.getDate(),D={day:l,dayClass:"",dateStr:g,date:M,dayDescClass:"",eventAmount:""};g==I.todayStr?(S.isHoliDay(l)&&(D.dayClass="holiday "),D.dayClass+="today ",ionic.Platform.isAndroid()?D.dayDescClass=ionic.Platform.version()<4.4?"android-43":"android":ionic.Platform.isIOS()&&(D.dayDescClass=ionic.Platform.version()<7?"android-43":"ios")):g<I.todayStr?((0==l.getDay()||6==l.getDay())&&(D.dayClass="weekend "),S.isHoliDay(l)&&(D.dayClass="holiday ")):((0==l.getDay()||6==l.getDay())&&(D.dayClass+="weekend "),S.isHoliDay(l)&&(D.dayClass+="holiday "),D.dayClass+="past "),o.push(D)}if(0!=o[0].day.getDay())for(var m=o[0].day.getDay(),L=0;m>L;L++)o.unshift({});for(var Y=o.length,L=0;Y>L;L++){0!=L&&L%7==0&&i++,a[i]||(a[i]={},a[i].dateRowListArray=[],a[i].assetDataRowList=[]);var _=U(o[L],e);o[L].eventAmount=_&&_.eventAmount,a[i].assetDataRowList.push(_),a[i].dateRowListArray.push(o[L])}if(a[i].dateRowListArray.length<7)for(var f=a[i].dateRowListArray.length,v=f;7>v;v++)a[i].dateRowListArray.push({}),a[i].assetDataRowList.push("");t[n].dateRowList=a}return t},U=function(t,e){if(S.isEmptyObject(t))return"past";for(var n=e.length,r="",a=t.day,o="",i=0;n>i;i++){var s=e[i];if(t.dateStr===s.trans_date){var h=parseInt(new Number(s.kpi_value));r=h>=1e8?h%1e8?parseInt(h/1e8)+"亿+":parseInt(h/1e8)+"亿":h>=1e6?h%1e4?parseInt(h/1e4)+"万+":parseInt(h/1e4)+"万":h+"",t.dateStr==I.todayStr?o="today":t.dateStr<I.todayStr&&(o="");break}}var d={eventAmount:r,AmountClass:o,day:a};return d},A=function(t){var e=t.gesture.direction;"left"==e&&S.makeToast("已经没有了哦","short")},C=function(t){var e=t.gesture.direction;"right"==e&&S.makeToast("已经没有了哦","short")};v.slideHasChanged=function(t){if(I.initshowMonthSlideIndex==t)return void a(function(){var e=k("assertcalendarDelegateHandle"+t);e&&e.resize(),e&&e.scrollTop(!0),r.update()});if(S.getYYYYMMDDStringByDate(I.currentMonthList[t].monthFirstDate)<=S.getYYYYMMDDStringByDate(I.minDate)&&S.getYYYYMMDDStringByDate(I.minDate)>I.open_date){I.currentMonthIndex=I.currentMonthIndex-1,I.currentMonthIndex<0&&(I.currentMonthIndex=0),I.currentMonthSelected=I.currentMonthList[t].monthFirstDate.getMonth()+1,I.currentMonthSelected<10&&(I.currentMonthSelected="0"+I.currentMonthSelected),I.currentYearSelected=I.currentMonthList[t].monthFirstDate.getFullYear();var e=I.minDate.getFullYear(),n=I.minDate.getMonth();n++,n>11&&(n-=12,e++);var o=S.getYYYYMMDDStringByDate(new Date(e,n,0)),i={start_date:"",end_date:o},h=I.initshowMonthSlideIndex;I.showLoading=!0,g.dimStatusBarBackground(!0),s.requestAssetData(i).then(function(e){if(I.showLoading=!1,g.dimStatusBarBackground(!1),e.ret_data&&e.ret_data.asset_period_data&&e.ret_data.asset_period_data.length>0){var n=l.getCacheInfo("asset_data_list"),o=e.ret_data.asset_period_data;o.sort(function(t,e){return e.trans_date-t.trans_date});for(var i=0;i<o.length;i++)n.asset_period_data&&n.asset_period_data.unshift(o[i]);n.asset_period_data=B(n.asset_period_data),n.asset_period_data.sort(function(t,e){return t.trans_date-e.trans_date}),l.setCacheInfo("asset_data_list",n);var s=e.ret_data.asset_period_data;s.sort(function(t,e){return t.trans_date-e.trans_date});var d=S.getDateByYYYYMMDDString(s[0].trans_date);I.minDate=d;for(var u=S.getDateByYYYYMMDDString(s[s.length-1].trans_date),c=d.getMonth(),M=d.getFullYear(),D=u.getMonth(),m=u.getFullYear(),L=c,Y=M,f=[];L>=0&&!(Y>m||Y==m&&L>D);){var v={monthFirstDate:new Date(Y,L,1),dateRowList:[]};f.push(v),L++,L>11&&(L=0,Y++)}if(f.length>0){f=R(f,s),f.reverse();for(var x=f.length,y=0,p=0;x>p;p++){for(var F=f[p],w=-1,U=0;U<I.monthList.length;U++)if(S.getYYYYMMDDStringByDate(F.monthFirstDate)==S.getYYYYMMDDStringByDate(I.monthList[U].monthFirstDate)){w=U;break}-1==w?(y++,I.monthList.unshift(F)):I.monthList[w]=F}if(y>0)if(a(function(){r.disableSlideDir(0),I.UnDragRightGesture&&(_.off(I.UnDragRightGesture,"dragend",C),I.UnDragRightGesture=null)}),I.currentMonthIndex=I.currentMonthIndex+y,0==t)if(1==h){var A=I.currentMonthIndex-1;0>A&&(A=I.monthList.length+A),I.currentMonthIndex<0&&(I.currentMonthIndex=I.monthList.length+I.currentMonthIndex),I.currentMonthList[0]=I.monthList[I.currentMonthIndex],I.currentMonthList[1]=I.currentMonthList[1],I.currentMonthList[2]=I.monthList[A]}else{var b=I.currentMonthIndex+1;b>I.monthList.length-1&&(b-=I.monthList.length),I.currentMonthIndex>I.monthList.length-1&&(I.currentMonthIndex=I.currentMonthIndex-I.monthList.length),I.currentMonthList[0]=I.monthList[I.currentMonthIndex],I.currentMonthList[1]=I.monthList[b],I.currentMonthList[2]=I.currentMonthList[2]}else if(1==t)if(h>t){var A=I.currentMonthIndex-1;0>A&&(A=I.monthList.length+A),I.currentMonthIndex<0&&(I.currentMonthIndex=I.monthList.length+I.currentMonthIndex),I.currentMonthList[0]=I.monthList[A],I.currentMonthList[1]=I.monthList[I.currentMonthIndex],I.currentMonthList[2]=I.currentMonthList[2]}else{var b=I.currentMonthIndex+1;b>I.monthList.length-1&&(b-=I.monthList.length),I.currentMonthIndex>I.monthList.length-1&&(I.currentMonthIndex=I.currentMonthIndex-I.monthList.length),I.currentMonthList[0]=I.currentMonthList[0],I.currentMonthList[1]=I.monthList[I.currentMonthIndex],I.currentMonthList[2]=I.monthList[b]}else if(0==h){var A=I.currentMonthIndex-1;0>A&&(A=I.monthList.length+A),I.currentMonthIndex<0&&(I.currentMonthIndex=I.monthList.length+I.currentMonthIndex),I.currentMonthList[0]=I.currentMonthList[0],I.currentMonthList[1]=I.monthList[A],I.currentMonthList[2]=I.monthList[I.currentMonthIndex]}else{var b=I.currentMonthIndex+1;b>I.monthList.length-1&&(b-=I.monthList.length),I.currentMonthIndex>I.monthList.length-1&&(I.currentMonthIndex=I.currentMonthIndex-I.monthList.length),I.currentMonthList[0]=I.monthList[b],I.currentMonthList[1]=I.currentMonthList[1],I.currentMonthList[2]=I.monthList[I.currentMonthIndex]}a(function(){var e=k("assertcalendarDelegateHandle"+t);e&&e.resize(),e&&e.scrollTop(!0),r.update()})}}else I.showLoading=!1,g.dimStatusBarBackground(!1),a(function(){r.disableSlideDir(1);var e="#assertcalendarDelegateHandle"+t;I.UnDragRightElement=angular.element(document.querySelector(e)),I.UnDragRightGesture=_.on("dragend",C,I.UnDragRightElement)})},function(t){I.showLoading=!1,g.dimStatusBarBackground(!1),a(function(){r.disableSlideDir(1)}),tracelog("获取资产分布数据信息失败, 原因："+t.ret_msg)})}else{if(I.currentMonthList[t].monthFirstDate.getFullYear()===I.minDate.getFullYear()&&I.currentMonthList[t].monthFirstDate.getMonth()===I.minDate.getMonth())I.currentMonthIndex=I.currentMonthIndex-1,r.disableSlideDir(1),a(function(){r.disableSlideDir(1);var e="#assertcalendarDelegateHandle"+t;I.UnDragRightElement=angular.element(document.querySelector(e)),I.UnDragRightGesture=_.on("dragend",C,I.UnDragRightElement)});else if(S.getYYYYMMDDStringByDate(I.currentMonthList[t].monthFirstDate)==S.getYYYYMMDDStringByDate(I.monthList[I.monthList.length-1].monthFirstDate))r.disableSlideDir(2),a(function(){var e="#assertcalendarDelegateHandle"+t;I.UnDragLeftElement=angular.element(document.querySelector(e)),I.UnDragLeftGesture=_.on("dragend",A,I.UnDragLeftElement)}),I.currentMonthIndex=I.monthList.length-1;else if(r.disableSlideDir(0),I.UnDragLeftGesture&&(_.off(I.UnDragLeftGesture,"dragend",A),I.UnDragLeftGesture=null),I.UnDragRightGesture&&(_.off(I.UnDragRightGesture,"dragend",C),I.UnDragRightGesture=null),0==t)if(1==I.initshowMonthSlideIndex){I.currentMonthIndex=I.currentMonthIndex-1;var d=I.currentMonthIndex-1;0>d&&(d=I.monthList.length+d),I.currentMonthIndex<0&&(I.currentMonthIndex=I.monthList.length+I.currentMonthIndex),I.currentMonthList[0]=I.currentMonthList[0],I.currentMonthList[1]=I.currentMonthList[1],I.currentMonthList[2]=I.monthList[d]}else{I.currentMonthIndex=I.currentMonthIndex+1;var u=I.currentMonthIndex+1;u>I.monthList.length-1&&(u-=I.monthList.length),I.currentMonthIndex>I.monthList.length-1&&(I.currentMonthIndex=I.currentMonthIndex-I.monthList.length),I.currentMonthList[0]=I.currentMonthList[0],I.currentMonthList[1]=I.monthList[u],I.currentMonthList[2]=I.currentMonthList[2]}else if(1==t)if(I.initshowMonthSlideIndex>t){I.currentMonthIndex=I.currentMonthIndex-1;var d=I.currentMonthIndex-1;0>d&&(d=I.monthList.length+d),I.currentMonthIndex<0&&(I.currentMonthIndex=I.monthList.length+I.currentMonthIndex),I.currentMonthList[0]=I.monthList[d],I.currentMonthList[1]=I.currentMonthList[1],I.currentMonthList[2]=I.currentMonthList[2]}else{I.currentMonthIndex=I.currentMonthIndex+1;var u=I.currentMonthIndex+1;u>I.monthList.length-1&&(u-=I.monthList.length),I.currentMonthIndex>I.monthList.length-1&&(I.currentMonthIndex=I.currentMonthIndex-I.monthList.length),I.currentMonthList[0]=I.currentMonthList[0],I.currentMonthList[1]=I.currentMonthList[1],I.currentMonthList[2]=I.monthList[u]}else if(0==I.initshowMonthSlideIndex){I.currentMonthIndex=I.currentMonthIndex-1;var d=I.currentMonthIndex-1;0>d&&(d=I.monthList.length+d),I.currentMonthIndex<0&&(I.currentMonthIndex=I.monthList.length+I.currentMonthIndex),I.currentMonthList[0]=I.currentMonthList[0],I.currentMonthList[1]=I.monthList[d],I.currentMonthList[2]=I.currentMonthList[2]}else{I.currentMonthIndex=I.currentMonthIndex+1;var u=I.currentMonthIndex+1;u>I.monthList.length-1&&(u-=I.monthList.length),I.currentMonthIndex>I.monthList.length-1&&(I.currentMonthIndex=I.currentMonthIndex-I.monthList.length),I.currentMonthList[0]=I.monthList[u],I.currentMonthList[1]=I.currentMonthList[1],I.currentMonthList[2]=I.currentMonthList[2]}I.currentMonthSelected=I.currentMonthList[t].monthFirstDate.getMonth()+1,I.currentMonthSelected<10&&(I.currentMonthSelected="0"+I.currentMonthSelected),I.currentYearSelected=I.currentMonthList[t].monthFirstDate.getFullYear(),a(function(){p();var e=k("assertcalendarDelegateHandle"+t);e&&e.resize(),e&&e.scrollTop(!0),r.update()})}};var k=function(t){return f._instances.filter(function(e){var n="hjdelegatehandle";if(e.$element&&e.$element[0]&&e.$element[0].attributes&&e.$element[0].attributes.getNamedItem(n)&&e.$element[0].attributes.getNamedItem(n).textContent==t){{e.$element[0].attributes[n].nodeValue}return!0}return!1})[0]};t.$on("$destroy",function(){I.UnDragRightGesture&&(_.off(I.UnDragRightGesture,"dragend",C),I.UnDragRightGesture=null),I.UnDragLeftGesture&&(_.off(I.UnDragLeftGesture,"dragend",A),I.UnDragLeftGesture=null)}),t.onHJViewActive=function(){x()},t.onHJViewDisActive=function(){b()};var b=function(){};v.back=function(){Y.go("/asset")},v.onDateClick=function(t){if(!(!t||S.getYYYYMMDDStringByDate(t.day)>I.todayStr||""===t.eventAmount&&S.getYYYYMMDDStringByDate(t.day)<=S.getYYYYMMDDStringByDate(I.maxDate))){var e=S.getYYYYMMDDStringByDate(t.day);if(e<I.open_date)return void S.makeToast("日期不能小于开户日期，请重新选择");var n={};n.currentDate=t.day,Y.setData(n),Y.go("/asset")}},v.onClickEvent=function(t){if(!(!t||S.getYYYYMMDDStringByDate(t.day)>I.todayStr||""===t.eventAmount&&S.getYYYYMMDDStringByDate(t.day)<=S.getYYYYMMDDStringByDate(I.maxDate))){var e=S.getYYYYMMDDStringByDate(t.day);if(e<I.open_date)return void S.makeToast("日期不能小于开户日期，请重新选择");var n={};n.currentDate=t.day,Y.setData(n),Y.go("/asset")}},v.previousMonthAssert=function(){if(I.currentMonthList[I.initshowMonthSlideIndex].monthFirstDate.getFullYear()===I.minDate.getFullYear()&&I.currentMonthList[I.initshowMonthSlideIndex].monthFirstDate.getMonth()===I.minDate.getMonth())return void S.makeToast("已经没有了哦","short");var t=parseInt(I.currentMonthSelected)-1,e=parseInt(I.currentYearSelected);t--,0>t&&(t+=12,e--),I.currentMonthSelected=t+1,I.currentMonthSelected<10&&(I.currentMonthSelected="0"+I.currentMonthSelected),I.currentYearSelected=e,r.previous()},v.nextMonthAssert=function(){var t=parseInt(I.currentMonthSelected)-1,e=parseInt(I.currentYearSelected);t++,t>11&&(t-=12,e++);var n=S.getYYYYMMDDStringByDate(new Date(e,t,1)),a=S.getYYYYMMDDStringByDate(I.monthList[I.monthList.length-1].monthFirstDate);return n>a?void S.makeToast("已经没有了哦","short"):(I.currentMonthSelected=t+1,I.currentYearSelected=e,I.currentMonthSelected<10&&(I.currentMonthSelected="0"+I.currentMonthSelected),r.next(),void 0)},x()}]);app.controller("BindCardVerifyPromptController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","BindNewCardService1","BindCardVerifyPromptService","HelpDetailService",function(e,r,o,a,n,t,i,c,_,C,T,N,E,S,s,A,P,O,v,d,l,u,R,f){var p=r.data={},m=r.func={},k=function(){var e=t.getVerificationCardList();if(e&&!(e.length<=0)&&e[0]){var r=e[0];p.bankName=r.other_bank_name,p.cardNo=r.other_account,p.cardType=r.other_card_type,p.transDate=r.reg_datetime.substr(0,8)}},h=function(){var e=N.getCacheInfo("personalInfo");e&&(p.webankCardNo=e.webank_card_no),k(),i.reportCustomEvent(a.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,a.TRANS_OPEN_ACCOUNT_STATISTIC.ENTER_PAGE_PROMOPT_PAGE)};m.onClickCopyWebankCard=function(){E.copyStrToPasteboard(p.webankCardNo).then(function(){i.makeToast("复制成功","short")},function(){i.makeToast("复制失败，请稍后再试","short")})},m.onClickVerifyUserOtherWay=function(){i.reportCustomEvent(a.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,a.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_USE_OTHER_BANK_CARD_IN_PROMOPT_PAGE),u.goPage(null,null,{operType:"verification"})},m.onClickClose=function(){i.reportCustomEvent(a.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,a.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_CLOSE_IN_PROMOPT_PAGE),R.backPage()},m.onClickTransFAQ=function(){f.goPage("1")},h()}]);app.controller("AccountSettingsController",["$scope","$timeout","$location","GLOBAL_CONSTANT","homeService","essential","utils","cgiService","$RSA","cache","messageService","LoginService","$stateParams","RegisterService","BindInfoService","ManagePasswordService","TransRecordService","WebankCardService","$ionicViewSwitcher","CheckFaceService","AboutService","HJactionMenu","BaseConfigService","LocationService","TransLimit1Service","WebankIntroduceService","PromoCenterService","ProdInfoService","HJactionPop","commonDirectiveService","WePayService","InviteService",function(e,n,t,o,i,a,c,r,s,u,l,g,f,S,d,p,k,C,v,_,T,m,h,A,w,R,P,U,b,B,I,E){function N(){u.getUserStatus()===o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(e.shouldShowRedPoint=function(){return E.getRedPoint()},E.requestInviteWhiteList().then(function(n){1==n.show&&(e.data.showInviteMenu=!0,e.data.inviteAward=n.name)},function(){e.data.showInviteMenu=!1}))}e.data={};e.data.loadConfigCount=0,e.data.inviteAward=void 0,e.data.showInviteMenu=!1,e.register=function(){c.clickButtonReport("mine_openaccount"),S.setCallbackPage("accountSettings","accountSettings"),S.go()},e.login=function(){c.clickButtonReport("mine_login");var e=function(){A.go("/accountSettings",null,null,null,!0)};g.setCallbackPage(e,e),A.go("/login")},e.onClickHead=function(){e.isLogin?(c.clickButtonReport("cebianlan_weikaihu_kaihu"),e.register()):(c.clickButtonReport("cebianlan_denglu"),e.login())},e.onClickCard=function(){c.clickButtonReport("cebianlan_webankcard"),U.requestProdInfo(["001234"]).then(function(){a.resolve()},function(){c.makeToast("产品信息拉取中，请稍后重试","short"),a.reject()}).then(function(){var e=U.getProdInfo("001234");return e?void C.goPage():void c.makeToast("产品信息拉取中，请稍后重试","short")})},e.onClickMessageCenter=function(){c.clickButtonReport("cebianlan_message"),l.goPage()},e.onClickPromoCenter=function(){c.clickButtonReport("promo_go_center"),P.goPage()},e.onClickInvite=function(){c.clickButtonReport("promo_go_invite"),n(function(){E.clearRedPoint()},500),E.goPage()},e.onClickBingdingInfoBtn=function(){c.clickButtonReport("cebianlan_info"),d.goPage()},e.onClickPasswdMngBtn=function(){c.clickButtonReport("cebianlan_password"),p.goPage()},e.onClickWePay=function(){c.clickButtonReport("cebianlan_wepay"),I.setSettingTipFlag("false"),t.path("/wepayDetail")};var O;e.onClickRiskAssessmentBtn=function(){c.clickButtonReport("cebianlan_fengxian"),A.go("/showRiskInfo",null,O||{})},e.onClickLimit=function(){w.goPage()},e.onClickConnect=function(){b.show({oneLineTextLeft:'关注[微众银行]微信公众号<br>小We 24小时为您解答各种问题<br><em style="color: #abc2c1;">或拨打客服热线 400-999-8877</em>',oneButtonText:"我知道了",popClose:function(){}})},e.onClickHelpCenterBtn=function(){c.clickButtonReport("cebianlan_denglu"),A.go("/help")},e.onClickAboutBtn=function(){R.goPage()},e.onClickVersionConfig=function(){c.clickButtonReport("cebianlan_women"),T.goPage()},e.data.showPanel=!1;var y=null;e.logout=function(){c.clickButtonReport("cebianlan_logout"),y=m.show({buttonArr:["确认退出"],cancenText:"取消",clickCallback:function(e){0==e&&L()}})};var L=function(){c.clickButtonReport("mine_logout"),a.logout().then(function(){u.clear(),u.setUserStatus(o.ACCOUNT_STATE.USER_STATE_GUEST);var n={};n.username="",n.picurl="../img/tx@2x.png",n.platform="",n.openid="",n.token="",u.setUserInfo(n),e.personalNameMask="",_.clearAllData(),t.path("/default")},function(){})};e.back=function(){v.nextDirection("forward");var e=u.getUserStatus();if(e&&e!=o.ACCOUNT_STATE.USER_STATE_GUEST&&e!=o.ACCOUNT_STATE.USER_STATE_LOGIN){var n=f.originPage;t.path(n?"/"+n:"/home")}else t.path("/default")},e.$on("$destroy",function(){y&&y()});var M=function(){N(),e.newRecordCount=0,r.promo.findRecords().then(function(n){if(n&&n.ret_data&&n.ret_data.history)for(var t=n.ret_data.history,o=0,i=t.length;i>o;o++)"U"===t[o].read_status&&e.newRecordCount++},function(){e.newRecordCount=0}),e.personalNameMask="",u.getUserInfo()&&(e.nickName=u.getUserInfo().username,e.headImg=u.getUserInfo().picurl||"../img/tx@2x.png");var n={};if(n.headImg=e.headImg?"ok":"error",Statistics.reportEvent("HeadImg",n),u.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_LOGIN)e.isLogin=!0,e.isOpenAccount=!1;else{if(u.getUserStatus()!=o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT)return e.isLogin=!1,void(e.isOpenAccount=!1);e.isLogin=!0,e.isOpenAccount=!0}if(e.isOpenAccount){O=u.getCacheInfo("assessment"),e.accessStr=O?gRiskArr[O.cust_risk_level]:"未评估",e.unreadMessageNum=0,l.getUnreadMessageNum().then(function(n){e.unreadMessageNum=n},function(){e.unreadMessageNum=0});var t=u.getCacheInfo("personalInfo");null!=t&&(e.webankCardNum=t.webank_card_no,e.personalNameMask=t.name),e.isStrong=!1,t&&t.acct_type&&1*t.acct_type==4&&(e.isStrong=!0)}e.canUseWePay=I.canUseWePay(),I.getWePayStatus()==o.WEPAY_STATE.CLOSED?"true"==I.getSettingTipFlag()?(e.wePayStatusStr="",e.showTipDot=!0):(e.wePayStatusStr="未开通",e.showTipDot=!1):(e.wePayStatusStr="",e.showTipDot=!1)};e.onHJViewActive=function(){M()},e.onHJViewDisActive=function(){},M()}]);"use strict";app.controller("PromoCenterController",["$scope","$timeout","GLOBAL_CONSTANT","utils","HJactionPop","cache","LocationService","cgiService","RegisterService","LoginService","PromoCenterService","PromoInviteService","PromoApplyService","PromoRecordService","HJactionLoading",function(o,e,t,n,r,c,i,a,p,l,u,s,d,m){var f=function(){i.go("promo/apply",null,null,{stateStr:["promoCenter"]},!0)},T=function(){i.go("promo/record",null,null,{stateStr:["promoCenter"]},!0)},g=function(){i.go("promo/center",null,null,{stateStr:["accountSettings"]},!0)},_={apply:function(o){1===o&&(l.setCallbackPage(f,g),i.go("/login"))},invite:function(o){1===o&&(l.setCallbackPage(g,g),i.go("/login"))},record:function(o){1===o&&(l.setCallbackPage(T,g),i.go("/login"))}},S={apply:function(o){1===o&&(p.setCallbackPage(f,g),p.go())},invite:function(o){1===o&&(p.setCallbackPage(g,g),p.go())},record:function(o){1===o&&(l.setCallbackPage(T,g),p.go())}},C=function(){r.show({oneLineTextLeft:"第一期邀请码活动已结束，请留意后续活动。",oneButtonText:"确定"})};o.onClickGoToApply=function(){n.clickButtonReport("promo_go_apply"),c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_GUEST?r.show({oneLineTextLeft:"您尚未登录, 需登录后才可以兑换福利",twoButtonText1:"去登录",twoButtonText2:"取消",popClose:_.apply}):c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_LOGIN?r.show({oneLineTextLeft:"您尚未开户, 需开户后才可以兑换福利",twoButtonText1:"去开户",twoButtonText2:"取消",popClose:S.apply}):d.goPage()},o.onClickGoToInvite=function(){n.clickButtonReport("promo_go_invite"),c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_GUEST?r.show({oneLineTextLeft:"您尚未登录, 需登录后才可以分享您的邀请码",twoButtonText1:"去登录",twoButtonText2:"取消",popClose:_.invite}):c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_LOGIN?r.show({oneLineTextLeft:"您尚未开户, 需开户后才可以分享您的邀请码",twoButtonText1:"去开户",twoButtonText2:"取消",popClose:S.invite}):a.promo.isOver().then(function(o){"0"===o.ret_data.ret?s.goPage():C()},function(){C()})},o.onClickGoToRecord=function(){n.clickButtonReport("promo_go_record"),c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_GUEST?r.show({oneLineTextLeft:"您尚未登录, 需登录后才可以查看记录",twoButtonText1:"去登录",twoButtonText2:"取消",popClose:_.record}):c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_LOGIN?r.show({oneLineTextLeft:"您尚未开户, 需开户后才可以查看记录",twoButtonText1:"去开户",twoButtonText2:"取消",popClose:S.record}):m.goPage()},o.back=function(){u.backPage()};var v=function(){c.getUserStatus()===t.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(o.newRecordCount=0,a.promo.findRecords().then(function(e){if(e&&e.ret_data&&e.ret_data.history)for(var t=e.ret_data.history,n=0,r=t.length;r>n;n++)"U"===t[n].read_status&&o.newRecordCount++},function(){o.newRecordCount=0}))};o.onHJViewActive=function(){v()},o.onHJViewDisActive=function(){},v()}]),app.controller("PromoApplyController",["$scope","$timeout","utils","HJactionPop","cgiService","PromoApplyService","PromoApplyResultService",function(o,e,t,n,r,c,i){var a="",p=function(){o.isLoading=!1,o.promo={code:"",valid:!1,desc:""},a=""},l=function(){o.promo.code!==a&&(a=o.promo.code,/^[a-zA-Z0-9_]{4,}$/.test(o.promo.code)?(o.isLoading=!0,r.promo.verifyInviteCode({code:o.promo.code}).then(function(e){o.promo.valid="1"===e.ret_data.ret,o.promo.desc=e.ret_data.desc,o.isLoading=!1},function(){o.promo.valid=!1,o.promo.desc="",o.isLoading=!1})):(o.promo.valid=!1,o.promo.desc=""))};o.verify=function(){e(l,200)},o.onClickApply=function(){t.clickButtonReport("promo_do_apply"),r.promo.applyInviteCode({code:o.promo.code}).then(function(o){i.applyResult(o.ret_data),i.goPage()},function(){t.makeToast("兑换失败，请稍后重试")})},o.back=function(){c.backPage()},o.onHJViewActive=function(){p()},p()}]),app.controller("PromoApplyResultController",["$scope","ProdCommonActionService","essential","PromoApplyResultService",function(o,e,t,n){o.applyResult=n.applyResult(),o.back=function(){n.backPage()},o.nextAction=function(){"1"===o.applyResult.ret?"0"===o.applyResult.action_type&&o.applyResult.prod_code?e.onClickProd(o.applyResult.prod_code):"1"===o.applyResult.action_type&&o.applyResult.action_param?t.openInAppBrowser(o.applyResult.action_param):n.backPage():n.backPage()}}]),app.controller("PromoInviteController",["$scope","utils","cache","cgiService","essential","PromoInviteService",function(o,e,t,n,r,c){n.promo.getInviteCode().then(function(e){o.promo=e.ret_data},function(o){e.makeToast("获取邀请码失败，请稍后重试")}),o.onClickCopy=function(){e.clickButtonReport("promo_do_copy"),r.copyStrToPasteboard(o.promo.code).then(function(){e.makeToast("复制成功")},function(){e.makeToast("复制失败，请稍后重试")})},o.onClickInvite=function(){e.clickButtonReport("promo_do_invite"),r.sharePage(o.promo.title,t.getUserInfo().username+o.promo.content,o.promo.preview,o.promo.target+t.getUserInfo().username)},o.back=function(){c.backPage()}}]),app.controller("PromoRecordController",["$scope","utils","cache","cgiService","essential","PromoRecordService","PromoRecordDetailService",function(o,e,t,n,r,c,i){var a=function(){o.records=[],n.promo.findRecords().then(function(e){e&&e.ret_data&&e.ret_data.history&&(o.records=e.ret_data.history)},function(o){e.makeToast("获取福利记录失败，请稍后重试")}),n.promo.setRecordRead()};o.viewRecord=function(o){n.promo.findRecordByActivityId({activity_id:o}).then(function(o){i.record(o.ret_data),i.goPage()},function(o){e.makeToast("获取福利记录失败，请稍后重试")})},o.back=function(){c.backPage()},o.onHJViewActive=function(){a()},a()}]),app.controller("PromoRecordDetailController",["$scope","ProdCommonActionService","PromoRecordDetailService","LocationService","essential",function(o,e,t,n,r){o.record=t.record(),o.nextAction=function(){"0"===o.record.action_type?o.record.prod_code?e.onClickProd(o.record.prod_code):o.record.action_param&&n.go(o.record.action_param):"1"===o.record.action_type&&o.record.action_param&&r.openInAppBrowser(o.record.action_param)},o.back=function(){t.backPage()}}]);app.controller("UnbindOpenIDController",["$scope","utils","GLOBAL_CONSTANT","homeService","$location","$timeout","cgiService","essential","cache","webankCommonService","UnbindOpenIDService","LoginService","ResetPasswdService","HJactionMenu","HJactionLoading",function(t,e,n,o,i,a,u,l,c,s,r,p,d,g,w){t.isPwdShow=!1,t.sigOnPwdCommit=0,t.headImg=c.getUserInfo().picurl||"../img/tx@2x.pngs";var m=r.getData().weixinQQ;t.plat="qq"==m.plat?"绑定QQ号":"绑定微信号",1*m.status==1?(t.showUnbind=1,t.showText=m.str,t.headImg=m.picurl?m.picurl:"qq"==m.plat?"../img/slice/a-39@2x.png":"../img/slice/a-38@2x.png"):(t.showUnbind=0,t.showText="qq"==m.plat?"绑定QQ号，可以用QQ号登陆，参与话题讨论找到使用微众银行的QQ好友":"绑定微信号，可以用微信号登陆，参与话题讨论找到使用微众银行的微信好友",t.headImg="qq"==m.plat?"../img/slice/a-39@2x.png":"../img/slice/a-38@2x.png"),t.onClickBind=function(){l.logout().then(function(){c.clear(),c.setUserStatus(n.ACCOUNT_STATE.USER_STATE_GUEST);var e={};e.username="",e.picurl="../img/tx@2x.png",e.platform="",e.openid="",e.token="",c.setUserInfo(e),t.personalNameMask="",p.goPage(null,null,{unbindCallBack:f,plat:m.plat})},function(){})};var f=function(){};t.$watch("sigOnPwdCommit",function(e,n){e!==n&&(t.isPwdShow=!1,T())}),t.onClickUnbind=function(){e.clickButtonReport("qq"==m.plat?"info_qq_unbind":"info_wechat_unbind"),t.isPwdShow=!0,t.pwdSubTitle="解绑账号"};var h=null;t.onClickMenu=function(){e.clickButtonReport("qq"==m.plat?"info_qq_more":"info_wechat_more"),h=g.show({buttonArr:["解除绑定"],cancenText:"取消",clickCallback:function(e){0==e&&t.onClickUnbind()}})};var T=function(){var o={};o.user_pwd=t.vm.formData.confirmPassword.RSA,w.show(),u.requestUnbindOpenID(o).then(function(){w.hide(),e.makeToast("解绑成功"),a(function(){l.logout().then(function(){c.clear(),c.setUserStatus(n.ACCOUNT_STATE.USER_STATE_GUEST);var t={};t.username="",t.picurl="../img/tx@2x.png",t.platform="",t.openid="",t.token="",c.setUserInfo(t),i.path("/default")})},1e3)},function(n){w.hide(),s.isRetCodePwd(n.ret_code)?s.isRetCodePwdRetry(n.ret_code)?(t.outValue={},t.outValue.showPop=!0,t.outValue.oneLineTextLeft=n.ret_msg,t.outValue.twoButtonText1="重试",t.outValue.twoButtonText2="忘记密码",t.outValue.popClose=function(e){1==e?t.isPwdShow=!0:2==e&&d.goPage()}):(t.outValue={},t.outValue.showPop=!0,t.outValue.oneLineTextLeft=n.ret_msg,t.outValue.twoButtonText1="取消",t.outValue.twoButtonText2="忘记密码",t.outValue.popClose=function(t){1==t||2==t&&d.goPage()}):e.makeToast("解绑失败","short")})};t.back=function(){r.backPage()}}]);app.controller("IncomeHistoryController",["$scope","cgiService","utils","cache","webankCommonService","GLOBAL_CONSTANT","$location","IncomeHistoryService","$timeout","$ionicScrollDelegate","ProdInfoService",function(e,t,a,o,n,r,c,i,l,s,d){var p=e.data={},m=e.func={},u=s.$getByHandle("myContent"),f=o.getCacheInfo("wealthNew"),g=n.parseRawWealthData_V3(f);p.totalIncome=parseFloat(g.accumulatedTotalIncome)>=0?"+"+parseFloat(g.accumulatedTotalIncome).toFixed(2)+"元":parseFloat(g.accumulatedTotalIncome).toFixed(2)+"元",p.incomeHistory=[];var _=a.getDate(),I=a.getDate();p.itemCls={},p.detailCls={};var y=function(e){var t=null;for(var a in p.incomeHistory)p.incomeHistory[a].date==e&&(t=p.incomeHistory[a]);return null==t&&(t={},t.dayIncome="0.00",t.date=e,t.products=[],t.productsList=[],p.incomeHistory.push(t),p.itemCls[e]="off",p.detailCls[e]="dw"),t},F=function(){if(f&&f.finance_wealth&&f.finance_wealth.fund_cycle)for(var e in f.finance_wealth.fund_cycle){var t=f.finance_wealth.fund_cycle[e],o=d.getProdInfo(t.prod_code);if(o){if(!(!t.avg_cost||t.avg_cost<=0||1!=o.product_type&&3!=o.product_type||0!=o.templet_type)){var n={};n.prodType="BX";var r=parseInt(a.getYYYYMMDDStringByDate(a.getDate()),10),c=parseInt(o.value_date,10),i=a.getDateByYYYYMMDDString(o.value_date);i.setDate(i.getDate()+parseInt(o.life_time)-1);for(var l=parseInt(a.getYYYYMMDDStringByDate(i),10);l>=c&&r>c;){n.prodName=o.on_sale_desc+"("+o.value_date.substr(4,4)+")(预估)";var s=parseFloat(t.avg_cost)*o.income_rate/100/365;n.income=parseFloat(s)>=0?"+"+parseFloat(s).toFixed(2):parseFloat(s).toFixed(2);var m=y(c+"");m&&(m.dayIncome=(parseFloat(m.dayIncome)+parseFloat(s)).toFixed(2),m.products.push(n));var u=a.getDateByYYYYMMDDString(c+"");u.setDate(u.getDate()+1),c=parseInt(a.getYYYYMMDDStringByDate(u),10)}}}else tracelog("估算保险收益明细，缺少产品信息"+t.prod_code)}if(f&&f.finance_wealth&&f.finance_wealth.bank_cycle)for(var e in f.finance_wealth.bank_cycle){var t=f.finance_wealth.bank_cycle[e],o=d.getProdInfo(t.prod_code);if(o){if(!(!t.avg_cost||t.avg_cost<=0||1!=o.product_type&&3!=o.product_type||0!=o.templet_type)){var n={};n.prodType="BX";var r=parseInt(a.getYYYYMMDDStringByDate(a.getDate()),10),c=parseInt(o.value_date,10),i=a.getDateByYYYYMMDDString(o.value_date);i.setDate(i.getDate()+parseInt(o.life_time)-1);for(var l=parseInt(a.getYYYYMMDDStringByDate(i),10);l>=c&&r>c;){n.prodName=o.on_sale_desc+"("+o.value_date.substr(4,4)+")(预估)";var s=parseFloat(t.avg_cost)*o.income_rate/100/365;n.income=parseFloat(s)>=0?"+"+parseFloat(s).toFixed(2):parseFloat(s).toFixed(2);var m=y(c+"");m&&(m.dayIncome=(parseFloat(m.dayIncome)+parseFloat(s)).toFixed(2),m.products.push(n));var u=a.getDateByYYYYMMDDString(c+"");u.setDate(u.getDate()+1),c=parseInt(a.getYYYYMMDDStringByDate(u),10)}}}else tracelog("估算保险收益明细，缺少产品信息"+t.prod_code)}p.incomeHistory.sort(function(e,t){return t.date-e.date})},v=function(){for(var e in p.incomeHistory){var t=p.incomeHistory[e];for(var a in t.products)t.productsList.push(t.products[a])}},D=function(){if(o.getCacheInfo("tPlusOneTotalIncome")){var e=o.getCacheInfo("tPlusOneTotalIncome");return e.length>=1&&(p.totalIncome=(parseFloat(p.totalIncome)+parseFloat(e[0].totalEarnings)).toFixed(2)),void t.requestTPlusOneTotalIncome()}t.requestTPlusOneTotalIncome().then(function(e){tracelog("查询T+1累积收益成功"),e.ret_data&&e.ret_data.length>=1&&(p.totalIncome=(parseFloat(p.totalIncome)+parseFloat(e.ret_data[0].totalEarnings)).toFixed(2))},function(){tracelog("查询T+1累积收益失败")})},Y=function(){if(o.getCacheInfo("InsuranceTotalIncome")){var e=o.getCacheInfo("InsuranceTotalIncome");return e.length>=1&&(p.totalIncome=(parseFloat(p.totalIncome)+parseFloat(e[0].totalEarnings)).toFixed(2)),void t.requestInsuranceTotalIncome()}t.requestInsuranceTotalIncome().then(function(e){tracelog("查询保险累积收益成功"),e.ret_data&&e.ret_data.length>=1&&(p.totalIncome=(parseFloat(p.totalIncome)+parseFloat(e.ret_data[0].totalEarnings)).toFixed(2))},function(){tracelog("查询保险累积收益失败")})},h=function(){if(o.getCacheInfo("StockTotalIncome")){var e=o.getCacheInfo("StockTotalIncome");return e.length>=1&&(p.totalIncome=(parseFloat(p.totalIncome)+parseFloat(e[0].totalEarnings)).toFixed(2)),void t.requestStockTotalIncome()}t.requestStockTotalIncome().then(function(e){tracelog("查询股基累积收益成功"),e.ret_data&&e.ret_data.length>=1&&(p.totalIncome=(parseFloat(p.totalIncome)+parseFloat(e.ret_data[0].totalEarnings)).toFixed(2))},function(){tracelog("查询股基累积收益失败")})},T=function(){F(),h(),Y(),D(),S()},S=function(){_.setDate(_.getDate()-90);var o=a.getYYYYMMDDStringByDate(_),n=a.getYYYYMMDDStringByDate(I);p.showLoading=!0,l(function(){p.showLoading=!1},15e3),t.requestIncomeHistory(o,n).then(function(t){e.data.incomeList=t.ret_data,M()},function(){p.showLoading=!1,a.makeToast(STRING_TABLE.DEFAULT_ERR_DESC)})},M=function(){var t=[];for(var a in e.data.incomeList){var o=e.data.incomeList[a];for(var n in o)t.push(o[n].prod_code)}d.requestProdInfo(t).then(function(){tracelog("查询历史收益触发查询产品信息成功"),p.showLoading=!1,C()},function(){tracelog("查询历史收益触发查询产品信息失败"),p.showLoading=!1,C()})},C=function(){for(var t in e.data.incomeList){var a=y(t),o=e.data.incomeList[t];for(var n in o){var c={};if(c.prodName=o[n].prod_name,o[n].prod_type==r.PROD_TYPE.HJ)c.prodName="",c.prodType="HJ";else if(o[n].prod_type==r.PROD_TYPE.GJ){var i=d.getProdInfo(o[n].prod_code);c.prodName=i?i.on_sale_desc:"理财产品"}else if(o[n].prod_type==r.PROD_TYPE.BX){var l=d.getProdInfo(o[n].prod_code);c.prodName=l?1!=l.product_type&&3!=l.product_type||0!=l.templet_type?1==l.product_type&&2==l.templet_type?l.prod_name:"理财产品":l.on_sale_desc+"("+l.value_date.substr(4,4)+")":"理财产品"}else if(o[n].prod_type==r.PROD_TYPE.TPLUSONE){var s=d.getProdInfo(o[n].prod_code);c.prodName=s?s.prod_name:"理财产品"}if(a.products[c.prodName]){var m=a.products[c.prodName];m.income=parseFloat(m.income)+parseFloat(o[n].income),m.income=parseFloat(m.income)>=0?"+"+parseFloat(m.income).toFixed(2):parseFloat(m.income).toFixed(2)}else c.income=parseFloat(o[n].income),c.income=parseFloat(c.income)>=0?"+"+parseFloat(c.income).toFixed(2):parseFloat(c.income).toFixed(2),a.products[c.prodName]=c;a.dayIncome=parseFloat(a.dayIncome)+parseFloat(o[n].income)}a.dayIncome=parseFloat(a.dayIncome).toFixed(2)}p.incomeHistory.sort(function(e,t){return t.date-e.date}),v()};m.onClickHistoryItem=function(e){p.itemCls[e]="off"==p.itemCls[e]?"on":"off",p.detailCls[e]="dw"==p.detailCls[e]?"up":"dw",l(function(){u.resize()})},m.back=function(){i.backPage()},m.getTotalIncomeFontStyle=function(){return parseFloat(p.totalIncome)<0?"p-c-lgreen":""},T()}]);app.controller("HelpController",["$scope","$location","$stateParams","utils","HJactionMenu","LocationService","HJactionPop",function(t,d,r,i,e,l,n){t.srcData=[{title:"怎样突破额度限制，大额度购买活期+、定期+、短期+或基金？",goIndex:1,goStr:"查看怎样从他行转账到微众卡",detail:"<p>您可以通过全国1600余家银行的柜台或网银大额度转账到微众卡，再通过微众卡大额度购买活期+、定期+、短期+或基金。</p>"},{title:"怎样从他行转账到微众卡？",goIndex:0,goStr:"查看如何大额度购买理财产品",noBackHistory:!0,detail:'<h3>1、通过全国1600余家银行柜台进行转账</h3>            <p>转账时，请准确填写微众卡号（在首页点击左上角头像可查看）并选择开户行：深圳前海微众银行。</p>            <h3 class="mgt20">2、通过网上银行转账</h3>            <table class="p-fz-14"><thead><tr><th>银行</th><th>实时转账</th><th>普通转账</th></tr></thead>            <tbody>            <tr><td>招商银行</td><td>在“跨行转账-实时”中，直接选择字母S栏“深圳前海微众银行”，资金实时到账。</td><td>在“跨行转账-普通/快速”中，选择“广东-深圳”，选择“深圳前海微众银行”。</td></tr><tr><td>工商银行</td><td>在“转账汇款-境内汇款”中，选择“民营银行-实时”，默认为“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-境内汇款”中，选择“民营银行-普通-深圳-深圳”，选择“深圳前海微众银行”。</td></tr><tr><td>农业银行</td><td></td><td>在“单笔转账”中，新增收款方，选择“民营银行-深圳-深圳”，选择“深圳前海微众银行”。</td></tr><tr><td>中国银行</td><td>在“实时转账”中，直接在S栏列表选择“深圳前海微众银行”，资金实时到账。</td><td>在“普通转账-其他银行”中，输入关键字“微众”，可以查找到“深圳前海微众银行”。</td></tr><tr><td>建设银行</td><td>在“转账汇款-跨行转账-建行转他行（加急）”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-跨行转账-建行转他行”中，选择“民营银行-广东-深圳”直接选择“深圳前海微众银行”。</td></tr><tr><td>交通银行</td><td>在“我要转账-快速汇款-民营银行”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“我要转账-普通汇款”中，选择“民营银行-广东-深圳”，直接选择“深圳前海微众银行”。</td></tr><tr><td>邮储银行</td><td>在“跨行汇款-实时”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“跨行汇款-普通”中，直接选择“深圳前海微众银行”。</td></tr><tr><td>平安银行</td><td>在“汇款转账-跨行实时转账”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“汇款转账-跨行转账”中，选择“广东-深圳-民营银行”，直接选择“深圳前海微众银行”。</td></tr><tr><td>中信银行</td><td>在“转账支付-跨行转账-网银互联”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“转账支付-跨行转账-小额转账、大额转账”中，选择“广东-深圳-民营银行”，输入关键字“微众”，可以查找到 “深圳前海微众银行”。</td></tr><tr><td>光大银行</td><td>在“转账汇款-向他行汇款”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-向他行汇款”中，选择“深圳前海微众银行”，输入开户网点“微众”，可以查找到“深圳前海微众银行” 。</td></tr><tr><td>华夏银行</td><td>在 “跨行汇款-实时到账”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“跨行汇款-一个工作日到账/快速到账”中，直接选择“深圳前海微众银行”。</td></tr><tr><td>民生银行</td><td>在“跨行转账-网银互联”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“跨行转账-小额实时支付和大额实时支付”中，选择 “民营银行-深圳市”，直接选择“深圳前海微众银行”。</td></tr><tr><td>广发银行</td><td>在“一站式转账-实时转账”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“一站式转账-普通转账”中，选择“深圳前海微众银行-广东-深圳”，直接选择“深圳前海微众银行”。</td></tr><tr><td>兴业银行</td><td>在“实时跨行-其他银行-民营银行”中，选择“深圳前海微众银行”，资金实时到账。</td><td>在“普通跨行-根据关键字查银行”中，选择“广东-深圳”，输入关键字“微众”，可以查找到“深圳前海微众银行”。</td></tr><tr><td>浦发银行</td><td>在“转账汇款-汇到其他银行-立即汇款-实时汇款-民营银行”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-汇到其他银行-立即汇款-普通汇款”中，选择“广东-深圳-民营银行”，直接选择“深圳前海微众银行”。</td></tr><tr><td>北京银行</td><td>在“快速汇款-民营银行”中，选择“深圳前海微众银行”，资金实时到账。</td><td></td></tr><tr><td>宁波银行</td><td>在“转账汇款-小额速汇”中，输入关键字“微众”，可以查找到“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-跨行转账”中，选择“广东省-深圳-所有银行”，输入关键字“微众”，可以查找到“深圳前海微众银行”。</td></tr><tr><td>杭州银行</td><td>在“转账汇款-网银互联汇款”中，选择“民营银行”，直接选择 “深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-一站式跨行汇款”中，选择“民营银行”，可以查找到“深圳前海微众银行”。</td></tr><tr><td>上海银行</td><td>在“转账汇款-向他行快速转账”中，选择“民营银行”，系统自动判断显示“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-向他行转账-向深圳地区收款人转账”中，直接选择“深圳前海微众银行”。</td></tr><tr><td>包商银行</td><td>在“转账汇款-跨行转账-实时”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td></td></tr><tr><td>江苏银行</td><td>在“转账汇款-跨行转账-我行转他行-实时”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“转账汇款-跨行转账-我行转他行-快速/普通-请输入查找”中，直接输入关键字“微众”（无需输入省、市、银行），可以搜索到“深圳前海微众银行”。</td></tr><tr><td>东莞银行</td><td>在“跨行转账-普通转账”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td>在“跨行转账-普通转账”中，选择“其他银行-广东-深圳”，输入关键字“微众”，可以查找到“深圳前海微众银行”。</td></tr><tr><td>广东南粤银行</td><td>在“转账方式-实时”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td></td></tr><tr><td>广州银行</td><td>在“转账汇款-跨行转账-实时跨行转账”中，输入关键字“微众”，可以查找到“深圳前海微众银行”，资金实时到账。</td><td></td></tr><tr><td>浙商银行</td><td>在“转账汇款-小额速汇”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td></td></tr><tr><td>深圳农村商业银行</td><td>在“跨行转账-实时”中，直接选择“深圳前海微众银行”，资金实时到账。</td><td></td></tr>            </tbody></table>'},{title:"开户失败和绑卡失败了，我该怎么办？",detail:"<p>姓名和身份证号码不符，请再次核对并输入；如果仍不成功，可能是您身份证和户口本上的信息不一致，或者是近期户口迁移导致，请联系户口所在地的公安局。<br><br>                如以上身份信息无误，请确保：<br>1、绑定的银行卡为微众银行的合作行；<br>2、手机号码是该银行卡的柜台预留手机号；<br>3、使用的银行卡已经开通网银或银联在线支付功能。<br><br>若上述步骤不能得到解决，请联系客服400-999-8877。</p>"},{title:"人脸验证通不过，我该怎么办？",detail:"<p>可尝试通过以下方式提高：<br>        1、跟读数字时适当提高音量<br>        2、确保是本人进行刷脸操作<br>        3、摘掉眼镜、露出耳朵<br>        4、保持光线充足和均匀<br>        5、选择安静的环境<br>        若上述步骤不能得到解决，请联系客服400-999-8877。</p>"},{title:"“活期+”、“定期+”、“短期+”等产品是否为微众银行提供？",detail:"<p>“活期+”、“定期+”、“短期+”等产品为微众银行代销或直销合作金融机构的产品，不是微众银行自主创设的理财产品，也不是存款产品。</p>"},{title:"你们银行有什么安全保障的措施吗，比如密保，U盾之类的？",detail:"<p>您好，我行有着非常健全完善的风险控制系统，同时APP端也会有密码保护，这些都可以有效为您的资金提供安全保证，同时我行的人脸识别技术也有独特的安全保护，您可以放心使用！</p>"},{title:"怎样绑定和解除银行卡？",detail:"<p>在“转账”一栏中的管理银行卡旁点击添加银行卡，即可按照提示引导添加银行卡。<br><br>                点击银行卡查看详情时，点击右上方…，按照指引即可解除绑定银行卡。</p>"},{title:"密码错误次数过多，帐号被锁定，我该怎么办？",detail:"<p>为保证您的帐号安全，不被他人冒用，当您的密码输入次数过多，导致帐号被锁定时，您需要等到次日帐号解锁后才可以继续使用。</p>"},{title:"忘记交易密码了，我该怎么办？",detail:"<p>在要求您输入交易密码的页面，选择“忘记密码”，然后按照指引输入您的个人信息，验证您的身份，即可重置您的交易密码。</p>"},{title:"为什么会提示我超出了银行卡限额？",detail:"<p>您的银行卡发卡行会对您的银行卡单日支出和单笔支出金额设置上限，每家银行和每位用户个人的设置不同，导致上限不一样，如需咨询或者调整，请致电您的发卡银行客服电话。</p>"},{title:"什么是七日年化收益率？",detail:"<p>微众银行“活期+”目前属于日日复利：<br>                7日年化收益率，是货币基金以最近7天的收益而折算成的一个年化的收益率，复利计算公式为：7日年化收益率＝{[π（1+∑Ri/10000）-1]^365/7}×100% π表示连乘 i=1…..7 （其中：Ri为最近第i自然日（包括计算当日，i=1,2……7）的每万份收益，7 日年化收益率采取四舍五入方式保留小数点后三位。），它是一个年化了的收益指标，可以大概估算出货币基金的年收益率。</p>"},{title:"怎样查询我的账户的交易流水？",detail:"<p>在微众银行App左上角点击头像进入个人中心，点击交易记录一栏，可查看您的所有交易流水。</p>"},{title:"对我的交易流水有疑问，怎样可以核实？",detail:"<p>对您的交易流水有疑问，可以致电客服了解详细信息，客服电话400-999-8877。</p>"},{title:"计划能保证一定成功执行吗？失败了怎么办？",detail:"<p>计划的执行可能会失败，比如您设置考虑每月从货币基金中赎回2000元到您绑定的一张银行卡，但当计划到期时，您购买的货币基金不足2000元，则可能导致计划失败。<br><br>                若计划执行失败后，您可以手动进行交易操作。计划还是一样存在的（每月一次）。</p>"},{title:"怎样修改我绑定的手机号码？",detail:"<p>点击首页左上角进入个人中心，再点击个人信息的手机号一栏，按照指引即可修改绑定的手机号码。</p>"},{title:"只能使用QQ或者微信登录吗，是否可以使用其他方式登录？",detail:"<p>目前微众银行只提供QQ或者微信登录，当您忘记您的登录帐号时，可以在登录界面点击底部的“无法登录”，按照要求输入您的帐户信息之后，即可验证交易密码登录。</p>"},{title:"忘记手势密码了，我该怎么办？",detail:"<p>在输入手势密码的页面，选择“忘记手势密码”，验证完交易密码后将会重新设置手势密码。</p>"}];var o=r.index;void 0!=o&&(t.detail=t.srcData[o]),t.onBindDetailItem=function(d){return t.srcData[d]?t.srcData[d].title:""},t.onClickDetailItem=function(d,r){t.srcData[d]&&(r?l.go("/helpDetail/"+d):l.go("/helpDetail/"+d,null,null,{backNum:1}))},t.onClickItem=function(t){i.clickButtonReport("help_"+t),l.go("/helpDetail/"+t)},t.onClickPhone=function(){navigator.callphone.call(function(){},function(){},4009998877)};var a=null;t.onClickConnect=function(){a=e.show({buttonArr:["微信客服","拨打客服热线400-999-8877"],cancenText:"取消",clickCallback:function(d){var r=[t.onClickWX,t.onClickPhone][d];r&&r()}})},t.onClickWX=function(){n.show({oneLineTextLeft:"关注[微众银行]微信公众号<br>小We 24小时为您解答各种问题",oneButtonText:"我知道了",popClose:function(){}})},t.ifPhone=!0,t.back=function(){l.backPage()},t.$on("$destroy",function(){a&&a()}),t.data={},t.data.clickCount=0,t.onHJViewActive=function(){},t.onHJViewDisActive=function(){}}]);app.controller("AgreementController1",["$scope","LocationService",function(e,o){e.onClick3=function(){o.go("/agreementDetail3")},e.onClick4=function(){o.go("/agreementDetail4")},e.back=function(){o.backPage()}}]),app.controller("AgreementController2",["$scope","LocationService",function(e,o){e.back=function(){o.backPage()}}]),app.controller("AgreementController3",["$scope","LocationService",function(e,o){e.back=function(){o.backPage()}}]),app.controller("AgreementController4",["$scope","LocationService",function(e,o){e.back=function(){o.backPage()}}]);app.controller("InfoPhoneController",["$scope","cgiService","utils","InfoResetPhoneService","cache","$rootScope","webankCommonService","InfoPhoneService","CheckFaceService","ResetPasswdService",function(e,o,n,c,i,r,t,a){e.onClickChange=function(){n.clickButtonReport("info_phone_unbind"),c.goPage()};var h=i.getCacheInfo("personalInfo");h&&(e.showText=h.phone_no),e.back=function(){a.backPage()}}]);app.controller("InfoResetPhoneController",["$scope","cgiService","utils","$timeout","$location","cache","$rootScope","InfoResetPhoneService","essential","GLOBAL_CONSTANT","$MD5",function(e,t,a,n,r,o,i,u,d,c,s){var m=1,h=!0;e.data={},e.showStep=function(e){return m==e};var p=null;u.getData()&&u.getData().pwd&&(p=u.getData().pwd);var f=u.getData(),N="";f&&f.faceId&&(N=f.faceId,u.setData(null),m=2,h=!0);var g="",C="",l=o.getCacheInfo("personalInfo");l&&(g=l.phone_no,C=l.phone_no_encrypt),e.classNextBtn=function(){return h?"btn-c off":"btn-c"},e.onClickNext=function(){if(1==m){if(!a.isValidName(e.data.regName))return;if(!a.isValidIDCardNumber(e.data.regIDCard))return;var n={personal_name:e.data.regName,personal_identify_no:e.data.regIDCard.toUpperCase()};t.requestUserinfoCheck(n).then(function(){m++,h=!0},function(){a.makeToast("该身份与账户身份不符，请重新填写","short"),h=!0})}else if(2==m){if(!a.isValidPhoneOtpNumber(e.data.regPhoneCheckNumber))return;var r=s(e.data.phoneNumber);if(C&&C==r)return void a.makeToast("与原手机号一样，请重新输入","short");var n={};N?(n.face_id=N,n.phone_no=e.data.phoneNumber,n.phone_check_num=e.data.regPhoneCheckNumber):(n.personal_name=e.data.regName,n.personal_identify_no=e.data.regIDCard.toUpperCase(),n.phone_no=e.data.phoneNumber,n.phone_check_num=e.data.regPhoneCheckNumber,n.user_pwd=p),t.requestModifyPhone(n).then(function(){a.makeToast("绑定手机号成功","short"),t.requestPersonalInfo(),u.backPage(3)},function(e){a.makeToast(e.ret_msg,"short")})}},e.showTitle=function(){return["","验证身份","绑定新手机号"][m]},e.changeName=function(){if(e.inputNameTipsContent="",h=!0,e.data.regName&&""!=e.data.regName){var t=a.isValidNameInput(e.data.regName);"fail"==t?e.inputNameTipsContent="请输入真实姓名":"finish"==t&&b()}},e.changeIDCard=function(){if(e.inputIDCardTipsContent="",h=!0,e.data.regIDCard&&""!=e.data.regIDCard){var t=a.isValidIDCardInput(e.data.regIDCard);"fail"==t?e.inputIDCardTipsContent="身份证号不正确，快检查检查":"finish"==t&&(a.isValidIDCardNumber(e.data.regIDCard)?b():e.inputIDCardTipsContent="身份证号不正确，快检查检查")}},e.changePhone=function(){if(e.inputPhoneTipsContent="",h=!0,e.data.phoneNumber&&""!=e.data.phoneNumber){var t=a.isValidPhoneInput(e.data.phoneNumber);"fail"==t?e.inputPhoneTipsContent="请使用真实电话，方便接收正确验证码":"finish"==t&&b()}},e.changeOtp=function(){if(e.inputOtpTipsContent="",h=!0,e.data.regPhoneCheckNumber&&""!=e.data.regPhoneCheckNumber){var t=a.isValidPhoneOtpInput(e.data.regPhoneCheckNumber);"fail"==t?e.inputOtpTipsContent="验证码不正确":"finish"==t&&b()}},e.checkTimeoutButton=!0,e.onGetOTP=function(){if(!T){if(!a.isValidPhoneNumber(e.data.phoneNumber))return void a.makeToast(STRING_TABLE.INVALID_PHONE_NO);d.readSMSVerifyCode().then(function(t){e.data.regPhoneCheckNumber||(e.data.regPhoneCheckNumber=t.smsCode,b())});var r={};r.phone_no=e.data.phoneNumber,r.usage_id=c.OPT_TYPE.BIND_NEW_PHONE,T=!0,t.requestRegisterOTP(r).then(function(){e.checkTimeoutButton=!1,e.checkNumTimeout=60,document.addEventListener("pause",o,!1),document.addEventListener("resume",i,!1),u(),T=!1},function(e){a.makeToast(e.ret_msg),T=!1});var o=function(){var t=a.getDate();e.pausetime=t.getTime()},i=function(){var t=a.getDate();e.resumetime=t.getTime(),e.pausetime&&(e.checkNumTimeout-=Math.round((e.resumetime-e.pausetime)/1e3),e.checkNumTimeout<0&&(e.checkNumTimeout=0),e.pausetime=0)},u=function(){return e.checkNumTimeout-=1,e.checkNumTimeout<=0?(e.checkTimeoutButton=!0,document.removeEventListener("pause",o,!1),void document.removeEventListener("resume",i,!1)):void n(function(){u()},1e3)}}};var T=!1;e.classOtpBtn=function(){return T?"register-yz-btn off":"register-yz-btn"};var b=function(){1==m?a.isValidName(e.data.regName)&&a.isValidIDCardNumber(e.data.regIDCard)&&(h=!1):2==m&&a.isValidPhoneNumber(e.data.phoneNumber)&&a.isValidPhoneOtpNumber(e.data.regPhoneCheckNumber)&&(h=!1)};e.back=function(){u.backPage()}}]);app.controller("BindInfoController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","cgiService","cache","essential","UnbindOpenIDService","ChangePasswdService","webankCommonService","InfoPhoneService","BindInfoService",function(i,n,e,o,t,c,r,u,s,a,Q,f,w){var p;i.weixinQQ={weixin:{plat:"weixin",status:0,str:"",picurl:"",uid:""},qq:{plat:"qq",status:0,str:"",picurl:"",uid:""}},i.showWeixin=function(){return"weixin"==p?!0:!1},i.showQQ=function(){return"qq"==p?!0:!1},i.onClickBindAccount=function(n){t.clickButtonReport("qq"==n?"info_qq":"info_wechat"),i.weixinQQ[n]&&s.goPage("","",{weixinQQ:i.weixinQQ[n]})},i.onClickPhone=function(){t.clickButtonReport("info_phone"),f.goPage()},i.onHJViewActive=function(){l()},i.onHJViewDisActive=function(){},i.back=function(){w.backPage()};var l=function(){p=r.getUserInfo().platform,i.weixinQQ[p]&&(i.weixinQQ[p].status=1,i.weixinQQ[p].str=r.getUserInfo().username,i.weixinQQ[p].picurl=r.getUserInfo().picurl||"../img/tx@2x.png",i.weixinQQ[p].token=r.getUserInfo().token,i.weixinQQ[p].uid=r.getUserInfo().openid),c.requestQueryRegUids().then(function(n){n&&$.each(n,function(n,e){i.weixinQQ[e.uid_type]&&(i.weixinQQ[e.uid_type].uid=e.uid,i.weixinQQ[e.uid_type].status=1)})},function(){}),i.isInReview=!1,-1!=navigator.userAgent.indexOf("iPhone")&&(i.isInReview=isTelePhoneLogin),i.bindPhoneNumber="";var n=r.getCacheInfo("personalInfo");if(n){var e=n.phone_no;i.bindPhoneNumber=e}};l()}]);app.controller("ManagePasswordController",["$scope","$location","utils","cgiService","ChangePasswdService","webankCommonService","ResetPasswdService","ManagePasswordService","cache","HandPasswordService","essential","GLOBAL_CONSTANT","$timeout","localStorage","HJactionMenu",function(e,t,o,a,n,s,i,c,u,r,d,w,l,P,S){const g="CLICK_HANDPASSRESET",_="CLICK_AYPASSRESET";var f="",A="";e.data={},e.isPwdShow=!1,e.onClickPasswdMngBtn=function(){o.clickButtonReport("password_change"),e.pwdSubTitle="修改交易密码",e.isPwdShow=!0,f=_},e.securityScan=1==P.loadDataByUser(w.SECURITY_SCAN.ENABLE_KEY);var T=function(){e.data.showLoading=!0;var t={};t.user_old_pwd=e.vm.formData.confirmPassword.RSA,t.user_pwd=t.user_old_pwd,a.requestVerifyPassword(t).then(function(t){e.data.showLoading=!1,A=t.ret_data.session_id,f==g?APP_ABILITY&&APP_ABILITY.indexOf(w.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0?r.startSettingHandPassword(p):r.goPage(r.getSettingHandPara(A)):n.goPage(null,null,{sessionID:t.ret_data.session_id,oldPasswordMD5:e.vm.formData.confirmPassword.MD5})},function(t){e.data.showLoading=!1,s.isRetCodePwd(t.ret_code)?s.isRetCodePwdRetry(t.ret_code)?(e.outValue={},e.outValue.showPop=!0,e.outValue.oneLineTextLeft=t.ret_msg,e.outValue.twoButtonText1="重试",e.outValue.twoButtonText2="忘记密码",e.outValue.popClose=function(t){1==t?e.isPwdShow=!0:2==t&&i.goPage()}):(e.outValue={},e.outValue.showPop=!0,e.outValue.oneLineTextLeft=t.ret_msg,e.outValue.twoButtonText1="取消",e.outValue.twoButtonText2="忘记密码",e.outValue.popClose=function(e){1==e||2==e&&i.goPage()}):o.makeToast(t.ret_msg)})};e.$watch("sigOnPwdCommit",function(t,o){t!==o&&(e.isPwdShow=!1,T())}),e.onClickPasswdResetBtn=function(){B()},e.onClickHandPasswdResetBtn=function(){o.clickButtonReport("password_gesture"),f=g,e.pwdSubTitle="修改手势密码",e.isPwdShow=!0},e.showSecurityScan=function(){return!o.isiOSDevice()&&o.checkAbility(w.APP_ABILITY.ABILITY_SECURITY_SCAN)},e.onClickSecurityScan=function(){e.securityScan=!e.securityScan,P.saveDataByUser(w.SECURITY_SCAN.ENABLE_KEY,e.securityScan?"1":"0")},e.back=function(){c.backPage()};var p=function(t){l(function(){t&&(e.data.showLoading=!0,C(t,A),A=null)})},C=function(t,n){a.requestUpdateHandPassword(t,n).then(function(){o.makeToast("手势密码设置成功");var a=u.getCacheInfo("personalInfo");a&&a.webank_card_no&&""!=a.webank_card_no&&(a.gesture_password=t);var n=u.getUserInfo(),s=n.openid,i=n.picurl,c=n.username;NativeHandPassBirdge.updateNativeHandPassConfig(t,s,i,c),NativeHandPassBirdge.clearLock(s),e.data.showLoading=!1},function(t){o.makeToast(t.ret_msg),e.data.showLoading=!1})},h=null,B=function(){h=S.show({headText:"您是否忘记密码需要重置",buttonArr:["确认重置"],cancenText:"取消",clickCallback:function(e){0==e&&L()}})},L=function(){o.clickButtonReport("password_reset"),i.goPage()}}]);app.controller("AnnouncementController",["$scope","AnnouncementService","utils","dataService","localStorageService","cache","envService","$timeout","$ionicViewSwitcher","essential",function(e,t,n,c,a,o,i,r,s,l){var u=t.getUnusedData(),d=u&&u.code||!1,f=u&&u.successCallback,b=function(){f?f():t.backPage()};d||b();var p=function(e,t){var n="";return e&&e.length>=8&&(n+=e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2),t&&t.length>=6&&"000000"!=t&&(n+=" "+t.substr(0,2)+":"+t.substr(2,2))),n};e.strHead="产品特殊公告";var v=function(t){if(t&&t.length>0){var n=t[0];e.strTitle=n.notice_title,e.strDesc=n.notice_desc,e.pdfUrl=n.location,e.name=n.app_show_name,e.strDate=p(n.upload_date,n.upload_time)}else b()};c.getBuyNotice({code:d}).then(v,function(){b()},v),e.onClickPdf=function(){l.openPdf(e.pdfUrl,e.name)},e.onClickKnow=function(){f?f():t.backPage()},e.back=function(){t.backPage()}}]);app.controller("BuySignController",["$scope","BuySignService","essential",function(n,o,c){var a=o.getData(),i=a&&a.successCallback,e=a.detail;n.location=e.location,n.name=e.app_show_name,n.onClickSure=function(){i()},n.onClickBack=function(){n.back()},n.onClickURL=function(){c.openPdf(n.location,n.name)},n.back=function(){o.backPage()},i||n.back()}]),app.factory("BuySignService",["$location","commonPath",function(n,o){return $.extend({},o,{locationHash:"/buySign"})}]);app.controller("WebankCardController",["$scope","cache","utils","WebankCardService","TransRecordService","essential","TransferInService","GLOBAL_CONSTANT","CheckFaceService","cgiService","$timeout","LoginService","TransferOutServiceV2","webankCommonService","TransferOutService","BindCardVerifyPromptService","LocationService",function(e,n,t,o,a,c,r,u,i,l,f,C,_,s,A,d,T){e.data={};var k=function(){g(),p(),S()},g=function(){var t=n.getCacheInfo("personalInfo");null!=t&&(e.webankCardNum=t.webank_card_no,e.personalNameMask=t.name);var o=n.getCacheInfo("wealthNew");o&&o.core_account&&(e.webankCardAmount=o.core_account.available_amount)},p=function(){e.data.isNeedActive="2"==n.getCacheInfo("personalInfo").acct_type?!0:!1,e.data.freezAmount=0;var t=n.getCacheInfo("wealthNew");if(t&&t.core_account&&t.core_account.freezing_list)for(var o in t.core_account.freezing_list)"30"==t.core_account.freezing_list[o].freezing_code&&(e.data.freezAmount+=parseFloat(t.core_account.freezing_list[o].amout));e.data.freezAmount=parseFloat(e.data.freezAmount).toFixed(2)},S=function(){s.canUseNewRegAndBandFunc().then(function(){e.data.isNeedVerify=!1},function(){e.data.isNeedVerify=s.doesAccountNeedTransVerificationV2()})},E=function(){var o={};o.face_id=i.getFaceId(u.CHECK_FACE_SCENE_ID.ACTIVE_STRONG_ACCOUT),l.requestActiveAccount(o).then(function(){return tracelog("[dte] WebankCardController.accountActive-->requestActiveAccount-->exchangeWebankToken"),c.exchangeWebankToken()},function(e){return t.makeToast(e.ret_msg,"short"),c.reject()}).then(function(){return n.setUserStatus(u.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),C.getLoginBankData()},function(){return c.reject()}).then(function(){e.data.isNeedActive=!1,g(),f(function(){e.data.outValue={},e.data.outValue.showPop=!0,e.data.outValue.oneLineTextLeft="代发工资账户已可正常使用。",e.data.outValue.oneButtonText="知道了",e.data.outValue.popClose=function(){}},500)})};e.onClickActiveAccount=function(){if(i.isFaceIdValid(u.CHECK_FACE_SCENE_ID.ACTIVE_STRONG_ACCOUT))E(i.getFaceId(u.CHECK_FACE_SCENE_ID.ACTIVE_STRONG_ACCOUT));else{var e=n.getCacheInfo("personalInfo"),o=e&&e.ecif_no?e.ecif_no:"";i.startFaceVerify(u.CHECK_FACE_SCENE_ID.ACTIVE_STRONG_ACCOUT,o).then(function(e){f(function(){t.makeToast("人脸验证通过","short")},500),"2"==n.getCacheInfo("personalInfo").acct_type&&E(e.faceId)})}},e.onClickCopy=function(){t.clickButtonReport("webankcard_copy"),c.copyStrToPasteboard(e.webankCardNum).then(function(){t.makeToast("复制成功","short")},function(){t.makeToast("复制失败，请稍后再试","short")})},e.isHandred=function(){return 1*e.webankCardAmount>=100},e.classStr="xq-con nb mgt20 px";var N=!0;e.onClickItem=function(){N=!N,e.classStr=N?"xq-con nb mgt20 px":"xq-con nb mgt20 px off"},e.nClickQuery=function(){t.clickButtonReport("webankcard_chaxun"),a.goPage(null,null,"deposit")},e.onIfShowOut=function(){return 1*e.webankCardAmount===0?!1:!0},e.onClickTurnOut=function(){t.clickButtonReport("webankcard_zhuanchu"),1*e.webankCardAmount!==0&&(s.isUserStrongAccount()?_.goPage(null,null,{type:u.TRANS_TYPE.WEBANK_CARD}):A.goPage(null,null,{type:u.TRANS_TYPE.WEBANK_CARD}))},e.onClickTurnIn=function(){t.clickButtonReport("webankcard_zhuanru"),r.goPage(null,null,{type:u.TRANS_TYPE.WEBANK_CARD})},e.onClickGoHelp=function(){T.go("/helpDetail/1")},e.back=function(){o.backPage()},e.onClickVerifyAccout=function(){d.goPage()},e.onClickTransferInToCurrentPlus=function(){return t.clickButtonReport("webankcard_zhuanru_huoqijia"),1*e.webankCardAmount===0?!1:void r.goPage(null,null,{type:u.TRANS_TYPE.CURRENT_PLUS,payAccountType:u.ACCOUNT_TYPE.WEBANK_CARD,payAccountFixed:!0})},k(),e.onHJViewActive=function(){k()},e.onHJViewDisActive=function(){}}]);app.controller("WebankIntroduceController",["$scope","envService","utils","dataService","WebankIntroduceService","$ionicBody","$compile","$timeout","LocationService","HJactionMenu","essential","$ionicScrollDelegate","ProdInfoService","webankCommonService","WePayService",function(e,r,a,i,t,o,n,l,s,_,c,m,p,u,f){e.data={},e.insideAgree=["账户服务协议","委托扣款协议","微众银行服务协议","微众银行隐私政策"];var d=m.$getByHandle("myContent");e.payInfo=[],e.monetaryInfo=[],e.insuranceInfo=[],e.stockInfo=[],e.universalInfo=[];var v=function(){e.monetaryInfo=[],e.insuranceInfo=[],e.stockInfo=[],e.universalInfo=[],u.getProductsAgreementsAndUpdate(function(r){e.monetaryInfo=r.monetaryAgreementList||[],e.insuranceInfo=r.insuranceAgreementList||[],e.stockInfo=r.stockAgreementList||[],e.universalInfo=r.universalAgreementList||[]})},C=function(){var r={};r.type="wepay",r.name="消费支付服务协议",e.payInfo=[r]},w=function(){v(),C(),h()},h=function(){var e=0;$(".g_seraph_milestone_list").touchwipe({wipeDown:function(){},wipeUp:function(){},wipeLeft:function(){n()},wipeRight:function(){o()},min_move_x:80,min_move_y:80,preventDefaultEvents:!0});var r=1,a=$(".milestone_list li"),i=$(".milestone_list li").length,t=$(".timeline_list li");$(".milestone_wrap .arrow_left").bind("click",function(){o()}),$(".milestone_wrap .arrow_right").bind("click",function(){n()});var o=function(){if(d.freezeScroll(!0),setTimeout(function(){d&&d.freezeScroll(!1)},300),r>1&&0==e){if($(".milestone_wrap .arrow_right").hasClass("arrow_right_active"));else{$(".milestone_wrap .arrow_left").removeClass("arrow_left_active"),$(".milestone_wrap .arrow_right").removeClass("arrow_right_active");{setTimeout(function(){$(".milestone_wrap .arrow_left").addClass("arrow_left_active"),$(".milestone_wrap .arrow_right").addClass("arrow_right_active")},1)}}e=1,$(a[r-2]).addClass("li_hide_current").removeClass("li_hide"),$(a[r-1]).addClass("li_current_prepare").removeClass("li_prepare_current").removeClass("li_hide_current"),$(t[r-2]).addClass("li_hide_current").removeClass("li_current_hide").removeClass("li_2_to_hide"),$(t[r-1]).addClass("li_current_prepare").removeClass("li_prepare_current").removeClass("li_hide_current"),i-1>=r&&$(t[r]).addClass("li_prepare_to_2").removeClass("li_current_prepare"),r>=3&&$(t[r-3]).addClass("li_2_to_hide").removeClass("li_hide_2");{setTimeout(function(){r--,e=0,1>=r&&$(".milestone_wrap .arrow_left").removeClass("arrow_left_active")},300)}}},n=function(){if(d.freezeScroll(!0),setTimeout(function(){d&&d.freezeScroll(!1)},300),i>r&&0==e){if($(".milestone_wrap .arrow_left").hasClass("arrow_left_active"));else{$(".milestone_wrap .arrow_left").removeClass("arrow_left_active"),$(".milestone_wrap .arrow_right").removeClass("arrow_right_active");{setTimeout(function(){$(".milestone_wrap .arrow_left").addClass("arrow_left_active"),$(".milestone_wrap .arrow_right").addClass("arrow_right_active")},1)}}e=1,$(a[r]).addClass("li_prepare_current"),$(a[r-1]).addClass("li_hide"),$(t[r-1]).addClass("li_current_hide").removeClass("li_current").removeClass("li_prepare_current").removeClass("li_hide_current"),$(t[r]).addClass("li_prepare_current").removeClass("li_prepare").removeClass("li_2_to_prepare").removeClass("li_current_prepare"),$(t[r+1]).addClass("li_2_to_prepare").removeClass("li_prepare_2").removeClass("li_prepare_to_2"),r>=2&&$(t[r-2]).addClass("li_hide_2").removeClass("li_hide").removeClass("li_current_hide").removeClass("li_2_to_hide");{setTimeout(function(){$(a[r]).removeClass("li_current_prepare").removeClass("li_prepare"),$(a[r-1]).removeClass("li_prepare_current").removeClass("li_hide_current"),r++,e=0,r>=i&&$(".milestone_wrap .arrow_right").removeClass("arrow_right_active")},300)}}}};e.onClickProdAgreement=function(e){var r=e.prod_name||"";if(e&&e.agreement_list){var a=e.agreement_list;if(a.length>1){var i=[],t=[];a.sort(function(e,r){return e.show_sort-r.show_sort}),$.each(a,function(e,r){i.push(r.app_show_name),t.push(r.location)}),_.show({headText:r,buttonArr:i,cancenText:"取消",clickCallback:function(e){c.openPdf(t[e],i[e])}})}else 1==a.length&&a[0]&&a[0].location&&c.openPdf(a[0].location,a[0].app_show_name||"")}},e.onClickPayAgreement=function(e){e&&"wepay"==e.type&&f.openAgreement()},e.onClickInsideAgree=function(e){s.go("/agreementDetail"+(e+1))},e.back=function(){t.backPage()},e.onClickAgreement=function(){s.go("/agreementDetail3")},w()}]);app.controller("HomeNoticeController",["$scope","$location","$stateParams","HomeNoticeService","messageService",function(e,t,r,o,a){var i=function(e){var t="";return e=e.toString(),e&&e.length>=16&&(t=e.slice(0,16)),t},c=o.getData();c&&(e.strTitle=c.title||"公告",e.strHead=c.title||"公告",e.strDesc=c.brief||"公告",e.strDate=i(c.create_time),e.onClickKnow=function(){a.reportReadMessage(c.msgid),o.backPage()})}]);app.controller("IncomeArrivalController",["$scope","LocationService","utils","ProdInfoService","localStorage","InsuranceProductDetailService","cgiService","TPlusOneService","essential",function(e,t,o,r,n,c,a,d,u){e.renderData={},e.recommendProduct=null,e.oldProdCode="";var i=null;e.RECOM_PROD_TYPE={CURRENT_PLUS:0,TIME_DEPOSIT:1,STOCK:2,SHORT_PEROID:3};var l=e.RECOM_PROD_TYPE.TIME_DEPOSIT,p=function(){f(function(e,t){s(e,t)}),_()},f=function(o){var n=t.getData()||{};if(n&&n.extra){var c=null;if("string"==typeof n.extra)try{c=JSON.parse(n.extra)}catch(a){}else c=n.extra;if(c&&"earning"==c.type){e.renderData=c;var d=c.prodCode;if(d)if("QL21"==d)l=e.RECOM_PROD_TYPE.SHORT_PEROID;else{var u=r.getProdInfo(d);u?3==u.product_type&&(l=e.RECOM_PROD_TYPE.SHORT_PEROID):r.requestProdInfo([d]).then(function(t){t&&t[d]&&3==t[d].product_type&&(l=e.RECOM_PROD_TYPE.SHORT_PEROID)},function(){})}o(e.renderData.prod_code,e.renderData.earning)}}},s=function(){},m=function(e){a.requestDefaultRecommendInfo().then(function(t){tracelog("查询默认推荐信息成功"),n.saveData("defaultRecommend",t),R(e)},function(){tracelog("查询默认推荐信息失败")})},P=function(e,t){var o=function(){var t,o=n.loadData("financialRecommendV2");if(o&&o.ret_data&&o.ret_data.productTypeList)for(var r in o.ret_data.productTypeList)if(1==o.ret_data.productTypeList[r].productType||3==o.ret_data.productTypeList[r].productType){var c=o.ret_data.productTypeList[r].productList;for(var a in c)c[a].productSubCode==e&&(t=c[a])}return t};if(i)return void t(i);var r=o();return r?void t(r):void(u.isFinancialHomeGray()?a.requestFinancialRecommendInfoWebV2().then(function(e){tracelog("查询理财推荐信息成功web"),n.saveData("financialRecommendV2",e),i=o(),t(i)},function(){tracelog("查询理财推荐信息失败web"),t()}):a.requestFinancialRecommendInfoWeb().then(function(e){tracelog("查询理财推荐信息成功web"),n.saveData("financialRecommend",e),i=o(),t(i)},function(){tracelog("查询理财推荐信息失败web"),t()}))},R=function(e){var t=n.loadData("defaultRecommend"),o=null;if(t&&t.ret_data&&t.ret_data.productTypeList)for(var r in t.ret_data.productTypeList)t.ret_data.productTypeList[r].productType==l&&t.ret_data.productTypeList[r].productList.length>0&&(o=t.ret_data.productTypeList[r].productList[0]);e(o)},_=function(){e.recommendProduct={};var t=function(t){if(t&&t.productSubCode&&t.earningsDesc&&t.earningsRate&&t.productName){var o=function(){P(t.productSubCode,function(t){t?(e.recommendProduct.show=!0,e.recommendProduct.productDesc=t.productDesc,e.recommendProduct.earningsDesc=t.earningsDesc):e.recommendProduct.show=!1}),e.recommendProduct.earningsRate=t.earningsRate,e.recommendProduct.prodName=t.productName,e.recommendProduct.productSubCode=t.productSubCode};e.oldProdCode!=t.productSubCode?(e.oldProdCode=t.productSubCode,r.requestProdInfo([t.productSubCode]).then(function(){o()},function(){e.recommendProduct.show=!1})):o()}};R(t),m(t)};e.onClickMoreProducts=function(){t.go(u.isFinancialHomeGray()?"financialHome":"financialRecommend")},e.onClickRecommendProduct=function(o){var n=r.getProdInfo(o.productSubCode);n?0==n.templet_type?c.goPage(o.productSubCode,null,null,{stateStr:["home","homeNeedRefresh"]}):2==n.templet_type?t.go("/insuranceProductDetails2/"+o.productSubCode,null,null,{stateStr:["home","homeNeedRefresh"]}):1==n.templet_type&&d.goPage(o.productSubCode,null,null,{stateStr:["home","homeNeedRefresh"]}):e.onClickMoreProducts()},e.back=function(){t.backPage()},p()}]);app.controller("TransLimit1Controller",["$scope","TransLimit1Service","TransLimit2Service","cgiService","cache","HJactionLoading",function(i,t,n,a,o,e){var c=function(){m()};i.limitNum=-1;var m=function(){var t=o.getCacheInfo("accountLimit");t&&t.day_limit_maxs_amount?i.limitNum=t.day_limit_maxs_amount/1e4:(e.show(),a.requestUserSettings("LIMIT00008").then(function(t){e.hide(),t&&t.ret_data&&(i.limitNum=t.ret_data.day_limit_maxs_amount/1e4)},function(){e.hide()}))};i.onClassLimit=function(){return i.limitNum>=0?"":"jt"},i.onClickLimitPerDay=function(){i.limitNum>=0&&n.goPage(null,null,{oldLimit:i.limitNum})},i.back=function(){t.backPage()},i.onHJViewActive=function(){c()},i.onHJViewDisActive=function(){},c()}]),app.factory("TransLimit1Service",["$location","commonPath",function(i,t){return $.extend({},t,{locationHash:"/transLimit1"})}]);app.controller("TransLimit2Controller",["$scope","TransLimit1Service","TransLimit2Service","commonDirectiveService","HJactionPop","CheckFaceService","utils","cgiService","essential","HJactionLoading","$timeout","cache","GLOBAL_CONSTANT",function(t,e,a,n,i,o,r,c,s,u,f,l,m){var d=0,T=!0;t.func={},t.data={},t.data.limitPerDay=0,t.data.isAmountTipShown=!1;var h=function(){var e=a.getData();e&&(e.oldLimit&&(d=e.oldLimit,t.data.limitPerDay=d),e.goFace&&(T=!1,t.onClickSure()),a.setData(null)),T&&f(function(){t.func.showKeyboard()},200)},I=function(){n.verifyPassword({pwdSubTitle:"修改转出限额",callback:function(e){var n=o.getFaceId(m.CHECK_FACE_SCENE_ID.MODIFY_TRANSFER_LIMIT)||"";u.show(),c.setUserSetting({type:"LIMIT00008",value:1e4*t.data.limitPerDay,trans_pwd:e,face_id:n}).then(function(){return u.hide(),c.requestUserSettings("LIMIT00008")},function(t){return u.hide(),i.show({oneLineTextLeft:t.ret_msg,oneButtonText:"知道了",popClose:function(){}}),s.reject()}).then(function(){r.makeToast("修改转出限额成功","short"),a.backPage()},function(){})}})};t.changeLimit=function(){var e=parseInt(t.data.limitPerDay,10);t.data.isAmountTipShown=e>9999},t.onClickSure=function(){t.data.limitPerDay&&""!=t.data.limitPerDay?t.data.limitPerDay&&parseInt(t.data.limitPerDay)>9999?(r.makeToast("超出最大可设置限额"),t.func.showKeyboard()):t.data.limitPerDay-d==0?i.show({oneLineTextLeft:"请修改转出限额后，再点确定。",oneButtonText:"知道了",popClose:function(){}}):t.data.limitPerDay-d>0?o.isFaceIdValid(m.CHECK_FACE_SCENE_ID.MODIFY_TRANSFER_LIMIT)?I():i.show({oneLineTextLeft:"亲，您必须通过人脸验证，才可以完成转出限额修改",twoButtonText1:"暂不验证",twoButtonText2:"立即验证",popClose:function(t){if(2==t){var e=l.getCacheInfo("personalInfo"),a=e&&e.ecif_no?e.ecif_no:"";o.startFaceVerify(m.CHECK_FACE_SCENE_ID.MODIFY_TRANSFER_LIMIT,a).then(function(){f(function(){r.makeToast("人脸验证通过","short")},500),I()})}}}):I():(r.makeToast("请输入金额"),t.func.showKeyboard())},t.onTest=function(){return t.str},t.back=function(){a.backPage()},h()}]),app.factory("TransLimit2Service",["$location","commonPath",function(t,e){return $.extend({},e,{locationHash:"/transLimit2"})}]);app.controller("HtmlPieceViewerController",["$scope","$http","envService","$timeout","LocationService","$sce","$stateParams",function(e,t,c,n,o,r,i){var a=e.data={},u=e.func={},l=function(){a.title=i.title,a.url=i.url,s()};u.back=function(){o.backPage()};var s=function(){var e=a.url;e&&(e=decodeURIComponent(e),t.get(r.trustAsResourceUrl(e)).success(function(e){a.sectionHtml=e}))};l()}]);app.controller("NoticeController",["$scope","$location","envService","$timeout","localStorage","GLOBAL_CONSTANT","cache","essential",function(t,e,o,c,n,a,i){t.data={};var N=function(){navigator.splashscreen.hide(),t.data.strHead=gNoticeInfo["notice-head"],t.data.strTitle=gNoticeInfo["notice-title"],t.data.strDesc=gNoticeInfo["notice-desc"],t.data.strButton=gNoticeInfo["notice-button"],t.data.nickName=gNoticeInfo["notice-nickname"]};t.onClickKnow=function(){n.saveData("notice"+gNoticeInfo["notice-id"],"true"),e.path(i.getUserStatus()===a.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?"/home":i.getUserStatus()===a.ACCOUNT_STATE.USER_STATE_LOGIN?"/default":"/default")},N()}]),app.controller("MessageNoticeController",["$scope","$location","cache","GLOBAL_CONSTANT",function(t,e,o,c){t.notice={head:gNoticeInfo["notice-head"],title:gNoticeInfo["notice-title"],date:gNoticeInfo["notice-date"],nickName:gNoticeInfo["notice-nickname"],desc:gNoticeInfo["notice-desc"]},t.back=function(){e.path(o.getUserStatus()===c.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?"/home":"/default")}}]);"use strict";app.controller("InviteController",["$scope","InviteService","envService","essential","utils","cgiService","cache","GLOBAL_CONSTANT","$timeout",function(e,t,r,n,o,i,I,T,u){function a(){E.USER_TYPE=t.USER_TYPE,E.qrErrorCorrection="L",_.qrBestLevel=function(e){return c(E.qrErrorCorrection,e)},_.onClickShare=s,S()}function c(e,t){var r={L:[152,272,440,640,864,1088,1248,1552,1856,2192],M:[128,224,352,512,688,864,992,1232,1456,1728],Q:[104,176,272,384,496,608,704,880,1056,1232],H:[72,128,208,288,368,480,528,688,800,976]},n=8*t.length+4+8,o=0;for(o=0;o<r[e].length;o++)if(r[e][o]>n)return o+1;return o+1}function S(){var r=I.getUserInfo();i.promo.setSocialInfo(r.username,r.picurl).then(function(){t.requestInviteCode().then(function(t){E.userType=t.type,E.awardContent=t.content,E.inviteUrl=t.qr_url,E.bannerImgUrl=t.image_url,e.share={title:t.share_title||"",content:t.share_content||"",preview:t.share_preview||"",target:E.inviteUrl}},function(){u(function(){o.goToErrorPage()},100)})},function(){u(function(){o.goToErrorPage()},100)}),_.showQrDlg=function(){E.showInviteQrDlg=!0,n.dimStatusBarBackground(!0),o.reportCustomEvent(T.INVITE_STATISTIC.MAIN_KEY,T.INVITE_STATISTIC.CLK_SHOW_QR_DLG+E.userType)},_.hideQrDlg=function(){E.showInviteQrDlg=!1,n.dimStatusBarBackground(!1),o.reportCustomEvent(T.INVITE_STATISTIC.MAIN_KEY,T.INVITE_STATISTIC.CLK_CLOSE_QR_DLG+E.userType)}}function s(){n.sharePage(e.share.title,e.share.content,e.share.preview,e.share.target).then(function(){o.reportCustomEvent(T.INVITE_STATISTIC.MAIN_KEY,T.INVITE_STATISTIC.SHARE_SUCCESS+E.userType)},function(){o.reportCustomEvent(T.INVITE_STATISTIC.MAIN_KEY,T.INVITE_STATISTIC.SHARE_FAIL+E.userType)})}e.share={title:"",content:"",preview:"",target:r.getEnvVariable().CGI_PREFIX_S+"web/mgm-invite/index.html"};var E=e.data={},_=e.func={};_.back=function(){o.reportCustomEvent(T.INVITE_STATISTIC.MAIN_KEY,T.INVITE_STATISTIC.CLK_BACK+E.userType),t.backPage()},e.onHJViewActive=a,a()}]);app.controller("FinancialHomeController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$document","$timeout","$stateParams","LoginService","RegisterService","InsuranceProductDetailService","StockProductDetailService","messageService","MonetaryService","webankCommonService","TransRecordService","$ionicViewSwitcher","$interval","FinancialRecommendService","$ionicScrollDelegate","localStorage","HomeNoticeService","BaseConfigService","$sce","envService","$http","LocationService","dataService","ProdInfoService","ProdCommonActionService","AdBannerService","CommonClickFnService","FinancialOrganizationService","$ionicHistory","PromoCenterService","InviteService",function(t,e,i,o,n,r,a,c,s,d,u,l,f,p,_,v,g,T,m,L,A,S,h,P,C,y,D,R,I,N,E,B,w,M,O,k,b,Y){t.allProductObj={},t.allPredictAndSell=[];var F=(S.$getByHandle("financialHomePredict"),function(){n.clickButtonReport("newfinancial_show"),H(),U(),x(),J(),W(),X()}),H=function(){t.status=a.getUserStatus(),t.today=n.getDate(),t.todayString=n.getYYYYMMDDStringByDate(t.today),t.showMsgDot=!1},U=function(){var e=function(){return null==t.midBannerConfig?void(t.sectionHtml=""):(t.sectionHtml=y.trustAsHtml(h.loadData("FinancialBannerHtml")),void R.get(y.trustAsResourceUrl(t.midBannerConfig.url)).success(function(e){h.saveData("FinancialBannerHtml",e),t.sectionHtml=y.trustAsHtml(e)}))},n=function(i){t.midBannerConfig=i,a.setCacheInfo("financialMiddleBanner",i),e()},r=function(){if(!gAdvConfigNew||!gAdvConfigNew.adv_id_2||!gAdvConfigNew.adv_id_2.length)return void n(null);var r=gAdvConfigNew.adv_id_2;if(t.status===i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT)if(r[0].condition){t.midBannerConfig=a.getCacheInfo("financialMiddleBanner"),e();for(var c=[],s=[],d=0,u=r.length;u>d;d++){var l=r[d];l.condition?c.push({id:d,condition:l.condition}):s.push(d)}o.requestCheckADCondition({query_limit_list:c}).then(function(t){for(var e=-1,i=t.ret_data.result_list,o=0,a=i.length;a>o;o++)if("true"===i[o].result){e=parseInt(i[o].id,10);break}if(s.length){var c;c=-1===e?s[0]:s[0]<e?s[0]:e,n(r[c]),w.signalToIndex("adv_id_2",c)}else-1===e?n(null):(n(r[e]),w.signalToIndex("adv_id_2",e))},function(){n(null)})}else n(r[0]);else{for(var f=-1,d=0,u=r.length;u>d;d++){var l=r[d];if(!l.condition){f=d;break}}n(-1===f?null:r[f])}};r(),w.sync().then(function(t){t&&r()},function(){r()})},x=function(){var e=function(){var t=h.loadData("financialRecommendV2");t&&t.ret_data&&t.ret_data.productTypeList&&r(t.ret_data.productTypeList,!1)},n=function(){t.status>i.ACCOUNT_STATE.USER_STATE_GUEST?o.requestFinancialRecommendInfoWebV2().then(function(t){tracelog("查询理财推荐信息成功webV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(a(t.ret_data.productTypeList),h.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败webV2 fail")}):o.requestFinancialRecommendInfoTencentV2().then(function(t){tracelog("查询理财推荐信息成功TencentV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(a(t.ret_data.productTypeList),h.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败TencentV2 fail")})},r=function(e,o){t.allProductObj={},t.allPredictAndSell=[];var n={},r={},a=[],c=[];if(e){for(var d in e)if(e[d].productType==i.DISPLAY_AREA_TYPE.FINANCIAL_HOME)for(var u in e[d].productList){var l=e[d].productList[u];"精选推荐"==l.title&&(l.title="精选产品");var f={title:l.title,list:[]};a.push(f);for(var p in l.codeList)if(n[l.codeList[p]])f.list.push(n[l.codeList[p]]);else{var _={dst:{}};n[l.codeList[p]]=_,f.list.push(_)}}else if(e[d].productType==i.DISPLAY_AREA_TYPE.FINANCIAL_PREDICT)for(var u in e[d].productList){var l=e[d].productList[u],f={title:l.title,list:[]};c.push(f);for(var p in l.codeList)if(r[l.codeList[p]])f.list.push(r[l.codeList[p]]);else{var _={dst:{}};r[l.codeList[p]]=_,f.list.push(_)}}for(var d in e){var v;if(e[d].productType==i.FINANCIAL_PROD_TYPE.FIXED_TIME||e[d].productType==i.FINANCIAL_PROD_TYPE.SHORT_TERM)for(var u in e[d].productList){if(v=e[d].productList[u].productSubCode||e[d].productList[u].productCode,n[v]){e[d].productList[u].productType=e[d].productType,e[d].productList[u].netFlag=o;var g={};O.parseFinancialListData(g,e[d].productList[u],o),n[v].dst=g}r[v]&&(r[v].dst=e[d].productList[u]),(0==e[d].productList[u].saleStatus||1==e[d].productList[u].saleStatus)&&(t.allPredictAndSell.push(e[d].productList[u]),t.allProductObj[v]=e[d].productList[u])}else if(e[d].productType==i.FINANCIAL_PROD_TYPE.MONETARY)for(var u in e[d].productList)e[d].productList[u].tag=e[d].productList[u].tag||["随存随取","0.01元起购"],e[d].productList[u].tagRed=e[d].productList[u].tagRed||[!0],e[d].productList[u].saleStatus="1",e[d].productList[u].productType=e[d].productType,e[d].productList[u].netFlag=o,t.monetaryInfo={},O.parseFinancialListData(t.monetaryInfo,e[d].productList[u],o)}}for(var p=a.length-1;p>=0;p--){var T=a[p];T.showList=[];for(var m in T.list)T.list[m].dst.htmlStr&&T.showList.push(T.list[m].dst);0==T.showList.length&&a.splice(p,1)}t.renderData=a,$(c),s(function(){G()})},a=function(t){if(c=[],t)for(var e in t)if(t[e].productType==i.FINANCIAL_PROD_TYPE.FIXED_TIME||t[e].productType==i.FINANCIAL_PROD_TYPE.SHORT_TERM)for(var o in t[e].productList){var n=t[e].productList[o].productSubCode;n&&!d[n]&&(c.push(n),d[n]=1)}else if(t[e].productType==i.FINANCIAL_PROD_TYPE.MONETARY)for(var o in t[e].productList){var n=t[e].productList[o].productCode;n&&!d[n]&&(c.push(n),d[n]=1)}c.length>0&&E.requestProdInfo(c).then(function(){tracelog("按产品拉取产品信息成功"),r(t,!0),N.requestActivityConfig(c)},function(){tracelog("按产品拉取产品信息失败"),r(t,!0)})},c=[],d={};e(),n()},$=function(e){var o=n.getDate(),r=e[0]&&e[0].list||[],a=[],c=5,s=n.getYYYYMMDDStringByDate(n.getDateDiffToday(1)),d=n.getYYYYMMDDStringByDate(n.getDateDiffToday(2)),u=n.getYYYYMMDDStringByDate(o);t.showPredict=[];for(var l in r)if(r[l].dst&&void 0!=r[l].dst.productName){var f=E.getProdInfo(r[l].dst.productSubCode||r[l].dst.productCode);f&&(f.start_buy_date&&f.start_buy_time&&(r[l].dst._startBuyDate=f.start_buy_date,r[l].dst._startBuyTime=f.start_buy_time),(f.product_type==i.FINANCIAL_PROD_TYPE.FIXED_TIME||f.product_type==i.FINANCIAL_PROD_TYPE.SHORT_TERM)&&(f.templet_type==i.FINANCIAL_TEMPLATE.T_PLUS_ONE||f.templet_type==i.FINANCIAL_TEMPLATE.UNIVERSIAL)&&f.ipostart_date&&f.ipostart_time&&(r[l].dst._startBuyDate=f.ipostart_date,r[l].dst._startBuyTime=f.ipostart_time.substr(0,2)+":"+f.ipostart_time.substr(2,2)+":"+f.ipostart_time.substr(4,2))),a.push(r[l].dst)}t.showPredictPlus=a.length>c;for(var l=0;l<a.length&&c>l;l++){if(a[l]._startBuyDate&&a[l]._startBuyTime){var p="";a[l]._startBuyDate==u?p="今天":a[l]._startBuyDate==s?p="明天":a[l]._startBuyDate==d&&(p="后天"),p?p+=a[l]._startBuyTime.substr(0,5):p=a[l]._startBuyDate.substr(4,2)+"月"+a[l]._startBuyDate.substr(6,2)+"日",p+="开售",a[l].showStr=p}a[l].isMore=!1,t.showPredict.push(a[l])}t.showPredictPlus&&t.showPredict.push({isMore:!0,moreNum:a.length})},G=function(){if(t.showRateStr="",t.showLifeTimeStr="",1==t.allPredictAndSell.length&&"001234"==t.allPredictAndSell[0].productCode)return t.showRateStr=1*t.allPredictAndSell[0].earningsRate+"%起",void(t.showLifeTimeStr="0天起");var e=maxLifeTime=-1/0,i=minLifeTime=1/0;for(var o in t.allProductObj){var n=1*t.allProductObj[o].earningsRate;void 0!=n&&(n>e&&(e=n),i>n&&(i=n));var r=1*t.allProductObj[o].lifeTime;void 0!=r&&(r>maxLifeTime&&(maxLifeTime=r),minLifeTime>r&&(minLifeTime=r))}e!=-1/0&&1/0!=i&&(t.showRateStr=i+"%-"+e+"%"),maxLifeTime!=-1/0&&1/0!=minLifeTime&&(t.showLifeTimeStr=minLifeTime+"-"+maxLifeTime+"天")};t.showMsgDot=!1;var V=function(){t.showMsgDot=t.hasNewNormalMessage||b.getRedPoint()||Y.getRedPoint()},j=function(){_.getRedPoint().then(function(e){t.hasNewNormalMessage=e?!0:!1,V()})},q=function(){_.getTypeMessageList("","red").then(function(t){if(t&&t.red&&t.red.length>0){var e=t.red[0];e.extraObj&&"fuli"===e.extraObj.usage&&b.setRedPoint(),V()}})},J=function(){if(j(),q(),t.status==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){t.isLogin=!0,t.isHasAccount=!0;var e=a.getUserInfo();t.avatarUrl=e.picurl||"../img/tx@2x.png"}else if(t.status==i.ACCOUNT_STATE.USER_STATE_LOGIN){t.isLogin=!0,t.isHasAccount=!1;var e=a.getUserInfo();t.avatarUrl=e.picurl||"../img/tx@2x.png"}else t.isLogin=!1,t.isHasAccount=!1},W=function(){C.getConfig(),o.groupon.querygrouponprodcodelist().then(function(t){h.saveData("groupon_prod_codes",t.ret_data)})},X=function(){var e=h.loadData("investmentGuide");t.showGuide1=!1,t.showGuide2=!1,e||(t.showGuide1=!0)};t.onClickGuide=function(e){t.showGuide2=!1,t.showGuide1=!1,1==e?t.showGuide2=!0:2==e&&h.saveData("investmentGuide",1)},t.onClickPredict=function(t){if(t.isMore)return n.clickButtonReport("newfinancial_predict_click"),void I.go("financialHomeMore/3");var e=t.productSubCode||t.productCode;B.goToProd(e)},t.onClickProduct=function(t){t&&t.productCode&&(n.clickButtonReport("newfinancial_click_"+t.productCode),B.goToProd(t.productCode))},t.onClickAllProduct=function(t){n.clickButtonReport("newfinancial_all_click"),I.go("financialHomeMore/"+t)},t.onClickBanner=function(){if(null!=t.midBannerConfig){var e={CLOSE:-1,APP_JUMP:0,BROWSER_JUMP:1},i=t.midBannerConfig.action;i.action_type==e.APP_JUMP?i.prod_code?E.requestProdInfo([i.prod_code]).then(function(){r.resolve()},function(){n.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var t=E.getProdInfo(i.prod_code);return t?void(i.jump_to_common_page?I.go(i.action_param):B.goToProd(i.prod_code)):void n.makeToast("产品信息拉取中，请稍后重试","short")}):I.go(i.action_param):i.action_type==e.BROWSER_JUMP&&r.openInAppBrowser(i.action_param);var a={};a.clickADBanner="newfinancial",a.id=t.midBannerConfig.id,Statistics.reportEvent("clickADBanner",a);var c={};c.module_id="click_ad_banner",c.data_list=[];var s={};s.id=t.midBannerConfig.id,s.typeName="newfinancialBanner",c.data_list.push(s),o.requestReportToTencentGet(c)}},t.onClickMainTab=function(t){M.mainTabClickFun(t,2)};var z=!1;t.back=function(){z?r.exitAndroidApp():(z=!0,n.makeToast("再按一次退出微众银行","short","bottom"),s(function(){z=!1},2500))},t.onClickSettingsBtn=function(){m.nextDirection("back"),n.clickButtonReport("index_financial"),_.clickRedPoint(),e.path("/accountSettings/financialHome")},t.onClickTransLog=function(){n.clickButtonReport("financial_trans"),T.goPage("","","all")},t.onHJViewActive=function(){F(),n.resetHistory(!0)},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),F(),n.resetHistory()}]);app.controller("FinancialHomeMoreController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$document","$timeout","$stateParams","LoginService","RegisterService","InsuranceProductDetailService","StockProductDetailService","messageService","MonetaryService","webankCommonService","TransRecordService","$ionicViewSwitcher","$interval","FinancialRecommendService","$ionicScrollDelegate","localStorage","HomeNoticeService","BaseConfigService","$sce","envService","$http","LocationService","dataService","ProdInfoService","HJactionLoading","$ionicHistory","ProdCommonActionService","AdBannerService","CommonClickFnService","FinancialOrganizationService",function(e,t,i,n,r,a,c,o,s,u,l,d,p,f,v,A,m,I,T,_,y,C,L,S,M,D,R,g,P,b,E,h,N,x,F,O,k){function w(){e.filterClass=e.subMenuIsActive[0]&&e.subMenuIsActive[1]&&!e.subMenuIsActive[2]?"flex-item filter":"flex-item filter active";for(var t in e.subMenuIsActive)e.subMenuClass[t]="flex-item",e.subMenuIsActive[t]&&(e.subMenuClass[t]+=" active")}var $=[];e.allProductObj={},e.menuClass=["flex-item asc","flex-item"],e.subMenuClass=[],e.subMenuIsActive=[!1,!1,!1,!1],e.currentMenuIndex=0,e.filterClass="flex-item filter active",e.sortClass="asc",e.type=u.type,1==e.type?(e.currentMenuIndex=0,e.showFilter=!1,e.subMenuIsActive[0]=!0,e.subMenuIsActive[1]=!0,w(0)):3==e.type&&(e.currentMenuIndex=0,e.showFilter=!1,e.subMenuIsActive[0]=!0,w(0)),e.menuClass[e.currentMenuIndex]+=" active",w();var Y=C.$getByHandle("myContent"),H=function(){r.clickButtonReport("allfinancial_show"),B(),V()},B=function(){$=[],e.status=c.getUserStatus(),e.predictData=[],e.onSaleData=[],e.sellOutData=[],e.allData=[],e.renderData=[]},V=function(){var t=function(){var e=L.loadData("financialRecommendV2");e&&e.ret_data&&e.ret_data.productTypeList&&a(e.ret_data.productTypeList,!1)},r=function(){e.status>i.ACCOUNT_STATE.USER_STATE_GUEST?n.requestFinancialRecommendInfoWebV2().then(function(e){tracelog("查询理财推荐信息成功web"),e&&e.ret_data&&e.ret_data.productTypeList&&(c(e.ret_data.productTypeList),L.saveData("financialRecommendV2",e))},function(){tracelog("查询理财推荐信息失败web")}):n.requestFinancialRecommendInfoTencentV2().then(function(e){tracelog("查询理财推荐信息成功Tencent"),e&&e.ret_data&&e.ret_data.productTypeList&&(c(e.ret_data.productTypeList),L.saveData("financialRecommendV2",e))},function(){tracelog("查询理财推荐信息失败Tencent")})},a=function(e,t){$=[];var n={};if(e){for(var r in e)if(e[r].productType==i.DISPLAY_AREA_TYPE.FINANCIAL_HOME)for(var a in e[r].productList){var c=e[r].productList[a];if("新手专享"==c.title)for(var o in c.codeList)n[c.codeList[o]]=!0}for(var r in e)if(e[r].productType==i.FINANCIAL_PROD_TYPE.FIXED_TIME||e[r].productType==i.FINANCIAL_PROD_TYPE.MONETARY||e[r].productType==i.FINANCIAL_PROD_TYPE.SHORT_TERM)for(var a in e[r].productList){e[r].productType==i.FINANCIAL_PROD_TYPE.MONETARY&&(e[r].productList[a].productPeroid="随存随取",e[r].productList[a].minAmountDesc="0.01元起购",e[r].productList[a].saleStatus="1");var s={};s.productType=e[r].productType,s.displayIndex=e[r].productList[a].saleStatus,s.earningsRate=e[r].productList[a].earningsRate,s.lifeTime=e[r].productList[a].lifeTime,e[r].productList[a].isNewOwner=n[e[r].productList[a].productSubCode||e[r].productList[a].productCode]?!0:!1,k.parseFinancialMoreListData(s,e[r].productList[a],t),$.push(s)}}U(t)},c=function(e){if(o=[],e)for(var t in e)if(e[t].productType==i.FINANCIAL_PROD_TYPE.FIXED_TIME||e[t].productType==i.FINANCIAL_PROD_TYPE.SHORT_PEROID)for(var n in e[t].productList){var r=e[t].productList[n].productSubCode;r&&!s[r]&&(o.push(r),s[r]=1)}else if(e[t].productType==i.FINANCIAL_PROD_TYPE.MONETARY)for(var n in e[t].productList){var r=e[t].productList[n].productCode;r&&!s[r]&&(o.push(r),s[r]=1)}o.length>0&&E.requestProdInfo(o).then(function(){tracelog("按产品拉取产品信息成功"),a(e,!0)},function(){tracelog("按产品拉取产品信息失败"),a(e,!0)})},o=[],s={};t(),r()},U=function(t){e.displayDataArr=[],e.displayCategory=[];var i=[[],[],[],[]];if(e.showEmpty=!1,e.subMenuIsActive[3])e.displayDataArr=$;else for(var n in $)e.subMenuIsActive[$[n].displayIndex]&&e.displayDataArr.push($[n]);if(0==e.currentMenuIndex){var r,a=["cplus","dplus","","splus"];"desc"==e.sortClass?(e.displayDataArr.sort(function(e,t){return 1*t.lifeTime-1*e.lifeTime}),r=[1,3,0]):(e.displayDataArr.sort(function(e,t){return 1*e.lifeTime-1*t.lifeTime}),r=[0,3,1]);for(var n in e.displayDataArr){var c=e.displayDataArr[n].productType;i[c]&&i[c].push(e.displayDataArr[n])}var o=0;for(var n in r)i[r[n]].length>0&&(o+=i[r[n]].length,e.displayCategory.push({list:i[r[n]],className:a[r[n]]}));t&&0>=o&&(e.showEmpty=!0)}else 1==e.currentMenuIndex&&(e.displayDataArr.sort(function(e,t){return 1*t.earningsRate-1*e.earningsRate}),t&&0==e.displayDataArr.length&&(e.showEmpty=!0));s(function(){Y.resize()},200)},q=function(){return"flex-item "+e.sortClass};e.onClickProduct=function(e){x.goToProd(e.productCode),r.clickButtonReport("allfinancial_click_"+e.productCode)},e.onClickMainMenu=function(t){if(0==t)0==e.currentMenuIndex&&(e.sortClass="desc"==e.sortClass?"asc":"desc"),e.currentMenuIndex=t,e.menuClass[1]="flex-item",e.menuClass[0]=q()+" active",r.clickButtonReport("desc"==e.sortClass?"allfinancial_lifetime_desc_click":"allfinancial_lifetime_asc_click");else if(1==t){if(e.currentMenuIndex==t)return;e.currentMenuIndex=t,e.menuClass[1]="flex-item active",e.menuClass[0]=q(),r.clickButtonReport("allfinancial_rate_click")}else 2==t&&(e.showFilter=!e.showFilter,r.clickButtonReport("allfinancial_filter_click"));U(!0)},e.onClickSubMenu=function(t){e.subMenuIsActive[t]=!e.subMenuIsActive[t],w(t),U(!0)},e.contentStyle=function(){return e.showFilter?{top:"132px"}:{top:"86px"}},e.back=function(){P.backPage()},e.onHJViewActive=function(){H()},e.onHJViewDisActive=function(){},e.$on("$destroy",function(){}),H()}]);app.controller("FinancialRecommendController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$document","$timeout","$stateParams","LoginService","RegisterService","InsuranceProductDetailService","StockProductDetailService","messageService","MonetaryService","webankCommonService","TransRecordService","$ionicViewSwitcher","$interval","FinancialRecommendService","$ionicScrollDelegate","localStorage","HomeNoticeService","BaseConfigService","$sce","envService","$http","LocationService","dataService","ProdInfoService","HJactionLoading","$ionicHistory","ProdCommonActionService","AdBannerService","WePayService","PromoCenterService","CommonClickFnService",function(t,a,e,o,r,n,i,s,c,d,l,u,p,f,g,_,S,v,L,T,m,h,y,C,A,R,w,D,P,k,B,M,I,b,U,E,q,H){var N=t.data={};t.data.showMsgDot=!1;var W=function(){t.data.today=r.getDate(),t.data.todayString=r.getYYYYMMDDStringByDate(t.data.today),t.data.showMore1=!1,t.data.showMore2=!1,t.data.showMore3=!1,A.getConfig(),t.data.onSaleMonetoryList={productList:[]},t.data.onSaleShortList={productList:[]},t.data.onSaleInsurancelList={productList:[]},t.data.onSaleStockList={productList:[]},J(!1),G(),K(),t.data.scrollX=0,x(),j(),$(),U.sync().then(function(t){t&&$()},function(){$()}),aa()},F=function(){return null==N.midBannerConfig?void(t.data.sectionHtml=""):(t.data.sectionHtml=R.trustAsHtml(y.loadData("FinancialBannerHtml")),void D.get(R.trustAsResourceUrl(N.midBannerConfig.url)).success(function(a){y.saveData("FinancialBannerHtml",a),t.data.sectionHtml=R.trustAsHtml(a)}))},O=function(t){N.midBannerConfig=t,i.setCacheInfo("financialMiddleBanner",t),F()},$=function(){if(!gAdvConfigNew||!gAdvConfigNew.adv_id_2||!gAdvConfigNew.adv_id_2.length)return void O(null);var a=gAdvConfigNew.adv_id_2;if(t.data.status===e.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT)if(a[0].condition){N.midBannerConfig=i.getCacheInfo("financialMiddleBanner"),F();for(var r=[],n=[],s=0,c=a.length;c>s;s++){var d=a[s];d.condition?r.push({id:s,condition:d.condition}):n.push(s)}o.requestCheckADCondition({query_limit_list:r}).then(function(t){for(var e=-1,o=t.ret_data.result_list,r=0,i=o.length;i>r;r++)if("true"===o[r].result){e=parseInt(o[r].id,10);break}if(n.length){var s;s=-1===e?n[0]:n[0]<e?n[0]:e,O(a[s]),U.signalToIndex("adv_id_2",s)}else-1===e?O(null):(O(a[e]),U.signalToIndex("adv_id_2",e))},function(){O(null)})}else O(a[0]);else{for(var l=-1,s=0,c=a.length;c>s;s++){var d=a[s];if(!d.condition){l=s;break}}O(-1===l?null:a[l])}},x=function(){var t=h.$getByHandle("myContent"),e=m.getData()&&m.getData().src;e&&"homeStock"==e&&(m.setData(null),c(function(){a.hash("stock"),t.anchorScroll()},10))},J=function(a){var e=y.loadData("financialRecommend"),o=function(e){var o=B.getProdInfo(e.productSubCode);if(o&&"QL21"==o.on_sale_code)return void n(e);if(e.showPage&&(t.data.showMore1=!0),!e.showPage||1==e.showPage){if(e.tagArr=[],e.tag&&e.tag.length>0){e.tagRed=e.tagRed||[];for(var r in e.tag){var i={item:e.tag[r],"class":""};e.tagRed[r]&&(i.class="o"),e.tagArr.push(i)}}if(0==e.saleStatus){e.sealWords=e.sealDesc||"";var s=e.sealWords.split("<br>"),c=s.length;1>c&&(c=1),c>3&&(c=3),e.sealRaw="row-"+c,e.sealClass="seal"}else 2==e.saleStatus?(e.sealClass="seal off",e.sealRaw="row-1",e.sealWords=e.sealDesc||""):1==e.saleStatus&&(e.sealWords="",Y(e,a));t.data.onSaleInsurancelList.productList.push(e)}},r=function(a){if(a.showPage&&(t.data.showMore2=!0),!a.showPage||1==a.showPage){if(a.tagArr=[],a.tag&&a.tag.length>0){a.tagRed=a.tagRed||[];for(var e in a.tag){var o={item:a.tag[e],"class":""};a.tagRed[e]&&(o.class="o"),a.tagArr.push(o)}}if(0==a.saleStatus){a.sealWords=a.sealDesc||"";var r=a.sealWords.split("<br>"),n=r.length;1>n&&(n=1),n>3&&(n=3),a.sealRaw="row-"+n,a.sealClass="seal"}a.incomeClass=parseFloat(a.earningsRate)>=0?"s-a":"s-a down",a.saleStatusDesc&&""!=a.saleStatusDesc&&(0==a.saleStatus||1==a.saleStatus?a.tipsClass=a.saleDateDesc&&""!=a.saleDateDesc?"ly":"ly three-word":2==a.saleStatus&&(a.tipsClass=a.saleDateDesc&&""!=a.saleDateDesc?"ly off":"ly three-word off")),t.data.onSaleStockList.productList.push(a)}},n=function(e){if(e.showPage&&(t.data.showMore3=!0),!e.showPage||1==e.showPage){if(e.tagArr=[],e.tag&&e.tag.length>0){e.tagRed=e.tagRed||[];for(var o in e.tag){var r={item:e.tag[o],"class":""};e.tagRed[o]&&(r.class="o"),e.tagArr.push(r)}}if(0==e.saleStatus){e.sealWords=e.sealDesc||"";var n=e.sealWords.split("<br>"),i=n.length;1>i&&(i=1),i>3&&(i=3),e.sealRaw="row-"+i,e.sealClass="seal"}else 2==e.saleStatus?(e.sealClass="seal off",e.sealRaw="row-1",e.sealWords=e.sealDesc||""):1==e.saleStatus&&(e.sealWords="",Y(e,a));t.data.onSaleShortList.productList.push(e)}};if(e&&e.ret_data&&e.ret_data.productTypeList){var i=[],s=[],c=[];t.data.onSaleMonetoryList={productList:[]},t.data.onSaleShortList={productList:[]},t.data.onSaleInsurancelList={productList:[]},t.data.onSaleStockList={productList:[]};for(var d in e.ret_data.productTypeList)0==e.ret_data.productTypeList[d].productType?t.data.onSaleMonetoryList=e.ret_data.productTypeList[d]:1==e.ret_data.productTypeList[d].productType?(i=e.ret_data.productTypeList[d].productList,t.data.onSaleInsurancelList=e.ret_data.productTypeList[d],t.data.onSaleInsurancelList.productList=[]):2==e.ret_data.productTypeList[d].productType&&(s=e.ret_data.productTypeList[d].productList,t.data.onSaleStockList=e.ret_data.productTypeList[d],t.data.onSaleStockList.productList=[]),3==e.ret_data.productTypeList[d].productType&&(c=e.ret_data.productTypeList[d].productList,t.data.onSaleShortList=e.ret_data.productTypeList[d],t.data.onSaleShortList.productList=[]);for(var d in i)o(i[d]);t.data.onSaleInsurancelList.productList.length==i.length&&(t.data.showMore1=!1);for(var d in s)r(s[d]);t.data.onSaleStockList.productList.length==s.length&&(t.data.showMore2=!1);for(var d in c)n(c[d]);t.data.onSaleShortList.productList.length==c.length&&(t.data.showMore3=!1)}},G=function(){var t=i.getUserStatus();t>e.ACCOUNT_STATE.USER_STATE_GUEST?o.requestFinancialRecommendInfoWeb().then(function(t){tracelog("查询理财推荐信息成功web"),y.saveData("financialRecommend",t);var a=[];if(t&&t.ret_data&&t.ret_data.productTypeList)for(var e in t.ret_data.productTypeList)if(0==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)a.push(t.ret_data.productTypeList[e].productList[o].productCode);else if(1==t.ret_data.productTypeList[e].productType||3==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)a.push(t.ret_data.productTypeList[e].productList[o].productSubCode);else if(2==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)a.push(t.ret_data.productTypeList[e].productList[o].productCode);B.requestProdInfo(a).then(function(){tracelog("按产品拉取产品信息成功"),J(!0),k.requestActivityConfig(a)},function(){tracelog("按产品拉取产品信息失败"),J(!0)})},function(){tracelog("查询理财推荐信息失败web")}):o.requestFinancialRecommendInfoTencent().then(function(t){tracelog("查询理财推荐信息成功Tencent"),y.saveData("financialRecommend",t);var a=[];if(t&&t.ret_data&&t.ret_data.productTypeList)for(var e in t.ret_data.productTypeList)if(0==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)a.push(t.ret_data.productTypeList[e].productList[o].productCode);else if(1==t.ret_data.productTypeList[e].productType||3==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)a.push(t.ret_data.productTypeList[e].productList[o].productSubCode);else if(2==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)a.push(t.ret_data.productTypeList[e].productList[o].productCode);B.requestProdInfo(a).then(function(){tracelog("按产品拉取产品信息成功"),J(!0),k.requestActivityConfig(a)},function(){tracelog("按产品拉取产品信息失败"),J(!0)})},function(){tracelog("查询理财推荐信息失败Tencent")})},j=function(){if(t.data.status=i.getUserStatus(),t.data.status==e.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){t.data.isLogin=!0,t.data.isHasAccount=!0;var a=i.getUserInfo();t.data.avatarUrl=a.picurl||"../img/tx@2x.png"}else if(t.data.status==e.ACCOUNT_STATE.USER_STATE_LOGIN){t.data.isLogin=!0,t.data.isHasAccount=!1;var a=i.getUserInfo();t.data.avatarUrl=a.picurl||"../img/tx@2x.png"}else t.data.isLogin=!1,t.data.isHasAccount=!1},Y=function(t,a){if(t){var r=B.getProdInfo(t.productSubCode);if(r){var n=function(a){var e=0;if(0==r.templet_type?e=r.min_amount||0:2==r.templet_type?e=r.p_start_buy_min_amount||0:1==r.templet_type&&(e=r.p_start_purchase_min_amount||0),e>a||0==a)t.sealClass="seal off",t.sealRaw="row-1",t.sealWords="售罄";else if(t.sealClass="",t.sealRaw="",t.sealWords="",1==t.saleStatusDataLogicFlag){var o=1;0==r.templet_type?o=r.total_amount||1:2==r.templet_type?o=r.quota||1:1==r.templet_type&&(o=r.quota||1);var n=parseInt(100*parseInt(a)/parseInt(o));n>=50?(t.saleStatusTagFlag="抢",t.saleStatusTagDesc="快来买"):n>=10?(t.saleStatusTagFlag="少",t.saleStatusTagDesc="快没了"):n>=1?(t.saleStatusTagFlag="少",t.saleStatusTagDesc="仅"+n+"%"):(t.saleStatusTagFlag="少",t.saleStatusTagDesc="1%")}},s=i.getUserStatus();if(s==e.ACCOUNT_STATE.USER_STATE_GUEST)return void(0==r.templet_type?n(r.quota_total):(2==r.templet_type||1==r.templet_type)&&n(r.remain_total_quota));var c=y.loadData("insuranceBalance"+t.productSubCode);void 0!=c?n(c):0==r.templet_type?n(r.quota_total):(2==r.templet_type||1==r.templet_type)&&n(r.remain_total_quota),a&&o.requestProductBalance(t.productSubCode).then(function(a){a.ret_data&&(y.saveData("insuranceBalance"+t.productSubCode,a.ret_data.quota_total),n(a.ret_data.quota_total))})}}},V=function(){t.data.showMsgDot=N.hasNewNormalMessage||q.getRedPoint()||E.getRedFlag()},Q=function(){g.getRedPoint().then(function(t){N.hasNewNormalMessage=t?!0:!1,V()})},X=function(){g.getTypeMessageList("","red").then(function(t){if(t&&t.red&&t.red.length>0){var a=t.red[0];a.extraObj&&"fuli"===a.extraObj.usage&&q.setRedPoint(),V()}})};t.onClickMore=function(t){1==t?P.go("/financialRecommendDQMore"):2==t?P.go("/financialRecommendGJMore"):3==t&&P.go("/financialRecommendShortMore")},t.onClickInsuranceProdIntro=function(t){r.clickButtonReport("finance_"+t.productSubCode),b.onClickProd(t.productSubCode)},t.onClickStockProdIntro=function(t){r.clickButtonReport("finance_"+t.productCode),b.onClickProd(t.productCode)},t.onClickMonetaryProd=function(t){r.clickButtonReport("licai_huoqi"),b.onClickProd(t.productCode)},t.onClickMainTab=function(t){H.mainTabClickFun(t,2)},t.onClickSettingsBtn=function(){L.nextDirection("back"),r.clickButtonReport("index_financial"),g.clickRedPoint(),a.path("/accountSettings/financialRecommend")},t.onClickTransLog=function(){r.clickButtonReport("financial_trans"),v.goPage("","","all")},t.onClickBanner=function(){if(null!=N.midBannerConfig){var t={CLOSE:-1,APP_JUMP:0,BROWSER_JUMP:1},a=N.midBannerConfig.action;a.action_type==t.APP_JUMP?a.prod_code?B.requestProdInfo([a.prod_code]).then(function(){n.resolve()},function(){r.makeToast("产品信息拉取中，请稍后重试","short"),n.reject()}).then(function(){var t=B.getProdInfo(a.prod_code);return t?void(a.jump_to_common_page?P.go(a.action_param):b.goToProd(a.prod_code)):void r.makeToast("产品信息拉取中，请稍后重试","short")}):P.go(a.action_param):a.action_type==t.BROWSER_JUMP&&n.openInAppBrowser(a.action_param);var e={};e.clickADBanner="financial",e.id=N.midBannerConfig.id,Statistics.reportEvent("clickADBanner",e);var i={};i.module_id="click_ad_banner",i.data_list=[];var s={};s.id=N.midBannerConfig.id,s.typeName="financialBanner",i.data_list.push(s),o.requestReportToTencentGet(i)}};var z=!1;t.back=function(){z?n.exitAndroidApp():(z=!0,r.makeToast("再按一次退出微众银行","short","bottom"),c(function(){z=!1},2500))};var K=function(){o.groupon.querygrouponprodcodelist().then(function(t){y.saveData("groupon_prod_codes",t.ret_data)})},Z=function(){Q(),X()},ta=function(){document.removeEventListener("resume",Z)},aa=function(){Q(),X(),document.addEventListener("resume",Z,!1)};t.onHJViewActive=function(){W(),r.resetHistory(!0)},t.onHJViewDisActive=function(){ta()},t.$on("$destroy",function(){ta()}),W(),r.resetHistory()}]);app.controller("FinancialRecommendGJMoreController",["$scope","GLOBAL_CONSTANT","cgiService","utils","LocationService","localStorage","cache","StockProductDetailService","HJactionLoading","ProdInfoService","essential","$timeout",function(t,e,o,a,r,n,i,c,s,u,d){var l=function(){t.onSaleStockList=[],t.initStockAll=function(){},p(),T(),f()};t.sourceData=[],t.selectIndex=0,t.titleArr=[],t.data={},t.showClass="show-box",t.headStr="";var f=function(){var e=n.loadData("financialRecommend");if(e&&e.ret_data&&e.ret_data.productTypeList)for(var o in e.ret_data.productTypeList)if(2==e.ret_data.productTypeList[o].productType)for(var a in e.ret_data.productTypeList[o].productList)if(""!=e.ret_data.productTypeList[o].productList[a].earningsDesc){t.headStr=e.ret_data.productTypeList[o].productList[a].earningsDesc;break}},p=function(){var e=n.loadData("financialRecommend");if(e&&e.ret_data&&e.ret_data.productTypeList)for(var o in e.ret_data.productTypeList)if(2==e.ret_data.productTypeList[o].productType){for(var a=e.ret_data.productTypeList[o].productList,r={},i=0;i<a.length;i++)if(a[i].productCode){a[i].incomeClass=parseFloat(a[i].earningsRate)>=0?"l":"l down",a[i].earningsRateStr=a[i].earningsRate+"%",a[i].beforeTime&&(a[i].incomeClass="l grey",a[i].earningsRateStr="暂无数据"),a[i].realValue="";var c=u.getProdInfo(a[i].productCode);c&&c.real_value&&(a[i].realValue=parseFloat(c.real_value).toFixed(4)),r[a[i].productCode]=a[i]}if(t.sourceData=e.ret_data.productTypeList[o].sort||[],t.titleArr=[],t.sourceData.length>0){t.headStr="涨跌幅";for(var i=0;i<t.sourceData.length;i++)t.titleArr.push(t.sourceData[i].type);for(var i=0;i<t.sourceData.length;i++){t.sourceData[i].itemList=[];for(var s=0;s<t.sourceData.productList.length;s++)r[t.sourceData.productList[s]]&&t.sourceData[i].itemList.push(r[t.sourceData.productList[s]])}}else a.sort(function(t,e){return t.beforeTime!==e.beforeTime?e.beforeTime-t.beforeTime:e.earningsRate-t.earningsRate}),t.sourceData=[{itemList:a}]}},T=function(){var t=i.getUserStatus();t>e.ACCOUNT_STATE.USER_STATE_GUEST?o.requestFinancialRecommendInfoWeb().then(function(t){tracelog("查询理财推荐信息成功web"),n.saveData("financialRecommend",t),p()},function(){tracelog("查询理财推荐信息失败web")}):o.requestFinancialRecommendInfoTencent().then(function(t){tracelog("查询理财推荐信息成功Tencent"),n.saveData("financialRecommend",t),p()},function(){tracelog("查询理财推荐信息失败Tencent")})};t.onClickTitleItem=function(e){t.selectIndex=e,t.showClass="show-box"},t.onClickTitle=function(){t.showClass="show-box show-list"},t.onClickStockProdIntro=function(t){a.clickButtonReport("finance_"+t.productCode),u.requestProdInfo([t.productCode]).then(function(){d.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),d.reject()}).then(function(){var e=u.getProdInfo(t.productCode);return e?void c.goPage(t.productCode):void a.makeToast("产品信息拉取中，请稍后重试","short")})},t.back=function(){r.backPage()},t.onHJViewActive=function(){l()},t.onHJViewDisActive=function(){},l()}]);app.controller("FinancialRecommendDQMoreController",["$scope","GLOBAL_CONSTANT","cgiService","utils","LocationService","localStorage","cache","HJactionLoading","InsuranceProductDetailService","ProdInfoService","essential",function(t,e,a,s,o,n,c,r,u,i,l){var p=function(){t.onSaleInsurancelList=[],d(!1),_()},d=function(e){var a=n.loadData("financialRecommend");if(a&&a.ret_data&&a.ret_data.productTypeList)for(var s in a.ret_data.productTypeList)if(1==a.ret_data.productTypeList[s].productType){var o=a.ret_data.productTypeList[s].productList;t.onSaleInsurancelList=a.ret_data.productTypeList[s],t.onSaleInsurancelList.productList=[];for(var c in o){var r=i.getProdInfo(o[c].productSubCode);r&&"QL21"==r.on_sale_code||(0==o[c].saleStatus?(o[c].tipsClass="flw-ts px-b ready",o[c].tipsWords="即将开售",o[c].saleDateDesc&&""!=o[c].saleDateDesc&&r&&(1==r.product_type&&0==r.templet_type?r.start_buy_time&&(o[c].saleDateDesc=o[c].saleDateDesc+" "+r.start_buy_time.substr(0,5)):1==r.product_type&&2==r.templet_type&&r.ipostart_time&&(o[c].saleDateDesc=o[c].saleDateDesc+" "+r.ipostart_time.substr(0,2)+":"+r.ipostart_time.substr(2,2)))):2==o[c].saleStatus?(o[c].tipsWords="已售罄",o[c].tipsClass="flw-ts px-b end"):1==o[c].saleStatus&&(o[c].tipsClass="flw-ts px-b buy",o[c].tipsWords="抢购中",f(o[c],e)),t.onSaleInsurancelList.productList.push(o[c]))}}},_=function(){var t=c.getUserStatus();t>e.ACCOUNT_STATE.USER_STATE_GUEST?a.requestFinancialRecommendInfoWeb().then(function(t){tracelog("查询理财推荐信息成功web"),n.saveData("financialRecommend",t),d(!0)},function(){tracelog("查询理财推荐信息失败web")}):a.requestFinancialRecommendInfoTencent().then(function(t){tracelog("查询理财推荐信息成功Tencent"),n.saveData("financialRecommend",t),d(!0)},function(){tracelog("查询理财推荐信息失败Tencent")})},f=function(t,s){if(t){t.saleDateDesc="",t.saleStatusDesc="";var o=i.getProdInfo(t.productSubCode);if(o){var r=function(e){var a=0;0==o.templet_type?a=o.min_amount||0:2==o.templet_type&&(a=o.p_start_buy_min_amount||0);var s=1;if(0==o.templet_type?s=o.total_amount||1:2==o.templet_type&&(s=o.quota||1),a>e||0==e)t.tipsWords="已售罄",t.saleDateDesc="",t.tipsClass="flw-ts px-b end",t.showRedDesc=!1,t.saleStatusDesc="抢光了";else{t.tipsWords="抢购中",t.saleDateDesc="剩余额度",t.tipsClass="flw-ts px-b buy",t.showRedDesc=!0;var n=parseInt(100*parseInt(e)/parseInt(s));n>=80?t.saleStatusDesc="额度充足":n>=50?t.saleStatusDesc="不多了":n>=10?t.saleStatusDesc="快没了":n>=1?t.saleStatusDesc=n+"%":(t.showRedDesc=!1,t.saleDateDesc="",t.saleStatusDesc="即将售罄")}},u=c.getUserStatus();if(u==e.ACCOUNT_STATE.USER_STATE_GUEST)return void(0==o.templet_type?r(o.quota_total):2==o.templet_type&&r(o.remain_total_quota));var l=n.loadData("insuranceBalance"+t.productSubCode);void 0!=l?r(l):0==o.templet_type?r(o.quota_total):2==o.templet_type&&r(o.remain_total_quota),s&&a.requestProductBalance(t.productSubCode).then(function(e){e.ret_data&&(n.saveData("insuranceBalance"+t.productSubCode,e.ret_data.quota_total),r(e.ret_data.quota_total))})}}};t.onClickInsuranceProdIntro=function(t){s.clickButtonReport("finance_"+t.productSubCode),i.requestProdInfo([t.productSubCode]).then(function(){l.resolve()},function(){s.makeToast("产品信息拉取中，请稍后重试","short"),l.reject()}).then(function(){var e=i.getProdInfo(t.productSubCode);return e?void(0==e.templet_type?u.goPage(t.productSubCode):2==e.templet_type&&o.go("/insuranceProductDetails2/"+t.productSubCode)):void s.makeToast("产品信息拉取中，请稍后重试","short")})},t.back=function(){o.backPage()},t.onHJViewActive=function(){p()},t.onHJViewDisActive=function(){},p()}]);app.controller("FinancialRecommendShortMoreController",["$scope","GLOBAL_CONSTANT","cgiService","utils","LocationService","localStorage","cache","HJactionLoading","InsuranceProductDetailService","ProdInfoService","essential","ProdCommonActionService",function(t,e,a,o,s,r,c,n,i,p,u,l){var d=function(){t.onSaleShortList={productList:[]},_(!1),S()},_=function(e){var a=function(a){if(0==a.saleStatus){if(a.tipsClass="flw-ts px-b ready",a.tipsWords="即将开售",a.saleDateDesc&&""!=a.saleDateDesc){var o=p.getProdInfo(a.productSubCode);o&&(3==o.product_type&&0==o.templet_type?o.start_buy_time&&(a.saleDateDesc=a.saleDateDesc+" "+o.start_buy_time.substr(0,5)):3!=o.product_type||2!=o.templet_type&&1!=o.templet_type||o.ipostart_time&&(a.saleDateDesc=a.saleDateDesc+" "+o.ipostart_time.substr(0,2)+":"+o.ipostart_time.substr(2,2)))}}else 2==a.saleStatus?(a.tipsWords="已售罄",a.tipsClass="flw-ts px-b end"):1==a.saleStatus&&(a.tipsClass="flw-ts px-b buy",a.tipsWords="抢购中",m(a,e));t.onSaleShortList.productList.push(a)},o=r.loadData("financialRecommend"),s=[],c=[];if(t.onSaleShortList={productList:[]},o&&o.ret_data&&o.ret_data.productTypeList){for(var n in o.ret_data.productTypeList)3==o.ret_data.productTypeList[n].productType&&(c=o.ret_data.productTypeList[n].productList,t.onSaleShortList=o.ret_data.productTypeList[n],t.onSaleShortList.productList=[]),1==o.ret_data.productTypeList[n].productType&&(s=o.ret_data.productTypeList[n].productList);for(var n in c)a(c[n]);for(var n in s){var i=p.getProdInfo(s[n].productSubCode);i&&"QL21"==i.on_sale_code&&(i.product_type=3,a(s[n]))}}},S=function(){var t=c.getUserStatus();t>e.ACCOUNT_STATE.USER_STATE_GUEST?a.requestFinancialRecommendInfoWeb().then(function(t){tracelog("查询理财推荐信息成功web"),r.saveData("financialRecommend",t),_(!0)},function(){tracelog("查询理财推荐信息失败web")}):a.requestFinancialRecommendInfoTencent().then(function(t){tracelog("查询理财推荐信息成功Tencent"),r.saveData("financialRecommend",t),_(!0)},function(){tracelog("查询理财推荐信息失败Tencent")})},m=function(t,o){if(t){t.saleDateDesc="",t.saleStatusDesc="";var s=p.getProdInfo(t.productSubCode);if(s){var n=function(e){var a=0;0==s.templet_type?a=s.min_amount||0:2==s.templet_type?a=s.p_start_buy_min_amount||0:1==s.templet_type&&(a=s.p_start_purchase_min_amount||0);var o=1;if(0==s.templet_type?o=s.total_amount||1:2==s.templet_type?o=s.quota||1:1==s.templet_type&&(o=s.quota||1),a>e||0==e)t.tipsWords="已售罄",t.saleDateDesc="",t.tipsClass="flw-ts px-b end",t.showRedDesc=!1,t.saleStatusDesc="抢光了";else{t.tipsWords="抢购中",t.saleDateDesc="剩余额度",t.tipsClass="flw-ts px-b buy",t.showRedDesc=!0;var r=parseInt(100*parseInt(e)/parseInt(o));r>=80?t.saleStatusDesc="额度充足":r>=50?t.saleStatusDesc="不多了":r>=10?t.saleStatusDesc="快没了":r>=1?t.saleStatusDesc=r+"%":(t.showRedDesc=!1,t.saleDateDesc="",t.saleStatusDesc="即将售罄")}},i=c.getUserStatus();if(i==e.ACCOUNT_STATE.USER_STATE_GUEST)return void(0==s.templet_type?n(s.quota_total):(2==s.templet_type||1==s.templet_type)&&n(s.remain_total_quota));var u=r.loadData("insuranceBalance"+t.productSubCode);void 0!=u?n(u):0==s.templet_type?n(s.quota_total):(2==s.templet_type||1==s.templet_type)&&n(s.remain_total_quota),o&&a.requestProductBalance(t.productSubCode).then(function(e){e.ret_data&&(r.saveData("insuranceBalance"+t.productSubCode,e.ret_data.quota_total),n(e.ret_data.quota_total))})}}};t.onClickShortPeroidIntro=function(t){o.clickButtonReport("short_peroid"+t.productSubCode),l.onClickProd(t.productSubCode)},t.back=function(){s.backPage()},t.onHJViewActive=function(){d()},t.onHJViewDisActive=function(){},d()}]);app.controller("MyFinancialInsuranceController",["$scope","$stateParams","utils","cgiService","essential","cache","webankCommonService","GLOBAL_CONSTANT","TransRecordService","StockMyProdDetailService","InsuranceMyProdDetailService","$ionicScrollDelegate","$timeout","dataService","ProdInfoService","LocationService",function(e,t,a,n,r,o,s,i,c,l,_,u,d,D,g,m){var f,p=e.func={},v=e.data={};v.insuranceList={},v.insuranceCount=0,v.insuranceListArr=[];var y=function(){v.insuranceList={},v.insuranceCount=0,v.insuranceListArr=[],I(),T()},I=function(){f=o.getCacheInfo("wealthNew");var e=s.parseRawWealthData_V3(f);v.totalBXAmount=parseFloat(e.BXAmount).toFixed(2)},T=function(){v.insuranceList={},v.insuranceCount=0,v.insuranceListArr=[],Y(),M(),S()},Y=function(){if(f&&f.finance_wealth&&f.finance_wealth.fund_cycle)for(var e in f.finance_wealth.fund_cycle){var t=g.getProdInfo(f.finance_wealth.fund_cycle[e].prod_code);t||2!=f.finance_wealth.fund_cycle[e].prod_type&&3!=f.finance_wealth.fund_cycle[e].prod_type?t&&1==t.product_type&&"QL21"!=t.on_sale_code&&0==t.templet_type&&F(f.finance_wealth.fund_cycle[e]):F(f.finance_wealth.fund_cycle[e])}if(f&&f.finance_wealth&&f.finance_wealth.bank_cycle)for(var e in f.finance_wealth.bank_cycle){var t=g.getProdInfo(f.finance_wealth.bank_cycle[e].prod_code);t&&3==t.product_type&&0==t.templet_type||F(f.finance_wealth.bank_cycle[e])}if(f&&f.finance_wealth&&f.finance_wealth.wnx_cycle)for(var e in f.finance_wealth.wnx_cycle)C(f.finance_wealth.wnx_cycle[e]);v.insuranceCount=Object.keys(v.insuranceList).length},S=function(){try{v.insuranceCount>0&&d(function(){var e=[];for(var t in v.insuranceList)e.push(v.insuranceList[t].prodCode);e.length>0&&D.requestActivityConfig(e)},50)}catch(e){}},F=function(e){var t=g.getProdInfo(e.prod_code);if(t){var n,r=t.value_date,o=a.getYYYYMMDDStringByDate(a.getDate()),s=a.getDateByYYYYMMDDString(r),c=parseInt(r,10)>20151116&&t.value_end_date;c?n=a.getDateByYYYYMMDDString(t.value_end_date):(n=a.getDateByYYYYMMDDString(r),n.setDate(n.getDate()+parseInt(t.life_time)-1));var l,_=a.getYYYYMMDDStringByDate(n);l=t.arrival_account_date?a.getDateByYYYYMMDDString(t.arrival_account_date):a.getNextWorkDay(1,n);var u={};if(u.amount=0,u.prodCode=e.prod_code,u.isMakingValue=!1,u.prodName=t.on_sale_desc+"("+t.value_date.substr(4,4)+")",v.insuranceList[e.prod_code]=u,e.buy_in_trans>0)u.amount=parseFloat(e.buy_in_trans).toFixed(2),u.descTop="预期年化"+parseFloat(t.income_rate).toFixed(2)+"%",u.stateDesc="确认中",u.descBottom="待确认购买结果，预计"+(s.getMonth()+1)+"月"+s.getDate()+"日完成",u.sortStatus=i.FINANCIAL_PRODUCT_SORT.CONFIRMING,u.sortConfirmDate=s.valueOf();else if(e.redeem_in_trans_confirmed>0)u.amount=parseFloat(e.redeem_in_trans_confirmed).toFixed(2),u.descTop="已到期",u.stateDesc="赎回中",u.descBottom="正在赎回中，预计"+(l.getMonth()+1)+"月"+l.getDate()+"日完成",u.sortStatus=i.FINANCIAL_PRODUCT_SORT.REDEEMING,u.sortArrivalDate=l.valueOf();else if(e.available_vol>0||e.redeem_in_trans_confirming>0){var d=A(t,e.avg_cost);if(u.amount=parseFloat(e.avg_cost).toFixed(2),1==e.rollflag||5==e.rollflag)u.descTop="到期后自动购买下期";else{var D=a.getDate();u.descTop=t.arrival_account_date?D.getFullYear()!=l.getFullYear()?l.getFullYear()+"年"+(l.getMonth()+1)+"月"+l.getDate()+"日到账":l.getMonth()+1+"月"+l.getDate()+"日到账":D.getFullYear()!=n.getFullYear()?n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日到期":n.getMonth()+1+"月"+n.getDate()+"日到期",c&&parseInt(o)==parseInt(_)&&(u.descTop="今日到期")}if("1"==t.can_redeem_type_principal&&N(u),parseInt(o)>parseInt(r))parseInt(o)<=parseInt(_)?(u.lastIncome=parseFloat(d.yesterdayIncome).toFixed(2),u.isMakingValue=!0,u.stateDesc="预估昨日"):(u.stateDesc=1==e.rollflag||5==e.rollflag?"自动购买中":"赎回中",u.descTop="已到期");else{u.stateDesc="等待收益";var m=a.getDateByYYYYMMDDString(r);m.setDate(m.getDate()+1),u.descBottom="预计"+(m.getMonth()+1)+"月"+m.getDate()+"日可查看首笔预估收益"}u.sortStatus=i.FINANCIAL_PRODUCT_SORT.HOLD,u.sortArrivalDate=l.valueOf(),u.sortValueDate=1*r}}else{var u={};u.prodCode=e.prod_code,u.isMakingValue=!1,u.prodName="理财产品",v.insuranceList[e.prod_code]=u,e.available_vol>0||e.redeem_in_trans_confirming>0?(u.amount=e.avg_cost,u.stateDesc="持有中"):e.redeem_in_trans_confirmed>0?(u.amount=e.redeem_in_trans_confirmed,u.stateDesc="赎回中"):e.buy_in_trans>0&&(u.amount=e.buy_in_trans,u.stateDesc="确认中")}},N=function(e){var t={};t.fundcode=e.prodCode,n.requestpartRedeemType(t).then(function(t){tracelog("查询部分赎回信息成功");var a=null;if(t&&t.ret_data&&t.ret_data.cycle&&t.ret_data.cycle.length>0)for(var n=t.ret_data.cycle,r=0;r<n.length;r++)n[r].fundcode==e.prodCode&&n[r].applicationvol&&(a=n[r]);a&&("0"==a.rollflag?(e.descTop="部分赎回，剩余自动购买下期",e.descBottom=parseFloat(a.applicationvol).toFixed(2)+"元本金及其收益赎回至微众卡，"+parseFloat(1*e.amount-1*a.applicationvol).toFixed(2)+"元本金自动购买下期"):"3"==a.rollflag&&(e.descTop="部分赎回，剩余自动购买下期",e.descBottom=parseFloat(a.applicationvol).toFixed(2)+"元本金及其收益赎回至活期+，"+parseFloat(1*e.amount-1*a.applicationvol).toFixed(2)+"元本金自动购买下期"))})},C=function(e){var t={},n=g.getProdInfo(e.prod_code);if(t.prodName=n?n.prod_name+" "+e.policy_no:"理财产品",t.prodCode=e.prod_code,t.policyNo=e.policy_no,t.sortTransTime=a.getDateByDate8AndTime6String(e.trans_date,e.trans_time)||0,t.sortTransTime&&(t.sortTransTime=t.sortTransTime.valueOf()),v.insuranceList[e.policy_no]=t,0==e.policy_status){var r=a.getDateByYYYYMMDDString(e.trans_date);r.setDate(r.getDate()+2);var o=a.getDate();o>r&&void 0!=e.last_income&&e.last_income_date&&e.last_income>0?(t.stateDesc=e.last_income_date==a.getYesterdayString()?"昨日":e.last_income_date==a.getBeforeYesterdayString()?"前日":e.last_income_date.substr(4,2)+"月"+e.last_income_date.substr(6,2)+"日",t.isMakingValue=!0,t.lastIncome=parseFloat(e.last_income).toFixed(2)):(t.isMakingValue=!1,t.stateDesc="等待收益"),t.sortStatus=i.FINANCIAL_PRODUCT_SORT.WNX_HOLD}else if(1==e.policy_status){t.isMakingValue=!1,t.stateDesc="确认中",t.prodName=n?n.prod_name:"理财产品";var s=a.getDateByYYYYMMDDString(e.trans_date),c=a.getNextWorkDay(1,s),l=""+(c.getMonth()+1)+"月"+c.getDate()+"日";t.descBottom="您有1笔资金"+l+"前反馈购买结果",t.sortStatus=i.FINANCIAL_PRODUCT_SORT.WNX_CONFIRMING}else if(3==e.policy_status)t.isMakingValue=!1,t.stateDesc="赎回中",t.descBottom=n?"您有1笔"+e.in_refund_money+"元资金在赎回中，"+n.redeem_arrive_account_day+"个工作日后反馈赎回结果":"您有1笔"+e.in_refund_money+"元资金在赎回中",t.sortStatus=i.FINANCIAL_PRODUCT_SORT.WNX_REDEEMING;else if(4==e.policy_status){var r=a.getDateByYYYYMMDDString(e.trans_date);r.setDate(r.getDate()+2);var o=a.getDate();o>r&&e.last_income&&e.last_income_date?(t.stateDesc=e.last_income_date==a.getYesterdayString()?"昨日":e.last_income_date==a.getBeforeYesterdayString()?"前日":e.last_income_date.substr(4,2)+"月"+e.last_income_date.substr(6,2)+"日",t.isMakingValue=!0,t.lastIncome=parseFloat(e.last_income).toFixed(2)):(t.isMakingValue=!1,t.stateDesc="等待收益"),e.in_refund_money>0&&(t.descBottom=n?"您有"+e.in_refund_money+"元资金在赎回中，"+n.redeem_arrive_account_day+"个工作日后反馈赎回结果":"您有"+e.in_refund_money+"元资金在赎回中"),t.sortStatus=i.FINANCIAL_PRODUCT_SORT.WNX_REDEEMING}t.amount=parseFloat(e.total_amount).toFixed(2)},M=function(){if(v.insuranceCount>0){for(var e in v.insuranceList)v.insuranceListArr.push(v.insuranceList[e]);var t=s.getFinancialProductsBuyTime();v.insuranceListArr.sort(function(e,a){if(e.sortStatus!=a.sortStatus)return e.sortStatus-a.sortStatus;if(e.sortStatus==i.FINANCIAL_PRODUCT_SORT.CONFIRMING){var n=t[e.prodCode]||0,r=t[a.prodCode]||0;return n!=r?r-n:a.sortConfirmDate-e.sortConfirmDate}return e.sortStatus==i.FINANCIAL_PRODUCT_SORT.REDEEMING?e.sortArrivalDate-a.sortArrivalDate:e.sortStatus==i.FINANCIAL_PRODUCT_SORT.HOLD?e.sortArrivalDate!=a.sortArrivalDate?e.sortArrivalDate-a.sortArrivalDate:a.sortValueDate-e.sortValueDate:e.sortStatus==i.FINANCIAL_PRODUCT_SORT.WNX_CONFIRMING?a.sortTransTime-e.sortTransTime:e.sortStatus==i.FINANCIAL_PRODUCT_SORT.WNX_REDEEMING?e.sortTransTime-a.sortTransTime:e.sortStatus==i.FINANCIAL_PRODUCT_SORT.WNX_HOLD?a.sortTransTime-e.sortTransTime:!1})}},A=function(e,t){var n=a.getDateByYYYYMMDDString(e.value_date),r=a.getDateByYYYYMMDDString(e.value_date);r.setDate(r.getDate()+1);var o=a.getDateByYYYYMMDDString(e.value_date);o.setDate(o.getDate()+parseInt(e.life_time));var s={};s.yesterdayIncome=0,s.accumulatedIncome=0,s.amount=0;var i=a.getDate();return a.isCurrentDateValid(r,o)?(s.yesterdayIncome=parseFloat(t)*parseFloat(e.income_rate)/100/365,s.accumulatedBXIncome=parseFloat(t)*parseFloat(e.income_rate)*parseInt(a.getDateDifference(n,i))/100/365):i>o?(s.yesterdayIncome=0,s.accumulatedBXIncome=parseFloat(t)*parseFloat(e.income_rate)*parseInt(e.life_time)/100/365):(s.yesterdayIncome=0,s.accumulatedBXIncome=0),s.amount=t,s};p.back=function(){m.backPage()},p.onCheckTransLog=function(){c.goPage()},p.onClickInsurance=function(e){var t=e.prodCode;g.requestProdInfo([t]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=g.getProdInfo(t);return n?void(0==n.templet_type?_.goPage(t):2==n.templet_type&&m.go("/insuranceMyProdDetail2/"+e.policyNo)):void a.makeToast("产品信息拉取中，请稍后重试","short")})},e.onHJViewActive=function(){y()},e.onHJViewDisActive=function(){},y()}]);app.controller("MyFinancialShortPeroidController",["$scope","$stateParams","utils","cgiService","essential","cache","webankCommonService","GLOBAL_CONSTANT","TransRecordService","StockMyProdDetailService","InsuranceMyProdDetailService","$ionicScrollDelegate","$timeout","dataService","ProdInfoService","LocationService","ProdCommonActionService","TPlusOneService",function(e,t,a,o,r,n,s,i,c,l,d,u,_,p,D,f,m,g){var v,h=e.func={},y=e.data={};y.shortPeroidList={},y.shortPeroidCount=0,y.shortPeroidListArr=[];var I=function(){y.shortPeroidList={},y.shortPeroidCount=0,y.shortPeroidListArr=[],F(),P()},F=function(){v=n.getCacheInfo("wealthNew");var e=s.parseRawWealthData_V3(v);y.totalShortAmount=parseFloat(e.ShortAmount).toFixed(2)},P=function(){y.shortPeroidList={},y.shortPeroidCount=0,y.shortPeroidListArr=[],Y(),T(),S()},Y=function(){if(v&&v.finance_wealth&&v.finance_wealth.fund_cycle)for(var e in v.finance_wealth.fund_cycle){var t=D.getProdInfo(v.finance_wealth.fund_cycle[e].prod_code);t&&(!t||3!=t.product_type&&"QL21"!=t.on_sale_code||0!=t.templet_type||C(v.finance_wealth.fund_cycle[e]))}if(v&&v.finance_wealth&&v.finance_wealth.bank_cycle)for(var e in v.finance_wealth.bank_cycle){var t=D.getProdInfo(v.finance_wealth.bank_cycle[e].prod_code);t&&(!t||3!=t.product_type&&"QL21"!=t.on_sale_code||0!=t.templet_type||C(v.finance_wealth.bank_cycle[e]))}if(v&&v.finance_wealth&&v.finance_wealth.ptx_cycle)for(var e in v.finance_wealth.ptx_cycle)A(v.finance_wealth.ptx_cycle[e].prod_code);y.shortPeroidCount=Object.keys(y.shortPeroidList).length},S=function(){try{y.shortPeroidList>0&&_(function(){var e=[];for(var t in y.shortPeroidList)e.push(y.shortPeroidList[t].prodCode);e.length>0&&p.requestActivityConfig(e)},50)}catch(e){}},A=function(e){var t=D.getProdInfo(e),o=s.parseRawWealthDataForTPlusOne(v,e),r={};if(r.cls="up",r.amount=o.totalAmount,r.prodCode=e,r.isMakingValue=!1,r.hideFixTimeText=!0,r.sortStatus=i.FINANCIAL_PRODUCT_SORT.TPLUSONE,r.prodName=t&&t.prod_name?t.prod_name:"理财产品",r.onWayDescList=[],y.shortPeroidList[e]=r,o.hasConfirmedWealth)if(parseFloat(o.income)>0){var n=a.getDate();n.setDate(n.getDate()-1),r.stateDesc=a.getYYYYMMDDStringByDate(n)==o.incomeGenDateStr?"昨日":o.incomeGenDateStr.substring(4,6)+"月"+o.incomeGenDateStr.substring(6,8)+"日",parseFloat(o.income)>=0?r.lastIncome=parseFloat(o.income).toFixed(2):(r.lastIncome=(-1*parseFloat(o.income)).toFixed(2),r.cls="dw"),r.isMakingValue=!0}else r.stateDesc="等待收益";else parseFloat(o.purchaseInTransAmount)>0?r.stateDesc="确认中":parseFloat(o.redeemInTransAmount)+parseFloat(o.refundIncome)>0&&(r.stateDesc="赎回中");if(parseFloat(o.purchaseInTransAmount)>0){var c="您有"+o.purchaseInTransAmount+"元正在确认购买，完成时间可查看详情";r.onWayDescList.push(c)}if(parseFloat(o.redeemInTransAmount)>0){var l="您有"+o.redeemInTransAmount+"元正在赎回中，完成时间可查看详情";r.onWayDescList.push(l)}if(parseFloat(o.refundIncome)>0){var l="剩余"+o.refundIncome+"元收益正在赎回中，后续到账";r.onWayDescList.push(l)}if(parseFloat(o.refundAmount)>0){var l="您有"+o.refundAmount+"元正在退款";r.onWayDescList.push(l)}},C=function(e){var t=D.getProdInfo(e.prod_code);if(t){var o,r=t.value_date,n=a.getYYYYMMDDStringByDate(a.getDate()),s=a.getDateByYYYYMMDDString(r),c=parseInt(r,10)>20151116&&t.value_end_date;c?o=a.getDateByYYYYMMDDString(t.value_end_date):(o=a.getDateByYYYYMMDDString(r),o.setDate(o.getDate()+parseInt(t.life_time)-1));var l,d=a.getYYYYMMDDStringByDate(o);l=t.arrival_account_date?a.getDateByYYYYMMDDString(t.arrival_account_date):a.getNextWorkDay(1,o);var u={};if(u.cls="up",u.amount=0,u.prodCode=e.prod_code,u.isMakingValue=!1,u.prodName=t.on_sale_desc+"("+t.value_date.substr(4,4)+")",y.shortPeroidList[e.prod_code]=u,e.buy_in_trans>0)u.amount=parseFloat(e.buy_in_trans).toFixed(2),u.descTop="预期年化"+parseFloat(t.income_rate).toFixed(2)+"%",u.stateDesc="确认中",u.descBottom="待确认购买结果，预计"+(s.getMonth()+1)+"月"+s.getDate()+"日完成",u.sortStatus=i.FINANCIAL_PRODUCT_SORT.CONFIRMING,u.sortConfirmDate=s.valueOf();else if(e.redeem_in_trans_confirmed>0)u.amount=parseFloat(e.redeem_in_trans_confirmed).toFixed(2),u.descTop="已到期",u.stateDesc="赎回中",u.descBottom="正在赎回中，预计"+(l.getMonth()+1)+"月"+l.getDate()+"日完成",u.sortStatus=i.FINANCIAL_PRODUCT_SORT.REDEEMING,u.sortArrivalDate=l.valueOf();else if(e.available_vol>0||e.redeem_in_trans_confirming>0){var _=L(t,e.avg_cost);if(u.amount=parseFloat(e.avg_cost).toFixed(2),1==e.rollflag||5==e.rollflag)u.descTop="到期后自动购买下期";else{var p=a.getDate();u.descTop=t.arrival_account_date?p.getFullYear()!=l.getFullYear()?l.getFullYear()+"年"+(l.getMonth()+1)+"月"+l.getDate()+"日到账":l.getMonth()+1+"月"+l.getDate()+"日到账":p.getFullYear()!=o.getFullYear()?o.getFullYear()+"年"+(o.getMonth()+1)+"月"+o.getDate()+"日到期":o.getMonth()+1+"月"+o.getDate()+"日到期",c&&parseInt(n)==parseInt(d)&&(u.descTop="今日到期")}if("1"==t.can_redeem_type_principal&&M(u),parseInt(n)>parseInt(r))parseInt(n)<=parseInt(d)?(u.lastIncome=parseFloat(_.yesterdayIncome).toFixed(2),u.isMakingValue=!0,u.stateDesc="预估昨日"):(u.stateDesc=1==e.rollflag||5==e.rollflag?"自动购买中":"赎回中",u.descTop="已到期");else{u.stateDesc="等待收益";var f=a.getDateByYYYYMMDDString(r);f.setDate(f.getDate()+1),u.descBottom="预计"+(f.getMonth()+1)+"月"+f.getDate()+"日可查看首笔预估收益"}u.sortStatus=i.FINANCIAL_PRODUCT_SORT.HOLD,u.sortArrivalDate=l.valueOf(),u.sortValueDate=1*r}}else{var u={};u.cls="up",u.prodCode=e.prod_code,u.isMakingValue=!1,u.prodName="理财产品",y.shortPeroidList[e.prod_code]=u,e.available_vol>0||e.redeem_in_trans_confirming>0?(u.amount=e.avg_cost,u.stateDesc="持有中"):e.redeem_in_trans_confirmed>0?(u.amount=e.redeem_in_trans_confirmed,u.stateDesc="赎回中"):e.buy_in_trans>0&&(u.amount=e.buy_in_trans,u.stateDesc="确认中")}},M=function(e){var t={};t.fundcode=e.prodCode,o.requestpartRedeemType(t).then(function(t){tracelog("查询部分赎回信息成功");var a=null;if(t&&t.ret_data&&t.ret_data.cycle&&t.ret_data.cycle.length>0)for(var o=t.ret_data.cycle,r=0;r<o.length;r++)o[r].fundcode==e.prodCode&&o[r].applicationvol&&(a=o[r]);a&&("0"==a.rollflag?(e.descTop="部分赎回，剩余自动购买下期",e.descBottom=parseFloat(a.applicationvol).toFixed(2)+"元本金及其收益赎回至微众卡，"+parseFloat(1*e.amount-1*a.applicationvol).toFixed(2)+"元本金自动购买下期"):"3"==a.rollflag&&(e.descTop="部分赎回，剩余自动购买下期",e.descBottom=parseFloat(a.applicationvol).toFixed(2)+"元本金及其收益赎回至活期+，"+parseFloat(1*e.amount-1*a.applicationvol).toFixed(2)+"元本金自动购买下期"))})},T=function(){if(y.shortPeroidCount>0){for(var e in y.shortPeroidList)y.shortPeroidListArr.push(y.shortPeroidList[e]);var t=s.getFinancialProductsBuyTime();y.shortPeroidListArr.sort(function(e,a){if(e.sortStatus!=a.sortStatus)return e.sortStatus-a.sortStatus;if(e.sortStatus==i.FINANCIAL_PRODUCT_SORT.CONFIRMING){var o=t[e.prodCode]||0,r=t[a.prodCode]||0;return o!=r?r-o:a.sortConfirmDate-e.sortConfirmDate}return e.sortStatus==i.FINANCIAL_PRODUCT_SORT.REDEEMING?e.sortArrivalDate-a.sortArrivalDate:e.sortStatus==i.FINANCIAL_PRODUCT_SORT.HOLD?e.sortArrivalDate!=a.sortArrivalDate?e.sortArrivalDate-a.sortArrivalDate:a.sortValueDate-e.sortValueDate:!1})}},L=function(e,t){var o=a.getDateByYYYYMMDDString(e.value_date),r=a.getDateByYYYYMMDDString(e.value_date);r.setDate(r.getDate()+1);var n=a.getDateByYYYYMMDDString(e.value_date);n.setDate(n.getDate()+parseInt(e.life_time));var s={};s.yesterdayIncome=0,s.accumulatedIncome=0,s.amount=0;var i=a.getDate();return a.isCurrentDateValid(r,n)?(s.yesterdayIncome=parseFloat(t)*parseFloat(e.income_rate)/100/365,s.accumulatedBXIncome=parseFloat(t)*parseFloat(e.income_rate)*parseInt(a.getDateDifference(o,i))/100/365):i>n?(s.yesterdayIncome=0,s.accumulatedBXIncome=parseFloat(t)*parseFloat(e.income_rate)*parseInt(e.life_time)/100/365):(s.yesterdayIncome=0,s.accumulatedBXIncome=0),s.amount=t,s};h.back=function(){f.backPage()},h.onCheckTransLog=function(){c.goPage()},h.onClickshortPeroid=function(e){var t=e.prodCode;D.requestProdInfo([t]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var o=D.getProdInfo(t);return o?void(0==o.templet_type?d.goPage(t):2==o.templet_type?f.go("/insuranceMyProdDetail2/"+e.policyNo):1==o.templet_type&&g.goPage(t)):void a.makeToast("产品信息拉取中，请稍后重试","short")})},e.onHJViewActive=function(){I()},e.onHJViewDisActive=function(){},I()}]);app.controller("MyFinancialStockController",["$scope","$stateParams","utils","cgiService","essential","cache","webankCommonService","GLOBAL_CONSTANT","TransRecordService","StockMyProdDetailService","InsuranceMyProdDetailService","$ionicScrollDelegate","$timeout","dataService","ProdInfoService","LocationService",function(t,e,o,a,n,r,s,i,c,u,_,l,d,f,m,v){var p,D=t.func={},k=t.data={};k.stockNormalList={},k.stockCount=0,k.stockListArr=[];var y=function(){k.stockNormalList={},k.stockCount=0,k.stockListArr=[],F(),L()},F=function(){p=r.getCacheInfo("wealthNew");var t=s.parseRawWealthData_V3(p);k.totalGJAmount=parseFloat(t.GJAmount).toFixed(2)},L=function(){N(),I()},N=function(){if(p&&p.finance_wealth&&p.finance_wealth.fund_cycle)for(var t in p.finance_wealth.fund_cycle){var e=m.getProdInfo(p.finance_wealth.fund_cycle[t].prod_code);e&&2==e.product_type?A(p.finance_wealth.fund_cycle[t]):e||1!=p.finance_wealth.fund_cycle[t].prod_type||A(p.finance_wealth.fund_cycle[t])}k.stockCount=Object.keys(k.stockNormalList).length,k.stockCount>0&&C()},A=function(t){var e=m.getProdInfo(t.prod_code),o={};if(o.amount=0,o.prodName=e?e.on_sale_desc:"股票基金",o.redeemCount=0,o.onWayDescList=[],o.unit="元",o.prodCode=t.prod_code,k.stockNormalList[t.prod_code]=o,o.sortStatus=i.FINANCIAL_PRODUCT_SORT.INIT_HEAVY,t.refund_amount&&t.refund_amount>0){o.amount+=parseFloat(t.refund_amount),o.stateDesc="退款中";var a=3;e&&e.refund_arrival_days&&(a=e.refund_arrival_days);var n="您有"+parseFloat(t.refund_amount).toFixed(2)+"元退款确认中，预计"+parseInt(a)+"个工作日完成";o.onWayDescList.push(n),o.sortStatus+=i.FINANCIAL_PRODUCT_SORT.REDEEMING_HEAVY}if(t.redeem_in_trans_confirming>0){o.amount+=parseFloat(t.redeem_in_trans_confirming)*parseFloat(t.net_value),o.stateDesc="赎回中";var n="您有"+parseFloat(t.redeem_in_trans_confirming).toFixed(2)+"份资金正在赎回中，完成时间可查看详情";o.onWayDescList.push(n),o.sortStatus+=i.FINANCIAL_PRODUCT_SORT.REDEEMING_HEAVY}if(t.redeem_in_trans_confirmed>0){o.amount+=parseFloat(t.redeem_in_trans_confirmed),o.stateDesc="赎回中";var n="您有"+t.redeem_in_trans_confirmed+"元资金正在赎回中，完成时间可查看详情";o.onWayDescList.push(n),o.sortStatus+=i.FINANCIAL_PRODUCT_SORT.REDEEMING_HEAVY}if(t.buy_in_trans>0){o.amount+=parseFloat(t.buy_in_trans),o.stateDesc="份额确认中";var n="您有"+parseFloat(t.buy_in_trans).toFixed(2)+"元资金待确认份额，完成时间可查看详情";o.onWayDescList.push(n),o.sortStatus+=i.FINANCIAL_PRODUCT_SORT.CONFIRMING_HEAVY}t.available_vol>0&&(o.amount+=parseFloat(t.available_vol)*parseFloat(t.net_value),o.stateDesc="暂无盈亏",o.sortStatus+=i.FINANCIAL_PRODUCT_SORT.HOLD_HEAVY),o.amount=parseFloat(o.amount).toFixed(2)},C=function(){var t=function(t,e,a,n,r){for(var s in n){var i=n[s],c=r[i],u=!1,_=null;for(var l in c){var d=c[l];if(d.prod_code==t.prodCode){parseFloat(d.income)>=0?(t.yesterdayIncome=parseFloat(d.income).toFixed(2),t.cls="up"):parseFloat(d.income)<0&&(t.yesterdayIncome=parseFloat(-1*d.income).toFixed(2),t.cls="dw"),u=!0;break}}if(u){_=o.getYYYYMMDDStringByDate(e)==i?"昨日":o.getYYYYMMDDStringByDate(a)==i?"前日":i.substring(4,6)+"月"+i.substring(6,8)+"日",t.incomeDateDesc=_;break}}},e=function(e){for(var a in k.stockNormalList){var n=k.stockNormalList[a];n.yesterdayIncome="",n.cls="",n.incomeDateDesc=""}if(e){var r=Object.keys(e);if(r.length<=0)return;r.sort(function(t,e){return e-t});var s=o.getDate();s.setDate(s.getDate()-1);var i=o.getDate();i.setDate(i.getDate()-2);for(var a in k.stockNormalList){var n=k.stockNormalList[a];t(n,s,i,r,e)}}};s.getIncomeHistoryAndUpdate().then(e,function(){},e)},I=function(){k.stockListArr=[];for(var t in k.stockNormalList)k.stockListArr.push(k.stockNormalList[t]);if(k.stockCount=k.stockListArr.length,k.stockCount>0){var e=s.getFinancialProductsBuyTime();k.stockListArr.sort(function(t,o){if(t.sortStatus!=o.sortStatus)return o.sortStatus-t.sortStatus;var a=e[t.prodCode]||0,n=e[o.prodCode]||0;return n-a})}};D.back=function(){v.backPage()},D.onCheckTransLog=function(){c.goPage()},D.onClickStock=function(t){var e=t.prodCode;m.requestProdInfo([e]).then(function(){n.resolve()},function(){o.makeToast("产品信息拉取中，请稍后重试","short"),n.reject()}).then(function(){var t=m.getProdInfo(e);return t?void u.goPage(e):void o.makeToast("产品信息拉取中，请稍后重试","short")})},t.onHJViewActive=function(){y()},t.onHJViewDisActive=function(){},y()}]);app.controller("MyFinancialGoldController",["$scope","$stateParams","utils","cgiService","essential","cache","webankCommonService","GLOBAL_CONSTANT","TransRecordService","StockMyProdDetailService","InsuranceMyProdDetailService","$ionicScrollDelegate","$timeout","dataService","ProdInfoService","LocationService","$filter","GoldCurrentService",function(t,a,e,o,r,n,c,i,l,d,s,u,m,_,g,p,h,v){var f=function(){t.data={},t.data.goldList={},t.data.goldCount=0,t.data.goldListArr=[],t.data.yesterdayStr=e.getYesterdayString(),y(),C(),I(),G()},y=function(){var a=n.getCacheInfo("wealthNew"),e=c.parseRawWealthData_V3(a);t.data.myData=c.getMyGoldCurrentProduct(a),t.data.prodInfo=g.getProdInfo("10001"),t.data.myData.available_amount=parseFloat(h("cutGoldWeight")(t.data.myData.available_vol))*t.data.prodInfo.last_close_price,t.data.yesterdayIncome=0,t.data.totalIncome=0,t.data.myData.last_income_date==t.data.yesterdayStr&&t.data.myData.last_income>0&&(t.data.yesterdayIncome+=h("cutGoldWeight")(t.data.myData.last_income)),t.data.myData.total_income>0&&(t.data.totalIncome+=h("cutGoldWeight")(t.data.myData.total_income)),t.data.showWeight=!0,t.data.totalGoldAmount=parseFloat(e.GoldAmount),t.data.totalGoldAmountWeight=parseFloat(e.GoldAmountWeight)},G=function(){var a=v.getGoldPrice();a&&a.salePrice&&(t.data.holdIncome=(a.salePrice-t.data.myData.avg_cost)*t.data.totalGoldAmountWeight),v.refreshGoldPrice().then(function(a){a.ret_data&&a.ret_data.askPrice&&a.ret_data.bidPrice&&(t.data.holdIncome=(a.ret_data.bidPrice-t.data.myData.avg_cost)*t.data.totalGoldAmountWeight)})};t.onClickTab=function(){t.data.showWeight=t.data.showWeight?!1:!0};var C=function(){P(),S()},I=function(){var t=v.refreshGoldCurrentRequest();t.then(L);var a=v.refreshGoldCurrentInvestment();a.then(D);var e=v.refreshGoldCurrentExtract();e.then(w),o.requestUserWealth()},L=function(){var a=v.getGoldCurrentRequest();if(a&&(tracelog("开始解析挂单数据"),t.data.requestList=[],a&&a.cycle))for(var e in a.cycle){var o=a.cycle[e];"0"==o.status?"1"==o.order_type?t.data.requestList.push(o.application_weight>0?"您有一笔挂单买入("+o.application_weight+"克)等待成交":o.application_amount>0?"您有一笔挂单买入("+o.application_amount+"元)等待成交":"您有一笔挂单买入等待成交"):"2"==o.order_type&&t.data.requestList.push(o.application_weight>0?"您有一笔挂单卖出("+o.application_weight+"克)等待成交":"您有一笔挂单卖出等待成交"):"2"==o.status||"3"==o.status||"4"==o.status}},D=function(){var a=v.getGoldCurrentInvestment();a&&(tracelog("开始解析定投数据"),a&&a.jobList&&(t.data.goldCurrentInvestmentCount=a.jobList.length))},w=function(){var a=v.getGoldCurrentExtract();if(a&&(tracelog("开始解析提金数据"),t.data.extractList=[],a&&a.cycle))for(var e in a.cycle){var o=a.cycle[e];"01"==o.status||"03"==o.status||"04"==o.status?t.data.extractList.push("您有1笔提金申请（"+parseFloat(o.amounts)+"克），待确认"):"05"==o.status||"12"==o.status||"13"==o.status?t.data.extractList.push("您有1笔提金申请（"+parseFloat(o.amounts)+"克）已确认，待到货通知"):"07"==o.status?t.data.extractList.push("您有1笔提金申请（"+parseFloat(o.amounts)+"克）已到货，待领取"):"08"==o.status&&t.data.extractList.push("您有1笔提金申请（"+parseFloat(o.amounts)+"克）已领取完成")}},P=function(){var a=n.getCacheInfo("wealthNew");if(a&&a.finance_wealth&&a.finance_wealth.pmes_cycle)for(var e in a.finance_wealth.pmes_cycle){var o=a.finance_wealth.pmes_cycle[e];"T"==o.prod_type&&A(o)}t.data.goldCount=Object.keys(t.data.goldList).length+1},A=function(a){var e={},o=g.getProdInfo(a.prod_code);e.prodName=o?o.prod_name:"理财产品",e.prodCode=a.prod_code,o&&(e.incomeRate=parseFloat(100*a.interest_rate).toFixed(2)),e.availableVol=a.available_vol,e.availableAmount=parseFloat(h("cutGoldWeight")(a.available_vol))*t.data.prodInfo.last_close_price,a.last_income>0&&a.last_income_date&&(e.lastIncomeDate=a.last_income_date,e.lastIncome=a.last_income),a.last_income_date==t.data.yesterdayStr&&(t.data.yesterdayIncome+=h("cutGoldWeight")(a.last_income)),a.total_income>0&&(t.data.totalIncome+=h("cutGoldWeight")(a.total_income)),e.arrivalAccountDate=a.arrival_account_date,e.acctNo=a.pm_acct_no,t.data.goldList[a.pm_acct_no]=e},S=function(){if(t.data.goldCount>0)for(var a in t.data.goldList)t.data.goldListArr.push(t.data.goldList[a]);t.data.goldListArr.sort(function(t,a){return parseInt(t.arrivalAccountDate)-parseInt(a.arrivalAccountDate)})};t.onClickMyCurrentGoldProduct=function(){p.go("/goldCurrentMyProdDetail")},t.onClickGoldFixTime=function(t){p.go("/goldFixTimeMyProdDetail/"+t.acctNo)},t.back=function(){p.backPage()},t.onCheckTransLog=function(){l.goPage()},t.onHJViewActive=function(){f()},t.onHJViewDisActive=function(){},f()}]);app.controller("FinancialCalendarEventListController",["$scope","$location","$stateParams","$ionicGesture","$sce","$timeout","$ionicScrollDelegate","utils","cache","cgiService","GLOBAL_CONSTANT","ProdInfoService","LocationService","SalaryPlanService","MortgatePlanService","TransOutScenePlanService","essential","PlanService","webankCommonService","InsuranceMyProdDetailService","PlanServiceV2",function(t,a,e,n,s,o,r,i,c,l,p,d,m,u,g,v,D,f,y,_,Y){var A=t.data={},h=t.func={},C=function(){A.myScroll=r.$getByHandle("myCalendarEventListContent"),A.noMoreData=!1,A.today=i.getDate(),A.todayMonthLastDate=new Date(parseInt(A.today.getFullYear()),parseInt(A.today.getMonth()),0),A.todayStr=i.getYYYYMMDDStringByDate(A.today),A.todayMonthLastDateStr=i.getYYYYMMDDStringByDate(A.todayMonthLastDate),A.currentMonthFirstDate=new Date(parseInt(A.today.getFullYear()),parseInt(A.today.getMonth()),1);var t=A.today.getMonth(),a=A.today.getFullYear();t++,t>11&&(t-=12,a++),A.currentMonthLastDate=new Date(parseInt(a),parseInt(t),0),A.monthList=[],S(),A.dayEventList={},A.dayEventListHtml="",A.dayEventListTemp={},A.productInComeListCalendarTemp=[],A.montEventListData=[],A.noMoreEventsData=!1,A.productCodeList=[],A.productIncomedList={};var e=c.getCacheInfo("calendar_init_param");if(e&&e.InitCalendarEventList)e.InitCalendarEventList=!1,c.setCacheInfo("calendar_init_param",e),T(A.monthList[0].monthFirstDate,A.monthList[12].monthLastDate);else{var n=c.getCacheInfo("monthsCalendarData");n&&!i.isEmptyObject(n)?L(n,A.today,A.monthList[12].monthLastDate):T(A.monthList[0].monthFirstDate,A.monthList[12].monthLastDate)}w()},L=function(t,a,e){if(t&&t.calendarEventList&&t.calendarEventList.length>0){var n=t.calendarEventList[0].jobList;if(n&&n.length>0)for(var s=0;s<n.length;s++){var o=n[s].next_time;n[s].category=parseInt(n[s].category)?parseInt(n[s].category):p.CALANDAR_CATAGRY.NONE,A.dayEventListTemp[o]?A.dayEventListTemp[o].push(n[s]):(A.dayEventListTemp[o]=[],A.dayEventListTemp[o].push(n[s]))}var r=t.calendarEventList[2].earningList;if(r&&r.length>0)for(var l=0;l<r.length;l++){var o=r[l].date;if(o==A.todayStr){var m=r[l].prodCode;m&&(A.productIncomedList[m]=r[l])}var u=(parseInt(new Number(r[l].principal))+parseFloat(new Number(r[l].earning))).toFixed(2),g={productArrivalTotalIncome:u,category:p.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:r[l].date,prodName:r[l].prodName,prodCode:r[l].prodCode,principal:parseInt(new Number(r[l].principal)),earning:parseFloat(new Number(r[l].earning)).toFixed(2),sent1:r[l].sent1?r[l].sent1:"",peroid:r[l].peroid?r[l].peroid:"",earningStartDate:r[l].earningStartDate?r[l].earningStartDate:"",status:r[l].status,isBefore:!0,policyNo:""};A.productCodeList.push(r[l].prodCode),A.productInComeListCalendarTemp.push(g)}}var v=c.getCacheInfo("wealthNew");M(v,a,e);for(var f=0;f<A.productInComeListCalendarTemp.length;f++){var y=A.productInComeListCalendarTemp[f].arrivalDateStr;A.dayEventListTemp[y]?A.dayEventListTemp[y].push(A.productInComeListCalendarTemp[f]):(A.dayEventListTemp[y]=[],A.dayEventListTemp[y].push(A.productInComeListCalendarTemp[f]))}angular.forEach(A.dayEventListTemp,function(t,a){for(var e=A.monthList.length,n=a,s=0;e>s;s++){var o=i.getYYYYMMDDStringByDate(A.monthList[s].monthFirstDate),r=i.getYYYYMMDDStringByDate(A.monthList[s].monthLastDate);if(n>=o&&r>=n){A.dayEventList[o]?A.dayEventList[o][a]=t:(A.dayEventList[o]={},A.dayEventList[o][a]=t);break}}}),d.requestProdInfo(A.productCodeList).then(function(){D.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),D.reject()}).then(function(){I()})},T=function(t,a){A.showLoading=!0,D.dimStatusBarBackground(!0);var e="",n="";e=i.getYYYYMMDDStringByDate(t),n=i.getYYYYMMDDStringByDate(a);var s={startTime:e,endTime:n};l.requestCalendarInfo(s,"monthsCalendarData").then(function(t){A.showLoading=!1,D.dimStatusBarBackground(!1),t.ret_data&&L(t.ret_data,A.today,A.monthList[12].monthLastDate)},function(t){A.showLoading=!1,D.dimStatusBarBackground(!1),tracelog("获取计划数据与产品预告配制时间轴信息失败, 原因："+t.ret_msg)})},S=function(){for(var t,a,e,n,s,o=A.currentMonthFirstDate,r=1;7>r;r++){s={},t=o.getMonth()-1,a=o.getFullYear(),0>t&&(t=11,a--),e=new Date(a,t,1);var i=e.getMonth(),c=e.getFullYear();11==i?(i=0,c++):i++,n=new Date(parseInt(c),parseInt(i),0),o=e,s.monthFirstDate=e,s.monthLastDate=n,A.monthList.push(s)}A.monthList.reverse();var l={monthFirstDate:A.currentMonthFirstDate,monthLastDate:A.currentMonthLastDate};A.monthList.push(l);for(var p=1;7>p;p++){s={},t=A.currentMonthFirstDate.getMonth()+p,a=A.currentMonthFirstDate.getFullYear(),11==t&&(t=1,a++),e=new Date(a,t,1);var i=e.getMonth(),c=e.getFullYear();11==i?(i=0,c++):i++,n=new Date(parseInt(c),parseInt(i),0),s.monthFirstDate=e,s.monthLastDate=n,A.monthList.push(s)}},M=function(t,a,e){var n=[],s=[];if(t&&t.finance_wealth&&t.finance_wealth.fund_cycle)for(var o in t.finance_wealth.fund_cycle)s.push(t.finance_wealth.fund_cycle[o].prod_code),n.push(t.finance_wealth.fund_cycle[o]);if(t&&t.finance_wealth&&t.finance_wealth.bank_cycle)for(var o in t.finance_wealth.bank_cycle)s.push(t.finance_wealth.bank_cycle[o].prod_code),n.push(t.finance_wealth.bank_cycle[o]);for(var o=0;o<s.length;o++){var r=d.getProdInfo(s[o]);if(r){if(1!=r.product_type&&3!=r.product_type||0!=r.templet_type)continue;var c,l=r.value_date,m=parseInt(l,10)>20151116&&r.value_end_date;m?c=i.getDateByYYYYMMDDString(r.value_end_date):(c=i.getDateByYYYYMMDDString(l),c.setDate(c.getDate()+parseInt(r.life_time)-1));var u,g=(i.getYYYYMMDDStringByDate(c),0),v=0,D=0;if(u=r.arrival_account_date?i.getDateByYYYYMMDDString(r.arrival_account_date):i.getNextWorkDay(1,c),n[o].buy_in_trans>0?(g=parseFloat(n[o].buy_in_trans)+parseFloat(n[o].buy_in_trans)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,v=parseFloat(n[o].buy_in_trans)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,D=parseFloat(n[o].buy_in_trans)):n[o].available_vol>0&&(g=parseFloat(n[o].avg_cost)+parseFloat(n[o].avg_cost)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,v=parseFloat(n[o].avg_cost)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,D=parseFloat(n[o].avg_cost)),g>0){var f=i.getYYYYMMDDStringByDate(u);if(f>=i.getYYYYMMDDStringByDate(a)&&i.getYYYYMMDDStringByDate(e)>=f&&g>0){if(f==A.todayStr&&!i.isEmptyObject(A.productIncomedList)&&A.productIncomedList[s[o]]&&!i.isEmptyObject(A.productIncomedList[s[o]]))continue;var y={productArrivalTotalIncome:g.toFixed(2),category:p.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:f,prodName:r.on_sale_desc+"("+r.value_date.substr(4,4)+")",prodCode:s[o],principal:D.toFixed(2),earning:v.toFixed(2),isBefore:!1,policyNo:n[o].policyNo?n[o].policyNo:""};A.productInComeListCalendarTemp.push(y),A.productCodeList.push(s[o])}}}}},P=function(t,a){for(var e=[],n=0;n<t.length;n++){var s={};s.event=t[n];var o="",r=!1;t[n].next_time==A.todayStr&&(!t[n].status||"5"!=t[n].status&&"6"!=t[n].status&&"7"!=t[n].status||(o="before",r=!0));var c=parseInt(t[n].category),l="",m="",u="";1==t[n].job_type||3==t[n].job_type?(l="转入",m="add",u="+"):(l="转出",m="sub",u="-");var g="";switch(c){case p.CALANDAR_CATAGRY.SALARY:g+='            <div class="info-wrap iw-a">',g+='                <i class="save"></i>',g+='                <span class="name">',g+=t[n].remark,g+="                </span>",g+='                <span class="num ',g+=m,g+='" >',g+=u+parseFloat(t[n].amount).toFixed(2),g+="                </span>",g+="            </div>",g+='            <div class="info-wrap iw-b"><span class="to">',g+=l+(t[n].to?t[n].to:"活期+"),g+="</span>",g+=a?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':r?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',g+="</div>";break;case p.CALANDAR_CATAGRY.MORTGAGE:g+='            <div class="info-wrap iw-a">',g+='                <i class="loan"></i>',g+='                <span class="name">',g+=t[n].remark,g+="                </span>",g+='                <span class="num ',g+=m,g+='" >',g+=u+parseFloat(t[n].amount).toFixed(2),g+="                </span>",g+="            </div>",g+='            <div class="info-wrap iw-b"><span class="to">',g+=l+(t[n].to?t[n].to:"活期+"),g+="</span>",g+=a?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':r?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',g+="</div>";break;case p.CALANDAR_CATAGRY.RESPECT_PARENT:g+='            <div class="info-wrap iw-a">',g+='                <i class="caring"></i>',g+='                <span class="name">',g+=t[n].remark,g+="                </span>",g+='                <span class="num ',g+=m,g+=' ">',g+=u+parseFloat(t[n].amount).toFixed(2),g+="                </span>",g+="            </div>",g+='            <div class="info-wrap iw-b"><span class="to">',g+=l+(t[n].to?t[n].to:"活期+"),g+="</span>",g+=a?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':r?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',g+="</div>";break;case p.CALANDAR_CATAGRY.PAY_RENT:g+='            <div class="info-wrap iw-a">',g+='                <i class="rent"></i>',g+='                <span class="name">',g+=t[n].remark,g+="                </span>",g+='                <span class="num ',g+=m,g+=' ">',g+=u+parseFloat(t[n].amount).toFixed(2),g+="                </span>",g+="            </div>",g+='            <div class="info-wrap iw-b"><span class="to">',g+=l+(t[n].to?t[n].to:"活期+"),g+="</span>",g+=a?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':r?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',g+="</div>";break;case p.CALANDAR_CATAGRY.ACCOUNT:g+='            <div class="info-wrap iw-a">',g+='                <i class="into"></i>',g+='                <span class="name">',g+="产品到账",g+="                </span>",g+='                <span class="num">',g+=t[n].productArrivalTotalIncome,g+="                </span>",g+="            </div>",g+='            <div class="info-wrap iw-b"><span class="to">';var v=d.getProdInfo(t[n].prodCode);if(!v)return void i.makeToast("产品信息拉取中，请稍后重试","short");g+=v.on_sale_desc+"("+v.value_date.substr(4,4)+")",g+="</span>",a?(t[n].succ=t[n].succ?t[n].succ:!0,g+=1==t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>'):g+=t[n].isBefore?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',g+="</div>";break;case p.CALANDAR_CATAGRY.NONE:g+='            <div class="info-wrap iw-a">',g+='                <i class="custom"></i>',g+='                <span class="name">',g+=t[n].remark,g+="                </span>",g+='                <span class="num ',g+=m,g+='" >',g+=u+parseFloat(t[n].amount).toFixed(2),g+="                </span>",g+="            </div>",g+='            <div class="info-wrap iw-b"><span class="to">',g+=l+(t[n].to?t[n].to:"活期+"),g+="</span>",g+=a?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':r?t[n].succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',g+="</div>"}s.evenItemtHtml=g,s.evenClass=o,e.push(s)}return e},I=function(){if(i.isEmptyObject(A.dayEventList))return void(A.noMoreEventsData=!0);var t={0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},e=!1;angular.forEach(A.dayEventList,function(a,n){var s={};s.monthFirstDate=i.getDateByYYYYMMDDString(n),s.dateList=[],angular.forEach(a,function(a,n){A.todayStr<=n&&!e&&(s.monthId="currentMonth",e=!0);var o={};o.date=i.getDateByYYYYMMDDString(n),o.eventList=[];var r=a,c=!1;o.dayClass="",A.todayStr>n&&(c=!0,o.dayClass="before"),o.weekenDesc=t[i.getDateByYYYYMMDDString(n).getDay()],o.eventList=P(r,c),s.dateList.push(o)}),A.montEventListData.push(s)}),a.hash("currentMonth"),o(function(){A.myScroll.anchorScroll(!1),A.myScroll.scrollBy(0,-15,!1),A.myScroll.resize()},1)};h.back=function(){m.backPage()},t.$on("$destroy",function(){}),t.onHJViewActive=function(){C()},t.onHJViewDisActive=function(){F()};var F=function(){},k=function(t){var a={};a.lastModifyTimestamp=t.last_modify_timestamp,a.name=t.remark,a.jobType=t.job_type,a.amount=parseFloat(t.amount).toFixed(2),a.typeDesc=1==t.job_type||3==t.job_type?"转入"+a.amount+"元":"转出"+a.amount+"元",a.nextTime=t.next_time,a.isRepeat=t.is_repeat,a.producCode=t.product_code,a.id=t.id,a.bankName=t.bank_name,a.bankNo=t.bank_no,a.cardNo=t.card_no,a.planInfo=t;var e=i.getDateByYYYYMMDDString(a.nextTime);e&&(a.dateDesc=1==a.isRepeat?"每月"+e.getDate()+"日":i.getYYYYMMDDStringByDate(e,"-")),A.commonPlanList.push(a)},R=function(t){for(var a in t)t[a].categry&&t[a].categry==p.PLAN_CATAGRY.SALARY?(A.salaryPlan={},A.salaryPlan.amountDesc="转入"+parseFloat(t[a].amount).toFixed(2)+"元",A.salaryPlan.dateDesc="每月"+i.getDateByYYYYMMDDString(t[a].next_time).getDate()+"日",A.salaryPlan.planInfo=t[a]):t[a].categry&&t[a].categry==p.PLAN_CATAGRY.MORTGAGE?(A.mortgage={},A.mortgage.amountDesc="转出"+parseFloat(t[a].amount).toFixed(2)+"元",A.mortgage.dateDesc="每月"+i.getDateByYYYYMMDDString(t[a].next_time).getDate()+"日",A.mortgage.planInfo=t[a]):t[a].categry&&t[a].categry==p.PLAN_CATAGRY.RESPECT_PARENT?(A.planForParent={},A.planForParent.amountDesc="转出"+parseFloat(t[a].amount).toFixed(2)+"元",A.planForParent.dateDesc="每月"+i.getDateByYYYYMMDDString(t[a].next_time).getDate()+"日",A.planForParent.planInfo=t[a]):t[a].categry&&t[a].categry==p.PLAN_CATAGRY.PAY_RENT?(A.planForRent={},A.planForRent.amountDesc="转出"+parseFloat(t[a].amount).toFixed(2)+"元",A.planForRent.dateDesc="每月"+i.getDateByYYYYMMDDString(t[a].next_time).getDate()+"日",A.planForRent.planInfo=t[a]):k(t[a]);A.commonPlanList.sort(function(t,a){return t.lastModifyTimestamp-a.lastModifyTimestamp})},N=function(t){R(t.ret_data),c.setCacheInfo("planList",t.ret_data)},E=function(){},b=function(){},w=function(){var t=c.getUserStatus();t==p.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(A.salaryPlan={},A.mortgage={},A.planForParent={},A.planForRent={},A.commonPlanList=[],l.requestTransPlans().then(N,E).then(b))};h.onClickEvent=function(t){var a=parseInt(t.category);if(a==p.CALANDAR_CATAGRY.ACCOUNT)if(t.isBefore){var e={};e.type="earning",e.prodName=t.prodName,e.principal=t.principal,e.earning=parseFloat(new Number(t.earning)).toFixed(2),e.prodCode=t.prodCode,e.sent1=t.sent1;var n=d.getProdInfo(t.prodCode);if(!n)return void i.makeToast("产品信息拉取中，请稍后重试","short");e.earningRate=n.income_rate,e.earningsStart=t.earningStartDate?i.getYYYYMMDDStringByDate(i.getDateByYYYYMMDDString(t.earningStartDate),"-"):i.getYYYYMMDDStringByDate(i.getDateByYYYYMMDDString(n.value_start_date),"-"),e.prodPeriod=t.peroid?t.peroid:n.life_time;var s={msg_type:"rich",extra:e};h.onClickArrivalDetail(s)}else h.onClickInsurance(t);else{var o="转入";o=1==t.job_type||3==t.job_type?"转入":"转出";var r={};switch(r.amountStr=parseFloat(t.amount).toFixed(2)+"元",r.dateStr=i.getYYYYMMDDStringByDate(i.getDateByYYYYMMDDString(t.next_time),"-"),r.bank_name=t.bank_name,r.trans_serno=t.bizNo,t.succ?r.status="成功":(r.status="失败",r.errLog=t.errMsg),r.financejob_name=t.remark,r.transTypeDesc=o,r.transTo=t.to,r.transFrom=t.from,a){case p.CALANDAR_CATAGRY.SALARY:t.next_time>A.todayStr?h.onClickModifySalaryPlan():t.next_time==A.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?h.onClickModifySalaryPlan():h.onClickItemLi(r);break;case p.CALANDAR_CATAGRY.MORTGAGE:t.next_time>A.todayStr?h.onClickModifyMortgagePlan():t.next_time==A.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?h.onClickModifyMortgagePlan():h.onClickItemLi(r);break;case p.CALANDAR_CATAGRY.RESPECT_PARENT:t.next_time>A.todayStr?h.onClickTransOutScenePlan(A.planForParent.planInfo,p.PLAN_CATAGRY.RESPECT_PARENT):t.next_time==A.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?h.onClickTransOutScenePlan(A.planForParent.planInfo,p.PLAN_CATAGRY.RESPECT_PARENT):h.onClickItemLi(r);break;case p.CALANDAR_CATAGRY.PAY_RENT:t.next_time>A.todayStr?h.onClickTransOutScenePlan(A.planForRent.planInfo,p.PLAN_CATAGRY.PAY_RENT):t.next_time==A.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?h.onClickTransOutScenePlan(A.planForRent.planInfo,p.PLAN_CATAGRY.PAY_RENT):h.onClickItemLi(r);break;case p.CALANDAR_CATAGRY.NONE:for(var c=t.remark,l={},m=0;m<A.commonPlanList.length;m++){var u=A.commonPlanList[m];if(c==u.name){l=u;break}}t.next_time>A.todayStr?h.onClickCommonPlan(l.planInfo):t.next_time==A.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?h.onClickCommonPlan(l.planInfo):h.onClickItemLi(r)}}},h.onClickItemLi=function(t){m.go("/transPlanDetail",null,{data:t})},h.onClickInsurance=function(t){d.requestProdInfo([t.prodCode]).then(function(){D.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),D.reject()}).then(function(){var a=d.getProdInfo(t.prodCode);return a?void(0==a.templet_type?_.goPage(t.prodCode):2==a.templet_type&&m.go("/insuranceMyProdDetail2/"+t.policyNo)):void i.makeToast("产品信息拉取中，请稍后重试","short")})},h.onClickArrivalDetail=function(t){m.go("/incomeArrival",null,t)},h.onClickCommonPlan=function(t){d.requestProdInfo(["001234"]).then(function(){D.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),D.reject()}).then(function(){var a=d.getProdInfo("001234");return a?void(y.isUserStrongAccount()?Y.goPage("",t):f.goPage("",t)):void i.makeToast("产品信息拉取中，请稍后重试","short")})},h.onClickModifySalaryPlan=function(){d.requestProdInfo(["001234"]).then(function(){D.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),D.reject()}).then(function(){var t=d.getProdInfo("001234");return t?void u.goPage("",A.salaryPlan&&A.salaryPlan.planInfo):void i.makeToast("产品信息拉取中，请稍后重试","short")})},h.onClickModifyMortgagePlan=function(){d.requestProdInfo(["001234"]).then(function(){D.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),D.reject()}).then(function(){var t=d.getProdInfo("001234");return t?void g.goPage("",A.mortgage&&A.mortgage.planInfo):void i.makeToast("产品信息拉取中，请稍后重试","short")})},h.onClickTransOutScenePlan=function(t,a){var e={scene:a,planInfo:t};d.requestProdInfo(["001234"]).then(function(){D.resolve()},function(){i.makeToast("产品信息拉取中，请稍后重试","short"),D.reject()}).then(function(){var t=d.getProdInfo("001234");return t?void v.goPage("",e):void i.makeToast("产品信息拉取中，请稍后重试","short")})},C()}]);app.controller("FinancialCalendarEventController",["$scope","$filter","$location","$stateParams","$ionicGesture","$sce","$timeout","$ionicScrollDelegate","LocationService","InsuranceMyProdDetailService","utils","cache","cgiService","GLOBAL_CONSTANT","ProdInfoService","ProdCommonActionService","webankCommonService","SalaryPlanService","MortgatePlanService","TransOutScenePlanService","essential","PlanService","localStorage","PlanServiceV2",function(t,e,a,n,r,o,s,i,d,c,l,D,u,g,p,y,Y,m,_,v,f,C,A,S){var M=t.data={},P=t.func={},h=(i.$getByHandle("calendarEventPredict"),function(){M.ShowPlatFormClass="ios",M.toddayAddClass="",(ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4||ionic.Platform.isIOS()&&ionic.Platform.version()<7)&&(M.ShowPlatFormClass="android-43"),ionic.Platform.isAndroid()?M.toddayAddClass=ionic.Platform.version()<4.4?"android-43":"android":ionic.Platform.isIOS()&&(M.toddayAddClass=ionic.Platform.version()<7?"android-43":"ios"),M.currentDate=l.getDateByYYYYMMDDString(n.dateStr),M.currentDateStr=n.dateStr,M.isShowCalendarButton="home"==n.origin?!0:!1,M.today=l.getDate(),M.todayStr=l.getYYYYMMDDStringByDate(M.today),T(),M.dayEventList=[],M.dayEventListData=[],M.dayProductForetList=[],M.dayProductData=[],M.noMoreEventData=!1,M.noMoreProductData=!1,M.productCodeList=[];var t,e;t=M.currentDate.getMonth()+7,e=M.currentDate.getFullYear(),t>11&&(t-=12,e++),M.maxDateForRequest=new Date(e,t,0),M.productIncomedList={};var a="day_list_calendar_data",r=D.getCacheInfo(a)||{},o=r[n.dateStr],s=D.getCacheInfo("calendar_init_param");s&&s.InitCalendarEventDate?(D.setCacheInfo(a,{}),k(!0),s.InitCalendarEventDate=!1,D.setCacheInfo("calendar_init_param",s)):o&&!l.isEmptyObject(o)?(M.dayEventList=o.dayEventList,M.dayProductForetList=o.dayProductForetList,E(),F(),M.noMoreEventData&&M.noMoreProductData&&k(!0)):k(!0),x()}),T=function(){M.headerWeekDateArray=[];for(var t,e={},a=3;a>=0;a--)e={dateClass:"",dateWeek:"",dateNum:"",dateStr:"",todayAddClass:""},t=new Date(M.currentDate.getTime()-864e5*a),l.getYYYYMMDDStringByDate(t)==M.todayStr?(l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+=l.getYYYYMMDDStringByDate(t)==l.getYYYYMMDDStringByDate(M.currentDate)?"today ":"today-2 ",e.todayAddClass=M.toddayAddClass):l.getYYYYMMDDStringByDate(t)<M.todayStr?l.getYYYYMMDDStringByDate(t)==l.getYYYYMMDDStringByDate(M.currentDate)?(l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+="past ",e.dateClass+="selected  ",e.todayAddClass=M.toddayAddClass):((0==t.getDay()||6==t.getDay())&&(e.dateClass="weekend "),l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+="past "):l.getYYYYMMDDStringByDate(t)==l.getYYYYMMDDStringByDate(M.currentDate)?(l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+="selected  ",e.todayAddClass=M.toddayAddClass):((0==t.getDay()||6==t.getDay())&&(e.dateClass+="weekend "),l.isHoliDay(t)&&(e.dateClass+="holiday ")),e.dateWeek=g.WEEKEY_ZW_DESC[t.getDay()],e.dateNum=t.getDate(),e.dateStr=l.getYYYYMMDDStringByDate(t),M.headerWeekDateArray.push(e);for(var n=1;3>=n;n++)e={dateClass:"",dateWeek:"",dateNum:"",dateStr:"",todayAddClass:""},t=new Date(M.currentDate.getTime()+864e5*n),l.getYYYYMMDDStringByDate(t)==M.todayStr?(l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+=l.getYYYYMMDDStringByDate(t)==l.getYYYYMMDDStringByDate(M.currentDate)?"today ":"today-2 ",e.todayAddClass=M.toddayAddClass):l.getYYYYMMDDStringByDate(t)<M.todayStr?l.getYYYYMMDDStringByDate(t)==l.getYYYYMMDDStringByDate(M.currentDate)?(l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+="past ",e.dateClass+="selected  ",e.todayAddClass=M.toddayAddClass):((0==t.getDay()||6==t.getDay())&&(e.dateClass="weekend "),l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+="past "):l.getYYYYMMDDStringByDate(t)==l.getYYYYMMDDStringByDate(M.currentDate)?(l.isHoliDay(t)&&(e.dateClass="holiday "),e.dateClass+="selected  ",e.todayAddClass=M.toddayAddClass):((0==t.getDay()||6==t.getDay())&&(e.dateClass+="weekend "),l.isHoliDay(t)&&(e.dateClass+="holiday ")),e.dateWeek=g.WEEKEY_ZW_DESC[t.getDay()],e.dateNum=t.getDate(),e.dateStr=l.getYYYYMMDDStringByDate(t),M.headerWeekDateArray.push(e)},L=function(t){var e=[],a=[];if(t&&t.finance_wealth&&t.finance_wealth.fund_cycle)for(var n in t.finance_wealth.fund_cycle)a.push(t.finance_wealth.fund_cycle[n].prod_code),e.push(t.finance_wealth.fund_cycle[n]);if(t&&t.finance_wealth&&t.finance_wealth.bank_cycle)for(var n in t.finance_wealth.bank_cycle)a.push(t.finance_wealth.bank_cycle[n].prod_code),e.push(t.finance_wealth.bank_cycle[n]);for(var n=0;n<a.length;n++){var r=p.getProdInfo(a[n]);if(r){if(1!=r.product_type&&3!=r.product_type||0!=r.templet_type)continue;var o,s=r.value_date,i=parseInt(s,10)>20151116&&r.value_end_date;i?o=l.getDateByYYYYMMDDString(r.value_end_date):(o=l.getDateByYYYYMMDDString(s),o.setDate(o.getDate()+parseInt(r.life_time)-1));var d,c=(l.getYYYYMMDDStringByDate(o),0),D=0,u=0;if(d=r.arrival_account_date?l.getDateByYYYYMMDDString(r.arrival_account_date):l.getNextWorkDay(1,o),e[n].buy_in_trans>0?(c=parseFloat(e[n].buy_in_trans)+parseFloat(e[n].buy_in_trans)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,D=parseFloat(e[n].buy_in_trans)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,u=parseFloat(e[n].buy_in_trans)):e[n].available_vol>0&&(c=parseFloat(e[n].avg_cost)+parseFloat(e[n].avg_cost)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,D=parseFloat(e[n].avg_cost)*parseFloat(r.income_rate)*parseInt(r.life_time)/100/365,u=parseFloat(e[n].avg_cost)),c>0){var y=l.getYYYYMMDDStringByDate(d);if(y==l.getYYYYMMDDStringByDate(M.currentDate)&&c>0){if(y==M.todayStr&&!l.isEmptyObject(M.productIncomedList)&&M.productIncomedList[a[n]]&&!l.isEmptyObject(M.productIncomedList[a[n]]))continue;var Y={productArrivalTotalIncome:c.toFixed(2),category:g.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:y,prodName:r.on_sale_desc+"("+r.value_date.substr(4,4)+")",prodCode:a[n],principal:u.toFixed(2),earning:D.toFixed(2),isBefore:!1,policyNo:e[n].policyNo?e[n].policyNo:""};M.dayEventList.push(Y),M.productCodeList.push(a[n])}}}}},k=function(t){t&&(M.showLoading=!0,f.dimStatusBarBackground(!0));var e=l.getYYYYMMDDStringByDate(M.maxDateForRequest),a={startTime:l.getYYYYMMDDStringByDate(M.currentDate),endTime:e};u.requestCalendarInfo(a).then(function(t){if(t.ret_data&&t.ret_data.calendarEventList){var e=t.ret_data.calendarEventList[0]&&t.ret_data.calendarEventList[0].jobList;if(e&&e.length>0)for(var a=0;a<e.length;a++)e[a].next_time==l.getYYYYMMDDStringByDate(M.currentDate)&&(e[a].category=parseInt(e[a].category)?parseInt(e[a].category):g.CALANDAR_CATAGRY.NONE,M.dayEventList.push(e[a]));if(l.getYYYYMMDDStringByDate(M.currentDate)>=M.todayStr){var n=t.ret_data.calendarEventList[1]&&t.ret_data.calendarEventList[1].produdtList;if(n&&n.length>0&&l.getYYYYMMDDStringByDate(M.currentDate)>=M.todayStr){n.sort(function(t,e){return t.saleDate-e.saleDate});for(var r={},o=0;o<n.length;o++){var s=n[o].endTime.replace(/[:]/g,""),i=l.getDateByDate8AndTime6String(n[o].endDate,s);if(M.todayStr<=l.getYYYYMMDDStringByDate(M.currentDate)&&M.today.getTime()<=i.getTime()){if(r[n[o].productCode]&&r[n[o].productCode].flag)continue;n[o].category=g.CALANDAR_CATAGRY.PRODUCT_FORE,M.dayProductForetList.push(n[o]),M.productCodeList.push(n[o].productCode),r[n[o].productCode]={flag:!0}}}}}var d=t.ret_data.calendarEventList[2]&&t.ret_data.calendarEventList[2].earningList;if(d&&d.length>0)for(var c=0;c<d.length;c++){var u=d[c].date;if(u==M.todayStr){var y=d[c].prodCode;y&&(M.productIncomedList[y]=d[c])}if(u==l.getYYYYMMDDStringByDate(M.currentDate)){var Y=(parseInt(new Number(d[c].principal))+parseFloat(new Number(d[c].earning))).toFixed(2),m={productArrivalTotalIncome:Y,category:g.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:d[c].date,prodName:d[c].prodName,prodCode:d[c].prodCode,principal:parseInt(new Number(d[c].principal)),earning:parseFloat(new Number(d[c].earning)).toFixed(2),sent1:d[c].sent1?d[c].sent1:"",peroid:d[c].peroid?d[c].peroid:"",earningStartDate:d[c].earningStartDate?d[c].earningStartDate:"",status:d[c].status,isBefore:!0,policyNo:""};M.productCodeList.push(d[c].prodCode),M.dayEventList.push(m)}}}if(M.showLoading=!1,f.dimStatusBarBackground(!1),l.getYYYYMMDDStringByDate(M.currentDate)>=M.todayStr){var _=D.getCacheInfo("wealthNew");L(_,M.currentDate)}var v="day_list_calendar_data",C=D.getCacheInfo(v)||{},A={dayEventList:M.dayEventList,dayProductForetList:M.dayProductForetList};C[M.currentDateStr]=A,D.setCacheInfo(v,C),M.productCodeList&&M.productCodeList.length>0?p.requestProdInfo(M.productCodeList).then(function(){f.resolve()},function(){l.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){E(),F()}):(E(),F())},function(t){M.showLoading=!1,f.dimStatusBarBackground(!1),tracelog("获取计划数据与产品预告配制时间轴信息失败, 原因："+t.ret_msg)})},E=function(){var t=M.dayProductForetList.length;if(0==t)return void(M.noMoreProductData=!0);for(var a=0;t>a;a++){var n=M.dayProductForetList[a],r={dayProductForetListHtml:"",event:n,productName:"",earningsRate:n.earningRate.toFixed(2),showDesc:""},o=n.endTime.replace(/[:]/g,""),s=n.saleTime.replace(/[:]/g,""),i=l.getDateByDate8AndTime6String(n.saleDate,s),d=(l.getDateByDate8AndTime6String(n.endDate,o),p.getProdInfo(n.productCode));if(!d)return void l.makeToast("产品信息拉取中，请稍后重试","short");1==d.product_type&&2==d.templet_type?(r.dayProductForetListHtml+=d.prod_name,r.productName=d.prod_name):1!=d.product_type&&3!=d.product_type||0!=d.templet_type?2==d.product_type?(r.dayProductForetListHtml+=e("longProdName")(d.on_sale_desc),r.productName=e("longProdName")(d.on_sale_desc)):(r.dayProductForetListHtml+=d.prod_name,r.productName=d.prod_name):(r.dayProductForetListHtml+=d.on_sale_desc,r.productName=d.on_sale_desc),M.currentDate.getTime()<=l.getDateByYYYYMMDDString(n.saleDate).getTime()?l.getYYYYMMDDStringByDate(M.currentDate)==n.saleDate?r.showDesc="今天"+l.getHHMMStringByDate(i,":")+"开售":M.currentDate.getTime()==l.getDateByYYYYMMDDString(n.saleDate).getTime()-864e5?r.showDesc="明天"+l.getHHMMStringByDate(i,":")+"开售":M.currentDate.getTime()==l.getDateByYYYYMMDDString(n.saleDate).getTime()-1728e5?r.showDesc="后天"+l.getHHMMStringByDate(i,":")+"开售":r.showDesc+=l.getDateByYYYYMMDDString(n.saleDate).getMonth()+1+"月"+l.getDateByYYYYMMDDString(n.saleDate).getDate()+"日开售":r.showDesc=l.getYYYYMMDDStringByDate(M.currentDate)==M.todayStr?"今天00:00开售":"当天00:00开售",M.dayProductData.push(r)}},F=function(){M.productShowZoneTitle=M.currentDateStr==M.todayStr?"今天可关注以下产品哦":"当天可关注以下产品哦";var t=M.dayEventList.length;if(0==t)return void(M.noMoreEventData=!0);for(var e=0;t>e;e++){var a={event:M.dayEventList[e],dayEventHtml:"",eventClass:""};!M.dayEventList[e].status||"5"!=M.dayEventList[e].status&&"6"!=M.dayEventList[e].status&&"7"!=M.dayEventList[e].status?M.dayEventList[e].category==g.CALANDAR_CATAGRY.ACCOUNT&&M.dayEventList[e].isBefore&&(a.eventClass="before"):a.eventClass="before",a.dayEventHtml+=N(M.dayEventList[e]),M.dayEventListData.push(a)}},N=function(t){var e="",a=parseInt(t.category),n="",r="",o="",s=!1;switch(l.getYYYYMMDDStringByDate(M.currentDate)<M.todayStr?s=!0:l.getYYYYMMDDStringByDate(M.currentDate)==M.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status||(s=!0)),1==t.job_type||3==t.job_type?(n="转入",r="add",o="+",M.productShowZoneTitle=M.currentDateStr==M.todayStr?"今天有钱到账，可关注以下产品哦":"当天有钱到账，可关注以下产品哦"):(n="转出",r="sub",o="-"),a){case g.CALANDAR_CATAGRY.SALARY:e+='<i class="save"></i>',e+='<div class="con">',e+='   <div class="of"><span class="a">',e+=t.remark,e+='</span><span class="b ',e+=r,e+='">',e+=o+parseFloat(t.amount).toFixed(2),e+="    </span></div>",e+='   <div class="of"><span class="c">',e+=n+(t.to?t.to:"活期+"),e+="       </span>",e+=s?t.succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',e+="</div>",e+="</div>";break;case g.CALANDAR_CATAGRY.MORTGAGE:e+='<i class="loan"></i>',e+='<div class="con">',e+='   <div class="of"><span class="a">',e+=t.remark,e+='</span><span class="b ',e+=r,e+='">',e+=o+parseFloat(t.amount).toFixed(2),e+="    </span></div>",e+='   <div class="of"><span class="c">',e+=n+(t.to?t.to:"活期+"),e+="       </span>",e+=s?t.succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',e+="</div>",e+="</div>";break;case g.CALANDAR_CATAGRY.RESPECT_PARENT:e+='<i class="caring"></i>',e+='<div class="con">',e+='   <div class="of"><span class="a">',e+=t.remark,e+='</span><span class="b ',e+=r,e+='">',e+=o+parseFloat(t.amount).toFixed(2),e+="    </span></div>",e+='   <div class="of"><span class="c">',e+=n+(t.to?t.to:"活期+"),e+="       </span>",e+=s?t.succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',e+="</div>",e+="</div>";break;case g.CALANDAR_CATAGRY.PAY_RENT:e+='<i class="rent"></i>',e+='<div class="con">',e+='   <div class="of"><span class="a">',e+=t.remark,e+='</span><span class="b ',e+=r,e+='">',e+=o+parseFloat(t.amount).toFixed(2),e+="    </span></div>",e+='   <div class="of"><span class="c">',e+=n+(t.to?t.to:"活期+"),e+="       </span>",e+=s?t.succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',e+="</div>",e+="</div>";break;case g.CALANDAR_CATAGRY.ACCOUNT:M.productShowZoneTitle=M.currentDateStr==M.todayStr?"今天有钱到账，可关注以下产品哦":"当天有钱到账，可关注以下产品哦",e+='<i class="into"></i>',e+='<div class="con">',e+='   <div class="of"><span class="a">',e+="产品到账",e+='</span><span class="b">',e+=t.productArrivalTotalIncome,e+="    </span></div>",e+='   <div class="of"><span class="c">';var i=p.getProdInfo(t.prodCode);if(!i)return void l.makeToast("产品信息拉取中，请稍后重试","short");e+=i.on_sale_desc+"("+i.value_date.substr(4,4)+")",e+="       </span>",t.isBefore?(t.succ=t.succ?t.succ:!0,e+=t.succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>'):e+='<span class="msg">待执行</span>',e+="</div>",e+="</div>";break;case g.CALANDAR_CATAGRY.NONE:e+='<i class="custom"></i>',e+='<div class="con">',e+='   <div class="of"><span class="a">',e+=t.remark,e+='</span><span class="b ',e+=r,e+='">',e+=o+parseFloat(t.amount).toFixed(2),e+="    </span></div>",e+='   <div class="of"><span class="c">',e+=n+(t.to?t.to:"活期+"),e+="       </span>",e+=s?t.succ?'<span class="msg">成功</span>':'<span class="msg">失败</span>':'<span class="msg">待执行</span>',e+="</div>",e+="</div>"}return e},R=function(t){var e={};e.lastModifyTimestamp=t.last_modify_timestamp,e.name=t.remark,e.jobType=t.job_type,e.amount=parseFloat(t.amount).toFixed(2),e.typeDesc=1==t.job_type||3==t.job_type?"转入"+e.amount+"元":"转出"+e.amount+"元",e.nextTime=t.next_time,e.isRepeat=t.is_repeat,e.producCode=t.product_code,e.id=t.id,e.bankName=t.bank_name,e.bankNo=t.bank_no,e.cardNo=t.card_no,e.planInfo=t;var a=l.getDateByYYYYMMDDString(e.nextTime);a&&(e.dateDesc=1==e.isRepeat?"每月"+a.getDate()+"日":l.getYYYYMMDDStringByDate(a,"-")),M.commonPlanList.push(e)},B=function(t){for(var e in t)t[e].categry&&t[e].categry==g.PLAN_CATAGRY.SALARY?(M.salaryPlan.amountDesc="转入"+parseFloat(t[e].amount).toFixed(2)+"元",M.salaryPlan.dateDesc="每月"+l.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",M.salaryPlan.planInfo=t[e]):t[e].categry&&t[e].categry==g.PLAN_CATAGRY.MORTGAGE?(M.mortgage={},M.mortgage.amountDesc="转出"+parseFloat(t[e].amount).toFixed(2)+"元",M.mortgage.dateDesc="每月"+l.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",M.mortgage.planInfo=t[e]):t[e].categry&&t[e].categry==g.PLAN_CATAGRY.RESPECT_PARENT?(M.planForParent.amountDesc="转出"+parseFloat(t[e].amount).toFixed(2)+"元",M.planForParent.dateDesc="每月"+l.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",M.planForParent.planInfo=t[e]):t[e].categry&&t[e].categry==g.PLAN_CATAGRY.PAY_RENT?(M.planForRent.amountDesc="转出"+parseFloat(t[e].amount).toFixed(2)+"元",M.planForRent.dateDesc="每月"+l.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",M.planForRent.planInfo=t[e]):R(t[e]);M.commonPlanList.sort(function(t,e){return t.lastModifyTimestamp-e.lastModifyTimestamp})},I=function(t){B(t.ret_data),D.setCacheInfo("planList",t.ret_data)},b=function(){},w=function(){},x=function(){var t=D.getUserStatus();t==g.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(M.salaryPlan={},M.mortgage={},M.planForParent={},M.planForRent={},M.commonPlanList=[],u.requestTransPlans().then(I,b).then(w))};P.back=function(){d.backPage()},t.$on("$destroy",function(){G()}),t.onHJViewActive=function(){h()},t.onHJViewDisActive=function(){G()},P.onClickCalendar=function(){a.path("/financialCalendar/")},P.onClickCalenDarProduct=function(t){l.clickButtonReport("calendar_"+t.productCode),y.onClickProd(t.productCode)},P.onClickEvent=function(t){var a=parseInt(t.category);if(a==g.CALANDAR_CATAGRY.ACCOUNT)if(t.isBefore){var n={};n.type="earning",n.principal=t.principal,n.earning=parseFloat(new Number(t.earning)).toFixed(2),n.prodCode=t.prodCode,n.sent1=t.sent1;var r=p.getProdInfo(t.prodCode);if(!r)return void l.makeToast("产品信息拉取中，请稍后重试","short");n.prodName=1==r.product_type&&2==r.templet_type?r.prod_name:1!=r.product_type&&3!=r.product_type||0!=r.templet_type?2==r.product_type?e("longProdName")(r.on_sale_desc)+"("+r.on_sale_code+")":r.prod_name:r.on_sale_desc+"("+r.value_date.substr(4,4)+")",n.earningRate=r.income_rate,n.earningsStart=t.earningStartDate?l.getYYYYMMDDStringByDate(l.getDateByYYYYMMDDString(t.earningStartDate),"-"):l.getYYYYMMDDStringByDate(l.getDateByYYYYMMDDString(r.value_start_date),"-"),n.prodPeriod=t.peroid?t.peroid:r.life_time;var o={msg_type:"rich",extra:n};P.onClickArrivalDetail(o)}else P.onClickInsurance(t);else{var s="转入";s=1==t.job_type||3==t.job_type?"转入":"转出";var i={};switch(i.amountStr=parseFloat(t.amount).toFixed(2)+"元",i.dateStr=l.getYYYYMMDDStringByDate(l.getDateByYYYYMMDDString(t.next_time),"-"),i.bank_name=t.bank_name,i.trans_serno=t.bizNo,t.succ?i.status="成功":(i.status="失败",i.errLog=t.errMsg),i.financejob_name=t.remark,i.transTypeDesc=s,i.transTo=t.to,i.transFrom=t.from,a){case g.CALANDAR_CATAGRY.SALARY:t.next_time>M.todayStr?P.onClickModifySalaryPlan():t.next_time==M.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?P.onClickModifySalaryPlan():P.onClickItemLi(i);break;case g.CALANDAR_CATAGRY.MORTGAGE:t.next_time>M.todayStr?P.onClickModifyMortgagePlan():t.next_time==M.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?P.onClickModifyMortgagePlan():P.onClickItemLi(i);break;case g.CALANDAR_CATAGRY.RESPECT_PARENT:t.next_time>M.todayStr?P.onClickTransOutScenePlan(M.planForParent.planInfo,g.PLAN_CATAGRY.RESPECT_PARENT):t.next_time==M.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?P.onClickTransOutScenePlan(M.planForParent.planInfo,g.PLAN_CATAGRY.RESPECT_PARENT):P.onClickItemLi(i);break;case g.CALANDAR_CATAGRY.PAY_RENT:t.next_time>M.todayStr?P.onClickTransOutScenePlan(M.planForRent.planInfo,g.PLAN_CATAGRY.PAY_RENT):t.next_time==M.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?P.onClickTransOutScenePlan(M.planForRent.planInfo,g.PLAN_CATAGRY.PAY_RENT):P.onClickItemLi(i);break;case g.CALANDAR_CATAGRY.NONE:for(var d=t.remark,c={},D=0;D<M.commonPlanList.length;D++){var u=M.commonPlanList[D];if(d==u.name){c=u;break}}t.next_time>M.todayStr?P.onClickCommonPlan(c.planInfo):t.next_time==M.todayStr&&(!t.status||"5"!=t.status&&"6"!=t.status&&"7"!=t.status)?P.onClickCommonPlan(c.planInfo):P.onClickItemLi(i)}}},P.onClickItemLi=function(t){d.go("/transPlanDetail",null,{data:t})},P.onClickInsurance=function(t){p.requestProdInfo([t.prodCode]).then(function(){f.resolve()},function(){l.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var e=p.getProdInfo(t.prodCode);return e?void(0==e.templet_type?c.goPage(t.prodCode):2==e.templet_type&&d.go("/insuranceMyProdDetail2/"+t.policyNo)):void l.makeToast("产品信息拉取中，请稍后重试","short")})},P.onClickArrivalDetail=function(t){d.go("/incomeArrival",null,t)},P.onClickCommonPlan=function(t){p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){l.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var e=p.getProdInfo("001234");return e?void(Y.isUserStrongAccount()?S.goPage("",t):C.goPage("",t)):void l.makeToast("产品信息拉取中，请稍后重试","short")})},P.onClickModifySalaryPlan=function(){p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){l.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void m.goPage("",M.salaryPlan&&M.salaryPlan.planInfo):void l.makeToast("产品信息拉取中，请稍后重试","short")})},P.onClickModifyMortgagePlan=function(){p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){l.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void _.goPage("",M.mortgage&&M.mortgage.planInfo):void l.makeToast("产品信息拉取中，请稍后重试","short")})},P.onClickTransOutScenePlan=function(t,e){var a={scene:e,planInfo:t};p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){l.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void v.goPage("",a):void l.makeToast("产品信息拉取中，请稍后重试","short")})};var G=function(){};P.setRedHotForproductFore=function(){var t=A.loadDataByUser("user_calendar_remind_set")||{},e=l.getYYYYMMDDStringByDate(M.currentDate);e>=M.todayStr&&(t[e]?t[e].flag=!t[e].flag:t[e]={flag:!0},A.saveDataByUser("user_calendar_remind_set",t)),M.product_fore_desc=t[e]&&t[e].flag?"已设置新产品上线提醒，点击取消":"有新产品的时候提醒我"},P.onClickWeekDate=function(t){if(t){M.currentDate=l.getDateByYYYYMMDDString(t),M.currentDateStr=t,T();var e,a;e=M.currentDate.getMonth()+7,a=M.currentDate.getFullYear(),e>11&&(e-=12,a++),M.maxDateForRequest=new Date(a,e,0),M.dayEventList=[],M.dayEventListData=[],M.dayProductForetList=[],M.dayProductData=[],M.noMoreEventData=!1,M.noMoreProductData=!1;var n="day_list_calendar_data",r=D.getCacheInfo(n)||{},o=r[t];!o||l.isEmptyObject(o)?k(!0):(M.dayEventList=o.dayEventList,M.dayProductForetList=o.dayProductForetList,E(),F(),M.noMoreEventData&&M.noMoreProductData&&k(!0)),s(function(){var t=H("calendarEventDelegateHandle");t&&t.resize(),t&&t.scrollTop(!0)})}};var H=function(t){return i._instances.filter(function(e){var a="hjdelegatehandle";if(e.$element&&e.$element[0]&&e.$element[0].attributes&&e.$element[0].attributes.getNamedItem(a)&&e.$element[0].attributes.getNamedItem(a).textContent==t){{e.$element[0].attributes[a].nodeValue}return!0}return!1})[0]};h()}]);app.controller("FinancialCalendarController",["$scope","$sce","$interval","$ionicModal","$filter","$ionicSlideBoxDelegate","$timeout","$location","$stateParams","cgiService","GLOBAL_CONSTANT","SalaryPlanService","MortgatePlanService","TransOutScenePlanService","cache","essential","webankCommonService","PlanService","PlanServiceV2","ProdInfoService","LocationService","$ionicGesture","$ionicScrollDelegate","utils","ProdCommonActionService","PopupService","localStorage","HJactionPop","BindCardVerifyPromptService",function(t,e,n,a,r,o,i,s,c,d,l,u,h,m,g,f,D,L,M,p,v,y,I,Y,C,S,A,_,T){var P=t.data={},x=t.func={},k=function(){P.ShowPlatFormClass="ios",(ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4||ionic.Platform.isIOS()&&ionic.Platform.version()<7)&&(P.ShowPlatFormClass="android-43"),P.inputDateStr=c.inputDateStr,P.today=Y.getDate(),P.todayStr=Y.getYYYYMMDDStringByDate(P.today),P.currentDate=new Date,P.currentMonthFirstDate=new Date(parseInt(P.today.getFullYear()),parseInt(P.today.getMonth()),1);var t=P.today.getMonth(),e=P.today.getFullYear();t++,t>11&&(t-=12,e++),P.currentMonthLastDate=new Date(parseInt(e),parseInt(t),0),P.monthList=[],P.dayEventListTemp={},P.productInComeListCalendarTemp=[],P.productForeshowListCalendar=[],O(),$(),P.initshowMonthSlideIndex=1,P.currentMonthIndex=6;for(var n=0;n<P.monthList.length;n++){var a=Y.getYYYYMMDDStringByDate(P.monthList[n].monthFirstDate);if(a&&a==P.inputDateStr){P.currentMonthIndex=n;break}}P.currentMonthList=[],0==P.currentMonthIndex?(P.currentMonthList[0]=P.monthList[P.monthList.length-1],P.currentMonthList[1]=P.monthList[P.currentMonthIndex],P.currentMonthList[2]=P.monthList[P.currentMonthIndex+1],o.disableSlideDir(1),i(function(){var t="#calendarDelegateHandle1";P.UnDragRightElement=angular.element(document.querySelector(t)),P.UnDragRightGesture=y.on("dragend",K,P.UnDragRightElement)})):P.currentMonthIndex==P.monthList.length-1?(P.currentMonthList[0]=P.monthList[P.currentMonthIndex-1],P.currentMonthList[1]=P.monthList[P.currentMonthIndex],P.currentMonthList[2]=P.monthList[0],o.disableSlideDir(2),i(function(){var t="#calendarDelegateHandle1";P.UnDragLeftElement=angular.element(document.querySelector(t)),P.UnDragLeftGesture=y.on("dragend",Q,P.UnDragLeftElement)})):(o.disableSlideDir(0),P.currentMonthList[0]=P.monthList[P.currentMonthIndex-1],P.currentMonthList[1]=P.monthList[P.currentMonthIndex],P.currentMonthList[2]=P.monthList[P.currentMonthIndex+1]),P.currentMonthSelected=P.currentMonthList[1].monthFirstDate.getMonth()+1,P.currentMonthSelected<10&&(P.currentMonthSelected="0"+P.currentMonthSelected),P.currentYearSelected=P.currentMonthList[1].monthFirstDate.getFullYear(),P.PLAN_CATAGRY=l.PLAN_CATAGRY,W(),P.productIncomedList={};var r=g.getCacheInfo("calendar_init_param");if(r&&r.InitCalendarAll)r.InitCalendarAll=!1,g.setCacheInfo("calendar_init_param",r),N(P.monthList[0].monthFirstDate,P.monthList[12].monthLastDate);else{var s=g.getCacheInfo("monthsCalendarData");s&&!Y.isEmptyObject(s)&&s.calendarEventList&&s.calendarEventList.length>0?G(s,P.today,P.monthList[12].monthLastDate):N(P.monthList[0].monthFirstDate,P.monthList[12].monthLastDate)}j(),P.isNewBeeGuideShown=!1,w()},w=function(){var t=A.loadDataByUser("newBeeGuideFlagCalendar");1!=t&&(P.isNewBeeGuideShown=!0,f.dimStatusBarBackground(!0))},F=function(){for(var t=0;t<P.monthList.length;t++){var e=P.monthList[t].dateRowList,n=P.monthList[t].monthDataList;if(!Y.isEmptyObject(n))for(var a=0;a<e.length;a++){var r=e[a],i=r.dateRowListArray,s=b(t,a,i,n);if(!Y.isEmptyObject(s)){var c=R(s,i);P.monthList[t].dateRowList[a].rowDatas=c}}}0==P.currentMonthIndex?(P.currentMonthList[0]=P.monthList[P.monthList.length-1],P.currentMonthList[1]=P.monthList[P.currentMonthIndex],P.currentMonthList[2]=P.monthList[P.currentMonthIndex+1]):P.currentMonthIndex==P.monthList.length-1?(P.currentMonthList[0]=P.monthList[P.currentMonthIndex-1],P.currentMonthList[1]=P.monthList[P.currentMonthIndex],P.currentMonthList[2]=P.monthList[0]):(P.currentMonthList[0]=P.monthList[P.currentMonthIndex-1],P.currentMonthList[1]=P.monthList[P.currentMonthIndex],P.currentMonthList[2]=P.monthList[P.currentMonthIndex+1]),o.update()},R=function(t,e){var n=[];angular.forEach(t,function(t){for(var e=0;e<t.length;e++)n.push(t[e])});var a=[],r=[],o=[{},{},{},{},{},{},{}];a[0]=o;var i=[0,0,0,0,0,0,0];r[0]=i;for(var s=0;s<n.length;s++){var c=E(n[s].startDay,n[s].endDay,e,!1);B(c,r,r.length,a,n[s])}return a},B=function(t,e,n,a,r){var o=[0,0,0,0,0,0,0];if(t.length==o.length)for(var i=!1,s=0;n>=s;s++){e[s]=e[s]?e[s]:o,a[s]=a[s]?a[s]:[{},{},{},{},{},{},{}];for(var c=e[s],d=a[s],u=0;u<t.length;u++){if(t[u]&e[s][u]){e[s]=c,a[s]=d,i=!1;break}if(t[u]){var h=parseInt(r.category),m=!1,g="",f="",D="";switch(r.startDay<P.todayStr?(m=!0,D="past"):r.startDay==P.todayStr&&(D="today",!r.status||"5"!=r.status&&"6"!=r.status&&"7"!=r.status||(m=!0,D="past")),h){case l.CALANDAR_CATAGRY.SALARY:g=m?r.succ?"pay-ok":"pay-fail":"pay";var L=parseInt(new Number(r.amount));f=L>=1e8?L%1e8?parseInt(L/1e8)+"亿+":parseInt(L/1e8)+"亿":L>=1e6?L%1e4?parseInt(L/1e4)+"万+":parseInt(L/1e4)+"万":L+"";break;case l.CALANDAR_CATAGRY.MORTGAGE:g=m?r.succ?"loan-ok":"loan-fail":"loan";var L=parseInt(new Number(r.amount));f=L>=1e8?L%1e8?parseInt(L/1e8)+"亿+":parseInt(L/1e8)+"亿":L>=1e6?L%1e4?parseInt(L/1e4)+"万+":parseInt(L/1e4)+"万":L+"";break;case l.CALANDAR_CATAGRY.RESPECT_PARENT:g=m?r.succ?"caring-ok":"caring-fail":"caring";var L=parseInt(new Number(r.amount));f=L>=1e8?L%1e8?parseInt(L/1e8)+"亿+":parseInt(L/1e8)+"亿":L>=1e6?L%1e4?parseInt(L/1e4)+"万+":parseInt(L/1e4)+"万":L+"";break;case l.CALANDAR_CATAGRY.PAY_RENT:g=m?r.succ?"rent-ok":"rent-fail":"rent";var L=parseInt(new Number(r.amount));f=L>=1e8?L%1e8?parseInt(L/1e8)+"亿+":parseInt(L/1e8)+"亿":L>=1e6?L%1e4?parseInt(L/1e4)+"万+":parseInt(L/1e4)+"万":L+"";break;case l.CALANDAR_CATAGRY.ACCOUNT:r.isBefore?(r.succ=r.succ?r.succ:!0,g=r.succ?"into-ok":"into-fail",D="past"):g="into";var L=parseInt(new Number(r.productArrivalTotalIncome));f=L>=1e8?L%1e8?parseInt(L/1e8)+"亿+":parseInt(L/1e8)+"亿":L>=1e6?L%1e4?parseInt(L/1e4)+"万+":parseInt(L/1e4)+"万":L+"";break;case l.CALANDAR_CATAGRY.NONE:g=m?r.succ?"custom-ok":"custom-fail":"custom";var L=parseInt(new Number(r.amount));f=L>=1e8?L%1e8?parseInt(L/1e8)+"亿+":parseInt(L/1e8)+"亿":L>=1e6?L%1e4?parseInt(L/1e4)+"万+":parseInt(L/1e4)+"万":L+"";break;default:g="",f=""}r.eventClass=g,r.eventAmount=f,r.amountClass=D,a[s][u]=r,i=!0,e[s][u]=1}}if(i)break}},E=function(t,e,n,a,r){var o=[0,0,0,0,0,0,0],i=-1,s=-1;if(!t||!e)return o;for(var c,d,l=!1,u=0,h=0,m=0;m<n.length;m++)Y.isEmptyObject(n[m])||!Y.isEmptyObject(n[m])&&a&&n[m].dateStr<P.todayStr||(l||(c=n[m].dateStr,h=m,l=!0),d=n[m].dateStr,u=m,t==n[m].dateStr&&(i=m),e==n[m].dateStr&&(s=m));if(c>e||t>d)return o;if(c>=t&&(i=h),e>=d&&(s=u),a&&n[s].dateStr==P.todayStr&&r){var g=P.today.getTime(),f=r.endTime.replace(/[:]/g,""),D=Y.getDateByDate8AndTime6String(r.endDate,f);if(g>D)return o}for(var L=i;s>=L;L++)o[L]=1;return o},b=function(t,e,n,a){for(var r={},o=0;o<n.length;o++)if(!Y.isEmptyObject(n[o])){var i=n[o].dateStr;a[i]&&(r[i]=a[i])}return r},N=function(t,e){P.showLoading=!0,f.dimStatusBarBackground(!0);var n="",a="";n=Y.getYYYYMMDDStringByDate(t),a=Y.getYYYYMMDDStringByDate(e);var r={startTime:n,endTime:a};d.requestCalendarInfo(r,"monthsCalendarData").then(function(t){t.ret_data&&G(t.ret_data,P.today,e),P.showLoading=!1,f.dimStatusBarBackground(!1)},function(t){P.showLoading=!1,f.dimStatusBarBackground(!1),tracelog("获取计划数据与产品预告配制时间轴信息失败, 原因："+t.ret_msg)})},G=function(t,e,n){if(t&&t.calendarEventList&&t.calendarEventList.length>0){var a=t.calendarEventList[0]&&t.calendarEventList[0].jobList;if(a&&a.length>0)for(var r=0;r<a.length;r++){var o=a[r].next_time;a[r].execute_time=o,a[r].startDay=o,a[r].endDay=o,a[r].category=parseInt(a[r].category)?parseInt(a[r].category):l.CALANDAR_CATAGRY.NONE,P.dayEventListTemp[o]?P.dayEventListTemp[o].push(a[r]):(P.dayEventListTemp[o]=[],P.dayEventListTemp[o].push(a[r]))}var i=t.calendarEventList[1]&&t.calendarEventList[1].produdtList;if(i&&i.length>0){for(var s=[],c=0;c<i.length;c++){var d=i[c];d.category=l.CALANDAR_CATAGRY.PRODUCT_FORE,d.startDay=d.saleDate,d.endDay=d.endDate,s.push(d)}P.productForeshowListCalendar=s}var u=t.calendarEventList[2]&&t.calendarEventList[2].earningList;if(u&&u.length>0)for(var h=0;h<u.length;h++){var o=u[h].date;if(o==P.todayStr){var m=u[h].prodCode;m&&(P.productIncomedList[m]=u[h])}for(var D=parseInt(u[h].earning)+parseInt(u[h].principal),L=-1,M=0;M<P.productInComeListCalendarTemp.length;M++){var v=P.productInComeListCalendarTemp[M].execute_time;if(v==o){L=M;break}}if(-1==L||Y.isEmptyObject(P.productInComeListCalendarTemp[L])){var y={productArrivalTotalIncome:D,category:l.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:o,startDay:o,endDay:o,execute_time:o,isBefore:!0};P.productInComeListCalendarTemp.push(y)}else P.productInComeListCalendarTemp[L].productArrivalTotalIncome+=D}}var I=g.getCacheInfo("wealthNew");U(I,e,n),P.dayEventList={};for(var C=0;C<P.productInComeListCalendarTemp.length;C++){var S=P.productInComeListCalendarTemp[C].arrivalDateStr;P.dayEventListTemp[S]?P.dayEventListTemp[S].push(P.productInComeListCalendarTemp[C]):(P.dayEventListTemp[S]=[],P.dayEventListTemp[S].push(P.productInComeListCalendarTemp[C]))}angular.forEach(P.dayEventListTemp,function(t,e){for(var n=P.monthList.length,a=e,r=0;n>r;r++){var o=Y.getYYYYMMDDStringByDate(P.monthList[r].monthFirstDate),i=Y.getYYYYMMDDStringByDate(P.monthList[r].monthLastDate);if(a>=o&&i>=a){P.dayEventList[o]?P.dayEventList[o][e]=t:(P.dayEventList[o]={},P.dayEventList[o][e]=t);break}}});for(var A=0;A<P.monthList.length;A++){var _=Y.getYYYYMMDDStringByDate(P.monthList[A].monthFirstDate);P.dayEventList[_]&&(P.monthList[A].monthDataList=P.dayEventList[_])}P.productCodeList&&P.productCodeList.length>0?p.requestProdInfo(P.productCodeList).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){F()}):F()},U=function(t,e,n){var a=[],r=[];if(t&&t.finance_wealth&&t.finance_wealth.fund_cycle)for(var o in t.finance_wealth.fund_cycle)r.push(t.finance_wealth.fund_cycle[o].prod_code),a.push(t.finance_wealth.fund_cycle[o]);if(t&&t.finance_wealth&&t.finance_wealth.bank_cycle)for(var o in t.finance_wealth.bank_cycle)r.push(t.finance_wealth.bank_cycle[o].prod_code),a.push(t.finance_wealth.bank_cycle[o]);for(var o=0;o<r.length;o++){var i=p.getProdInfo(r[o]);if(i){if(1!=i.product_type&&3!=i.product_type||0!=i.templet_type)continue;var s,c=i.value_date,d=parseInt(c,10)>20151116&&i.value_end_date;d?s=Y.getDateByYYYYMMDDString(i.value_end_date):(s=Y.getDateByYYYYMMDDString(c),s.setDate(s.getDate()+parseInt(i.life_time)-1));var u,h=(Y.getYYYYMMDDStringByDate(s),0),m=0,g=0;u=i.arrival_account_date?Y.getDateByYYYYMMDDString(i.arrival_account_date):Y.getNextWorkDay(1,s);var f=Y.getYYYYMMDDStringByDate(u);if(f>=Y.getYYYYMMDDStringByDate(e)&&Y.getYYYYMMDDStringByDate(n)>=f&&(a[o].buy_in_trans>0?(h=parseFloat(a[o].buy_in_trans)+parseFloat(a[o].buy_in_trans)*parseFloat(i.income_rate)*parseInt(i.life_time)/100/365,m=parseFloat(a[o].buy_in_trans)*parseFloat(i.income_rate)*parseInt(i.life_time)/100/365,g=parseFloat(a[o].buy_in_trans)):a[o].available_vol>0&&(h=parseFloat(a[o].avg_cost)+parseFloat(a[o].avg_cost)*parseFloat(i.income_rate)*parseInt(i.life_time)/100/365,m=parseFloat(a[o].avg_cost)*parseFloat(i.income_rate)*parseInt(i.life_time)/100/365,g=parseFloat(a[o].avg_cost)),h>0)){for(var D=-1,L=0;L<P.productInComeListCalendarTemp.length;L++){var M=P.productInComeListCalendarTemp[L].execute_time;if(M==f){D=L;break}}if(f==P.todayStr){if(!Y.isEmptyObject(P.productIncomedList)&&P.productIncomedList[r[o]]&&!Y.isEmptyObject(P.productIncomedList[r[o]]))continue;if(-1==D||Y.isEmptyObject(P.productInComeListCalendarTemp[D])){var v={productArrivalTotalIncome:h,category:l.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:f,startDay:f,endDay:f,execute_time:f,isBefore:!1};P.productInComeListCalendarTemp.push(v)}else P.productInComeListCalendarTemp[D].productArrivalTotalIncome+=h,P.productInComeListCalendarTemp[D].isBefore=!1}else if(-1==D||Y.isEmptyObject(P.productInComeListCalendarTemp[D])){var v={productArrivalTotalIncome:h,category:l.CALANDAR_CATAGRY.ACCOUNT,arrivalDateStr:f,startDay:f,endDay:f,execute_time:f,isBefore:!1};P.productInComeListCalendarTemp.push(v)}else P.productInComeListCalendarTemp[D].productArrivalTotalIncome+=h}}}},O=function(){for(var t,e,n,a,r,o=P.currentMonthFirstDate,i=1;7>i;i++){r={},t=o.getMonth()-1,e=o.getFullYear(),0>t&&(t=11,e--),n=new Date(e,t,1);var s=n.getMonth(),c=n.getFullYear();11==s?(s=0,c++):s++,a=new Date(parseInt(c),parseInt(s),0),o=n,r.monthFirstDate=n,r.monthLastDate=a,r.monthDataList={},r.dateRowList=[],P.monthList.push(r)}P.monthList.reverse();var d={monthFirstDate:P.currentMonthFirstDate,monthLastDate:P.currentMonthLastDate,monthDataList:{},dateRowList:[]};P.monthList.push(d);for(var l=1;7>l;l++){r={},t=P.currentMonthFirstDate.getMonth()+l,e=P.currentMonthFirstDate.getFullYear(),t>11&&(t-=12,e++),n=new Date(e,t,1);var s=n.getMonth(),c=n.getFullYear();s>11?(s-=12,c++):s++,a=new Date(parseInt(c),parseInt(s),0),r.monthFirstDate=n,r.monthLastDate=a,r.monthDataList={},r.dateRowList=[],P.monthList.push(r)}},j=function(){a.fromTemplateUrl("add-plan.html",{scope:t}).then(function(e){t.addPlanModal=e})},$=function(){for(var t=0;t<P.monthList.length;t++){var e=P.monthList[t].monthFirstDate,n=[],a=[],r=0,o=new Date(e.getFullYear(),e.getMonth(),1).getDate(),i=e.getMonth(),s=e.getFullYear();11==i?(i=0,s++):i++;for(var c=new Date(s,i,0).getDate(),d=o;c>=d;d++){var l=new Date(e.getFullYear(),e.getMonth(),d),u=Y.getYYYYMMDDStringByDate(l),h=l.getDate(),m={day:l,dayClass:"",dateStr:u,date:h,dayDescClass:"",flag:!1};u==P.todayStr?(Y.isHoliDay(l)&&(m.dayClass="holiday "),m.dayClass+="today ",ionic.Platform.isAndroid()?m.dayDescClass=ionic.Platform.version()<4.4?"android-43":"android":ionic.Platform.isIOS()&&(m.dayDescClass=ionic.Platform.version()<7?"android-43":"ios")):u<P.todayStr?((0==l.getDay()||6==l.getDay())&&(m.dayClass="weekend "),Y.isHoliDay(l)&&(m.dayClass="holiday "),m.dayClass+="past "):((0==l.getDay()||6==l.getDay())&&(m.dayClass+="weekend "),Y.isHoliDay(l)&&(m.dayClass+="holiday ")),a.push(m)}if(0!=a[0].day.getDay())for(var g=a[0].day.getDay(),f=0;g>f;f++)a.unshift({});for(var D=a.length,f=0;D>f;f++)0!=f&&f%7==0&&r++,n[r]||(n[r]={},n[r].dateRowListArray=[]),n[r].dateRowListArray.push(a[f]);if(n[r].dateRowListArray.length<7)for(var L=n[r].dateRowListArray.length,M=L;7>M;M++)n[r].dateRowListArray.push({});P.monthList[t].dateRowList=n}},q=function(t){var e={};e.lastModifyTimestamp=t.last_modify_timestamp,e.name=t.remark,e.jobType=t.job_type,e.amount=parseFloat(t.amount).toFixed(2),e.typeDesc=1==t.job_type||3==t.job_type?"转入"+e.amount+"元":"转出"+e.amount+"元",e.nextTime=t.next_time,e.isRepeat=t.is_repeat,e.producCode=t.product_code,e.id=t.id,e.bankName=t.bank_name,e.bankNo=t.bank_no,e.cardNo=t.card_no,e.planInfo=t;var n=Y.getDateByYYYYMMDDString(e.nextTime);n&&(e.dateDesc=1==e.isRepeat?"每月"+n.getDate()+"日":Y.getYYYYMMDDStringByDate(n,"-")),P.commonPlanList.push(e)},H=function(t){for(var e in t)t[e].categry&&t[e].categry==l.PLAN_CATAGRY.SALARY?(P.salaryPlan.amountDesc="转入"+parseFloat(t[e].amount).toFixed(2)+"元",P.salaryPlan.dateDesc="每月"+Y.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",P.salaryPlan.planInfo=t[e]):t[e].categry&&t[e].categry==l.PLAN_CATAGRY.MORTGAGE?(P.mortgage.amountDesc="转出"+parseFloat(t[e].amount).toFixed(2)+"元",P.mortgage.dateDesc="每月"+Y.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",P.mortgage.planInfo=t[e]):t[e].categry&&t[e].categry==l.PLAN_CATAGRY.RESPECT_PARENT?(P.planForParent.amountDesc="转出"+parseFloat(t[e].amount).toFixed(2)+"元",P.planForParent.dateDesc="每月"+Y.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",P.planForParent.planInfo=t[e]):t[e].categry&&t[e].categry==l.PLAN_CATAGRY.PAY_RENT?(P.planForRent.amountDesc="转出"+parseFloat(t[e].amount).toFixed(2)+"元",P.planForRent.dateDesc="每月"+Y.getDateByYYYYMMDDString(t[e].next_time).getDate()+"日",P.planForRent.planInfo=t[e]):q(t[e]);P.commonPlanList.sort(function(t,e){return t.lastModifyTimestamp-e.lastModifyTimestamp})},z=function(t){H(t.ret_data),g.setCacheInfo("planList",t.ret_data)},V=function(){},J=function(){},W=function(){var t=g.getUserStatus();t==l.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(P.salaryPlan={},P.mortgage={},P.planForParent={},P.planForRent={},P.commonPlanList=[],d.requestTransPlans().then(z,V).then(J))};x.onClickCalendarEventList=function(){v.go("/financialCalendarEventList")},x.onDateClick=function(t){if(t){c.inputDateStr=Y.getYYYYMMDDStringByDate(new Date(t.getFullYear(),t.getMonth(),1));var e=Y.getYYYYMMDDStringByDate(t);s.path("/financialCalendarEvent/"+e+"/calendarhome")}},x.onClickMakePlan=function(){return Y.clickButtonReport("zhuanzhang_zidingyi"),t.addPlanModal&&t.addPlanModal.hide(),P.commonPlanList.length>=5?void Y.makeToast("对不起，最多只能制定5个转账计划"):void p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void(D.isUserStrongAccount()?M.goPage():L.goPage()):void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.onCloseAddPlanModal=function(){t.addPlanModal&&t.addPlanModal.hide()},x.onOpenAddPlanModal=function(){t.addPlanModal&&t.addPlanModal.show(),f.dimStatusBarBackground(!0)},x.onClickSalaryPlan=function(){Y.clickButtonReport("zhuanzhang_gongzi"),t.addPlanModal&&t.addPlanModal.hide(),p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void u.goPage():void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.onClickMortgagePlan=function(){return Y.clickButtonReport("zhuanzhang_fangdai"),t.addPlanModal&&t.addPlanModal.hide(),D.doesAccountNeedTransVerificationV2()?void _.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(t){2==t&&T.goPage()}}):void p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void h.goPage():void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.onClickModifySalaryPlan=function(e){t.addPlanModal&&t.addPlanModal.hide(),p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void u.goPage("",e):void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.onClickModifyMortgagePlan=function(e){t.addPlanModal&&t.addPlanModal.hide(),p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void h.goPage("",e):void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.onClickTransOutScenePlan=function(e,n){var a={scene:n,planInfo:e};t.addPlanModal&&t.addPlanModal.hide(),p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var t=p.getProdInfo("001234");return t?void m.goPage("",a):void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.isStrongAccount=function(){return D.isUserStrongAccount()};var K=function(t){var e=t.gesture.direction;"right"==e&&Y.makeToast("已经没有了哦","short")},Q=function(t){var e=t.gesture.direction;"left"==e&&Y.makeToast("已经没有了哦","short")};x.slideHasChanged=function(t){if(P.initshowMonthSlideIndex==t)return void i(function(){var e=X("calendarDelegateHandle"+t);e&&e.resize(),e&&e.scrollTop(!0),o.update()});if(Y.getYYYYMMDDStringByDate(P.currentMonthList[t].monthFirstDate)==Y.getYYYYMMDDStringByDate(P.monthList[0].monthFirstDate))o.disableSlideDir(1),i(function(){var e="#calendarDelegateHandle"+t;P.UnDragRightElement=angular.element(document.querySelector(e)),P.UnDragRightGesture=y.on("dragend",K,P.UnDragRightElement)}),P.currentMonthIndex=0;else if(Y.getYYYYMMDDStringByDate(P.currentMonthList[t].monthFirstDate)==Y.getYYYYMMDDStringByDate(P.monthList[P.monthList.length-1].monthFirstDate))o.disableSlideDir(2),i(function(){var e="#calendarDelegateHandle"+t;P.UnDragLeftElement=angular.element(document.querySelector(e)),P.UnDragLeftGesture=y.on("dragend",Q,P.UnDragLeftElement)}),P.currentMonthIndex=12;else if(o.disableSlideDir(0),i(function(){P.UnDragLeftGesture&&y.off(P.UnDragLeftGesture,"dragend",Q),P.UnDragRightGesture&&y.off(P.UnDragRightGesture,"dragend",K)}),0==t)if(1==P.initshowMonthSlideIndex){P.currentMonthIndex=P.currentMonthIndex-1;var e=P.currentMonthIndex-1;0>e&&(e=P.monthList.length+e),P.currentMonthIndex<0&&(P.currentMonthIndex=P.monthList.length+P.currentMonthIndex),P.currentMonthList[0]=P.currentMonthList[0],P.currentMonthList[1]=P.currentMonthList[1],P.currentMonthList[2]=P.monthList[e]}else{P.currentMonthIndex=P.currentMonthIndex+1;var n=P.currentMonthIndex+1;n>P.monthList.length-1&&(n-=P.monthList.length),P.currentMonthIndex>P.monthList.length-1&&(P.currentMonthIndex=P.currentMonthIndex-P.monthList.length),P.currentMonthList[0]=P.currentMonthList[0],P.currentMonthList[1]=P.monthList[n],P.currentMonthList[2]=P.currentMonthList[2]}else if(1==t)if(P.initshowMonthSlideIndex>t){P.currentMonthIndex=P.currentMonthIndex-1;var e=P.currentMonthIndex-1;0>e&&(e=P.monthList.length+e),P.currentMonthIndex<0&&(P.currentMonthIndex=P.monthList.length+P.currentMonthIndex),P.currentMonthList[0]=P.monthList[e],P.currentMonthList[1]=P.currentMonthList[1],P.currentMonthList[2]=P.currentMonthList[2]}else{P.currentMonthIndex=P.currentMonthIndex+1;var n=P.currentMonthIndex+1;n>P.monthList.length-1&&(n-=P.monthList.length),P.currentMonthIndex>P.monthList.length-1&&(P.currentMonthIndex=P.currentMonthIndex-P.monthList.length),P.currentMonthList[0]=P.currentMonthList[0],P.currentMonthList[1]=P.currentMonthList[1],P.currentMonthList[2]=P.monthList[n]}else if(0==P.initshowMonthSlideIndex){P.currentMonthIndex=P.currentMonthIndex-1;var e=P.currentMonthIndex-1;0>e&&(e=P.monthList.length+e),P.currentMonthIndex<0&&(P.currentMonthIndex=P.monthList.length+P.currentMonthIndex),P.currentMonthList[0]=P.currentMonthList[0],P.currentMonthList[1]=P.monthList[e],P.currentMonthList[2]=P.currentMonthList[2]}else{P.currentMonthIndex=P.currentMonthIndex+1;var n=P.currentMonthIndex+1;n>P.monthList.length-1&&(n-=P.monthList.length),P.currentMonthIndex>P.monthList.length-1&&(P.currentMonthIndex=P.currentMonthIndex-P.monthList.length),P.currentMonthList[0]=P.monthList[n],P.currentMonthList[1]=P.currentMonthList[1],P.currentMonthList[2]=P.currentMonthList[2]}P.currentMonthSelected=P.currentMonthList[t].monthFirstDate.getMonth()+1,P.currentMonthSelected<10&&(P.currentMonthSelected="0"+P.currentMonthSelected),P.currentYearSelected=P.currentMonthList[t].monthFirstDate.getFullYear(),i(function(){var e=X("calendarDelegateHandle"+t);e&&e.resize(),e&&e.scrollTop(!0),o.update()})};var X=function(t){return I._instances.filter(function(e){var n="hjdelegatehandle";if(e.$element&&e.$element[0]&&e.$element[0].attributes&&e.$element[0].attributes.getNamedItem(n)&&e.$element[0].attributes.getNamedItem(n).textContent==t){{e.$element[0].attributes[n].nodeValue}return!0}return!1})[0]};t.$on("modal.hidden",function(){f.dimStatusBarBackground(!1)}),t.$on("$destroy",function(){t.addPlanModal&&t.addPlanModal.remove(),P.UnDragLeftGesture&&y.off(P.UnDragLeftGesture,"dragend",Q),P.UnDragRightGesture&&y.off(P.UnDragRightGesture,"dragend",K)}),t.onHJViewActive=function(){k()},t.onHJViewDisActive=function(){Z()},x.onClickCalenDarProduct=function(t,e){var n=e.target;(n.className&&-1!=n.className.indexOf("new-product-one")||n.parentNode&&-1!=n.parentNode.className.indexOf("new-product-more"))&&(Y.clickButtonReport("calendar_"+t.productCode),C.onClickProd(t.productCode))};var Z=function(){t.addPlanModal&&t.addPlanModal.hide()};x.back=function(){v.go("/home")},x.onClickCommonPlan=function(t){p.requestProdInfo(["001234"]).then(function(){f.resolve()},function(){Y.makeToast("产品信息拉取中，请稍后重试","short"),f.reject()}).then(function(){var e=p.getProdInfo("001234");return e?void(D.isUserStrongAccount()?M.goPage("",t):L.goPage("",t)):void Y.makeToast("产品信息拉取中，请稍后重试","short")})},x.onClickItemLi=function(t){v.go("/transPlanDetail",null,{data:t})},x.onClickArrivalDetail=function(t){v.go("/incomeArrival",null,t)},x.onClickEvent=function(t){var e=t.startDay;if(e){var n=Y.getDateByYYYYMMDDString(e);c.inputDateStr=Y.getYYYYMMDDStringByDate(new Date(n.getFullYear(),n.getMonth(),1)),s.path("/financialCalendarEvent/"+e+"/calendarhome")}},x.onClickCloseNewBeeGuide=function(){P.isNewBeeGuideShown=!1,f.dimStatusBarBackground(!1),A.saveDataByUser("newBeeGuideFlagCalendar",1)},x.previousMonth=function(){var t=parseInt(P.currentMonthSelected)-1,e=parseInt(P.currentYearSelected);t--,0>t&&(t+=12,e--);var n=Y.getYYYYMMDDStringByDate(new Date(e,t,1)),a=Y.getYYYYMMDDStringByDate(P.monthList[0].monthFirstDate);a>n?Y.makeToast("已经没有了哦","short"):(P.currentMonthSelected=t+1,P.currentMonthSelected<10&&(P.currentMonthSelected="0"+P.currentMonthSelected),P.currentYearSelected=e,o.previous())},x.nextMonth=function(){var t=parseInt(P.currentMonthSelected)-1,e=parseInt(P.currentYearSelected);t++,t>11&&(t-=12,e++);var n=Y.getYYYYMMDDStringByDate(new Date(e,t,1)),a=Y.getYYYYMMDDStringByDate(P.monthList[P.monthList.length-1].monthFirstDate);n>a?Y.makeToast("已经没有了哦","short"):(P.currentMonthSelected=t+1,P.currentYearSelected=e,P.currentMonthSelected<10&&(P.currentMonthSelected="0"+P.currentMonthSelected),o.next())},k()}]);app.controller("GoldCurrentProdDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$timeout","cache","RegisterService","LoginService","commonDirectiveService","ProdInfoService","essential","$interval","GoldCurrentService","localStorage","$sce","$http","envService",function(t,e,a,r,o,i,n,d,s,c,l,u,p,h,m,f,g,C,T,_){var v=function(){t.data={},t.func={},t.data.prodInfo=p.getProdInfo("10001")||{},S(),P(),G()},S=function(){t.data.realValueMapClass="item mod-tab-title active",t.data.historyValueClass="item mod-tab-title",t.data.showRealValueMap=!0,t.data.showHistoryValue=!1,t.data.showWeight=!0,t.data.riskDesc=gProductArr[t.data.prodInfo.risk_level]?gProductArr[t.data.prodInfo.risk_level]:"中等",s.getUserStatus()==a.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(f.refreshGoldCurrentRequest(),f.refreshGoldCurrentInvestment(),f.refreshGoldCurrentExtract())},G=function(){var e=_.getEnvVariable().DATA_CGI_PREFIX+"html/gold/10001/prodInfo.html";T.get(C.trustAsResourceUrl(e)).success(function(e){e=e.toString();var a=e.split(/\n{1}[^\n]*<!--INSERTNOTICE-->[^\n]*\n{1}/);t.data.bannerHtml1="",t.data.bannerHtml2="",t.data.transRuleHtml="",a&&a.length>0&&(t.data.bannerHtml1=C.trustAsHtml(a[0]?a[0]:""),t.data.bannerHtml2=C.trustAsHtml(a[1]?a[1]:""),t.data.transRuleHtml=C.trustAsHtml(a[2]?a[2]:""))})},O=function(){o.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),d(function(){c.setCallbackPage(k,k),n.go("/register")},1e3)},I=function(){o.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),d(function(){l.setCallbackPage(k,k),n.go("/login")},1e3)},k=function(){n.go("goldCurrentProdDetail",null,null,{stateStr:["myFinancial","myFinancialForTab","financialRecommend","home","financialRecommendDQMore","financialRecommendShortMore"]},!0)},P=function(){if(t.data.prodInfo&&t.data.prodInfo.share_config&&!isReviewVer){var e={};t.data.shareData=e,e.prod_type=a.PROD_TYPE.CURRENTGOLD,e.shareObj=t.data.prodInfo.share_config,e.shareContent=null,e.shareTarget=null,e.shareObj.share_content&&e.shareObj.share_target?(t.data.shareClass="mod-menu-tip share",e.shareContent=e.shareObj.share_content.replace("{prod_name}",t.data.prodInfo.prod_name),e.shareContent=e.shareContent.replace("{income_rate}",t.data.prodInfo.int_rate),e.shareTarget=e.shareObj.share_target.replace("{prod_code}",t.data.prodInfo.prod_code),e.shareTarget=e.shareTarget.replace("{prod_type}",e.prod_type)):t.data.shareClass="mod-menu-tip share hide"}else t.data.shareClass="mod-menu-tip share hide"};t.share=function(){var e=t.data.shareData,a=null;e&&(a=h.sharePage(e.shareObj.share_title,e.shareContent,e.shareObj.share_iconurl,e.shareTarget)),a&&a.then(function(){var e={prod_code:t.data.prodInfo.prod_code,product_type:"gold_current_product",status:"success"};o.reportCustomEvent("share_product",e)},function(){var e={prod_code:t.data.prodInfo.prod_code,product_type:"gold_current_product",status:"failure"};o.reportCustomEvent("share_product",e)})};var U=function(){if("1"==t.data.prodInfo.can_trans){var e=o.getDate(),a=o.getDateByDateAndTimeString(o.getYYYYMMDDStringByDate(e),t.data.prodInfo.market_open_time),r=o.getDateByDateAndTimeString(o.getYYYYMMDDStringByDate(e),t.data.prodInfo.market_close_time);t.data.transLimit=e>a&&r>e?!1:!0}else t.data.transLimit=!0},A=function(){var e=f.getGoldCurrentRequest();if(e&&e.cycle){var a=0;for(var r in e.cycle)"0"==e.cycle[r].status&&a++;t.data.requestLimit=a>=5?!0:!1}else t.data.requestLimit=!1},D=function(){var e=f.getGoldCurrentInvestment();t.data.investmentLimit=e&&e.jobList&&e.jobList.length>=5?!0:!1};t.onClickBuy=function(){s.getUserStatus()==a.ACCOUNT_STATE.USER_STATE_GUEST?I():s.getUserStatus()==a.ACCOUNT_STATE.USER_STATE_LOGIN?O():(t.data.sliderUpConfirmOption=t.data.sliderUpConfirmOption||{},t.data.riskOption=t.data.riskOption||{},u.checkProductRiskSetting({productRiskLevel:t.data.prodInfo.risk_level||2,sliderUpConfirmOption:t.data.sliderUpConfirmOption,riskOption:t.data.riskOption}).then(function(e){e=e||{},(1==e.isForce||e.canBuy)&&(U(),A(),D(),t.data.sliderUpConfirmOption={},d(function(){R(),t.data.requestLimit&&(t.data.sliderUpConfirmOption.headText="最大可同时设置5笔挂单，您可以删除后重新挂单。"),t.data.investmentLimit&&(t.data.sliderUpConfirmOption.headText?t.data.sliderUpConfirmOption.headText+="最大可同时设置5笔定投计划，您可以删除后重新设置定投。":t.data.sliderUpConfirmOption.headText="最大可同时设置5笔定投计划，您可以删除后重新设置定投。"),t.data.transLimit&&(t.data.sliderUpConfirmOption.headText?t.data.sliderUpConfirmOption.headText+="非交易时间仅限设置定投。":t.data.sliderUpConfirmOption.headText="非交易时间仅限设置定投。"),t.data.sliderUpConfirmOption.buttonList=[{text:"立即买入",red:!t.data.transLimit,gray:t.data.transLimit},{text:"挂单买入",gray:t.data.requestLimit||t.data.transLimit},{text:"设置定投",gray:t.data.investmentLimit}],t.data.sliderUpConfirmOption.onClose=function(t){1==t?(tracelog("点击立即买入"),n.go("/goldCurrentPurchase")):2==t?(tracelog("点击挂单买入"),n.go("/goldCurrentPurchaseRequest")):3==t&&(tracelog("点击设置定投"),n.go("/goldCurrentInvestmentPurchase"))}},500))}))};var R=function(){var e=g.loadDataByUser("showPurchaseGuide");return e?void(t.data.sliderUpConfirmOption.show=!0):(g.saveDataByUser("showPurchaseGuide","1"),t.data.showPurchaseGuide=!0,t.data.purchaseGuideStep="gold-guide three",void(t.data.purchaseGuideTips="立即买入即按照当时实时金价立即成交"))};t.onClickPurchaseGuide=function(){"gold-guide three"==t.data.purchaseGuideStep?(t.data.purchaseGuideStep="gold-guide two",t.data.purchaseGuideTips="挂单买入即按照设定价格，在挂单期限内成交"):"gold-guide two"==t.data.purchaseGuideStep?(t.data.purchaseGuideStep="gold-guide one",t.data.purchaseGuideTips="设置定投指您可以设置每周或者每月定期买入"):"gold-guide one"==t.data.purchaseGuideStep&&(t.data.showPurchaseGuide=!1,t.data.sliderUpConfirmOption.show=!0)},t.onClickIncomeRate=function(){t.data.maskClass="p-mask show",h.setInfoMaskStatusBackground(!0),t.data.maskTitle="历史万份收益",t.data.maskDetail="历史万份收益历史万份收益历史万份收益历史万份收益历史万份收益"},t.onClickCancelMask=function(){t.data.maskClass="p-mask hide",h.setInfoMaskStatusBackground(!1)},t.back=function(){n.backPage()},t.onClickMinBuy=function(){t.data.showWeight=t.data.showWeight?!1:!0},t.onClickTransRule=function(){var t=_.getEnvVariable().DATA_CGI_PREFIX+"html/gold/10001/transRule.html";n.go("/htmlPieceViewer/交易规则/"+encodeURIComponent(t))},t.onHJViewActive=function(){tracelog("GoldCurrentProdDetailController.HJViewActive"),v()},t.onHJViewDisActive=function(){tracelog("GoldCurrentProdDetailController.HJViewDisActive"),t.data.refreshGoldPriceTimer&&m.cancel(t.data.refreshGoldPriceTimer),t.data.initGoldPriceTimer&&m.cancel(t.data.initGoldPriceTimer)},t.$on("$destroy",function(){t.data.refreshGoldPriceTimer&&m.cancel(t.data.refreshGoldPriceTimer),t.data.initGoldPriceTimer&&m.cancel(t.data.initGoldPriceTimer)}),v()}]);app.controller("GoldCurrentMyProdDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$timeout","cache","RegisterService","LoginService","commonDirectiveService","ProdInfoService","webankCommonService","$filter","essential","GoldCurrentService","localStorage",function(t,e,a,i,o,r,n,d,s,u,l,c,p,g,m,f,C,h){var v=function(){t.data={},t.func={},t.data.prodInfo=p.getProdInfo("10001"),G(),k()},G=function(){t.data.showWeight=!0,t.data.weightClass="in",t.data.amountClass="out";var e=s.getCacheInfo("wealthNew");t.data.myData=g.getMyGoldCurrentProduct(e),t.data.yesterdayStr=o.getYesterdayString(),t.data.GoldAmount=parseFloat(m("cutGoldWeight")(t.data.myData.available_vol))*t.data.prodInfo.last_close_price,t.data.GoldAmountWeight=parseFloat(m("cutGoldWeight")(t.data.myData.available_vol))};t.onClickShowMoney=function(){t.data.showWeight=!1,t.data.weightClass="out",t.data.amountClass="in"},t.onClickShowGold=function(){t.data.showWeight=!0,t.data.weightClass="in",t.data.amountClass="out"};var k=function(){var t=C.getGoldCurrentRequest();if(t)w();else{var e=C.refreshGoldCurrentRequest();e.then(w)}var a=C.getGoldCurrentInvestment();if(a)L();else{var i=C.refreshGoldCurrentInvestment();i.then(L)}var o=C.getGoldCurrentExtract();if(o)y();else{var r=C.refreshGoldCurrentExtract();r.then(y)}},w=function(){var e=C.getGoldCurrentRequest();if(e&&(tracelog("开始解析挂单数据"),t.data.requestList=[],e&&e.cycle))for(var a in e.cycle){var i=e.cycle[a],o={};o.obj=i,"0"==i.status?("1"==i.order_type?o.str=i.application_weight>0?"您有一笔挂单买入("+i.application_weight+"克)等待成交":i.application_amount>0?"您有一笔挂单买入("+i.application_amount+"元)等待成交":"您有一笔挂单买入等待成交":"2"==i.order_type&&(o.str=i.application_weight>0?"您有一笔挂单卖出("+i.application_weight+"克)等待成交":"您有一笔挂单卖出等待成交"),t.data.requestList.push(o)):"2"==i.status||"3"==i.status||"4"==i.status}},L=function(){var e=C.getGoldCurrentInvestment();e&&(tracelog("开始解析定投数据"),e.jobList&&(t.data.goldCurrentInvestmentCount=e.jobList.length,t.data.goldCurrentInvestment=e.jobList))},y=function(){var e=C.getGoldCurrentExtract();if(e&&(tracelog("开始解析提金数据"),t.data.extractList=[],e.cycle))for(var a in e.cycle){var i=e.cycle[a],o={};if(o.obj=i,"01"==i.status||"03"==i.status||"04"==i.status)o.str="您有一笔提金申请（"+parseFloat(i.amounts)+"克），待确认";else if("05"==i.status||"12"==i.status||"13"==i.status)o.str="您有一笔提金申请（"+parseFloat(i.amounts)+"克）已确认，待到货通知";else if("07"==i.status)o.str="您有一笔提金申请（"+parseFloat(i.amounts)+"克）已到货，待领取";else{if("08"!=i.status)continue;o.str="您有一笔提金申请（"+parseFloat(i.amounts)+"克）已领取完成"}t.data.extractList.push(o)}};t.onClickRequest=function(t){n.go("/goldCurrentRequestDetail",t.obj)},t.onClickExtract=function(t){n.go("/goldCurrentExtractDetail",t.obj)},t.onClickInvestment=function(){n.go("/goldCurrentInvestmentList")},t.onClickTotalWealth=function(){t.data.maskClass="p-mask show",f.setInfoMaskStatusBackground(!0),t.data.maskTitle="总资产",t.data.maskDetail="总资产总资产总资产总资产总资产总资产总资产总资产总资产总资产"},t.onClickCancelMask=function(){t.data.maskClass="p-mask hide",f.setInfoMaskStatusBackground(!1)};var S=function(){if("1"==t.data.prodInfo.can_trans){var e=o.getDate(),a=o.getDateByDateAndTimeString(o.getYYYYMMDDStringByDate(e),t.data.prodInfo.market_open_time),i=o.getDateByDateAndTimeString(o.getYYYYMMDDStringByDate(e),t.data.prodInfo.market_close_time);t.data.transLimit=e>a&&i>e?!1:!0}else t.data.transLimit=!0},O=function(){var e=C.getGoldCurrentRequest();if(e&&e.cycle){var a=0;for(var i in e.cycle)"0"==e.cycle[i].status&&a++;t.data.requestLimit=a>=5?!0:!1}else t.data.requestLimit=!1},D=function(){var e=C.getGoldCurrentInvestment();t.data.investmentLimit=e&&e.jobList&&e.jobList.length>=5?!0:!1};t.onClickBuy=function(){t.data.sliderUpConfirmOption={},t.data.riskOption=t.data.riskOption||{},c.checkProductRiskSetting({productRiskLevel:t.data.prodInfo.risk_level||2,sliderUpConfirmOption:t.data.sliderUpConfirmOption,riskOption:t.data.riskOption}).then(function(e){e=e||{},(1==e.isForce||e.canBuy)&&(S(),O(),D(),t.data.sliderUpConfirmOption={},d(function(){U(),t.data.requestLimit&&(t.data.sliderUpConfirmOption.headText="最大可同时设置5笔挂单，您可以删除后重新挂单。"),t.data.investmentLimit&&(t.data.sliderUpConfirmOption.headText?t.data.sliderUpConfirmOption.headText+="最大可同时设置5笔定投计划，您可以删除后重新设置定投。":t.data.sliderUpConfirmOption.headText="最大可同时设置5笔定投计划，您可以删除后重新设置定投。"),t.data.transLimit&&(t.data.sliderUpConfirmOption.headText?t.data.sliderUpConfirmOption.headText+="非交易时间仅限设置定投。":t.data.sliderUpConfirmOption.headText="非交易时间仅限设置定投。"),t.data.sliderUpConfirmOption.buttonList=[{text:"立即买入",red:!t.data.transLimit,gray:t.data.transLimit},{text:"挂单买入",gray:t.data.requestLimit||t.data.transLimit},{text:"设置定投",gray:t.data.investmentLimit}],t.data.sliderUpConfirmOption.onClose=function(t){1==t?(tracelog("点击立即买入"),n.go("/goldCurrentPurchase")):2==t?(tracelog("点击挂单买入"),n.go("/goldCurrentPurchaseRequest")):3==t&&(tracelog("点击设置定投"),n.go("/goldCurrentInvestmentPurchase"))}},500))})};var U=function(){var e=h.loadDataByUser("showPurchaseGuide");return e?void(t.data.sliderUpConfirmOption.show=!0):(h.saveDataByUser("showPurchaseGuide","1"),t.data.showPurchaseGuide=!0,t.data.purchaseGuideStep="gold-guide three",void(t.data.purchaseGuideTips="立即买入即按照当时实时金价立即成交"))};t.onClickPurchaseGuide=function(){"gold-guide three"==t.data.purchaseGuideStep?(t.data.purchaseGuideStep="gold-guide two",t.data.purchaseGuideTips="挂单买入即按照设定价格，在挂单期限内成交"):"gold-guide two"==t.data.purchaseGuideStep?(t.data.purchaseGuideStep="gold-guide one",t.data.purchaseGuideTips="设置定投指您可以设置每周或者每月定期买入"):"gold-guide one"==t.data.purchaseGuideStep&&(t.data.showPurchaseGuide=!1,t.data.sliderUpConfirmOption.show=!0)},t.onClickSale=function(){S(),O(),t.data.sliderUpConfirmOption={},x(),t.data.requestLimit&&(t.data.sliderUpConfirmOption.headText="最大可同时设置5笔挂单，您可以删除后重新挂单。"),t.data.transLimit&&(t.data.sliderUpConfirmOption.headText?t.data.sliderUpConfirmOption.headText+="非交易时间仅限设置定投。":t.data.sliderUpConfirmOption.headText="非交易时间仅限设置定投。"),t.data.sliderUpConfirmOption.buttonList=[{text:"立即卖出",red:!t.data.transLimit,gray:t.data.transLimit},{text:"挂单卖出",gray:t.data.requestLimit||t.data.transLimit}],t.data.sliderUpConfirmOption.onClose=function(t){1==t?(tracelog("点击立即卖出"),n.go("/goldCurrentRedeem")):2==t&&(tracelog("点击挂单卖出"),n.go("/goldCurrentRedeemRequest"))}};var x=function(){var e=h.loadDataByUser("showRedeemGuide");return e?void(t.data.sliderUpConfirmOption.show=!0):(h.saveDataByUser("showRedeemGuide","1"),t.data.showRedeemGuide=!0,t.data.redeemGuideStep="gold-guide two",void(t.data.redeemGuideTips="立即卖出即按照当时实时金价立即成交"))};t.onClickRedeemGuide=function(){"gold-guide two"==t.data.redeemGuideStep?(t.data.redeemGuideStep="gold-guide one",t.data.redeemGuideTips="挂单卖出即按照设定价格，在挂单期限内成交"):"gold-guide one"==t.data.redeemGuideStep&&(t.data.showRedeemGuide=!1,t.data.sliderUpConfirmOption.show=!0)},t.onClickProductDetail=function(){n.go("/goldCurrentProdDetail")},t.onClickGoldExtract=function(){n.go("/goldCurrentExtract")},t.back=function(){n.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentProdDetailController.HJViewActive"),v()},t.onHJViewDisActive=function(){tracelog("GoldCurrentProdDetailController.HJViewDisActive")},v()}]);app.controller("GoldCurrentPurchaseController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","$timeout",function(a,t,o,n,e,c,d,r,u,i,s,l,m,A,p){a.data={};var h=function(){a.data.prodInfo=l.getProdInfo("10001"),w(),_(),T()},w=function(){a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){f()},a.data.agreementDesc="服务协议及风险提示",a.data.agreementCode="10001"};a.focusInput=function(){},a.changeInput=function(){a.data.showInputAct=a.data.showWeightTab?a.data.weight?!0:!1:a.data.amount?!0:!1,f()},a.blurInput=function(){if(a.data.showWeightTab){if(!a.data.weight)return;if(a.data.weight<a.data.prodInfo.min_buy_weight)return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="最低购买克数为"+a.data.prodInfo.min_buy_weight+"克");var t=a.data.weight;a.data.weight=e.getAmountForRule(a.data.weight,a.data.prodInfo.min_buy_weight,a.data.prodInfo.incr_buy_weight),t!=a.data.weight&&e.makeToast("购买的克数必须为"+a.data.prodInfo.incr_buy_weight+"的整数倍，已自动为您调整","short"),a.data.amount=parseFloat((a.data.weight*a.data.price).toFixed(2))}else{if(!a.data.amount)return;if(a.data.amount<a.data.prodInfo.min_buy_amount)return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="最低购买金额为"+a.data.prodInfo.min_buy_amount+"元");var o=a.data.amount;a.data.amount=e.getAmountForRule(a.data.amount,a.data.prodInfo.min_buy_amount,a.data.prodInfo.incr_buy_amount),o!=a.data.amount&&e.makeToast("购买的金额必须为"+a.data.prodInfo.incr_buy_amount+"的整数倍，已自动为您调整","short")}a.changeInput()};var f=function(){if(a.data.ButtonClass="mod-button-normal off",a.data.showWeightTab){if(!a.data.weight)return;if(a.data.weight<a.data.prodInfo.min_buy_weight)return;if(a.data.weight>a.data.prodInfo.max_weight_single_buy)return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="单笔最高购买克数为"+a.data.prodInfo.max_weight_single_buy+"克");a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(a.data.weight*a.data.price)>a.data.AccountData.currentPlus.amount&&(a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.WEBANK_CARD),a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(a.data.weight*a.data.price)>a.data.AccountData.webankAccount.amount&&(a.data.AccountData.ctrlData.accountType=void 0)}else{if(!a.data.amount)return;if(a.data.amount<a.data.prodInfo.min_buy_amount)return;if(a.data.amount>a.data.prodInfo.max_amount_single_buy)return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="单笔最高购买金额为"+a.data.prodInfo.max_amount_single_buy+"元");a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(a.data.amount)>a.data.AccountData.currentPlus.amount&&(a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.WEBANK_CARD),a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(a.data.amount)>a.data.AccountData.webankAccount.amount&&(a.data.AccountData.ctrlData.accountType=void 0)}a.data.showInputAmountTips=!1,a.data.isAgreed&&a.data.price&&a.data.AccountData.ctrlData.accountType&&(a.data.ButtonClass="mod-button-normal")},_=function(){C(),a.data.refreshGoldPriceTimer=r(C,1e3),a.data.weightTabClass="item mod-tab-title active",a.data.amountTabClass="item mod-tab-title",a.data.showWeightTab=!0,a.data.tolerance=.5,a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0,a.data.ButtonClass="mod-button-normal off"},C=function(){n.gold.getGoldPrice().then(function(t){tracelog("查询实时金价成功"),t.ret_data&&t.ret_data.askPrice&&(a.data.isPwdShow||s.isShow()||(a.data.price=t.ret_data.askPrice,f()))},function(){tracelog("查询实时金价失败")})};a.onClickWeightTab=function(){a.data.weightTabClass="item mod-tab-title active",a.data.amountTabClass="item mod-tab-title",a.data.showWeightTab=!0,a.data.amount="",a.data.weight="",a.data.showInputAct=!1,a.data.ButtonClass="mod-button-normal off"},a.onClickAmountTab=function(){a.data.weightTabClass="item mod-tab-title",a.data.amountTabClass="item mod-tab-title active",a.data.showWeightTab=!1,a.data.amount="",a.data.weight="",a.data.showInputAct=!1,a.data.ButtonClass="mod-button-normal off"},a.onClickReduceTolerance=function(){a.data.tolerance-=.1,a.data.tolerance<0&&(a.data.tolerance=0)},a.onClickAddTolerance=function(){a.data.tolerance+=.1};var T=function(){var t=u.getCacheInfo("wealthNew"),n=i.parseRawWealthData_V3(t);a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.amount=n.BankAmount,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.amount=n.HJAmount,a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择付款账户",a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.CURRENT_PLUS,a.data.AccountData.ctrlData.canBindNewCard=!1,a.data.AccountData.otherBankAccount={},a.data.AccountData.otherBankAccount.cardInfo={},a.data.mainCard={};var e=u.getCacheInfo("personalInfo");null!=e&&e.webank_card_no&&(a.data.mainCard.number=e.webank_card_no)};a.onSelectPayWay=function(){a.data.isPwdShow?(a.data.isPwdAutoShow=!0,a.data.isPwdShow=!1):a.data.isPwdAutoShow=!1,a.data.showAccountSelector()},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD},a.onAccountSelected=function(){a.data.isPwdAutoShow&&(p(D,200),a.data.isPwdAutoShow=!1),f()},a.onClickPurchase=function(){"mod-button-normal off"!=a.data.ButtonClass&&D()};var g=function(){var t={};t.prod_code="10001",t.ration_type="1",a.data.showWeightTab?t.application_weight=parseFloat(a.data.weight):t.application_amount=parseFloat(a.data.amount),t.application_price=a.data.price,t.tolerance_type=2,t.tolerance=parseFloat(a.data.tolerance),a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD?t.pay_flag=o.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS&&(t.pay_flag=o.ACCOUNT_TYPE.CURRENT_PLUS,t.pay_prod_id="001234"),t.user_pwd=a.vm.formData.confirmPassword.RSA,t.is_capricious="1",a.data.transInfo={},a.data.transInfo.request=t,s.show(),n.gold.currentProductPurchase(t).then(function(o){if(tracelog("购买活期金成功"),i.isProcessingState(o.ret_code))P(void 0,o.ret_data.trans_serno,t.prod_code);else{s.hide(),e.clearCurrentViewCache();var n={};n.retCode=o.ret_code,n.retMsg=o.ret_msg,n.retData=o.ret_data,a.data.transInfo.result=n,d.go("/goldCurrentPurchaseResult",a.data.transInfo)}},function(t){if(tracelog("购买活期金失败"),s.hide(),i.isRetCodePwd(t.ret_code))A.show(i.isRetCodePwdRetry(t.ret_code)?{oneLineTextLeft:t.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(a){1==a?D():2==a&&m.goPage()}}:{oneLineTextLeft:t.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(a){1==a||2==a&&m.goPage()}});else{e.clearCurrentViewCache();var o={};o.retCode=t.ret_code,o.retMsg=t.ret_msg,o.retData=t.ret_data,a.data.transInfo.result=o,d.go("/goldCurrentPurchaseResult",a.data.transInfo)}})},P=function(t,o,n){i.checkProcessingState(t,o,n).then(function(t){s.hide(),e.clearCurrentViewCache(),a.data.transInfo.result=t,d.go("/goldCurrentPurchaseResult",a.data.transInfo)})},D=function(){a.data.pwdSubTitle="立即买入活期金";var t;a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD?t="使用微众卡支付":a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS&&(t="使用活期+支付"),a.data.payWayDesc=t,a.data.pwdTransDesc=a.data.showWeightTab?parseFloat(a.data.weight).toFixed(4)+"克":parseFloat(a.data.amount).toFixed(2)+"元",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,o){t!==o&&(a.data.isPwdShow=!1,g())}),a.back=function(){d.backPage()},a.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),h()},a.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive"),a.data.refreshGoldPriceTimer&&r.cancel(a.data.refreshGoldPriceTimer)},a.$on("$destroy",function(){a.data.refreshGoldPriceTimer&&r.cancel(a.data.refreshGoldPriceTimer)}),h()}]);app.controller("GoldCurrentPurchaseResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","GoldCurrentService","cache","webankCommonService","HJactionLoading",function(a,t,e,r,n,o,s,d,l,u,i){a.data={};var c=function(){if(a.data.transInfo=t.search(),a.data.status=a.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS||a.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS_2?1:a.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING||a.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING_2?2:3,a.data.transInfo.result.retData&&a.data.transInfo.result.retData.ori_rtn_code){var r=a.data.transInfo.result.retData.ori_rtn_code;if("20213368"==r||"20213391"==r){var n=d.getGoldCurrentRequest();if(n&&n.cycle){var o=0;for(var s in n.cycle)"0"==n.cycle[s].status&&o++;5>o&&(a.data.showButton=!0)}}}C(),f()},f=function(){a.data.today=n.getDate(),a.data.valueDay=a.data.transInfo.result.retData&&a.data.transInfo.result.retData.value_start_date?n.getDateByYYYYMMDDString(a.data.transInfo.result.retData.value_start_date):a.data.today.getHours()>=15?n.getNextWorkDay(2,a.data.today):n.getNextWorkDay(1,a.data.today),a.data.transInfo.result.retData&&a.data.transInfo.result.retData.view_income_date?a.data.showValueDay=n.getDateByYYYYMMDDString(a.data.transInfo.result.retData.view_income_date):(a.data.showValueDay=angular.copy(a.data.valueDay),a.data.showValueDay.setDate(a.data.showValueDay.getDate()+1))},C=function(){a.data.refresher=r.requestUserWealth()};a.onClickOK=function(){i.show(),a.data.refresher.then(I,I)};var I=function(){i.hide();var t=l.getCacheInfo("wealthNew");a.data.myData=u.getMyGoldCurrentProduct(t),a.data.myData?s.go("/myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]}):s.go("/home")};a.onClickRequest=function(){var t={};t.price=parseFloat(parseFloat(a.data.transInfo.request.application_price+a.data.transInfo.request.tolerance).toFixed(2)),a.data.transInfo.request.application_weight?t.application_weight=a.data.transInfo.request.application_weight:a.data.transInfo.request.application_amount&&(t.application_amount=a.data.transInfo.request.application_amount),s.go("/goldCurrentPurchaseRequest",t,null,{stateStr:["goldCurrentRequestDetail","goldCurrentMyProdDetail"]})},c()}]);app.controller("GoldCurrentPurchaseRequestController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","$timeout",function(t,a,e,o,n,u,c,d,r,i,s,l,m,p,A){t.data={};var h=function(){t.data.prodInfo=l.getProdInfo("10001"),f(),D(),C()},f=function(){t.data.isAgreed=!1,t.data.onClickAgreeCheckbox=function(){t.data.ButtonClass=w()?"mod-button-normal":"mod-button-normal off"},t.data.agreementDesc="服务协议及风险提示",t.data.agreementCode="10001"};t.focusInput=function(){},t.changeInput=function(){t.data.showInputAct=(t.data.amount||t.data.weight)&&t.data.buyRequestPrice?!0:!1,t.data.ButtonClass=w()?"mod-button-normal":"mod-button-normal off"},t.blurInput=function(){if(t.data.showWeightTab){if(!t.data.weight)return;if(t.data.weight<t.data.prodInfo.min_buy_weight)return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="最低购买克数为"+t.data.prodInfo.min_buy_weight+"克");var a=t.data.weight;t.data.weight=n.getAmountForRule(t.data.weight,t.data.prodInfo.min_buy_weight,t.data.prodInfo.incr_buy_weight),a!=t.data.weight&&n.makeToast("购买的克数必须为"+t.data.prodInfo.incr_buy_weight+"的整数倍，已自动为您调整","short"),t.data.buyRequestPrice&&(t.data.amount=parseFloat((t.data.weight*t.data.buyRequestPrice).toFixed(2)))}else{if(!t.data.amount)return;if(t.data.amount<t.data.prodInfo.min_buy_amount)return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="最低购买金额为"+t.data.prodInfo.min_buy_amount+"元");var e=t.data.amount;t.data.amount=n.getAmountForRule(t.data.amount,t.data.prodInfo.min_buy_amount,t.data.prodInfo.incr_buy_amount),e!=t.data.amount&&n.makeToast("购买的金额必须为"+t.data.prodInfo.incr_buy_amount+"的整数倍，已自动为您调整","short")}t.changeInput()},t.blurPrice=function(){t.data.showInputAct=(t.data.amount||t.data.weight)&&t.data.buyRequestPrice?!0:!1,!t.data.price||t.data.buyRequestPrice>=t.data.price?(t.data.showInputAmountTips2=!0,t.data.inputAmountTipsContent2="挂单价格必须低于当前金价"):t.data.showInputAmountTips2=!1,t.data.showWeightTab&&t.data.weight&&(t.data.amount=parseFloat((t.data.weight*t.data.buyRequestPrice).toFixed(2)),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(t.data.weight*t.data.buyRequestPrice)>t.data.AccountData.currentPlus.amount&&(t.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.WEBANK_CARD),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(t.data.weight*t.data.buyRequestPrice)>t.data.AccountData.webankAccount.amount&&(t.data.AccountData.ctrlData.accountType=void 0)),t.data.ButtonClass=w()?"mod-button-normal":"mod-button-normal off"};var w=function(){if(t.data.showWeightTab){if(!t.data.weight)return!1;if(t.data.weight<t.data.prodInfo.min_buy_weight)return!1;if(t.data.weight>t.data.prodInfo.max_weight_single_buy)return t.data.showInputAmountTips=!0,t.data.inputAmountTipsContent="单笔最高购买克数为"+t.data.prodInfo.max_weight_single_buy+"克",!1;t.data.buyRequestPrice&&(t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(t.data.weight*t.data.buyRequestPrice)>t.data.AccountData.currentPlus.amount&&(t.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.WEBANK_CARD),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(t.data.weight*t.data.buyRequestPrice)>t.data.AccountData.webankAccount.amount&&(t.data.AccountData.ctrlData.accountType=void 0))}else{if(!t.data.amount)return!1;if(t.data.amount<t.data.prodInfo.min_buy_amount)return!1;if(t.data.amount>t.data.prodInfo.max_amount_single_buy)return t.data.showInputAmountTips=!0,t.data.inputAmountTipsContent="单笔最高购买金额为"+t.data.prodInfo.max_amount_single_buy+"元",!1;t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(t.data.amount)>t.data.AccountData.currentPlus.amount&&(t.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.WEBANK_CARD),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(t.data.amount)>t.data.AccountData.webankAccount.amount&&(t.data.AccountData.ctrlData.accountType=void 0)}return t.data.showInputAmountTips=!1,t.data.buyRequestPrice?!t.data.price||t.data.buyRequestPrice>t.data.price?!1:t.data.untilDate&&t.data.isAgreed?t.data.AccountData.ctrlData.accountType?!0:void 0:!1:!1},D=function(){T(),t.data.refreshGoldPriceTimer=d(T,1e3),t.data.weightTabClass="item mod-tab-title active",t.data.amountTabClass="item mod-tab-title",t.data.showWeightTab=!0,t.data.isPwdShow=!1,t.data.sigOnPwdCommit=0,t.data.ButtonClass="mod-button-normal off",t.data.untilDate=n.getDate(),t.data.untilDate.setMonth(t.data.untilDate.getMonth()+6),t.data.untilDateStr=n.getYYYYMMDDStringByDate(t.data.untilDate,"-"),t.data.requestObj=a.search(),t.data.requestObj&&(t.data.requestObj.application_amount&&(t.onClickAmountTab(),t.data.amount=t.data.requestObj.application_amount),t.data.requestObj.application_weight&&(t.data.weight=t.data.requestObj.application_weight),t.data.requestObj.price&&(t.data.buyRequestPrice=t.data.requestObj.price),A(function(){t.blurInput()}))},T=function(){o.gold.getGoldPrice().then(function(a){tracelog("查询实时金价成功"),a.ret_data&&a.ret_data.askPrice&&(t.data.price=a.ret_data.askPrice,t.blurPrice())},function(){tracelog("查询实时金价失败")})};t.onClickWeightTab=function(){t.data.weightTabClass="item mod-tab-title active",t.data.amountTabClass="item mod-tab-title",t.data.showWeightTab=!0,t.data.amount="",t.data.weight="",t.data.buyRequestPrice="",t.data.showInputAct=!1,t.data.ButtonClass="mod-button-normal off"},t.onClickAmountTab=function(){t.data.weightTabClass="item mod-tab-title",t.data.amountTabClass="item mod-tab-title active",t.data.showWeightTab=!1,t.data.amount="",t.data.weight="",t.data.buyRequestPrice="",t.data.showInputAct=!1,t.data.ButtonClass="mod-button-normal off"};var C=function(){var a=r.getCacheInfo("wealthNew"),o=i.parseRawWealthData_V3(a);t.data.AccountData={},t.data.AccountData.webankAccount={},t.data.AccountData.webankAccount.priority=2,t.data.AccountData.webankAccount.amount=o.BankAmount,t.data.AccountData.webankAccount.isAvaliable=!0,t.data.AccountData.currentPlus={},t.data.AccountData.currentPlus.amount=o.HJAmount,t.data.AccountData.currentPlus.priority=1,t.data.AccountData.currentPlus.isAvaliable=!0,t.data.AccountData.ctrlData={},t.data.AccountData.ctrlData.title="选择付款账户",t.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.CURRENT_PLUS,t.data.AccountData.ctrlData.canBindNewCard=!1,t.data.AccountData.otherBankAccount={},t.data.AccountData.otherBankAccount.cardInfo={}};t.onSelectPayWay=function(){t.data.isPwdShow?(t.data.isPwdAutoShow=!0,t.data.isPwdShow=!1):t.data.isPwdAutoShow=!1,t.data.showAccountSelector()},t.isCurrentPlus=function(){return t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS},t.isWeBankAccount=function(){return t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD},t.onAccountSelected=function(){t.data.isPwdAutoShow&&(A(b,200),t.data.isPwdAutoShow=!1),t.data.ButtonClass=w()?"mod-button-normal":"mod-button-normal off"},t.showDatePicker=function(){var a=n.getDate(),e=n.getDate();e.setFullYear(e.getFullYear()+1);var o,u={date:a,minDate:a.valueOf(),maxDate:e.valueOf(),mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"},c={date:a,minDate:a,maxDate:e,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};o=n.isiOSDevice()?c:u,datePicker.show(o,function(a){a&&(t.data.untilDate=a,t.data.untilDateStr=n.getYYYYMMDDStringByDate(t.data.untilDate,"-"),t.data.ButtonClass=w()?"mod-button-normal":"mod-button-normal off",t.$$phase||t.$apply())})},t.onClickPurchase=function(){"mod-button-normal off"!=t.data.ButtonClass&&b()};var _=function(){var a={};a.prod_code="10001",a.ration_type="2",t.data.showWeightTab?a.application_weight=parseFloat(t.data.weight):a.application_amount=parseFloat(t.data.amount),a.application_price=t.data.buyRequestPrice,a.order_end_date=n.getYYYYMMDDStringByDate(t.data.untilDate,""),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?a.pay_flag=e.ACCOUNT_TYPE.WEBANK_CARD:t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(a.pay_flag=e.ACCOUNT_TYPE.CURRENT_PLUS,a.pay_prod_id="001234"),a.user_pwd=t.vm.formData.confirmPassword.RSA,a.is_capricious="1",t.data.transInfo={},t.data.transInfo.request=a,s.show(),o.gold.currentProductPurchase(a).then(function(e){if(tracelog("购买活期金成功"),i.isProcessingState(e.ret_code))g(void 0,e.ret_data.trans_serno,a.prod_code);else{s.hide(),n.clearCurrentViewCache();var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=e.ret_data,t.data.transInfo.result=o,c.go("/goldCurrentPurchaseRequestResult/",t.data.transInfo)}},function(a){if(tracelog("购买活期金失败"),s.hide(),i.isRetCodePwd(a.ret_code))p.show(i.isRetCodePwdRetry(a.ret_code)?{oneLineTextLeft:a.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?b():2==t&&m.goPage()}}:{oneLineTextLeft:a.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&m.goPage()}});else{n.clearCurrentViewCache();var e={};e.retCode=a.ret_code,e.retMsg=a.ret_msg,e.retData=a.ret_data,t.data.transInfo.result=e,c.go("/goldCurrentPurchaseRequestResult",t.data.transInfo)}})},g=function(a,e,o){i.checkProcessingState(a,e,o).then(function(a){s.hide(),n.clearCurrentViewCache(),t.data.transInfo.result=a,c.go("/goldCurrentPurchaseRequestResult",t.data.transInfo)})},b=function(){t.data.pwdSubTitle="挂单买入活期金";var a;t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?a="使用微众卡支付":t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(a="使用活期+支付"),t.data.payWayDesc=a,t.data.pwdTransDesc=t.data.showWeightTab?parseFloat(t.data.weight).toFixed(4)+"克":parseFloat(t.data.amount).toFixed(2)+"元",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(a,e){a!==e&&(t.data.isPwdShow=!1,_())}),t.back=function(){c.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),h()},t.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive"),t.data.refreshGoldPriceTimer&&d.cancel(t.data.refreshGoldPriceTimer)},t.$on("$destroy",function(){t.data.refreshGoldPriceTimer&&d.cancel(t.data.refreshGoldPriceTimer)}),h()}]);app.controller("GoldCurrentPurchaseRequestResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","GoldCurrentService","cache","webankCommonService","HJactionLoading",function(e,t,a,r,n,o,s,d,c,C,l){e.data={};var u=function(){e.data.transInfo=t.search(),e.data.status=e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,f(),i()},i=function(){e.data.today=n.getDate()},f=function(){e.data.refresher=d.refreshGoldCurrentRequest(),e.data.refresher2=r.requestUserWealth()};e.onClickOK=function(){l.show(),e.data.refresher.then(h,h)};var h=function(){e.data.refresher2.then(G,G)},G=function(){l.hide();var t=c.getCacheInfo("wealthNew");e.data.myData=C.getMyGoldCurrentProduct(t),e.data.myData?s.go("/myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]}):s.go("/home")};u()}]);app.controller("GoldCurrentRedeemController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","webankCommonService","$filter","$timeout",function(a,t,e,o,n,c,r,d,u,i,l,s,m,f,i,A,C){a.data={};var w=function(){a.data.prodInfo=s.getProdInfo("10001"),p(),P(),g()},p=function(){a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){a.data.ButtonClass=_()?"mod-button-normal":"mod-button-normal off"},a.data.agreementDesc="服务协议及风险提示",a.data.agreementCode="10001"};a.onClickSaleAll=function(){a.data.amount=A("cutGoldWeight")(a.data.myData.available_vol),a.blurInput()},a.focusInput=function(){},a.changeInput=function(){a.data.showInputAct=a.data.amount?!0:!1,a.data.amount>a.data.myData.available_vol&&(a.data.amount=A("cutGoldWeight")(a.data.myData.available_vol)),a.data.ButtonClass=_()?"mod-button-normal":"mod-button-normal off"},a.blurInput=function(){if(a.data.amount){if(a.data.amount<1e-4)return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="最低赎回克数为0.0001克");var t=a.data.amount;a.data.amount=n.getAmountForRule(a.data.amount,1e-4,1e-4),t!=a.data.amount&&n.makeToast("赎回的克数必须为0.0001的整数倍，已自动为您调整","short"),a.changeInput()}};var _=function(){return a.data.amount?a.data.amount>a.data.prodInfo.max_weight_single_red?(a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="单次最大赎回克数为"+a.data.prodInfo.max_weight_single_red+"克",!1):a.data.amount<1e-4?!1:(a.data.showInputAmountTips=!1,a.data.isAgreed?a.data.price?!0:void 0:!1):!1},P=function(){h(),a.data.refreshGoldPriceTimer=d(h,1e3),a.data.tolerance=.5,a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0,a.data.ButtonClass="mod-button-normal off";var t=u.getCacheInfo("wealthNew");a.data.myData=i.getMyGoldCurrentProduct(t)};a.onClickReduceTolerance=function(){a.data.tolerance-=.1,a.data.tolerance<0&&(a.data.tolerance=0)},a.onClickAddTolerance=function(){a.data.tolerance+=.1,a.data.price&&a.data.tolerance>a.data.price&&(a.data.tolerance-=.1)};var h=function(){o.gold.getGoldPrice().then(function(t){tracelog("查询实时金价成功"),t.ret_data&&t.ret_data.bidPrice&&(a.data.isPwdShow||(a.data.price=t.ret_data.bidPrice))},function(){tracelog("查询实时金价失败")})},g=function(){var t=u.getCacheInfo("wealthNew"),o=i.parseRawWealthData_V3(t);a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.amount=o.BankAmount,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.amount=o.HJAmount,a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择收款账户",a.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.CURRENT_PLUS,a.data.AccountData.ctrlData.canBindNewCard=!1,a.data.AccountData.otherBankAccount={},a.data.AccountData.otherBankAccount.cardInfo={},a.data.mainCard={};var n=u.getCacheInfo("personalInfo");null!=n&&n.webank_card_no&&(a.data.mainCard.number=n.webank_card_no)};a.onSelectPayWay=function(){a.data.isPwdShow?(a.data.isPwdAutoShow=!0,a.data.isPwdShow=!1):a.data.isPwdAutoShow=!1,a.data.showAccountSelector()},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD},a.onAccountSelected=function(){a.data.isPwdAutoShow&&(C(v,200),a.data.isPwdAutoShow=!1),a.data.ButtonClass=_()?"mod-button-normal":"mod-button-normal off"},a.onClickRedeem=function(){"mod-button-normal off"!=a.data.ButtonClass&&v()};var D=function(){var t={};t.prod_code="10001",t.redeem_type="0",t.pm_acct_no=a.data.myData.pm_acct_no,t.application_weight=parseFloat(a.data.amount),t.application_price=a.data.price,t.tolerance_type=1,t.tolerance=parseFloat(a.data.tolerance),a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?t.deal_type=1:a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(t.deal_type=3,t.wms_prod_code="001234"),t.user_pwd=a.vm.formData.confirmPassword.RSA,a.data.transInfo={},a.data.transInfo.request=t,l.show(),o.gold.currentProductRedeem(t).then(function(e){if(tracelog("赎回活期金成功"),i.isProcessingState(e.ret_code))T(void 0,e.ret_data.trans_serno,t.prod_code);else{l.hide(),n.clearCurrentViewCache();var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=e.ret_data,a.data.transInfo.result=o,r.go("/goldCurrentRedeemResult",a.data.transInfo)}},function(t){if(tracelog("赎回活期金失败"),l.hide(),i.isRetCodePwd(t.ret_code))f.show(i.isRetCodePwdRetry(t.ret_code)?{oneLineTextLeft:t.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(a){1==a?v():2==a&&m.goPage()}}:{oneLineTextLeft:t.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(a){1==a||2==a&&m.goPage()}});else{n.clearCurrentViewCache();var e={};e.retCode=t.ret_code,e.retMsg=t.ret_msg,e.retData=t.ret_data,a.data.transInfo.result=e,r.go("/goldCurrentRedeemResult",a.data.transInfo)}})},T=function(t,e,o){i.checkProcessingState(t,e,o).then(function(t){l.hide(),n.clearCurrentViewCache(),a.data.transInfo.result=t,r.go("/goldCurrentRedeemResult",a.data.transInfo)})},v=function(){a.data.pwdSubTitle="立即赎回活期金";var t;a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?t="赎回到微众卡":a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(t="赎回到活期+"),a.data.payWayDesc=t,a.data.pwdTransDesc=parseFloat(a.data.amount).toFixed(4)+"克",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,D())}),a.back=function(){r.backPage()},a.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),w()},a.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive"),a.data.refreshGoldPriceTimer&&d.cancel(a.data.refreshGoldPriceTimer)},a.$on("$destroy",function(){a.data.refreshGoldPriceTimer&&d.cancel(a.data.refreshGoldPriceTimer)}),w()}]);app.controller("GoldCurrentRedeemResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionLoading","GoldCurrentService",function(t,e,a,r,n,o,s,i,l){t.data={};var d=function(){if(t.data.transInfo=e.search(),t.data.status=t.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||t.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:t.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||t.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,t.data.transInfo.result.retData&&t.data.transInfo.result.retData.ori_rtn_code){var r=t.data.transInfo.result.retData.ori_rtn_code;if("20277742"==r||"20213391"==r){var n=l.getGoldCurrentRequest();if(n&&n.cycle){var o=0;for(var s in n.cycle)"0"==n.cycle[s].status&&o++;5>o&&(t.data.showButton=!0)}}}u(),c()},c=function(){t.data.today=n.getDate()},u=function(){t.data.refresher=r.requestUserWealth()};t.onClickOK=function(){i.show(),t.data.refresher.then(f,f)};var f=function(){i.hide(),s.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};t.onClickRequest=function(){var e={};e.price=parseFloat(t.data.transInfo.request.application_price-t.data.transInfo.request.tolerance),t.data.transInfo.request.application_weight&&(e.application_weight=t.data.transInfo.request.application_weight),s.go("/goldCurrentRedeemRequest",e,null,{stateStr:["goldCurrentMyProdDetail"]})},d()}]);app.controller("GoldCurrentRedeemRequestController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","$filter","$timeout",function(t,a,e,o,n,r,d,c,u,i,l,s,m,f,p,D){t.data={};var A=function(){t.data.prodInfo=s.getProdInfo("10001"),w(),g(),h()},w=function(){t.data.isAgreed=!1,t.data.onClickAgreeCheckbox=function(){t.data.ButtonClass=C()?"mod-button-normal":"mod-button-normal off"},t.data.agreementDesc="服务协议及风险提示",t.data.agreementCode="10001"};t.onClickSaleAll=function(){t.data.amount=parseFloat(p("cutGoldWeight")(t.data.myData.available_vol)),t.blurInput()},t.focusInput=function(){},t.changeInput=function(){t.data.showInputAct=t.data.amount&&t.data.buyRequestPrice?!0:!1,t.data.amount>t.data.myData.available_vol&&(t.data.amount=parseFloat(p("cutGoldWeight")(t.data.myData.available_vol))),t.data.ButtonClass=C()?"mod-button-normal":"mod-button-normal off"},t.blurInput=function(){if(t.data.amount){if(t.data.amount<1e-4)return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="最低赎回克数为0.0001克");var a=t.data.amount;t.data.amount=n.getAmountForRule(t.data.amount,1e-4,1e-4),a!=t.data.amount&&n.makeToast("赎回的克数必须为0.0001的整数倍，已自动为您调整","short"),t.changeInput()}},t.blurPrice=function(){t.data.showInputAct=t.data.amount&&t.data.buyRequestPrice?!0:!1,!t.data.price||t.data.buyRequestPrice<=t.data.price?(t.data.showInputAmountTips2=!0,t.data.inputAmountTipsContent2="挂单价格必须高于当前金价"):t.data.showInputAmountTips2=!1,t.data.ButtonClass=C()?"mod-button-normal":"mod-button-normal off"};var C=function(){return t.data.amount?t.data.amount>t.data.prodInfo.max_weight_single_red?(t.data.showInputAmountTips=!0,t.data.inputAmountTipsContent="单次最大赎回克数为"+t.data.prodInfo.max_weight_single_red+"克",!1):t.data.amount<1e-4?!1:(t.data.showInputAmountTips=!1,t.data.buyRequestPrice?!t.data.price||t.data.buyRequestPrice<t.data.price?!1:t.data.untilDate&&t.data.isAgreed?!0:!1:!1):!1},g=function(){P(),t.data.refreshGoldPriceTimer=c(P,1e3),t.data.isPwdShow=!1,t.data.sigOnPwdCommit=0,t.data.ButtonClass="mod-button-normal off";var e=u.getCacheInfo("wealthNew");t.data.myData=i.getMyGoldCurrentProduct(e),t.data.untilDate=n.getDate(),t.data.untilDate.setMonth(t.data.untilDate.getMonth()+6),t.data.untilDateStr=n.getYYYYMMDDStringByDate(t.data.untilDate,"-"),t.data.requestObj=a.search(),t.data.requestObj&&(t.data.requestObj.application_weight&&(t.data.amount=t.data.requestObj.application_weight),t.data.requestObj.price&&(t.data.buyRequestPrice=t.data.requestObj.price),D(function(){t.blurInput()}))},P=function(){o.gold.getGoldPrice().then(function(a){tracelog("查询实时金价成功"),a.ret_data&&a.ret_data.bidPrice&&(t.data.price=a.ret_data.bidPrice,t.blurPrice())},function(){tracelog("查询实时金价失败")})},h=function(){var a=u.getCacheInfo("wealthNew"),o=i.parseRawWealthData_V3(a);t.data.AccountData={},t.data.AccountData.webankAccount={},t.data.AccountData.webankAccount.priority=2,t.data.AccountData.webankAccount.amount=o.BankAmount,t.data.AccountData.webankAccount.isAvaliable=!0,t.data.AccountData.currentPlus={},t.data.AccountData.currentPlus.amount=o.HJAmount,t.data.AccountData.currentPlus.priority=1,t.data.AccountData.currentPlus.isAvaliable=!0,t.data.AccountData.ctrlData={},t.data.AccountData.ctrlData.title="选择收款账户",t.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.CURRENT_PLUS,t.data.AccountData.ctrlData.canBindNewCard=!1,t.data.AccountData.otherBankAccount={},t.data.AccountData.otherBankAccount.cardInfo={},t.data.mainCard={};var n=u.getCacheInfo("personalInfo");null!=n&&n.webank_card_no&&(t.data.mainCard.number=n.webank_card_no)};t.onSelectPayWay=function(){t.data.isPwdShow?(t.data.isPwdAutoShow=!0,t.data.isPwdShow=!1):t.data.isPwdAutoShow=!1,t.data.showAccountSelector()},t.isCurrentPlus=function(){return t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS},t.isWeBankAccount=function(){return t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD},t.onAccountSelected=function(){t.data.isPwdAutoShow&&(D(T,200),t.data.isPwdAutoShow=!1),t.data.ButtonClass=C()?"mod-button-normal":"mod-button-normal off"},t.showDatePicker=function(){var a=n.getDate(),e=n.getDate();e.setFullYear(e.getFullYear()+1);var o,r={date:a,minDate:a.valueOf(),maxDate:e.valueOf(),mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"},d={date:a,minDate:a,maxDate:e,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};o=n.isiOSDevice()?d:r,datePicker.show(o,function(a){a&&(t.data.untilDate=a,t.data.untilDateStr=n.getYYYYMMDDStringByDate(t.data.untilDate,"-"),t.data.ButtonClass=C()?"mod-button-normal":"mod-button-normal off",t.$$phase||t.$apply())})},t.onClickRedeem=function(){"mod-button-normal off"!=t.data.ButtonClass&&T()};var _=function(){var a={};a.prod_code="10001",a.redeem_type="3",a.pm_acct_no=t.data.myData.pm_acct_no,a.application_weight=parseFloat(t.data.amount),a.application_price=t.data.buyRequestPrice,a.order_end_date=n.getYYYYMMDDStringByDate(t.data.untilDate,""),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?a.deal_type=1:t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(a.deal_type=3,a.wms_prod_code="001234"),a.user_pwd=t.vm.formData.confirmPassword.RSA,t.data.transInfo={},t.data.transInfo.request=a,l.show(),o.gold.currentProductRedeem(a).then(function(e){if(tracelog("赎回活期金成功"),i.isProcessingState(e.ret_code))b(void 0,e.ret_data.trans_serno,a.prod_code);else{l.hide(),n.clearCurrentViewCache();var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=e.ret_data,t.data.transInfo.result=o,d.go("/goldCurrentRedeemRequestResult",t.data.transInfo)}},function(a){if(tracelog("赎回活期金失败"),l.hide(),i.isRetCodePwd(a.ret_code))f.show(i.isRetCodePwdRetry(a.ret_code)?{oneLineTextLeft:a.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?T():2==t&&m.goPage()}}:{oneLineTextLeft:a.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&m.goPage()}});else{n.clearCurrentViewCache();var e={};e.retCode=a.ret_code,e.retMsg=a.ret_msg,e.retData=a.ret_data,t.data.transInfo.result=e,d.go("/goldCurrentRedeemRequestResult",t.data.transInfo)}})},b=function(a,e,o){i.checkProcessingState(a,e,o).then(function(a){l.hide(),n.clearCurrentViewCache(),t.data.transInfo.result=a,d.go("/goldCurrentRedeemRequestResult",t.data.transInfo)})},T=function(){t.data.pwdSubTitle="挂单赎回活期金";var a;t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?a="赎回到微众卡":t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(a="赎回到活期+"),t.data.payWayDesc=a,t.data.pwdTransDesc=parseFloat(t.data.amount).toFixed(4)+"克",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(a,e){a!==e&&(t.data.isPwdShow=!1,_())}),t.back=function(){d.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),A()},t.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive"),t.data.refreshGoldPriceTimer&&c.cancel(t.data.refreshGoldPriceTimer)},t.$on("$destroy",function(){t.data.refreshGoldPriceTimer&&c.cancel(t.data.refreshGoldPriceTimer)}),A()}]);app.controller("GoldCurrentRedeemRequestResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","GoldCurrentService","HJactionLoading",function(e,t,a,r,n,o,s,d,C){e.data={};var l=function(){e.data.transInfo=t.search(),e.data.status=e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,u(),i()},i=function(){e.data.today=n.getDate()},u=function(){e.data.refresher=d.refreshGoldCurrentRequest(),e.data.refresher2=r.requestUserWealth()};e.onClickOK=function(){C.show(),e.data.refresher.then(c,c)};var c=function(){e.data.refresher2.then(f,f)},f=function(){C.hide(),s.go("/myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};l()}]);app.controller("GoldFixTimeProdDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$timeout","cache","RegisterService","LoginService","commonDirectiveService","ProdInfoService","webankCommonService","HJactionPop","$http","envService","$sce",function(t,a,e,o,n,r,i,d,l,c,s,u,m,g,D,f,T,p){var C=function(){t.data={},t.func={},t.data.prodCode=r.prodCode,t.data.prodInfo=m.getProdInfo(t.data.prodCode),S(),A(),_()},S=function(){if(t.data.realValueMapClass="item mod-tab-title active",t.data.historyValueClass="item mod-tab-title",t.data.showRealValueMap=!0,t.data.showHistoryValue=!1,l.getUserStatus()>=e.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){var a=l.getCacheInfo("wealthNew");t.data.myData=g.getMyGoldCurrentProduct(a)}"0"==t.data.prodInfo.term_unit?t.data.periodDesc="天":"1"==t.data.prodInfo.term_unit?t.data.periodDesc="周":"2"==t.data.prodInfo.term_unit?t.data.periodDesc="月":"3"==t.data.prodInfo.term_unit?t.data.periodDesc="季度":"4"==t.data.prodInfo.term_unit&&(t.data.periodDesc="年"),t.data.riskDesc=gProductArr[t.data.prodInfo.risk_level]?gProductArr[t.data.prodInfo.risk_level]:"中等"},_=function(){var a=T.getEnvVariable().DATA_CGI_PREFIX+"html/gold/"+r.prodCode+"/prodInfo.html";f.get(p.trustAsResourceUrl(a)).success(function(a){a=a.toString();var e=a.split(/\n{1}[^\n]*<!--INSERTNOTICE-->[^\n]*\n{1}/);t.data.bannerHtml1="",t.data.bannerHtml2="",t.data.bannerHtml3="",t.data.transRuleHtml="",e&&e.length>0&&(t.data.bannerHtml1=p.trustAsHtml(e[0]?e[0]:""),t.data.bannerHtml2=p.trustAsHtml(e[1]?e[1]:""),t.data.bannerHtml3=p.trustAsHtml(e[2]?e[2]:""),t.data.transRuleHtml=p.trustAsHtml(e[3]?e[3]:""))})},A=function(){t.data.today=n.getDate(),t.data.todayStr=n.getYYYYMMDDStringByDate(t.data.today,""),t.data.valueDay=t.data.today.getHours()>=15?n.getNextWorkDay(2,t.data.today):n.getNextWorkDay(1,t.data.today),t.data.valueDayStr=n.getYYYYMMDDStringByDate(t.data.valueDay,""),t.data.showValueDay=angular.copy(t.data.valueDay),t.data.showValueDay.setDate(t.data.showValueDay.getDate()+1)},v=function(){n.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),d(function(){c.setCallbackPage(I,I),i.go("/register")},1e3)},y=function(){n.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),d(function(){s.setCallbackPage(I,I),i.go("/login")},1e3)},I=function(){i.go("goldFixTimeProdDetail",null,null,{stateStr:["myFinancial","myFinancialForTab","financialRecommend","home","financialRecommendDQMore","financialRecommendShortMore"]},!0)},h=function(){if("1"==t.data.prodInfo.can_trans){var a=n.getDate(),e=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(a),t.data.prodInfo.market_open_time),o=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(a),t.data.prodInfo.market_close_time);t.data.transLimit=a>e&&o>a?!1:!0}else t.data.transLimit=!0};t.onClickBuy=function(){l.getUserStatus()==e.ACCOUNT_STATE.USER_STATE_GUEST?y():l.getUserStatus()==e.ACCOUNT_STATE.USER_STATE_LOGIN?v():(h(),t.data.transLimit?D.show({oneLineTextLeft:"非交易时间，无法购买定期金",oneButtonText:"确定",popClose:function(t){}}):t.data.myData.available_vol<t.data.prodInfo.min_buy_weight?D.show({oneLineTextLeft:"活期金账户余额不足，请先买入活期金",twoButtonText1:"取消",twoButtonText2:"去买活期金",popClose:function(t){1==t||2==t&&i.go("/goldCurrentProdDetail",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})}}):i.go("/goldFixTimePurchase/"+t.data.prodCode))},t.back=function(){i.backPage()},t.onClickTransRule=function(){var t=T.getEnvVariable().DATA_CGI_PREFIX+"html/gold/"+r.prodCode+"/transRule.html";i.go("/htmlPieceViewer/交易规则/"+encodeURIComponent(t))},t.onHJViewActive=function(){tracelog("GoldCurrentProdDetailController.HJViewActive"),C()},t.onHJViewDisActive=function(){tracelog("GoldCurrentProdDetailController.HJViewDisActive")},C()}]);app.controller("GoldFixTimeMyProdDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$timeout","cache","RegisterService","LoginService","commonDirectiveService","ProdInfoService","webankCommonService","$filter","HJactionPop","essential",function(a,t,e,o,n,i,r,d,l,c,s,u,g,D,m,y,f){var h=function(){a.data={},a.func={},a.data.currentProdInfo=g.getProdInfo("10001"),C(),v()},C=function(){a.data.showWeight=!0,a.data.weightClass="in",a.data.amountClass="out";var t=l.getCacheInfo("wealthNew");a.data.myData=D.getMyGoldFixTimeProduct(t,i.acctNo),a.data.myCurrentData=D.getMyGoldCurrentProduct(t),a.data.prodInfo=g.getProdInfo(a.data.myData.prod_code),a.data.showWeight=!0,a.data.GoldAmount=parseFloat(m("cutGoldWeight")(a.data.myData.available_vol))*a.data.currentProdInfo.last_close_price,a.data.GoldAmountWeight=parseFloat(m("cutGoldWeight")(a.data.myData.available_vol)),a.data.myData.last_income_date==n.getYesterdayString()&&(a.data.showYesterday=!0)},v=function(){a.data.transDay=n.getDate(),a.data.transDayStr=n.getYYYYMMDDStringByDate(a.data.transDay,""),a.data.valueDay=a.data.transDay.getHours()>=15?n.getNextWorkDay(2,a.data.transDay):n.getNextWorkDay(1,a.data.transDay),a.data.valueDayStr=n.getYYYYMMDDStringByDate(a.data.valueDay,""),a.data.showValueDay=angular.copy(a.data.valueDay),a.data.showValueDay.setDate(a.data.showValueDay.getDate()+1)};a.onClickTotalWealth=function(){a.data.maskClass="p-mask show",f.setInfoMaskStatusBackground(!0),a.data.maskTitle="总资产",a.data.maskDetail="总资产总资产总资产总资产总资产总资产总资产总资产总资产总资产"},a.onClickCancelMask=function(){a.data.maskClass="p-mask hide",f.setInfoMaskStatusBackground(!1)},a.onClickShowMoney=function(){a.data.showWeight=!1,a.data.weightClass="out",a.data.amountClass="in"},a.onClickShowGold=function(){a.data.showWeight=!0,a.data.weightClass="in",a.data.amountClass="out"};var w=function(){if("1"==a.data.prodInfo.can_trans){var t=n.getDate(),e=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(t),a.data.prodInfo.market_open_time),o=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(t),a.data.prodInfo.market_close_time);a.data.transLimit=t>e&&o>t?!1:!0}else a.data.transLimit=!0};a.onClickBuy=function(){w(),a.data.transLimit?y.show({oneLineTextLeft:"非交易时间，无法购买定期金",oneButtonText:"确定",popClose:function(a){}}):a.data.myCurrentData.available_vol<a.data.prodInfo.min_buy_weight?y.show({oneLineTextLeft:"活期金账户余额不足，请先买入活期金",twoButtonText1:"取消",twoButtonText2:"去买活期金",popClose:function(a){1==a||2==a&&r.go("/goldCurrentProdDetail",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})}}):r.go("/goldFixTimePurchase/"+a.data.myData.prod_code)},a.onClickSale=function(){r.go("/goldFixTimeRedeem/"+i.acctNo)},a.onClickProductDetail=function(){r.go("/goldCurrentProdDetail")},a.back=function(){r.backPage()},a.onHJViewActive=function(){tracelog("GoldCurrentProdDetailController.HJViewActive"),h()},a.onHJViewDisActive=function(){tracelog("GoldCurrentProdDetailController.HJViewDisActive")},h()}]);app.controller("GoldFixTimePurchaseController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","$filter",function(t,a,o,e,n,r,d,i,u,c,s,l,f,m,g){var p=function(){t.data={},t.data.prodCode=r.prodCode,t.data.prodInfo=l.getProdInfo(t.data.prodCode),w(),C()},w=function(){t.data.isAgreed=!1,t.data.onClickAgreeCheckbox=function(){t.data.ButtonClass=h()?"mod-button-normal":"mod-button-normal off"},t.data.agreementDesc="服务协议及风险提示",t.data.agreementCode="10001"};t.focusInput=function(){},t.changeInput=function(){t.data.amount>t.data.myData.available_vol&&(t.data.amount=parseFloat(g("cutGoldWeight")(t.data.myData.available_vol))),t.data.ButtonClass=h()?"mod-button-normal":"mod-button-normal off"},t.blurInput=function(){if(t.data.amount){if(t.data.amount<t.data.prodInfo.min_buy_weight)return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="最低购买克数为"+t.data.prodInfo.min_buy_weight+"克");var a=t.data.amount;t.data.amount=n.getAmountForRule(t.data.amount,t.data.prodInfo.min_buy_weight,t.data.prodInfo.incr_buy_weight),a!=t.data.amount&&n.makeToast("购买的克数必须为"+t.data.prodInfo.incr_buy_weight+"的整数倍，已自动为您调整","short"),t.changeInput()}};var h=function(){return t.data.amount?t.data.amount<t.data.prodInfo.min_buy_weight?!1:(t.data.showInputAmountTips=!1,t.data.isAgreed?!0:!1):!1},C=function(){t.data.isPwdShow=!1,t.data.sigOnPwdCommit=0,t.data.ButtonClass="mod-button-normal off";var a=u.getCacheInfo("wealthNew");t.data.myData=c.getMyGoldCurrentProduct(a)};t.onClickPurchase=function(){"mod-button-normal off"!=t.data.ButtonClass&&v()};var _=function(){var a={};a.prod_code=t.data.prodCode,a.ration_type="4",a.application_weight=parseFloat(t.data.amount),a.user_pwd=t.vm.formData.confirmPassword.RSA,a.is_capricious="1",t.data.transInfo={},t.data.transInfo.request=a,s.show(),e.gold.fixTimeProductPurchase(a).then(function(o){if(tracelog("购买定期金成功"),c.isProcessingState(o.ret_code))P(void 0,o.ret_data.trans_serno,a.prod_code);else{s.hide(),n.clearCurrentViewCache();var e={};e.retCode=o.ret_code,e.retMsg=o.ret_msg,e.retData=o.ret_data,t.data.transInfo.result=e,d.go("/goldFixTimePurchaseResult",t.data.transInfo)}},function(a){if(tracelog("购买定期金失败"),s.hide(),c.isRetCodePwd(a.ret_code))m.show(c.isRetCodePwdRetry(a.ret_code)?{oneLineTextLeft:a.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?v():2==t&&f.goPage()}}:{oneLineTextLeft:a.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&f.goPage()}});else{n.clearCurrentViewCache();var o={};o.retCode=a.ret_code,o.retMsg=a.ret_msg,o.retData=a.ret_data,t.data.transInfo.result=o,d.go("/goldFixTimePurchaseResult",t.data.transInfo)}})},P=function(a,o,e){c.checkProcessingState(a,o,e).then(function(a){s.hide(),n.clearCurrentViewCache(),t.data.transInfo.result=a,d.go("/goldFixTimePurchaseResult",t.data.transInfo)})},v=function(){t.data.pwdSubTitle="立即转入定期金";var a="使用活期金支付";t.data.payWayDesc=a,t.data.pwdTransDesc=parseFloat(t.data.amount).toFixed(4)+"克",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(a,o){a!==o&&(t.data.isPwdShow=!1,_())}),t.back=function(){d.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),p()},t.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive")},t.$on("$destroy",function(){}),p()}]);app.controller("GoldFixTimePurchaseResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","ProdInfoService","HJactionLoading",function(a,t,e,r,n,o,d,s,l){a.data={};var u=function(){a.data.transInfo=t.search(),a.data.status=a.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS||a.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS_2?1:a.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING||a.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING_2?2:3,a.data.prodInfo=s.getProdInfo(a.data.transInfo.request.prod_code),D(),i()},i=function(){a.data.today=n.getDate(),a.data.transInfo.result.retData&&a.data.transInfo.result.retData.value_start_date?a.data.valueDay=n.getDateByYYYYMMDDString(a.data.transInfo.result.retData.value_start_date):(a.data.tradeCloseTime=n.getDateByDateAndTimeString(n.getYYYYMMDDStringByDate(a.data.today,""),a.data.prodInfo.trading_close_time),a.data.valueDay=a.data.today>=a.data.tradeCloseTime?n.getNextWorkDay(2,a.data.today):n.getNextWorkDay(1,a.data.today)),a.data.transInfo.result.retData&&a.data.transInfo.result.retData.view_income_date?a.data.showValueDay=n.getDateByYYYYMMDDString(a.data.transInfo.result.retData.view_income_date):(a.data.showValueDay=angular.copy(a.data.valueDay),a.data.showValueDay.setDate(a.data.showValueDay.getDate()+1)),a.data.transInfo.result.retData&&a.data.transInfo.result.retData.value_end_date&&(a.data.valueEndDay=n.getDateByYYYYMMDDString(a.data.transInfo.result.retData.value_end_date))},D=function(){a.data.refresher=r.requestUserWealth()};a.onClickOK=function(){l.show(),a.data.refresher.then(f,f)};var f=function(){l.hide(),d.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};u()}]);app.controller("GoldFixTimeRedeemController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","webankCommonService","$filter",function(t,e,a,o,n,r,d,i,c,s,l,u,m,f,s,g){var w=function(){t.data={},C(),h()},C=function(){t.data.isAgreed=!1,t.data.onClickAgreeCheckbox=function(){t.data.ButtonClass=t.data.isAgreed?"mod-button-normal":"mod-button-normal off"},t.data.agreementDesc="服务协议及风险提示",t.data.agreementCode="10001"},h=function(){var e=c.getCacheInfo("wealthNew");t.data.myData=s.getMyGoldFixTimeProduct(e,r.acctNo),t.data.prodInfo=u.getProdInfo(t.data.myData.prod_code)||{},t.data.amount=parseFloat(g("cutGoldWeight")(t.data.myData.available_vol)),t.data.isPwdShow=!1,t.data.sigOnPwdCommit=0,t.data.ButtonClass="mod-button-normal off"};t.onClickPurchase=function(){"mod-button-normal off"!=t.data.ButtonClass&&P()};var _=function(){var e={};e.prod_code=t.data.myData.prod_code,e.redeem_type="1",e.application_weight=parseFloat(t.data.amount),e.user_pwd=t.vm.formData.confirmPassword.RSA,e.pm_acct_no=r.acctNo,t.data.transInfo={},t.data.transInfo.request=e,l.show(),o.gold.fixTimeProductRedeem(e).then(function(a){if(tracelog("转出定期金成功"),s.isProcessingState(a.ret_code))p(void 0,a.ret_data.trans_serno,e.prod_code);else{l.hide(),n.clearCurrentViewCache();var o={};o.retCode=a.ret_code,o.retMsg=a.ret_msg,o.retData=a.ret_data,t.data.transInfo.result=o,d.go("/goldFixTimeRedeemResult",t.data.transInfo)}},function(e){if(tracelog("转出定期金失败"),l.hide(),s.isRetCodePwd(e.ret_code))f.show(s.isRetCodePwdRetry(e.ret_code)?{oneLineTextLeft:e.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?P():2==t&&m.goPage()}}:{oneLineTextLeft:e.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&m.goPage()}});else{n.clearCurrentViewCache();var a={};a.retCode=e.ret_code,a.retMsg=e.ret_msg,a.retData=e.ret_data,t.data.transInfo.result=a,d.go("/goldFixTimeRedeemResult",t.data.transInfo)}})},p=function(e,a,o){s.checkProcessingState(e,a,o).then(function(e){l.hide(),n.clearCurrentViewCache(),t.data.transInfo.result=e,d.go("/goldFixTimeRedeemResult",t.data.transInfo)})},P=function(){t.data.pwdSubTitle="立即转出定期金",t.data.pwdTransDesc=parseFloat(t.data.amount).toFixed(4)+"克",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(e,a){e!==a&&(t.data.isPwdShow=!1,_())}),t.back=function(){d.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),w()},t.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive")},t.$on("$destroy",function(){}),w()}]);app.controller("GoldFixTimeRedeemResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionLoading",function(e,t,a,n,o,r,s,d){e.data={};var i=function(){e.data.transInfo=t.search(),e.data.status=e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,C(),l()},l=function(){e.data.today=o.getDate()},C=function(){e.data.refresher=n.requestUserWealth()};e.onClickOK=function(){d.show(),e.data.refresher.then(c,c)};var c=function(){d.hide(),s.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};i()}]);app.controller("GoldCurrentRequestDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionPop","webankCommonService","HJactionLoading","ResetPasswdService",function(t,e,o,a,n,r,i,s,d,c,l){var u=function(){t.data={},t.data.obj=e.search()};t.onClickCancel=function(){t.data.sliderUpConfirmOption={},t.data.sliderUpConfirmOption.show=!0,t.data.sliderUpConfirmOption.headText="您确认要撤销这一笔挂单吗？",t.data.sliderUpConfirmOption.buttonList=[{text:"确定",red:!0}],t.data.sliderUpConfirmOption.onClose=function(t){1==t&&f()}};var f=function(){t.data.pwdSubTitle="取消挂单",t.data.isPwdShow=!0};t.onPasswordCommit=function(){t.data.isPwdShow=!1,C()};var C=function(){var e={};e.orig_biz_seq=t.data.obj.trans_serno,e.user_pwd=t.vm.formData.confirmPassword.RSA,t.data.transInfo={},t.data.transInfo.request=t.data.obj,c.show(),a.gold.cancelRequest(e).then(function(e){tracelog("撤销挂单成功"),c.hide();var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=e.ret_data,t.data.transInfo.result=o,i.go("/goldCurrentRequestCancelResult",t.data.transInfo)},function(e){if(tracelog("撤销挂单失败"),c.hide(),d.isRetCodePwd(e.ret_code))s.show(d.isRetCodePwdRetry(e.ret_code)?{oneLineTextLeft:e.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?f():2==t&&l.goPage()}}:{oneLineTextLeft:e.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&l.goPage()}});else{var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=e.ret_data,t.data.transInfo.result=o,i.go("/goldCurrentRequestCancelResult",t.data.transInfo)}})};t.back=function(){i.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentRequestDetailController.HJViewActive"),u()},t.onHJViewDisActive=function(){tracelog("GoldCurrentRequestDetailController.onHJViewDisActive")},u()}]);app.controller("GoldCurrentExtractController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","GoldCurrentService","$timeout",function(t,o,a,e,n,c,r,u,i,s,l,d,p,f,C,A){t.data={};var w=function(){t.prodInfo=d.getProdInfo("10001"),g(),h(),_(),t.selectObj&&m()},g=function(){t.loaction=C.getGoldExtractLocation();var o=i.getCacheInfo("wealthNew");t.myData=s.getMyGoldCurrentProduct(o),t.ButtonClass="mod-button-normal off"};t.onClickSelectPlace=function(){r.go("/goldCurrentExtractLocation")};var _=function(){var o=i.getCacheInfo("wealthNew"),e=s.parseRawWealthData_V3(o);t.AccountData={},t.AccountData.webankAccount={},t.AccountData.webankAccount.priority=2,t.AccountData.webankAccount.amount=e.BankAmount,t.AccountData.webankAccount.isAvaliable=!0,t.AccountData.currentPlus={},t.AccountData.currentPlus.amount=e.HJAmount,t.AccountData.currentPlus.priority=1,t.AccountData.currentPlus.isAvaliable=!0,t.AccountData.ctrlData={},t.AccountData.ctrlData.title="选择付款账户",t.AccountData.ctrlData.accountType=a.ACCOUNT_TYPE.CURRENT_PLUS,t.AccountData.ctrlData.canBindNewCard=!1,t.AccountData.otherBankAccount={},t.AccountData.otherBankAccount.cardInfo={},t.mainCard={};var n=i.getCacheInfo("personalInfo");null!=n&&n.webank_card_no&&(t.mainCard.number=n.webank_card_no)};t.onSelectPayWay=function(){t.data.isPwdShow?(t.data.isPwdAutoShow=!0,t.data.isPwdShow=!1):t.data.isPwdAutoShow=!1,t.showAccountSelector()},t.isCurrentPlus=function(){return t.AccountData.ctrlData.accountType==a.ACCOUNT_TYPE.CURRENT_PLUS},t.isWeBankAccount=function(){return t.AccountData.ctrlData.accountType==a.ACCOUNT_TYPE.WEBANK_CARD},t.onAccountSelected=function(){t.data.isPwdAutoShow&&(A(T,200),t.data.isPwdAutoShow=!1),m()};var h=function(){t.typeWeightList=[],t.type="请选择";for(var o in t.prodInfo.real_gold_list){var a={};a.text=parseFloat(t.prodInfo.real_gold_list[o].gold_weight)+"克",a.code=t.prodInfo.real_gold_list[o].gold_prod_code,a.weight=parseFloat(t.prodInfo.real_gold_list[o].gold_weight),a.cost=parseFloat(t.prodInfo.real_gold_list[o].charge),t.typeWeightList.push(a)}t.typeWeightList.length>=1&&(t.selectObj=t.typeWeightList[0],t.type=""+parseFloat(t.selectObj.weight)+"克")};t.onClickSelectType=function(){t.showType()},t.onSelectType=function(o){t.selectObj=o,t.type=""+parseFloat(t.selectObj.weight)+"克",m()},t.focusInput=function(){},t.blurInput=function(){if(t.data.amount){if(t.data.amount<parseFloat(t.selectObj.weight))return t.showInputAmountTips=!0,void(t.inputAmountTipsContent="不足1份，无法提取");var o=t.data.amount;t.data.amount=n.getAmountForRule(t.data.amount,parseFloat(t.selectObj.weight),parseFloat(t.selectObj.weight)),o!=t.data.amount&&n.makeToast("提取的克数必须为"+parseFloat(t.selectObj.weight)+"的整数倍，已自动为您调整","short"),t.count=parseInt(t.data.amount/parseFloat(t.selectObj.weight)),t.cost=parseFloat(t.selectObj.cost*t.count),t.changeInput()}},t.changeInput=function(){t.data.amount>t.myData.available_vol?(t.showInputAmountTips=!0,t.inputAmountTipsContent="活期金余额不足，无法提取"):t.showInputAmountTips=!1,m()};var m=function(){if(t.ButtonClass="mod-button-normal off",t.loaction){if(t.data.amount<parseFloat(t.selectObj.weight))return t.count=0,void(t.cost=0);if(t.count=Math.floor(t.data.amount/parseFloat(t.selectObj.weight)),t.cost=parseFloat(t.selectObj.cost*t.count),!(t.data.amount>t.myData.available_vol)){if(t.AccountData.ctrlData.accountType==a.ACCOUNT_TYPE.CURRENT_PLUS){if(t.cost>t.AccountData.currentPlus.amount)return t.showCostAmountTips=!0,void(t.inputCostTipsContent="活期＋余额不足支付手续费，无法提取");t.showCostAmountTips=!1}else if(t.AccountData.ctrlData.accountType==a.ACCOUNT_TYPE.WEBANK_CARD){if(t.cost>t.AccountData.webankAccount.amount)return t.showCostAmountTips=!0,void(t.inputCostTipsContent="微众卡余额不足支付手续费，无法提取");t.showCostAmountTips=!1}t.ButtonClass="mod-button-normal"}}};t.onClickConfirm=function(){"mod-button-normal off"!=t.ButtonClass&&T()};var T=function(){t.pwdSubTitle="提取实物黄金",t.isPwdShow=!0};t.$watch("sigOnPwdCommit",function(o,a){o!==a&&(t.isPwdShow=!1,P())});var P=function(){var o={};o.amounts=t.data.amount,o.prod_code=t.selectObj.code,o.user_pwd=t.vm.formData.confirmPassword.RSA,o.receive_type=0,o.address=t.loaction.d,o.address_id=t.loaction.b,t.AccountData.ctrlData.accountType==a.ACCOUNT_TYPE.WEBANK_CARD?o.pay_flag=a.ACCOUNT_TYPE.WEBANK_CARD:t.AccountData.ctrlData.accountType==a.ACCOUNT_TYPE.CURRENT_PLUS&&(o.pay_flag=a.ACCOUNT_TYPE.CURRENT_PLUS,o.pay_prod_id="001234"),o.fee=t.cost,o.portion=t.count,t.transInfo={},t.transInfo.request=o,l.show(),e.gold.currentProductExtract(o).then(function(a){if(tracelog("提金成功"),s.isProcessingState(a.ret_code))D(void 0,a.ret_data.trans_serno,o.prod_code);else{l.hide(),n.clearCurrentViewCache();var e={};e.retCode=a.ret_code,e.retMsg=a.ret_msg,e.retData=a.ret_data,t.transInfo.result=e,r.go("/goldCurrentExtractResult",t.transInfo)}},function(o){if(tracelog("提金失败"),l.hide(),s.isRetCodePwd(o.ret_code))f.show(s.isRetCodePwdRetry(o.ret_code)?{oneLineTextLeft:o.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?T():2==t&&p.goPage()}}:{oneLineTextLeft:o.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&p.goPage()}});else{n.clearCurrentViewCache();var a={};a.retCode=o.ret_code,a.retMsg=o.ret_msg,a.retData=o.ret_data,t.transInfo.result=a,r.go("/goldCurrentExtractResult",t.transInfo)}})},D=function(o,a,e){s.checkProcessingState(o,a,e).then(function(o){l.hide(),n.clearCurrentViewCache(),t.transInfo.result=o,r.go("/goldCurrentExtractResult",t.transInfo)})};t.onClickExtractIntro=function(){},t.back=function(){r.backPage()},t.onHJViewActive=function(){w()},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),w()}]);app.controller("GoldCurrentExtractLocationController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","GoldCurrentService","$timeout","HJactionLoading","$http",function(t,c,a,i,o,e,n,r,l,s,u){var d=function(){t.data={},p()},p=function(){t.data.city="请选择",f(),"请选择"==t.data.city&&y()},f=function(){var c=r.getGoldExtractLocation();if(c){var a=c.p+"省"+c.c+"市";gGoldPickupResultObj[a]&&(t.data.city=a,t.data.cityArray=gGoldPickupResultObj[a],t.data.selectLocation=c.n)}},y=function(){t.data.mapDistrictUrl="http://apis.map.qq.com/ws/location/v1/ip?key=Q7YBZ-X2ZH4-PAHUS-XQM36-63P7V-G5FJF",u.get(t.data.mapDistrictUrl).success(function(c){0==c.status?(tracelog("查询ip地域信息成功"),c.result&&c.result.ad_info&&(t.data.city=c.result.ad_info.province+""+c.result.ad_info.city,t.data.cityArray=gGoldPickupResultObj[t.data.city])):tracelog("查询ip地域信息失败")})};t.onClickSelectCity=function(){t.showCommonPicker({selected1:"广东",srcData:gGoldPickupSelectArray,callback:function(c){if(1==c.type){var a=c.select1+"省"+c.select2+"市";t.data.city=a,t.data.cityArray=gGoldPickupResultObj[a],t.data.selectLocation=void 0}}})},t.selectLocation=function(c){t.data.selectLocation=c.n,r.setGoldExtractLocation(c),s.show(),l(function(){s.hide(),n.backPage()},500)},t.back=function(){n.backPage()},t.onHJViewActive=function(){d()},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),d()}]);app.controller("GoldCurrentExtractResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionLoading","GoldCurrentService",function(t,a,e,r,n,o,d,s,c){t.data={};var l=function(){t.data.transInfo=a.search(),t.data.status=t.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS||t.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS_2?1:t.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING||t.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING_2?2:3,i(),C()},C=function(){t.data.today=n.getDate(),t.data.confirmDay=n.getNextWorkDay(1,t.data.today),t.data.getGoldDay=n.getNextWorkDay(7,t.data.today)},i=function(){t.data.refresher=c.refreshGoldCurrentExtract(),t.data.refresher2=r.requestUserWealth()};t.onClickOK=function(){s.show(),t.data.refresher.then(f,f)};var f=function(){t.data.refresher2.then(u,u)},u=function(){s.hide(),d.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};l()}]);app.controller("GoldCurrentExtractDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionPop","webankCommonService","HJactionLoading","ResetPasswdService","ProdInfoService",function(t,o,e,a,r,n,d,i,c,s,l,u){var f=function(){t.data={},t.data.obj=o.search(),t.prodInfo=u.getProdInfo("10001"),t.extractType=g(),t.count=parseInt(t.data.obj.amounts/t.extractType.gold_weight),t.addressInfo=p()},g=function(){for(var o in t.prodInfo.real_gold_list)if(t.prodInfo.real_gold_list[o].gold_prod_code==t.data.obj.prod_code)return t.prodInfo.real_gold_list[o];return void 0},p=function(){if(gGoldPickupAddr&&gGoldPickupAddr.l)for(var o in gGoldPickupAddr.l)if(gGoldPickupAddr.l[o].b==t.data.obj.address_id)return gGoldPickupAddr.l[o];return void 0};t.onClickCancel=function(){t.data.sliderUpConfirmOption={},t.data.sliderUpConfirmOption.show=!0,t.data.sliderUpConfirmOption.headText="您确认撤销提金申请吗？",t.data.sliderUpConfirmOption.buttonList=[{text:"确定",red:!0}],t.data.sliderUpConfirmOption.onClose=function(t){1==t&&C()}};var C=function(){t.data.pwdSubTitle="撤销提金申请",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(o,e){o!==e&&(t.data.isPwdShow=!1,_())});var _=function(){var o={};o.orig_biz_seq=t.data.obj.biz_seq,o.user_pwd=t.vm.formData.confirmPassword.RSA,t.data.transInfo={},s.show(),a.gold.currentProductExtractCancel(o).then(function(o){tracelog("撤销提金成功"),s.hide();var e={};e.retCode=o.ret_code,e.retMsg=o.ret_msg,e.retData=t.data.obj,t.data.transInfo.result=e,d.go("/goldCurrentExtractCancelResult",t.data.transInfo)},function(o){if(tracelog("撤销提金失败"),s.hide(),c.isRetCodePwd(o.ret_code))i.show(c.isRetCodePwdRetry(o.ret_code)?{oneLineTextLeft:o.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?C():2==t&&l.goPage()}}:{oneLineTextLeft:o.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&l.goPage()}});else{var e={};e.retCode=o.ret_code,e.retMsg=o.ret_msg,e.retData=t.data.obj,t.data.transInfo.result=e,d.go("/goldCurrentExtractCancelResult",t.data.transInfo)}})};t.back=function(){d.backPage()},f()}]);app.controller("GoldCurrentInvestmentPurchaseController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","$interval","cache","webankCommonService","HJactionLoading","ProdInfoService","ResetPasswdService","HJactionPop","$timeout",function(t,a,e,n,o,r,u,d,c,i,s,l,m,f,p){t.data={};var h=function(){t.data.prodInfo=l.getProdInfo("10001"),_(),w(),C(),b()},_=function(){t.data.isAgreed=!1,t.data.onClickAgreeCheckbox=function(){t.data.ButtonClass=g()?"mod-button-normal":"mod-button-normal off"},t.data.agreementDesc="服务协议及风险提示",t.data.agreementCode="10001"};t.focusInput=function(){},t.changeInput=function(){t.data.showInputAct=t.data.amount||t.data.weight?!0:!1,t.data.ButtonClass=g()?"mod-button-normal":"mod-button-normal off"},t.blurInput=function(){if(t.data.showWeightTab){if(!t.data.weight)return;if(t.data.weight<t.data.prodInfo.aip_min_buy_weight)return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="最低购买克数为"+t.data.prodInfo.aip_min_buy_weight+"克");var a=t.data.weight;t.data.weight=o.getAmountForRule(t.data.weight,t.data.prodInfo.aip_min_buy_weight,t.data.prodInfo.aip_incr_buy_weight),a!=t.data.weight&&o.makeToast("购买的克数必须为"+t.data.prodInfo.aip_incr_buy_weight+"的整数倍，已自动为您调整","short"),t.data.amount=parseFloat((t.data.weight*t.data.price).toFixed(2))}else{if(!t.data.amount)return;if(t.data.amount<t.data.prodInfo.aip_min_buy_amount)return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="最低购买金额为"+t.data.prodInfo.aip_min_buy_amount+"元");var e=t.data.amount;t.data.amount=o.getAmountForRule(t.data.amount,t.data.prodInfo.aip_min_buy_amount,t.data.prodInfo.aip_incr_buy_amount),e!=t.data.amount&&o.makeToast("购买的金额必须为"+t.data.prodInfo.aip_incr_buy_amount+"的整数倍，已自动为您调整","short")}t.changeInput()};var g=function(){if(t.data.showWeightTab){if(!t.data.weight)return!1;if(t.data.weight<t.data.prodInfo.aip_min_buy_weight)return!1;if(t.data.weight>t.data.prodInfo.aip_max_weight_single_buy)return t.data.showInputAmountTips=!0,t.data.inputAmountTipsContent="单笔最高购买克数为"+t.data.prodInfo.aip_max_weight_single_buy+"克",!1}else{if(!t.data.amount)return!1;if(t.data.amount<t.data.prodInfo.aip_min_buy_amount)return!1;if(t.data.amount>t.data.prodInfo.aip_max_amount_single_buy)return t.data.showInputAmountTips=!0,t.data.inputAmountTipsContent="单笔最高购买金额为"+t.data.prodInfo.aip_max_amount_single_buy+"元",!1}return t.data.showInputAmountTips=!1,t.data.untilDate&&t.data.isAgreed?t.data.AccountData.ctrlData.accountType?!0:void 0:!1},w=function(){A(),t.data.refreshGoldPriceTimer=d(A,1e3),t.data.weightTabClass="item mod-tab-title active",t.data.amountTabClass="item mod-tab-title",t.data.showWeightTab=!0,t.data.isPwdShow=!1,t.data.sigOnPwdCommit=0,t.data.ButtonClass="mod-button-normal off",t.data.untilDate=o.getDate(),t.data.untilDate.setMonth(t.data.untilDate.getMonth()+6),t.data.untilDateStr=o.getYYYYMMDDStringByDate(t.data.untilDate,"-")},A=function(){n.gold.getGoldPrice().then(function(a){tracelog("查询实时金价成功"),a.ret_data&&a.ret_data.askPrice&&(t.data.price=a.ret_data.askPrice)},function(){tracelog("查询实时金价失败")})};t.onClickWeightTab=function(){t.data.weightTabClass="item mod-tab-title active",t.data.amountTabClass="item mod-tab-title",t.data.showWeightTab=!0,t.data.amount="",t.data.weight="",t.data.showInputAct=!1,t.data.ButtonClass="mod-button-normal off"},t.onClickAmountTab=function(){t.data.weightTabClass="item mod-tab-title",t.data.amountTabClass="item mod-tab-title active",t.data.showWeightTab=!1,t.data.amount="",t.data.weight="",t.data.showInputAct=!1,t.data.ButtonClass="mod-button-normal off"};var C=function(){var a=c.getCacheInfo("wealthNew"),n=i.parseRawWealthData_V3(a);t.data.AccountData={},t.data.AccountData.webankAccount={},t.data.AccountData.webankAccount.priority=2,t.data.AccountData.webankAccount.amount=n.BankAmount,t.data.AccountData.webankAccount.isAvaliable=!0,t.data.AccountData.currentPlus={},t.data.AccountData.currentPlus.amount=n.HJAmount,t.data.AccountData.currentPlus.priority=1,t.data.AccountData.currentPlus.isAvaliable=!0,t.data.AccountData.ctrlData={},t.data.AccountData.ctrlData.title="选择付款账户",t.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.CURRENT_PLUS,t.data.AccountData.ctrlData.canBindNewCard=!1,t.data.AccountData.otherBankAccount={},t.data.AccountData.otherBankAccount.cardInfo={},t.data.mainCard={};var o=c.getCacheInfo("personalInfo");null!=o&&o.webank_card_no&&(t.data.mainCard.number=o.webank_card_no)};t.onSelectPayWay=function(){t.data.isPwdShow?(t.data.isPwdAutoShow=!0,t.data.isPwdShow=!1):t.data.isPwdAutoShow=!1,t.data.showAccountSelector()},t.isCurrentPlus=function(){return t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS},t.isWeBankAccount=function(){return t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD},t.onAccountSelected=function(){t.data.isPwdAutoShow&&(p(P,200),t.data.isPwdAutoShow=!1),t.data.ButtonClass=g()?"mod-button-normal":"mod-button-normal off"},t.showDatePicker=function(){var a=o.getDate();a.setDate(a.getDate()+1);var e=o.getDate();e.setFullYear(e.getFullYear()+1);var n,r={date:a,minDate:a.valueOf(),maxDate:e.valueOf(),mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"},u={date:a,minDate:a,maxDate:e,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};n=o.isiOSDevice()?u:r,datePicker.show(n,function(a){a&&(t.data.untilDate=a,t.data.untilDateStr=o.getYYYYMMDDStringByDate(t.data.untilDate,"-"),t.data.ButtonClass=g()?"mod-button-normal":"mod-button-normal off",t.$$phase||t.$apply())})};var b=function(){t.gGoldPickupSelectArray=[];var a={};a.name="每周一次",a.sub=[];var e={};e.name="每周一",a.sub.push(e);var n={};n.name="每周二",a.sub.push(n);var o={};o.name="每周三",a.sub.push(o);var r={};r.name="每周四",a.sub.push(r);var u={};u.name="每周五",a.sub.push(u),t.gGoldPickupSelectArray.push(a);var d={};d.name="每月一次",d.sub=[];for(var c=1;25>=c;++c){var i={};i.name="每月"+c+"日",d.sub.push(i)}t.gGoldPickupSelectArray.push(d),t.select1="每周一次",t.select2="每周一"};t.onClickFreqType=function(){t.showCommonPicker({selected1:t.select1,selected2:t.select2,srcData:t.gGoldPickupSelectArray,callback:function(a){if(1==a.type){{a.select1+"省"+a.select2+"市"}"每周一次"==a.select1?(t.freqType=1,"每周一"==a.select2?t.freqNum=1:"每周二"==a.select2?t.freqNum=2:"每周三"==a.select2?t.freqNum=3:"每周四"==a.select2?t.freqNum=4:"每周五"==a.select2&&(t.freqNum=5)):"每月一次"==a.select1&&(t.freqType=2,4==a.select2.length?t.freqNum=parseInt(a.select2.substr(2,1)):5==a.select2.length&&(t.freqNum=parseInt(a.select2.substr(2,2)))),t.select1=a.select1,t.select2=a.select2,t.data.typeDesc=a.select2}}})},t.onClickPurchase=function(){"mod-button-normal off"!=t.data.ButtonClass&&P()};var D=function(){var a={};a.id=0,a.name="黄金定投计划",a.prod_code="10001",t.data.showWeightTab?a.application_weight=parseFloat(t.data.weight):a.application_amount=parseFloat(t.data.amount),t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?a.pay_flag=e.ACCOUNT_TYPE.WEBANK_CARD:t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(a.pay_flag=e.ACCOUNT_TYPE.CURRENT_PLUS,a.pay_prod_id="001234"),a.freq_type=t.freqType,a.freq_num=t.freqNum,a.freq_desc=t.data.typeDesc,a.end_date=o.getYYYYMMDDStringByDate(t.data.untilDate,""),a.user_pwd=t.vm.formData.confirmPassword.RSA,a.is_capricious="1",t.data.transInfo={},t.data.transInfo.request=a,s.show(),n.gold.currentProductInvestmentAdd(a).then(function(e){if(tracelog("定投计划成功"),i.isProcessingState(e.ret_code))T(void 0,e.ret_data.trans_serno,a.prod_code);else{s.hide(),o.clearCurrentViewCache();var n={};n.retCode=e.ret_code,n.retMsg=e.ret_msg,n.retData=e.ret_data,t.data.transInfo.result=n,u.go("/goldCurrentInvestmentPurchaseResult",t.data.transInfo)}},function(a){if(tracelog("定投计划失败"),s.hide(),i.isRetCodePwd(a.ret_code))f.show(i.isRetCodePwdRetry(a.ret_code)?{oneLineTextLeft:a.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?P():2==t&&m.goPage()}}:{oneLineTextLeft:a.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&m.goPage()}});else{o.clearCurrentViewCache();var e={};e.retCode=a.ret_code,e.retMsg=a.ret_msg,e.retData=a.ret_data,t.data.transInfo.result=e,u.go("/goldCurrentInvestmentPurchaseResult",t.data.transInfo)}})},T=function(a,e,n){i.checkProcessingState(a,e,n).then(function(a){s.hide(),o.clearCurrentViewCache(),t.data.transInfo.result=a,u.go("/goldCurrentInvestmentPurchaseResult",t.data.transInfo)})},P=function(){t.data.pwdSubTitle="设置定投计划";var a;t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?a="使用微众卡支付":t.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&(a="使用活期+支付"),t.data.payWayDesc=a,t.data.pwdTransDesc=t.data.showWeightTab?parseFloat(t.data.weight).toFixed(4)+"克":parseFloat(t.data.amount).toFixed(2)+"元",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(a,e){a!==e&&(t.data.isPwdShow=!1,D())}),t.back=function(){u.backPage()},t.onHJViewActive=function(){tracelog("GoldCurrentPurchaseController.HJViewActive"),h()},t.onHJViewDisActive=function(){tracelog("GoldCurrentPurchaseController.onHJViewDisActive"),t.data.refreshGoldPriceTimer&&d.cancel(t.data.refreshGoldPriceTimer)},t.$on("$destroy",function(){t.data.refreshGoldPriceTimer&&d.cancel(t.data.refreshGoldPriceTimer)}),h()}]);app.controller("GoldCurrentInvestmentPurchaseResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","cache","webankCommonService","HJactionLoading","GoldCurrentService",function(a,t,e,o,r,n,d,s,l,u,c){a.data={};var C=function(){a.data.transInfo=t.search(),a.data.status=a.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS||a.data.transInfo.result.retCode==e.CGI_RET.CGI_SUCCESS_2?1:a.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING||a.data.transInfo.result.retCode==e.CGI_RET.CGI_PROCESSING_2?2:3,h(),i()},i=function(){a.data.today=r.getDate(),a.data.valueDay=a.data.today.getHours()>=15?r.getNextWorkDay(2,a.data.today):r.getNextWorkDay(1,a.data.today),a.data.showValueDay=angular.copy(a.data.valueDay),a.data.showValueDay.setDate(a.data.showValueDay.getDate()+1)},h=function(){a.data.refresher=c.refreshGoldCurrentInvestment()};a.onClickOK=function(){u.show(),a.data.refresher.then(I,I)};var I=function(){u.hide();var t=s.getCacheInfo("wealthNew");a.data.myData=l.getMyGoldCurrentProduct(t),a.data.myData?d.go("/myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]}):d.go("/home")};C()}]);app.controller("GoldCurrentInvestmentListController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionPop","webankCommonService","HJactionLoading","ResetPasswdService","cache",function(t,n,e,o,a,i,c,r,s,l,u,v){var d=function(){t.data={},C()},C=function(){var n=v.getCacheInfo("goldInvestmentData");n?n.jobList&&(t.data.goldCurrentInvestmentCount=n.jobList.length,t.data.goldCurrentInvestment=n.jobList):t.data.goldCurrentInvestmentCount=0};t.onClickInvestmentDetail=function(t){c.go("/goldCurrentInvestmentDetail",t)},t.back=function(){c.backPage()},t.onHJViewActive=function(){d()},d()}]);app.controller("GoldCurrentInvestmentDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionPop","webankCommonService","HJactionLoading","ResetPasswdService",function(t,e,o,a,n,r,i,d,s,c,l){var u=function(){t.data={},t.data.obj=e.search()};t.onClickCancel=function(){t.data.sliderUpConfirmOption={},t.data.sliderUpConfirmOption.show=!0,t.data.sliderUpConfirmOption.headText="您确认删除定投计划吗？",t.data.sliderUpConfirmOption.buttonList=[{text:"确定",red:!0}],t.data.sliderUpConfirmOption.onClose=function(t){1==t&&f()}};var f=function(){t.data.pwdSubTitle="删除定投计划",t.data.isPwdShow=!0};t.$watch("data.sigOnPwdCommit",function(e,o){e!==o&&(t.data.isPwdShow=!1,C())});var C=function(){var e={};e.id=t.data.obj.id,e.user_pwd=t.vm.formData.confirmPassword.RSA,t.data.transInfo={},t.data.transInfo.request=e,c.show(),a.gold.currentProductInvestmentDel(e).then(function(e){tracelog("删除定投计划成功"),c.hide();var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=t.data.obj,t.data.transInfo.result=o,i.go("/goldCurrentInvestmentCancelResult",t.data.transInfo)},function(e){if(tracelog("删除定投计划失败"),c.hide(),s.isRetCodePwd(e.ret_code))d.show(s.isRetCodePwdRetry(e.ret_code)?{oneLineTextLeft:e.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?f():2==t&&l.goPage()}}:{oneLineTextLeft:e.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&l.goPage()}});else{var o={};o.retCode=e.ret_code,o.retMsg=e.ret_msg,o.retData=t.data.obj,t.data.transInfo.result=o,i.go("/goldCurrentInvestmentCancelResult",t.data.transInfo)}})};t.back=function(){i.backPage()},u()}]);app.controller("GoldCurrentRequestCancelResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionLoading","GoldCurrentService",function(e,t,a,r,n,o,s,d,C){e.data={};var l=function(){e.data.transInfo=t.search(),e.data.status=e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,i(),c()},c=function(){e.data.today=n.getDate()},i=function(){e.data.refresher=C.refreshGoldCurrentRequest(),e.data.refresher2=r.requestUserWealth()};e.onClickOK=function(){d.show(),e.data.refresher.then(u,u)};var u=function(){e.data.refresher2.then(f,f)},f=function(){d.hide(),s.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};l()}]);app.controller("GoldCurrentExtractCancelResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionLoading","GoldCurrentService",function(e,t,a,r,n,o,s,d,C){e.data={};var c=function(){e.data.transInfo=t.search(),e.data.status=e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||e.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||e.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,i(),l()},l=function(){e.data.today=n.getDate()},i=function(){e.data.refresher=C.refreshGoldCurrentExtract(),e.data.refresher2=r.requestUserWealth()};e.onClickOK=function(){d.show(),e.data.refresher.then(u,u)};var u=function(){e.data.refresher2.then(f,f)},f=function(){d.hide(),s.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};c()}]);app.controller("GoldCurrentInvestmentCancelResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService","HJactionLoading","GoldCurrentService",function(t,e,a,n,r,o,s,C,d){t.data={};var l=function(){t.data.transInfo=e.search(),t.data.status=t.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS||t.data.transInfo.result.retCode==a.CGI_RET.CGI_SUCCESS_2?1:t.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING||t.data.transInfo.result.retCode==a.CGI_RET.CGI_PROCESSING_2?2:3,i(),c()},c=function(){t.data.today=r.getDate()},i=function(){t.data.refresher=d.refreshGoldCurrentInvestment()};t.onClickOK=function(){C.show(),t.data.refresher.then(u,u)};var u=function(){C.hide(),s.go("myFinancialGold",null,null,{stateStr:["home","homeNeedRefresh","financialRecommend"]})};l()}]);app.controller("GoldPriceHistoryController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService",function(a,t,e,r,l,i,o){var d=function(){a.data={},a.data.historyValueData=t.search(),a.data.historyValueArray=[],a.data.index=0;for(var e=0;e<a.data.historyValueData.l.length-1&&20>e;++e){var r={};r.date=a.data.historyValueData.l[e].d,r.value=a.data.historyValueData.l[e].p,r.change=parseFloat((a.data.historyValueData.l[e].p-a.data.historyValueData.l[e+1].p)/a.data.historyValueData.l[e+1].p*100).toFixed(2),r.change>=0?r.class="item red":r.change<0&&(r.class="item green"),a.data.historyValueArray.push(r)}a.data.index=20};a.isMoreData=function(){return a.data.index<a.data.historyValueData.l.length},a.loadMoreData=function(){for(var t=a.data.index;t<a.data.historyValueData.l.length-1&&t<a.data.index+10;++t){var e={};e.date=a.data.historyValueData.l[t].d,e.value=a.data.historyValueData.l[t].p,e.change=parseFloat((a.data.historyValueData.l[t].p-a.data.historyValueData.l[t+1].p)/a.data.historyValueData.l[t+1].p*100).toFixed(2),e.change>=0?e.class="item red":e.change<0&&(e.class="item green"),a.data.historyValueArray.push(e)}a.data.index+=10},d(),a.back=function(){o.backPage()}}]);app.factory("GoldCurrentService",["utils","localStorage","cgiService","cache","GLOBAL_CONSTANT",function(t,e,r,a,n){var o=e.loadDataByUser("goldExtractLocationData"),c=e.loadData("goldCurrentPrice");return{setGoldExtractLocation:function(t){o=t,e.saveDataByUser("goldExtractLocationData",t)},getGoldExtractLocation:function(){return o},refreshGoldCurrentRequest:function(){var e=t.getDate(),a=t.getDate();a.setDate(a.getDate()-1);var n={};return n.transaction_start_date=t.getYYYYMMDDStringByDate(a,""),n.transaction_end_date=t.getYYYYMMDDStringByDate(e,""),r.gold.queryRequest(n)},getGoldCurrentRequest:function(){return a.getCacheInfo("goldRequestData")},refreshGoldCurrentInvestment:function(){return r.gold.currentProductInvestmentQuery()},getGoldCurrentInvestment:function(){return a.getCacheInfo("goldInvestmentData")},refreshGoldCurrentExtract:function(){return r.gold.currentProductExtractQuery()},getGoldCurrentExtract:function(){return a.getCacheInfo("goldExtractData")},refreshGoldPrice:function(){var t;return t=a.getUserStatus()==n.ACCOUNT_STATE.USER_STATE_GUEST?r.gold.getGoldPriceTencent():r.gold.getGoldPrice(),t.then(function(t){tracelog("刷新实时金价成功"),t.ret_data&&t.ret_data.askPrice&&t.ret_data.bidPrice&&(c={},c.buyPrice=t.ret_data.askPrice,c.salePrice=t.ret_data.bidPrice,c.midPrice=(t.ret_data.askPrice+t.ret_data.bidPrice)/2,e.saveDataByUser("goldCurrentPrice",c))},function(){tracelog("刷新实时金价失败")}),t},getGoldPrice:function(){return c}}}]);app.controller("InvestmentHomeController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$timeout","messageService","TransRecordService","$ionicViewSwitcher","$interval","localStorage","$sce","envService","$http","LocationService","dataService","ProdInfoService","ProdCommonActionService","CommonClickFnService","$ionicScrollDelegate","FinancialOrganizationService","$ionicHistory","PromoCenterService","InviteService",function(t,e,i,o,n,r,c,a,s,l,u,d,p,f,v,T,_,m,A,g,L,S,C,h,k,y){var R=S.$getByHandle("weArticleContent");t.allProductObj={};var P=function(){n.clickButtonReport("investment_show"),w(),E(),N(),O(),U()},w=function(){t.status=c.getUserStatus(),t.showMsgDot=!1,t.articleList=[],t.moreArticleUrl="",t.updateTimeStr="",t.isGoldGray=r.isGoldGray(),t.productTypeArr={},t.isGoldGray?(t.productTypeArr[i.FINANCIAL_PROD_TYPE.STOCK]=!0,t.productTypeArr[i.FINANCIAL_PROD_TYPE.GOLD_CURRENT]=!0,t.productTypeArr[i.FINANCIAL_PROD_TYPE.GOLD_FIXED_TIME]=!0):t.productTypeArr[i.FINANCIAL_PROD_TYPE.STOCK]=!0};t.showMsgDot=!1;var D=function(){t.showMsgDot=t.hasNewNormalMessage||k.getRedPoint()||y.getRedPoint()},G=function(){s.getRedPoint().then(function(e){t.hasNewNormalMessage=e?!0:!1,D()})},I=function(){s.getTypeMessageList("","red").then(function(t){if(t&&t.red&&t.red.length>0){var e=t.red[0];e.extraObj&&"fuli"===e.extraObj.usage&&k.setRedPoint(),D()}})},N=function(){if(G(),I(),t.status==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){t.isLogin=!0,t.isHasAccount=!0;var e=c.getUserInfo();t.avatarUrl=e.picurl||"../img/tx@2x.png"}else if(t.status==i.ACCOUNT_STATE.USER_STATE_LOGIN){t.isLogin=!0,t.isHasAccount=!1;var e=c.getUserInfo();t.avatarUrl=e.picurl||"../img/tx@2x.png"}else t.isLogin=!1,t.isHasAccount=!1},E=function(){var e=function(){var t=p.loadData("weArticle");t&&t.ret_data&&(tracelog("加载缓存article完成"),n(t.ret_data,!1))},i=function(){o.requestWeArticle().then(function(t){t&&t.ret_data&&(tracelog("拉取网络article成功"),p.saveData("weArticle",t),n(t.ret_data,!0))},function(){tracelog("拉取网络article失败")})},n=function(e){e.articleList&&(t.articleList=e.articleList),e.moreUrl&&(t.moreArticleUrl=e.moreUrl),t.updateTimeStr=e.updateTimeStr,a(function(){R.resize()},200)};t.articleList=[],t.moreArticleUrl="",t.updateTimeStr="",e(),i()},O=function(){var e=function(){var t=p.loadData("financialRecommendV2");t&&t.ret_data&&t.ret_data.productTypeList&&r(t.ret_data.productTypeList,!1)},n=function(){H()?o.requestFinancialRecommendInfoWebV2().then(function(t){tracelog("查询理财推荐信息成功WebV2  ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(c(t.ret_data.productTypeList,t.ret_data.display),p.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败webV2 fail")}):o.requestFinancialRecommendInfoTencentV2().then(function(t){tracelog("查询理财推荐信息成功TencentV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(c(t.ret_data.productTypeList,t.ret_data.display),p.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败TencentV2 fail")})},r=function(e){var o={},n=[];if(t.allProductObj={},e){for(var r in e)if(e[r].productType==i.DISPLAY_AREA_TYPE.INVESTMENT_HOME){var c=e[r].productList&&e[r].productList[0];if(c){var a={title:c.title,list:[]};n.push(a);for(var s in c.codeList)if(o[c.codeList[s]])a.list.push(o[c.codeList[s]]);else{var l={dst:{}};o[c.codeList[s]]=l,a.list.push(l)}}break}for(var r in e){var u;if(t.productTypeArr[e[r].productType])for(var d in e[r].productList){if(u=e[r].productList[d].productCode,o[u]){var p={};t.isGoldGray?C.parseInvestmentListDataNew(p,e[r].productList[d],null,e[r].productType):C.parseInvestmentListData(p,e[r].productList[d]),o[u].dst=p}t.allProductObj[u]=e[r].productList[d]}}}var f=n[0]||{};f.showList=[];for(var v in f.list)f.list[v].dst.htmlStr&&f.showList.push(f.list[v].dst);t.renderData=f},c=function(e){if(a=[],e)for(var i in e)if(t.productTypeArr[e[i].productType])for(var o in e[i].productList){var n=e[i].productList[o].productCode;n&&!s[n]&&(a.push(n),s[n]=1)}a.length>0&&A.requestProdInfo(a).then(function(){tracelog("按产品拉取产品信息成功"),r(e,!0)},function(){tracelog("按产品拉取产品信息失败"),r(e,!0)})},a=[],s={};e(),n()},U=function(){var e=p.loadData("investmentGuide");t.showGuide1=!1,t.showGuide2=!1,e||(t.showGuide2=!0)},H=function(){return t.status>i.ACCOUNT_STATE.USER_STATE_GUEST};t.onClickGuide=function(e){t.showGuide2=!1,t.showGuide1=!1,2==e?t.showGuide1=!0:1==e&&p.saveData("investmentGuide",1)},t.onClickAllStock=function(){_.go("investmentStock"),n.clickButtonReport("investment_all_stock_click")},t.onClickAllGold=function(){_.go("investmentGold"),n.clickButtonReport("investment_all_gold_click")},t.onClickSettingsBtn=function(){u.nextDirection("back"),n.clickButtonReport("index_home"),s.clickRedPoint(),e.path("/accountSettings/investmentHome")},t.onClickTransLog=function(){n.clickButtonReport("financial_trans"),l.goPage("","","all")},t.onClickMainTab=function(t){L.mainTabClickFun(t,4)},t.onClickProduct=function(t){g.onClickProd(t.productCode),n.clickButtonReport("investment_click_"+t.productCode)},t.onClickMoreArticle=function(){_.go("investmentArticle"),n.clickButtonReport("we_article_more_click")},t.onClickArticle=function(t){_.go("investmentArticle",null,t)},t.onHJViewActive=function(){P(),n.resetHistory(!0)},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),P(),n.resetHistory()}]);app.controller("InvestmentArticleController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$timeout","LocationService","$ionicPosition","$ionicScrollDelegate",function(t,e,r,i,a,n,l,o,c,s,u){var d=!1,f=0,I={},v=!1,b=0,h=function(){p(),g()},p=function(){t.allList=[],t.allObj={},t.idArr=[],t.zeroIds=[],t.strTag="",t.tagClass="",t.elArr={};var e=c.getData();t.articleId=e&&e.articleId,c.setData(null),t.myContent=u.$getByHandle("articleScroll"),t.isMoreData=!0},S=function(){var e=t.articleId;t.articleId&&v&&(t.articleId=0,o(function(){var r=$("#articleinfo"+e);if(r&&r.length>0){var i=s.offset(r).top-44;0>i&&(i=0),t.myContent&&t.myContent.scrollTo&&t.myContent.scrollTo(0,i,!0),r.anchorScroll&&r.anchorScroll(!0)}},300))},g=function(){m()},m=function(){d||(d=!0,i.requestWeArticleList(f).then(function(t){t&&t.ret_data&&(A(t.ret_data),S())},function(){}).then(function(){d=!1,t.$broadcast("scroll.infiniteScrollComplete")}))};t.loadMoreData=function(){t.isMoreData&&m()};var A=function(e){e.articleList&&C(e.articleList),void 0!=e.continue&&(t.isMoreData=e.continue),void 0!=e.nextIndex&&(f=e.nextIndex)},C=function(e){for(var r in e){var i=e[r].articleId;if(!I[i]){I[e[r].articleId]=!0;var a=D(e[r].updateTime);a&&(t.allObj[a]||(t.allObj[a]=[],t.allList.push({dateStr:a,list:t.allObj[a]}),t.idArr.push(a)),t.allObj[a].push({title:e[r].title,breif:e[r].breif,articleId:e[r].articleId}),v||(b++,i==t.articleId?(v=!0,b--):-1==$.inArray(a,t.zeroIds)&&t.zeroIds.push(a)))}}},D=function(t){try{var e=1*t.substr(0,4),r=1*t.substr(4,2),i=1*t.substr(6,2);return upDateStr=e+"年"+r+"月"+i+"日"}catch(a){return""}};t.back=function(){c.backPage()},h()}]);app.controller("InvestmentStockController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$timeout","$stateParams","webankCommonService","$interval","$ionicScrollDelegate","localStorage","$sce","envService","$http","LocationService","ProdInfoService","HJactionLoading","$ionicHistory","ProdCommonActionService","CommonClickFnService","FinancialOrganizationService","StockClassificationService",function(t,e,a,n,i,o,r,c,s,l,u,d,p,f,m,v,T,_,L,C,D,S,g,y){var b=[],k={},A={},I={},R=d.$getByHandle("myContent");t.menuClass=["item mod-tab-title active","item mod-tab-title","item mod-tab-title"],t.currentMenuIndex=0;var P=function(){i.clickButtonReport("investment_more_show"),h(),E()},h=function(){t.status=r.getUserStatus(),t.platesData=[],t.starData=[],t.allData=[]},E=function(){var e=function(){var t=p.loadData("financialRecommendV2");t&&t.ret_data&&t.ret_data.productTypeList&&o(t.ret_data.productTypeList,!1)},i=function(){M()?n.requestFinancialRecommendInfoWebV2().then(function(t){tracelog("查询理财推荐信息成功WebV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(r(t.ret_data.productTypeList,t.ret_data.display),p.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败webV2 fail")}):n.requestFinancialRecommendInfoTencentV2().then(function(t){tracelog("查询理财推荐信息成功TencentV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(r(t.ret_data.productTypeList,t.ret_data.display),p.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败TencentV2 fail")})},o=function(e){I=e;var n=[],i=[];if(b={},k={},A={},I){for(var o in I)if(I[o].productType==a.DISPLAY_AREA_TYPE.INVESTMENT_PLATES)for(var r in I[o].productList){var c=I[o].productList[r],s={title:c.title,list:[],desc:c.desc,descMore:c.descMore,type:I[o].productType};n.push(s);for(var l in c.codeList)if(k[c.codeList[l]])s.list.push(k[c.codeList[l]]);else{var u={dst:{}};k[c.codeList[l]]=u,s.list.push(u)}}else if(I[o].productType==a.DISPLAY_AREA_TYPE.INVESTMENT_STARS)for(var r in I[o].productList){var c=I[o].productList[r],s={title:c.title,list:[],icon:c.icon,name:c.title,desc:c.desc,descMore:c.descMore,type:I[o].productType};i.push(s);for(var l in c.codeList)if(A[c.codeList[l]])s.list.push(A[c.codeList[l]]);else{var u={dst:{}};A[c.codeList[l]]=u,s.list.push(u)}}else I[o].productType==a.FINANCIAL_PROD_TYPE.STOCK&&(t.allData=I[o].productList);t.platesData=n,t.starsData=i}V()},r=function(t){if(c=[],t)for(var e in t)if(t[e].productType==a.FINANCIAL_PROD_TYPE.STOCK)for(var n in t[e].productList){var i=t[e].productList[n].productCode;i&&!s[i]&&(c.push(i),s[i]=1)}c.length>0&&_.requestProdInfo(c).then(function(){tracelog("按产品拉取产品信息成功"),o(t,!0)},function(){tracelog("按产品拉取产品信息失败"),o(t,!0)})},c=[],s={};e(),i()},V=function(){var e=null,n=null;switch(t.currentMenuIndex){case 0:e=k,n=t.platesData;case 1:e=e||A,n=n||t.starsData;for(var i in I){var o;if(I[i].productType==a.FINANCIAL_PROD_TYPE.STOCK)for(var r in I[i].productList)if(o=I[i].productList[r].productCode,e[o]){var s={};g.parseInvestmentMoreListData(s,I[i].productList[r]),e[o].dst=s}}for(var l in n){var u=n[l];u.showList=[];for(var d in u.list)u.list[d].dst.htmlStr&&u.showList.push(u.list[d].dst)}break;case 2:t.allData.sort(function(t,e){return t.beforeTime!==e.beforeTime?e.beforeTime-t.beforeTime:e.earningsRate-t.earningsRate});for(var i in t.allData){t.allData[i].pencentClass="num s-fz20 s-red",parseFloat(t.allData[i].earningsRate)<0&&(t.allData[i].pencentClass="num s-fz20 s-green"),t.allData[i].earningsRateStr=t.allData[i].earningsRate+'<span class="s-fz13">%</span>',t.allData[i].beforeTime&&(t.allData[i].pencentClass="num s-fz14 s-lgray",t.allData[i].earningsRateStr="暂无数据"),t.allData[i].realValue="";var p=_.getProdInfo(t.allData[i].productCode);p&&p.real_value&&(t.allData[i].realValue=parseFloat(p.real_value).toFixed(4))}}c(function(){R.resize()},200)},M=function(){return t.status>a.ACCOUNT_STATE.USER_STATE_GUEST};t.onClickMenu=function(e){if(t.currentMenuIndex!=e){t.currentMenuIndex=e,t.menuClass[0]="item mod-tab-title",t.menuClass[1]="item mod-tab-title",t.menuClass[2]="item mod-tab-title",t.menuClass[e]="item mod-tab-title active",V();var a=["investment_plates_tabclick","investment_stars_tabclick","investment_income_tabclick"];i.clickButtonReport(a[t.currentMenuIndex])}},t.onClickClassify=function(t){t&&(y.goPage(null,null,t),i.clickButtonReport("investment_plates_click_"+t.title))},t.onClickProduct=function(t,e){var a=t&&t.productCode;a&&(D.onClickProd(a),i.clickButtonReport("investment_"+e+"_click_"+a))},t.back=function(){T.backPage()},t.onHJViewActive=function(){P()},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),P()}]);app.controller("InvestmentGoldController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","$timeout","$stateParams","webankCommonService","$interval","$ionicScrollDelegate","localStorage","$sce","envService","$http","LocationService","ProdInfoService","HJactionLoading","$ionicHistory","ProdCommonActionService","CommonClickFnService","FinancialOrganizationService","StockClassificationService",function(t,e,o,i,n,c,r,a,s,d,u,l,p,f,v,_,L,T,m,S,C,I,A){var D=function(){n.clickButtonReport("investment_gold_show"),E(),P()},E=function(){t.status=r.getUserStatus()},P=function(){var e=function(){var t=p.loadData("financialRecommendV2");t&&t.ret_data&&t.ret_data.productTypeList&&c(t.ret_data.productTypeList,!1)},n=function(){R()?i.requestFinancialRecommendInfoWebV2().then(function(t){tracelog("查询理财推荐信息成功WebV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(r(t.ret_data.productTypeList,t.ret_data.display),p.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败webV2 fail")}):i.requestFinancialRecommendInfoTencentV2().then(function(t){tracelog("查询理财推荐信息成功TencentV2 ok"),t&&t.ret_data&&t.ret_data.productTypeList&&(r(t.ret_data.productTypeList,t.ret_data.display),p.saveData("financialRecommendV2",t))},function(){tracelog("查询理财推荐信息失败TencentV2 fail")})},c=function(e){var i={},n=[];if(e){for(var c in e)if(e[c].productType==o.DISPLAY_AREA_TYPE.INVESTMENT_GOLD){var r=e[c].productList&&e[c].productList[0];if(r){var a={title:r.title,descMore:r.descMore,list:[]};n.push(a);for(var s in r.codeList)if(i[r.codeList[s]])a.list.push(i[r.codeList[s]]);else{var d={dst:{}};i[r.codeList[s]]=d,a.list.push(d)}}break}for(var c in e){var u;if(e[c].productType==o.FINANCIAL_PROD_TYPE.GOLD_CURRENT||e[c].productType==o.FINANCIAL_PROD_TYPE.GOLD_FIXED_TIME)for(var l in e[c].productList)if(u=e[c].productList[l].productCode,i[u]){var p={};A.parseInvestmentMoreListData(p,e[c].productList[l],null,e[c].productType),i[u].dst=p}}}var f=n[0]||{};f.showList=[];for(var v in f.list)f.list[v].dst.htmlStr&&f.showList.push(f.list[v].dst);t.renderData=f},r=function(t){if(a=[],t)for(var e in t)if(t[e].productType==o.FINANCIAL_PROD_TYPE.GOLD_CURRENT||t[e].productType==o.FINANCIAL_PROD_TYPE.GOLD_FIXED_TIME)for(var i in t[e].productList){var n=t[e].productList[i].productCode;n&&!s[n]&&(a.push(n),s[n]=1)}a.length>0&&T.requestProdInfo(a).then(function(){tracelog("按产品拉取产品信息成功"),c(t,!0)},function(){tracelog("按产品拉取产品信息失败"),c(t,!0)})},a=[],s={};e(),n()},R=function(){return t.status>o.ACCOUNT_STATE.USER_STATE_GUEST};t.onClickProduct=function(t){var e=t&&t.productCode;e&&(C.onClickProd(e),n.clickButtonReport("investment_gold_click_"+e))},t.back=function(){L.backPage()},t.onHJViewActive=function(){D()},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),D()}]);app.controller("StockClassificationController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","essential","cache","LocationService","ProdCommonActionService","StockClassificationService",function(t,e,i,n,o,a,c,r,s,l){var S=function(){d(),u()},d=function(){t.status=c.getUserStatus(),t.renderData=[]},u=function(){t.renderData=l.getData(),t.isPlates=!1,t.isStar=!1,t.headStr="",t.renderData&&(t.renderData.type==i.DISPLAY_AREA_TYPE.INVESTMENT_PLATES?(t.isPlates=!0,t.headStr="投资热点",o.clickButtonReport("investment_plates_detail_show")):t.renderData.type==i.DISPLAY_AREA_TYPE.INVESTMENT_STARS&&(t.isStar=!0,t.headStr="明星经理",o.clickButtonReport("investment_stars_detail_show")))};t.onClickProduct=function(t,e){if(t&&t.productCode){var i=t.productCode;s.onClickProd(i);var n="stars";e&&(n="plates"),o.clickButtonReport("investment_"+n+"_detail_click_"+i)}},t.back=function(){r.backPage()},t.onHJViewActive=function(){S()},t.onHJViewDisActive=function(){},t.$on("$destroy",function(){}),S()}]);app.controller("InsurancePurchaseController",["$scope","$location","$filter","GLOBAL_CONSTANT","cgiService","utils","homeService","webankCommonService","$stateParams","$timeout","cache","session","BindNewCardService1","InsurancePurchaseService","ResetPasswdService","localStorageService","dataService","AnnouncementService","InsuranceProductDetailService","RecentAccountService","$ionicViewSwitcher","LocationService","HelpDetailService","HJactionLoading","ProdInfoService","essential","BindBankCardService","$sce",function(a,t,o,e,n,d,c,r,u,i,_,s,A,p,l,f,m,D,T,C,E,I,h,y,P,B,N){a.data={};var R=null,g=function(){d.reportCustomEvent("insurance_fix_time_product_purchase",{pro_code:u.prodCode}),a.data.prodInfo=P.getProdInfo(u.prodCode),S(),Y(),w(),U(),k(),O(),L(),F(),p.getData().calInputAmout&&(a.data.amount=p.getData().calInputAmout,i(function(){a.blurInput()},500))},w=function(){var t={};t.product_code=u.prodCode,a.data.buyLimit=!1,a.data.isProductFirstBuy=!0,n.requestBuyFinacialLimit(t).then(function(t){if(t&&t.ret_data){var o=parseFloat(t.ret_data.remain_amt);isNaN(o)||-1==o||o==a.data.prodInfo.p_day_buy_total_amount?a.data.buyLimit=!1:(a.data.buyLimit=!0,a.data.maxAmountBuyLimit=parseFloat(t.ret_data.remain_amt),a.data.prodInfo.p_buy_max_amount>0&&a.data.maxAmountBuyLimit>a.data.prodInfo.p_buy_max_amount&&(a.data.maxAmountBuyLimit=a.data.prodInfo.p_buy_max_amount)),isNaN(parseInt(t.ret_data.firstbuy_flag))||0===parseInt(t.ret_data.firstbuy_flag)&&(a.data.isProductFirstBuy=!1,a.data.minAmount=parseFloat(a.data.prodInfo.append_buy_min_amount),a.data.incAmount=parseFloat(a.data.prodInfo.append_buy_increment_min_amount))}},function(a){tracelog("查询产品购买限额和是否首次购买标记失败, 原因："+a.ret_msg)})},Y=function(){a.data.minAmount=parseFloat(a.data.prodInfo.min_amount),a.data.incAmount=parseFloat(a.data.prodInfo.increase_amount),a.data.ButtonClass="btn-c off",a.data.showLoading=!1,a.data.isPwdShow=!1,a.data.isPwdAutoShow=!1,a.data.sigOnPwdCommit=0,a.data.isInputReady=!1,a.data.mainCard={};var t=_.getCacheInfo("personalInfo");null!=t&&t.webank_card_no&&(a.data.mainCard.number=t.webank_card_no)},L=function(){"1"==a.data.prodInfo.can_roll&&P.requestProdInfo([a.data.prodInfo.roll_prod_code]).then(function(t){t&&t[a.data.prodInfo.roll_prod_code]&&(a.data.rollProdLife=t[a.data.prodInfo.roll_prod_code].life_time,a.data.rollProdIncomeRate=t[a.data.prodInfo.roll_prod_code].income_rate,a.data.rollProdValueDate=t[a.data.prodInfo.roll_prod_code].value_date)})},k=function(){1==a.data.prodInfo.fund_process_mode&&a.data.AccountData.currentPlus.amount>a.data.minAmount&&(a.data.prodInfo.bala_unfreeze_date?d.getDate()<d.getDateByYYYYMMDDString(a.data.prodInfo.bala_unfreeze_date)&&(a.data.unfreezeDate=d.getDateByYYYYMMDDString(a.data.prodInfo.bala_unfreeze_date)):d.getDate()<d.getDateByYYYYMMDDString(a.data.prodInfo.value_date)&&(a.data.unfreezeDate=d.getDateByYYYYMMDDString(a.data.prodInfo.value_date))),a.data.valueDate=d.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.countDate=d.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.countDate.setDate(a.data.countDate.getDate()+1),a.data.confirmDate=d.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.useSvrEndDate=parseInt(a.data.prodInfo.value_date,10)>20151116&&a.data.prodInfo.value_end_date,a.data.useSvrEndDate?a.data.endDate=d.getDateByYYYYMMDDString(a.data.prodInfo.value_end_date):(a.data.endDate=d.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.endDate.setDate(a.data.endDate.getDate()+parseInt(a.data.prodInfo.life_time)-1)),a.data.today=d.getDate()},S=function(){a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){a.blurInput()},a.data.agreementDesc="服务协议及风险提示",a.data.agreementCode=u.prodCode},b=function(){if(""==a.data.amount||void 0==a.data.amount)return!1;if(!d.isValidTransferAmount(a.data.amount))return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT,!1;if(a.data.prodInfo.p_buy_max_amount>0&&a.data.amount>a.data.prodInfo.p_buy_max_amount)return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="单次最多可买"+o("formatMoneyShort")(a.data.prodInfo.p_buy_max_amount)+"元，您的输入金额已超上限",!1;if(a.data.maxAmountBuyLimit&&-1!=a.data.maxAmountBuyLimit&&a.data.amount>a.data.maxAmountBuyLimit)return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="本次最多可买"+o("formatMoneyShort")(a.data.maxAmountBuyLimit)+"元，您的输入金额已超上限",!1;if(a.data.amountCN=d.convertCurrencyToChineseStyle(a.data.amount),a.data.income=parseFloat(parseFloat(a.data.amount)*parseFloat(a.data.prodInfo.income_rate)*parseInt(a.data.prodInfo.life_time)/365/100).toFixed(2),a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(a.data.amount)>a.data.AccountData.currentPlus.amount&&(a.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.WEBANK_CARD),a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(a.data.amount)>a.data.AccountData.webankAccount.amount){if(!(a.data.AccountData.otherBankAccount.otherAccountList&&a.data.AccountData.otherBankAccount.otherAccountList.length>0))return a.data.showNeedBindCard=!0,!1;a.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.OTHER_BANK_CARD,a.data.AccountData.otherBankAccount.cardInfo.bankBinCode=a.data.AccountData.otherBankAccount.otherAccountList[0].other_bank_bin_code,a.data.AccountData.otherBankAccount.cardInfo.userName=a.data.AccountData.otherBankAccount.otherAccountList[0].other_name,a.data.AccountData.otherBankAccount.cardInfo.cardNo=a.data.AccountData.otherBankAccount.otherAccountList[0].other_account,a.data.AccountData.otherBankAccount.cardInfo.cardTypeCode=a.data.AccountData.otherBankAccount.otherAccountList[0].other_card_type_code,a.data.AccountData.otherBankAccount.cardInfo.cardType=a.data.AccountData.otherBankAccount.otherAccountList[0].other_card_type,a.data.AccountData.otherBankAccount.cardInfo.bankName=a.data.AccountData.otherBankAccount.otherAccountList[0].other_bank_name}return a.data.unfreezeDate=a.data.AccountData.currentPlus.amount<a.data.amount||d.getDate()>=d.getDateByYYYYMMDDString(a.data.prodInfo.bala_unfreeze_date)?void 0:d.getDateByYYYYMMDDString(a.data.prodInfo.bala_unfreeze_date),a.data.showInputAct=!0,a.data.showInputResult=!0,a.data.showInputAmountTips=!1,a.data.showNeedBindCard=!1,!0};a.focusInput=function(){a.data.showInputAct=!1,a.data.showNeedBindCard=!1},a.blurInput=function(){if(a.changeInput(),a.data.isInputReady){if(a.data.amount<a.data.minAmount)return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="最低购买金额为"+a.data.minAmount+"元",a.data.ButtonClass="btn-c off",a.data.showInputResult=!1,a.data.showSelectedTips=!1,a.data.isInputReady=!1,void(a.data.showInputAct=!1);var t=a.data.amount;a.data.amount=d.getAmountForRule(a.data.amount,a.data.minAmount,a.data.incAmount),t!=a.data.amount&&d.makeToast("购买的金额必须为"+a.data.incAmount+"的整数倍，已自动为您调整","short"),a.changeInput()}},a.changeInput=function(){a.data.ButtonClass="btn-c off",a.data.showInputResult=!1,a.data.showSelectedTips=!1,a.data.isInputReady=!1,a.data.showInputAct=!1,a.data.isInputReady=b(),a.data.isInputReady&&(("1"==a.data.prodInfo.can_redeem_type_principal||"1"==a.data.prodInfo.can_roll)&&a.data.redeemType&&(a.data.showSelectedTips=!0),a.data.redeemType&&a.data.isAgreed&&a.data.AccountData.ctrlData.accountType!=e.ACCOUNT_TYPE.INVALID_TYPE&&(a.data.ButtonClass="btn-c"))};var v=function(){if(H(),R){if(R==e.ACCOUNT_TYPE.CURRENT_PLUS||R==e.ACCOUNT_TYPE.WEBANK_CARD)return R;var a=r.getPayableCardList(),t=a[0];for(var o in a)if(a[o].other_account==R){t=a[o];break}return t}return null},U=function(){var t=_.getCacheInfo("wealthNew"),o=r.getPayableCardList(),n=r.parseRawWealthData_V3(t);a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.amount=n.BankAmount,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.amount=n.HJAmount,a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择付款账户",a.data.AccountData.ctrlData.canBindNewCard=!0,a.data.AccountData.otherBankAccount={},a.data.AccountData.otherBankAccount.cardInfo={},a.data.AccountData.disabledOtherBankAccount=r.getUnableToPayCardList();var d=r.isTransVerificationAccount();if(d&&(a.data.AccountData.ctrlData.canBindNewCard=!1),o&&o.length>0&&!d){a.data.AccountData.otherBankAccount.otherAccountList=o;var c=v();c?c==e.ACCOUNT_TYPE.CURRENT_PLUS||c==e.ACCOUNT_TYPE.WEBANK_CARD?a.data.AccountData.ctrlData.accountType=c:(a.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.OTHER_BANK_CARD,a.data.AccountData.otherBankAccount.cardInfo.bankBinCode=c.other_bank_bin_code,a.data.AccountData.otherBankAccount.cardInfo.userName=c.other_name,a.data.AccountData.otherBankAccount.cardInfo.cardNo=c.other_account,a.data.AccountData.otherBankAccount.cardInfo.cardTypeCode=c.other_card_type_code,a.data.AccountData.otherBankAccount.cardInfo.cardType=c.other_card_type,a.data.AccountData.otherBankAccount.cardInfo.bankName=c.other_bank_name):a.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.INVALID_TYPE}else a.data.AccountData.ctrlData.accountType=e.ACCOUNT_TYPE.CURRENT_PLUS};a.onSelectPayWay=function(){a.data.isPwdShow?(a.data.isPwdAutoShow=!0,a.data.isPwdShow=!1):a.data.isPwdAutoShow=!1,a.data.showAccountSelector()},a.onSelectRedeem=function(){var t,o={};a.data.redeemType==e.REDEEM_TYPE.WEBANK?(t=e.QILU_REDEEM_TYPE.ALL_REDEEM,o[e.QILU_REDEEM_TYPE.ALL_REDEEM]=e.REDEEM_TYPE.WEBANK):a.data.redeemType==e.REDEEM_TYPE.HJ?(t=e.QILU_REDEEM_TYPE.ALL_REDEEM,o[e.QILU_REDEEM_TYPE.ALL_REDEEM]=e.REDEEM_TYPE.HJ):a.data.redeemType==e.REDEEM_TYPE.NEXT&&(t=e.QILU_REDEEM_TYPE.ALL_RENEW);var n=function(){B.dimStatusBarBackground(!0);var n=!1;"1"==a.data.prodInfo.can_roll&&(n=!0),a.data.partRedeemOption={show:!0,redeemAmount:a.data.amount,redeemIncome:a.data.income,hasRollProd:n,rollProdLife:a.data.rollProdLife,rollProdIncomeRate:a.data.rollProdIncomeRate,rollProdValueDate:a.data.rollProdValueDate,selectItem:t,redeemType:o,onConfirmSelect:function(t){a.data.showSelectedTips=!0,t.selectType==e.QILU_REDEEM_TYPE.ALL_RENEW?a.onClickRedeemLi("03"):t.selectType==e.QILU_REDEEM_TYPE.ALL_REDEEM&&a.onClickRedeemLi(t.redeemType),a.blurInput(),B.dimStatusBarBackground(!1)}}};a.data.isInputReady&&("1"==a.data.prodInfo.can_redeem_type_principal||"1"==a.data.prodInfo.can_roll?a.data.secondTimeSettingNote?(a.data.sliderUpConfirmOption={},a.data.sliderUpConfirmOption.show=!0,a.data.sliderUpConfirmOption.headText="你之前已设置到期后 "+a.data.secondTimeSettingNote+" ，本次修改将替代之前的设置。",a.data.sliderUpConfirmOption.buttonList=[{text:"确定",red:!0}],a.data.sliderUpConfirmOption.onClose=function(a){1==a&&n()}):n():(a.data.showRedeem=!0,B.dimStatusBarBackground(!0)))},a.onClickDstClose=function(){a.data.showRedeem=!1,B.dimStatusBarBackground(!1)},a.onClickRedeemLi=function(t){a.data.redeemType=t,a.data.amount&&""!=a.data.amount||(a.data.ButtonClass="btn-c off"),a.data.ButtonClass=a.data.amount>=a.data.minAmount&&a.data.redeemType&&a.data.isAgreed?"btn-c":"btn-c off",i(function(){a.data.showRedeem=!1,B.dimStatusBarBackground(!1),a.blurInput()},100)},a.onClassRedeemLi=function(t){return t==a.data.redeemType?"jv on":"jv"},a.onAccountSelected=function(){a.data.isPwdAutoShow&&(i(M,200),a.data.isPwdAutoShow=!1),F(),a.blurInput()},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS},a.isOtherBank=function(){return a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD};var O=function(){a.data.lastAmount=0;var t=_.getCacheInfo("wealthNew");if(t&&t.finance_wealth&&t.finance_wealth.fund_cycle)for(var o in t.finance_wealth.fund_cycle){var e=t.finance_wealth.fund_cycle[o];if(e.prod_code==a.data.prodInfo.prod_code){var n=P.getProdInfo(e.prod_code);!n||1!=n.product_type&&3!=n.product_type||0!=n.templet_type||(a.data.lastAmount+=parseFloat(e.buy_in_trans))}}if(t&&t.finance_wealth&&t.finance_wealth.bank_cycle)for(var o in t.finance_wealth.bank_cycle){var e=t.finance_wealth.bank_cycle[o];if(e.prod_code==a.data.prodInfo.prod_code){var n=P.getProdInfo(e.prod_code);!n||1!=n.product_type&&3!=n.product_type||0!=n.templet_type||(a.data.lastAmount+=parseFloat(e.buy_in_trans))}}if(a.data.lastAmount=a.data.lastAmount.toFixed(2),"1"!=a.data.prodInfo.can_redeem_type_principal&&"1"!=a.data.prodInfo.can_roll)a.data.redeemType="02";else if(1*a.data.lastAmount>0){a.data.secondTimeSettingNote="";var d=r.parseRawWealthDataForBXProduct_V2(t,a.data.prodInfo.prod_code);if(d&&d.redeemType)switch(a.data.redeemType=d.redeemType,d.redeemType){case"01":a.data.secondTimeSettingNote="全额赎回至微众卡";break;case"02":a.data.secondTimeSettingNote="全额赎回至活期+";break;case"03":a.data.secondTimeSettingNote="全额自动购买下一期"}}},M=function(){a.data.pwdSubTitle="购买"+a.data.prodInfo.on_sale_desc+"("+a.data.prodInfo.value_date.substr(4,4)+")";var t;a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?t="使用微众卡支付":a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS?t="使用活期+支付":(t="使用"+a.data.AccountData.otherBankAccount.cardInfo.bankName,t+=a.data.AccountData.otherBankAccount.cardInfo.cardType,t+=d.abridgeAccountNumber(a.data.AccountData.otherBankAccount.cardInfo.cardNo)+"支付"),a.data.payWayDesc=t,a.data.pwdTransDesc=parseFloat(a.data.amount).toFixed(2)+"元",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,o){t!==o&&(a.data.isPwdShow=!1,K())}),a.onClickPurchase=function(){return"btn-c off"==a.data.ButtonClass?void(a.data.isAgreed?a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.INVALID_TYPE&&d.makeToast(STRING_TABLE.PLEASE_CHECK_SELECT_PAYACCOUNT,"short"):d.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short")):void(b()&&(V()||M()))};var V=function(){if(a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=gBankLimit[a.data.AccountData.otherBankAccount.cardInfo.bankBinCode];if(!t)return!1;if(parseFloat(a.data.amount)>parseFloat(t.perOne))return a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="超过银行卡限额，"+a.data.AccountData.otherBankAccount.cardInfo.bankName+a.data.AccountData.otherBankAccount.cardInfo.cardType+"单笔"+t.perOne,parseFloat(t.perDay)>0&&(a.data.outValue.oneLineTextLeft+="，单日"+t.perDay),a.data.outValue.oneLineTextLeft+="。如需要大额度购买，请先转账至微众卡。",a.data.outValue.twoButtonText1="转账指引",a.data.outValue.twoButtonText2="关闭",a.data.outValue.popClose=function(a){1==a&&h.goPage("0")},!0}return!1},x=function(t){return a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t,a.data.outValue.oneButtonText="知道了",a.data.outValue.popClose=function(){},!0},F=function(){var t=a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD;if(t&&t&&r.isBankCardInBatchProcessing(a.data.AccountData.otherBankAccount.cardInfo.bankBinCode)){var o=r.getBankBatchProcessingMsg(a.data.AccountData.otherBankAccount.cardInfo.bankBinCode,a.data.AccountData.otherBankAccount.cardInfo.bankName);x(o)}},K=function(){var t=0;p.getData()&&p.getData().isForce&&(t=p.getData().isForce);var o={};a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?o.pay_flag=e.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS?(o.pay_flag=e.ACCOUNT_TYPE.CURRENT_PLUS,o.pay_product_code="001234"):(o.pay_flag=e.ACCOUNT_TYPE.OTHER_BANK_CARD,o.card_no=a.data.AccountData.otherBankAccount.cardInfo.cardNo),o.user_pwd=a.vm.formData.confirmPassword.RSA,o.transaction_amount=a.data.amount,o.product_code=a.data.prodInfo.prod_code,o.redeem_type=a.data.redeemType,o.is_capricious=t+"",a.data.transInfo={},a.data.transInfo.transAmount=a.data.amount,a.data.transInfo.prodCode=u.prodCode,a.data.transInfo.redeemType=a.data.redeemType,a.data.transInfo.accountType=a.data.AccountData.ctrlData.accountType,a.data.showLoading=!0,n.requestBuyFinacialProduct(o).then(function(t){r.isProcessingState(t.ret_code)?W(e.ORDER_QUERY_TYPE.PURCHASE_INSURANCE,t.ret_data.trans_serno,o.product_code):(a.data.showLoading=!1,d.clearCurrentViewCache(),I.go("/insurancePurchaseResult/"+t.ret_code+"/"+t.ret_msg,a.data.transInfo)),z()},function(t){a.data.showLoading=!1,r.isRetCodePwd(t.ret_code)?r.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a?M():2==a&&l.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&l.goPage()}):(d.clearCurrentViewCache(),I.go("/insurancePurchaseResult/"+t.ret_code+"/"+t.ret_msg,a.data.transInfo))})},W=function(t,o,e){r.checkProcessingState(t,o,e).then(function(t){a.data.showLoading=!1,d.clearCurrentViewCache(),I.go("/insurancePurchaseResult/"+t.retCode+"/"+t.retMsg,a.data.transInfo)})};a.bindCard=function(){N.goToBindCard()},a.back=function(){p.backPage()},a.onClickProdDetail=function(){t.path("/insuranceProductDetails/"+a.data.prodInfo.prod_code+"/hideBuyButton")};var H=function(){R=C.loadRecentlyUsedBankCard(e.ACCOUT_BIZ_TYPE.PAYMENT,e.ACCOUT_SCENE_TYPE.INSURANCE)},z=function(){var t=null;a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.CURRENT_PLUS?t=e.ACCOUNT_TYPE.CURRENT_PLUS:a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?t=e.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD&&(t=a.data.AccountData.otherBankAccount.cardInfo.cardNo),t&&C.saveRecentlyUsedBankCard(e.ACCOUT_BIZ_TYPE.PAYMENT,t,e.ACCOUT_SCENE_TYPE.INSURANCE)};a.onHJViewActive=function(){var t=r.getPayableCardList();t&&t.length>0&&(a.data.AccountData.otherBankAccount.otherAccountList=t),U(),b()},a.onHJViewDisActive=function(){},g()}]);app.controller("InsurancePurchaseResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","TransRecordService","LocationService","ProdInfoService","webankCommonService","essential","$q","HJactionLoading",function(a,t,e,n,o,d,r,i,s,c,u,l,_){a.data={};var D=l.defer(),f=function(){a.data.transInfo=t.search(),a.data.prodInfo=s.getProdInfo(a.data.transInfo.prodCode),a.data.transInfo.redPacketErrorStr=["","红包正在派送，稍后请在交易记录中查询","红包发放失败啦，请稍后再试"][a.data.transInfo.redPacketError||0]||"",a.data.resultMsg=d.resultMsg,a.data.resultId=d.resultId,a.data.isSuccShow=!1,a.data.resultId==e.CGI_RET.CGI_SUCCESS||a.data.resultId==e.CGI_RET.CGI_SUCCESS_2?(a.data.isSuccShow=!0,a.data.isProcessing=!1):(a.data.resultId==e.CGI_RET.CGI_PROCESSING||a.data.resultId==e.CGI_RET.CGI_PROCESSING_2)&&(a.data.isSuccShow=!0,a.data.isProcessing=!0);var n={pro_code:a.data.transInfo.prodCode,isSuccess:a.data.isSuccShow,isProcessing:a.data.isProcessing};o.reportCustomEvent("insurance_fix_time_product_purchase_result",n),I(),S()},I=function(){n.requestUserWealth().then(function(){D.resolve()},function(){D.resolve()}),a.data.isSuccShow&&c.setFinancialProductBuyTime(a.data.transInfo.prodCode,o.getDate().valueOf())},S=function(){a.data.today=o.getDate(),1==a.data.prodInfo.fund_process_mode&&(a.data.prodInfo.bala_unfreeze_date?o.getDate()<o.getDateByYYYYMMDDString(a.data.prodInfo.bala_unfreeze_date)&&(a.data.unfreezeDate=o.getDateByYYYYMMDDString(a.data.prodInfo.bala_unfreeze_date)):o.getDate()<o.getDateByYYYYMMDDString(a.data.prodInfo.value_date)&&(a.data.unfreezeDate=o.getDateByYYYYMMDDString(a.data.prodInfo.value_date))),a.data.valueDate=o.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.showDate=o.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.showDate.setDate(a.data.showDate.getDate()+1),a.data.lifeTime=a.data.prodInfo.life_time,a.data.confirmDate=o.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.useSvrEndDate=parseInt(a.data.prodInfo.value_date,10)>20151116&&a.data.prodInfo.value_end_date,a.data.useSvrEndDate?a.data.endDate=o.getDateByYYYYMMDDString(a.data.prodInfo.value_end_date):(a.data.endDate=o.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.endDate.setDate(a.data.endDate.getDate()+parseInt(a.data.prodInfo.life_time)-1)),a.data.redeemDate=a.data.prodInfo.arrival_account_date?o.getDateByYYYYMMDDString(a.data.prodInfo.arrival_account_date):o.getNextWorkDay(1,a.data.endDate)};a.onClickFinancialRecom=function(){i.go(u.isFinancialHomeGray()?"financialHome":"financialRecommend")},a.onClickHome=function(){t.path("/home")},a.onClickDetail=function(){3==a.data.prodInfo.product_type||"QL21"==a.data.prodInfo.on_sale_code?(_.show(),D.promise.then(function(){_.hide(),i.go("myFinancialShortPeroid",null,null,{stateStr:e.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})})):(_.show(),D.promise.then(function(){_.hide(),i.go("myFinancialInsurance",null,null,{stateStr:e.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})}))},a.onClickTranLog=function(){r.goPage(null,null,null,{stateStr:e.LOCATION_BACK_PATH.GO_TRANS_RECORD})},f()}]);app.controller("InsuranceMyProductDetailsController",["$scope","LocationService","GLOBAL_CONSTANT","cgiService","essential","webankCommonService","utils","$stateParams","cache","InsuranceProductDetailService","InsurancePurchaseService","commonDirectiveService","InsuranceMyProdDetailService","$timeout","InsuranceHistoryProductDetailService","dataService","ProdInfoService","localStorage","HJactionLoading","envService","ResetPasswdService",function(a,t,e,o,d,r,n,i,s,c,l,u,_,p,E,m,f,T,D,P,h){a.data={},a.func={},a.data.cancelListObj={listArr:[],startStr:""};var R={SHOW_NOTHING:0,SHOW_CONTINUE:1,SHOW_NEW_ARRIVAL:2};a.data.footerState=R.SHOW_NOTHING,a.data.FOOTER_STATE=R;var I=function(){a.data.cancelListObj={listArr:[],startStr:""}},y=function(){I(),n.reportCustomEvent("insurance_fix_time_myproduct_detail",{pro_code:i.prodCode}),a.data.prodInfo=f.getProdInfo(i.prodCode),m.getActivityConfig(i.prodCode,function(t){t&&t.hasOwnProperty("is_match")&&("false"===t.is_match?(a.data.limitWords=t.limit_words,a.data.limitButton=t.limit_button):"true"===t.is_match&&(a.data.isMgm=t.is_mgm,a.data.isMgm&&g()))}),C(),w(),A(),V(),B(),v()},g=function(){a.data.hasMgmCard=!1,o.promo.findRecords().then(function(t){if(t&&t.ret_data&&t.ret_data.history&&t.ret_data.history.length)for(var e=t.ret_data.history,o=0,d=e.length;d>o;o++)if(/^W0007/.test(e[o].activity_id)&&0===e[o].use_status&&!e[o].is_expired){a.data.hasMgmCard=!0;break}},function(){a.data.hasMgmCard=!1})};a.func.onClickMgm=function(){var a=P.getEnvVariable().CGI_PREFIX_S+"web/mgm4/app.html";a=n.appendParamsToURL(a,{prod_code:i.prodCode,has_sub_prod:1,iad_userinfo:!0}),d.openInAppBrowser(a,"showBackButton=no,hardwareback=no")};var v=function(){"1"==a.data.prodInfo.can_roll&&f.requestProdInfo([a.data.prodInfo.roll_prod_code]).then(function(t){t&&t[a.data.prodInfo.roll_prod_code]&&(a.data.rollProdLife=t[a.data.prodInfo.roll_prod_code].life_time,a.data.rollProdIncomeRate=t[a.data.prodInfo.roll_prod_code].income_rate,a.data.rollProdValueDate=t[a.data.prodInfo.roll_prod_code].value_date)})},A=function(){a.data.cancelItemClass="lc-wrap px-a no-t";var t=s.getCacheInfo("confirmingList");if(t&&t.product_list&&t.product_list.length>0){var e=t.product_list;o.requestProductCanCancelList(i.prodCode).then(function(t){if(t&&t.ret_data&&t.ret_data.list)for(var o=0;o<t.ret_data.list.length;++o)for(var d=0;d<e.length;++d)t.ret_data.list[o].ori_biz_seq_id==e[d].trans_serno&&("5"!=e[d].trans_type&&"60"!=e[d].trans_type||e[d].prod_code!=i.prodCode||a.data.cancelListObj.listArr.push(e[d]));a.data.cancelListObj.listArr.length>0&&(a.data.cancelItemClass="lc-wrap px-a mgt20")},function(){})}};a.onClickCancelList=function(){t.go("/insuranceCancelList",{data:a.data.cancelListObj.listArr})};var C=function(){a.data.isValueDateStart=!1,a.data.gainedValueDays=0,a.data.daysBeforeValueDate=0,a.data.valuePct=0,a.data.remainValueDays=0,a.data.today=n.getDate();var t=n.getDate(),e=n.getDateByYYYYMMDDString(a.data.prodInfo.value_date),o=n.getDateDifference(e,t);a.data.confirmDate=n.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.isValueDateStart=o>=0,o=Math.ceil(Math.abs(o)),a.data.useSvrEndDate=parseInt(a.data.prodInfo.value_date,10)>20151116&&a.data.prodInfo.value_end_date,a.data.useSvrEndDate?a.data.endDate=n.getDateByYYYYMMDDString(a.data.prodInfo.value_end_date):(a.data.endDate=n.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.endDate.setDate(a.data.endDate.getDate()+parseInt(a.data.prodInfo.life_time)-1)),a.data.arrivalDate=a.data.prodInfo.arrival_account_date?n.getDateByYYYYMMDDString(a.data.prodInfo.arrival_account_date):n.getNextWorkDay(1,a.data.endDate),a.data.isValueDateStart?(a.data.gainedValueDays=o-1,a.data.useSvrEndDate?(a.data.remainValueDays=n.getDateDifference(t,a.data.endDate),a.data.remainValueDays=Math.ceil(a.data.remainValueDays)):a.data.remainValueDays=parseInt(a.data.prodInfo.life_time)-a.data.gainedValueDays,a.data.valuePct=Math.ceil(a.data.gainedValueDays/parseFloat(a.data.prodInfo.life_time)*100),a.data.valuePct>100&&(a.data.valuePct=100)):a.data.daysBeforeValueDate=o,a.data.validDate=a.data.prodInfo.modify_redeem_method_deadline_date&&a.data.prodInfo.modify_redeem_method_deadline_time?n.getDateByDateAndTimeString(a.data.prodInfo.modify_redeem_method_deadline_date,a.data.prodInfo.modify_redeem_method_deadline_time):a.data.endDate},M=function(t){a.data.dst=t,a.data.dst==e.REDEEM_TYPE.WEBANK?(a.data.dstString="微众卡",a.data.weBankCardClass="jv on",a.data.HJClass="jv"):a.data.dst==e.REDEEM_TYPE.NEXT?(a.data.dstString="自动购买下一期",a.data.weBankCardClass="jv",a.data.HJClass="jv"):(a.data.dst=e.REDEEM_TYPE.HJ,a.data.dstString="",a.data.weBankCardClass="jv",a.data.HJClass="jv on")},w=function(){var t=s.getCacheInfo("wealthNew"),d=r.parseRawWealthDataForBXProduct_V2(t,i.prodCode);if(d)if(a.data.yestodayIncome=parseFloat(d.yestodayIncome).toFixed(2),a.data.showIncome=0==parseFloat(a.data.yestodayIncome)?!1:!0,a.data.accumulateIncome=parseFloat(d.accumulatedIncome).toFixed(2),a.data.holdAmount=parseFloat(d.amount).toFixed(2),a.data.allAmount=parseFloat(d.allAmount).toFixed(2),a.data.showDst=!1,a.data.showRedeemItem=!1,"1"==a.data.prodInfo.can_redeem_type_principal){var n={fundcode:a.data.prodInfo.prod_code};o.requestpartRedeemType(n).then(function(t){var o=null;if(t&&t.ret_data&&t.ret_data.cycle&&t.ret_data.cycle.length>0)for(var r=t.ret_data.cycle,n=0;n<r.length;n++)r[n].fundcode==a.data.prodInfo.prod_code&&r[n].applicationvol&&(o=r[n]);o?("0"==o.rollflag?a.data.dst=e.REDEEM_TYPE.PART_WEBANK:"3"==o.rollflag&&(a.data.dst=e.REDEEM_TYPE.PART_HJ),a.data.partRedeemAmount=o.applicationvol,a.data.dstPartRedeemAmount=parseFloat(o.applicationvol).toFixed(2),a.data.dstPartRenewAmount=parseFloat(1*a.data.holdAmount-1*a.data.dstPartRedeemAmount).toFixed(2),a.data.showRedeemItem=!0):d.redeemType&&(M(d.redeemType),a.data.showRedeemItem=!0)},function(){a.data.showRedeemItem=!1})}else M(d.redeemType),a.data.showRedeemItem=!0;if(a.data.totalIncome=(parseFloat(a.data.holdAmount)*parseFloat(a.data.prodInfo.income_rate)*parseFloat(a.data.prodInfo.life_time)/100/365).toFixed(2),0==a.data.holdAmount){var c=r.parseRawWealthDataForConfirmBXProduct(t,i.prodCode);a.data.confirmAmount=c.amount,c.refundAmount&&(a.data.refundAmount=c.refundAmount),a.data.totalIncome=(parseFloat(a.data.confirmAmount)*parseFloat(a.data.prodInfo.income_rate)*parseFloat(a.data.prodInfo.life_time)/100/365).toFixed(2)}};a.contentStyle=function(){return a.data.limitWords||a.data.footerState!=a.data.FOOTER_STATE.SHOW_NOTHING?{bottom:"50px"}:{}},a.onClickDstSelect=function(){if("1"==a.data.prodInfo.can_redeem_type_principal||"1"==a.data.prodInfo.can_roll){var t=a.data.prodInfo.p_redeem_min_amount||0,o=a.data.prodInfo.p_hold_min_amount||0,r=!1;"1"==a.data.prodInfo.can_redeem_type_principal&&(r=!0);var n,i,s={};a.data.dst==e.REDEEM_TYPE.WEBANK?(n=e.QILU_REDEEM_TYPE.ALL_REDEEM,s[e.QILU_REDEEM_TYPE.ALL_REDEEM]=e.REDEEM_TYPE.WEBANK):a.data.dst==e.REDEEM_TYPE.NEXT?n=e.QILU_REDEEM_TYPE.ALL_RENEW:a.data.dst==e.REDEEM_TYPE.HJ?(n=e.QILU_REDEEM_TYPE.ALL_REDEEM,s[e.QILU_REDEEM_TYPE.ALL_REDEEM]=e.REDEEM_TYPE.HJ):a.data.dst==e.REDEEM_TYPE.PART_WEBANK?(n=e.QILU_REDEEM_TYPE.PART_REDEEM,i=a.data.dstPartRedeemAmount,s[e.QILU_REDEEM_TYPE.PART_REDEEM]=e.REDEEM_TYPE.WEBANK):a.data.dst==e.REDEEM_TYPE.PART_HJ&&(n=e.QILU_REDEEM_TYPE.PART_REDEEM,i=a.data.dstPartRedeemAmount,s[e.QILU_REDEEM_TYPE.PART_REDEEM]=e.REDEEM_TYPE.HJ);var c=!1;"1"==a.data.prodInfo.can_roll&&(c=!0),a.data.partRedeemOption={show:!0,redeemAmount:a.data.holdAmount,redeemIncome:a.data.totalIncome,hasRollProd:c,rollProdLife:a.data.rollProdLife,rollProdIncomeRate:a.data.rollProdIncomeRate,rollProdValueDate:a.data.rollProdValueDate,selectItem:n,redeemType:s,partRedeemAmount:i,showPartRedeem:r,minRedeemAmount:t,minBalanceAmount:o,onConfirmSelect:function(t){if(t.selectType==e.QILU_REDEEM_TYPE.ALL_RENEW){if(a.data.dst==e.REDEEM_TYPE.NEXT)return;a.data.selectType=e.REDEEM_TYPE.NEXT,S()}else if(t.selectType==e.QILU_REDEEM_TYPE.ALL_REDEEM){if(a.data.dst==t.redeemType)return;a.data.selectType=t.redeemType,S()}else if(t.selectType==e.QILU_REDEEM_TYPE.PART_REDEEM){var o;if(o=1*t.redeemType==1?e.REDEEM_TYPE.PART_WEBANK:e.REDEEM_TYPE.PART_HJ,a.data.dstPartRedeemAmount==t.partRedeemAmount&&a.data.dst==o)return;a.data.selectType=o,a.data.partRedeemAmount=t.partRedeemAmount,a.data.partRenewAmount=t.partRenewAmount,S()}d.dimStatusBarBackground(!1)}}}else a.data.showDst=!0},a.onClickDstClose=function(){a.data.showDst=!1},a.onSelectDstHJ=function(){a.data.dst!=e.REDEEM_TYPE.HJ&&(a.data.selectType=e.REDEEM_TYPE.HJ,S(),a.data.showDst=!1)},a.onSelectWeBank=function(){a.data.dst!=e.REDEEM_TYPE.WEBANK&&(a.data.selectType=e.REDEEM_TYPE.WEBANK,S(),a.data.showDst=!1)};var S=function(){a.data.selectType==e.REDEEM_TYPE.WEBANK?a.data.pwdSubTitle="修改为到期取出到微众卡":a.data.selectType==e.REDEEM_TYPE.NEXT?a.data.pwdSubTitle="修改为到期本金自动购买下一期":a.data.selectType==e.REDEEM_TYPE.HJ?a.data.pwdSubTitle="修改为到期取出到活期+":a.data.selectType==e.REDEEM_TYPE.PART_WEBANK?a.data.pwdSubTitle="修改为到期后部分赎回，剩余自动购买下一期":a.data.selectType==e.REDEEM_TYPE.PART_HJ&&(a.data.pwdSubTitle="修改为到期后部分赎回，剩余自动购买下一期"),a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,Y())});var Y=function(){var t={};t.password=a.data.vm.formData.confirmPassword.RSA,1*a.data.selectType>3?(a.data.selectType==e.REDEEM_TYPE.PART_WEBANK?t.rollflag="0":a.data.selectType==e.REDEEM_TYPE.PART_HJ&&(t.rollflag="3"),t.fundcode=i.prodCode,t.app_vol=a.data.partRedeemAmount,D.show(),o.requestModifypartRedeemType(t).then(function(){D.hide(),tracelog("修改 齐鲁 到期时安排 成功"),a.data.dst=a.data.selectType,a.data.dstPartRedeemAmount=parseFloat(a.data.partRedeemAmount).toFixed(2),a.data.dstPartRenewAmount=parseFloat(a.data.partRenewAmount).toFixed(2),n.makeToast("修改成功"),o.requestUserWealth().then(function(){},function(){})},function(t){D.hide(),tracelog("修改 齐鲁 到期时安排 失败"),r.isRetCodePwd(t.ret_code)?r.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(t){1==t?a.data.isPwdShow=!0:2==t&&h.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&h.goPage()}):n.makeToast(t.ret_msg,"short")})):(t.current_prod_code=i.prodCode,t.ta_code=a.data.prodInfo.ta_code,t.redeem_type=a.data.selectType==e.REDEEM_TYPE.WEBANK?e.REDEEM_TYPE.WEBANK:a.data.selectType==e.REDEEM_TYPE.NEXT?e.REDEEM_TYPE.NEXT:e.REDEEM_TYPE.HJ,D.show(),o.requestInsuranceRedeemType(t).then(function(){D.hide(),tracelog("修改保险赎回方式成功"),n.makeToast("修改成功"),M(a.data.selectType),o.requestUserWealth().then(function(){},function(){})},function(t){D.hide(),r.isRetCodePwd(t.ret_code)?r.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(t){1==t?a.data.isPwdShow=!0:2==t&&h.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&h.goPage()}):n.makeToast(t.ret_msg,"short")}))},L=function(t){var e=f.getProdInfo(t);if(e){if(a.data.recomProdCode=t,a.data.recomProdInfo=e,i.prodCode!=t)return a.data.footerState=R.SHOW_NEW_ARRIVAL,a.data.isNewArrivalTipsShown=parseInt(n.getYYYYMMDDStringByDate(a.data.endDate),10)<parseInt(e.value_date),void(a.data.newArrivalIncomeRate=e.income_rate);var d=n.getDate(),r=n.getDateByDateAndTimeString(e.end_buy_date,e.end_buy_time);return d>r?void(a.data.footerState=R.SHOW_NOTHING):void(parseInt(e.quota_total,10)<=0||"02"==e.trans_status?a.data.footerState=R.SHOW_NOTHING:(a.data.footerState=R.SHOW_CONTINUE,o.requestProductBalance(t).then(function(t){a.data.footerState=t.ret_data.quota_total<=0?R.SHOW_NOTHING:R.SHOW_CONTINUE},function(){})))}},B=function(){var t=O(a.data.prodInfo.on_sale_code);t&&L(t)};a.onClickProductDetail=function(){O(a.data.prodInfo.on_sale_code)==a.data.prodInfo.prod_code?c.goPage(a.data.prodInfo.prod_code):E.goPage(a.data.prodInfo.prod_code)};var O=function(a){var t;if(t=T.loadData(d.isFinancialHomeGray()?"financialRecommendV2":"financialRecommend"),t&&t.ret_data&&t.ret_data.productTypeList)for(var e in t.ret_data.productTypeList)if(1==t.ret_data.productTypeList[e].productType||3==t.ret_data.productTypeList[e].productType)for(var o in t.ret_data.productTypeList[e].productList)if(t.ret_data.productTypeList[e].productList[o].productCode==a)return t.ret_data.productTypeList[e].productList[o].productSubCode;return void 0};a.func.onClickViewNewArrival=function(){n.reportCustomEvent("insurance_product_view_new_arrival_buttonClicked",{prod_code:i.prodCode}),a.data.recomProdCode&&a.data.recomProdInfo&&c.goPage(a.data.recomProdCode)},a.func.onClickContinueBuy=function(){n.reportCustomEvent("insurance_product_continue_buy_buttonClicked",{prod_code:i.prodCode}),a.data.sliderUpConfirmOption=a.data.sliderUpConfirmOption||{},a.data.riskOption=a.data.riskOption||{},u.checkProductRiskSetting({productRiskLevel:a.data.recomProdInfo.risk_level||2,sliderUpConfirmOption:a.data.sliderUpConfirmOption,riskOption:a.data.riskOption}).then(function(t){t=t||{};var e=t.isForce;l.goPage(a.data.recomProdInfo.prod_code,null,{isForce:e})},function(){})},a.back=function(){_.backPage()},a.onClickYesterdayIncomeExplanation=function(){a.data.maskTitle="预估昨日收益",a.data.maskDetail="不计入总资产，实际收益以到期后兑付为准",a.data.isMaskShown=!0,d.setInfoMaskStatusBackground(!0)},a.onClickCancelMask=function(){a.data.isMaskShown=!1,d.setInfoMaskStatusBackground(!1)};var V=function(){if(a.data.prodInfo&&a.data.prodInfo.share_config&&!isReviewVer){var t={};a.data.shareData=t,t.prod_type=e.PROD_TYPE.BX,t.shareObj=a.data.prodInfo.share_config,t.shareContent=null,t.shareTarget=null,t.shareObj.share_content&&t.shareObj.share_target?(a.data.shareClass="menu-tip share hjButton",t.shareContent=t.shareObj.share_content.replace("{prod_name}",a.data.prodInfo.on_sale_desc),t.shareContent=t.shareContent.replace("{income_rate}",a.data.prodInfo.income_rate),t.shareTarget=t.shareObj.share_target.replace("{prod_code}",a.data.prodInfo.on_sale_code),t.shareTarget=t.shareTarget.replace("{prod_type}",t.prod_type)):a.data.shareClass="hpw-‰con hide hjButton"}else a.data.shareClass="hpw-‰con hide hjButton"};a.share=function(){var t=a.data.shareData,e=null;t&&(e=d.sharePage(t.shareObj.share_title,t.shareContent,t.shareObj.share_iconurl,t.shareTarget)),e&&e.then(function(){var a={prod_code:i.prodCode,product_type:"insurance_fix_time_my_product",status:"success"};n.reportCustomEvent("share_product",a)},function(){var a={prod_code:i.prodCode,product_type:"insurance_fix_time_my_product",status:"failure"};n.reportCustomEvent("share_product",a)})},a.onHJViewActive=function(){y()},a.onHJViewDisActive=function(){},y()}]);app.controller("InsuranceProductDetailsController",["$scope","$location","$stateParams","utils","cgiService","essential","$timeout","webankCommonService","$rootScope","cache","InsuranceProductDetailService","InsurancePurchaseService","GLOBAL_CONSTANT","RegisterService","LoginService","LocationService","$http","$sce","$ionicModal","envService","InsuranceHistoryListService","dataService","HJactionPop","ProdInfoService","localStorage","commonDirectiveService",function(a,t,o,e,n,r,d,u,i,s,c,l,p,_,f,m,g,I,T,C,h,S,A,E,v,D){a.data={},a.countDownHandle=null,a.countDownBtnHandle=null;var B=function(){e.reportCustomEvent("insurance_fix_time_product_detail",{pro_code:o.prodCode}),a.data.prodInfo=E.getProdInfo(o.prodCode),U(),q(),N(),O(),b(),H(),M(),L(),k(),R(),w(),K(),y()},y=function(){if(1==a.data.status&&s.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){var t=s.getCacheInfo("assessment");a.data.noneRisk=t?!1:!0}a.onClickToRisk=function(){a.data.riskOption=a.data.riskOption||{},D.beginUserRiskAssessment({riskOption:a.data.riskOption,isParentBack:!1}).then(function(a){a.status==p.RISK_STATUS.CLICK_BACK||y()},function(){})}},w=function(){"1"==a.data.prodInfo.can_roll&&E.requestProdInfo([a.data.prodInfo.roll_prod_code]).then(function(){tracelog("滚存产品预拉取")})},O=function(){a.data.calculatorshow=!1,T.fromTemplateUrl("my-calculator.html",{scope:a}).then(function(t){a.calculatormodal=t})},P=function(){if(a.data.prodInfo.load_desc){a.rootUrl=C.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+o.prodCode+"/";var t=a.rootUrl+"prodSecondPage.html";g.get(I.trustAsResourceUrl(t)).success(function(t){t=t.toString().trim(),t.length>0&&(a.data.showSecond=!0,a.data.secondPageStr=t,d(function(){a.upDownInit(!0,function(t){t||(a.data.showSecond=!1)})}))})}},R=function(){if(a.data.minAmount=parseFloat(a.data.prodInfo.min_amount),a.data.IsProFirstBuy=!0,!(s.getUserStatus()!=p.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT||a.data.limitWords||3!=a.data.status&&4!=a.data.status)){var t={};t.product_code=o.prodCode,n.requestBuyFinacialLimit(t).then(function(t){t&&t.ret_data&&(isNaN(parseInt(t.ret_data.firstbuy_flag))||0===parseInt(t.ret_data.firstbuy_flag)&&(a.data.IsProFirstBuy=!1,a.data.prodInfo.append_buy_min_amount!=a.data.prodInfo.min_amount&&(a.data.minAmount=parseFloat(a.data.prodInfo.append_buy_min_amount))))},function(a){tracelog("查询产品购买限额和是否首次购买标记失败, 原因："+a.ret_msg)})}},N=function(){var t=function(){if(a.data.todayString==a.data.prodInfo.start_buy_date)try{a.data.startBuyTime.getTime()-a.data.now.getTime()<=3e5?(a.data.countDownFlag=!0,d(function(){a.countDownBtnHandle=new Countdown,a.countDownBtnHandle.initBuyButton(a.data.startBuyTime.getTime(),function(){B()})},300)):a.data.countDownFlag=!1}catch(t){}};if(1==a.data.status)if(APP_ABILITY&&APP_ABILITY.indexOf(p.APP_ABILITY.ABILITY_CALENDAR)>=0){if(a.data.todayString==a.data.prodInfo.start_buy_date)try{a.data.startBuyTime.getTime()-a.data.now.getTime()<=3e5&&(a.data.lessSixMinutes=!0)}catch(o){}a.data.calendarButtonStr="起售前提醒我",a.data.calendarButtonClass="lc-buy-btn";var n=v.loadData("calendarClock");n&&n.hasRequire&&((n.errorNums||0)<2?e.queryCalendarClock({note:a.data.prodInfo.on_sale_desc+"("+a.data.prodInfo.prod_code+")"},function(o){o&&2==o.result?(a.data.calendarButtonStr="已设置提醒",a.data.calendarButtonClass="lc-buy-btn off",t()):o&&-1==o.result}):a.data.lessSixMinutes=!0)}else a.data.lessSixMinutes=!0},k=function(){S.getActivityConfig(a.data.prodInfo.prod_code,function(t){t&&t.hasOwnProperty("is_match")&&("false"===t.is_match?(a.data.limitWords=t.limit_words,a.data.limitButton=t.limit_button):"true"===t.is_match&&(a.data.isMgm=t.is_mgm,a.data.isMgm&&W()))})},U=function(){a.data.showBuyButton="hideBuyButton"==o.isHideButton?!1:!0,a.data.riskDesc=gProductArr[a.data.prodInfo.risk_level]?gProductArr[a.data.prodInfo.risk_level]:"中等",a.data.now=e.getDate(),a.data.startBuyTime=e.getDateByDateAndTimeString(a.data.prodInfo.start_buy_date,a.data.prodInfo.start_buy_time),a.data.endBuyDate=e.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time),a.data.startBuyTime>a.data.now?(a.data.status=1,e.isTomorrow(a.data.startBuyTime)?(a.data.DateShowTips=!0,a.data.DateShowTipsContent="(明天)"):e.isTomorrowTomorrow(a.data.startBuyTime)?(a.data.DateShowTips=!0,a.data.DateShowTipsContent="(后天)"):(a.data.DateShowTips=!1,a.data.DateShowTipsContent="")):a.data.status=a.data.now>a.data.endBuyDate?2:e.isToday(a.data.endBuyDate)?3:4,"02"==a.data.prodInfo.trans_status&&(a.data.status=2),a.data.prodInfo.income_rate=parseFloat(a.data.prodInfo.income_rate).toFixed(2),a.data.valueDate=e.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.useSvrEndDate=parseInt(a.data.prodInfo.value_date,10)>20151116&&a.data.prodInfo.value_end_date,a.data.useSvrEndDate?a.data.valueEndDate=e.getDateByYYYYMMDDString(a.data.prodInfo.value_end_date):(a.data.valueEndDate=e.getDateByYYYYMMDDString(a.data.prodInfo.value_date),a.data.valueEndDate.setDate(a.data.valueEndDate.getDate()+parseInt(a.data.prodInfo.life_time)-1)),a.data.redeemDate=a.data.prodInfo.arrival_account_date?e.getDateByYYYYMMDDString(a.data.prodInfo.arrival_account_date):e.getNextWorkDay(1,a.data.valueEndDate),a.data.today=e.getDate(),a.data.DateShowTips=!1,a.data.DateShowTipsContent="",a.data.todayString=e.getYYYYMMDDStringByDate(a.data.today),a.data.refreshTimer=d(function(){tracelog("刷新定期产品未购详情页"),U(),H()},1e3)},b=function(){var t=C.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+a.data.prodInfo.on_sale_code+"/prodInfo.html";g.get(I.trustAsResourceUrl(t)).success(function(t){a.data.sectionHtml=I.trustAsHtml(t)})},L=function(){if(3==a.data.status){a.data.countdownHour=0,a.data.countdownMinute=0,a.data.countdownSecond=0;var t=e.getDateByYYYYMMDDString(a.data.prodInfo.end_buy_date);if(e.isToday(t)){a.data.isTodayInSale=!0,a.data.isInSale=!1;var t=e.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time);if(t){var o=e.getDate(),n=e.getSecondDifference(o,t);n>0&&(a.data.countdownHour=parseInt(n/3600),a.data.countdownMinute=parseInt((n-3600*a.data.countdownHour)/60),a.data.countdownSecond=parseInt(n-3600*a.data.countdownHour-60*a.data.countdownMinute),d(function(){a.countDownHandle=new Countdown,a.countDownHandle.init(function(){B()})},200))}}else a.data.isTodayInSale=!1,a.data.isInSale=!0}},H=function(){if(3==a.data.status||4==a.data.status){if(s.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_GUEST)a.data.remainAmount=parseInt(a.data.prodInfo.quota_total);else{var t=v.loadData("insuranceBalance"+a.data.prodInfo.prod_code);a.data.remainAmount=void 0!=t?t:parseInt(a.data.prodInfo.quota_total)}Y()}},M=function(){(3==a.data.status||4==a.data.status)&&s.getUserStatus()!=p.ACCOUNT_STATE.USER_STATE_GUEST&&n.requestProductBalance(a.data.prodInfo.prod_code).then(function(t){a.data.remainAmount=t.ret_data.quota_total,v.saveData("insuranceBalance"+a.data.prodInfo.prod_code,t.ret_data.quota_total),Y()})},Y=function(){if(void 0==a.data.prodInfo.total_amount||0==a.data.prodInfo.total_amount)a.data.status=2;else if(a.data.remainAmount<a.data.prodInfo.min_amount||0==a.data.remainAmount)a.data.status=2;else{var t=parseInt(100*parseFloat(a.data.remainAmount)/parseFloat(a.data.prodInfo.total_amount));a.data.remainPct=t>=80?"额度充足":t>=50?"不多了":t>=10?"快没了":t>=1?t+"%":"即将售罄"}},F=function(){m.go("insuranceProductDetails/"+o.prodCode,null,null,{stateStr:p.LOCATION_BACK_PATH.BACKTO_INSURANCE_AFTER_LOGIN_OR_REGISTER},!0)},x=function(){e.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),d(function(){_.setCallbackPage(F,F),_.go()},1e3)},G=function(){e.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),d(function(){f.setCallbackPage(F,F),m.go("/login")},1e3)};a.onClickContinueBuy=function(){var t=parseFloat(a.data.calInputAmout);a.calculatormodal&&a.calculatormodal.hide(),a.data.limitButton||(s.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_GUEST?G():s.getUserStatus()==p.ACCOUNT_STATE.USER_STATE_LOGIN?x():(a.data.sliderUpConfirmOption=a.data.sliderUpConfirmOption||{},a.data.riskOption=a.data.riskOption||{},D.checkProductRiskSetting({productRiskLevel:a.data.prodInfo.risk_level||2,sliderUpConfirmOption:a.data.sliderUpConfirmOption,riskOption:a.data.riskOption}).then(function(o){o=o||{};var e=o.isForce;t>0?l.goPage(a.data.prodInfo.prod_code,null,{isForce:e,calInputAmout:t}):l.goPage(a.data.prodInfo.prod_code,null,{isForce:e,calInputAmout:void 0})},function(){a.calculatormodal&&a.calculatormodal.hide()})))},a.contentStyle=function(){return a.data.showBuyButton?{bottom:"50px"}:{}},a.onClickSetClock=function(){if("起售前提醒我"==a.data.calendarButtonStr){var t=v.loadData("calendarClock");v.saveData("calendarClock",{hasRequire:!0,errorNums:t&&t.errorNums});var o=0;e.setCalendarClock({title:"【"+a.data.prodInfo.on_sale_desc+"】 5分钟后开始抢购",startDate:a.data.startBuyTime,note:a.data.prodInfo.on_sale_desc+"("+a.data.prodInfo.prod_code+")"},function(n){if(n&&2==n.result)e.reportCustomEvent(p.REPORT_EVENT_NAME.EXCEPTION,p.REPORT_EXCEPTION.CALANDER_CLOCK_SET_SUCCESS),e.makeToast("设置成功，起售前5分钟提醒您","short"),a.data.calendarButtonStr="已设置提醒",a.data.calendarButtonClass="lc-buy-btn off";else if(n&&-1==n.result){e.reportCustomEvent(p.REPORT_EVENT_NAME.EXCEPTION,p.REPORT_EXCEPTION.CALANDER_CLOCK_SET_FAIL);var r="由于您的闹钟被禁用，不能使用提醒功能，请到设置中开启日历提醒";e.isiOSDevice()&&(r="由于您的闹钟被禁用，不能使用提醒功能，请到设置—隐私—日历中开启日历提醒"),A.show({oneLineTextLeft:r,oneButtonText:"我知道了",popClose:function(){}}),a.data.lessSixMinutes=!0}else n&&-2==n.result&&(e.reportCustomEvent(p.REPORT_EVENT_NAME.EXCEPTION,p.REPORT_EXCEPTION.CALANDER_CLOCK_SET_ERROR),A.show({oneLineTextLeft:"系统异常，暂时无法为你设置提醒",oneButtonText:"我知道了",popClose:function(){}}),a.data.lessSixMinutes=!0,o=1,t&&t.errorNums&&(o=t.errorNums+1));v.saveData("calendarClock",{hasRequire:!0,errorNums:o})})}},a.back=function(){"hideBuyButton"==o.isHideButton?t.path("/insurancePurchase/"+a.data.prodInfo.prod_code):c.backPage()},a.onClickProductIntroduction=function(){m.go("/insuranceProductIntroduction/"+a.data.prodInfo.on_sale_code+"/"+a.data.prodInfo.prod_code)},a.onClickHistoryList=function(){h.goPage(a.data.prodInfo.on_sale_code)};var q=function(){if(a.data.prodInfo&&a.data.prodInfo.share_config&&!isReviewVer){var t={};a.data.shareData=t,t.prod_type=p.PROD_TYPE.BX,t.shareObj=a.data.prodInfo.share_config,t.shareContent=null,t.shareTarget=null,t.shareObj.share_content&&t.shareObj.share_target?(a.data.shareClass="menu-tip share hjButton",t.shareContent=t.shareObj.share_content.replace("{prod_name}",a.data.prodInfo.on_sale_desc),t.shareContent=t.shareContent.replace("{income_rate}",a.data.prodInfo.income_rate),t.shareTarget=t.shareObj.share_target.replace("{prod_code}",a.data.prodInfo.on_sale_code),t.shareTarget=t.shareTarget.replace("{prod_type}",t.prod_type)):a.data.shareClass="hpw-con hide hjButton"}else a.data.shareClass="hpw-con hide hjButton"};a.share=function(){var t=a.data.shareData,n=null;t&&(n=r.sharePage(t.shareObj.share_title,t.shareContent,t.shareObj.share_iconurl,t.shareTarget)),n&&n.then(function(){var a={prod_code:o.prodCode,product_type:"insurance_fix_time_product",status:"success"};e.reportCustomEvent("share_product",a)},function(){var a={prod_code:o.prodCode,product_type:"insurance_fix_time_product",status:"failure"};e.reportCustomEvent("share_product",a)})},a.onHold=function(){a.data.prospectiveEarnings="0.00",a.data.calInputAmout="0",a.data.calculatorBuyshow=!1},a.onCalculatorShow=function(){e.reportCustomEvent("calculator_clicked",{pro_code:o.prodCode}),a.data.prospectiveEarnings="0.00",a.data.calInputAmout="0",a.data.calculatorBuyshow=!1,a.calculatormodal&&a.calculatormodal.show(),r.dimStatusBarBackground(!0)},a.onCalculatorClose=function(){a.calculatormodal&&a.calculatormodal.hide()},a.$on("modal.hidden",function(){a.data.calInputAmout="0",r.dimStatusBarBackground(!1)}),a.onCalNumClick=function(t){a.data.calInputAmout.length>8||("0"==a.data.calInputAmout?a.data.calInputAmout=t+"":a.data.calInputAmout+=t,parseInt(a.data.calInputAmout)>0?(V(),a.data.calculatorBuyshow=parseFloat(a.data.prospectiveEarnings)>0?!0:!1):(a.data.prospectiveEarnings="0.00",a.data.calInputAmout="0",a.data.calculatorBuyshow=!1))},a.onCalNumRedeem=function(){a.data.calInputAmout=a.data.calInputAmout.substring(0,a.data.calInputAmout.length-1),parseInt(a.data.calInputAmout)>0?(V(parseInt(a.data.calInputAmout)),a.data.calculatorBuyshow=parseFloat(a.data.prospectiveEarnings)>0?!0:!1):(a.data.prospectiveEarnings="0.00",a.data.calInputAmout="0",a.data.calculatorBuyshow=!1)};var V=function(){a.data.prospectiveEarnings=parseFloat(parseFloat(a.data.prodInfo.income_rate)*parseFloat(a.data.calInputAmout)/36500*parseFloat(a.data.prodInfo.life_time)).toFixed(2)},X=function(t){a.data.groupon.is_groupon_prod=t.ret_data.is_groupon_prod,a.data.groupon.is_groupon_prod&&(a.data.groupon.groupon_expire=t.ret_data.groupon_expire,a.data.groupon.groupon_succ=t.ret_data.groupon_succ,a.data.groupon.group=t.ret_data.group)},$=function(t){t.ret_data&&t.ret_data.group&&t.ret_data.group.hasOwnProperty("group_id")?(a.data.groupon.group=t.ret_data.group,a.onClickViewGroupon()):e.makeToast("发起拼团失败")},j=function(a){e.makeToast("发起拼团失败")},K=function(){if(a.data.groupon={is_groupon_prod:!1,groupon_expire:!1,groupon_succ:!1,group:{group_id:void 0,members:[]}},2!==a.data.status){var t=v.loadData("groupon_prod_codes");t&&t.prod_codes&&t.prod_codes.indexOf(a.data.prodInfo.prod_code)>-1&&(a.data.groupon.is_groupon_prod=!0,s.getUserStatus()===p.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&n.groupon.queryusergrouponinfo(a.data.prodInfo.prod_code).then(X,function(a){}))}};a.onClickCreateGroupon=function(){var t=s.getUserStatus();if(t==p.ACCOUNT_STATE.USER_STATE_GUEST)G();else if(t==p.ACCOUNT_STATE.USER_STATE_LOGIN)x();else{var o=s.getUserInfo();n.groupon.creategroupon(o.username,o.picurl,a.data.prodInfo.prod_code).then($,j)}},a.onClickViewGroupon=function(){var t=C.getEnvVariable().CGI_PREFIX_S+"web/group/app.html";t=e.appendParamsToURL(t,{group_id:a.data.groupon.group.group_id,prod_code:a.data.prodInfo.prod_code,iad_userinfo:!0}),r.openInAppBrowser(t)};var W=function(){a.data.hasMgmCard=!1,n.promo.findRecords().then(function(t){if(t&&t.ret_data&&t.ret_data.history&&t.ret_data.history.length)for(var o=t.ret_data.history,e=0,n=o.length;n>e;e++)if(/^W0007/.test(o[e].activity_id)&&0===o[e].use_status&&!o[e].is_expired){a.data.hasMgmCard=!0;break}},function(){a.data.hasMgmCard=!1})};a.onClickMgm=function(){var t=C.getEnvVariable().CGI_PREFIX_S+"web/mgm4/app.html";t=e.appendParamsToURL(t,{prod_code:a.data.prodInfo.prod_code,has_sub_prod:1,iad_userinfo:!0}),r.openInAppBrowser(t,"showBackButton=no,hardwareback=no")},a.onHJViewActive=function(){B()},a.onHJViewDisActive=function(){d.cancel(a.data.refreshTimer),a.calculatormodal&&a.calculatormodal.remove(),a.calculatormodal=null,a.countDownHandle&&a.countDownHandle.cleanTimer(),a.countDownBtnHandle&&a.countDownBtnHandle.cleanTimer()},a.$on("$destroy",function(){d.cancel(a.data.refreshTimer),a.calculatormodal&&a.calculatormodal.remove(),a.calculatormodal=null,a.countDownHandle&&a.countDownHandle.cleanTimer(),a.countDownBtnHandle&&a.countDownBtnHandle.cleanTimer()}),B(),P()}]);app.controller("InsuranceProductIntroductionController",["$scope","$location","$stateParams","InsuranceProductDetailService","envService","$http","$sce","dataService","$ionicScrollDelegate","$timeout","LocationService","utils",function(t,e,n,o,a,r,c,i,l,s,u,d){t.data={};var p=t.data,C="xq-con nb mgt20 px",f="xq-con nb mgt20 px off",m=l.$getByHandle("myContent");t.code="all"==n.prodCode?n.onSaleCode:n.prodCode;var v=function(){d.reportCustomEvent("insurance_fix_time_product_introduction",{pro_code:n.prodCode}),t.data.noticeCls=f,t.data.questionCls=f;var e=a.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+n.onSaleCode+"/moreDetail2.html";r.get(c.trustAsResourceUrl(e)).success(function(t){t=t.toString();var e=t.split(/\n{1}[^\n]*<!--INSERTNOTICE-->[^\n]*\n{1}/);if(p.part1="",p.part2="",e.length>0){p.part1=e[0];for(var n=1;n<e.length;n++)p.part2+=e[n]}else p.part1=t;p.part1=c.trustAsHtml(p.part1),p.part2=c.trustAsHtml(p.part2)})};t.onClickNotice=function(){t.data.noticeCls=t.data.noticeCls==f?C:f,s(function(){m.resize()},200)},t.onClickQuestion=function(){t.data.questionCls=t.data.questionCls==f?C:f,s(function(){m.resize()},200)},t.back=function(){u.backPage()},v()}]);app.controller("InsuranceHistoryListController",["$scope","$location","GLOBAL_CONSTANT","cgiService","essential","webankCommonService","utils","$stateParams","cache","GLOBAL_CONSTANT","$timeout","InsuranceHistoryListService","InsuranceHistoryProductDetailService","localStorage","HJactionLoading",function(t,a,e,o,r,i,n,d,c,e,s,u,l,p,D){t.data={};var S=function(){n.reportCustomEvent("insurance_fix_time_historyProduct_list",{on_sale_code:d.onSaleCode}),t.data.onSaleCode=d.onSaleCode,t.data.prodList=[],v()},y=null,v=function(){var a=p.loadData("historyProdList_"+d.onSaleCode);a?(t.data.prodList=a.historyProductList,t.data.onSaleDesc=a.onSaleDesc):(t.data.noCache=!0,y=s(function(){D.show(),y=null},100));var e={};e.on_sale_code=d.onSaleCode,o.getAllOnSaleCodeHistoryProducts(e).then(function(a){if(a&&a.ret_data){y&&(s.cancel(y),y=null),D.hide();var e=[],o=a.ret_data.historyProductList;t.data.onSaleDesc=a.ret_data.onSaleDesc;for(var i in o)if(!f(d.onSaleCode)||f(d.onSaleCode)!=o[i].prodCode){var c=n.getDate(),u=n.getDateByDateAndTimeString(o[i].startBuyDate,o[i].startBuyTime);if(!(u>c)){var l=n.getDateByYYYYMMDDString(o[i].valueDate),S=n.getDateByYYYYMMDDString(o[i].valueDate);S.setDate(S.getDate()+parseInt(o[i].lifeTime));var v;if(v=o[i].arrivalAccountDate?n.getDateByYYYYMMDDString(o[i].arrivalAccountDate):n.getNextWorkDay(1,S),l>c)o[i].prodStatus=1;else if(S>c)o[i].prodStatus=2;else if(v>c)o[i].prodStatus=3;else{var L=n.getYYYYMMDDStringByDate(c),g=n.getYYYYMMDDStringByDate(v);o[i].prodStatus=parseInt(L)==parseInt(g)?4:5}e.push(o[i])}}e.sort(r),t.data.prodList=e,t.data.prodList.length||(t.data.noCache=!0);var _={historyProductList:t.data.prodList,onSaleDesc:t.data.onSaleDesc};p.saveData("historyProdList_"+d.onSaleCode,_)}},function(t){tracelog("获取往期产品信息失败, 原因："+t.ret_msg)});var r=function(t,a){return parseFloat(a.valueDate)-parseFloat(t.valueDate)}},f=function(t){var a;if(a=p.loadData(r.isFinancialHomeGray()?"financialRecommendV2":"financialRecommend"),a&&a.ret_data&&a.ret_data.productTypeList)for(var e in a.ret_data.productTypeList)if(1==a.ret_data.productTypeList[e].productType||3==a.ret_data.productTypeList[e].productType)for(var o in a.ret_data.productTypeList[e].productList)if(a.ret_data.productTypeList[e].productList[o].productCode==t)return a.ret_data.productTypeList[e].productList[o].productSubCode;return void 0};t.back=function(){u.backPage()},t.onClickHistoryProductDetail=function(t){l.goPage(t)},t.onHJViewActive=function(){S()},t.onHJViewDisActive=function(){},S()}]);app.controller("InsuranceHistoryProductDetailController",["$scope","$location","GLOBAL_CONSTANT","cgiService","essential","webankCommonService","utils","$stateParams","cache","GLOBAL_CONSTANT","$timeout","InsuranceHistoryProductDetailService","envService","$http","$sce","LocationService","ProdInfoService",function(t,o,e,a,r,n,c,d,i,e,u,s,f,p,l,I,D){t.data={};var v=function(){c.reportCustomEvent("insurance_fix_time_historyProduct_detail",{pro_code:d.prodCode}),D.requestProdInfo([d.prodCode]).then(function(){r.resolve()},function(){c.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var o=D.getProdInfo(d.prodCode);if(!o)return void c.makeToast("产品信息拉取中，请稍后重试","short");t.data.productInfo=o,t.data.riskDesc=gProductArr[t.data.productInfo.risk_level];var e=c.getDate(),a=c.getDateByYYYYMMDDString(t.data.productInfo.value_date),r=c.getDateByYYYYMMDDString(t.data.productInfo.value_date);r.setDate(r.getDate()+parseInt(t.data.productInfo.life_time));var n;if(n=t.data.productInfo.arrival_account_date?c.getDateByYYYYMMDDString(t.data.productInfo.arrival_account_date):c.getNextWorkDay(1,r),a>e)t.data.productInfo.prodStatus=1;else if(r>e)t.data.productInfo.prodStatus=2;else if(n>e)t.data.productInfo.prodStatus=3;else{var i=c.getYYYYMMDDStringByDate(e),u=c.getYYYYMMDDStringByDate(n);t.data.productInfo.prodStatus=parseInt(i)==parseInt(u)?4:5}var s=f.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+t.data.productInfo.on_sale_code+"/prodInfo.html";p.get(l.trustAsResourceUrl(s)).success(function(o){t.data.sectionHtml=l.trustAsHtml(o)})})};t.back=function(){s.backPage()},t.onClickProductIntroduction=function(){I.go("/insuranceProductIntroduction/"+t.data.productInfo.on_sale_code+"/"+t.data.productInfo.prod_code)},v()}]);app.controller("InsuranceCancelListController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","LocationService","commonDirectiveService","HJactionLoading","ProdInfoService",function(t,e,a,n,r,i,o,c,s){t.info={listArr:[],title:""};var d=function(){t.info={listArr:[],title:""};var e=i.getSearch();if(e&&e.data&&e.data.length>0)for(var a=0;a<e.data.length;a++){var n={};n.amount=e.data[a].trans_amt.toFixed(2);var o=r.getDateAndTimeStrTwo(e.data[a].trans_date,e.data[a].trans_time,!0);if(n.dataStr=o,n.returnType=e.data[a].pay_flag,n.bankStr=2==e.data[a].pay_flag?"由活期+ 购买":"由"+e.data[a].bank_name.replace("微众银行","微众卡")+r.abridgeAccountNumber(e.data[a].acct_no)+"购买",n.trans_date=e.data[a].trans_date,n.trans_time=e.data[a].trans_time,n.seq=e.data[a].trans_serno,n.prodCode=e.data[a].prod_code,n.payId=e.data[a].pay_prod_id,n.cancelListLength=e.data.length,!t.info.title){var c=s.getProdInfo(e.data[a].prod_code);c&&c.on_sale_desc&&(t.info.title=c.on_sale_desc)}t.info.listArr.push(n),r.reportCustomEvent("insurance_fix_time_cancel_list",{desc:t.info.title})}t.info.listArr.length>1&&t.info.listArr.sort(function(t,e){return e.trans_date==t.trans_date?e.trans_time-t.trans_time:e.trans_date-t.trans_date})};t.onClickItem=function(e){var a="";2==e.returnType?a="退款到 活期+":(e.returnType=1,a="退款到 微众卡");var r="撤销购买 "+t.info.title,s=e.amount+"元";e.prodName=t.info.title;var d=function(){o.getUserPwdInput({pwdSubTitle:r,payWayDesc:a,pwdTransDesc:s,callback:function(t){var a={};a.trans_serno=e.seq,a.user_pwd=t,a.prod_code=e.prodCode,c.show(),n.requestInsuranceCancelProduct(a).then(function(){n.requestUserWealth().then(function(){},function(){}),c.hide(),e.cancelSucess=!0,e.cancelListLength-=1,i.go("/insuranceCancelResult",e)},function(t){c.hide(),e.cancelSucess=!1,e.errMsg=t&&t.ret_msg||"",o.processWrongPwdByCode(t,d)||i.go("/insuranceCancelResult",e)})}})};d()},t.back=function(){i.backPage()},t.onHJViewActive=function(){d()},t.onHJViewDisActive=function(){},d()}]);app.controller("InsuranceCancelResultController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","LocationService",function(e,t,n,r,a,c,i){var s=0,o="001234",u=0,l=function(){var t=i.getSearch();if(t){e.amount=t.amount,e.isSuccess=t.cancelSucess,e.returnType=t.returnType,e.errMsg=t.errMsg,s=t.prodCode,o=t.payId||"001234";var n=a.getDateByDate8AndTime6String(t.trans_date,t.trans_time);e.beginStr=a.getDateTimeStringByDate(n),u=t.cancelListLength||0}i.setSearch(""),e.endStr=a.getDateTimeStringByDate(a.getDate()),e.endStr+=e.isSuccess?" 撤销购买":" 撤销失败";var r={isSuccess:void 0!=e.isSuccess?e.isSuccess:!1,returnType:void 0!=e.returnType?e.returnTyp:""};a.reportCustomEvent("insurance_fix_time_cancel_result",r),r=null};e.onClickButton=function(e){var t=1==e?"/webankCard":"/monetaryMyProdDetail/"+o;i.go(t,null,null,{stateStr:"home"})},e.onClickReturn=function(){i.go("/home")},e.onClickDone=function(){u?i.go("/insuranceMyProdDetail/"+s,null,null,{stateStr:n.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_DETAIL}):i.go("/insuranceProductDetails/"+s,null,null,{stateStr:n.LOCATION_BACK_PATH.BACKTO_FINANCIAL_DETAIL})},l()}]);app.controller("BankProductJumpingController",["$scope","LocationService","$timeout",function(n,c,e){var o=null,a=null,l=function(){a=c.getData(),n.iconClass="head-cjs",n.showText=a.showText.toString(),n.showText.indexOf("武金所")>=0?n.iconClass="head-wjs":n.showText.indexOf("网金")>=0&&(n.iconClass="head-wjyy"),o=e(function(){a.successCallback&&a.successCallback()},1e3)};n.back=function(){a=null,o&&(e.cancel(o),o=null),c.backPage()},l()}]);app.controller("InsuranceProductDetailsController2",["$scope","$location","$stateParams","utils","cgiService","essential","$timeout","webankCommonService","$rootScope","cache","InsuranceProductDetailService","InsurancePurchaseService2","GLOBAL_CONSTANT","RegisterService","LoginService","$http","$sce","envService","InsuranceHistoryListService","LocationService","ProdInfoService","HJactionPop","localStorage","dataService",function(a,t,e,o,r,n,d,s,i,p,u,c,_,l,f,g,I,m,T,h,C,D,S,E){a.data={};var y=a.data;a.countDownBtnHandle=null,a.data.hasPreBuyInfo=!0;var A=function(){B(),o.reportCustomEvent("insurance_universal_product_details",e.prodCode),a.data.prodInfo=C.getProdInfo(e.prodCode),p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&(a.data.personInfo=p.getCacheInfo("personalInfo")),a.data.maskClass="p-mask hide",n.setInfoMaskStatusBackground(!1),v(),Y(),U(),G(),O(),w(),L(),H(),a.data.today>a.data.endBuyTime||"02"==a.data.prodInfo.trans_status?a.data.balance=0:P(),a.isMSProd()&&R(),q()},B=function(){a.data.param={pageType:0,userInfo:{}},p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?(a.data.userInfo=S.loadDataByUser("universalUserInfo"),a.data.userInfo?(a.data.param.userInfo=a.data.userInfo,a.data.hasPreBuyInfo=!0):r.requestUserAddress(e.prodCode).then(function(t){if(t&&t.ret_data){a.data.userInfo=t.ret_data,a.data.param.userInfo=a.data.userInfo,a.data.userInfo.addressDetail=a.data.userInfo.detail_address;var o={};o.email=a.data.userInfo.email,o.province=a.data.userInfo.province,o.city=a.data.userInfo.city,o.district=a.data.userInfo.region,o.addressDetail=a.data.userInfo.detail_address,o.prod_code=a.data.userInfo.prod_code;var r={};return r.region=a.data.userInfo.policy_address,S.saveDataByUser("universalUserInfo",o),S.saveDataByUser("universalUserInfoForProd_"+e.prodCode,r),a.data.hasPreBuyInfo=!0,!0}return a.data.hasPreBuyInfo=!1,!1},function(){return tracelog("查询服务器缓存地址失败 loadUserInfoByServer"),a.data.hasPreBuyInfo=!0,!1})):a.data.hasPreBuyInfo=!0},O=function(){var t=function(){if(a.data.todayString==a.data.prodInfo.ipostart_date)try{a.data.startBuyTime.getTime()-a.data.now.getTime()<=3e5?(a.data.countDownFlag=!0,d(function(){a.countDownBtnHandle=new Countdown,a.countDownBtnHandle.initBuyButton(a.data.startBuyTime.getTime(),function(){A()})},300)):a.data.countDownFlag=!1}catch(t){}};if(1==a.data.period)if(APP_ABILITY&&APP_ABILITY.indexOf(_.APP_ABILITY.ABILITY_CALENDAR)>=0){if(a.data.now=o.getDate(),a.data.todayString=o.getYYYYMMDDStringByDate(a.data.today),a.data.todayString==a.data.prodInfo.ipostart_date)try{a.data.startBuyTime.getTime()-a.data.now.getTime()<=3e5&&(a.data.lessSixMinutes=!0)}catch(e){}a.data.calendarButtonStr="起售前提醒我",a.data.calendarButtonClass="lc-buy-btn";var r=S.loadData("calendarClock");r&&r.hasRequire&&((r.errorNums||0)<2?o.queryCalendarClock({note:a.data.prodInfo.prod_name+"("+a.data.prodInfo.prod_code+":"+a.data.prodInfo.ipostart_date+")"},function(e){e&&2==e.result?(a.data.calendarButtonStr="已设置提醒",a.data.calendarButtonClass="lc-buy-btn off",t()):e&&-1==e.result}):a.data.lessSixMinutes=!0)}else a.data.lessSixMinutes=!0},v=function(){a.data.lockPeriodDesc="Y"==a.data.prodInfo.prod_lock_unit?"年":"M"==a.data.prodInfo.prod_lock_unit?"个月":"天",a.data.prodTermUnitDesc="Y"==a.data.prodInfo.prod_term_unit?a.data.prodInfo.prod_term+"年":"M"==a.data.prodInfo.prod_term_unit?a.data.prodInfo.prod_term+"个月":a.data.prodInfo.prod_term+"天"},P=function(){a.data.balance=parseInt(a.data.prodInfo.remain_total_quota),k(),p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&r.requestProductBalance(e.prodCode).then(function(t){t.ret_data&&void 0!=t.ret_data.quota_total&&(a.data.balance=parseInt(t.ret_data.quota_total),k())})},k=function(){a.data.balance<parseInt(a.data.prodInfo.p_start_buy_min_amount,10)&&(a.data.balance=0);var t=a.data.prodInfo.quota||1,e=parseInt(100*parseInt(a.data.balance)/parseInt(t));a.data.balanceDesc=e>=80?"额度充足":e>=50?"不多了":e>=10?"快没了":e>=1?e+"%":"即将售罄"},Y=function(){a.data.today=o.getDate(),a.data.startBuyTime=o.getDateByDate8AndTime6String(a.data.prodInfo.ipostart_date,a.data.prodInfo.ipostart_time),a.data.endBuyTime=o.getDateByDate8AndTime6String(a.data.prodInfo.ipoend_date,a.data.prodInfo.ipoend_time),a.data.today<a.data.startBuyTime?(a.data.period=1,a.data.startDay=o.getDateByYYYYMMDDString(a.data.prodInfo.ipostart_date),a.data.tomorrow=o.getDateByYYYYMMDDString(a.data.prodInfo.ipostart_date),a.data.showIncomeDay=o.getDateByYYYYMMDDString(a.data.prodInfo.ipostart_date),a.data.hesitatePeriodEnd=o.getDateByYYYYMMDDString(a.data.prodInfo.ipostart_date),a.data.lockPeriodEnd=o.getDateByYYYYMMDDString(a.data.prodInfo.ipostart_date),a.data.prodEnd=o.getDateByYYYYMMDDString(a.data.prodInfo.ipostart_date)):(a.data.period=2,a.data.tomorrow=o.getDate(),a.data.showIncomeDay=o.getDate(),a.data.hesitatePeriodEnd=o.getDate(),a.data.lockPeriodEnd=o.getEndDateByYYYYMMDDString(o.getYYYYMMDDStringByDate(o.getDate())),a.data.prodEnd=o.getEndDateByYYYYMMDDString(o.getYYYYMMDDStringByDate(o.getDate()))),a.data.tomorrow.setDate(a.data.tomorrow.getDate()+1),a.data.showIncomeDay.setDate(a.isYGProd()?a.data.showIncomeDay.getDate()+16:a.data.showIncomeDay.getDate()+2),a.data.hesitatePeriodEnd.setDate(a.data.hesitatePeriodEnd.getDate()+a.data.prodInfo.hesitation_period),"Y"==a.data.prodInfo.prod_lock_unit?a.data.lockPeriodEnd.setFullYear(a.data.lockPeriodEnd.getFullYear()+parseInt(a.data.prodInfo.prod_lock)):"M"==a.data.prodInfo.prod_lock_unit?a.data.lockPeriodEnd.setMonth(a.data.lockPeriodEnd.getMonth()+parseInt(a.data.prodInfo.prod_lock)):a.data.lockPeriodEnd.setDate(a.data.lockPeriodEnd.getDate()+parseInt(a.data.prodInfo.prod_lock)),"Y"==a.data.prodInfo.prod_term_unit?a.data.prodEnd.setFullYear(a.data.prodEnd.getFullYear()+parseInt(a.data.prodInfo.prod_term)):"M"==a.data.prodInfo.prod_term_unit?a.data.prodEnd.setMonth(a.data.prodEnd.getMonth()+parseInt(a.data.prodInfo.prod_term)):a.data.prodEnd.setDate(a.data.prodEnd.getDate()+parseInt(a.data.prodInfo.prod_term))},U=function(){var t=m.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+e.prodCode+"/prodInfoNew.html";g.get(I.trustAsResourceUrl(t)).success(function(t){t=t.toString();var e=t.split(/\n{1}[^\n]*<!--INSERTNOTICE-->[^\n]*\n{1}/);y.bannerHtml="",y.bannerTextHtml="",y.transactionRuleHtml="",y.prodDescHtml="",e&&e.length>0&&(y.bannerHtml=e[0]?e[0]:"",y.bannerTextHtml=e[1]?e[1]:"",y.transactionRuleHtml=e[2]?e[2]:"",y.prodDescHtml=e[3]?e[3]:""),a.data.bannerHtml=I.trustAsHtml(y.bannerHtml),a.data.bannerTextHtml=I.trustAsHtml(y.bannerTextHtml),a.data.transactionRuleHtml=I.trustAsHtml(y.transactionRuleHtml),a.data.prodDescHtml=I.trustAsHtml(y.prodDescHtml)})},R=function(){var t=o.getDate();t.setDate(t.getDate()+1),a.data.firseOpenDay=o.getDate(),a.data.firseOpenDay.setDate(a.data.firseOpenDay.getDate()+1),a.data.firseOpenDay.setMonth(a.data.firseOpenDay.getMonth()+6),a.data.firseOpenDay.getDate()<t.getDate()&&(a.data.firseOpenDay.setMonth(a.data.firseOpenDay.getMonth()-1),a.data.firseOpenDay.setDate(0)),a.data.secondOpenDay=angular.copy(a.data.firseOpenDay),a.data.secondOpenDay.setDate(a.data.secondOpenDay.getDate()+1),a.data.thirdOpenDay=angular.copy(a.data.firseOpenDay),a.data.thirdOpenDay.setDate(a.data.thirdOpenDay.getDate()+2)};a.isMSProd=function(){return"MS160110"==a.data.prodInfo.prod_code||"MS160310"==a.data.prodInfo.prod_code||"MS160510"==a.data.prodInfo.prod_code?!0:!1},a.isYGProd=function(){return"YG160314"==a.data.prodInfo.prod_code||"YG160315"==a.data.prodInfo.prod_code||"YG160316"==a.data.prodInfo.prod_code?!0:!1};var N=function(){h.go("insuranceProductDetails2/"+e.prodCode,null,null,{stateStr:_.LOCATION_BACK_PATH.BACKTO_INSURANCE_AFTER_LOGIN_OR_REGISTER},!0)},M=function(){o.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),d(function(){l.setCallbackPage(N,N),l.go()},1e3)},b=function(){o.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),d(function(){f.setCallbackPage(N,N),h.go("/login")},1e3)},w=function(){E.getActivityConfig(a.data.prodInfo.prod_code,function(t){t&&t.hasOwnProperty("is_match")&&("false"===t.is_match?(a.data.limitWords=t.limit_words,a.data.limitButton=t.limit_button):"true"===t.is_match&&(a.data.isMgm=t.is_mgm,a.data.isMgm&&j()))})},H=function(){a.data.limitAge=!1,a.data.limitAgeStr="",p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&a.data.personInfo.birthday&&(a.data.prodInfo.age_down_limit&&!o.isOldEnoughByBirthday(a.data.personInfo.birthday,a.data.prodInfo.age_down_limit)||a.data.prodInfo.age_up_limit&&!o.isYoungThanByBirthday(a.data.personInfo.birthday,a.data.prodInfo.age_up_limit))&&(a.data.limitAge=!0,a.data.limitAgeStr="本产品仅支持年龄在"+a.data.prodInfo.age_down_limit+"-"+a.data.prodInfo.age_up_limit+"岁的用户购买")},L=function(){a.data.limitId=!1,a.data.limitIdStr="",a.data.personInfo&&a.data.personInfo.personal_identification_type&&"01"!=a.data.personInfo.personal_identification_type&&(a.data.limitId=!0,a.data.limitIdStr="您的国籍不符合本产品的限制要求")},G=function(){if(a.data.prodInfo&&a.data.prodInfo.share_config&&!isReviewVer){var t={};a.data.shareData=t,t.prod_type=_.PROD_TYPE.WNX,t.shareObj=a.data.prodInfo.share_config,t.shareContent=null,t.shareTarget=null,t.shareObj.share_content&&t.shareObj.share_target?(a.data.shareClass="menu-tip share hjButton",t.shareContent=t.shareObj.share_content.replace("{prod_name}",a.data.prodInfo.prod_name),t.shareContent=t.shareContent.replace("{income_rate}",a.data.prodInfo.expe_income_rate),t.shareTarget=t.shareObj.share_target.replace("{prod_code}",a.data.prodInfo.prod_code),t.shareTarget=t.shareTarget.replace("{prod_type}",t.prod_type)):a.data.shareClass="hpw-con hide hjButton"}else a.data.shareClass="hpw-con hide hjButton"};a.share=function(){var t=a.data.shareData,r=null;t&&(r=n.sharePage(t.shareObj.share_title,t.shareContent,t.shareObj.share_iconurl,t.shareTarget)),r&&r.then(function(){var a={prod_code:e.prodCode,product_type:"insurance_universal_product",status:"success"};o.reportCustomEvent("share_product",a)},function(){var a={prod_code:e.prodCode,product_type:"insurance_universal_product",status:"failure"};o.reportCustomEvent("share_product",a)})},a.onClickRule=function(){h.go("/insuranceRule2/"+e.prodCode+"/purchase")},a.back=function(){h.backPage()},a.onClickFillInfo=function(){if(p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_GUEST)b();else if(p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_LOGIN)M();else{if(a.data.limitId)return void h.go("/universalInsuranceIdUnmatch/"+e.prodCode);a.data.param.pageType=c.pageType.fillBuyInfoPage,c.goPage(e.prodCode,null,a.data.param)}},a.onClickIncomeDemo=function(){tracelog("利益演示");var a=m.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+e.prodCode+"/incomeDemo.pdf";n.openPdf2(a,"利益演示")},a.onClickProductIntroduction=function(){h.go("/insuranceProductIntroduction2/"+e.prodCode)},a.onClickIncomeRate=function(){a.data.maskClass="p-mask show",n.setInfoMaskStatusBackground(!0),a.data.maskTitle=a.data.prodInfo.income_rate_desc,a.data.maskDetail=a.data.prodInfo.income_rate_detail},a.onClickHesitation=function(){a.data.maskClass="p-mask show",n.setInfoMaskStatusBackground(!0),a.data.maskTitle="犹豫期",a.data.maskDetail=a.data.prodInfo.hesitation_desc},a.onClickCancelMask=function(){a.data.maskClass="p-mask hide",n.setInfoMaskStatusBackground(!1)},a.onClickContinueBuy=function(){if(p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_GUEST)b();else if(p.getUserStatus()==_.ACCOUNT_STATE.USER_STATE_LOGIN)M();else{if(a.data.personInfo&&a.data.personInfo.birthday&&(!o.isOldEnoughByBirthday(a.data.personInfo.birthday,a.data.prodInfo.age_down_limit)||!o.isYoungThanByBirthday(a.data.personInfo.birthday,a.data.prodInfo.age_up_limit)))return void h.go("/universalInsuranceAgeUnmatch/"+e.prodCode);if(a.data.personInfo&&a.data.personInfo.personal_identification_type&&"01"!=a.data.personInfo.personal_identification_type)return void h.go("/universalInsuranceIdUnmatch/"+e.prodCode);a.data.param.pageType=c.pageType.purchasePage,c.goPage(e.prodCode,null,a.data.param)}};var x=function(){if(a.data.prodInfo.load_desc){a.rootUrl=m.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+e.prodCode+"/";var t=a.rootUrl+"prodSecondPage.html";g.get(I.trustAsResourceUrl(t)).success(function(t){t=t.toString().trim(),t.length>0&&(a.data.showSecond=!0,a.data.secondPageStr=t,d(function(){a.upDownInit(!0,function(t){t||(a.data.showSecond=!1)})}))})}};a.onClickSetClock=function(){if("起售前提醒我"==a.data.calendarButtonStr){var t=S.loadData("calendarClock");S.saveData("calendarClock",{hasRequire:!0,errorNums:t&&t.errorNums});var e=0;o.setCalendarClock({title:"【"+a.data.prodInfo.prod_name+"】 5分钟后开始抢购",startDate:a.data.startBuyTime,note:a.data.prodInfo.prod_name+"("+a.data.prodInfo.prod_code+":"+a.data.prodInfo.ipostart_date+")"},function(r){if(r&&2==r.result)o.reportCustomEvent(_.REPORT_EVENT_NAME.EXCEPTION,_.REPORT_EXCEPTION.CALANDER_CLOCK_SET_SUCCESS),o.makeToast("设置成功，起售前5分钟提醒您","short"),a.data.calendarButtonStr="已设置提醒",a.data.calendarButtonClass="lc-buy-btn off";else if(r&&-1==r.result){var n="";r.msg&&(n=JSON.stringify(r.msg)),o.reportCustomEvent(_.REPORT_EVENT_NAME.EXCEPTION,_.REPORT_EXCEPTION.CALANDER_CLOCK_SET_FAIL+",msg:"+n);var d="由于闹钟被禁用，提醒设置失败，请到设置中开启";o.isiOSDevice()&&(d="由于闹钟被禁用，提醒设置失败，请前往“设置”—“隐私”—“日历”中开启"),D.show({oneLineTextLeft:d,oneButtonText:"我知道了",popClose:function(){}}),a.data.lessSixMinutes=!0}else if(r&&-2==r.result){var n="";r.msg&&(n=JSON.stringify(r.msg)),o.reportCustomEvent(_.REPORT_EVENT_NAME.EXCEPTION,_.REPORT_EXCEPTION.CALANDER_CLOCK_SET_ERROR+",msg:"+n),D.show({oneLineTextLeft:"系统异常，暂时无法为你设置提醒",oneButtonText:"我知道了",popClose:function(){}}),a.data.lessSixMinutes=!0,e=1,t&&t.errorNums&&(e=t.errorNums+1)}S.saveData("calendarClock",{hasRequire:!0,errorNums:e})})}};var F=function(t){a.data.groupon.is_groupon_prod=t.ret_data.is_groupon_prod,a.data.groupon.is_groupon_prod&&(a.data.groupon.groupon_expire=t.ret_data.groupon_expire,a.data.groupon.groupon_succ=t.ret_data.groupon_succ,a.data.groupon.group=t.ret_data.group)},V=function(t){t.ret_data&&t.ret_data.group&&t.ret_data.group.hasOwnProperty("group_id")?(a.data.groupon.group=t.ret_data.group,a.onClickViewGroupon()):o.makeToast("发起拼团失败")},X=function(a){o.makeToast("发起拼团失败")},q=function(){if(a.data.groupon={is_groupon_prod:!1,groupon_expire:!1,groupon_succ:!1,group:{group_id:void 0,members:[]}},2!==a.data.period||a.data.balance>0){var t=S.loadData("groupon_prod_codes");t&&t.prod_codes&&t.prod_codes.indexOf(a.data.prodInfo.prod_code)>-1&&(a.data.groupon.is_groupon_prod=!0,p.getUserStatus()===_.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&r.groupon.queryusergrouponinfo(a.data.prodInfo.prod_code).then(F,function(a){}))}};a.onClickCreateGroupon=function(){var t=p.getUserStatus();if(t==_.ACCOUNT_STATE.USER_STATE_GUEST)b();else if(t==_.ACCOUNT_STATE.USER_STATE_LOGIN)M();else{var e=p.getUserInfo();r.groupon.creategroupon(e.username,e.picurl,a.data.prodInfo.prod_code).then(V,X)}},a.onClickViewGroupon=function(){var t=m.getEnvVariable().CGI_PREFIX_S+"web/group/app.html";t=o.appendParamsToURL(t,{group_id:a.data.groupon.group.group_id,prod_code:a.data.prodInfo.prod_code,iad_userinfo:!0}),n.openInAppBrowser(t)},a.data.hasMgmCard=!1;var j=function(){r.promo.findRecords().then(function(t){if(t&&t.ret_data&&t.ret_data.history&&t.ret_data.history.length)for(var e=t.ret_data.history,o=0,r=e.length;r>o;o++)if(/^W0007/.test(e[o].activity_id)&&0===e[o].use_status&&!e[o].is_expired){a.data.hasMgmCard=!0;break}},function(){a.data.hasMgmCard=!1})};a.onClickMgm=function(){var t=m.getEnvVariable().CGI_PREFIX_S+"web/mgm4/app.html";t=o.appendParamsToURL(t,{prod_code:a.data.prodInfo.prod_code,has_sub_prod:1,iad_userinfo:!0}),n.openInAppBrowser(t,"showBackButton=no,hardwareback=no")},a.onHJViewActive=function(){A()},a.onHJViewDisActive=function(){a.countDownBtnHandle&&a.countDownBtnHandle.cleanTimer()},a.$on("$destroy",function(){a.countDownBtnHandle&&a.countDownBtnHandle.cleanTimer()}),A(),x()}]);app.controller("InsurancePurchaseController2",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","homeService","webankCommonService","$stateParams","$timeout","cache","session","BindNewCardService1","InsurancePurchaseService2","ResetPasswdService","localStorage","dataService","AnnouncementService","InsuranceProductDetailService","RecentAccountService","$ionicViewSwitcher","HelpDetailService","HJactionLoading","LocationService","$sce","$http","ProdInfoService","BindBankCardService",function(a,t,o,n,e,c,r,i,d,u,s,l,A,p,f,_,D,C,T,v,h,m,g,y,P,I,N){var E=function(){},B=function(){e.reportCustomEvent("insurance_universal_product_purchase",i.prodCode),L(),a.data={},a.data.prodInfo=I.getProdInfo(i.prodCode),a.data.minAmount=a.data.prodInfo.p_start_buy_min_amount,a.data.incAmount=a.data.prodInfo.p_start_buy_increment_min_amount,a.data.maxAmount=a.data.prodInfo.p_single_buy_max_amount,a.data.ButtonClass="btn-c off",w(),j(),k(),Y(),K()},L=function(){a.params=A.getData(),a.pageTypeEnum=A.pageType,a.pageType=a.params.pageType,a.pageType==a.pageTypeEnum.purchasePage?(a.pageTitle="购买",a.btnTitle="立即支付",E=function(){return"btn-c off"==a.data.ButtonClass?void(R()&&(a.data.isAgreed?a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.INVALID_TYPE&&e.makeToast(STRING_TABLE.PLEASE_CHECK_SELECT_PAYACCOUNT,"short"):e.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"))):void(S()&&(x()||(J(),V())))}):(a.pageTitle="填写购买信息",a.btnTitle="保存信息",E=function(){"btn-c off"!=a.data.ButtonClass&&R()&&J()})},w=function(){a.data.regionList=[],a.data.region="请选择";for(var t in a.data.prodInfo.sale_region_cycle){var o={};o.text=a.data.prodInfo.sale_region_cycle[t],o.id=a.data.prodInfo.sale_region_cycle[t],a.data.regionList.push(o)}};a.onClickSelectRegion=function(){a.showRegion()},a.onSelectRegion=function(t){a.data.region=t.text,R()};var k=function(){a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){R()},a.data.agreementDesc="服务协议及风险提示",a.data.agreementCode=i.prodCode},S=function(){if(""==a.data.amount||void 0==a.data.amount)return!1;if(!e.isValidTransferAmount(a.data.amount))return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT,!1;if(a.data.amount<a.data.minAmount)return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="最低购买金额为"+a.data.minAmount+"元",!1;if(a.data.amount>a.data.maxAmount)return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="单笔最高购买金额为"+a.data.maxAmount+"元",!1;var t=a.data.amount;if(a.data.amount=e.getAmountForRule(a.data.amount,a.data.minAmount,a.data.incAmount),t!=a.data.amount&&e.makeToast("购买的金额必须为"+a.data.incAmount+"的整数倍，已自动为您调整","short"),a.data.amount=parseFloat(parseFloat(a.data.amount).toFixed(2)),a.data.amountCN=e.convertCurrencyToChineseStyle(a.data.amount),a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(a.data.amount)>a.data.AccountData.currentPlus.amount&&(a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.WEBANK_CARD),a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(a.data.amount)>a.data.AccountData.webankAccount.amount){if(!(a.data.AccountData.otherBankAccount.otherAccountList&&a.data.AccountData.otherBankAccount.otherAccountList.length>0))return a.data.showNeedBindCard=!0,!1;a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.OTHER_BANK_CARD,a.data.AccountData.otherBankAccount.cardInfo.bankBinCode=a.data.AccountData.otherBankAccount.otherAccountList[0].other_bank_bin_code,a.data.AccountData.otherBankAccount.cardInfo.userName=a.data.AccountData.otherBankAccount.otherAccountList[0].other_name,a.data.AccountData.otherBankAccount.cardInfo.cardNo=a.data.AccountData.otherBankAccount.otherAccountList[0].other_account,a.data.AccountData.otherBankAccount.cardInfo.cardTypeCode=a.data.AccountData.otherBankAccount.otherAccountList[0].other_card_type_code,a.data.AccountData.otherBankAccount.cardInfo.cardType=a.data.AccountData.otherBankAccount.otherAccountList[0].other_card_type,a.data.AccountData.otherBankAccount.cardInfo.bankName=a.data.AccountData.otherBankAccount.otherAccountList[0].other_bank_name}return a.data.showInputAct=!0,a.data.showInputResult=!0,a.data.showInputAmountTips=!1,a.data.showNeedBindCard=!1,!0};a.focusInput=function(){a.data.showInputAct=!1,a.data.showInputResult=!1,a.data.showInputAmountTips=!1,a.data.showNeedBindCard=!1},a.blurInput=function(){S()||(a.data.ButtonClass="btn-c off"),R()},a.changeInput=function(){},a.focusEmail=function(){a.data.showEmailTips=!1},a.blurEmail=function(){e.isValidEmail(a.data.email)||(a.data.showEmailTips=!0),R()},a.focusAddress=function(){a.data.showAddressTips=!1,e.isiOSDevice()&&(a.data.addHigh=!0)},a.blurAddress=function(){if(a.data.addHigh=!1,a.data.addressDetail&&""!=a.data.addressDetail){var t=U(a.data.addressDetail);(12>t||t==a.data.addressDetail.length)&&(a.data.showAddressTips=!0),R()}};var U=function(a){for(var t=0,o=a.length,n=-1,e=0;o>e;e++)n=a.charCodeAt(e),t+=n>=0&&128>=n?1:2;return t},R=function(){a.data.ButtonClass="btn-c off";var t=!1;if(!e.isValidEmail(a.data.email))return t;if(!a.data.province||"选择省"==a.data.province||!a.data.addressDetail)return t;if(!(a.data.region&&"请选择"!=a.data.region||a.isDWProd()))return t;if(a.data.showAddressTips||a.data.showEmailTips)return t;if(a.pageType==a.pageTypeEnum.purchasePage){if(!S())return t;if(t=!0,!a.data.isAgreed||a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.INVALID_TYPE)return t}else t=!0;return a.data.ButtonClass="btn-c",t},b=function(){var t=null;a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS?t=o.ACCOUNT_TYPE.CURRENT_PLUS:a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD?t=o.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.OTHER_BANK_CARD&&(t=a.data.AccountData.otherBankAccount.cardInfo.cardNo),t&&T.saveRecentlyUsedBankCard(o.ACCOUT_BIZ_TYPE.PAYMENT,t,o.ACCOUT_SCENE_TYPE.INSURANCE)},O=function(){var a=T.loadRecentlyUsedBankCard(o.ACCOUT_BIZ_TYPE.PAYMENT,o.ACCOUT_SCENE_TYPE.INSURANCE);if(a){if(a==o.ACCOUNT_TYPE.CURRENT_PLUS||a==o.ACCOUNT_TYPE.WEBANK_CARD)return a;var t=r.getPayableCardList(),n=t[0];for(var e in t)if(t[e].other_account==a){n=t[e];break}return n}return null},Y=function(){var t=u.getCacheInfo("wealthNew"),n=r.getPayableCardList(),e=r.parseRawWealthData_V3(t);a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.amount=e.BankAmount,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.amount=e.HJAmount,a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择付款账户",a.data.AccountData.ctrlData.canBindNewCard=!0,a.data.AccountData.otherBankAccount={},a.data.AccountData.otherBankAccount.cardInfo={},a.data.AccountData.disabledOtherBankAccount=r.getUnableToPayCardList();var c=r.isTransVerificationAccount();if(c&&(a.data.AccountData.ctrlData.canBindNewCard=!1),n&&n.length>0&&!c){a.data.AccountData.otherBankAccount.otherAccountList=n;var i=O();i?i==o.ACCOUNT_TYPE.CURRENT_PLUS||i==o.ACCOUNT_TYPE.WEBANK_CARD?a.data.AccountData.ctrlData.accountType=i:(a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.OTHER_BANK_CARD,a.data.AccountData.otherBankAccount.cardInfo.bankBinCode=i.other_bank_bin_code,a.data.AccountData.otherBankAccount.cardInfo.userName=i.other_name,a.data.AccountData.otherBankAccount.cardInfo.cardNo=i.other_account,a.data.AccountData.otherBankAccount.cardInfo.cardTypeCode=i.other_card_type_code,a.data.AccountData.otherBankAccount.cardInfo.cardType=i.other_card_type,a.data.AccountData.otherBankAccount.cardInfo.bankName=i.other_bank_name):a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.INVALID_TYPE}else a.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.CURRENT_PLUS};a.onSelectPayWay=function(){a.data.isPwdShow?(a.data.isPwdAutoShow=!0,a.data.isPwdShow=!1):a.data.isPwdAutoShow=!1,a.data.showAccountSelector()},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS},a.isOtherBank=function(){return a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.OTHER_BANK_CARD},a.onAccountSelected=function(){a.data.isPwdAutoShow&&(d(V,200),a.data.isPwdAutoShow=!1),K(),R()};var V=function(){a.data.pwdSubTitle="购买"+a.data.prodInfo.prod_name;var t;a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD?t="使用微众卡支付":a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS?t="使用活期+支付":(t="使用"+a.data.AccountData.otherBankAccount.cardInfo.bankName,t+=a.data.AccountData.otherBankAccount.cardInfo.cardType,t+=e.abridgeAccountNumber(a.data.AccountData.otherBankAccount.cardInfo.cardNo)+"支付"),a.data.payWayDesc=t,a.data.pwdTransDesc=parseFloat(a.data.amount).toFixed(2)+"元",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,o){t!==o&&(a.data.isPwdShow=!1,W())}),a.onClickNextBtn=function(){E()};var x=function(){if(a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=gBankLimit[a.data.AccountData.otherBankAccount.cardInfo.bankBinCode];if(!t)return!1;if(parseFloat(a.data.amount)>parseFloat(t.perOne))return a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="超过银行卡限额，"+a.data.AccountData.otherBankAccount.cardInfo.bankName+a.data.AccountData.otherBankAccount.cardInfo.cardType+"单笔"+t.perOne,parseFloat(t.perDay)>0&&(a.data.outValue.oneLineTextLeft+="，单日"+t.perDay),a.data.outValue.oneLineTextLeft+="。如需要大额度购买，请先转账至微众卡。",a.data.outValue.twoButtonText1="转账指引",a.data.outValue.twoButtonText2="关闭",a.data.outValue.popClose=function(a){1==a&&h.goPage("0")},!0}return!1},H=function(t){var o=a.data;return o.outValue={},o.outValue.showPop=!0,o.outValue.oneLineTextLeft=t,o.outValue.oneButtonText="知道了",o.outValue.popClose=function(){},!0},K=function(){var t=a.data,n=t.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.OTHER_BANK_CARD;if(n&&n&&r.isBankCardInBatchProcessing(t.AccountData.otherBankAccount.cardInfo.bankBinCode)){var e=r.getBankBatchProcessingMsg(t.AccountData.otherBankAccount.cardInfo.bankBinCode,t.AccountData.otherBankAccount.cardInfo.bankName);H(e)}},W=function(){var t={};a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD?t.pay_flag=o.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS?(t.pay_flag=o.ACCOUNT_TYPE.CURRENT_PLUS,t.pay_product_code="001234"):(t.pay_flag=o.ACCOUNT_TYPE.OTHER_BANK_CARD,t.card_no=a.data.AccountData.otherBankAccount.cardInfo.cardNo),t.user_pwd=a.vm.formData.confirmPassword.RSA,t.transaction_amount=a.data.amount,t.product_code=i.prodCode,t.redeem_type="02",t.is_capricious="1",a.data.email&&(t.email=a.data.email),"北京市"==a.data.province||"上海市"==a.data.province||"天津市"==a.data.province||"重庆市"==a.data.province?(t.province=a.data.province,t.city=a.data.province):(t.province=a.data.province,t.city=a.data.city),a.data.district&&a.data.addressDetail&&(t.address=a.data.district+a.data.addressDetail),a.data.district&&(t.region=a.data.district),a.data.addressDetail&&(t.detail_address=a.data.addressDetail),"请选择"!=a.data.region?t.policy_address=a.data.region:a.data.prodInfo.sale_region_cycle[0]&&(t.policy_address=a.data.prodInfo.sale_region_cycle[0]),a.data.obj={},a.data.obj.transAmount=a.data.amount,a.data.obj.prodCode=i.prodCode,a.data.obj.email=a.data.email,a.data.obj.payAccountData=a.data.AccountData,a.data.showLoading=!0,n.requestBuyUniversalInsurance(t).then(function(t){r.isProcessingState(t.ret_code)?t.ret_data&&t.ret_data.trans_serno?F(o.ORDER_QUERY_TYPE.UNIVERSAL_INSURANCE_PURCHASE,t.ret_data.trans_serno,i.prodCode):(a.data.showLoading=!1,e.makeToast(t.ret_msg)):(t.ret_data&&t.ret_data.policy_no&&(a.data.obj.policyNo=t.ret_data.policy_no),a.data.obj.ret_code=t.ret_code,a.data.obj.ret_msg=t.ret_msg,e.clearCurrentViewCache(),g.go("/insurancePurchaseResult2",a.data.obj)),b()},function(t){a.data.showLoading=!1,r.isRetCodePwd(t.ret_code)?r.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a?V():2==a&&p.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&p.goPage()}):(a.data.obj.ret_code=t.ret_code,a.data.obj.ret_msg=t.ret_msg,e.clearCurrentViewCache(),g.go("/insurancePurchaseResult2",a.data.obj))})},F=function(t,o,n){var c;c=a.isYGProd()?r.checkProcessingState(t,o,n,10):r.checkProcessingState(t,o,n),c.then(function(t){a.data.showLoading=!1,t.policyNo&&(a.data.obj.policyNo=t.policyNo),a.data.obj.ret_code=t.retCode,a.data.obj.ret_msg=t.retMsg,e.clearCurrentViewCache(),g.go("/insurancePurchaseResult2",a.data.obj)})};a.isYGProd=function(){return"YG160314"==a.data.prodInfo.prod_code||"YG160315"==a.data.prodInfo.prod_code||"YG160316"==a.data.prodInfo.prod_code?!0:!1},a.isDWProd=function(){return"DW160407"==a.data.prodInfo.prod_code||"DW160408"==a.data.prodInfo.prod_code||"DW160401"==a.data.prodInfo.prod_code?!0:!1};var j=function(){a.data.province="选择省",a.data.city="选择市",a.data.district="选择区",G();var t=q(a.params.userInfo);t||Z()},G=function(){a.data.provinceList=[];for(var t in gDistrictInfo[0])if(gDistrictInfo[0][t].fullname&&gDistrictInfo[0][t].id){var o={};o.text=gDistrictInfo[0][t].fullname,o.id=gDistrictInfo[0][t].id,a.data.provinceList.push(o)}},$=function(t){a.data.cityList=[];for(var o in gDistrictInfo[1])if(gDistrictInfo[1][o].fullname&&gDistrictInfo[1][o].id&&gDistrictInfo[1][o].id.substr(0,2)==t.substr(0,2)){var n={};n.text=gDistrictInfo[1][o].fullname,n.id=gDistrictInfo[1][o].id,a.data.cityList.push(n)}},M=function(t){if(a.data.districtList=[],"北京市"==a.data.province||"上海市"==a.data.province||"天津市"==a.data.province||"重庆市"==a.data.province){for(var o in gDistrictInfo[1])if(gDistrictInfo[1][o].fullname&&gDistrictInfo[1][o].id&&gDistrictInfo[1][o].id.substr(0,2)==t.substr(0,2)){var n={};n.text=gDistrictInfo[1][o].fullname,n.id=gDistrictInfo[1][o].id,a.data.districtList.push(n)}}else for(var o in gDistrictInfo[2])if(gDistrictInfo[2][o].fullname&&gDistrictInfo[2][o].id&&gDistrictInfo[2][o].id.substr(0,4)==t.substr(0,4)){var n={};n.text=gDistrictInfo[2][o].fullname,n.id=gDistrictInfo[2][o].id,a.data.districtList.push(n)}},J=function(){var t={};t.email=a.data.email,t.province=a.data.province,t.city=a.data.city,t.district=a.data.district,t.addressDetail=a.data.addressDetail,t.prod_code=i.prodCode;var o={};if(o.region=a.data.region,a.pageType==a.pageTypeEnum.purchasePage)f.saveDataByUser("universalUserInfo",t),f.saveDataByUser("universalUserInfoForProd_"+i.prodCode,o);else{f.saveDataByUser("universalUserInfo",t),f.saveDataByUser("universalUserInfoForProd_"+i.prodCode,o);var c={};c.product_code=t.prod_code,c.email=t.email,c.province=t.province,c.city=t.city,c.region=t.district,c.detail_address=t.addressDetail,c.policy_address=o.region,t.district&&t.addressDetail&&(c.address=t.district+t.addressDetail),d(function(){a.showLoading=!0}),n.requestSavePurchaseUniversalInsuranceInfo(c).then(function(){a.showLoading=!1,a.back()},function(){a.showLoading=!1,e.makeToast(STRING_TABLE.SAVE_INSURANCE_PRE_BUY_INFO_FAIL,"short")})}},q=function(t){if(!t)return!1;if(t.email&&(a.data.email=t.email),t.province)if(a.data.province=t.province,d(function(){a.setProvinceSelected(t.province)},500),"北京市"==t.province||"上海市"==t.province||"天津市"==t.province||"重庆市"==t.province){a.data.city="";for(var o in a.data.provinceList)a.data.provinceList[o].text==t.province&&M(a.data.provinceList[o].id)}else for(var o in a.data.provinceList)a.data.provinceList[o].text==t.province&&$(a.data.provinceList[o].id);if(t.city){a.data.city=t.city,d(function(){a.setCitySelected(t.city)},500);for(var o in a.data.cityList)a.data.cityList[o].text==t.city&&M(a.data.cityList[o].id)}t.district&&(a.data.district=t.district,d(function(){a.setDistrictSelected(t.district)},500)),t.addressDetail&&(a.data.addressDetail=t.addressDetail);var n=f.loadDataByUser("universalUserInfoForProd_"+i.prodCode);if(n&&n.region)for(var o in a.data.regionList)n.region==a.data.regionList[o].text&&(a.data.region=n.region,d(function(){a.setRegionSelected(n.region)},500));return!0},Z=function(){a.data.mapDistrictUrl="http://apis.map.qq.com/ws/location/v1/ip?key=Q7YBZ-X2ZH4-PAHUS-XQM36-63P7V-G5FJF",P.get(a.data.mapDistrictUrl).success(function(t){if(0==t.status){if(tracelog("查询ip地域信息成功"),t.result&&t.result.ad_info){if("中国"!=t.result.ad_info.nation)return;if(t.result.ad_info.province)if("北京市"==t.result.ad_info.province||"上海市"==t.result.ad_info.province||"天津市"==t.result.ad_info.province||"重庆市"==t.result.ad_info.province){a.data.province=t.result.ad_info.province,d(function(){a.setProvinceSelected(t.result.ad_info.province)},100),a.data.city="";for(var o in a.data.provinceList)a.data.provinceList[o].text==t.result.ad_info.province&&M(a.data.provinceList[o].id)}else{for(var o in a.data.provinceList)a.data.provinceList[o].text==t.result.ad_info.province&&(a.data.province=t.result.ad_info.province,d(function(){a.setProvinceSelected(t.result.ad_info.province)},100),$(a.data.provinceList[o].id));if(a.data.province!=t.result.ad_info.province)return}if(t.result.ad_info.city)for(var o in a.data.cityList)a.data.cityList[o].text==t.result.ad_info.city&&(a.data.city=t.result.ad_info.city,d(function(){a.setCitySelected(t.result.ad_info.city)},100),M(a.data.cityList[o].id))}}else tracelog("查询ip地域信息失败")})};a.onClickSelectProvince=function(){a.showProvinceSelect()},a.onSelectProvince=function(t){"北京市"==t.text||"上海市"==t.text||"天津市"==t.text||"重庆市"==t.text?(a.data.province=t.text,a.data.city="",a.data.district="选择区",M(t.id)):(a.data.province=t.text,a.data.city="选择市",a.data.district="选择区",$(t.id)),R()},a.onClickSelectCity=function(){"北京市"!=a.data.province&&"上海市"!=a.data.province&&"天津市"!=a.data.province&&"重庆市"!=a.data.province&&"选择省"!=a.data.province&&a.showCitySelect()},a.onSelectCity=function(t){M(t.id),a.data.city=t.text,a.data.district="选择区"},a.onClickSelectDistrict=function(){"选择市"!=a.data.city&&a.showDistrictSelect()},a.onSelectDistrict=function(t){a.data.district=t.text,R()},a.back=function(){A.backPage()},a.bindCard=function(){N.goToBindCard()},a.onHJViewActive=function(){var t=r.getPayableCardList();t&&t.length>0&&(a.data.AccountData.otherBankAccount.otherAccountList=t),Y(),S()},a.onHJViewDisActive=function(){},B()}]);app.controller("InsurancePurchaseResultController2",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","TransRecordService","LocationService","ProdInfoService","HJactionLoading","$q",function(a,t,e,o,d,r,n,i,s,u,D){a.data={};var f=D.defer(),p=function(){a.data.obj=t.search(),a.data.prodInfo=s.getProdInfo(a.data.obj.prodCode),a.data.amount=parseFloat(a.data.obj.transAmount).toFixed(2),a.data.status=a.data.obj.ret_code==e.CGI_RET.CGI_SUCCESS||a.data.obj.ret_code==e.CGI_RET.CGI_SUCCESS_2?1:a.data.obj.ret_code==e.CGI_RET.CGI_PROCESSING||a.data.obj.ret_code==e.CGI_RET.CGI_PROCESSING_2?2:3;var o={pro_code:a.data.obj.prodCode,status:a.data.status};d.reportCustomEvent("insurance_universal_product_purchase_result",o),c(),I(),g()},c=function(){o.requestUserWealth().then(function(){f.resolve()},function(){f.resolve()})},_=function(){return"MS160110"==a.data.prodInfo.prod_code||"MS160310"==a.data.prodInfo.prod_code||"MS160510"==a.data.prodInfo.prod_code?!0:!1};a.isYGProd=function(){return"YG160314"==a.data.prodInfo.prod_code||"YG160315"==a.data.prodInfo.prod_code||"YG160316"==a.data.prodInfo.prod_code?!0:!1};var l=function(t){if(_()){var e=d.getYYYYMMDDStringByDate(t,""),o=d.getDate();o.setDate(o.getDate()+1);for(var r=1;;){var n=d.getDate();n.setDate(n.getDate()+1),n.setMonth(n.getMonth()+6*r),n.getDate()<o.getDate()&&(n.setMonth(n.getMonth()-1),n.setDate(0));var i=d.getYYYYMMDDStringByDate(n,""),s=d.getDateByYYYYMMDDString(i);s.setDate(s.getDate()+2);var u=d.getYYYYMMDDStringByDate(s,"");if(parseInt(e)>=parseInt(i)&&parseInt(e)<=parseInt(u))return!0;if(r++,n>t)return!1;if(r>50)return!1}}if(t<a.data.hesitatePeriodEnd)return!1;for(var D in a.data.prodInfo.free_refund_date)if(a.data.prodInfo.free_refund_date[D]==t.getDate())return!0;return!1},g=function(){if(_()){a.data.nextOpenDay=d.getDate();for(var t=0;;){if(a.data.nextOpenDay.setDate(a.data.nextOpenDay.getDate()+1),t++,l(a.data.nextOpenDay))return;if(t>365)return void(a.data.nextOpenDay=void 0)}}if(0==a.data.prodInfo.free_refund_date.length)return void(a.data.nextOpenDay=void 0);a.data.nextOpenDay=angular.copy(a.data.today<a.data.hesitatePeriodEnd?a.data.hesitatePeriodEnd:a.data.today);for(var t=0;;){a.data.nextOpenDay.setDate(a.data.nextOpenDay.getDate()+1),t++;for(var e in a.data.prodInfo.free_refund_date)if(a.data.prodInfo.free_refund_date[e]==a.data.nextOpenDay.getDate())return;if(t>50)return void(a.data.nextOpenDay=void 0)}},I=function(){a.data.today=d.getDate(),a.data.valueDay=d.getDate(),a.data.valueDay.setDate(a.data.valueDay.getDate()+1),a.data.showValueDay=d.getDate(),a.data.showValueDay.setDate(a.isYGProd()?a.data.showValueDay.getDate()+16:a.data.showValueDay.getDate()+2),a.data.comfirmDay=d.getNextWorkDay(1,a.data.today),a.data.lockPeriodEnd=angular.copy(a.data.valueDay),"Y"==a.data.prodInfo.prod_lock_unit?a.data.lockPeriodEnd.setFullYear(a.data.lockPeriodEnd.getFullYear()+parseInt(a.data.prodInfo.prod_lock)):"M"==a.data.prodInfo.prod_lock_unit?a.data.lockPeriodEnd.setMonth(a.data.lockPeriodEnd.getMonth()+parseInt(a.data.prodInfo.prod_lock)):a.data.lockPeriodEnd.setDate(a.data.lockPeriodEnd.getDate()+parseInt(a.data.prodInfo.prod_lock)),a.data.hesitatePeriodEnd=d.getDate(),a.data.hesitatePeriodEnd.setDate(a.data.hesitatePeriodEnd.getDate()+a.data.prodInfo.hesitation_period)};a.review=function(){i.go("/insuranceReview",a.data.obj)},a.onClickOK=function(){u.show(),f.promise.then(function(){u.hide(),i.go("myFinancialInsurance",null,null,{stateStr:e.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})})},p()}]);app.controller("InsuranceRuleController2",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","LocationService","$stateParams","envService","$http","$sce","$ionicScrollDelegate","$timeout",function(e,a,t,s,n,o,c,d,r,i,m,u){e.data={};var l=function(){h(),"purchase"==c.tab?(e.data.purchaseClass="item on",e.data.redeemClass="item",e.data.showPurchase=!0,e.data.showRedeem=!1):"redeem"==c.tab?(e.data.purchaseClass="item",e.data.redeemClass="item on",e.data.showPurchase=!1,e.data.showRedeem=!0):(e.data.purchaseClass="item on",e.data.redeemClass="item",e.data.showPurchase=!0,e.data.showRedeem=!1),e.data.myContent=m.$getByHandle("myContent")},h=function(){var a=d.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+c.prodCode+"/rule.html";r.get(i.trustAsResourceUrl(a)).success(function(a){e.data.sectionHtml=i.trustAsHtml(a)})};e.onClickPurchase=function(){e.data.purchaseClass="item on",e.data.redeemClass="item",e.data.showPurchase=!0,e.data.showRedeem=!1,u(function(){e.data.myContent.resize()},200)},e.onClickRedeem=function(){e.data.purchaseClass="item",e.data.redeemClass="item on",e.data.showPurchase=!1,e.data.showRedeem=!0,u(function(){e.data.myContent.resize()},200)},e.back=function(){o.backPage()},l()}]);app.controller("InsuranceMyProductDetailsController2",["$scope","$location","$stateParams","utils","cgiService","essential","$timeout","webankCommonService","$rootScope","cache","InsuranceProductDetailService","InsurancePurchaseService2","GLOBAL_CONSTANT","RegisterService","LoginService","$http","$sce","envService","InsuranceHistoryListService","LocationService","ProdInfoService","HJactionPop",function(a,t,e,d,o,r,n,s,i,p,D,g,l,f,c,h,u,y,_,Y,I,M){a.data={};var N=function(){a.data.wealthData=E(e.policyNo),a.data.prodInfo=I.getProdInfo(a.data.wealthData.prod_code),void 0!=a.data.wealthData.last_income_date&&void 0!=a.data.wealthData.last_income&&0!=a.data.wealthData.last_income&&(a.data.income=parseFloat(a.data.wealthData.last_income).toFixed(2)),d.reportCustomEvent("insurance_universal_myproduct_details",a.data.wealthData.prod_code),w(),S(),v(),L(),a.isMSProd()&&P(),a.isYGProd()&&(a.data.stepDate1=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.stepDate1.setDate(a.data.stepDate1.getDate()+181),a.data.stepDate2=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.stepDate2.setDate(a.data.stepDate1.getDate()+361))},w=function(){a.data.startDay=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.valueDay=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.valueDay.setDate(a.data.valueDay.getDate()+1),a.data.confirmDay=d.getNextWorkDay(1,a.data.startDay),a.data.confirmShowValueDay=d.getNextWorkDay(1,a.data.startDay),a.data.confirmShowValueDay.setDate(a.data.confirmShowValueDay.getDate()+1),a.data.wealthData.hesitate_date?a.data.hesitatePeriodEnd=d.getEndDateByYYYYMMDDString(a.data.wealthData.hesitate_date):(a.data.hesitatePeriodEnd=d.getEndDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.hesitatePeriodEnd.setDate(a.data.hesitatePeriodEnd.getDate()+a.data.prodInfo.hesitation_period)),a.data.hesitatePeriodNext=angular.copy(a.data.hesitatePeriodEnd),a.data.hesitatePeriodNext.setDate(a.data.hesitatePeriodNext.getDate()+1),a.data.wealthData.lock_date?a.data.lockPeriodEnd=d.getEndDateByYYYYMMDDString(a.data.wealthData.lock_date):(a.data.lockPeriodEnd=d.getEndDateByYYYYMMDDString(a.data.wealthData.trans_date),"Y"==a.data.prodInfo.prod_lock_unit?a.data.lockPeriodEnd.setFullYear(a.data.lockPeriodEnd.getFullYear()+parseInt(a.data.prodInfo.prod_lock)):"M"==a.data.prodInfo.prod_lock_unit?a.data.lockPeriodEnd.setMonth(a.data.lockPeriodEnd.getMonth()+parseInt(a.data.prodInfo.prod_lock)):a.data.lockPeriodEnd.setDate(a.data.lockPeriodEnd.getDate()+parseInt(a.data.prodInfo.prod_lock))),a.data.prodEnd=d.getEndDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.prodInfo.prod_term_desc?a.data.prodEnd.setFullYear(a.data.prodEnd.getFullYear()+parseInt(100)):"Y"==a.data.prodInfo.prod_term_unit?a.data.prodEnd.setFullYear(a.data.prodEnd.getFullYear()+parseInt(a.data.prodInfo.prod_term)):"M"==a.data.prodInfo.prod_term_unit?a.data.prodEnd.setMonth(a.data.prodEnd.getMonth()+parseInt(a.data.prodInfo.prod_term)):a.data.prodEnd.setDate(a.data.prodEnd.getDate()+parseInt(a.data.prodInfo.prod_term)),a.data.holdDays=Math.ceil(d.getDateDifference(a.data.startDay,d.getDate()))},v=function(){a.data.today=d.getDate(),a.data.period=a.data.today<a.data.hesitatePeriodEnd?1:a.data.today<a.data.lockPeriodEnd?C(a.data.today)?3:2:C(a.data.today)?4:5,m()},L=function(){var t=0,e=0,o=0,r=1,n=1,s=1.5,i=2;a.data.progressNode0LightClass="light",a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass="",1==a.data.wealthData.policy_status?(t=d.getDateDifference(a.data.startDay,a.data.today),e=d.getDateDifference(a.data.valueDay,a.data.today),o=d.getDateDifference(a.data.confirmShowValueDay,a.data.today),o>0?(a.data.progress=a.data.prodInfo.prod_term_desc?(r+n+s/2)/(r+n+s+i)*100+parseFloat(e/36500*(100-(r+n+s/2)/(r+n+s+i)*100)):(r+n+s/2)/(r+n+s+i)*100+parseFloat(e/d.getDateDifference(a.data.confirmShowValueDay,a.data.prodEnd)*(100-(r+n+s/2)/(r+n+s+i)*100)),a.data.progressNode1LightClass="light",a.data.progressNode2LightClass="light",a.data.progressNode3LightClass=""):!(o>0)&&e>0?(a.data.progress=(r+n/2)/(r+n+s+i)*100+parseFloat(e/d.getDateDifference(a.data.valueDay,a.data.confirmShowValueDay)*((r+n+s/2)/(r+n+s+i)*100-(r+n/2)/(r+n+s+i)*100)),a.data.progressNode1LightClass="light",a.data.progressNode2LightClass="",a.data.progressNode3LightClass=""):o>0||e>0||!(t>0)?(a.data.progress=0,a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass=""):(a.data.progress=parseFloat(t/d.getDateDifference(a.data.startDay,a.data.valueDay)*((r+n/2)/(r+n+s+i))*100),a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass="")):(t=d.getDateDifference(a.data.startDay,a.data.today),e=d.getDateDifference(a.data.valueDay,a.data.today),a.data.nextOpenDay?(o=d.getDateDifference(a.data.nextOpenDay,a.data.today),o>0?(a.data.progress=a.data.prodInfo.prod_term_desc?(r+n+s/2)/(r+n+s+i)*100+parseFloat(e/36500*(100-(r+n+s/2)/(r+n+s+i)*100)):(r+n+s/2)/(r+n+s+i)*100+parseFloat(e/d.getDateDifference(a.data.nextOpenDay,a.data.prodEnd)*(100-(r+n+s/2)/(r+n+s+i)*100)),a.data.progressNode1LightClass="light",a.data.progressNode2LightClass="light",a.data.progressNode3LightClass=""):!(o>0)&&e>0?(a.data.progress=(r+n/2)/(r+n+s+i)*100+parseFloat(e/d.getDateDifference(a.data.valueDay,a.data.nextOpenDay)*((r+n+s/2)/(r+n+s+i)*100-(r+n/2)/(r+n+s+i)*100)),a.data.progressNode1LightClass="light",a.data.progressNode2LightClass="",a.data.progressNode3LightClass=""):o>0||e>0||!(t>0)?(a.data.progress=0,a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass=""):(a.data.progress=parseFloat(t/d.getDateDifference(a.data.startDay,a.data.valueDay)*((r+n/2)/(r+n+s+i))*100),a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass="")):e>0?(a.data.progress=a.data.prodInfo.prod_term_desc?(r+n/2)/(r+n+i)*100+parseFloat(e/36500*(100-(r+n/2)/(r+n+i)*100)):(r+n/2)/(r+n+i)*100+parseFloat(e/d.getDateDifference(a.data.valueDay,a.data.prodEnd)*(100-(r+n/2)/(r+n+i)*100)),a.data.progressNode1LightClass="light",a.data.progressNode2LightClass="",a.data.progressNode3LightClass=""):!(e>0)&&t>0?(a.data.progress=parseFloat(t/d.getDateDifference(a.data.startDay,a.data.valueDay)*((r+n/2)/(r+n+i))*100),a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass=""):(a.data.progress=0,a.data.progressNode1LightClass="",a.data.progressNode2LightClass="",a.data.progressNode3LightClass="")),a.data.progress>99&&(a.data.progress=100,a.data.progressNode1LightClass="light",a.data.progressNode2LightClass="light",a.data.progressNode3LightClass="light")},C=function(t){if(a.isMSProd()){var e=d.getYYYYMMDDStringByDate(t,""),o=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date);o.setDate(o.getDate()+1);for(var r=1;;){var n=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date);n.setDate(n.getDate()+1),n.setMonth(n.getMonth()+6*r),n.getDate()<o.getDate()&&(n.setMonth(n.getMonth()-1),n.setDate(0));var s=d.getYYYYMMDDStringByDate(n,""),i=d.getDateByYYYYMMDDString(s);i.setDate(i.getDate()+2);var p=d.getYYYYMMDDStringByDate(i,"");if(parseInt(e)>=parseInt(s)&&parseInt(e)<=parseInt(p))return!0;if(r++,n>t)return!1;if(r>50)return!1}}if(t<a.data.hesitatePeriodEnd)return!1;for(var D in a.data.prodInfo.free_refund_date)if(a.data.prodInfo.free_refund_date[D]==t.getDate())return!0;return!1},m=function(){if(a.isMSProd()){a.data.nextOpenDay=d.getDate();for(var t=0;;){if(a.data.nextOpenDay.setDate(a.data.nextOpenDay.getDate()+1),t++,C(a.data.nextOpenDay))return;if(t>365)return void(a.data.nextOpenDay=void 0)}}if(0==a.data.prodInfo.free_refund_date.length)return void(a.data.nextOpenDay=void 0);a.data.nextOpenDay=angular.copy(a.data.today<a.data.hesitatePeriodEnd?a.data.hesitatePeriodEnd:a.data.today);for(var t=0;;){a.data.nextOpenDay.setDate(a.data.nextOpenDay.getDate()+1),t++;for(var e in a.data.prodInfo.free_refund_date)if(a.data.prodInfo.free_refund_date[e]==a.data.nextOpenDay.getDate())return;if(t>50)return void(a.data.nextOpenDay=void 0)}},P=function(){var t=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date);t.setDate(t.getDate()+1),a.data.firseOpenDay=d.getDateByYYYYMMDDString(a.data.wealthData.trans_date),a.data.firseOpenDay.setDate(a.data.firseOpenDay.getDate()+1),a.data.firseOpenDay.setMonth(a.data.firseOpenDay.getMonth()+6),a.data.firseOpenDay.getDate()<t.getDate()&&(a.data.firseOpenDay.setMonth(a.data.firseOpenDay.getMonth()-1),a.data.firseOpenDay.setDate(0)),a.data.secondOpenDay=angular.copy(a.data.firseOpenDay),a.data.secondOpenDay.setDate(a.data.secondOpenDay.getDate()+1),a.data.thirdOpenDay=angular.copy(a.data.firseOpenDay),a.data.thirdOpenDay.setDate(a.data.thirdOpenDay.getDate()+2)},S=function(){a.data.lockPeriodDesc="Y"==a.data.prodInfo.prod_lock_unit?"年":"M"==a.data.prodInfo.prod_lock_unit?"个月":"天",a.data.prodTermUnitDesc="Y"==a.data.prodInfo.prod_term_unit?a.data.prodInfo.prod_term+"年":"M"==a.data.prodInfo.prod_term_unit?a.data.prodInfo.prod_term+"个月":a.data.prodInfo.prod_term+"天"},E=function(a){var t=p.getCacheInfo("wealthNew");if(t&&t.finance_wealth&&t.finance_wealth.wnx_cycle)for(var e in t.finance_wealth.wnx_cycle)if(t.finance_wealth.wnx_cycle[e].policy_no==a)return t.finance_wealth.wnx_cycle[e];return void 0};a.isMSProd=function(){return"MS160110"==a.data.prodInfo.prod_code||"MS160310"==a.data.prodInfo.prod_code||"MS160510"==a.data.prodInfo.prod_code?!0:!1},a.isYGProd=function(){return"YG160314"==a.data.prodInfo.prod_code||"YG160315"==a.data.prodInfo.prod_code||"YG160316"==a.data.prodInfo.prod_code?!0:!1},a.isDWProd=function(){return"DW160407"==a.data.prodInfo.prod_code||"DW160408"==a.data.prodInfo.prod_code||"DW160401"==a.data.prodInfo.prod_code?!0:!1},a.canRedeem=function(){return(a.isMSProd()||a.isDWProd)&&a.data.wealthData.trans_date==d.getYYYYMMDDStringByDate(a.data.today,"")?!1:0!=a.data.wealthData.policy_status?!1:!0},a.onClickRedeem=function(){if(1==a.data.period)M.show({oneLineTextLeft:"您还在犹豫期内，"+(a.data.hesitatePeriodEnd.getMonth()+1)+"月"+a.data.hesitatePeriodEnd.getDate()+"日24:00前只能全额赎回本金，没有收益。",twoButtonText1:"取消",twoButtonText2:"确认赎回",popClose:function(a){2==a&&Y.go("/insuranceRedeem2/"+e.policyNo+"/hesitate")}});else if(2==a.data.period){var t="";if(a.data.prodInfo.free_refund_date.length>0){t+="每月"+a.data.prodInfo.free_refund_date[0]+"日";for(var d in a.data.prodInfo.free_refund_date)d>=1&&(t+="、"+a.data.prodInfo.free_refund_date[d]+"日");t+="可免费赎回，"}t+="今日赎回将收取手续费。",M.show({oneLineTextLeft:t,twoButtonText1:"取消",twoButtonText2:"确认赎回",popClose:function(t){2==t&&Y.go("1"==a.data.prodInfo.can_be_part_refund&&0==a.data.prodInfo.redeem_part_type?"/insuranceRedeem2/"+e.policyNo+"/free":"/insuranceRedeem2/"+e.policyNo+"/lock")}})}else if(5==a.data.period){if(a.isYGProd()&&1==a.data.today.getDate())return void M.show({oneLineTextLeft:"本产品每月1日为保单结算日，无法进行赎回操作。",oneButtonText:"确定",popClose:function(){}});Y.go("1"==a.data.prodInfo.can_be_part_refund&&0==a.data.prodInfo.redeem_part_type?"/insuranceRedeem2/"+e.policyNo+"/free":"/insuranceRedeem2/"+e.policyNo+"/lock")}else{if(a.isYGProd()&&1==a.data.today.getDate())return void M.show({oneLineTextLeft:"本产品每月1日为保单结算日，无法进行赎回操作。",oneButtonText:"确定",popClose:function(){}});Y.go("1"==a.data.prodInfo.can_be_part_refund?"/insuranceRedeem2/"+e.policyNo+"/free":"/insuranceRedeem2/"+e.policyNo+"/lock")}},a.onClickProdDetail=function(){Y.go("/insuranceProductDetails2/"+a.data.wealthData.prod_code)},a.onClickRule=function(){Y.go("/insuranceRule2/"+a.data.wealthData.prod_code+"/redeem")},a.back=function(){Y.backPage()},a.onHJViewActive=function(){N()},a.onHJViewDisActive=function(){},N()}]);app.controller("InsuranceRedeemController2",["$scope","$stateParams","utils","cache","webankCommonService","$timeout","$location","session","cgiService","GLOBAL_CONSTANT","LocationService","ProdInfoService","ResetPasswdService","HJactionPop",function(a,t,e,o,n,d,u,r,c,l,s,i,_,p){a.data={};var m=function(){a.data.wealthData=w(t.policyNo),a.data.prodInfo=i.getProdInfo(a.data.wealthData.prod_code),e.reportCustomEvent("insurance_universal_product_redeem",a.data.wealthData.prod_code),a.data.today=e.getDate(),a.data.refundArriveAccountDate=e.getNextWorkDay(a.data.prodInfo.redeem_arrive_account_day,a.data.today),a.data.redeemType=t.redeemType,e.reportCustomEvent("insurance_universal_product_redeem",a.data.wealthData.prod_code),h(),a.data.redeemButtonClass="btn-c off",a.data.showLoading=!1,a.data.showFee=!1,"hesitate"==a.data.redeemType?(a.data.amount=a.data.wealthData.avg_cost,f(a.data.wealthData.total_amount)):"lock"==a.data.redeemType&&a.onClickRedeemAll()},f=function(e){var o={};o.policy_no=t.policyNo,parseFloat(e)==parseFloat(a.data.wealthData.total_amount)?o.is_refund_all=1:(o.is_refund_all=0,o.refund_application_amount=e),c.requestRefundFeeInfo(o).then(function(t){tracelog("退保试算成功"),n.isProcessingState(t.ret_code)?p.show({oneLineTextLeft:"暂时无法估算赎回手续费。",twoButtonText1:"重新估算",twoButtonText2:"取消",popClose:function(t){1==t&&(a.data.redeemButtonClass="btn-c off",d(function(){f(e)},10))}}):(t.ret_data&&t.ret_data.system_date&&(a.data.checkFeeDate=t.ret_data.system_date),t.ret_data&&void 0!=t.ret_data.refund_application_amount&&void 0!=t.ret_data.refund_actual_amount&&(a.data.refundFee=(parseFloat(t.ret_data.refund_application_amount)-parseFloat(t.ret_data.refund_actual_amount)).toFixed(2),a.data.refundIncome=parseFloat(t.ret_data.refund_actual_amount).toFixed(2),a.data.showFee=!0),a.data.redeemButtonClass="btn-c")},function(){tracelog("退保试算失败"),p.show({oneLineTextLeft:"暂时无法估算赎回手续费。",twoButtonText1:"重新估算",twoButtonText2:"取消",popClose:function(t){1==t&&(a.data.redeemButtonClass="btn-c off",d(function(){f(e)},10))}})})},w=function(a){var t=o.getCacheInfo("wealthNew");if(t&&t.finance_wealth&&t.finance_wealth.wnx_cycle)for(var e in t.finance_wealth.wnx_cycle)if(t.finance_wealth.wnx_cycle[e].policy_no==a)return t.finance_wealth.wnx_cycle[e];return void 0};a.onClickRedeemAll=function(){a.data.amount=parseFloat(a.data.wealthData.total_amount),a.blurInput()},a.blurInput=function(){if(a.data.redeemButtonClass="btn-c off",a.data.showInputAmountTips=!1,""!=a.data.amount&&void 0!=a.data.amount){if(parseFloat(a.data.amount)<parseFloat(a.data.prodInfo.refund_min_limit)&&parseFloat(a.data.amount)!=parseFloat(a.data.wealthData.total_amount))return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="赎回份额"+a.data.prodInfo.refund_min_limit+"份起");if(parseFloat(a.data.amount)>=parseFloat(a.data.wealthData.total_amount)&&(a.data.amount=parseFloat(a.data.wealthData.total_amount)),parseFloat(a.data.amount)!=parseFloat(a.data.wealthData.total_amount)){var t=a.data.amount;a.data.amount=e.getAmountForRule(a.data.amount,a.data.prodInfo.refund_min_limit,a.data.prodInfo.p_refund_step),t!=a.data.amount&&e.makeToast("金额必须为"+a.data.prodInfo.p_refund_step+"的整数倍，已自动为您调整","short"),parseFloat(a.data.wealthData.total_amount)-parseFloat(a.data.amount)<parseFloat(a.data.prodInfo.remain_min_limit)&&(e.makeToast("剩余账户价值少于"+a.data.prodInfo.remain_min_limit+"元时将为您全额赎回"),a.data.amount=parseFloat(a.data.wealthData.total_amount))}a.data.amount=parseFloat(parseFloat(a.data.amount).toFixed(2)),d(function(){f(a.data.amount)},10)}},a.focusInput=function(){a.data.showInputAmountTips=!1,a.data.showFee=!1};var h=function(){a.data.hideAmount="300",a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择收款账户",a.data.AccountData.ctrlData.accountType=l.ACCOUNT_TYPE.CURRENT_PLUS};a.onSelectPayWay=function(){a.showAccountSelector()},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==l.ACCOUNT_TYPE.WEBANK_CARD},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==l.ACCOUNT_TYPE.CURRENT_PLUS},a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0;var T=function(){a.data.pwdSubTitle="赎回"+a.data.prodInfo.prod_name,a.data.payWayDesc="",a.data.pwdTransDesc=parseFloat(a.data.amount).toFixed(2)+"元",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,A())}),a.onClickRedeem=function(){return e.isValidTransferAmount(a.data.amount)?void("btn-c off"!=a.data.redeemButtonClass&&T()):(a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT))};var A=function(){a.data.showLoading=!0;var d={};d.pay_flag=3,d.user_pwd=a.vm.formData.confirmPassword.RSA,d.product_code=a.data.wealthData.prod_code,a.data.AccountData.ctrlData.accountType==l.ACCOUNT_TYPE.WEBANK_CARD?d.pay_flag=l.ACCOUNT_TYPE.WEBANK_CARD:(d.pay_flag=l.ACCOUNT_TYPE.CURRENT_PLUS,d.pay_product_code="001234");var u=o.getCacheInfo("personalInfo");null!=u&&(d.card_no=u.webank_card_no),d.policy_no=t.policyNo,parseFloat(a.data.amount)==parseFloat(a.data.wealthData.total_amount)||"hesitate"==a.data.redeemType||"lock"==a.data.redeemType?d.is_refund_all=1:(d.is_refund_all=0,d.refund_application_amount=a.data.amount),d.system_date=a.data.checkFeeDate,a.data.resultObj={},a.data.resultObj.amount=a.data.amount,a.data.resultObj.prodCode=a.data.wealthData.prod_code,c.requestRedeemUniversalInsurance(d).then(function(t){n.isProcessingState(t.ret_code)?t.ret_data&&t.ret_data.trans_serno?D(l.ORDER_QUERY_TYPE.UNIVERSAL_INSURANCE_REDEEM,t.ret_data.trans_serno,d.product_code):(a.data.showLoading=!1,e.makeToast(t.ret_msg)):(a.data.resultObj.result=t.ret_code,a.data.showLoading=!1,s.go("/insuranceRedeemResult2",a.data.resultObj))},function(t){a.data.resultObj.result=t.ret_code,a.data.resultObj.failReason=t.ret_msg,a.data.showLoading=!1,n.isRetCodePwd(t.ret_code)?n.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a?T():2==a&&_.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&_.goPage()}):s.go("/insuranceRedeemResult2",a.data.resultObj)})},D=function(t,e,o){n.checkProcessingState(t,e,o).then(function(t){a.data.resultObj.result=t.retCode,a.data.resultObj.failReason=t.retMsg,a.data.showLoading=!1,s.go("/insuranceRedeemResult2",a.data.resultObj)})};a.back=function(){s.backPage()},a.onClickRule=function(){s.go("/insuranceRule2/"+a.data.wealthData.prod_code+"redeem")},m()}]);app.controller("InsuranceReviewController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","TransRecordService","envService","$http","$sce","LocationService",function(e,n,t,c,o,a,r,i,l,s,u){e.data={};var v=function(){e.data.obj=n.search(),A()},A=function(){var n=i.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+e.data.obj.prodCode+"/review.html";l.get(s.trustAsResourceUrl(n)).success(function(n){e.data.sectionHtml=s.trustAsHtml(n)})},_=function(){var n={};n.policy_no=e.data.obj.policyNo,n.online_interview_flag=1,c.requestInsuranceReview(n).then(function(){tracelog("设置在线回访标志成功")},function(){tracelog("设置在线回访标志失败")})};e.onClickOK=function(){_(),u.go("myFinancialInsurance",null,null,{stateStr:t.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})},v()}]);app.controller("InsuranceRedeemResultController2",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","TransRecordService","LocationService","ProdInfoService","HJactionLoading","$q",function(a,t,o,e,r,d,n,c,s,u,i){a.data={};var C=i.defer(),_=function(){a.data.obj=t.search(),a.data.prodCode=a.data.obj.prodCode,a.data.amount=parseFloat(a.data.obj.amount).toFixed(2),a.data.prodInfo=s.getProdInfo(a.data.prodCode),a.data.status=a.data.obj.result==o.CGI_RET.CGI_SUCCESS||a.data.obj.result==o.CGI_RET.CGI_SUCCESS_2?1:a.data.obj.result==o.CGI_RET.CGI_PROCESSING||a.data.obj.result==o.CGI_RET.CGI_PROCESSING_2?2:3;var e={pro_code:a.data.obj.prodCode,status:a.data.status};r.reportCustomEvent("insurance_universal_product_redeem_result",e),l(),I()},l=function(){e.requestUserWealth().then(function(){C.resolve()},function(){C.resolve()})},I=function(){a.data.today=r.getDate(),a.data.confirmDay=r.getNextWorkDay(1,a.data.today),a.data.arriveAccountDay=r.getNextWorkDay(a.data.prodInfo.redeem_arrive_account_day,a.data.today)};a.onClickOK=function(){u.show(),C.promise.then(function(){u.hide(),c.go("myFinancialInsurance",null,null,{stateStr:o.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})})},_()}]);app.controller("InsuranceAgeUnmatchController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","ProdInfoService","LocationService","essential",function(n,o,a,e,i,c,r,t,l){n.data={};var d=function(){n.data.prodInfo=r.getProdInfo(c.prodCode)};n.onClickOK=function(){t.go(l.isFinancialHomeGray()?"financialHome":"financialRecommend")},d()}]);app.controller("InsuranceIdUnmatchController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","ProdInfoService","LocationService","essential",function(n,o,a,e,i,c,r,t,l){n.data={};var d=function(){n.data.prodInfo=r.getProdInfo(c.prodCode)};n.onClickOK=function(){t.go(l.isFinancialHomeGray()?"financialHome":"financialRecommend")},d()}]);app.controller("InsuranceProductIntroductionController2",["$scope","$location","$stateParams","InsuranceProductDetailService","envService","$http","$sce","dataService","$ionicScrollDelegate","$timeout","LocationService","utils",function(t,e,n,o,a,c,r,i,s,u,l,d){t.data={};var p="xq-con nb mgt20 px",v="xq-con nb mgt20 px off",C=function(){d.reportCustomEvent("insurance_universal_product_introduction",n.prodCode),t.data.questionCls=v,t.data.code=n.prodCode;var e=a.getEnvVariable().DATA_CGI_PREFIX+"html/insurance/"+n.prodCode+"/prodDetail.html";c.get(r.trustAsResourceUrl(e)).success(function(e){t.data.sectionHtml=r.trustAsHtml(e)})};t.onClickQuestion=function(){t.data.questionCls=t.data.questionCls==v?p:v;var e=s.$getByHandle("myContent");u(function(){e.resize()},200)},t.back=function(){l.backPage()},C()}]);app.controller("TPlusOneDetailController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","TPlusOneService","$ionicScrollDelegate","$filter","HJactionPop","RegisterService","commonDirectiveService",function(e,t,n,o,a,r,i,s,c,d,u,l,p,_,m,f,h,T,S,I,C,g,E,A,R,P,v,D,O,N,y,B,w,L,Y,k,U,b,M,F,x){var G=t.data={},H=t.func={},$="item on",X="item off",V="立即购买",q="继续购买",j="等待收益",W=m.prodCode,J=(U.$getByHandle("myContent"),7),Q=function(){G.prodInfo=D.getProdInfo(W),G.accumulatedIncome=parseFloat(0).toFixed(2),G.showIncomeRate=!1,G.incomeRateCls=$,G.incomeTheThousandCls=X,G.showIncomeRate=!0,G.isAppendBuy=!1,G.limitWords="已售罄",G.tpltType=G.prodInfo.prod_type,G.incomeDateStr="昨日收益(元)",G.needCheckAge=!0,G.canRedeem=!1,G.canPurchase=!0,G.isSetCalanderShown=!0,G.calendarButtonStr="起售前提醒我",G.calendarButtonClass="item",G.show7DayBtn=!1,G.show1MonBtn=!1,G.show2MonBtn=!1,Z(),H.hasAccount()&&(st(),dt(),ct(),ot(),z()),rt(),G.isIncomeChartShown&&k.getViewData(G,H,W,J),ht(),nt(),et()},K={PRE_SALE:1,ON_SALE:2,SALE_OUT:3},Z=function(){G.prodInfo.prod_type==o.TPLUS1_TPLT.ZAX?(G.titleDesc="七日年化收益率",G.isRecentIncomeDataShown=!0,G.detailBtnText="信息披露及保险保障",G.isIncomeDemoShown=!1,G.isRiskAssNeeded=!1,G.isIncomeChartShown=!0):G.prodInfo.prod_type==o.TPLUS1_TPLT.TLX?(G.titleDesc="历史年化结算利率",G.isRecentIncomeDataShown=!1,G.isRiskAssNeeded=!0,G.detailBtnText="更多详情",G.isIncomeDemoShown=!0,G.isIncomeChartShown=!1):G.prodInfo.prod_type==o.TPLUS1_TPLT.TPDX&&(G.titleDesc="七日年化收益率",G.isRecentIncomeDataShown=!0,G.detailBtnText="信息披露及保险保障",G.isIncomeDemoShown=!1,G.isRiskAssNeeded=!0,G.isIncomeChartShown=!0)},z=function(){if(u.getCacheInfo("tPlusOneTotalIncome"+W)){var e=u.getCacheInfo("tPlusOneTotalIncome"+W);return e.length>=1&&(G.accumulatedIncome=parseFloat(e[0].totalEarnings).toFixed(2)),void n.requestTPlusOneTotalIncome(W).then(function(e){u.setCacheInfo("tPlusOneTotalIncome"+W,e.ret_data)})}n.requestTPlusOneTotalIncome(W).then(function(e){tracelog("查询保险累积收益成功"),e.ret_data&&(e.ret_data.length>=1&&(G.accumulatedIncome=parseFloat(e.ret_data[0].totalEarnings).toFixed(2)),u.setCacheInfo("tPlusOneTotalIncome"+W,e.ret_data))},function(){tracelog("查询保险累积收益失败")})},et=function(){if(G.period==K.PRE_SALE)if(APP_ABILITY&&APP_ABILITY.indexOf(o.APP_ABILITY.ABILITY_CALENDAR)>=0){if(G.now=r.getDate(),G.todayString=r.getYYYYMMDDStringByDate(G.today),G.todayString==G.prodInfo.ipostart_date)try{G.startBuyTime.getTime()-G.now.getTime()<=3e5&&(G.isSetCalanderShown=!1)}catch(e){}G.calendarButtonStr="起售前提醒我",G.calendarButtonClass="item";var t=R.loadData("calendarClock");t&&t.hasRequire&&((t.errorNums||0)<2?r.queryCalendarClock({note:G.prodInfo.prod_name+"("+G.prodInfo.prod_code+":"+G.prodInfo.ipostart_date+")"},function(e){e&&2==e.result?(G.calendarButtonStr="已设置提醒",G.calendarButtonClass="item off",G.isCalDisabled=!0):e&&-1==e.result}):G.isSetCalanderShown=!1)}else G.isSetCalanderShown=!1;else G.isSetCalanderShown=!1},tt=function(){if(G.prodInfo.load_desc){t.rootUrl=c.getEnvVariable().DATA_CGI_PREFIX+"html/tplus1/"+W+"/";var e=t.rootUrl+"prodSecondPage.html";s.get(P.trustAsResourceUrl(e)).success(function(e){e=e.toString().trim(),e.length>0&&(G.showSecond=!0,G.secondPageStr=e,d(function(){G.upDownInit(!0,function(e){e||(G.showSecond=!1)})}))})}},nt=function(){if(!G.hasActivityRestrict){if(G.today=r.getDate(),G.startBuyTime=r.getDateByDate8AndTime6String(G.prodInfo.ipostart_date,G.prodInfo.ipostart_time),G.endBuyTime=r.getDateByDate8AndTime6String(G.prodInfo.ipoend_date,G.prodInfo.ipoend_time),G.period=G.today<G.startBuyTime?K.PRE_SALE:K.ON_SALE,G.today>G.endBuyTime&&(G.period=K.SALE_OUT,G.balance=0),G.period!=K.ON_SALE&&(G.canPurchase=!1),G.period!=K.PRE_SALE&&(G.isSetCalanderShown=!1),G.period==K.PRE_SALE){var e=r.getYYYYMMDDStringByDate(r.getDate());G.limitWords=e==G.prodInfo.ipostart_date?G.prodInfo.ipostart_time.substr(0,2)+":"+G.prodInfo.ipostart_time.substr(2,2)+"起售":G.prodInfo.ipostart_date.substr(4,2)+"月"+G.prodInfo.ipostart_date.substr(6,2)+"日起售"}"02"==G.prodInfo.trans_status&&(G.canPurchase=!1),t.data.refreshTimer=d(function(){tracelog("定期刷新T+1产品详情页"),nt()},1e3)}},ot=function(){G.balance=parseInt(G.prodInfo.remain_total_quota),at(),H.hasAccount()&&n.requestProductBalance(G.prodInfo.prod_code).then(function(e){e.ret_data&&void 0!=e.ret_data.quota_total&&(G.balance=parseInt(e.ret_data.quota_total),at())})},at=function(){G.balance<parseInt(G.prodInfo.p_start_purchase_min_amount,10)&&(G.canPurchase=!1,G.balance=0)},rt=function(){var e=c.getEnvVariable().DATA_CGI_PREFIX+"html/tplus1/"+W+"/",t=e+"transRules.html";s.get(P.trustAsResourceUrl(t)).success(function(e){G.transactionRuleHtml=P.trustAsHtml(e)});var n=e+"intro.html";s.get(P.trustAsResourceUrl(n)).success(function(e){G.prodIntroHtml=P.trustAsHtml(e)})},it=function(e){var t=r.getDate();t.setDate(t.getDate()-1),G.incomeDateStr=r.getYYYYMMDDStringByDate(t)!=e?b("formatYYYYMMDDToCNString")(e)+"收益(元)":"昨日收益(元)"},st=function(){var e=u.getCacheInfo("wealthNew"),t=G.wealthData=a.parseRawWealthDataForTPlusOne(e,W);if(G.wealthStateDesc="",G.purchaseBtnText=V,t.hasWealth){if(t.hasConfirmedWealth){0==t.income?G.wealthStateDesc=j:(G.wealthStateDesc=parseFloat(t.income)>=0?"+"+t.income:t.income,it(t.incomeGenDateStr)),G.waitingIncomeList=[];for(var n in t.waitingIncomeWealth){var o=t.waitingIncomeWealth[n],r=o.amount+"元将于"+b("formatYYYYMMDDToCNString")(n)+"开始产生收益";G.waitingIncomeList.push(r)}G.purchaseBtnText=q}else parseFloat(t.purchaseInTransAmount)>0?(G.wealthStateDesc="确认中",G.purchaseBtnText=q):parseFloat(t.redeemInTransAmount)>0?(G.wealthStateDesc="赎回中",G.purchaseBtnText=q):(G.wealthStateDesc=parseFloat(t.income)>=0?"+"+t.income:t.income,it(t.incomeGenDateStr),G.purchaseBtnText=q);G.canRedeem=parseFloat(t.redeemableAmount)>0,parseFloat(t.refundAmount)>0&&(G.refundAmount=t.refundAmount,G.prodInfo.redeem_to_account_date_num&&(G.refundDayNum=parseInt(G.prodInfo.redeem_to_account_date_num,10))),pt()}},ct=function(){T.getActivityConfig(G.prodInfo.prod_code,function(e){e&&void 0!=e.is_match&&"false"==e.is_match&&(G.limitWords=e.limit_words,G.canPurchase=!1,G.isSetCalanderShown=!1,G.hasActivityRestrict=!0)})},dt=function(){var e={};e.product_code=W,n.requestBuyFinacialLimit(e).then(function(e){e&&e.ret_data&&(isNaN(parseInt(e.ret_data.firstbuy_flag))||0===parseInt(e.ret_data.firstbuy_flag)&&(G.isAppendBuy=!0,G.prodInfo.prod_type==o.TPLUS1_TPLT.TLX&&(G.needCheckAge=!1)))},function(e){tracelog("查询产品购买限额和是否首次购买标记失败, 原因："+e.ret_msg)})},ut=function(e){G.purchaseInTransList=[],G.redeemInTransList=[];var t={},n={},a=0,r=function(e,t,n){var a="";a=t==o.IN_TRANS_QUERY_TYPE.PURCHASE?"confirm_buy_in_trans_date":"redeem_to_account_date";var r=n[a];if(r){var i=e[r];if(i)i.amount=(parseFloat(i.amount)+parseFloat(n.trans_amount)).toFixed(2),i.dateStr=r;else{var s={};s.amount=parseFloat(n.trans_amount).toFixed(2),s.dateStr=r,e[r]=s}}},i=e.ret_data.cycle;for(var s in i){var c=i[s];c.trans_type==o.IN_TRANS_QUERY_TYPE.PURCHASE?c.trans_status<3&&r(t,o.IN_TRANS_QUERY_TYPE.PURCHASE,c):c.trans_type==o.IN_TRANS_QUERY_TYPE.REDEEM?r(n,o.IN_TRANS_QUERY_TYPE.REDEEM,c):c.trans_type==o.IN_TRANS_QUERY_TYPE.FORCE_REDEEM&&(a=parseFloat(a)+parseFloat(c.trans_amount))}for(var d in t){var c=t[d];G.purchaseInTransList.push(c.amount+"元正在确认购买，预计"+b("formatYYYYMMDDToCNString")(c.dateStr)+"反馈购买结果")}for(var d in n){var c=n[d];G.redeemInTransList.push(c.amount+"元正在赎回中，预计"+b("formatYYYYMMDDToCNString")(c.dateStr)+"到账")}a>0&&(G.incomeRedeemText="剩余"+parseFloat(a).toFixed(2)+"元收益正在赎回中，后续到账")},lt=function(){tracelog("拉取在途资产失败了")},pt=function(){var e={};e.prod_code=W,n.requestInTransWealthInfo(e).then(ut,lt)},_t=function(){v.go("TPlusOneDetail/"+W,null,null,{stateStr:o.LOCATION_BACK_PATH.BACKTO_INSURANCE_AFTER_LOGIN_OR_REGISTER},!0)},mt=function(){r.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),d(function(){p.setCallbackPage(_t,_t),v.go("/login")},1e3)},ft=function(){r.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),d(function(){F.setCallbackPage(_t,_t),F.go()},1e3)},ht=function(){if(G.prodInfo&&G.prodInfo.share_config&&!isReviewVer){var e={};G.shareData=e,e.prod_type=o.PROD_TYPE.HJ,e.shareObj=G.prodInfo.share_config,e.shareContent=null,e.shareTarget=null,e.shareObj.share_content&&e.shareObj.share_target?(G.shareClass="menu-tip share hjButton",e.shareContent=e.shareObj.share_content.replace("{prod_name}",G.prodInfo.prod_name),e.shareContent=e.shareContent.replace("{income_rate}",G.prodInfo.expect_income_rate),e.shareTarget=e.shareObj.share_target.replace("{prod_code}",W),e.shareTarget=e.shareTarget.replace("{prod_type}",e.prod_type)):G.shareClass="hpw-con hide hjButton"}else G.shareClass="hpw-con hide hjButton"},Tt=function(){t.data.sliderUpConfirmOption=t.data.sliderUpConfirmOption||{},t.data.riskOption=t.data.riskOption||{},x.checkProductRiskSetting({productRiskLevel:t.data.prodInfo.risk_level||2,sliderUpConfirmOption:t.data.sliderUpConfirmOption,riskOption:t.data.riskOption}).then(function(){v.go("/TPlusOnePurchase/"+W,null,{isAppendBuy:G.isAppendBuy})},function(){t.calculatormodal&&t.calculatormodal.hide()})};H.back=function(){k.backPage()},H.onClickMoreTransRules=function(){v.go("/TPlusOneRule/"+W+"/purchase")},H.onClickMoreInfo=function(){v.go("/TPlusOneMoreInfo/"+W)},H.onClickIncomeRate=function(){G.incomeRateCls=$,G.incomeTheThousandCls=X,G.showIncomeRate=!0},H.onClickIncomeTenThousand=function(){G.incomeRateCls=X,G.incomeTheThousandCls=$,G.showIncomeRate=!1},H.onClickTime=function(e){J!=e&&(J=e,k.getViewData(G,H,W,J))},H.onClickViewMoreTenThousand=function(){v.go("/TPlusOneTenThousandIncome/"+W)},H.onClassTime=function(e){return e==J?"on":""},H.onClickPurchase=function(){var e=u.getCacheInfo("personalInfo"),t=100,n=0;return G.prodInfo.age_up_limit&&(t=parseInt(G.prodInfo.age_up_limit,10)),G.prodInfo.age_down_limit&&(n=parseInt(G.prodInfo.age_down_limit,10)),!(G.needCheckAge&&e&&e.birthday)||r.isOldEnoughByBirthday(e.birthday,n)&&r.isYoungThanByBirthday(e.birthday,t)?void(G.isRiskAssNeeded?Tt():v.go("/TPlusOnePurchase/"+W,null,{isAppendBuy:G.isAppendBuy})):void v.go("/tPlusOneAgeUnmatch/"+m.prodCode)},H.onClickRedeem=function(){v.go("/TPlusOneRedeem/"+W)},H.hasAccount=function(){return u.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT},H.onTrigerLogin=function(){var e=u.getUserStatus();e==o.ACCOUNT_STATE.USER_STATE_LOGIN?ft():e==o.ACCOUNT_STATE.USER_STATE_GUEST&&mt()},H.share=function(){var e=G.shareData,t=null;e&&(t=l.sharePage(e.shareObj.share_title,e.shareContent,e.shareObj.share_iconurl,e.shareTarget)),t&&t.then(function(){var e={prod_code:W,product_type:"monetary_product",status:"success"};r.reportCustomEvent("share_product",e)},function(){var e={prod_code:W,product_type:"monetary_product",status:"failure"};r.reportCustomEvent("share_product",e)})},H.onClickSetClock=function(){if("起售前提醒我"==t.data.calendarButtonStr){var e=R.loadData("calendarClock");R.saveData("calendarClock",{hasRequire:!0,errorNums:e&&e.errorNums});var n=0;r.setCalendarClock({title:"【"+t.data.prodInfo.prod_name+"】 5分钟后开始抢购",startDate:t.data.startBuyTime,note:t.data.prodInfo.prod_name+"("+t.data.prodInfo.prod_code+":"+t.data.prodInfo.ipostart_date+")"},function(a){if(a&&2==a.result)r.reportCustomEvent(o.REPORT_EVENT_NAME.EXCEPTION,o.REPORT_EXCEPTION.CALANDER_CLOCK_SET_SUCCESS),r.makeToast("设置成功，起售前5分钟提醒您","short"),t.data.calendarButtonStr="已设置提醒",t.data.calendarButtonClass="item off",G.isCalDisabled=!0;else if(a&&-1==a.result){var i="";a.msg&&(i=JSON.stringify(a.msg)),r.reportCustomEvent(o.REPORT_EVENT_NAME.EXCEPTION,o.REPORT_EXCEPTION.CALANDER_CLOCK_SET_FAIL+",msg:"+i);var s="由于闹钟被禁用，提醒设置失败，请到设置中开启";r.isiOSDevice()&&(s="由于闹钟被禁用，提醒设置失败，请前往“设置”—“隐私”—“日历”中开启"),M.show({oneLineTextLeft:s,oneButtonText:"我知道了",popClose:function(){}}),t.data.lessSixMinutes=!0}else if(a&&-2==a.result){var i="";a.msg&&(i=JSON.stringify(a.msg)),r.reportCustomEvent(o.REPORT_EVENT_NAME.EXCEPTION,o.REPORT_EXCEPTION.CALANDER_CLOCK_SET_ERROR+",msg:"+i),M.show({oneLineTextLeft:"系统异常，暂时无法为你设置提醒",oneButtonText:"我知道了",popClose:function(){}}),t.data.lessSixMinutes=!0,n=1,e&&e.errorNums&&(n=e.errorNums+1)}R.saveData("calendarClock",{hasRequire:!0,errorNums:n})})}},H.onClickIncomeDemo=function(){tracelog("利益演示");var e=c.getEnvVariable().DATA_CGI_PREFIX+"html/tplus1/"+m.prodCode+"/incomeDemo.pdf";l.openPdf2(e,"利益演示")},H.onClickAsset=function(){},H.onClickAccumulateIncome=function(){},t.onHJViewActive=function(){Q()},t.onHJViewDisActive=function(){d.cancel(t.data.refreshTimer)},t.$on("$destroy",function(){d.cancel(t.data.refreshTimer)}),Q(),tt()}]);app.controller("TPlusOneRuleController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","$ionicScrollDelegate",function(e,a,t,i,o,s,c,n,r,d,m,l,u,h,C,S,v,p,w,f,P,$,g,R,y,b,k,A,H,T,L,G,I,B,D,M){var N=(a.data={},a.func={},function(){O(),"purchase"==C.tab?(a.data.purchaseClass="item on",a.data.redeemClass="item",a.data.showPurchase=!0,a.data.showRedeem=!1):"redeem"==C.tab?(a.data.purchaseClass="item",a.data.redeemClass="item on",a.data.showPurchase=!1,a.data.showRedeem=!0):(a.data.purchaseClass="item on",a.data.redeemClass="item",a.data.showPurchase=!0,a.data.showRedeem=!1),a.data.myContent=M.$getByHandle("myContent")});a.onClassTime=function(e){return e==timeNum?"on":""};var O=function(){var e=r.getEnvVariable().DATA_CGI_PREFIX+"html/tplus1/"+C.prodCode+"/rule.html";n.get(b.trustAsResourceUrl(e)).success(function(e){a.data.sectionHtml=b.trustAsHtml(e)})};a.onClickPurchase=function(){a.data.purchaseClass="item on",a.data.redeemClass="item",a.data.showPurchase=!0,a.data.showRedeem=!1,d(function(){a.data.myContent.resize()},200)},a.onClickRedeem=function(){a.data.purchaseClass="item",a.data.redeemClass="item on",a.data.showPurchase=!1,a.data.showRedeem=!0,d(function(){a.data.myContent.resize()},200)},a.back=function(){k.backPage()},N()}]);app.controller("TPlusOneMoreInfoController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","$ionicScrollDelegate",function(e,t,o,n,a,i,r,c,s,d,l,S,p,v,f,C,u,T,m,P,g,$,I,L,y,A,_,x,b,k,F,H,h,X,w,D){var G=t.data={},M=(t.func={},"xq-con nb px mgt20"),Q="xq-con nb px mgt20 off",U=function(){var e=s.getEnvVariable().DATA_CGI_PREFIX+"html/tplus1/"+f.prodCode+"/more-info.html";c.get(A.trustAsResourceUrl(e)).success(function(e){t.data.sectionHtml=A.trustAsHtml(e)}),t.data.code=f.prodCode,t.data.myContent=D.$getByHandle("myContent"),t.data.introClass=Q,t.data.FAQClass=Q},B=function(){G.titleText="更多详情",G.prodInfo=x.getProdInfo(f.prodCode),G.prodInfo&&(G.prodInfo.prod_type==n.TPLUS1_TPLT.ZAX?G.titleText="信息披露及保险保障":G.prodInfo.prod_type==n.TPLUS1_TPLT.TLX?G.titleText="更多详情":G.prodInfo.prod_type==n.TPLUS1_TPLT.TPDX&&(G.titleText="更多详情"))},O=function(){U(),B()};t.back=function(){_.backPage()},t.onClickFAQ=function(){t.data.FAQClass=t.data.FAQClass==Q?M:Q,t.data.myContent.resize()},t.onClickInfo=function(){t.data.introClass=t.data.introClass==Q?M:Q,t.data.myContent.resize()},O()}]);app.controller("TPlusOneTenThousandIncomeController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService",function(e,t,o,a,i,n,r,c,s,l,u,S,d,g,v,D,m,f,Y,p,$,y,M,h,T,C,P){t.func={},t.incomeHistory=[];var _=v.prodCode,b=n.getDate(),H=n.getDate();H.setDate(b.getDate()-30);var w=n.getYYYYMMDDStringByDate(H),B=n.getYYYYMMDDStringByDate(b),O=!1,k=!0,F=function(e){t.$broadcast("scroll.infiniteScrollComplete");for(var o in e.ret_data){var a={},i=parseFloat(e.ret_data[o].million_income_value),n=parseFloat(e.ret_data[o].income_rate);a.date=o,a.incomeTenThousand=i.toFixed(4),a.incomeRated=n.toFixed(2),t.incomeHistory.push(a)}Object.keys(e.ret_data).length<=0&&(k=!1),t.incomeHistory.sort(function(e,t){return t.date-e.date})},I=function(e){0==e.ret_code&&(k=!1)};o.requestTPlusOneProductHistoryIncomeRate(_,w,B).then(F,I).then(function(){tracelog("首次拉取万份收益返回"),t.$broadcast("scroll.infiniteScrollComplete"),O=!1}),t.func.loadMoreData=function(){O||(b=new Date(H.getTime()),b.setDate(b.getDate()-1),H=new Date(b.getTime()),H.setDate(H.getDate()-30),w=n.getYYYYMMDDStringByDate(H),B=n.getYYYYMMDDStringByDate(b),O=!0,o.requestTPlusOneProductHistoryIncomeRate(_,w,B).then(F,I).then(function(){tracelog("再次拉取万份收益返回"),O=!1,t.$broadcast("scroll.infiniteScrollComplete")}))},t.func.hasMoreData=function(){return k},t.back=function(){P.backPage()}}]);app.controller("TPlusOnePurchaseController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","RecentAccountService","TPlusOneService","$filter","BindBankCardService","HJactionPop","ResetPasswdService","HelpDetailService",function(t,a,e,n,o,c,r,i,d,u,s,p,l,A,f,_,D,T,v,C,m,h,y,P,g,I,N,B,S,L,E,w,k,O,R,U,b,x,Y,F,H,K){var V=a.data={},W=a.func={},j=null,$="btn-c off",M="btn-c",G=function(){V.prodInfo=B.getProdInfo(f.prodCode),J(),ra(),ca();var t={};na(t),ua(),t.flag||q(),W.blurInput(),oa()},J=function(){V.prodInfo.prod_type==n.TPLUS1_TPLT.TLX?(V.isAddrNeeded=!0,V.isUseWorkDay=!1):V.prodInfo.prod_type==n.TPLUS1_TPLT.ZAX?(V.isAddrNeeded=!1,V.isUseWorkDay=!0):V.prodInfo.prod_type==n.TPLUS1_TPLT.TPDX&&(V.isAddrNeeded=!1,V.isUseWorkDay=!0)},q=function(){if(V.isAddrNeeded){a.data.province="选择省",a.data.city="选择市",a.data.district="选择区",X();var t=ta();t||(t=aa()),t||ea()}},X=function(){a.data.provinceList=[];for(var t in gDistrictInfo[0])if(gDistrictInfo[0][t].fullname&&gDistrictInfo[0][t].id){var e={};e.text=gDistrictInfo[0][t].fullname,e.id=gDistrictInfo[0][t].id,a.data.provinceList.push(e)}},Z=function(t){a.data.cityList=[];for(var e in gDistrictInfo[1])if(gDistrictInfo[1][e].fullname&&gDistrictInfo[1][e].id&&gDistrictInfo[1][e].id.substr(0,2)==t.substr(0,2)){var n={};n.text=gDistrictInfo[1][e].fullname,n.id=gDistrictInfo[1][e].id,a.data.cityList.push(n)}},Q=function(t){if(a.data.districtList=[],"北京市"==a.data.province||"上海市"==a.data.province||"天津市"==a.data.province||"重庆市"==a.data.province){for(var e in gDistrictInfo[1])if(gDistrictInfo[1][e].fullname&&gDistrictInfo[1][e].id&&gDistrictInfo[1][e].id.substr(0,2)==t.substr(0,2)){var n={};n.text=gDistrictInfo[1][e].fullname,n.id=gDistrictInfo[1][e].id,a.data.districtList.push(n)}}else for(var e in gDistrictInfo[2])if(gDistrictInfo[2][e].fullname&&gDistrictInfo[2][e].id&&gDistrictInfo[2][e].id.substr(0,4)==t.substr(0,4)){var n={};n.text=gDistrictInfo[2][e].fullname,n.id=gDistrictInfo[2][e].id,a.data.districtList.push(n)}},z=function(){var t={};t.email=a.data.email,t.province=a.data.province,t.city=a.data.city,t.district=a.data.district,t.addressDetail=a.data.addressDetail;var e={};e.region=a.data.region,g.saveDataByUser("universalUserInfo",t),g.saveDataByUser("universalUserInfoForProd_"+f.prodCode,e)},ta=function(){var t=g.loadDataByUser("universalUserInfo");if(!t)return!1;if(t.email&&(a.data.email=t.email),t.province)if(a.data.province=t.province,u(function(){a.setProvinceSelected(t.province)},500),"北京市"==t.province||"上海市"==t.province||"天津市"==t.province||"重庆市"==t.province){a.data.city="";for(var e in a.data.provinceList)a.data.provinceList[e].text==t.province&&Q(a.data.provinceList[e].id)}else for(var e in a.data.provinceList)a.data.provinceList[e].text==t.province&&Z(a.data.provinceList[e].id);if(t.city){a.data.city=t.city,u(function(){a.setCitySelected(t.city)},500);for(var e in a.data.cityList)a.data.cityList[e].text==t.city&&Q(a.data.cityList[e].id)}t.district&&(a.data.district=t.district,u(function(){a.setDistrictSelected(t.district)},500)),t.addressDetail&&(a.data.addressDetail=t.addressDetail);var n=g.loadDataByUser("universalUserInfoForProd_"+f.prodCode);if(n&&n.region)for(var e in a.data.regionList)n.region==a.data.regionList[e].text&&(a.data.region=n.region,u(function(){a.setRegionSelected(n.region)},500));return!0},aa=function(){e.requestUserAddress(f.prodCode).then(function(t){if(tracelog("查询服务器缓存地址成功"),!t||!t.ret_data)return!1;if(t.ret_data.email&&(a.data.email=t.ret_data.email),t.ret_data.province)if(a.data.province=t.ret_data.province,u(function(){a.setProvinceSelected(t.ret_data.province)},500),"北京市"==t.ret_data.province||"上海市"==t.ret_data.province||"天津市"==t.ret_data.province||"重庆市"==t.ret_data.province){a.data.city="";for(var e in a.data.provinceList)a.data.provinceList[e].text==t.ret_data.province&&Q(a.data.provinceList[e].id)}else for(var e in a.data.provinceList)a.data.provinceList[e].text==t.ret_data.province&&Z(a.data.provinceList[e].id);if(t.ret_data.city){a.data.city=t.ret_data.city,u(function(){a.setCitySelected(t.ret_data.city)},500);for(var e in a.data.cityList)a.data.cityList[e].text==t.ret_data.city&&Q(a.data.cityList[e].id)}if(t.ret_data.region&&(a.data.district=t.ret_data.region,u(function(){a.setDistrictSelected(t.ret_data.region)},500)),t.ret_data.detail_address&&(a.data.addressDetail=t.ret_data.detail_address),t.ret_data.policy_address)for(var e in a.data.regionList)t.ret_data.policy_address==a.data.regionList[e].text&&(a.data.region=t.ret_data.policy_address,u(function(){a.setRegionSelected(t.ret_data.policy_address)},500));return!0},function(){return tracelog("查询服务器缓存地址失败"),!1})},ea=function(){a.data.mapDistrictUrl="http://apis.map.qq.com/ws/location/v1/ip?key=Q7YBZ-X2ZH4-PAHUS-XQM36-63P7V-G5FJF",i.get(a.data.mapDistrictUrl).success(function(t){if(0==t.status){if(tracelog("查询ip地域信息成功"),t.result&&t.result.ad_info){if("中国"!=t.result.ad_info.nation)return;if(t.result.ad_info.province)if("北京市"==t.result.ad_info.province||"上海市"==t.result.ad_info.province||"天津市"==t.result.ad_info.province||"重庆市"==t.result.ad_info.province){a.data.province=t.result.ad_info.province,u(function(){a.setProvinceSelected(t.result.ad_info.province)},100),a.data.city="";for(var e in a.data.provinceList)a.data.provinceList[e].text==t.result.ad_info.province&&Q(a.data.provinceList[e].id)}else{for(var e in a.data.provinceList)a.data.provinceList[e].text==t.result.ad_info.province&&(a.data.province=t.result.ad_info.province,u(function(){a.setProvinceSelected(t.result.ad_info.province)},100),Z(a.data.provinceList[e].id));if(a.data.province!=t.result.ad_info.province)return}if(t.result.ad_info.city)for(var e in a.data.cityList)a.data.cityList[e].text==t.result.ad_info.city&&(a.data.city=t.result.ad_info.city,u(function(){a.setCitySelected(t.result.ad_info.city)},100),Q(a.data.cityList[e].id))}}else tracelog("查询ip地域信息失败")})},na=function(t){t.flag=!1;var e=b.loadDataForPurchase();e&&(t.flag=!0,a.data=V=e)},oa=function(){var t={};t.product_code=f.prodCode,e.requestBuyFinacialLimit(t).then(function(t){t&&t.ret_data&&(isNaN(parseInt(t.ret_data.firstbuy_flag))||0===parseInt(t.ret_data.firstbuy_flag)&&(V.minAmount=parseFloat(V.prodInfo.p_append_purchase_min_amount),isNaN(V.minAmount)&&(V.minAmount=1)))},function(t){tracelog("查询产品购买限额和是否首次购买标记失败, 原因："+t.ret_msg)})},ca=function(){V.minAmount=parseFloat(V.prodInfo.p_start_purchase_min_amount),V.incAmount=parseFloat(V.prodInfo.p_purchase_step);var t=N.getData();t&&t.isAppendBuy&&(V.isAppendBuy=t.isAppendBuy,V.minAmount=parseFloat(V.prodInfo.p_append_purchase_min_amount),isNaN(V.minAmount)&&(V.minAmount=1)),isNaN(V.minAmount)&&(V.minAmount=1),isNaN(V.incAmount)&&(V.incAmount=1);var a=o.getTPlusOneIncomeDate(V.prodInfo,V.prodInfo.prod_type);V.incomeGenDate=x("formatDateObjToCNStringV2")(a.genIncomeDate),V.incomeViewDate=x("formatDateObjToCNStringV2")(a.viewIncomeDate),V.ButtonClass=$,L.hide(),V.isPwdShow=!1,V.isPwdAutoShow=!1,V.sigOnPwdCommit=0,V.isAmountInputReady=!1,V.mainCard={};var e=s.getCacheInfo("personalInfo");null!=e&&e.webank_card_no&&(V.mainCard.number=e.webank_card_no)};W.onClickAgreeCheckbox=function(){W.blurInput()};var ra=function(){V.isAgreed=!1,V.agreementDesc="服务协议及风险提示",V.agreementCode=f.prodCode},ia=function(){if(da(),j){if(j==n.ACCOUNT_TYPE.CURRENT_PLUS||j==n.ACCOUNT_TYPE.WEBANK_CARD)return j;var t=o.getPayableCardList(),a=t[0];for(var e in t)if(t[e].other_account==j){a=t[e];break}return a}return null},da=function(){j=U.loadRecentlyUsedBankCard(n.ACCOUT_BIZ_TYPE.PAYMENT,n.ACCOUT_SCENE_TYPE.TPLUSONE)},ua=function(){var t=s.getCacheInfo("wealthNew"),a=o.getPayableCardList(),e=o.parseRawWealthData_V3(t);V.AccountData={},V.AccountData.webankAccount={},V.AccountData.webankAccount.priority=2,V.AccountData.webankAccount.amount=e.BankAmount,V.AccountData.webankAccount.isAvaliable=!0,V.AccountData.currentPlus={},V.AccountData.currentPlus.amount=e.HJAmount,V.AccountData.currentPlus.priority=1,V.AccountData.currentPlus.isAvaliable=!0,V.AccountData.ctrlData={},V.AccountData.ctrlData.title="选择付款账户",V.AccountData.ctrlData.canBindNewCard=!0,V.AccountData.otherBankAccount={},V.AccountData.otherBankAccount.cardInfo={},V.AccountData.disabledOtherBankAccount=o.getUnableToPayCardList();var c=o.isTransVerificationAccount();if(c&&(V.AccountData.ctrlData.canBindNewCard=!1),a&&a.length>0&&!c){V.AccountData.otherBankAccount.otherAccountList=a;var r=ia();r?r==n.ACCOUNT_TYPE.CURRENT_PLUS||r==n.ACCOUNT_TYPE.WEBANK_CARD?V.AccountData.ctrlData.accountType=r:(V.AccountData.ctrlData.accountType=n.ACCOUNT_TYPE.OTHER_BANK_CARD,V.AccountData.otherBankAccount.cardInfo.bankBinCode=r.other_bank_bin_code,V.AccountData.otherBankAccount.cardInfo.userName=r.other_name,V.AccountData.otherBankAccount.cardInfo.cardNo=r.other_account,V.AccountData.otherBankAccount.cardInfo.cardTypeCode=r.other_card_type_code,V.AccountData.otherBankAccount.cardInfo.cardType=r.other_card_type,V.AccountData.otherBankAccount.cardInfo.bankName=r.other_bank_name):V.AccountData.ctrlData.accountType=n.ACCOUNT_TYPE.INVALID_TYPE}else V.AccountData.ctrlData.accountType=n.ACCOUNT_TYPE.CURRENT_PLUS};W.onSelectPayWay=function(){V.isPwdShow?(V.isPwdAutoShow=!0,V.isPwdShow=!1):V.isPwdAutoShow=!1,V.showAccountSelector()},W.onAccountSelected=function(){V.isPwdAutoShow&&(u(Aa,200),V.isPwdAutoShow=!1),_a(),W.blurInput()},W.isWeBankAccount=function(){return V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.WEBANK_CARD},W.isCurrentPlus=function(){return V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.CURRENT_PLUS},W.isOtherBank=function(){return V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.OTHER_BANK_CARD},W.focusInput=function(){V.showInputAct=!1,V.showNeedBindCard=!1};var sa=function(){if(""==V.amount||void 0==V.amount)return!1;if(!c.isValidTransferAmount(V.amount))return V.showInputAmountTips=!0,V.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT,!1;if(V.prodInfo.p_single_purchase_max_amount>0&&V.amount>V.prodInfo.p_single_purchase_max_amount)return V.showInputAmountTips=!0,V.inputAmountTipsContent="单次最多可买"+x("formatMoneyShort")(V.prodInfo.p_single_purchase_max_amount)+"元，您的输入金额已超上限",!1;if(V.prodInfo.p_day_purchase_max_amount>0&&V.amount>V.prodInfo.p_day_purchase_max_amount)return V.showInputAmountTips=!0,V.inputAmountTipsContent="单次最多可买"+x("formatMoneyShort")(V.prodInfo.p_day_purchase_max_amount)+"元，您的输入金额已超上限",!1;if(V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(V.amount)>V.AccountData.currentPlus.amount&&(V.AccountData.ctrlData.accountType=n.ACCOUNT_TYPE.WEBANK_CARD),V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(V.amount)>V.AccountData.webankAccount.amount){if(!(V.AccountData.otherBankAccount.otherAccountList&&V.AccountData.otherBankAccount.otherAccountList.length>0))return V.showNeedBindCard=!0,!1;V.AccountData.ctrlData.accountType=n.ACCOUNT_TYPE.OTHER_BANK_CARD,V.AccountData.otherBankAccount.cardInfo.bankBinCode=V.AccountData.otherBankAccount.otherAccountList[0].other_bank_bin_code,V.AccountData.otherBankAccount.cardInfo.userName=V.AccountData.otherBankAccount.otherAccountList[0].other_name,V.AccountData.otherBankAccount.cardInfo.cardNo=V.AccountData.otherBankAccount.otherAccountList[0].other_account,V.AccountData.otherBankAccount.cardInfo.cardTypeCode=V.AccountData.otherBankAccount.otherAccountList[0].other_card_type_code,V.AccountData.otherBankAccount.cardInfo.cardType=V.AccountData.otherBankAccount.otherAccountList[0].other_card_type,V.AccountData.otherBankAccount.cardInfo.bankName=V.AccountData.otherBankAccount.otherAccountList[0].other_bank_name}return V.showInputAct=!0,V.showInputAmountTips=!1,V.showNeedBindCard=!1,!0},pa=function(){if(V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=gBankLimit[V.AccountData.otherBankAccount.cardInfo.bankBinCode];if(!t)return!1;if(parseFloat(V.amount)>parseFloat(t.perOne)){var a="超过银行卡限额，"+V.AccountData.otherBankAccount.cardInfo.bankName+V.AccountData.otherBankAccount.cardInfo.cardType+"单笔"+t.perOne;return parseFloat(t.perDay)>0&&(a+="，单日"+t.perDay),F.show({oneLineTextLeft:a,twoButtonText1:"转账指引",twoButtonText2:"关闭",popClose:function(t){1==t&&(b.saveDataForPurchase(V),K.goPage("0"))}}),!0}}return!1},la=function(){if(V.ButtonClass=$,V.isAmountInputReady=!1,V.showInputAct=!1,V.isAmountInputReady=sa(),V.isAmountInputReady&&V.isAgreed&&V.AccountData.ctrlData.accountType!=n.ACCOUNT_TYPE.INVALID_TYPE){if(V.isAddrNeeded){if(!c.isValidEmail(a.data.email))return;if(!a.data.province||"选择省"==a.data.province||!a.data.addressDetail||"选择市"==a.data.city||"选择区"==a.data.district)return;if(a.data.showAddressTips||a.data.showEmailTips)return}V.ButtonClass=M}};a.focusEmail=function(){a.data.showEmailTips=!1},a.blurEmail=function(){c.isValidEmail(a.data.email)||(a.data.showEmailTips=!0),la()},W.onInputChanged=function(){la()},W.blurInput=function(){if(la(),V.isAmountInputReady){if(V.amount<V.minAmount)return V.showInputAmountTips=!0,V.inputAmountTipsContent="最低购买金额为"+V.minAmount+"元",V.ButtonClass=$,V.isAmountInputReady=!1,void(V.showInputAct=!1);var t=V.amount;V.amount=c.getAmountForRule(V.amount,V.minAmount,V.incAmount),t!=V.amount&&c.makeToast(V.minAmount+"元起购，"+V.incAmount+"元递增，系统已自动为您调整金额","short"),la()}},W.onClickRuleDetail=function(){b.saveDataForPurchase(V),N.go("/TPlusOneRule/"+f.prodCode+"/purchase")},W.back=function(){b.clearDataForPurchase(),N.backPage()},W.bindCard=function(){b.saveDataForPurchase(V),Y.goToBindCard()},a.onSelectProvince=function(t){"北京市"==t.text||"上海市"==t.text||"天津市"==t.text||"重庆市"==t.text?(a.data.province=t.text,a.data.city="",a.data.district="选择区",Q(t.id)):(a.data.province=t.text,a.data.city="选择市",a.data.district="选择区",Z(t.id)),W.blurInput()},W.onClickSelectProvince=function(){a.showProvinceSelect()},W.onClickSelectCity=function(){"北京市"!=a.data.province&&"上海市"!=a.data.province&&"天津市"!=a.data.province&&"重庆市"!=a.data.province&&"选择省"!=a.data.province&&a.showCitySelect()},a.onSelectCity=function(t){Q(t.id),a.data.city=t.text,a.data.district="选择区"},a.onSelectDistrict=function(t){a.data.district=t.text,W.blurInput()},W.onClickSelectDistrict=function(){"选择市"!=a.data.city&&a.showDistrictSelect()},W.onClickPurchase=function(){return"btn-c off"==V.ButtonClass?void(V.isAgreed?V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.INVALID_TYPE&&c.makeToast(STRING_TABLE.PLEASE_CHECK_SELECT_PAYACCOUNT,"short"):c.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short")):void(sa()&&(pa()||(z(),Aa())))},W.focusAddress=function(){a.data.showAddressTips=!1,c.isiOSDevice()&&(a.data.addHigh=!0)},W.blurAddress=function(){if(a.data.addHigh=!1,a.data.addressDetail&&""!=a.data.addressDetail){var t=c.getStrLength(a.data.addressDetail);(12>t||t==a.data.addressDetail.length)&&(a.data.showAddressTips=!0),la()}},a.$watch("data.sigOnPwdCommit",function(t,a){t!==a&&(V.isPwdShow=!1,ha())});var Aa=function(){V.pwdSubTitle="购买"+V.prodInfo.prod_name;var t;V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.WEBANK_CARD?t="使用微众卡支付":V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.CURRENT_PLUS?t="使用活期+支付":(t="使用"+V.AccountData.otherBankAccount.cardInfo.bankName,t+=V.AccountData.otherBankAccount.cardInfo.cardType,t+=c.abridgeAccountNumber(V.AccountData.otherBankAccount.cardInfo.cardNo)+"支付"),V.payWayDesc=t,V.pwdTransDesc=parseFloat(V.amount).toFixed(2)+"元",V.isPwdShow=!0},fa=function(t){return F.show({oneLineTextLeft:t,oneButtonText:"知道了",popClose:function(){}}),!0},_a=function(){var t=V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.OTHER_BANK_CARD;if(t&&t&&o.isBankCardInBatchProcessing(V.AccountData.otherBankAccount.cardInfo.bankBinCode)){var a=o.getBankBatchProcessingMsg(V.AccountData.otherBankAccount.cardInfo.bankBinCode,V.AccountData.otherBankAccount.cardInfo.bankName);fa(a)}},Da=function(t,a,e){o.checkProcessingState(t,a,e).then(function(t){t.policyNo&&(V.resultObj.policyNo=t.policyNo),V.resultObj.result=t.retCode,V.resultObj.failReason=t.retMsg,L.hide(),b.clearDataForPurchase(),c.clearCurrentViewCache(),r.path("/TPlusOnePurchaseResult").search(V.resultObj)})},Ta=function(t){o.isProcessingState(t.ret_code)?Da("",t.ret_data.trans_serno,f.prodCode):(V.resultObj.result=t.ret_code,L.hide(),b.clearDataForPurchase(),c.clearCurrentViewCache(),r.path("/TPlusOnePurchaseResult").search(V.resultObj),t.ret_data&&t.ret_data.policy_no&&(V.resultObj.policyNo=t.ret_data.policy_no)),V.resultObj.isAppendBuy=V.isAppendBuy;var a=null;V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=V.AccountData.otherBankAccount.cardInfo.cardNo),b.saveRecentlyUsedAccountForPurchase(V.AccountData.ctrlData.accountType,a)},va=function(t){V.resultObj.result=t.ret_code,V.resultObj.failReason=t.ret_msg,L.hide(),o.isRetCodePwd(t.ret_code)?F.show(o.isRetCodePwdRetry(t.ret_code)?{oneLineTextLeft:t.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(t){1==t?Aa():2==t&&(b.saveDataForPurchase(V),H.goPage())}}:{oneLineTextLeft:t.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(t){1==t||2==t&&(b.saveDataForPurchase(V),H.goPage())}}):(c.clearCurrentViewCache(),b.clearDataForPurchase(),r.path("/TPlusOnePurchaseResult").search(V.resultObj))},Ca=function(){var t={};V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.WEBANK_CARD?t.pay_flag=n.ACCOUNT_TYPE.WEBANK_CARD:V.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.CURRENT_PLUS?(t.pay_flag=n.ACCOUNT_TYPE.CURRENT_PLUS,t.pay_product_code="001234"):(t.pay_flag=n.ACCOUNT_TYPE.OTHER_BANK_CARD,t.card_no=V.AccountData.otherBankAccount.cardInfo.cardNo),t.transaction_amount=V.amount,t.user_pwd=V.vm.formData.confirmPassword.RSA,t.product_code=V.prodInfo.prod_code,t.redeem_type="01",t.is_capricious="0",e.requestStockPurchase(t).then(Ta,va)},ma=function(){var t={};a.data.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.WEBANK_CARD?t.pay_flag=n.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==n.ACCOUNT_TYPE.CURRENT_PLUS?(t.pay_flag=n.ACCOUNT_TYPE.CURRENT_PLUS,t.pay_product_code="001234"):(t.pay_flag=n.ACCOUNT_TYPE.OTHER_BANK_CARD,t.card_no=a.data.AccountData.otherBankAccount.cardInfo.cardNo),t.user_pwd=V.vm.formData.confirmPassword.RSA,t.transaction_amount=a.data.amount,t.product_code=f.prodCode,t.redeem_type="02",t.is_capricious="1",a.data.email&&(t.email=a.data.email),"北京市"==a.data.province||"上海市"==a.data.province||"天津市"==a.data.province||"重庆市"==a.data.province?(t.province=a.data.province,t.city=a.data.province):(t.province=a.data.province,t.city=a.data.city),a.data.district&&a.data.addressDetail&&(t.address=a.data.district+a.data.addressDetail),a.data.district&&(t.region=a.data.district),a.data.addressDetail&&(t.detail_address=a.data.addressDetail),V.resultObj.email=a.data.email,e.requestBuyTPlus1WithTlxTemplate(t).then(Ta,va)},ha=function(){V.resultObj={},V.resultObj.amount=parseFloat(V.amount).toFixed(2),V.resultObj.prodCode=f.prodCode,V.resultObj.email=V.email,L.show(),V.isAddrNeeded?ma():Ca()};G(),a.onHJViewActive=function(){G()},a.onHJViewDisActive=function(){}}]);app.controller("TPlusOnePurchaseResultController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","TransRecordService","TPlusOnePurchaseResultService","TPlusOneService",function(e,o,c,t,r,i,n,s,a,u,l,S,v,p,f,d,h,P,C,T,w,I,g,m,b,O,R,_,$,k,y,L,G,x,j,D,A,B){var E=o.data={},F=o.func={},N=function(){E.resultObj=n.search(),E.prodInfo=_.getProdInfo(E.resultObj.prodCode),E.result=E.resultObj.result;var e=B.loadDataForPurchaseResult();e&&(o.data=E=e),U(),H(),X(),M()},U=function(){E.prodInfo.prod_type==t.TPLUS1_TPLT.ZAX?(E.isReviewInfoShown=!1,E.succText="购买成功"):E.prodInfo.prod_type==t.TPLUS1_TPLT.TLX?(E.isReviewInfoShown=!E.resultObj.isAppendBuy,E.succText="购买成功"):E.prodInfo.prod_type==t.TPLUS1_TPLT.TPDX&&(E.isReviewInfoShown=!1,E.succText="购买申请已受理")},H=function(){E.result===t.CGI_RET.CGI_PROCESSING||E.result===t.CGI_RET.CGI_PROCESSING_2?(E.isSuccShow=!1,E.isProcessing=!0,E.isFailedShow=!1):E.result==t.CGI_RET.CGI_SUCCESS||E.result==t.CGI_RET.CGI_SUCCESS_2?(E.isSuccShow=!0,E.isProcessing=!1,E.isFailedShow=!1):(E.isSuccShow=!1,E.isFailedShow=!0,E.isProcessing=!1,E.resultMsg=E.resultObj.failReason),E.checkBoxClassStr="checkbox-wrap"},X=function(){var e=r.getTPlusOneIncomeDate(E.prodInfo,E.prodInfo.prod_type);E.genIncomeDate=e.genIncomeDate,E.viewIncomeDate=e.viewIncomeDate,E.today=i.getDate()},M=function(){c.requestUserWealth().then(function(){},function(){}),o.data.isSuccShow&&r.setFinancialProductBuyTime(E.resultObj.prodCode,i.getDate().valueOf())},q=function(){if(!E.isReviewInfoShown||!E.isSuccShow)return!1;if("checkbox-wrap off"!=E.checkBoxClassStr){var e={};e.online_interview_flag=1,e.prod_code=E.resultObj.prodCode,e.policy_no=E.resultObj.policyNo,c.requestInsuranceReview(e).then(function(){tracelog("设置回访标志成功")},function(){tracelog("设置回访标志失败")})}};F.onClickFinish=function(){B.clearDataForPurchaseResult(),q(),A.backPage(2)},F.onClickCheckBox=function(){E.checkBoxClassStr="checkbox-wrap"==E.checkBoxClassStr?"checkbox-wrap off":"checkbox-wrap"},F.onClickAgreement=function(){B.saveDataForPurchaseResult(o.data),R.go("/TPlusOneReview/"+E.resultObj.policyNo+"/"+E.resultObj.prodCode)},N()}]),app.controller("TPlusOneReviewController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","$sce","LocationService",function(e,o,c,t,r,i,n,s,a,u,l,S,v,p,f,d,h,P){o.obj={},o.obj.policyNo=f.policyNo;var C=function(){var e=a.getEnvVariable().DATA_CGI_PREFIX+"html/tplus1/"+f.prodCode+"/review.html";s.get(h.trustAsResourceUrl(e)).success(function(e){o.obj.sectionHtml=h.trustAsHtml(e)})};o.func={},o.func.back=function(){P.backPage()},C()}]),app.factory("TPlusOnePurchaseResultService",["$location","commonPath",function(e,o){return $.extend({},o,{locationHash:"/TPlusOnePurchaseResult"})}]);app.controller("TPlusOneRedeemController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","TPlusOneService","HJactionPop","$filter","ResetPasswdService",function(a,t,e,o,n,r,d,u,c,s,i,l,p,m,_,f,T,A,D,C,P,S,R,h,v,b,w,I,g,O,F,y,N,W,L,U,k,E,B){var j=t.data={},$=t.func={},x="btn-c off",Y="btn-c",M=function(){j.prodInfo.prod_type==o.TPLUS1_TPLT.ZAX?j.isUseWorkDay=!0:j.prodInfo.prod_type==o.TPLUS1_TPLT.TLX?j.isUseWorkDay=!1:j.prodInfo.prod_type==o.TPLUS1_TPLT.TPDX&&(j.isUseWorkDay=!0)},H=function(){t.data.prodInfo=I.getProdInfo(_.prodCode),t.data.amount="",t.data.showInputAmountTips=!1,t.data.redeemButtonClass=x,M(),J(),V(),G()},G=function(){var a=U.loadDataForeRedeem();a&&(t.data=j=a)},V=function(){j.productWealthData={};var a=i.getCacheInfo("wealthNew");t.data.productWealthData=n.parseRawWealthDataForTPlusOne(a,_.prodCode),j.maxRedeemDesc="最多可赎回"+j.productWealthData.redeemableAmount+"元",X()},X=function(){if(j.isUseWorkDay){var a=parseInt(j.prodInfo.redeem_to_account_date_num);isNaN(a)&&(a=1);var t=r.getDate(),e=null;e=r.getNextWorkDay(r.isWorkDay(t)?t.getHours()<15?a:a+1:a+1),j.descText1="现在赎回，预计"+E("formatDateObjToCNStringV2")(e)+"到账"}else j.descText1="T日赎回，T+1日到账，节假日顺延，T为工作日"},J=function(){t.data.hideAmount="300",t.data.AccountData={},t.data.AccountData.webankAccount={},t.data.AccountData.webankAccount.priority=2,t.data.AccountData.webankAccount.isAvaliable=!0,t.data.AccountData.currentPlus={},t.data.AccountData.currentPlus.priority=1,t.data.AccountData.currentPlus.isAvaliable=!0,t.data.AccountData.ctrlData={},t.data.AccountData.ctrlData.title="选择收款账户",t.data.AccountData.ctrlData.accountType=o.ACCOUNT_TYPE.CURRENT_PLUS},K=function(){t.data.pwdSubTitle="赎回"+t.data.prodInfo.prod_name,t.data.payWayDesc="",t.data.pwdTransDesc=parseFloat(t.data.amount).toFixed(2)+"元",t.data.isPwdShow=!0},q=function(){if(t.data.redeemButtonClass!=x){O.show();var a={};if(a.pay_flag=3,a.transaction_amount=t.data.amount,a.user_pwd=t.data.vm.formData.confirmPassword.RSA,a.product_code=t.data.prodInfo.prod_code,a.is_refund_all=0,parseFloat(j.amount)==parseFloat(j.productWealthData.redeemableAmount)&&(a.is_refund_all=1),t.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD)a.pay_flag=o.ACCOUNT_TYPE.WEBANK_CARD;else{a.pay_flag=o.ACCOUNT_TYPE.CURRENT_PLUS,a.pay_product_code="001234";var r=i.getCacheInfo("personalInfo");null!=r&&(a.card_no=r.webank_card_no)}t.data.resultObj={},t.data.resultObj.amount=t.data.amount,e.requestStockRedeem(a).then(function(e){n.isProcessingState(e.ret_code)?Q(o.ORDER_QUERY_TYPE.TPLUS_ONE_REDEEM,e.ret_data.trans_serno,a.product_code):(t.data.resultObj.result=e.ret_code,t.data.resultObj.onSaleCode=t.data.prodInfo.prod_code,O.hide(),U.clearDataForRedeem(),d.path("/TPlusOneRedeemResult").search(t.data.resultObj))},function(a){t.data.resultObj.result=a.ret_code,t.data.resultObj.failReason=a.ret_msg,t.data.resultObj.onSaleCode=t.data.prodInfo.prod_code,O.hide(),n.isRetCodePwd(a.ret_code)?k.show(n.isRetCodePwdRetry(a.ret_code)?{oneLineTextLeft:a.ret_msg,twoButtonText1:"重试",twoButtonText2:"忘记密码",popClose:function(a){1==a?K():2==a&&(U.saveDataForRedeem(j),B.goPage())}}:{oneLineTextLeft:a.ret_msg,twoButtonText1:"取消",twoButtonText2:"忘记密码",popClose:function(a){1==a||2==a&&(U.saveDataForRedeem(j),B.goPage())}}):(U.clearDataForRedeem(),d.path("/TPlusOneRedeemResult").search(t.data.resultObj))})}},Q=function(a,e,o){n.checkProcessingState(a,e,o).then(function(a){t.data.resultObj.result=a.retCode,t.data.resultObj.failReason=a.retMsg,t.data.resultObj.onSaleCode=t.data.prodInfo.on_sale_code,O.hide(),d.path("/TPlusOneRedeemResult").search(t.data.resultObj)})};$.focusInput=function(){t.data.showInputAmountTips=!1},$.blurInput=function(){if(t.data.redeemButtonClass=x,t.data.showInputAmountTips=!1,""!==t.data.amount){if(parseFloat(t.data.amount)<parseFloat(t.data.prodInfo.p_single_refund_min_amount)&&parseFloat(t.data.amount)!=parseFloat(t.data.productWealthData.redeemableAmount))return t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent="赎回金额"+t.data.prodInfo.p_single_refund_min_amount+"元起");if(parseFloat(t.data.amount)!=parseFloat(t.data.productWealthData.redeemableAmount)){var a=t.data.amount,e=.01;t.data.prodInfo.p_refund_step&&(e=t.data.prodInfo.p_refund_step),t.data.amount=r.getAmountForRule(t.data.amount,t.data.prodInfo.p_single_refund_min_amount,e),a!=t.data.amount&&r.makeToast("金额必须为"+t.data.prodInfo.p_refund_step+"的整数倍，已自动为您调整","short"),parseFloat(t.data.productWealthData.redeemableAmount)-parseFloat(t.data.amount)<parseFloat(t.data.prodInfo.p_remain_min_amount)&&(t.data.amount=parseFloat(t.data.productWealthData.redeemableAmount))}t.data.amount=parseFloat(parseFloat(t.data.amount).toFixed(2)),t.data.redeemButtonClass=Y}},$.onClickRedeemAll=function(){t.data.amount=parseFloat(t.data.productWealthData.redeemableAmount),$.blurInput()},$.back=function(){U.clearDataForRedeem(),w.backPage()},$.onClickRules=function(){$.blurInput(),U.saveDataForRedeem(j),w.go("/TPlusOneRule/"+_.prodCode+"/redeem")},$.onSelectPayWay=function(){t.showAccountSelector()},$.isWeBankAccount=function(){return t.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.WEBANK_CARD},$.isCurrentPlus=function(){return t.data.AccountData.ctrlData.accountType==o.ACCOUNT_TYPE.CURRENT_PLUS},$.onClickRedeem=function(){return r.isValidTransferAmount(t.data.amount)?void(t.data.redeemButtonClass!=x&&K()):(t.data.showInputAmountTips=!0,void(t.data.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT))},t.$watch("data.sigOnPwdCommit",function(a,e){a!==e&&(t.data.isPwdShow=!1,q())}),H()}]);app.controller("TPlusOneRedeemResultController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","dataService","WebankCardService","MonetaryService","$ionicViewSwitcher","FinancialRecommendService","BaseConfigService","$ionicHistory","localStorage","$sce","LocationService","ProdInfoService","$MD5","HJactionLoading","JumpToModuleService","SecurityService","CGIStatisticService","PopupService","XGService","TPlusOneRedeemResultService",function(e,t,a,o,r,i,n,c,d,s,u,l,S,v,f,p,m,T,C,P,O,_,y,$,g,I,R,b,h,L,j,w,k,D,G,H){var U=t.data={},A=t.func={},N=function(){a.requestUserWealth().then(function(){},function(){})},W=function(){U.prodInfo.prod_type==o.TPLUS1_TPLT.TLX?(U.isAddrNeeded=!0,U.isUseWorkDay=!1):(U.isAddrNeeded=!1,U.isUseWorkDay=!0)},E=function(){if(N(),t.data.resultObj=n.search(),t.data.resultObj.amount=parseFloat(t.data.resultObj.amount).toFixed(2),t.data.result=t.data.resultObj.result,t.data.prodInfo=b.getProdInfo(t.data.resultObj.onSaleCode),W(),t.data.resultObj.result==o.CGI_RET.CGI_SUCCESS||t.data.resultObj.result==o.CGI_RET.CGI_SUCCESS_2){t.data.isSuccShow=!0,t.data.today=i.getDate();var e=parseInt(t.data.prodInfo.redeem_to_account_date_num);U.prodInfo.prod_type==o.TPLUS1_TPLT.TLX||t.data.today.getHours()>=15&&(e+=1),t.data.redeemDay=i.getNextWorkDay(e,t.data.today)}else t.data.isSuccShow=!1,t.data.resultMsg=t.data.resultObj.failReason};A.onClickFinish=function(){H.backPage(2)},E(),t.onHJViewActive=function(){E()},t.onHJViewDisActive=function(){}}]),app.factory("TPlusOneRedeemResultService",["$location","commonPath",function(e,t){return $.extend({},t,{locationHash:"/TPlusOneRedeemResult"})}]);app.controller("TPlusOneAgeUnMatchController",["$scope","$location","GLOBAL_CONSTANT","cgiService","utils","$stateParams","ProdInfoService","LocationService","essential",function(o,n,a,e,i,c,t,r,l){o.data={};var d=function(){o.data.prodInfo=t.getProdInfo(c.prodCode)};o.onClickOK=function(){r.go(l.isFinancialHomeGray()?"financialHome":"financialRecommend")},d()}]);app.controller("MonetaryMyProductDetailsController",["$scope","$location","GLOBAL_CONSTANT","cgiService","essential","webankCommonService","utils","$stateParams","cache","MonetaryService","$timeout","TransferOutService","TransferInService","TransRecordService","$ionicScrollDelegate","IncomeHistoryService","LoginService","RegisterService","LocationService","TransferOutServiceV2","ProdInfoService","localStorage",function(e,t,n,o,a,r,i,c,s,l,u,h,d,m,p,g,f,_,T,C,I,y){var S=e.data={},R=e.func={},v="001234",O=null,D=null;S.prodInfo=I.getProdInfo(v),S.incomeRate=parseFloat(S.prodInfo.income_rate).toFixed(3),S.incomeTenThousand=parseFloat(S.prodInfo.income_per_ten_thouthand).toFixed(4),S.prodName=S.prodInfo.prod_name,S.ruleDesc=S.prodInfo.trading_rules,S.showIncomeRate=!0,S.historyIncomeInfo=[],S.historyIncomeInfoAll=[],S.incomeRateCls="item on",S.incomeCls="item";var A=p.$getByHandle("myContent"),P=7;e.data.monthStr="近7日年化收益率",e.onClickTime=function(t){P!=t&&(7==t?e.data.monthStr="近7日年化收益率":30==t?e.data.monthStr="近7日年化收益率":60==t&&(e.data.monthStr="近7日年化收益率"),P=t,b())},e.onClassTime=function(e){return e==P?"on":""};var k={chart:{type:"area",pinchType:"",zoomType:"",marginTop:15},navigator:{enabled:!1},credits:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},series:[{name:"7日年化收益",data:null,lineWidth:1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(.6).get("rgba")],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]}}],yAxis:{gridLineWidth:.5,gridLineColor:"#E9ECEF",labels:{format:"{value:point.y:.2f}%",y:4},lineWidth:0,opposite:!1,tickmarkPlacement:"on",showLastLabel:!0},xAxis:{type:"datetime",lineWidth:0,ordinal:!0,labels:{format:"{value:%m-%d}",align:"center",style:{overflow:"visible",textOverflow:"none"}},tickLength:5,showLastLabel:!0},tooltip:{valueDecimals:2,shared:!0,valueSuffix:"",enabled:!1},plotOptions:{area:{fillOpacity:.5,enableMouseTracking:!1,pointPlacement:"between",lineWidth:1,allowPointSelect:!1,marker:{enabled:!1}}}},b=function(){var e=function(e){e=e||{};var t=[],n=-1,o=-1,a=[],s=[];S.chartOptions=$.extend({},k),S.historyIncomeInfo=[],S.historyIncomeInfoAll=[];for(idxDate in e)if(idxDate>=r&&c>=idxDate){-1==n&&-1==o&&(n=o=parseFloat(e[idxDate].income_rate));var l={},h=parseFloat(e[idxDate].million_of_income),d=parseFloat(e[idxDate].income_rate);l.date=idxDate,l.incomeTenThousand=h.toFixed(4),l.incomeRate=d.toFixed(4),n>d&&(n=d),d>o&&(o=d),S.historyIncomeInfoAll.push(l);var m=i.getUTCMsByYYYYMMDDString(idxDate),p=[];p.push(m),p.push(parseFloat(e[idxDate].income_rate)),t.push(p),a.push(m),s.push(e[idxDate].income_rate)}S.historyIncomeInfoAll.sort(function(e,t){return t.date-e.date});for(var g=Math.min(S.historyIncomeInfoAll.length,7),f=0;g>f;f++)S.historyIncomeInfo.push(S.historyIncomeInfoAll[f]);S.chartOptions.yAxis.tickPositions=[0,1,2,3,4,5,6],S.chartOptions.series[0].threshold=0;for(var _=[],T=10,C=a.length*(1-1/T),I=C/6,y=a.length*(1/(2*T)),f=0;7>f;f++)_.push(a[parseInt(y+I*f)]);S.chartOptions.xAxis.tickPositions=_,S.chartOptions.series[0].data=t,u(function(){R.showChart&&R.showChart()},100)},t=function(){o.requestProductHistoryIncomeRate(v,r,c).then(function(t){t&&t.ret_data&&t.ret_data instanceof Object&&Object.keys(t.ret_data).length>0?(y.saveData(s,{timeRanger:{begin:r,end:c,time:i.getDate().getTime()},data:t.ret_data}),e(t.ret_data)):e(l&&l.data,!0)},function(){e(l&&l.data,!0)})},n=i.getDate(),a=i.getDate();a.setDate(n.getDate()-P);var r=i.getYYYYMMDDStringByDate(a),c=i.getYYYYMMDDStringByDate(n),s="prodRealValue_"+v,l=y.loadData(s),h=l&&l.timeRanger||null;h?c>h.end||r<h.begin||i.getDate().getTime()-h.time>6048e5?t():e(l.data,!0):t()},E=function(){T.go("monetaryMyProdDetail/"+v,null,null,{stateStr:n.LOCATION_BACK_PATH.BACKTO_INSURANCE_AFTER_LOGIN_OR_REGISTER},!0)},x=function(){i.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),u(function(){f.setCallbackPage(E,E),T.go("/login")},1e3)},N=function(){i.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),u(function(){_.setCallbackPage(E,E),_.go()},1e3)};R.onClickIncome=function(){S.incomeRateCls="item",S.incomeCls="item on",S.showIncomeRate=!1,u(function(){A.resize()},10)},R.onClickIncomeRate=function(){S.incomeRateCls="item on",S.incomeCls="item",S.showIncomeRate=!0,u(function(){A.resize()},10)},R.onClickViewIncomeRate=function(){T.go("/monetaryHistorySevenDaysIncomeRate/"+v)},R.onClickViewTenThousandIncome=function(){T.go("/monetaryHistoryIncomeTenThousand/"+v)},R.onClickPurchase=function(){i.clickButtonReport("huoqijia_zhuanru"),d.goPage(null,null,{type:n.TRANS_TYPE.CURRENT_PLUS})},R.onClickRedeem=function(){i.clickButtonReport("huoqijia_zhuanchu"),r.isUserStrongAccount()?C.goPage(null,null,{type:n.TRANS_TYPE.CURRENT_PLUS}):h.goPage(null,null,{type:n.TRANS_TYPE.CURRENT_PLUS})},R.onClickViewMoreIncomeRule=function(){i.clickButtonReport("huoqijia_xiangxi"),T.go("/monetaryMoreIncomeRules/"+v)},R.onClickViewMore=function(){i.clickButtonReport("huoqijia_wanfen"),T.go("/monetaryHistoryIncomeTenThousand/"+v)},R.back=function(){T.backPage()},R.onClickAsset=function(){m.goPage("","","all")},R.onClickYesterdayIncome=function(){g.goPage()},R.onClickAccumulateIncome=function(){g.goPage()},R.onClickTransLog=function(){m.goPage("","","all")},R.isValueDatePromoptShown=function(){},R.onClickCloseValueDatePromopt=function(){return!0},R.canTransferOut=function(){return parseFloat(S.amount)>0},R.isLogined=function(){return s.getUserStatus()==n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT};var w=function(e){e.ret_data.recent_fund&&(S.valueDateDesc=e.ret_data.recent_fund.self_tranc_desc)},L=function(){},U=function(){if(S.prodInfo&&S.prodInfo.share_config&&!isReviewVer){var e={};S.shareData=e,e.prod_type=n.PROD_TYPE.HJ,e.shareObj=S.prodInfo.share_config,e.shareContent=null,e.shareTarget=null,e.shareObj.share_content&&e.shareObj.share_target?(S.shareClass="menu-tip share hjButton",e.shareContent=e.shareObj.share_content.replace("{prod_name}",S.prodName),e.shareContent=e.shareContent.replace("{income_rate}",S.incomeRate),e.shareTarget=e.shareObj.share_target.replace("{prod_code}",v),e.shareTarget=e.shareTarget.replace("{prod_type}",e.prod_type)):S.shareClass="hpw-con hide hjButton"}else S.shareClass="hpw-con hide hjButton"};R.onTrigerLogin=function(){var e=s.getUserStatus();e==n.ACCOUNT_STATE.USER_STATE_LOGIN?N():e==n.ACCOUNT_STATE.USER_STATE_GUEST&&x()},R.share=function(){var e=S.shareData,t=null;e&&(t=a.sharePage(e.shareObj.share_title,e.shareContent,e.shareObj.share_iconurl,e.shareTarget)),t&&t.then(function(){var e={prod_code:v,product_type:"monetary_product",status:"success"};i.reportCustomEvent("share_product",e)},function(){var e={prod_code:v,product_type:"monetary_product",status:"failure"};i.reportCustomEvent("share_product",e)})};var B=function(){O=s.getCacheInfo("wealthNew"),D=r.parseRawWealthData_V3(O),S.showIncome=0!=D.yesterdayHJIncome,S.yesterdayIncome=D.yesterdayHJIncome,S.amount=parseFloat(D.HJAmount).toFixed(2),S.accumulatedIncome=D.accumulatedHJIncome,U(),o.requestEarningsDate().then(w,L),b()},H=function(){b(),U()},Y=function(){R.isLogined()?B():H()};Y()}]);app.controller("MonetaryHistoryTenThousandController",["$scope","$location","$stateParams","utils","cgiService","essential","MonetaryService","LocationService",function(e,t,o,a,r,n,i,c){e.incomeHistory=[];var s=o.prodCode,d=a.getDate(),l=a.getDate();l.setDate(d.getDate()-90);var u=a.getYYYYMMDDStringByDate(l),m=a.getYYYYMMDDStringByDate(d);r.requestProductHistoryIncomeRate(s,u,m).then(function(t){for(var o in t.ret_data){var a={},r=parseFloat(t.ret_data[o].million_of_income),n=parseFloat(t.ret_data[o].income_rate);a.date=o,a.incomeTenThousand=r.toFixed(4),a.incomeRated=n.toFixed(2),e.incomeHistory.push(a)}e.incomeHistory.sort(function(e,t){return t.date-e.date})}),e.back=function(){c.backPage()}}]);app.controller("MonetaryMoreDetailsController",["$scope","$location","MonetaryService",function(o,n,a){var c="xq-con nb mgt20 px",t="xq-con nb mgt20 px off";o.companyCls=t,o.onClickCompanyIntro=function(){o.companyCls=o.companyCls==t?c:t},o.back=function(){var o=a.getCallbackPage("moreDetail");n.path(o)}}]);app.controller("MonetaryHistorySevenDaysIncomeRateController",["$scope","$location","$stateParams","utils","cgiService","essential","MonetaryService","LocationService",function(e,t,a,o,r,n,i,c){e.incomeHistory=[];var s=a.prodCode,d=o.getDate(),l=o.getDate();l.setDate(d.getDate()-90);var m=o.getYYYYMMDDStringByDate(l),D=o.getYYYYMMDDStringByDate(d);r.requestProductHistoryIncomeRate(s,m,D).then(function(t){for(var a in t.ret_data){var o={},r=parseFloat(t.ret_data[a].million_of_income),n=parseFloat(t.ret_data[a].income_rate);o.date=a,o.incomeTenThousand=r.toFixed(4),o.incomeRate=n.toFixed(2),e.incomeHistory.push(o)}e.incomeHistory.sort(function(e,t){return t.date-e.date})}),e.back=function(){c.backPage()}}]);app.controller("MonetaryIncomeRulesController",["$scope","$location","$stateParams","utils","cgiService","essential","MonetaryService","dataService","envService","LocationService","cache","GLOBAL_CONSTANT",function(a,e,n,c,t,i,l,r,o,m,_){a.data={};var s=n.onSaleCode;a.code=s;var d=_.getCacheInfo("wealthNew");if(d&&d.finance_wealth&&d.finance_wealth.balance_cycle&&d.finance_wealth.balance_cycle.length>=1){var u=d.finance_wealth.balance_cycle[0];a.data.maxTransInLimit=u.day_max_buy_num,a.data.maxTransOutLimit=u.day_max_redeem_num}else a.data.maxTransInLimit=10,a.data.maxTransOutLimit=10;a.back=function(){m.backPage()}}]);app.controller("StockProductDetailController",["$scope","$stateParams","$location","cgiService","utils","cache","commonDirectiveService","$timeout","StockProductDetailService","StockPurchaseService","GLOBAL_CONSTANT","essential","StockTransRulesService","StockAssetDetailService","StockProdManagerService","StockMoreDetailService","RegisterService","LoginService","StockValueHistoryService","localStorage","LocationService","envService","$http","$sce","ProdInfoService",function(a,t,e,o,n,r,d,i,s,l,c,u,p,f,_,h,g,m,I,T,k,y,v,S,D){a.data={},a.func={},a.countDownHandle=null;var C=1;a.data.monthStr="近1个月涨跌幅";var b=[],R=[],V=!1,A="",w="",L=null,O=null,P=function(){n.reportCustomEvent("stock_product_details",t.onSaleCode),a.data.status=r.getUserStatus(),a.data.prodInfo=D.getProdInfo(t.onSaleCode),a.data.showBuyButton="hideBuyButton"==t.isHideButton?!1:!0,F(),M(),x(),B(),Z(),U(),H(),(5==a.data.period||7==a.data.period||6==a.data.period)&&K()},x=function(){a.data.realValue=parseFloat(a.data.prodInfo.real_value).toFixed(4),a.data.showRealValueMap=!0,a.data.realValueMapTab="item on",a.data.realValueTableTab="item",a.data.maskClass="p-mask hide",u.setInfoMaskStatusBackground(!1),a.data.riskDesc=gProductArr[a.data.prodInfo.risk_level],a.data.riskRateClass="高"==a.data.riskDesc||"较高"==a.data.riskDesc?"up":"",a.data.realValueInfoList=[],a.data.realValueInfoList7Days=[],a.data.chartData=[],a.data.threeHandred=[]},B=function(){var t=null;5!=a.data.period?t=n.getFeeRateByAmount(a.data.prodInfo.offer_buy_fee_rate2,0,a.data.prodInfo.offer_buy_discount_fee_rate,a.data.prodInfo.offer_buy_fee_rate):a.data.prodInfo.trade_fee_rate&&(t=n.getFeeRateByAmount(a.data.prodInfo.trade_fee_rate.apply_buy_fee_rate2,0,a.data.prodInfo.trade_fee_rate.apply_buy_discount_fee_rate,a.data.prodInfo.trade_fee_rate.apply_buy_fee_rate)),t&&(a.data.purchaseFeeRate=t.feeRate,a.data.realPurchaseFeeRate=t.realFeeRate)},M=function(){var e;e=T.loadData(u.isFinancialHomeGray()?"financialRecommendV2":"financialRecommend");var o={};if(e&&e.ret_data&&e.ret_data.productTypeList){for(var n in e.ret_data.productTypeList)if(2==e.ret_data.productTypeList[n].productType)for(var r in e.ret_data.productTypeList[n].productList)e.ret_data.productTypeList[n].productList[r].productCode==t.onSaleCode&&(o=e.ret_data.productTypeList[n].productList[r]);o?(a.data.earningsRate=o.earningsRate?o.earningsRate:"",a.data.earningsDesc=o.earningsDesc?o.earningsDesc:""):(a.data.earningsRate="",a.data.earningsDesc="")}else a.data.earningsRate="",a.data.earningsDesc=""},H=function(){var e=y.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+t.onSaleCode+"/prodShow.html";v.get(S.trustAsResourceUrl(e)).success(function(t){a.data.sectionHtml=S.trustAsHtml(t)})},E=function(){if(a.data.prodInfo.load_desc){a.rootUrl=y.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+t.onSaleCode+"/";var e=a.rootUrl+"prodSecondPage.html";v.get(S.trustAsResourceUrl(e)).success(function(t){t=t.toString().trim(),t.length>0&&(a.data.showSecond=!0,a.data.secondPageStr=t,i(function(){a.upDownInit(!0,function(t){t||(a.data.showSecond=!1)})}))})}},F=function(){var t=n.getDate();if(a.data.prodInfo.start_buy_date&&a.data.prodInfo.start_buy_time&&a.data.prodInfo.end_buy_date&&a.data.prodInfo.end_buy_time&&a.data.prodInfo.close_period_start_date&&a.data.prodInfo.close_period_start_time&&a.data.prodInfo.close_period_end_date&&a.data.prodInfo.close_period_end_time){var e=n.getDateByDateAndTimeString(a.data.prodInfo.start_buy_date,a.data.prodInfo.start_buy_time),o=n.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time),r=n.getDateByDateAndTimeString(a.data.prodInfo.close_period_start_date,a.data.prodInfo.close_period_start_time),d=n.getDateByDateAndTimeString(a.data.prodInfo.close_period_end_date,a.data.prodInfo.close_period_end_time);a.data.close_period_start_date=a.data.prodInfo.close_period_start_date,a.data.close_period_start_time=a.data.prodInfo.close_period_start_time,a.data.close_period_end_date=a.data.prodInfo.close_period_end_date,a.data.close_period_end_time=a.data.prodInfo.close_period_end_time,e>t?a.data.period=1:o>t?(a.data.period=2,n.isToday(o)?(a.data.isToday=!0,j()):a.data.isToday=!1):a.data.period=r>t?3:d>t?4:5}else a.data.period=5;var i=a.data.prodInfo.cycle_close_peroid;if(a.data.tradeRules=a.data.prodInfo.trade_rules||[],i&&i.length>0){if(a.data.extraRules=[],5==a.data.period){for(var s=[],l=null,c=0;c<i.length;c++)try{if(i[c].startTime=new Date(i[c].start_time.replace(/-/g,"/")),i[c].endTime=new Date(i[c].end_time.replace(/-/g,"/")),t>i[c].startTime&&t<i[c].endTime){l=i[c],a.data.period=6;break}t<i[c].startTime&&s.push(i[c])}catch(u){continue}if(6==a.data.period){var p=l.start_time.split(" ");p.length>1&&(a.data.close_period_start_date=p[0].trim().split("-").join(""),a.data.close_period_start_time=p[1].trim().split("-").join("")),p=l.end_time.split(" "),p.length>1&&(a.data.close_period_end_date=p[0].trim().split("-").join(""),a.data.close_period_end_time=p[1].trim().split("-").join(""))}else if(s.length>0){s.sort(function(a,t){return a.startTime-t.startTime});{s[0]}a.data.period=7,a.data.tradeRules=a.data.prodInfo.extra_rules||[]}else a.data.tradeRules=a.data.prodInfo.extra_rules||[]}}else a.data.extraRules=a.data.prodInfo.extra_rules||[],a.data.tradeRules=a.data.prodInfo.trade_rules||[]},j=function(){a.data.countdownHour=0,a.data.countdownMinute=0,a.data.countdownSecond=0;var t=n.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time);if(t){var e=n.getDate(),o=n.getSecondDifference(e,t);o>0&&(a.data.countdownHour=parseInt(o/3600),a.data.countdownMinute=parseInt((o-3600*a.data.countdownHour)/60),a.data.countdownSecond=parseInt(o-3600*a.data.countdownHour-60*a.data.countdownMinute),i(function(){a.countDownHandle=new Countdown,a.countDownHandle.init(function(){P()})},200))}};a.onClickRealValueMap=function(){a.data.showRealValueMap=!0,a.data.realValueMapTab="item on",a.data.realValueTableTab="item"},a.onClickRealValueTable=function(){a.data.showRealValueMap=!1,a.data.realValueMapTab="item",a.data.realValueTableTab="item on"},a.onClickRealValue=function(){a.data.maskClass="p-mask show",u.setInfoMaskStatusBackground(!0),a.data.maskTitle="单位净值",a.data.maskDetail="基金单位净值，指每份额基金当日的价值。是基金净资产除以基金总份额，得出的每份额基金当日的价值。一般情况下，每天看到的是上一个交易日的单位净值。"},a.onClickChangeRate=function(){a.data.maskClass="p-mask show",u.setInfoMaskStatusBackground(!0),a.data.maskTitle="日涨跌幅",a.data.maskDetail="指当前交易日基金净值与前一交易日基金净值相比较的数值。红色代表涨，绿色代表跌。"},a.onClickThreeeHandred=function(){a.data.maskClass="p-mask show",u.setInfoMaskStatusBackground(!0),a.data.maskTitle="沪深300",a.data.maskDetail="沪深300指数是由沪深A股中规模大、流动性好的最具代表性的300只股票组成，以综合反映A股的市场整体表现。"},a.onClickCancelMask=function(){a.data.maskClass="p-mask hide",u.setInfoMaskStatusBackground(!1)},a.onClickViewMoreHistory=function(){var t=[];a.data.realValueInfoList.length>1&&(t=a.data.realValueInfoList.splice(0,a.data.realValueInfoList.length-1)),I.goPage(null,"",{data:t,code:a.data.prodInfo.on_sale_code,beginTime:L,endTime:O})},a.onClickMoreRules=function(){p.goPage(a.data.prodInfo.on_sale_code)},a.onClickAssetsDetail=function(){f.goPage(a.data.prodInfo.on_sale_code)},a.onClickTransRates=function(){k.go("/stockTransRates/"+a.data.prodInfo.on_sale_code)},a.onClickProdManager=function(){_.goPage(a.data.prodInfo.on_sale_code)},a.onClickMoreDetail=function(){h.goPage(a.data.prodInfo.on_sale_code)},a.onClickTime=function(t){C!=t&&(1==t?a.data.monthStr="近1个月涨跌幅":3==t?a.data.monthStr="近3个月涨跌幅":6==t?a.data.monthStr="近6个月涨跌幅":12==t&&(a.data.monthStr="近1年涨跌幅"),C=t,R=[],V=!1,K())},a.onClassTime=function(a){return a==C?"on":""};var U=function(){if(a.data.extraRules)for(var t=0;t<a.data.extraRules.length;t++)b.push(!0)};a.onClickExtraRule=function(a){a>=b.length||(b[a]=!b[a])},a.getExtraRuleStyle=function(a){return b[a]?"lc-wrap mgt20 so-icon so-down px":"lc-wrap mgt20 so-icon so-up px"};var Y={chart:{type:"line",pinchType:"",zoomType:""},navigator:{enabled:!1},credits:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},series:[{name:"本产品",data:"",lineWidth:1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(.6).get("rgba")],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]}},{name:"沪深300",data:"",lineWidth:1,color:"#f39361",fillColor:{}}],yAxis:{gridLineWidth:.5,gridLineColor:"#E9ECEF",labels:{format:"{value:point.y:.2f}%",y:4},lineWidth:0,opposite:!1,tickmarkPlacement:"on",tickLength:5,showLastLabel:!0},xAxis:{type:"datetime",lineWidth:0,labels:{format:"{value:%m-%d}",align:"center"},showLastLabel:!0,ordinal:!0,tickLength:5,tickWidth:1},tooltip:{valueDecimals:2,shared:!0,valueSuffix:"",enabled:!1},plotOptions:{area:{fillOpacity:.5,enableMouseTracking:!1,pointPlacement:"between",allowPointSelect:!1},series:{marker:{enabled:!1},allowPointSelect:!1},line:{enableMouseTracking:!1,allowPointSelect:!1,marker:{enabled:!1}}}},G=function(){k.go("stockProductDetail/"+t.onSaleCode,null,null,{stateStr:c.LOCATION_BACK_PATH.BACKTO_STOCK_AFTER_LOGIN_OR_REGISTER},!0)},N=function(){n.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),i(function(){g.setCallbackPage(G,G),g.go()},1e3)},W=function(){n.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),i(function(){m.setCallbackPage(G,G),k.go("/login")},1e3)},J=function(t){1!=a.data.prodInfo.apply_buy_remind_flag?l.goPage(a.data.prodInfo.on_sale_code,null,{isForce:t}):i(function(){a.data.outValue={},a.data.outValue.oneLineTextLeft=a.data.prodInfo.apply_buy_remind_desc,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="继续购买",a.data.outValue.showPop=!0,a.data.outValue.popClose=function(e){1==e||2==e&&l.goPage(a.data.prodInfo.on_sale_code,null,{isForce:t})}},100)};a.onClickPurchase=function(){a.data.status==c.ACCOUNT_STATE.USER_STATE_GUEST?W():a.data.status==c.ACCOUNT_STATE.USER_STATE_LOGIN?N():(a.data.sliderUpConfirmOption=a.data.sliderUpConfirmOption||{},a.data.riskOption=a.data.riskOption||{},d.checkProductRiskSetting({productRiskLevel:a.data.prodInfo.risk_level||4,sliderUpConfirmOption:a.data.sliderUpConfirmOption,riskOption:a.data.riskOption}).then(function(a){a=a||{};var t=a.isForce;J(t)},function(){}))},a.canPurchase=function(){return"01"==a.data.prodInfo.trans_status&&1!=a.data.prodInfo.forbid_buy_flag},a.contentStyle=function(){return a.data.showBuyButton&&a.canPurchase()?5==a.data.period||7==a.data.period||2==a.data.period&&9!=a.data.prodInfo.fund_status?{bottom:"69px"}:{bottom:"50px"}:{}},a.data.chartOptions=null,a.func.randerView=function(t){if(!V&&(t.threeData&&(R[1]=t.data),t.webankData&&(R[0]=t.data),R[0]&&R[1])){V=!0,a.data.chartOptions=$.extend({},Y);var e=R[0].yArr.concat(R[1].yArr);if(e.sort(function(a,t){return 1*a-1*t}),e.length>0){var o=e[e.length-1]-e[0],n=o/3,r=e[0]-o/6,d=e[e.length-1]+o/6,s=[r];s.push(r+n),s.push(r+2*n),s.push(r+3*n),s.push(d),a.data.chartOptions.yAxis.tickPositions=s,a.data.chartOptions.series[0].threshold=r}a.data.chartOptions.series[0].data=R[0].resultArr,a.data.chartOptions.series[1].data=R[1].resultArr;for(var l=[],c=[],u=0;u<R[0].xArr.length;u++)c.push(R[0].xArr[u]);for(var u=0;u<R[1].xArr.length;u++)$.inArray(R[1].xArr[u],R[0].xArr)<0&&c.push(R[1].xArr[u]);c.sort(function(a,t){return a-t}),c.length>0&&(l.push(c[0]),l.push(c[c.length-1])),a.data.chartOptions.xAxis.tickPositions=l,i(function(){a.func.showChart(a.data.chartOptions)})}};var K=function(){O=n.getDateDiffToday(-1),w=n.getYYYYMMDDStringByDate(O),L=n.getDate(),L.setDate(L.getDate()-1);var a=L.getMonth()+24;L.setMonth(L.getMonth()-C),L.getMonth()+1==(a-C)%12&&L.setDate(1),A=n.getYYYYMMDDStringByDate(L),z(),Q()},q=function(t){if(t=t||{}){var e=[],o=[],r=[],d=0,i=0,s=0;a.data.realValueInfoList=[];var l=[];for(var c in t)if(c>=A&&w>=c){l.push({dateStr:1*c,data:t[c]}),d==s&&(i=t[c].accu_net_value);var u;0==i?(u=0,s++):u=(t[c].accu_net_value-i)/i*100,d++;var p={};p.date=t[c].earnings_rate_date,p.realValue=t[c].unit_net_value,p.accuValue=t[c].accu_net_value;var f=[],_=n.getUTCMsByYYYYMMDDString(t[c].earnings_rate_date);f.push(_),f.push(parseFloat(u)),e.push([_,parseFloat(u)]),o.push(parseFloat(u)),r.push(_),a.data.chartData.push(f),a.data.realValueInfoList.push(p)}if(a.func.randerView({webankData:!0,data:{yArr:o,resultArr:e,xArr:r}}),l.sort(function(a,t){return a.dateStr-t.dateStr}),l.length>0){var h=l[0].data.accu_net_value,g=l[l.length-1].data.accu_net_value;a.data.preRate=100*(g-h)/h}else a.data.preRate=0;a.data.preRate=a.data.preRate.toFixed(2);var m=function(a,t){return t.date-a.date};if(a.data.realValueInfoList.sort(m),a.data.realValueInfoList.length>1)for(var c=0;c<a.data.realValueInfoList.length-1;c++){var h=a.data.realValueInfoList[c].realValue,I=a.data.realValueInfoList[c+1].realValue;a.data.realValueInfoList[c].diffRate=I?((h-I)/I*100).toFixed(2):0,a.data.realValueInfoList[c].class=a.data.realValueInfoList[c].diffRate>0?"item red":a.data.realValueInfoList[c].diffRate<0?"item green":"item"}if(a.data.realValueInfoList7Days=a.data.realValueInfoList.length>=7?a.data.realValueInfoList.slice(0,6):a.data.realValueInfoList.slice(0,a.data.realValueInfoList.length-1),a.data.realValueInfoList.length>=2){var T=a.data.realValueInfoList[0],k=a.data.realValueInfoList[1];a.data.yesterdayChangeRate=(100*(parseFloat(T.realValue)-parseFloat(k.realValue))/parseFloat(k.realValue)).toFixed(2),a.data.changeRateClass=a.data.yesterdayChangeRate>0?"up":a.data.yesterdayChangeRate<0?"down":""}}},X=function(t){if(t=t||{}){var e=[],o=[],r=[],d=t[0],i=0;for(var s in t)if(s>=A&&w>=s){0==i&&(d=t[s]),i++;var l=(t[s]-d)/d*100,c=n.getUTCMsByYYYYMMDDString(s);e.push([c,parseFloat(l)]),o.push(parseFloat(l)),r.push(c)}a.func.randerView({threeData:!0,data:{yArr:o,resultArr:e,xArr:r}})}},z=function(){var t="stockRealValue_"+a.data.prodInfo.on_sale_code,e=function(){o.requestStockHistoryValue(a.data.prodInfo.on_sale_code,A,w).then(function(a){a&&a.ret_data&&a.ret_data instanceof Object&&Object.keys(a.ret_data).length>0?(T.saveData(t,{timeRanger:{begin:A,end:w,time:n.getDate().getTime()},data:a.ret_data}),q(a.ret_data)):q(r&&r.data,!0)},function(){q(r&&r.data,!0)})},r=T.loadData(t),d=r&&r.timeRanger||null;d?w>d.end||A<d.begin||n.getDate().getTime()-d.time>6048e5?e():q(r.data,!0):e()},Q=function(){var a="stockThreeHundred",t=function(){o.requestThreeHandred({start_date:A,end_date:w}).then(function(t){t&&t.ret_data&&t.ret_data instanceof Object&&Object.keys(t.ret_data).length>0?(T.saveData(a,{timeRanger:{begin:A,end:w,time:n.getDate().getTime()},data:t.ret_data}),X(t.ret_data)):X(e&&e.data,!0)},function(){X(e&&e.data,!0)})},e=T.loadData(a),r=e&&e.timeRanger||null;r?w>r.end||A<r.begin||n.getDate().getTime()-r.time>6048e5?t():X(e.data,!0):t()},Z=function(){if(a.data.prodInfo&&a.data.prodInfo.share_config&&!isReviewVer){var e={};a.data.shareData=e,e.prod_type=c.PROD_TYPE.GJ,e.shareObj=a.data.prodInfo.share_config,e.shareContent=null,e.shareTarget=null,e.shareObj.share_content&&e.shareObj.share_target?(a.data.shareClass="menu-tip share hjButton",e.shareContent=e.shareObj.share_content.replace("{prod_name}",a.data.prodInfo.on_sale_desc),e.shareContent=e.shareContent.replace("{income_rate}",a.data.earningsRate),e.shareTarget=e.shareObj.share_target.replace("{prod_code}",t.onSaleCode),e.shareTarget=e.shareTarget.replace("{prod_type}",e.prod_type)):a.data.shareClass="hpw-con hide hjButton"}else a.data.shareClass="hpw-con hide hjButton"};a.share=function(){var e=a.data.shareData,o=null;e&&(o=u.sharePage(e.shareObj.share_title,e.shareContent,e.shareObj.share_iconurl,e.shareTarget)),o&&o.then(function(){var a={prod_code:t.onSaleCode,product_type:"stock_product",status:"success"};n.reportCustomEvent("share_product",a)},function(){var a={prod_code:t.onSaleCode,product_type:"stock_product",status:"failure"};n.reportCustomEvent("share_product",a)})},a.back=function(){"hideBuyButton"==t.isHideButton?e.path("/stockPurchase/"+t.onSaleCode):s.backPage()},a.$on("$destroy",function(){a.countDownHandle&&a.countDownHandle.cleanTimer()}),a.onHJViewActive=function(){P()},a.onHJViewDisActive=function(){a.countDownHandle&&a.countDownHandle.cleanTimer()},P(),E()}]);app.controller("StockMyProductDetailController",["$scope","$stateParams","$location","cache","utils","webankCommonService","StockProductDetailService","StockPurchaseService","cgiService","StockTransRulesService","commonDirectiveService","$timeout","essential","GLOBAL_CONSTANT","StockConfirmPurchaseDetailService","StockConfirmRedeemDetailService","StockMyProdDetailService","StockRedeemService","LocationService","ProdInfoService","ResetPasswdService",function(a,e,t,o,n,d,r,s,i,u,c,l,p,f,_,h,m,y,g,D,C){a.data={};var S=[],I=function(){n.reportCustomEvent("stock_myproduct_details",e.onSaleCode),a.data.prodInfo=D.getProdInfo(e.onSaleCode);var t=o.getCacheInfo("wealthNew"),r=d.parseRawWealthDataForGPProduct_V2(t,e.onSaleCode);a.data.income="",a.data.accumulatedIncome="",a.data.amount=parseFloat(r.amount).toFixed(2),a.data.share=parseFloat(r.share).toFixed(2),a.data.realValue=parseFloat(r.realValue).toFixed(4),a.data.bonusType=r.bonusType,r.refundAmount&&(a.data.refundAmount=r.refundAmount),a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0,b(),k(),v(),x(),T(),B(),V(),R();var s=null;5!=a.data.period?s=n.getFeeRateByAmount(a.data.prodInfo.offer_buy_fee_rate2,0,a.data.prodInfo.offer_buy_discount_fee_rate,a.data.prodInfo.offer_buy_fee_rate):a.data.prodInfo.trade_fee_rate&&(s=n.getFeeRateByAmount(a.data.prodInfo.trade_fee_rate.apply_buy_fee_rate2,0,a.data.prodInfo.trade_fee_rate.apply_buy_discount_fee_rate,a.data.prodInfo.trade_fee_rate.apply_buy_fee_rate)),s&&(a.data.purchaseFeeRate=s.feeRate,a.data.realPurchaseFeeRate=s.realFeeRate)},b=function(){if(a.data.prodInfo.start_buy_date&&a.data.prodInfo.start_buy_time&&a.data.prodInfo.end_buy_date&&a.data.prodInfo.end_buy_time&&a.data.prodInfo.close_period_start_date&&a.data.prodInfo.close_period_start_time&&a.data.prodInfo.close_period_end_date&&a.data.prodInfo.close_period_end_time){var e=n.getDateByDateAndTimeString(a.data.prodInfo.start_buy_date,a.data.prodInfo.start_buy_time),t=n.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time),o=n.getDateByDateAndTimeString(a.data.prodInfo.close_period_start_date,a.data.prodInfo.close_period_start_time),d=n.getDateByDateAndTimeString(a.data.prodInfo.close_period_end_date,a.data.prodInfo.close_period_end_time),r=n.getDate();a.data.period=e>r?1:t>r?2:o>r?3:d>r?4:5}else a.data.period=5;var s=a.data.prodInfo.cycle_close_peroid;if(a.data.tradeRules=a.data.prodInfo.trade_rules||[],s&&s.length>0){if(a.data.extraRules=[],5==a.data.period){for(var i=[],u=0;u<s.length;u++)try{if(s[u].startTime=new Date(s[u].start_time.replace(/-/g,"/")),s[u].endTime=new Date(s[u].end_time.replace(/-/g,"/")),r>s[u].startTime&&r<s[u].endTime){a.data.period=6;break}r<s[u].startTime&&i.push(s[u])}catch(c){continue}6==a.data.period||(i.length>0?(a.data.period=7,a.data.tradeRules=a.data.prodInfo.extra_rules||[]):a.data.tradeRules=a.data.prodInfo.extra_rules||[])}}else a.data.extraRules=a.data.prodInfo.extra_rules||[],a.data.tradeRules=a.data.prodInfo.trade_rules||[]},T=function(){var t=n.getDateDiffToday(-1),o=n.getYYYYMMDDStringByDate(t),d=n.getDateDiffToday(-12),r=n.getYYYYMMDDStringByDate(d),s=[];a.data.yesterdayChangeRange=0,i.requestStockHistoryValue(e.onSaleCode,r,o).then(function(e){if(e.ret_data){for(var t in e.ret_data){var o={};o.date=e.ret_data[t].earnings_rate_date,o.realValue=e.ret_data[t].accu_net_value,s.push(o)}var n=function(a,e){return e.date-a.date};if(s.sort(n),s.length>=2){var d=s[0],r=s[1];a.data.yesterdayChangeRange=(100*(parseFloat(d.realValue)-parseFloat(r.realValue))/parseFloat(r.realValue)).toFixed(2),a.data.changeRateClass=a.data.yesterdayChangeRange>0?"up":a.data.yesterdayChangeRange<0?"down":""}}},function(){})},k=function(){a.data.bonusTypeModify=a.data.prodInfo.can_dividend_method_modify,void 0==a.data.bonusType&&(a.data.bonusType=a.data.prodInfo.default_dividend_method),"0"==a.data.bonusType?(a.data.bonusTypeString="红利再投",a.data.bonusStockClass="jc on",a.data.bonusStockName="红利再投","0"==a.data.bonusTypeModify?(a.data.bonusMoneyClass="jc",a.data.bonusMoneyName="现金分红"):(a.data.bonusMoneyClass="jc off",a.data.bonusMoneyName="现金分红（该基金不支持）")):(a.data.bonusTypeString="现金分红",a.data.bonusMoneyClass="jc on",a.data.bonusMoneyName="现金分红","0"==a.data.bonusTypeModify?(a.data.bonusStockClass="jc",a.data.bonusStockName="红利再投"):(a.data.bonusStockClass="jc off",a.data.bonusStockName="红利再投（该基金不支持）")),a.data.showBonusType=!1},v=function(){i.requestConfirmingList().then(function(e){a.data.purchaseCount=0,a.data.purchaseFinishDate=void 0,a.data.purchaseFinishDateHide=!1,a.data.redeemCount=0,a.data.redeemFinishDate=void 0,a.data.redeemFinishDateHide=!1;for(var t=0;t<e.ret_data.product_list.length;++t)if(e.ret_data.product_list[t].prod_code==a.data.prodInfo.on_sale_code)if("60"==e.ret_data.product_list[t].trans_type){a.data.purchaseCount++;var o=n.getDateByYYYYMMDDString(e.ret_data.product_list[t].trans_date),d=parseInt(a.data.prodInfo.confirm_share_time);(!n.isWorkDay(o)||parseInt(e.ret_data.product_list[t].trans_time.substr(0,2))>=15)&&(d+=1);var r=n.getNextWorkDay(d,o);if(a.data.purchaseFinishDate?a.data.purchaseFinishDate!=r&&(a.data.purchaseFinishDateHide=!0):a.data.purchaseFinishDate=r,5!=a.data.period){var s=n.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time);a.data.purchaseFinishDate=n.getNextWorkDay(1,s),a.data.purchaseFinishDateHide=!1}}else if("62"==e.ret_data.product_list[t].trans_type){a.data.redeemCount++;var o=n.getDateByYYYYMMDDString(e.ret_data.product_list[t].trans_date),d=parseInt(a.data.prodInfo.redeem_to_custom_time);(!n.isWorkDay(o)||parseInt(e.ret_data.product_list[t].trans_time.substr(0,2))>=15)&&(d+=1);var r=n.getNextWorkDay(d,o);a.data.redeemFinishDate?a.data.redeemFinishDate!=r&&(a.data.redeemFinishDateHide=!0):a.data.redeemFinishDate=r}},function(){})};a.onClickBonusType=function(){a.data.showBonusType=!0},a.onClickBonusTypeClose=function(){a.data.showBonusType=!1},a.onSelectBonusMoney=function(){"jc off"!=a.data.bonusMoneyClass&&(1!=a.data.bonusType&&(a.data.selectType=1,w()),a.data.showBonusType=!1)},a.onSelectBonusStock=function(){"jc off"!=a.data.bonusStockClass&&(0!=a.data.bonusType&&(a.data.selectType=0,w()),a.data.showBonusType=!1)};var w=function(){a.data.pwdSubTitle=1==a.data.selectType?"修改分红方式为：现金分红":"修改分红方式为：红利再投",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(e,t){e!==t&&(a.data.isPwdShow=!1,P())});var P=function(){var e={};e.password=a.data.vm.formData.confirmPassword.RSA,e.fundcode=a.data.prodInfo.on_sale_code,e.dividendmethod=1==a.data.selectType?"1":"0",i.requestStockBonusType(e).then(function(){n.makeToast("修改分红方式成功"),1==a.data.selectType?(a.data.bonusTypeString="现金分红",a.data.bonusType=1,a.data.bonusMoneyClass="jc on",a.data.bonusStockClass="jc"):(a.data.bonusTypeString="红利再投",a.data.bonusType=0,a.data.bonusStockClass="jc on",a.data.bonusMoneyClass="jc"),i.requestUserWealth().then(function(){},function(){})},function(e){d.isRetCodePwd(e.ret_code)?d.isRetCodePwdRetry(e.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=e.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(e){1==e?a.data.isPwdShow=!0:2==e&&C.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=e.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&C.goPage()}):n.makeToast(e.ret_msg,"short")})},R=function(){if(a.data.prodInfo.extra_rules)for(var e=0;e<a.data.prodInfo.extra_rules.length;e++)S.push(!0)},F=function(e){1!=a.data.prodInfo.apply_buy_remind_flag?s.goPage(a.data.prodInfo.on_sale_code,null,{isForce:e}):(a.data.outValue={},a.data.outValue.oneLineTextLeft=a.data.prodInfo.apply_buy_remind_desc,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="继续购买",a.data.outValue.popClose=function(t){1==t||2==t&&s.goPage(a.data.prodInfo.on_sale_code,null,{isForce:e})},l(function(){a.data.outValue.showPop=!0},200))};a.canPurchase=function(){return"01"==a.data.prodInfo.trans_status&&1!=a.data.prodInfo.forbid_buy_flag},a.contentStyle=function(){return a.canRedeem()||a.canPurchase()?{bottom:"50px"}:{}},a.canRedeem=function(){return a.data.amount>0&&1!=a.data.prodInfo.forbid_redeem_flag},a.onClickPurchase=function(){a.data.sliderUpConfirmOption=a.data.sliderUpConfirmOption||{},a.data.riskOption=a.data.riskOption||{},c.checkProductRiskSetting({productRiskLevel:a.data.prodInfo.risk_level||4,sliderUpConfirmOption:a.data.sliderUpConfirmOption,riskOption:a.data.riskOption}).then(function(a){a=a||{};var e=a.isForce;F(e)},function(){})},a.onClickRedeem=function(){1!=a.data.prodInfo.redeem_remind_flag?y.goPage(a.data.prodInfo.on_sale_code):l(function(){a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=a.data.prodInfo.redeem_remind_desc,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="继续赎回",a.data.outValue.popClose=function(e){1==e||2==e&&y.goPage(a.data.prodInfo.on_sale_code)}},50)},a.onClickMoreRules=function(){u.goPage(a.data.prodInfo.on_sale_code)},a.onClickTransRates=function(){g.go("/stockTransRates/"+a.data.prodInfo.on_sale_code)},a.onClickProductDetail=function(){r.goPage(a.data.prodInfo.on_sale_code)},a.onClickConfirmDetail=function(e){"purchase"==e?_.goPage(a.data.prodInfo.on_sale_code):"redeem"==e&&h.goPage(a.data.prodInfo.on_sale_code)},a.onClickWealth=function(){a.data.maskClass="p-mask show",a.data.maskTitle="持有市值",a.data.maskDetail="单位净值*持有份额。"},a.onClickShare=function(){a.data.maskClass="p-mask show",a.data.maskTitle="持有份额",a.data.maskDetail="份额代表你持有该基金的数量，只有购买赎回时才会发生变化。"},a.onClickCancelMask=function(){a.data.maskClass="p-mask hide"},a.onClickExtraRule=function(a){a>=S.length||(S[a]=!S[a])},a.getExtraRuleStyle=function(a){return S[a]?"lc-wrap mgt20 so-icon so-down px":"lc-wrap mgt20 so-icon so-up px"};var B=function(){var t=n.getDate(),o=n.getYYYYMMDDStringByDate(t),d=n.getBeforeWorkDay(3,t),r=n.getYYYYMMDDStringByDate(d);i.requestIncomeHistory(r,o,5).then(function(t){if(t.ret_data){var o=0;for(var d in t.ret_data)for(var r in t.ret_data[d])t.ret_data[d][r].prod_code==e.onSaleCode&&parseInt(d)>o&&(o=parseInt(d),a.data.income=parseFloat(t.ret_data[d][r].income).toFixed(2));0!=o?(a.data.incomeDate=n.getDateByYYYYMMDDString(o.toFixed(0)),a.data.incomeDateShow=!0):(a.data.income="暂无盈亏",a.data.incomeDateShow=!1)}},function(){a.data.income="暂无盈亏",a.data.incomeDateShow=!1})},V=function(){i.requestStockTotalIncome(e.onSaleCode).then(function(e){tracelog("查询股基累积收益成功"),e.ret_data&&e.ret_data.length>=1&&(a.data.accumulatedIncome=parseFloat(e.ret_data[0].totalEarnings).toFixed(2))},function(){tracelog("查询股基累积收益失败")})},x=function(){if(a.data.prodInfo&&a.data.prodInfo.share_config&&!isReviewVer){var t={};a.data.shareData=t,t.prod_type=f.PROD_TYPE.GJ,t.shareObj=a.data.prodInfo.share_config,t.shareContent=null,t.shareTarget=null,t.shareObj.share_content&&t.shareObj.share_target?(a.data.shareClass="menu-tip share hjButton",t.shareContent=t.shareObj.share_content.replace("{prod_name}",a.data.prodInfo.on_sale_desc),t.shareContent=t.shareContent.replace("{income_rate}",a.data.earningsRate),t.shareTarget=t.shareObj.share_target.replace("{prod_code}",e.onSaleCode),t.shareTarget=t.shareTarget.replace("{prod_type}",t.prod_type)):a.data.shareClass="hpw-con hide hjButton"}else a.data.shareClass="hpw-con hide hjButton"};a.share=function(){var t=a.data.shareData,o=null;t&&(o=p.sharePage(t.shareObj.share_title,t.shareContent,t.shareObj.share_iconurl,t.shareTarget)),o&&o.then(function(){var a={prod_code:e.onSaleCode,product_type:"stock_myproduct",status:"success"};n.reportCustomEvent("share_product",a)},function(){var a={prod_code:e.onSaleCode,product_type:"stock_myproduct",status:"failure"};n.reportCustomEvent("share_product",a)})},a.back=function(){m.backPage()},a.onHJViewActive=function(){I()},a.onHJViewDisActive=function(){},I()}]);app.controller("StockPurchaseController",["$scope","$stateParams","utils","cache","webankCommonService","$timeout","$location","session","cgiService","BindNewCardService1","StockPurchaseService","ResetPasswdService","localStorageService","dataService","AnnouncementService","GLOBAL_CONSTANT","StockProductDetailService","StockTransRulesService","RecentAccountService","$ionicViewSwitcher","HelpDetailService","HJactionLoading","ProdInfoService","BindBankCardService",function(a,t,o,n,e,c,d,r,u,i,A,s,_,l,C,p,T,f,D,h,m,P,B,N){a.data={};var I=a.data,y=null,k=function(){o.reportCustomEvent("stock_product_purchase",t.onSaleCode),a.data.prodInfo=B.getProdInfo(t.onSaleCode),a.data.isPwdAutoShow=!1,a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0,a.data.ButtonClass="btn-c off",R(),U(),v(),w(),E(),I.mainCard={};var e=n.getCacheInfo("personalInfo");null!=e&&e.webank_card_no&&(I.mainCard.number=e.webank_card_no),b()},E=function(){if(a.data.prodInfo.start_buy_date&&a.data.prodInfo.start_buy_time&&a.data.prodInfo.end_buy_date&&a.data.prodInfo.end_buy_time&&a.data.prodInfo.close_period_start_date&&a.data.prodInfo.close_period_start_time&&a.data.prodInfo.close_period_end_date&&a.data.prodInfo.close_period_end_time){var t=o.getDateByDateAndTimeString(a.data.prodInfo.start_buy_date,a.data.prodInfo.start_buy_time),n=o.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time),e=o.getDateByDateAndTimeString(a.data.prodInfo.close_period_start_date,a.data.prodInfo.close_period_start_time),c=o.getDateByDateAndTimeString(a.data.prodInfo.close_period_end_date,a.data.prodInfo.close_period_end_time),d=o.getDate();a.data.finishDay=o.getNextWorkDay(1,n),t>d?a.data.period=1:n>d?(a.data.period=2,a.data.isToday=o.isToday(n)?!0:!1):a.data.period=e>d?3:c>d?4:5}else a.data.period=5},w=function(){a.data.showTipsFlag=0;var t=o.getDate(),n=a.data.prodInfo.confirm_share_time;o.isWorkDay(t)?t.getHours()>=15?(a.data.showTipsFlag=1,n++):a.data.showTipsFlag=0:(a.data.showTipsFlag=2,n++),a.data.confirmDate=o.getNextWorkDay(n,t),a.data.redeemDay=a.data.prodInfo.redeem_to_custom_time},g=function(t){var o=a.data;return o.outValue={},o.outValue.showPop=!0,o.outValue.oneLineTextLeft=t,o.outValue.oneButtonText="知道了",o.outValue.popClose=function(){},!0},b=function(){var t=a.data,o=t.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.OTHER_BANK_CARD;if(o&&o&&e.isBankCardInBatchProcessing(t.AccountData.otherBankAccount.cardInfo.bankBinCode)){var n=e.getBankBatchProcessingMsg(t.AccountData.otherBankAccount.cardInfo.bankBinCode,t.AccountData.otherBankAccount.cardInfo.bankName);g(n)}},R=function(){a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){a.changeInput()},a.data.agreementDesc="服务协议及风险提示",a.data.agreementCode=t.onSaleCode},S=function(){y=D.loadRecentlyUsedBankCard(p.ACCOUT_BIZ_TYPE.PAYMENT,p.ACCOUT_SCENE_TYPE.STOCK)},O=function(){var t=null;a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.CURRENT_PLUS?t=p.ACCOUNT_TYPE.CURRENT_PLUS:a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.WEBANK_CARD?t=p.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.OTHER_BANK_CARD&&(t=a.data.AccountData.otherBankAccount.cardInfo.cardNo),t&&D.saveRecentlyUsedBankCard(p.ACCOUT_BIZ_TYPE.PAYMENT,t,p.ACCOUT_SCENE_TYPE.STOCK)},U=function(){var t=n.getCacheInfo("wealthNew"),o=e.parseRawWealthData_V3(t),c=e.getPayableCardList();a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.amount=o.BankAmount,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.amount=o.HJAmount,a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择付款账户",a.data.AccountData.ctrlData.canBindNewCard=!0,a.data.AccountData.disabledOtherBankAccount=e.getUnableToPayCardList(),S(),a.data.AccountData.otherBankAccount={},a.data.AccountData.otherBankAccount.cardInfo={};var d=e.isTransVerificationAccount();if(d&&(a.data.AccountData.ctrlData.canBindNewCard=!1),c&&c.length>0&&!d){a.data.AccountData.otherBankAccount.otherAccountList=c;var r=L();r?r==p.ACCOUNT_TYPE.CURRENT_PLUS||r==p.ACCOUNT_TYPE.WEBANK_CARD?a.data.AccountData.ctrlData.accountType=r:(a.data.AccountData.ctrlData.accountType=p.ACCOUNT_TYPE.OTHER_BANK_CARD,a.data.AccountData.otherBankAccount.cardInfo.bankBinCode=r.other_bank_bin_code,a.data.AccountData.otherBankAccount.cardInfo.userName=r.other_name,a.data.AccountData.otherBankAccount.cardInfo.cardNo=r.other_account,a.data.AccountData.otherBankAccount.cardInfo.cardTypeCode=r.other_card_type_code,a.data.AccountData.otherBankAccount.cardInfo.cardType=r.other_card_type,a.data.AccountData.otherBankAccount.cardInfo.bankName=r.other_bank_name):a.data.AccountData.ctrlData.accountType=p.ACCOUNT_TYPE.INVALID_TYPE}else a.data.AccountData.ctrlData.accountType=p.ACCOUNT_TYPE.CURRENT_PLUS},L=function(){if(S(),y){if(y==p.ACCOUNT_TYPE.CURRENT_PLUS||y==p.ACCOUNT_TYPE.WEBANK_CARD)return y;var a=e.getPayableCardList(),t=a[0];for(var o in a)if(a[o].other_account==y){t=a[o];break}return t}return null};a.onSelectPayWay=function(){a.data.isPwdShow?(a.data.isPwdAutoShow=!0,a.data.isPwdShow=!1):a.data.isPwdAutoShow=!1,a.data.showAccountSelector()},a.onAccountSelected=function(){a.data.isPwdAutoShow&&(c(V,200),a.data.isPwdAutoShow=!1),b(),a.changeInput()},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.WEBANK_CARD},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.CURRENT_PLUS},a.isOtherBank=function(){return a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.OTHER_BANK_CARD};var v=function(){a.data.minAmount=parseFloat(a.data.prodInfo.start_buy_amount.first_buy),a.data.incAmount=parseFloat(a.data.prodInfo.start_buy_amount.first_buy_increment);var o={};o.product_code=t.prodCode,u.requestBuyFinacialLimit(o).then(function(t){t&&t.ret_data&&(isNaN(parseInt(t.ret_data.firstbuy_flag))||0===parseInt(t.ret_data.firstbuy_flag)&&(a.data.minAmount=parseFloat(a.data.prodInfo.start_buy_amount.append_buy),a.data.incAmount=parseFloat(a.data.prodInfo.start_buy_amount.append_buy_increment)))},function(a){tracelog("查询产品购买限额和是否首次购买标记失败, 原因："+a.ret_msg)}),a.data.showInputAct=!1,a.data.showInputAmountTips=!1,a.data.showInputResult=!1},Y=function(){if(""==a.data.amount||void 0==a.data.amount)return!1;if(!o.isValidTransferAmount(a.data.amount))return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT,!1;if(a.data.amount<a.data.minAmount)return a.data.showInputAmountTips=!0,a.data.inputAmountTipsContent="最低购买金额为"+a.data.minAmount+"元",!1;var t=a.data.amount;a.data.amount=o.getAmountForRule(a.data.amount,a.data.minAmount,a.data.incAmount),t!=a.data.amount&&o.makeToast("购买的金额必须为"+a.data.incAmount+"的整数倍，已自动为您调整","short"),a.data.amount=parseFloat(parseFloat(a.data.amount).toFixed(2)),a.data.amountCN=o.convertCurrencyToChineseStyle(a.data.amount);var n=null;if(5!=a.data.period?n=o.getCoastByAmount(a.data.prodInfo.offer_buy_fee_rate2,a.data.amount,a.data.prodInfo.offer_buy_discount_fee_rate,a.data.prodInfo.offer_buy_fee_rate):a.data.prodInfo.trade_fee_rate&&(n=o.getCoastByAmount(a.data.prodInfo.trade_fee_rate.apply_buy_fee_rate2,a.data.amount,a.data.prodInfo.trade_fee_rate.apply_buy_discount_fee_rate,a.data.prodInfo.trade_fee_rate.apply_buy_fee_rate)),n&&(a.data.cost=n.coast,a.data.realCost=n.realCoast),a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(a.data.amount)>a.data.AccountData.currentPlus.amount&&(a.data.AccountData.ctrlData.accountType=p.ACCOUNT_TYPE.WEBANK_CARD),a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.WEBANK_CARD&&parseFloat(a.data.amount)>a.data.AccountData.webankAccount.amount){if(!(a.data.AccountData.otherBankAccount.otherAccountList&&a.data.AccountData.otherBankAccount.otherAccountList.length>0))return a.data.showNeedBindCard=!0,!1;a.data.AccountData.ctrlData.accountType=p.ACCOUNT_TYPE.OTHER_BANK_CARD,a.data.AccountData.otherBankAccount.cardInfo.bankBinCode=a.data.AccountData.otherBankAccount.otherAccountList[0].other_bank_bin_code,a.data.AccountData.otherBankAccount.cardInfo.userName=a.data.AccountData.otherBankAccount.otherAccountList[0].other_name,a.data.AccountData.otherBankAccount.cardInfo.cardNo=a.data.AccountData.otherBankAccount.otherAccountList[0].other_account,a.data.AccountData.otherBankAccount.cardInfo.cardTypeCode=a.data.AccountData.otherBankAccount.otherAccountList[0].other_card_type_code,a.data.AccountData.otherBankAccount.cardInfo.cardType=a.data.AccountData.otherBankAccount.otherAccountList[0].other_card_type,a.data.AccountData.otherBankAccount.cardInfo.bankName=a.data.AccountData.otherBankAccount.otherAccountList[0].other_bank_name}return a.data.showInputAct=!0,a.data.showInputResult=!0,a.data.showInputAmountTips=!1,a.data.showNeedBindCard=!1,!0};a.focusInput=function(){a.data.showInputAct=!1,a.data.showInputResult=!1,a.data.showInputAmountTips=!1,a.data.showNeedBindCard=!1},a.blurInput=function(){a.data.amount&&""!=a.data.amount&&Y()},a.changeInput=function(){var t=!1;return a.data.amount&&""!=a.data.amount&&a.data.isAgreed&&a.data.AccountData.ctrlData.accountType!=p.ACCOUNT_TYPE.INVALID_TYPE||(a.data.ButtonClass="btn-c off"),a.data.amount>=a.data.minAmount&&(t=!0),a.data.ButtonClass=t&&a.data.isAgreed&&a.data.AccountData.ctrlData.accountType!=p.ACCOUNT_TYPE.INVALID_TYPE?"btn-c":"btn-c off",t};var V=function(){a.data.pwdSubTitle="购买"+a.data.prodInfo.on_sale_desc;var t;a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.WEBANK_CARD?t="使用微众卡支付":a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.CURRENT_PLUS?t="使用活期+支付":(t="使用"+a.data.AccountData.otherBankAccount.cardInfo.bankName,t+=a.data.AccountData.otherBankAccount.cardInfo.cardType,t+=o.abridgeAccountNumber(a.data.AccountData.otherBankAccount.cardInfo.cardNo)+"支付"),a.data.payWayDesc=t,a.data.pwdTransDesc=parseFloat(a.data.amount).toFixed(2)+"元",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,o){t!==o&&(a.data.isPwdShow=!1,F())}),a.onClickPurchase=function(){return"btn-c off"==a.data.ButtonClass?void(a.changeInput()&&(a.data.isAgreed?a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.INVALID_TYPE&&o.makeToast(STRING_TABLE.PLEASE_CHECK_SELECT_PAYACCOUNT,"short"):o.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"))):void(Y()&&(x()||V()))};var F=function(){var n=0;A.getData()&&A.getData().isForce&&(n=A.getData().isForce);var c={};a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.WEBANK_CARD?c.pay_flag=p.ACCOUNT_TYPE.WEBANK_CARD:a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.CURRENT_PLUS?(c.pay_flag=p.ACCOUNT_TYPE.CURRENT_PLUS,c.pay_product_code="001234"):(c.pay_flag=p.ACCOUNT_TYPE.OTHER_BANK_CARD,c.card_no=a.data.AccountData.otherBankAccount.cardInfo.cardNo),c.transaction_amount=a.data.amount,c.user_pwd=a.data.vm.formData.confirmPassword.RSA,c.product_code=a.data.prodInfo.on_sale_code,c.redeem_type="1",c.is_capricious=n+"",a.data.resultObj={},a.data.resultObj.amount=a.data.amount,a.data.resultObj.onSaleCode=t.onSaleCode,a.data.showLoading=!0,u.requestStockPurchase(c).then(function(t){e.isProcessingState(t.ret_code)?K(p.ORDER_QUERY_TYPE.PURCHASE_STOCK,t.ret_data.trans_serno,c.product_code):(a.data.resultObj.result=t.ret_code,a.data.showLoading=!1,o.clearCurrentViewCache(),d.path("/stockPurchaseResult").search(a.data.resultObj)),O()},function(t){a.data.resultObj.result=t.ret_code,a.data.resultObj.failReason=t.ret_msg,a.data.showLoading=!1,e.isRetCodePwd(t.ret_code)?e.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a?V():2==a&&s.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&s.goPage()}):(o.clearCurrentViewCache(),d.path("/stockPurchaseResult").search(a.data.resultObj))})},K=function(t,n,c){e.checkProcessingState(t,n,c).then(function(t){a.data.resultObj.result=t.retCode,a.data.resultObj.failReason=t.retMsg,a.data.showLoading=!1,o.clearCurrentViewCache(),d.path("/stockPurchaseResult").search(a.data.resultObj)})},x=function(){if(a.data.AccountData.ctrlData.accountType==p.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=gBankLimit[a.data.AccountData.otherBankAccount.cardInfo.bankBinCode];if(!t)return!1;if(parseFloat(a.data.amount)>parseFloat(t.perOne))return a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="超过银行卡限额，"+a.data.AccountData.otherBankAccount.cardInfo.bankName+a.data.AccountData.otherBankAccount.cardInfo.cardType+"单笔"+t.perOne,parseFloat(t.perDay)>0&&(a.data.outValue.oneLineTextLeft+="，单日"+t.perDay),a.data.outValue.oneLineTextLeft+="。如需要大额度购买，请先转账至微众卡。",a.data.outValue.twoButtonText1="转账指引",a.data.outValue.twoButtonText2="关闭",a.data.outValue.popClose=function(a){1==a&&m.goPage("0")},!0}return!1};a.bindCard=function(){N.goToBindCard()},a.onClickProdDetail=function(){d.path("/stockProductDetail/"+a.data.prodInfo.on_sale_code+"/hideBuyButton")},a.onClickRules=function(){f.goPage(a.data.prodInfo.on_sale_code)},a.back=function(){A.backPage()},a.onHJViewActive=function(){var t=e.getPayableCardList();t&&t.length>0&&(a.data.AccountData.otherBankAccount.otherAccountList=t),U(),Y()},a.onHJViewDisActive=function(){},k()}]);app.controller("StockPurchaseResultController",["$scope","$location","utils","GLOBAL_CONSTANT","cgiService","TransRecordService","StockPurchaseResultService","ProdInfoService","LocationService","webankCommonService","essential","HJactionLoading","$q",function(a,t,e,o,d,r,n,i,s,c,l,u,_){a.data={};var S=_.defer(),f=function(){a.data.resultObj=t.search(),a.data.resultObj=t.search(),a.data.resultObj.redPacketErrorStr=["","红包正在派送，稍后请在交易记录中查询","红包发放失败啦，请稍后再试"][a.data.resultObj.redPacketError||0]||"",a.data.prodInfo=i.getProdInfo(a.data.resultObj.onSaleCode),a.data.result=a.data.resultObj.result,a.data.result===o.CGI_RET.CGI_PROCESSING||a.data.result===o.CGI_RET.CGI_PROCESSING_2?(a.data.isSuccShow=!1,a.data.isProcessing=!0,a.data.isFailedShow=!1):a.data.result==o.CGI_RET.CGI_SUCCESS||a.data.result==o.CGI_RET.CGI_SUCCESS_2?(a.data.isSuccShow=!0,a.data.isProcessing=!1,a.data.isFailedShow=!1):(a.data.isSuccShow=!1,a.data.isFailedShow=!0,a.data.isProcessing=!1,a.data.resultMsg=a.data.resultObj.failReason);var d={pro_code:a.data.resultObj.onSaleCode,isSuccess:a.data.isSuccShow,isProcessing:a.data.isProcessing};e.reportCustomEvent("stock_product_purchase_result",d),a.data.amount=a.data.resultObj.amount,a.data.today=e.getDate();var r=parseInt(a.data.prodInfo.confirm_share_time);(!e.isWorkDay(a.data.today)||parseInt(a.data.today.getHours())>=15)&&(r+=1),a.data.confirmDay=e.getNextWorkDay(r,a.data.today),a.data.checkDay=e.getNextWorkDay(r+1,a.data.today),p(),I()},p=function(){if(a.data.prodInfo.start_buy_date&&a.data.prodInfo.start_buy_time&&a.data.prodInfo.end_buy_date&&a.data.prodInfo.end_buy_time&&a.data.prodInfo.close_period_start_date&&a.data.prodInfo.close_period_start_time&&a.data.prodInfo.close_period_end_date&&a.data.prodInfo.close_period_end_time){var t=e.getDateByDateAndTimeString(a.data.prodInfo.start_buy_date,a.data.prodInfo.start_buy_time),o=e.getDateByDateAndTimeString(a.data.prodInfo.end_buy_date,a.data.prodInfo.end_buy_time),d=e.getDateByDateAndTimeString(a.data.prodInfo.close_period_start_date,a.data.prodInfo.close_period_start_time),r=e.getDateByDateAndTimeString(a.data.prodInfo.close_period_end_date,a.data.prodInfo.close_period_end_time),n=e.getDate();a.data.finishDay=e.getNextWorkDay(1,o),a.data.finishCheckDay=e.getNextWorkDay(1,a.data.finishDay),t>n?a.data.period=1:o>n?(a.data.period=2,a.data.isToday=e.isToday(o)?!0:!1):a.data.period=d>n?3:r>n?4:5}else a.data.period=5},I=function(){d.requestUserWealth().then(function(){S.resolve()},function(){S.resolve()}),a.data.isSuccShow&&c.setFinancialProductBuyTime(a.data.resultObj.onSaleCode,e.getDate().valueOf())};a.onClickViewProcess=function(){r.goPage(null,null,null,{stateStr:o.LOCATION_BACK_PATH.GO_TRANS_RECORD})},a.onClickRecom=function(){s.go(l.isFinancialHomeGray()?"financialHome":"financialRecommend")},a.onClickHome=function(){t.path("/home")},a.onClickDetail=function(){u.show(),S.promise.then(function(){u.hide(),s.go("myFinancialStock",null,null,{stateStr:o.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})})},f()}]),app.factory("StockPurchaseResultService",["$location","commonPath",function(a,t){return $.extend({},t,{locationHash:"/stockPurchaseResult"})}]);app.controller("StockRedeemController",["$scope","$stateParams","utils","cache","webankCommonService","$timeout","$location","session","cgiService","ResetPasswdService","StockTransRulesService","GLOBAL_CONSTANT","StockRedeemService","StockRedeemResultService","ProdInfoService",function(a,t,e,o,d,n,r,s,u,c,l,i,p,_,f){a.data={};var h=function(){e.reportCustomEvent("stock_product_redeem",t.onSaleCode),a.data.prodInfo=f.getProdInfo(t.onSaleCode);var n=o.getCacheInfo("wealthNew");a.data.productWealthData=d.parseRawWealthDataForGPProduct_V2(n,t.onSaleCode),m(),C(),a.data.share="",a.data.showInputAmountTips=!1,a.data.redeemButtonClass="btn-c off"},m=function(){a.data.today=e.getDate();var t=0;e.isWorkDay(a.data.today)?a.data.today.getHours()>=15?(a.data.showTipsFlag=1,t++):a.data.showTipsFlag=0:(a.data.showTipsFlag=2,t++),a.data.realValueDate=e.getNextWorkDay(t,a.data.today);var o=parseInt(a.data.prodInfo.redeem_to_custom_time);(!e.isWorkDay(a.data.today)||parseInt(a.data.today.getHours())>=15)&&(o+=1),a.data.finishDate=e.getNextWorkDay(o,a.data.today),a.data.redeemDay=a.data.prodInfo.redeem_to_custom_time};a.onClickRedeemAll=function(){a.data.share=parseFloat(a.data.productWealthData.share),a.blurInput()},a.blurInput=function(){if(a.data.redeemButtonClass="btn-c off",a.data.showInputAmountTips=!1,""!=a.data.share){if(parseFloat(a.data.share)<parseFloat(a.data.prodInfo.p_redeem_min_vol)&&parseFloat(a.data.share)!=parseFloat(a.data.productWealthData.share))return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="赎回份额"+a.data.prodInfo.p_redeem_min_vol+"份起");if(parseFloat(a.data.share)>=parseFloat(a.data.productWealthData.share))a.data.share=parseFloat(a.data.productWealthData.share);else if(parseFloat(a.data.productWealthData.share)-parseFloat(a.data.share)<parseFloat(a.data.prodInfo.p_min_hold_vol))return a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent="按基金公司规定，赎回后剩余份额应不少于"+a.data.prodInfo.p_min_hold_vol+"份");a.data.share=parseFloat(parseFloat(a.data.share).toFixed(2)),a.data.redeemButtonClass="btn-c"}},a.focusInput=function(){a.data.showInputAmountTips=!1};var C=function(){a.data.hideAmount="300",a.data.AccountData={},a.data.AccountData.webankAccount={},a.data.AccountData.webankAccount.priority=2,a.data.AccountData.webankAccount.isAvaliable=!0,a.data.AccountData.currentPlus={},a.data.AccountData.currentPlus.priority=1,a.data.AccountData.currentPlus.isAvaliable=!0,a.data.AccountData.ctrlData={},a.data.AccountData.ctrlData.title="选择收款账户",a.data.AccountData.ctrlData.accountType=i.ACCOUNT_TYPE.CURRENT_PLUS};a.onSelectPayWay=function(){a.showAccountSelector()},a.isWeBankAccount=function(){return a.data.AccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD},a.isCurrentPlus=function(){return a.data.AccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS},a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0;var A=function(){a.data.pwdSubTitle="赎回"+a.data.prodInfo.on_sale_desc,a.data.payWayDesc="",a.data.pwdTransDesc=parseFloat(a.data.share).toFixed(2)+"份",a.data.isPwdShow=!0};a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,D())}),a.onClickRedeem=function(){return e.isValidTransferAmount(a.data.share)?void("btn-c off"!=a.data.redeemButtonClass&&A()):(a.data.showInputAmountTips=!0,void(a.data.inputAmountTipsContent=STRING_TABLE.INVALID_TRANS_AMOUNT))},a.data.showLoading=!1;var D=function(){if("btn-c off"!=a.data.redeemButtonClass){a.data.showLoading=!0;var t={};if(t.pay_flag=3,t.transaction_amount=a.data.share,t.user_pwd=a.vm.formData.confirmPassword.RSA,t.product_code=a.data.prodInfo.on_sale_code,a.data.AccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD)t.pay_flag=i.ACCOUNT_TYPE.WEBANK_CARD;else{t.pay_flag=i.ACCOUNT_TYPE.CURRENT_PLUS,t.pay_product_code="001234";var e=o.getCacheInfo("personalInfo");null!=e&&(t.card_no=e.webank_card_no)}a.data.resultObj={},a.data.resultObj.share=a.data.share,u.requestStockRedeem(t).then(function(e){d.isProcessingState(e.ret_code)?T(i.ORDER_QUERY_TYPE.REDEEM_STOCK,e.ret_data.trans_serno,t.product_code):(a.data.resultObj.result=e.ret_code,a.data.resultObj.onSaleCode=a.data.prodInfo.on_sale_code,a.data.showLoading=!1,_.goPage(null,a.data.resultObj))},function(t){a.data.resultObj.result=t.ret_code,a.data.resultObj.failReason=t.ret_msg,a.data.resultObj.onSaleCode=a.data.prodInfo.on_sale_code,a.data.showLoading=!1,d.isRetCodePwd(t.ret_code)?d.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a?A():2==a&&c.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&c.goPage()}):_.goPage(null,a.data.resultObj)})}},T=function(t,e,o){d.checkProcessingState(t,e,o).then(function(t){a.data.resultObj.result=t.retCode,a.data.resultObj.failReason=t.retMsg,a.data.resultObj.onSaleCode=a.data.prodInfo.on_sale_code,a.data.showLoading=!1,_.goPage(null,a.data.resultObj)})};a.onClickRules=function(){l.goPage(a.data.prodInfo.on_sale_code)},a.onClickShare=function(){a.data.maskClass="p-mask show",a.data.maskTitle="可赎回份额",a.data.maskDetail="可赎回份额=总份额-不可赎回份额。",a.data.maskDetail2="总份额："+a.data.productWealthData.totalShare+"份",a.data.maskDetail3="不可赎回："+(parseFloat(a.data.productWealthData.totalShare)-parseFloat(a.data.productWealthData.share)).toFixed(2)+"份",a.data.maskDetail4="注：不可赎回份额指最新确认份额(当天确认份额需15:00后才可赎回)及赎回中的份额"},a.onClickCancelMask=function(){a.data.maskClass="p-mask hide"},a.back=function(){p.backPage()},a.onHJViewActive=function(){},a.onHJViewDisActive=function(){},h()}]);app.controller("StockRedeemResultController",["$scope","$location","utils","GLOBAL_CONSTANT","cgiService","StockProductDetailService","StockMyProdDetailService","StockRedeemService","StockRedeemResultService","ProdInfoService","HJactionLoading","$q","LocationService",function(e,t,a,o,c,r,n,d,l,s,i,u,S){e.data={};var C=u.defer(),_=function(){if(f(),e.data.resultObj=t.search(),e.data.result=e.data.resultObj.result,e.data.prodInfo=s.getProdInfo(e.data.resultObj.onSaleCode),e.data.result==o.CGI_RET.CGI_SUCCESS||e.data.result==o.CGI_RET.CGI_SUCCESS_2){e.data.isSuccShow=!0,e.data.today=a.getDate();var c=parseInt(e.data.prodInfo.redeem_to_custom_time);e.data.today.getHours()>=15&&(c+=1),e.data.redeemDay=a.getNextWorkDay(c,e.data.today)}else e.data.isSuccShow=!1,e.data.resultMsg=e.data.resultObj.failReason;var r={pro_code:e.data.resultObj.onSaleCode,isSuccess:e.data.isSuccShow};a.reportCustomEvent("stock_product_redeem_result",r)},f=function(){c.requestUserWealth().then(function(){C.resolve()},function(){C.resolve()})};e.onClickDetail=function(){S.go("stockMyProductDetail/"+e.data.resultObj.onSaleCode,null,null,{stateStr:o.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_DETAIL})},e.onClickRedeem=function(){l.backPage()},e.onClickBack=function(){i.show(),C.promise.then(function(){i.hide(),S.go("myFinancialStock",null,null,{stateStr:o.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})})},_()}]),app.factory("StockRedeemResultService",["commonPath",function(e){return $.extend({},e,{locationHash:"/stockRedeemResult"})}]);app.controller("StockHistoryCleanValueController",["$scope","$location","$stateParams","utils","cgiService","essential","StockProductDetailService","StockValueHistoryService","$timeout","$ionicScrollDelegate",function(e,t,a,r,n,i,c,o,l,u){var s=0,f=!1,d=0,v=0,g=0,D=u.$getByHandle("myContent"),_=[],h=function(t){if(t.sort(function(e,t){return t.date-e.date}),_=_?_.concat(t):t,_.length>1)for(var a=0;a<_.length-1;a++)if(!_[a].class){var r=_[a].realValue,n=_[a+1].realValue;_[a].diffRate=n?((r-n)/n*100).toFixed(2):0,_[a].class=_[a].diffRate>0?"item red":_[a].diffRate<0?"item green":"item"}var i={};$.each(_,function(e,t){var a=t.date.substr(0,4);i[a]?i[a].push(t):i[a]=[t]});var c=[];$.each(i,function(e,t){c.push({iYear:e,arr:t})}),c.sort(function(e,t){return t.iYear-e.iYear}),$.each(c,function(e,t){t.arr=t.arr.length>1?t.arr.slice(0,t.arr.length-1):[]}),e.incomeHistory=c},S=o.getData();S&&S.data&&(d=S.code,v=S.beginTime,g=S.endTime,s=v,_=[],h(S.data));var m=!1;e.loadMoreData=function(){if(!f&&!m){m=!0;var t=new Date(s.setDate(s.getDate()-1)),a=r.getYYYYMMDDStringByDate(t);s=new Date(s.setDate(s.getDate()-30));var i=r.getYYYYMMDDStringByDate(s);n.requestStockHistoryValue(d,i,a).then(function(t){if(e.$broadcast("scroll.infiniteScrollComplete"),t.ret_data){var a=0,r=0,n=0,i=[];for(var c in t.ret_data){a==n&&(r=t.ret_data[c].accu_net_value);var o;0==r?(o=0,n++):o=(t.ret_data[c].accu_net_value-r)/r*100,a++;var u={};u.date=t.ret_data[c].earnings_rate_date,u.realValue=t.ret_data[c].unit_net_value,u.accuValue=t.ret_data[c].accu_net_value,i.push(u)}i.length>0?(h(i),l(function(){D.resize()},50)):f=!0,l(function(){m=!1},50)}},function(){l(function(){m=!1},50),e.$broadcast("scroll.infiniteScrollComplete")})}},e.isMoreData=function(){return!f},e.back=function(){o.backPage()}}]);app.controller("StockTransRulesController",["$scope","$location","$stateParams","utils","cgiService","essential","StockTransRulesService","$http","$sce","envService","$stateParams",function(t,a,s,e,n,l,c,o,i,r,s){t.data={};var d=function(){t.data.tabClass1="item on",t.data.tabClass2="item",t.data.sectionClass1="",t.data.sectionClass2="hide";var a=r.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+s.onSaleCode+"/transRules1.html",e=r.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+s.onSaleCode+"/transRules2.html";o.get(i.trustAsResourceUrl(a)).success(function(a){t.data.sectionHtml1=i.trustAsHtml(a)}),o.get(i.trustAsResourceUrl(e)).success(function(a){t.data.sectionHtml2=i.trustAsHtml(a)})};t.onClickTab1=function(){t.data.tabClass1="item on",t.data.tabClass2="item",t.data.sectionClass1="",t.data.sectionClass2="hide"},t.onClickTab2=function(){t.data.tabClass1="item",t.data.tabClass2="item on",t.data.sectionClass1="hide",t.data.sectionClass2=""},t.back=function(){c.backPage()},d()}]);app.controller("StockAssetDetailController",["$scope","$location","$stateParams","utils","cgiService","essential","StockAssetDetailService","$http","$sce","envService","$stateParams",function(t,e,a,s,c,o,l,n,i,r,a){t.data={};var u=function(){var e=r.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+a.onSaleCode+"/assetDetail.html";n.get(i.trustAsResourceUrl(e)).success(function(e){t.data.sectionHtml=i.trustAsHtml(e)}),t.data.imgSrc="http://hjdata.webank.com/querydata/html/stock/"+a.onSaleCode+"/pie.png"};t.back=function(){l.backPage()},u()}]);app.controller("StockTransRatesController",["$scope","$location","$stateParams","utils","cgiService","essential","LocationService","$http","$sce","envService","$stateParams",function(t,e,a,s,c,n,o,r,i,l,a){t.data={};var u=function(){var e=l.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+a.onSaleCode+"/transRates.html";r.get(i.trustAsResourceUrl(e)).success(function(e){t.data.sectionHtml=i.trustAsHtml(e)})};t.back=function(){o.backPage()},u()}]);app.controller("StockProdManagerController",["$scope","$location","$stateParams","utils","cgiService","essential","StockProdManagerService","$http","$sce","envService","$stateParams",function(t,e,a,r,c,o,n,s,l,i,a){t.data={};var u=function(){var e=i.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+a.onSaleCode+"/prodManager.html";s.get(l.trustAsResourceUrl(e)).success(function(e){t.data.sectionHtml=l.trustAsHtml(e)})};t.back=function(){n.backPage()},u()}]);app.controller("StockMoreDetailController",["$scope","$location","$stateParams","utils","cgiService","essential","StockMoreDetailService","$http","$sce","envService","dataService",function(t,e,a,r,o,n,c,l,s,i){t.data={};var p=t.data,v=a.onSaleCode;t.code=v;var u=function(){var t=i.getEnvVariable().DATA_CGI_PREFIX+"html/stock/"+a.onSaleCode+"/moreDetail2.html";l.get(s.trustAsResourceUrl(t)).success(function(t){t=t.toString();var e=t.split(/\n{1}[^\n]*<!--INSERTNOTICE-->[^\n]*\n{1}/);if(p.part1="",p.part2="",e.length>0){p.part1=e[0];for(var a=1;a<e.length;a++)p.part2+=e[a]}else p.part1=t;p.part1=s.trustAsHtml(p.part1),p.part2=s.trustAsHtml(p.part2)})};t.back=function(){c.backPage()},u()}]);app.controller("StockConfirmPurchaseDetailController",["$scope","$location","$stateParams","utils","cgiService","essential","StockConfirmPurchaseDetailService","$http","$sce","envService","$stateParams","cache","webankCommonService","ResetPasswdService","ProdInfoService",function(t,a,e,o,d,r,n,_,s,i,e,u,c,p,f){t.data={};var l=function(){t.data.prodInfo=f.getProdInfo(e.onSaleCode),y();var a=u.getCacheInfo("confirmingList"),d=[];if(a.product_list){for(var r=0;r<a.product_list.length;++r)if(a.product_list[r].prod_code==e.onSaleCode&&"60"==a.product_list[r].trans_type){var n={};n.seq=a.product_list[r].trans_serno,n.buyTime=a.product_list[r].trans_time,n.pay_flag=a.product_list[r].pay_flag,n.bank_name=a.product_list[r].bank_name,n.card_type=a.product_list[r].card_type,n.acct_no=a.product_list[r].acct_no,n.buyDate=o.getDateByYYYYMMDDString(a.product_list[r].trans_date),n.cancelDate=!o.isWorkDay(n.buyDate)||parseInt(a.product_list[r].trans_time.substr(0,2))>=15?o.getNextWorkDay(1,n.buyDate):o.getNextWorkDay(0,n.buyDate);var _=parseInt(t.data.prodInfo.confirm_share_time);(!o.isWorkDay(n.buyDate)||parseInt(a.product_list[r].trans_time.substr(0,2))>=15)&&(_+=1),n.confirmDate=o.getNextWorkDay(_,n.buyDate);var s=_+1;if(n.showDate=o.getNextWorkDay(s,n.buyDate),n.amount=parseFloat(a.product_list[r].applicationamount).toFixed(2),n.showCancel=!1,5!=t.data.period?n.realCost=o.getCoastByAmount(t.data.prodInfo.offer_buy_fee_rate2,n.amount,t.data.prodInfo.offer_buy_discount_fee_rate,t.data.prodInfo.offer_buy_fee_rate).realCoast:t.data.prodInfo.trade_fee_rate&&(n.realCost=o.getCoastByAmount(t.data.prodInfo.trade_fee_rate.apply_buy_fee_rate2,n.amount,t.data.prodInfo.trade_fee_rate.apply_buy_discount_fee_rate,t.data.prodInfo.trade_fee_rate.apply_buy_fee_rate).realCoast),t.data.prodInfo.start_buy_date&&t.data.prodInfo.start_buy_time&&t.data.prodInfo.end_buy_date&&t.data.prodInfo.end_buy_time&&t.data.prodInfo.close_period_start_date&&t.data.prodInfo.close_period_start_time&&t.data.prodInfo.close_period_end_date&&t.data.prodInfo.close_period_end_time){var i=o.getDateByDateAndTimeString(t.data.prodInfo.end_buy_date,t.data.prodInfo.end_buy_time);n.finishDate=o.getNextWorkDay(1,i),n.finishCheckDay=o.getNextWorkDay(1,n.finishDate)}d.push(n)}t.data.list=d}m()},y=function(){if(t.data.prodInfo.start_buy_date&&t.data.prodInfo.start_buy_time&&t.data.prodInfo.end_buy_date&&t.data.prodInfo.end_buy_time&&t.data.prodInfo.close_period_start_date&&t.data.prodInfo.close_period_start_time&&t.data.prodInfo.close_period_end_date&&t.data.prodInfo.close_period_end_time){var a=o.getDateByDateAndTimeString(t.data.prodInfo.start_buy_date,t.data.prodInfo.start_buy_time),e=o.getDateByDateAndTimeString(t.data.prodInfo.end_buy_date,t.data.prodInfo.end_buy_time),d=o.getDateByDateAndTimeString(t.data.prodInfo.close_period_start_date,t.data.prodInfo.close_period_start_time),r=o.getDateByDateAndTimeString(t.data.prodInfo.close_period_end_date,t.data.prodInfo.close_period_end_time),n=o.getDate();t.data.period=a>n?1:e>n?2:d>n?3:r>n?4:5}else t.data.period=5};t.onClickCancel=function(a){t.data.pwdSubTitle="撤销购买"+t.data.prodInfo.on_sale_desc,t.data.pwdTransDesc=parseFloat(a.amount).toFixed(2)+"元",t.data.seq=a.seq,t.data.isPwdShow=!0},t.$watch("data.sigOnPwdCommit",function(a,e){a!==e&&(t.data.isPwdShow=!1,I())});var m=function(){d.requestProductCanCancelList(e.onSaleCode).then(function(a){if(a&&a.ret_data&&a.ret_data.list)for(var e=0;e<a.ret_data.list.length;++e)for(var o=0;o<t.data.list.length;++o)a.ret_data.list[e].ori_biz_seq_id==t.data.list[o].seq&&(t.data.list[o].showCancel=!0)},function(){})},I=function(){var o={};o.trans_serno=t.data.seq,o.user_pwd=t.vm.formData.confirmPassword.RSA,o.prod_code=e.onSaleCode,d.requestStockCancelProduct(o).then(function(){var e={};e.isSuccess=!0,e.action="purchase",e.prodCode=t.data.prodInfo.on_sale_code,a.path("/stockCancelResult").search(e)},function(e){var o={};o.isSuccess=!1,o.reason=e.ret_msg,o.action="purchase",o.prodCode=t.data.prodInfo.on_sale_code,c.isRetCodePwd(e.ret_code)?c.isRetCodePwdRetry(e.ret_code)?(t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=e.ret_msg,t.data.outValue.twoButtonText1="重试",t.data.outValue.twoButtonText2="忘记密码",t.data.outValue.popClose=function(a){1==a?t.data.isPwdShow=!0:2==a&&p.goPage()}):(t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=e.ret_msg,t.data.outValue.twoButtonText1="取消",t.data.outValue.twoButtonText2="忘记密码",t.data.outValue.popClose=function(t){1==t||2==t&&p.goPage()}):a.path("/stockCancelResult").search(o)})};t.back=function(){n.backPage()},l()}]);app.controller("StockConfirmRedeemDetailController",["$scope","$location","$stateParams","utils","cgiService","essential","StockConfirmRedeemDetailService","$http","$sce","envService","cache","webankCommonService","ResetPasswdService","ProdInfoService",function(t,e,a,o,r,d,s,n,i,c,l,u,_,p){t.data={};var m=function(){t.data.prodInfo=p.getProdInfo(a.onSaleCode);var e=l.getCacheInfo("confirmingList"),r=[];if(e.product_list){for(var d=0;d<e.product_list.length;++d)if(e.product_list[d].prod_code==a.onSaleCode&&"62"==e.product_list[d].trans_type){var s={};s.seq=e.product_list[d].trans_serno,s.redeemTime=e.product_list[d].trans_time,s.pay_flag=e.product_list[d].pay_flag,s.bank_name=e.product_list[d].bank_name,s.card_type=e.product_list[d].card_type,s.acct_no=e.product_list[d].acct_no,s.redeemDate=o.getDateByYYYYMMDDString(e.product_list[d].trans_date),s.cancelDate=!o.isWorkDay(s.redeemDate)||parseInt(e.product_list[d].trans_time.substr(0,2))>=15?o.getNextWorkDay(1,s.redeemDate):o.getNextWorkDay(0,s.redeemDate);var n=parseInt(t.data.prodInfo.redeem_to_custom_time);(!o.isWorkDay(s.redeemDate)||parseInt(e.product_list[d].trans_time.substr(0,2))>=15)&&(n+=1),s.finishDate=o.getNextWorkDay(n,s.redeemDate);var i=parseInt(t.data.prodInfo.net_publish_time);(!o.isWorkDay(s.redeemDate)||parseInt(e.product_list[d].trans_time.substr(0,2))>=15)&&(i+=1),s.showValueDate=o.getNextWorkDay(i,s.redeemDate),s.amount=parseFloat(e.product_list[d].confirmedamount).toFixed(2),s.vol=parseFloat(e.product_list[d].applicationvol).toFixed(2),r.push(s)}t.data.list=r}f()};t.onClickCancel=function(e){t.data.pwdSubTitle="撤销赎回"+t.data.prodInfo.on_sale_desc,t.data.pwdTransDesc=parseFloat(e.vol).toFixed(2)+"份",t.data.seq=e.seq,t.data.isPwdShow=!0},t.$watch("data.sigOnPwdCommit",function(e,a){e!==a&&(t.data.isPwdShow=!1,D())});var f=function(){r.requestProductCanCancelList(a.onSaleCode).then(function(e){if(e&&e.ret_data&&e.ret_data.list)for(var a=0;a<e.ret_data.list.length;++a)for(var o=0;o<t.data.list.length;++o)e.ret_data.list[a].ori_biz_seq_id==t.data.list[o].seq&&(t.data.list[o].showCancel=!0)},function(){})},D=function(){var a={};a.trans_serno=t.data.seq,a.user_pwd=t.vm.formData.confirmPassword.RSA,a.prod_code=t.data.prodInfo.on_sale_code,r.requestStockCancelProduct(a).then(function(){var a={};a.isSuccess=!0,a.action="redeem",a.prodCode=t.data.prodInfo.on_sale_code,e.path("/stockCancelResult").search(a)},function(a){var o={};o.isSuccess=!1,o.reason=a.ret_msg,o.action="redeem",o.prodCode=t.data.prodInfo.on_sale_code,u.isRetCodePwd(a.ret_code)?u.isRetCodePwdRetry(a.ret_code)?(t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=a.ret_msg,t.data.outValue.twoButtonText1="重试",t.data.outValue.twoButtonText2="忘记密码",t.data.outValue.popClose=function(e){1==e?t.data.isPwdShow=!0:2==e&&_.goPage()}):(t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=a.ret_msg,t.data.outValue.twoButtonText1="取消",t.data.outValue.twoButtonText2="忘记密码",t.data.outValue.popClose=function(t){1==t||2==t&&_.goPage()}):e.path("/stockCancelResult").search(o)})};t.back=function(){s.backPage()},m()}]);app.controller("StockCancelResultController",["$scope","$location","utils","GLOBAL_CONSTANT","cgiService","WebankCardService","StockMyProdDetailService","TransRecordService","StockCancelResultService","$q","HJactionLoading","LocationService",function(e,o,t,a,n,c,l,i,r,s,u,d){e.data={};var C=s.defer(),A=function(){e.data.obj=o.search(),"purchase"==e.data.obj.action?(e.data.showType1=!0,e.data.showType2=!1):"redeem"==e.data.obj.action&&(e.data.showType1=!1,e.data.showType2=!0),n.requestUserWealth().then(function(){C.resolve()},function(){C.resolve()})};e.onClickBack=function(){u.show(),C.promise.then(function(){u.hide(),d.go("myFinancialStock",null,null,{stateStr:a.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_PAGE})})},e.onClickStockMyProd=function(){d.go("stockMyProductDetail/"+e.data.obj.prodCode,null,null,{stateStr:a.LOCATION_BACK_PATH.BACKTO_MY_FINANCIAL_DETAIL})},e.onClickTranLog=function(){i.goPage(null,null,null,{stateStr:a.LOCATION_BACK_PATH.GO_TRANS_RECORD})},A()}]),app.factory("StockCancelResultService",["utils","commonPath",function(e,o){return $.extend({},o,{locationHash:"/stockRedeem"})}]);app.controller("RegisterBindCardController1",["$scope","$timeout","$location","GLOBAL_CONSTANT","essential","utils","$stateParams","cgiService","cache","RegisterService","LoginService","CheckFaceService","HJactionPop",function(a,t,e,n,o,r,_,d,C,s,i,c,E){var T=a.data={};T.isUsingCMBCard=!1;var u=!1,p=function(){a.data.para=s.getUserPara(),a.data.para&&(a.data.name=a.data.para.personal_name,a.data.phone=a.data.para.phone_no,a.data.realPhone=a.data.phone),a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){l()},a.data.nextButtonController="btn-c off",a.data.showBankIcon=!1,a.data.maskClass="p-mask hide",r.reportCustomEvent(n.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,n.TRANS_OPEN_ACCOUNT_STATISTIC.ENTER_PAGE_OPEN_ACCOUNT_PAGE)},N="",A=!1;a.changeBankCard=function(t){if(a.data.nextButtonController="btn-c off",a.data.card&&(a.data.card.length<6&&(a.data.showInputBankCardTips=!1,a.data.showBankIcon=!1,a.data.bankImg="",A=!1,T.isUsingCMBCard=!1,N=""),a.data.card&&""!=a.data.card)){if(!r.isNumber(a.data.card||null))return a.data.showInputBankCardTips=!0,void(a.data.inputBankCardTipsContent=STRING_TABLE.INCORRECT_BANK_CARD_NO);if(a.data.card.length>=10&&l(),T.card.length>=6){r.clickButtonReport("openaccount_cardnum");var e=T.card.length>=10?10:6,o=T.card.slice(0,e);t&&A&&(o=a.data.card),a.data.showBankIcon||A&&!t||N!=o&&(N=o,d.requestBankInfo(o,"reg").then(function(t){return A=!1,10!=t.ret_data.card_typeid?(a.data.showInputBankCardTips=!0,a.data.inputBankCardTipsContent="暂不支持信用卡",a.data.nextButtonController="btn-c off",void(a.data.showBankIcon=!1)):(T.isUsingCMBCard=t.ret_data.trans_open_account,T.isUsingCMBCard&&r.reportCustomEvent(n.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,n.TRANS_OPEN_ACCOUNT_STATISTIC.INPUT_CMB_CARD),a.data.cardTypeId=t.ret_data.card_typeid,a.data.cardType=t.ret_data.card_type,a.data.bankName=t.ret_data.bank_name,r.loadImage("../img/bankHead/yh-"+(t.ret_data.clear_no_pbc||0)+"@nb.png",function(t,e){a.data.bankImg=t?e:""}),a.data.showBankIcon=!0,a.data.showInputBankCardTips=!1,void(a.data.inputBankCardTipsContent=""))},function(t){if(a.data.bankImg="",a.data.showBankIcon=!1,t.ret_code&&t.ret_code.length>=4){if("0080"==t.ret_code.slice(t.ret_code.length-4,t.ret_code.length))return a.data.showInputBankCardTips=!1,a.data.inputBankCardTipsContent="",void(A=!0);if("0079"==t.ret_code.slice(t.ret_code.length-4,t.ret_code.length))return a.data.inputBankCardTipsContent="暂不支持该银行",a.data.showInputBankCardTips=!0,void(a.data.nextButtonController="btn-c off")}else A=!1;return t.ret_code==n.CGI_RET.CGI_UNUSED_CARD||t.ret_code==n.CGI_RET.CGI_UNUSED_CARD_2?(6==o.length?(a.data.inputBankCardTipsContent="",a.data.showInputBankCardTips=!1):(a.data.inputBankCardTipsContent="暂不支持该银行",a.data.showInputBankCardTips=!0),void(a.data.nextButtonController="btn-c off")):void 0}))}}},a.onClickChangeCard=function(){T.isUsingCMBCard=!1,a.data.showInputBankCardTips=!1,a.data.nextButtonController="btn-c off",a.data.showBankIcon=!1,a.data.card="",a.data.cardTypeId="",a.data.cardType="",a.data.bankName="",r.reportCustomEvent(n.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,n.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_CHANGE_CARD_IN_OPEN_ACCOUNT_PAGE)},a.changePhone=function(){if(a.data.showInputPhoneTips=!1,a.data.nextButtonController="btn-c off",a.data.phone&&""!=a.data.phone){var t=r.isValidPhoneInput(a.data.phone);"fail"==t?(a.data.showInputPhoneTips=!0,a.data.inputTelTipsContent="请使用真实电话，方便接收正确验证码"):"finish"==t&&(r.clickButtonReport("openaccount_cardphone"),a.data.realPhone=a.data.phone,l())}};var l=function(){var t=!1;return T.isUsingCMBCard?r.isNumber(a.data.card||null)&&(t=!0):r.isNumber(a.data.card||null)&&r.isValidPhoneNumber(a.data.realPhone)&&!a.data.showInputBankCardTips&&!a.data.showInputPhoneTips&&(t=!0),a.data.nextButtonController=t?T.isUsingCMBCard?"btn-c":a.data.isAgreed?"btn-c":"btn-c off":"btn-c off",t};a.onClickNextStep=function(){return"btn-c off"==a.data.nextButtonController?void(l()&&r.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short")):(r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CLICK_NEXT_STEP),void(T.isUsingCMBCard?(r.reportCustomEvent(n.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,n.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_NEXT_STEP_IN_OPEN_ACCOUNT_PAGE),a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="通过汇款方式绑卡验证的账户，不能直接扣款，不能解绑卡，不能再绑定其他银行卡",a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="确定",a.data.outValue.popClose=function(a){1==a?r.reportCustomEvent(n.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,n.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_DIALOG_CANCEL_WHEN_OPEN_ACCOUNT):2==a&&(r.reportCustomEvent(n.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,n.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_DIALOG_CONTINUE_WHEN_OPEN_ACCOUNT),h())}):"光大银行"==a.data.bankName?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="请确保已开通光大银行个人网银",a.data.outValue.oneButtonText="知道了",a.data.outValue.popClose=function(a){0==a||1==a&&h()}):"上海银行"==a.data.bankName?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="请确保已开通上海银行的银联在线支付功能",a.data.outValue.oneButtonText="知道了",a.data.outValue.popClose=function(a){0==a||1==a&&h()}):h()))};var h=function(){if(r.clickButtonReport("openaccount_confirm"),a.data.realPhone==a.data.para.phone_no||T.isUsingCMBCard)O();else{var t={};t.phone_no=a.data.realPhone,a.data.nextButtonController="btn-c off",d.requestRegisterOTP(t).then(function(){a.data.nextButtonController="btn-c",a.data.para.other_card_no=a.data.card,a.data.para.other_phone_no=a.data.realPhone,a.data.para.bank_name=a.data.bankName,a.data.para.card_type=a.data.cardType,s.saveUserPara(a.data.para),s.saveRegisterSession2(a.data),e.path("/registerAndBindCard2")},function(t){a.data.nextButtonController="btn-c",r.makeToast(t.ret_msg,"short")})}},O=function(){a.data.nextButtonController="btn-c off";var _={};if(_.personal_name=a.data.para.personal_name,_.personal_identify_no=a.data.para.personal_identify_no,_.personal_identify_type="01",_.phone_no=a.data.para.phone_no,_.phone_check_num=a.data.para.phone_check_num,_.other_name=a.data.para.personal_name,_.otp_sec_id=a.data.para.otpSession,_.user_pwd=a.data.para.password,_.other_card_no=a.data.card,_.other_phone_no=a.data.realPhone,_.other_phone_check_num="",_.extra_info="REG",_.contract_ver_wt=n.USER_PROTOCOL_VER.WTKK_VER,_.contract_ver_kh=n.USER_PROTOCOL_VER.KH_VER,_.yd_suc_time=a.data.para.otp_pass_time,_.vip_card_no=a.data.para.vip_card_no,a.data.reg_faceck_sec_id&&(_.reg_faceck_sec_id=a.data.reg_faceck_sec_id),c.getFaceId(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT)&&(_.face_id=c.getFaceId(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT)),"phone"==C.getUserInfo().platform)return r.makeToast("开户申请已提交，七个工作日内我们会确认您的开户资料"),s.clearRegister(),void e.path("/default");var p=!1;a.data.showLoading=!0,d.requestRegisterAndBindCard(_).then(function(){return u&&r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.REG_SUCCESS),o.exchangeWebankToken()},function(_){return _.ret_code==n.CGI_RET.CGI_RET_UNSAFE_OPEN_ACCOUNT?(r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.HIT_UNSAFE_ACCOUNT),u=p=!0,a.data.showLoading=!1,E.show({oneLineTextLeft:"为了保障您的账户安全，需要进行人脸验证",twoButtonText1:"放弃开户",twoButtonText2:"人脸验证",popClose:function(o){2==o?(r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CLICK_CHECK_FACE),a.data.reg_faceck_sec_id=_.ret_data.reg_faceck_sec_id,c.startFaceVerify(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT,s.getUserPara().ecif).then(function(){t(function(){r.makeToast("人脸验证通过","short")},500),r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CHECK_FACE_SUCCESS);var e={};e.module_id="REG_SEC_FACECK",e.data_list=[];var o={};o.check_result=S.SUCCESS,o.reg_faceck_sec_id=a.data.reg_faceck_sec_id,e.data_list.push(o),d.requestReportData(e),a.data.showLoading=!1,l(),O()},function(){f(!1)},function(){f(!0)})):(r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CLICK_STOP_REG),s.clearRegister(),e.path("/default"))}}),o.resolve()):(r.makeToast(_.ret_msg,"short"),o.reject())}).then(function(){return p?void 0:(C.setUserStatus(n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),i.getLoginBankData())},function(){return o.reject()}).then(function(){if(!p){var t={};t.bank_name=a.data.bankName,t.card_type=a.data.cardType,t.card_no=a.data.card,a.data.showLoading=!1,s.saveResultPara(t),T.isUsingCMBCard?(s.saveUserPara(a.data.para),a.data.card="",s.saveRegisterSession2(a.data),e.path("/openAccountWithTrans")):e.path("/registerAndBindCard3")}},function(){a.data.showLoading=!1,s.clearRegister(),e.path("/default")})};a.specialBack=function(){e.path("/register")},a.agreementCallback=function(){s.saveRegisterSession2(a.data)},a.onClickTips=function(){a.data.maskClass="p-mask show",a.data.maskTitle="绑卡说明",a.data.maskDetail="暂支持工行、农行、中行、建行、交行、中信、招行、广发、光大、平安、民生、兴业、华夏、浦发、邮储、上海银行的储蓄卡。暂不支持信用卡。"},a.onClickCancelMask=function(){a.data.maskClass="p-mask hide"};var S={SUCCESS:"1",FAILURE:"2"},f=function(t){if(r.makeToast("开户失败"),t)r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CHECK_FACE_CANCEL);else{var o={};o.module_id="REG_SEC_FACECK",o.data_list=[];var _={};_.check_result=S.FAILURE,_.reg_faceck_sec_id=a.data.reg_faceck_sec_id,o.data_list.push(_),r.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CHECK_FACE_FAILURE),d.requestReportData(o)}s.clearRegister(),e.path("/default")};void 0==s.resumeRegisterSession2()?p():T=a.data=s.resumeRegisterSession2()}]);app.controller("RegisterBindCardController2",["$scope","$timeout","$location","GLOBAL_CONSTANT","essential","utils","$stateParams","cgiService","cache","RegisterService","LoginService","HJactionPop","CheckFaceService",function(t,a,e,n,o,_,r,d,i,s,C,c,E){t.data={};var u=!1,p=function(){t.data.para=s.getUserPara(),t.data.cardPhone=t.data.para.other_phone_no,t.data.otpButtonClass="register-yz-btn",t.data.showOtpButton=!1,t.data.otpTimeout=60,document.addEventListener("pause",A,!1),document.addEventListener("resume",O,!1),T(),t.data.nextButtonController="btn-c off"},T=function(){return t.data.otpTimeout-=1,t.data.otpTimeout<=0?(t.data.showOtpButton=!0,document.removeEventListener("pause",A,!1),void document.removeEventListener("resume",O,!1)):void a(function(){T()},1e3)},A=function(){var a=_.getDate();t.data.pausetime=a.getTime()},O=function(){var a=_.getDate();t.data.resumetime=a.getTime(),t.data.pausetime&&(t.data.otpTimeout-=Math.round((t.data.resumetime-t.data.pausetime)/1e3),t.data.otpTimeout<0&&(t.data.otpTimeout=0),t.data.pausetime=0)};t.changeOtp=function(){if(t.data.showInputOtpTips=!1,t.data.nextButtonController="btn-c off",t.data.otpNum&&""!=t.data.otpNum){var a=_.isValidPhoneOtpInput(t.data.otpNum);"fail"==a?(t.data.showInputOtpTips=!0,t.data.inputOtpTipsContent="验证码不正确"):"finish"==a&&(t.data.nextButtonController="btn-c")}},t.onClickOtp=function(){var a={};a.phone_no=t.data.para.other_phone_no,a.usage_id=n.OPT_TYPE.OPEN_ACCOUNT,t.data.otpButtonClass="register-yz-btn off",d.requestRegisterOTP(a).then(function(){t.data.otpButtonClass="register-yz-btn",t.data.showOtpButton=!1,t.data.otpTimeout=60,document.addEventListener("pause",A,!1),document.addEventListener("resume",O,!1),T()},function(a){t.data.otpButtonClass="register-yz-btn",_.makeToast(a.ret_msg,"short")})};var N=function(){t.data.nextButtonController="btn-c off",t.data.otpTimeout=0;var r={};if(r.personal_name=t.data.para.personal_name,r.personal_identify_no=t.data.para.personal_identify_no,r.personal_identify_type="01",r.phone_no=t.data.para.phone_no,r.phone_check_num=t.data.para.phone_check_num,r.other_name=t.data.para.personal_name,r.otp_sec_id=t.data.para.otpSession,r.user_pwd=t.data.para.password,r.other_card_no=t.data.para.other_card_no,r.other_phone_no=t.data.para.other_phone_no,r.other_phone_check_num=t.data.otpNum,r.contract_ver_wt=n.USER_PROTOCOL_VER.WTKK_VER,r.contract_ver_kh=n.USER_PROTOCOL_VER.KH_VER,r.yd_suc_time=t.data.para.otp_pass_time,r.vip_card_no=t.data.para.vip_card_no,t.data.reg_faceck_sec_id&&(r.reg_faceck_sec_id=t.data.reg_faceck_sec_id),E.getFaceId(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT)&&(r.face_id=E.getFaceId(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT)),"phone"==i.getUserInfo().platform)return _.makeToast("开户申请已提交，七个工作日内我们会确认您的开户资料"),s.clearRegister(),void e.path("/default");t.data.showLoading=!0;var p=!1;d.requestRegisterAndBindCard(r).then(function(){return u&&_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.REG_SUCCESS),o.exchangeWebankToken()},function(r){return r.ret_code==n.CGI_RET.CGI_RET_UNSAFE_OPEN_ACCOUNT?(_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.HIT_UNSAFE_ACCOUNT),u=p=!0,c.show({oneLineTextLeft:"为了保障您的账户安全，需要进行人脸验证",twoButtonText1:"放弃开户",twoButtonText2:"人脸验证",popClose:function(o){2==o?(_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CLICK_CHECK_FACE),t.data.reg_faceck_sec_id=r.ret_data.reg_faceck_sec_id,E.startFaceVerify(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT,s.getUserPara().ecif).then(function(e){a(function(){_.makeToast("人脸验证通过","short")},500),_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CHECK_FACE_SUCCESS);var o={};o.module_id="REG_SEC_FACECK",o.data_list=[];var r={};r.check_result=f.SUCCESS,r.reg_faceck_sec_id=t.data.reg_faceck_sec_id,o.data_list.push(r),d.requestReportData(o),t.data.showLoading=!1,e.faceId&&N()},function(){m(!1)},function(){m(!0)})):(_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CLICK_STOP_REG),s.clearRegister(),e.path("/default"))}}),o.resolve()):(_.makeToast(r.ret_msg,"short"),o.reject())}).then(function(){return p?void 0:(i.setUserStatus(n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),C.getLoginBankData())},function(){return o.reject()}).then(function(){if(!p){var a={};a.bank_name=t.data.para.bank_name,a.card_type=t.data.para.card_type,a.card_no=t.data.para.other_card_no,t.data.showLoading=!1,s.saveResultPara(a),e.path("/registerAndBindCard3")}},function(){t.data.showLoading=!1,s.clearRegister(),e.path("/default")})};t.confirmBindBankCard=function(){"btn-c off"!=t.data.nextButtonController&&(_.clickButtonReport("openaccount_confirm2"),N())},t.specialBack=function(){e.path("/registerAndBindCard")};var f={SUCCESS:"1",FAILURE:"2"},m=function(a){if(_.makeToast("开户失败"),s.clearRegister(),a)_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CHECK_FACE_CANCEL);else{var o={};o.module_id="REG_SEC_FACECK",o.data_list=[];var r={};r.check_result=f.FAILURE,r.reg_faceck_sec_id=t.data.reg_faceck_sec_id,o.data_list.push(r),_.reportCustomEvent(n.REPORT_EVENT_NAME.SAFE_OPEN_ACCOUNT,n.SAFE_OPEN_ACCOUNT_STATISTIC.CHECK_FACE_FAILURE),d.requestReportData(o)}e.path("/default")};p()}]);app.controller("RegisterBindCardController3",["$scope","$timeout","$location","GLOBAL_CONSTANT","essential","utils","$stateParams","cgiService","cache","RegisterService","LoginService","localStorageService","HandPasswordService","WePayService",function(e,a,t,n,r,c,i,o,d,s,g,u,l){e.data={};var p=function(){e.data.para=s.getResultPara(),e.data.nickName=d.getUserInfo().username,e.data.bankName=e.data.para.bank_name,e.data.cardType=e.data.para.card_type,e.data.card=e.data.para.card_no,u.set("isReg","true"),_()};e.onClickFinish=function(){if(l.init(),l.setCheckHandWhenLoginFlag(!1),APP_ABILITY&&APP_ABILITY.indexOf(n.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0){var e=d.getUserInfo(),a=e.openid,r=e.picurl,c=e.username,i="",o=d.getCacheInfo("personalInfo");o&&o.webank_card_no&&""!=o.webank_card_no&&(i=o.gesture_password),NativeHandPassBirdge.updateNativeHandPassConfig(i,a,r,c)}"function"==typeof s.getSucceedPage()?s.getSucceedPage()():t.path("/"+s.getSucceedPage()),s.clearRegister()};var _=function(){var e={};e.module_id="create_acct",e.data_list={},e.data_list.phone=s.getUserPara().phone_no.substr(7,4),o.requestReportToTencent(e).then(function(){tracelog("上报开户成功成功")},function(){tracelog("上报开户成功失败")})};p()}]);app.controller("RegisterController1",["$rootScope","$scope","$timeout","$location","GLOBAL_CONSTANT","$RSA","homeService","utils","cgiService","essential","$stateParams","cache","webankCommonService","LoginService","RegisterService","$ionicViewSwitcher","LocationService","HJactionPop","CheckFaceService",function(t,a,e,o,n,d,i,s,u,r,p,c,l,_,f,h,C,m){function g(){a.data.isMaskShowing||(v&&"function"==typeof v&&v(),w(T))}function w(t){a.data.showLoading=!0,u.requestVipCardNo().then(function(e){a.data.showLoading=!1,tracelog(JSON.stringify(e)),I=e,t&&"function"==typeof t&&t()},function(){a.data.showLoading=!1,I=null,t&&"function"==typeof t&&t()})}function T(){var t=I,e="";if(t&&t.ret_data&&1==t.ret_data.card_status)a.data.vipCardNo=t.ret_data.card_no,e="只需3步，完善注册信息即可激活您的靓号"+t.ret_data.card_no+"。",v=m.show({oneLineTextLeft:e,oneButtonText:"立即激活",popClose:function(){s.clickButtonReport("vipCard_active")}});else if(t&&t.ret_data&&-1==t.ret_data.card_status){e="您的靓号已过期，请重新领取或直接开户获得普通帐号。";{t.ret_data.activity_url}v=m.show({oneLineTextLeft:e,twoButtonText1:"重新领取",twoButtonText2:"立即开户",popClose:function(a){1===a?(s.clickButtonReport("vipCard_reapply"),cordova.InAppBrowser.open(t.ret_data.activity_url,"_system","")):2===a&&s.clickButtonReport("vipCard_openAccount")}})}else if(t&&t.ret_data&&0==t.ret_data.card_status);else{var o=c.getUserInfo();if(!o||"qq"!=o.platform)return;v=m.show({oneLineTextLeft:"参与超级会员靓号活动的小伙伴，请稍后开户。（其他用户可正常开户）",oneButtonText:"知道了",popClose:function(){s.clickButtonReport("vipCard_error")}})}}a.data={};var I,v,B=function(){a.data.isAgreed=!1,a.data.onClickAgreeCheckbox=function(){L()},a.data.nextButtonClass="btn-c off",a.data.otpButtonClass="register-yz-btn off",a.data.isPwdKeyboardShow=!1,a.data.isPwdShow=!1,a.data.sigOnPwdCommit=0,a.data.showTimeoutButton=!0,a.IDCardInputData={},P(),S("enter_page");var t=c.getUserInfo();"qq"==t.platform&&w()},k=t.$on(n.GLOBAL_EVENT.EXCHANGE_TOKEN_SUCCESS_AFTER_RESUME,g),S=function(t,a){var e={module_id:"reg_click",obj_id:t,data_list:[{reg_step:1}]};void 0!=a&&(e.data_list[0].input=a||""),u.requestReportError(e)},P=function(){a.data.isMaskShowing=!0,a.data.maskClass="p-mask show",a.data.maskTitle="微众银行电子账户开户说明",a.data.maskSubTitle1="什么是微众银行电子账户？",a.data.maskDetail1="用户开通微众银行电子账户后，可以通过微众银行APP办理存款、理财等业务，以及在微众银行电子账户和已绑定的其他银行同名账户之间进行转账；微众银行电子账户目前暂不支持刷卡消费、给他人转账的功能。",a.data.maskSubTitle2="如何开通微众银行电子账户？",a.data.maskDetail2="用户输入本人姓名和身份证号码，设置交易密码并绑定用户在其他银行的同名储蓄卡，经微众银行核查验证通过后，即可开通微众银行电子账户。"};a.onClickCancelMask=function(){a.data.isMaskShowing=!1,a.data.maskClass="p-mask hide",T()};var V=function(){return a.data.timeout-=1,a.data.timeout<=0?(a.data.showTimeoutButton=!0,document.removeEventListener("pause",R,!1),void document.removeEventListener("resume",D,!1)):void e(function(){V()},1e3)},R=function(){var t=s.getDate();a.data.pausetime=t.getTime()},D=function(){var t=s.getDate();a.data.resumetime=t.getTime(),a.data.pausetime&&(a.data.timeout-=Math.round((a.data.resumetime-a.data.pausetime)/1e3),a.data.timeout<0&&(a.data.timeout=0),a.data.pausetime=0)};a.changeName=function(){if(a.data.showInputNameTips=!1,a.data.nextButtonClass="btn-c off",a.data.name&&""!=a.data.name){var t=s.isValidNameInput(a.data.name);"fail"==t?(a.data.showInputNameTips=!0,a.data.inputNameTipsContent="请输入真实姓名"):"finish"==t&&(s.clickButtonReport("openaccount_name"),L())}},a.changeIDCard=function(){if(a.data.showInputIDCardTips=!1,a.data.nextButtonClass="btn-c off",a.data.IDCard&&""!=a.data.IDCard){var t=s.isValidIDCardInput(a.data.IDCard);"fail"==t?(a.data.showInputIDCardTips=!0,a.data.inputIDCardTipsContent="身份证号不正确，快检查检查"):"finish"==t?s.isValidIDCardNumber(a.data.IDCard)?s.isOldEnough(a.data.IDCard,16)?(s.clickButtonReport("openaccount_cardid"),L()):(a.data.showInputIDCardTips=!0,a.data.inputIDCardTipsContent="暂时不支持未成年人开户"):(a.data.showInputIDCardTips=!0,a.data.inputIDCardTipsContent="身份证号不正确，快检查检查"):a.data.IDCard.length>=14&&(s.isOldEnough(a.data.IDCard,16)||(a.data.showInputIDCardTips=!0,a.data.inputIDCardTipsContent="暂时不支持未成年人开户"))}},a.blurIDCard=function(){S("input_id",a.data.IDCard),a.data.IDCard&&""!=a.data.IDCard&&(s.isValidIDCardNumber(a.data.IDCard)||(a.data.showInputIDCardTips=!0,a.data.inputIDCardTipsContent="身份证号不正确，快检查检查"))},a.blurName=function(){S("input_name",a.data.name)},a.blurPhone=function(){S("input_phone",a.data.phone)},a.blurOtp=function(){S("input_otp",a.data.otpNum)},a.changePhone=function(){if(a.data.showInputPhoneTips=!1,a.data.nextButtonClass="btn-c off",a.data.otpButtonClass="register-yz-btn off",a.data.phone&&""!=a.data.phone){var t=s.isValidPhoneInput(a.data.phone);"fail"==t?(a.showInputPhoneTips=!0,a.inputPhoneTipsContent="请使用真实电话，方便接收正确验证码"):"finish"==t&&(s.clickButtonReport("openaccount_phone"),a.data.otpButtonClass="register-yz-btn",L())}},a.changeOtp=function(){if(a.data.showInputOtpTips=!1,a.data.nextButtonClass="btn-c off",a.data.otpNum&&""!=a.data.otpNum){var t=s.isValidPhoneOtpInput(a.data.otpNum);"fail"==t?(a.data.showInputOtpTips=!0,a.data.inputOtpTipsContent="验证码不正确"):"finish"==t&&(s.clickButtonReport("openaccount_code"),L())}};var L=function(){var t=!1;return s.isValidName(a.data.name)&&s.isValidIDCardNumber(a.data.IDCard)&&s.isValidPhoneNumber(a.data.phone)&&s.isValidPhoneOtpNumber(a.data.otpNum)&&(t=!0),a.data.nextButtonClass=t&&a.data.isAgreed?"btn-c":"btn-c off",t};a.onClickOtp=function(){if("register-yz-btn off"!=a.data.otpButtonClass&&(s.clickButtonReport("openaccount_getcode"),s.isValidPhoneNumber(a.data.phone))){r.readSMSVerifyCode().then(function(t){a.data.otpNum||(a.data.otpNum=t.smsCode,L())});var t={};t.phone_no=a.data.phone,t.usage_id=n.OPT_TYPE.OPEN_ACCOUNT,a.data.otpButtonClass="register-yz-btn off",u.requestRegisterOTP(t).then(function(){a.data.otpButtonClass="register-yz-btn",a.data.showTimeoutButton=!1,a.data.timeout=60,document.addEventListener("pause",R,!1),document.addEventListener("resume",D,!1),V()},function(t){a.data.otpButtonClass="register-yz-btn",s.makeToast(t.ret_msg,"short")})}};var b=function(){C.go("register",null,null,{backNum:2},!0)};a.onClickRegister=function(){if(S("click_next"),"btn-c off"==a.data.nextButtonClass)return void(L()&&s.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"));s.clickButtonReport("openaccount_register");var t={};t.personal_name=a.data.name,t.personal_identify_no=a.data.IDCard.toUpperCase(),t.personal_identify_type="01",t.phone_no=a.data.phone,t.phone_check_num=a.data.otpNum,a.data.nextButtonClass="btn-c off",a.data.timeout=0,a.data.showLoading=!0,u.requestRegisterPreCheck(t).then(function(t){k(),a.data.nextButtonClass="btn-c",a.data.showLoading=!1,a.data.otpSession=encodeURIComponent(t.ret_data.otp_sec_id);var e={};e.personal_name=a.data.name,e.personal_identify_no=a.data.IDCard.toUpperCase(),e.personal_identify_type="01",e.phone_no=a.data.phone,e.phone_check_num=a.data.otpNum,e.otpSession=a.data.otpSession,e.ecif=t.ret_data.ecif_no,e.otp_pass_time=t.ret_data.yd_suc_time,e.vip_card_no=a.data.vipCardNo?a.data.vipCardNo:"",void 0==t.ret_data.acct_type?t.ret_data.had_reg?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="该身份证已开户，验证交易密码即可绑定登录的账号",a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="绑定账号",a.data.outValue.popClose=function(t){1==t||(a.data.isPwdShow=!0)}):(f.saveRegisterSession1(a.data),f.saveUserPara(e),o.path("/register2")):"1"==t.ret_data.acct_type?(f.saveRegisterSession1(a.data),f.saveUserPara(e),o.path("/register3")):"0"==t.ret_data.acct_type?(f.saveRegisterSession1(a.data),f.saveUserPara(e),o.path("/register2")):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="该身份证已开户，验证交易密码即可绑定登录的账号",a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="绑定账号",a.data.outValue.popClose=function(t){1==t||(a.data.isPwdShow=!0)})},function(t){a.data.nextButtonClass="btn-c",a.data.showLoading=!1,t.ret_data&&t.ret_data.otp_sec_id&&(a.data.otpSession=encodeURIComponent(t.ret_data.otp_sec_id)),t.ret_code==n.CGI_RET.CGI_REG_ALREADY_BIND_SAME?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="重新登录",a.data.outValue.popClose=function(t){1==t||(f.clearRegister(),_.setCallbackPage("home",b),o.path("/login"))}):t.ret_code==n.CGI_RET.CGI_REG_ALREADY_BIND_DIFF?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重新登录",a.data.outValue.twoButtonText2="更换绑定",a.data.outValue.popClose=function(t){1==t?(f.clearRegister(),_.setCallbackPage("home",b),o.path("/login")):2==t&&(a.data.isPwdShow=!0)}):s.makeToast(t.ret_msg,"short")})},a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,N())});var N=function(){var t={};t.user_pwd=a.vm.formData.confirmPassword.RSA,t.personal_name=a.data.name,t.personal_identify_no=a.data.IDCard.toUpperCase(),t.personal_identify_type="01",t.phone_no=a.data.phone,t.phone_check_num=a.data.otpNum,t.otp_sec_id=a.data.otpSession,a.data.showLoading=!0,u.requestbindOpenID(t).then(function(){a.data.showLoading=!1,a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="已绑定："+c.getUserInfo().username,a.data.outValue.oneButtonText="知道了",a.data.outValue.popClose=function(){a.data.showLoading=!0,r.exchangeWebankToken().then(function(){return c.setUserStatus(n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),_.getLoginBankData()},function(){return r.reject()}).then(function(){a.data.showLoading=!1,"function"==typeof f.getSucceedPage()?f.getSucceedPage()():o.path("/"+f.getSucceedPage()),f.clearRegister()},function(){a.data.showLoading=!1,f.clearRegister(),o.path("/default")})}},function(t){a.data.showLoading=!1,l.isRetCodePwd(t.ret_code)?l.isRetCodePwdRetry(t.ret_code)&&(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="取消",a.data.outValue.popClose=function(t){1==t&&(a.data.isPwdShow=!0)}):(s.makeToast(t.ret_msg),f.clearRegister(),o.path("/default"))})};a.specialBack=function(){S("click_back"),h.nextDirection("back"),"function"==typeof f.getBackPage()?f.getBackPage()():o.path("/"+f.getBackPage()),f.clearRegister()},a.agreementCallback=function(){f.saveRegisterSession1(a.data)},void 0==f.resumeRegisterSession1()?B():a.data=f.resumeRegisterSession1(),a.$on("$destroy",function(){k()})}]);app.controller("RegisterController2",["$scope","$timeout","$location","GLOBAL_CONSTANT","$RSA","homeService","utils","cgiService","essential","$stateParams","cache","webankCommonService","LoginService","RegisterService",function(a,t,o,d,r,e,s,i,n,w,c,p,m,P){a.data={};var S=function(){a.data.step=1,a.data.para=P.getUserPara(),a.data.isPwdShow=!1,a.data.isPwdKeyboardShow=!1,a.data.sigOnPwdCommit=0,a.data.isFactorNeeded=!1,t(function(){a.data.isPwdKeyboardShow=!0},200)};a.$watch("data.sigOnPwdCommit",function(d,r){if(d!==r)if(1==a.data.step){if(s.clickButtonReport("openaccount_setpwd"),!s.isPasswordStrongEnough(a.vm.formData.confirmPassword.MD5)||s.isPasswordWithUserBirthday(a.vm.formData.confirmPassword.MD5,a.data.para.personal_identify_no)||s.isPasswordWithUserPhone(a.vm.formData.confirmPassword.MD5,a.data.para.phone_no))return s.makeToast(STRING_TABLE.PASSWORD_TOO_WEAK,"short"),a.data.isPwdKeyboardShow=!1,void t(function(){a.data.isPwdKeyboardShow=!0},200);a.data.pwdStep1=a.vm.formData.confirmPassword.MD5,a.data.isPwdKeyboardShow=!1,a.data.step=2,t(function(){a.data.isPwdKeyboardShow=!0},200)}else 2==a.data.step&&(s.clickButtonReport("openaccount_setpwd2"),a.data.pwdStep1!==a.vm.formData.confirmPassword.MD5?(s.makeToast("两次输入不一致","short"),a.data.isPwdKeyboardShow=!1,a.data.step=1,t(function(){a.data.isPwdKeyboardShow=!0},200)):(a.data.password=s.getRSAString(a.vm.formData.confirmPassword.originPwd+"11111111"),a.data.isPwdKeyboardShow=!1,a.data.para.password=a.data.password,P.saveUserPara(a.data.para),o.path("/registerAndBindCard")))}),a.specialBack=function(){o.path("/register")},S()}]);app.controller("RegisterController3",["$scope","$timeout","$location","GLOBAL_CONSTANT","$RSA","homeService","utils","cgiService","essential","$stateParams","cache","webankCommonService","CheckFaceService","RegisterService",function(e,a,c,t,i,n,o,C,r,f,s,d,h,E){e.data={};var k=function(){h.setEcif(void 0),e.data.faceChecked=h.isFaceIdValid(t.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT)?!0:!1};e.onClickNext=function(){e.data.faceChecked?c.path("/register4"):h.startFaceVerify(t.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT,E.getUserPara().ecif).then(function(){a(function(){o.makeToast("人脸验证通过","short")},500),e.data.faceChecked=!0},function(){e.data.faceChecked=!1},function(){e.data.faceChecked=!1})},e.back=function(){E.go()},k()}]);app.controller("RegisterController4",["$scope","$timeout","$location","GLOBAL_CONSTANT","$RSA","homeService","utils","cgiService","essential","$stateParams","cache","webankCommonService","CheckFaceService","RegisterService","$MD5","HandPasswordService","LoginService",function(a,t,e,o,d,n,r,s,i,c,u,p,w,f,h,l,_){a.data={};var P=function(){a.data.step=1,a.data.para=f.getUserPara(),a.data.isPwdShow=!1,a.data.isPwdKeyboardShow=!1,a.data.sigOnPwdCommit=0,a.data.isFactorNeeded=!1,t(function(){a.data.pwdSubTitle="请输入旧的交易密码",a.data.isPwdShow=!0},200)};a.$watch("data.sigOnPwdCommit",function(e,o){if(e!==o)if(1==a.data.step){a.data.oldPassword=a.data.para.personal_identify_no.substr(-6,5),a.data.oldPassword+="X"==a.data.para.personal_identify_no.substr(-1,1)||"x"==a.data.para.personal_identify_no.substr(-1,1)?"0":a.data.para.personal_identify_no.substr(-1,1);var d=h(a.data.oldPassword);if(a.vm.formData.confirmPassword.MD5!=d)return a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.textHead="交易密码错误",a.data.outValue.hideClose=!0,a.data.outValue.oneButtonText="重试",void(a.data.outValue.popClose=function(t){1==t&&(a.data.isPwdShow=!0)});a.data.step=2,t(function(){a.data.isPwdKeyboardShow=!0},200)}else if(2==a.data.step){if(!r.isPasswordStrongEnough(a.vm.formData.confirmPassword.MD5)||r.isPasswordWithUserBirthday(a.vm.formData.confirmPassword.MD5,a.data.para.personal_identify_no)||r.isPasswordWithUserPhone(a.vm.formData.confirmPassword.MD5,a.data.para.phone_no))return r.makeToast(STRING_TABLE.PASSWORD_TOO_WEAK,"short"),a.data.isPwdKeyboardShow=!1,void t(function(){a.data.isPwdKeyboardShow=!0},200);a.data.pwdStep2=a.vm.formData.confirmPassword.MD5,a.data.isPwdKeyboardShow=!1,a.data.step=3,t(function(){a.data.isPwdKeyboardShow=!0},200)}else 3==a.data.step&&(a.data.pwdStep2!==a.vm.formData.confirmPassword.MD5?(r.makeToast("两次输入不一致","short"),a.data.isPwdKeyboardShow=!1,a.data.step=2,t(function(){a.data.isPwdKeyboardShow=!0},200)):(a.data.para.password=r.getRSAString(a.vm.formData.confirmPassword.originPwd+"11111111"),a.data.isPwdKeyboardShow=!1,S()))});var S=function(){var d={};d.personal_name=a.data.para.personal_name,d.personal_identify_no=a.data.para.personal_identify_no,d.personal_identify_type="01",d.phone_no=a.data.para.phone_no,d.phone_check_num=a.data.para.phone_check_num,d.otp_sec_id=a.data.para.otpSession,d.password=a.data.para.password,d.origin_password=a.data.oldPassword,d.face_id=w.getFaceId(o.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT),a.data.showLoading=!0,s.requestActiveAccount(d).then(function(){return i.exchangeWebankToken()},function(a){return r.makeToast(a.ret_msg,"short"),i.reject()}).then(function(){return u.setUserStatus(o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),_.getLoginBankData()},function(){return i.reject()}).then(function(){a.data.showLoading=!1,t(function(){a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="交易密码修改成功，代发工资账户已可正常使用。",a.data.outValue.oneButtonText="知道了",a.data.outValue.popClose=function(){t(function(){"function"==typeof f.getSucceedPage()?f.getSucceedPage()():e.path("/"+f.getSucceedPage()),f.clearRegister()},500)}},500),l.init(),l.setCheckHandWhenLoginFlag(!1)},function(){a.data.showLoading=!1,f.clearRegister(),e.path("/default")})};a.specialBack=function(){e.path("/register3")},P()}]);app.controller("LoginController",["$scope","LocationService","$http","GLOBAL_CONSTANT","essential","envService","$timeout","utils","cache","$stateParams","cgiService","LoginService","RegisterService","HandPasswordService","localStorageService","$sce","CheckFaceService","$ionicHistory","$ionicViewSwitcher","XGService","SecurityScanService","AdBannerService","WePayService",function(t,e,n,o,a,i,r,s,c,l,g,u,d,f,T,h,S,k,_,A,p,N,m){function C(){c.clear(),c.setUserStatus(o.ACCOUNT_STATE.USER_STATE_GUEST);var t={};t.username="",t.picurl="../img/tx@2x.png",t.platform="",t.openid="",t.token="",c.setUserInfo(t),a.logout()}t.data={};var L=function(){t.data.showLoading=!1,m.setCanShowBindTipFlag(!0),E(),t.data.isQQInstalled=!0,s.isiOSDevice&&s.checkAbility(o.APP_ABILITY.ABILITY_CHECKQQINSTALL)&&v(),w(),O(),P(),W(),C(),t.data.showedPopWhenLoginFail=!1,t.data.isHideBack=!1,t.data.backClass="menu-return",l.flag&&"noBack"==l.flag&&(t.data.isHideBack=!0,t.data.backClass="menu-wd",a.logout().then(function(){c.clear(),c.setUserStatus(o.ACCOUNT_STATE.USER_STATE_GUEST);var t={};t.username="",t.picurl="../img/tx@2x.png",t.platform="",t.openid="",t.token="",c.setUserInfo(t),S.clearAllData()},function(){})),I()},I=function(){k.clearCache()},P=function(){var e=i.getEnvVariable().DATA_CGI_PREFIX+"html/loginShow.html";n.get(h.trustAsResourceUrl(e)).success(function(e){t.data.sectionHtml=h.trustAsHtml(e)})},E=function(){t.data.isWXInstalled=!0,a.isWXInstalled().then(function(e){"false"==e.isWXInstalled&&(t.data.isWXInstalled=!1)})},v=function(){t.data.isQQInstalled=!0,a.isQQInstalled().then(function(e){"false"==e.isQQInstalled&&(t.data.isQQInstalled=!1)})};t.shouldShowPhoneLoginBtn=function(){return t.data.supportPhoneLogin&&!t.data.isWXInstalled&&!t.data.isQQInstalled},t.launchPhoneLogin=function(){e.go("/loginPhone",null,null,null,!0)};var w=function(){-1!=navigator.userAgent.indexOf("iPhone")&&APP_ABILITY&&APP_ABILITY.indexOf(o.APP_ABILITY.ABILITY_PHONELOGIN)>=0&&(t.data.supportPhoneLogin=!0)},O=function(){var t={};t.username="",t.picurl="../img/tx@2x.png",t.platform="",t.openid="",t.token="",void 0==c.getUserInfo()&&c.setUserInfo(t)},U=function(){var t={};t.module_id="login",t.obj_id="",t.data_list=[];var e={};e.has_reg=c.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_LOGIN?"0":"1",t.data_list.push(e),g.requestReportError(t)},B=function(){t.data.showLoading=!0,t.data.showedPopWhenLoginFail=!1,r(function(){t.data.showLoading=!1},15e3),isTelePhoneLogin=!1,tracelog("[dte] LoginController.doSomeThingAfterLogin-->exchangeWebankToken"),a.exchangeWebankToken().then(function(t){return tracelog("[dte] LoginController.doSomeThingAfterLogin-->exchangeWebankToken finish(success)"),c.setUserStatus(4&parseInt(t.status)?o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT:o.ACCOUNT_STATE.USER_STATE_LOGIN),a.getToken()},function(e){if(tracelog("[dte] LoginController.doSomeThingAfterLogin-->exchangeWebankToken finish(fail): "+JSON.stringify(e)),t.data.showLoading=!1,e){var n=parseInt(e.code);if(n==o.LOGIN_ERR.LOGIN_ERR_CANTLOGIN){var i=e.msg;i&&""!=i||(i="登陆失败，请重试"),t.data.showedPopWhenLoginFail=!0,t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=i,t.data.outValue.oneButtonText="知道了",t.data.outValue.popClose=function(){}}}return a.reject()}).then(function(t){return c.setUserInfo(t),c.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?(T.set("isReg","true"),u.getLoginBankData()):a.resolve()},function(){return a.reject()}).then(function(){p.startScan(),t.data.showLoading=!1,c.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_LOGIN?(g.requestReportUserWithoutReg(),!u.getBackView()||"accountSettings"!=u.getBackView().stateName&&"accountSettingsWithCallback"!=u.getBackView().stateName?(d.setCallbackPage(u.getSucceedPage(),u.getBackPage()),d.go()):e.backPage({forceBack:!0}),u.setCallbackPage("","")):f.startHandPassword(u.getSucceedPage()),g.requestGrayInfo(o.GRAY_BIZ_ID.REG_BIND_CARD),U(),A.updateAccountStatus(),N.signal()},function(){return t.data.showedPopWhenLoginFail||(t.data.showLoading=!1,s.makeToast("登录失败，请稍后重新尝试"),t.data.showedPopWhenLoginFail=!1),a.reject()})};t.login_wx=function(){tracelog("[dte] login_wx start"),s.clickButtonReport("login_weixin"),t.data.showLoading=!0;var e=r(function(){t.data.showLoading=!1,u.getAppResumed()&&s.makeToast("登录失败，请稍后重新尝试")},1e4);f.setCheckHandWhenLoginFlag(!0),a.loginWX().then(function(){tracelog("[dte] login_wx finish(success)"),r.cancel(e),B(),a.getToken().then(function(t){t&&t.token&&(t.token=t.token.substring(0,t.token.length/2)),t&&t.refreshtoken&&(t.refreshtoken=t.refreshtoken.substring(0,t.refreshtoken.length/2)),Statistics.reportEvent("getTokenFromPlatform",t)},function(t){Statistics.reportEvent("getTokenFromPlatform",{errorGetToken:JSON.stringify(t)})})},function(n){Statistics.reportEvent("getTokenFromPlatform",{errorLoginWX:JSON.stringify(n)}),tracelog("[dte] login_wx finish(fail): "+JSON.stringify(n)),r.cancel(e),t.data.showLoading=!1,s.makeToast("登录失败，请稍后重新尝试")})},t.login_qq=function(){tracelog("[dte] login_qq start"),t.data.showLoading=!0;var e=r(function(){t.data.showLoading=!1,u.getAppResumed()&&s.makeToast("登录失败，请稍后重新尝试")},1e4);s.clickButtonReport("login_qq"),f.setCheckHandWhenLoginFlag(!0),a.loginQQ().then(function(){tracelog("[dte] login_qq finish(success)"),r.cancel(e),B(),a.getToken().then(function(t){t&&t.token&&(t.token=t.token.substring(0,t.token.length/2)),Statistics.reportEvent("getTokenFromPlatform",t)},function(t){Statistics.reportEvent("getTokenFromPlatform",{errorGetToken:JSON.stringify(t)})})},function(n){Statistics.reportEvent("getTokenFromPlatform",{errorLoginQQ:JSON.stringify(n)}),tracelog("[dte] login_qq finish(fail): "+JSON.stringify(n)),r.cancel(e),t.data.showLoading=!1,s.makeToast("登录失败，请稍后重新尝试")})},t.onClickNotice=function(){e.go("/loginNotice",null,null,null,!0)},t.onClickNoticeInterest=function(){e.go("/loginNoticeInterest",null,null,null,!0)},t.onClickNoticePost=function(){e.go("/loginNoticePost",null,null,null,!0)},t.OtpButtonController="i-s",t.checkTimeoutInfo=!1,t.loginButtonController="login-w";var b=function(){t.OtpButtonController="i-s off",r(R,2e3)},R=function(){t.OtpButtonController="i-s"};t.getOtp=function(){return"i-s off"!=t.OtpButtonController?(b(),s.isValidPhoneNumber(t.data.phoneNumber)?void s.makeToast("手机验证码已发送成功","short"):void s.makeToast(STRING_TABLE.INVALID_PHONE_NO,"short")):void 0};var x=function(){t.loginButtonController="login-w off",r(G,2e3)},G=function(){t.loginButtonController="login-w"};t.login_phone=function(){if("login-w off"!=t.loginButtonController){if(x(),!s.isValidPhoneNumber(t.data.phoneNumber))return void s.makeToast(STRING_TABLE.INVALID_PHONE_NO,"short");if(!s.isValidPhoneOtpNumber(t.data.otpNumber))return void s.makeToast(STRING_TABLE.INVALID_OTP,"short");f.setCheckHandWhenLoginFlag(!0);var r={};r.phone_no=t.data.phoneNumber,r.phone_check_num=t.data.otpNumber;var l={headers:{Cookie:"dcnNo=1A0; userId=userId; webankToken=webankToken"}},g=i.getEnvVariable().CGI_PREFIX+"app/login/phone_login";n.post(g,r,l).then(function(e){if(2035e4==e.data.ret_code){c.setUserStatus(e.data.ret_data.account_status&&4==e.data.ret_data.account_status?o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT:o.ACCOUNT_STATE.USER_STATE_LOGIN);var n={};n.openid=t.data.phoneNumber,n.token=t.data.phoneNumber,n.picUrl="../img/tx@2x.png";var i=t.data.phoneNumber+"";if(i&&i.length>7){var r=i.substring(7);n.userName="手机用户"+r}return a.setPhoneLoginInfo(n)}return s.makeToast(e.data.ret_msg),a.reject()},function(t){return s.makeToast(t.data.ret_msg),a.reject()}).then(function(){return a.getToken()},function(){return a.reject()}).then(function(e){return c.setUserInfo(e),t.data.showLoading=!0,c.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?u.getLoginBankData():a.resolve()},function(){return a.reject()}).then(function(){t.data.showLoading=!1,c.getUserStatus()==o.ACCOUNT_STATE.USER_STATE_LOGIN?!u.getBackView()||"accountSettings"!=u.getBackView().stateName&&"accountSettingsWithCallback"!=u.getBackView().stateName?(d.setCallbackPage(u.getSucceedPage(),u.getBackPage()),d.go()):e.backPage({forceBack:!0}):f.startHandPassword(u.getSucceedPage()),u.setCallbackPage("","")},function(){s.logMessage("[登陆流程]拉取数据失败")})}},t.back=function(){t.data.isHideBack||(_.nextDirection("back"),"function"==typeof u.getBackPage()?u.getBackPage()():e.go("/"+u.getBackPage(),null,null,null,!0),u.setCallbackPage("home","default"))};var W=function(){u.getData()&&("qq"==u.getData().plat&&t.login_qq(),"weixin"==u.getData().plat&&t.login_wx(),u.setData(null))};L()}]);app.controller("LoginNoticeController",["$scope","LocationService",function(o,n){o.data={},o.onClickLoginPhone=function(){n.go("/loginPhone")},o.back=function(){n.backPage()}}]),app.controller("LoginInterestController",["$scope","LocationService",function(o,n){o.data={},o.back=function(){n.backPage()}}]),app.controller("LoginPostController",["$scope","LocationService",function(o,n){o.data={},o.back=function(){n.backPage()}}]);app.controller("LoginPhoneController",["$scope","LocationService","$http","GLOBAL_CONSTANT","essential","envService","$timeout","utils","cache","$stateParams","cgiService","LoginService","RegisterService","HandPasswordService","localStorageService","$sce",function(t,a,e,n,o,i,d,u,s,r,p,c,C,h){t.data={},t.back=function(){a.backPage()},t.onClickLogin=function(){if("btn-c"==t.data.loginButtonClass){t.data.showLoading=!0;var e=t.data.phone+"",i=t.data.IDCard+"",r=t.data.otpNum+"";h.setCheckHandWhenLoginFlag(!0),isTelePhoneLogin=!0,o.exchangeWebankToken(!0,e,i,r).then(function(a){tracelog("[登陆流程]手机登录成功,设置用户登录信息"),s.setUserStatus(4&parseInt(a.status)?n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT:n.ACCOUNT_STATE.USER_STATE_LOGIN);var e={};e.openid=t.data.phone,e.token=t.data.phone,e.picUrl="../img/tx@2x.png";var i=t.data.phoneNumber+"";i&&(e.userName=""),o.setPhoneLoginInfo(e)},function(a){tracelog("[dte] resumeApp-->exchangeWebankToken retry finish(fail): "+JSON.stringify(a));var e=parseInt(a.code),i="";return e&&(e==n.LOGIN_ERR.LOGIN_ERR_CODEERROR?i="验证码错误！":e==n.LOGIN_ERR.LOGIN_ERR_NOTEXIST||e==n.LOGIN_ERR.LOGIN_ERR_MATCHERROR?i="身份证号或手机号错误":e==n.LOGIN_ERR.LOGIN_ERR_CANTLOGIN&&(i=a.msg)),i&&""!=i||(i="登陆失败，请重试"),d(function(){t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=i,t.data.outValue.oneButtonText="知道了",t.data.outValue.popClose=function(){}}),t.data.showLoading=!1,o.reject()}).then(function(){return o.getToken()},function(){return t.data.showLoading=!1,o.reject()}).then(function(a){return s.setUserInfo(a),t.data.showLoading=!0,s.getUserStatus()==n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT?c.getLoginBankData():o.resolve()},function(){return t.data.showLoading=!1,o.reject()}).then(function(){t.data.showLoading=!1,s.getUserStatus()==n.ACCOUNT_STATE.USER_STATE_LOGIN?!c.getBackView()||"accountSettings"!=c.getBackView().stateName&&"accountSettingsWithCallback"!=c.getBackView().stateName?(C.setCallbackPage(c.getSucceedPage(),c.getBackPage()),C.go()):a.backPage({forceBack:!0}):h.startHandPassword(c.getSucceedPage()),c.setCallbackPage("","")},function(){t.data.showLoading=!1,u.logMessage("[登陆流程]拉取数据失败")})}};var g=function(){t.data.otpButtonClass="register-yz-btn off",t.data.loginButtonClass="btn-c off",t.data.showTimeoutButton=!0},l=function(){return t.data.timeout-=1,t.data.timeout<=0?(t.data.showTimeoutButton=!0,document.removeEventListener("pause",f,!1),void document.removeEventListener("resume",I,!1)):void d(function(){l()},1e3)},f=function(){var a=u.getDate();t.data.pausetime=a.getTime()},I=function(){var a=u.getDate();t.data.resumetime=a.getTime(),t.data.pausetime&&(t.data.timeout-=Math.round((t.data.resumetime-t.data.pausetime)/1e3),t.data.timeout<0&&(t.data.timeout=0),t.data.pausetime=0)};t.changeIDCard=function(){if(t.data.showInputIDCardTips=!1,t.data.loginButtonClass="btn-c off",t.data.IDCard&&""!=t.data.IDCard){var a=u.isValidIDCardInput(t.data.IDCard);"fail"==a?(t.data.showInputIDCardTips=!0,t.data.inputIDCardTipsContent="身份证号不正确，快检查检查"):"finish"==a?u.isValidIDCardNumber(t.data.IDCard)?u.isOldEnough(t.data.IDCard,16)?(m(),T()):(t.data.showInputIDCardTips=!0,t.data.inputIDCardTipsContent="暂时不支持未成年人登陆"):(t.data.showInputIDCardTips=!0,t.data.inputIDCardTipsContent="身份证号不正确，快检查检查"):t.data.IDCard.length>=14&&(u.isOldEnough(t.data.IDCard,16)||(t.data.showInputIDCardTips=!0,t.data.inputIDCardTipsContent="暂时不支持未成年人登陆"))}},t.blurIDCard=function(){t.data.IDCard&&""!=t.data.IDCard&&(u.isValidIDCardNumber(t.data.IDCard)||(t.data.showInputIDCardTips=!0,t.data.inputIDCardTipsContent="身份证号不正确，快检查检查"),T())},t.blurPhone=function(){T()},t.blurOtp=function(){T()},t.changePhone=function(){if(t.data.showInputPhoneTips=!1,t.data.otpButtonClass="register-yz-btn off",t.data.phone&&""!=t.data.phone){var a=u.isValidPhoneInput(t.data.phone);"fail"==a?(t.showInputPhoneTips=!0,t.inputPhoneTipsContent="请使用真实电话，方便接收正确验证码"):"finish"==a&&(m(),T())}},t.changeOtp=function(){if(t.data.showInputOtpTips=!1,t.data.loginButtonClass="btn-c off",t.data.otpNum&&""!=t.data.otpNum){var a=u.isValidPhoneOtpInput(t.data.otpNum);"fail"==a?(t.data.showInputOtpTips=!0,t.data.inputOtpTipsContent="验证码不正确"):"finish"==a&&T()}};var T=function(){t.data.loginButtonClass=u.isValidIDCardNumber(t.data.IDCard)&&u.isValidPhoneNumber(t.data.phone)&&u.isValidPhoneOtpNumber(t.data.otpNum)?"btn-c":"btn-c off"},m=function(){u.isValidIDCardNumber(t.data.IDCard)&&u.isValidPhoneNumber(t.data.phone)&&(t.data.otpButtonClass="register-yz-btn")};t.onClickOtp=function(){if("register-yz-btn off"!=t.data.otpButtonClass&&u.isValidPhoneNumber(t.data.phone)){o.readSMSVerifyCode().then(function(a){t.data.otpNum||(t.data.otpNum=a.smsCode,T())}),t.data.showLoading=!0;var a={};a.phone_no=t.data.phone,t.data.otpButtonClass="register-yz-btn off",o.getOptForPhoneLogin(t.data.phone+"",t.data.IDCard+"").then(function(){t.data.showLoading=!1,t.data.otpButtonClass="register-yz-btn",t.data.showTimeoutButton=!1,t.data.timeout=60,document.addEventListener("pause",f,!1),document.addEventListener("resume",I,!1),l()},function(a){var e="";a&&(e=a==n.LOGIN_OTP_ERR.OTP_ERR_FAILERROR||a==n.LOGIN_OTP_ERR.OTP_ERR_UNKNOWMUSER?"身份证号或手机号错误":"验证码发送失败，请稍后再试"),t.data.showLoading=!1,d(function(){t.data.outValue={},t.data.outValue.showPop=!0,t.data.outValue.oneLineTextLeft=e,t.data.outValue.oneButtonText="知道了",t.data.outValue.popClose=function(){}}),t.data.otpButtonClass="register-yz-btn"})}},g()}]);app.controller("BindNewCardController1",["$scope","$timeout","utils","cgiService","cache","BindNewCardService1","BindNewCardService2","webankCommonService","GLOBAL_CONSTANT","HJactionPop","CheckFaceService",function(n,e,t,a,o,r,i,C,s,d){var _=n.data={},c=r.getData();n.data.isUsingCMBCard=!1,n.data.isTransOpenAccountType=!1,_.OPER_TYEP={DEAULT:0,VERIFICATION:1},_.title="绑定银行卡";var T=function(){_.operType=_.OPER_TYEP.DEAULT,c&&c.operType&&"verification"==c.operType&&(_.operType=_.OPER_TYEP.VERIFICATION,_.title="绑卡验证",t.reportCustomEvent(s.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,s.TRANS_OPEN_ACCOUNT_STATISTIC.ENTER_BIND_CARD_PAGE)),n.maskClass="p-mask hide",_.isAgreed=!1,_.onClickAgreeCheckbox=function(){E()},n.step2ButtonController="btn-c off";var e=o.getCacheInfo("personalInfo");e&&(_.userName=e.name,_.bindPhoneNumber=e.phone_no),r.getCommonSession()&&r.getCommonSession().bankCard&&(_.bankCard=r.getCommonSession().bankCard,_.isUsingCMBCard=r.getCommonSession().isUsingCMBCard,n.changeBankCard(),_.bindPhoneNumber=r.getCommonSession().bindPhoneNumber,E());var a=i.getBackData();if(a&&a.errMsg){var C=a.errMsg;i.setBackData(null),d.show({oneLineTextLeft:C,oneButtonText:"知道了",popClose:function(){}})}},u=function(){n.inputBankCardTipsContent="",n.showBankIcon=!1,p="",n.bankImg="",N=!1,_.isUsingCMBCard=!1,_.isTransOpenAccountType=!1},p="";n.showBankIcon=!1;var N=!1;n.changeBankCard=function(e){if(n.step2ButtonController="btn-c off",_.bankCard&&(_.bankCard.length<6&&u(),_.bankCard&&""!=_.bankCard)){if(!t.isNumber(_.bankCard||null))return void(n.inputBankCardTipsContent=STRING_TABLE.INCORRECT_BANK_CARD_NO);if(_.bankCard.length>=10&&E(),_.bankCard.length>=6){var o=_.bankCard.length>=10?10:6,r=_.bankCard.slice(0,o);e&&N&&(r=_.bankCard),n.showBankIcon||N&&!e||p!=r&&(p=r,a.requestBankInfo(r,"bind_card").then(function(e){return N=!1,10!=e.ret_data.card_typeid?(n.inputBankCardTipsContent="暂不支持信用卡",n.step2ButtonController="btn-c off",void(n.showBankIcon=!1)):(_.isTransOpenAccountType=e.ret_data.trans_open_account,_.isUsingCMBCard=e.ret_data.trans_open_account&&_.operType==_.OPER_TYEP.VERIFICATION,_.isTransOpenAccountType&&_.operType==_.OPER_TYEP.VERIFICATION&&t.reportCustomEvent(s.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,s.TRANS_OPEN_ACCOUNT_STATISTIC.INPUT_CMB_CARD_IN_BIND_CARD_PAGE),n.cardTypeId=e.ret_data.card_typeid,n.cardType=e.ret_data.card_type,n.bankName=e.ret_data.bank_name,t.loadImage("../img/bankHead/yh-"+(e.ret_data.clear_no_pbc||0)+"@nb.png",function(e,t){n.bankImg=e?t:""}),n.showBankIcon=!0,void(n.inputBankCardTipsContent=""))},function(e){if(n.showBankIcon=!1,n.bankImg="",e.ret_code&&e.ret_code.length>=4){if("0080"==e.ret_code.slice(e.ret_code.length-4,e.ret_code.length))return n.inputBankCardTipsContent="",void(N=!0);if("0079"==e.ret_code.slice(e.ret_code.length-4,e.ret_code.length))return n.inputBankCardTipsContent="暂不支持该银行",void(n.step2ButtonController="btn-c off")}else N=!1;return e.ret_code==s.CGI_RET.CGI_UNUSED_CARD||e.ret_code==s.CGI_RET.CGI_UNUSED_CARD_2?(n.inputBankCardTipsContent=6==r.length?"":"暂不支持该银行",void(n.step2ButtonController="btn-c off")):void 0}))}}},n.onClickChangeCard=function(){n.data.isUsingCMBCard=!1,n.data.isTransOpenAccountType=!1,n.step2ButtonController="btn-c off",n.data.inputBankCardTipsContent=!1,n.data.showBankIcon=!1,n.data.bankCard="",n.data.cardTypeId="",n.data.cardType="",n.data.bankName="",t.reportCustomEvent(s.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,s.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_CHANGE_CARD_IN_BIND_CARD_PAGE)},n.changePhone=function(){if(n.inputTelTipsContent="",n.step2ButtonController="btn-c off",_.bindPhoneNumber&&""!=_.bindPhoneNumber){var e=t.isValidPhoneInput(_.bindPhoneNumber);"fail"==e?n.inputTelTipsContent="请使用真实电话，方便接收正确验证码":"finish"==e&&E()}};var l=function(){return _.bindPhoneNumber?t.isValidPhoneNumber(_.bindPhoneNumber)||t.isMaskedPhoneNumber(_.bindPhoneNumber):!1},E=function(){var e=!1;return t.isNumber(_.bankCard||null)&&l()&&!n.inputBankCardTipsContent&&!n.inputTelTipsContent&&(e=!0),n.step2ButtonController=e?_.isUsingCMBCard?"btn-c":n.data.isAgreed?"btn-c":"btn-c off":"btn-c off",e},b=function(){var n=!1,e=o.getCacheInfo("personalInfo");return null!=e&&e.bind_cards_list&&e.bind_cards_list.length>0&&$.each(e.bind_cards_list,function(e,t){0==t.status&&t.other_account.trim()==_.bankCard&&(n=!0)}),n};n.$watch("data.bindPhoneNumber",function(n,e){e&&n&&t.isMaskedPhoneNumber(e)&&n.length<e.length&&(_.bindPhoneNumber="")}),n.onClickStep2=function(){if(E(),"btn-c off"==n.step2ButtonController)return void(E()&&t.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"));var e=o.getCacheInfo("personalInfo"),a=!1;return null!=e&&e.bind_cards_list&&e.bind_cards_list.length>0&&$.each(e.bind_cards_list,function(n,e){0!=e.status&&e.other_account.trim()==_.bankCard&&(a=!0)}),a?void d.show({oneLineTextLeft:"已经绑定了该银行卡",oneButtonText:"知道了",popClose:function(){}}):void(_.isTransOpenAccountType&&_.operType==_.OPER_TYEP.VERIFICATION?(t.reportCustomEvent(s.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,s.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_NEXT_STEP_IN_BIND_CARD_PAGE),d.show({oneLineTextLeft:"通过汇款方式绑卡验证的账户，不能直接扣款，不能解绑卡，不能再绑定其他银行卡",twoButtonText1:"取消",twoButtonText2:"确定",popClose:function(n){2==n?(t.reportCustomEvent(s.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,s.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_DIALOG_CONFIRM_IN_BIND_CARD_PAGE),I()):(1==n||0==n)&&t.reportCustomEvent(s.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,s.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_DIALOG_CANCEL_IN_BIND_CARD_PAGE)}})):_.isTransOpenAccountType&&_.operType!=_.OPER_TYEP.VERIFICATION&&!b()?d.show({oneLineTextLeft:"暂不支持"+n.bankName+"，建议换其它银行卡重试",oneButtonText:"知道了",popClose:function(){n.data.isUsingCMBCard=!1,n.data.isTransOpenAccountType=!1,n.step2ButtonController="btn-c off",n.data.inputBankCardTipsContent=!1,n.data.showBankIcon=!1,n.data.bankCard="",n.data.cardTypeId="",n.data.cardType="",n.data.bankName="",n.inputBankCardTipsContent="",n.showBankIcon=!1,p="",n.bankImg=""}}):"光大银行"==n.bankName?d.show({oneLineTextLeft:"请确保已开通光大银行个人网银",oneButtonText:"知道了",popClose:function(n){0==n||1==n&&I()}}):"上海银行"==n.bankName?d.show({oneLineTextLeft:"请确保已开通上海银行的银联在线支付功能",oneButtonText:"知道了",popClose:function(n){0==n||1==n&&I()}}):I())};var I=function(){var n={phone_no:_.bindPhoneNumber,user_name:_.userName,bank_card:_.bankCard,checkOTP:!0,operType:_.operType,sCMBCard:_.isUsingCMBCard},e=o.getCacheInfo("personalInfo"),t=!1;null!=e&&e.bind_cards_list&&e.bind_cards_list.length>0&&$.each(e.bind_cards_list,function(n,e){0==e.status&&e.other_account.trim()==_.bankCard&&(t=!0)}),n.checkFace=t||_.operType==_.OPER_TYEP.VERIFICATION?!1:!0,r.setCommonSession(_),i.goPage(null,null,n)};n.onClickTips=function(){n.maskClass="p-mask show",n.maskTitle="绑卡说明",n.maskDetail="暂支持工行、农行、中行、建行、交行、中信、招行、广发、光大、平安、民生、兴业、华夏、浦发、邮储、上海银行的储蓄卡。暂不支持信用卡。"},n.onClickCancelMask=function(){n.maskClass="p-mask hide"},n.back=function(){r.setCommonSession(null),r.backPage()},T()}]);app.controller("BindNewCardController2",["$scope","$timeout","BindNewCardService2","GLOBAL_CONSTANT","essential","utils","cgiService","$stateParams","cache","CheckFaceService","$ionicViewSwitcher","webankCommonService","HJactionPop","BindNewCardService1","HJactionLoading","RecentAccountService","BindCardVerifyPromptService",function(e,t,n,o,i,r,a,c,u,s,_,d,h,m,C,f){var T=e.data={},l=0,p=0,E="",N="";T.OPER_TYEP={DEAULT:0,VERIFICATION:1};var I=T.OPER_TYEP.DEAULT,v=!1,P=n.getData(),k=function(){l=P.phone_no||0,e.phoneNumber=l||"",I=P.operType,v=P.isCMBCard;var i=u.getCacheInfo("personalInfo");if(i&&(p=i.birthday||0),s.isFaceIdValid(o.CHECK_FACE_SCENE_ID.BIND_CARD)&&(E=s.getFaceId(o.CHECK_FACE_SCENE_ID.BIND_CARD),N=s.getVideoCertificationSessionId()),P&&P.checkFace&&(P.checkFace=!1,E=s.getFaceId(o.CHECK_FACE_SCENE_ID.BIND_CARD),!s.isFaceIdValid(o.CHECK_FACE_SCENE_ID.BIND_CARD))){var a=u.getCacheInfo("personalInfo").bind_cards_list;if(a&&a.length&&a.length>=1)return void h.show({oneLineTextLeft:"为了您的账户安全，需要您先通过人脸验证",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(e){if(2==e){var i=u.getCacheInfo("personalInfo"),a=i&&i.ecif_no?i.ecif_no:"";s.startFaceVerify(o.CHECK_FACE_SCENE_ID.BIND_CARD,a).then(function(e){t(function(){var e="gray-info-"+o.GRAY_BIZ_ID.REG_BIND_CARD,t=u.getCacheInfo(e);t&&"true"==t.in||r.makeToast("恭喜您通过验证，请继续绑定银行卡","short")},500),E=e.faceId,N=e.videoSessionId},function(){},function(){})}else(1==e||0==e)&&n.backPage()}})}P&&P.checkOTP&&(P.checkOTP=!1,(r.isValidPhoneNumber(P.phone_no)||r.isMaskedPhoneNumber(P.phone_no))&&t(function(){e.onGetOTP()},200))};e.otpTimeOutShow=!0,e.otpButtonController="btn";var g=function(){e.otpButtonController="btn off",t(b,2e3)},b=function(){e.otpButtonController="btn"};e.loginButtonController="btn-c";var B=function(){e.loginButtonController="btn-c off",t(A,2e3)},A=function(){e.loginButtonController="btn-c"},D=function(){var t=r.getDate();e.pausetime=t.getTime()},O=function(){var t=r.getDate();e.resumetime=t.getTime(),e.pausetime&&(e.checkNumTimeout-=Math.round((e.resumetime-e.pausetime)/1e3),e.pausetime=0,e.checkNumTimeout<0&&(e.checkNumTimeout=0))},S=function(){return e.checkNumTimeout-=1,e.checkNumTimeout<=0?(e.otpTimeOutShow=!0,document.removeEventListener("pause",D,!1),void document.removeEventListener("resume",O,!1)):void t(function(){S()},1e3)},R=function(){e.otpTimeOutShow=!1,e.checkNumTimeout=60,document.addEventListener("pause",D,!1),document.addEventListener("resume",O,!1),S()},V=function(e){r.makeToast(e.ret_msg,"short")};e.onGetOTP=function(){if("btn off"!=e.otpButtonController){if(g(),!r.isValidPhoneNumber(e.phoneNumber)&&!r.isMaskedPhoneNumber(e.phoneNumber))return void r.makeToast(STRING_TABLE.INVALID_PHONE_NO);i.readSMSVerifyCode().then(function(t){e.data.otp||(e.data.placeOtp=t.smsCode,e.data.otp=t.smsCode)});var t={};t.usage_id=o.OPT_TYPE.BIND_CARD,r.isValidPhoneNumber(e.phoneNumber)?(t.phone_no=e.phoneNumber,a.requestRegisterOTP(t).then(R,V)):a.requestOTPAndCheckBindPhone(t).then(R,V)}},e.onClickNext=function(){if("btn-c off"!=e.loginButtonController){if(B(),!r.isValidPhoneOtpNumber(e.data.otp))return void r.makeToast(STRING_TABLE.INVALID_OTP);_.nextTransition("back");var t=n.getData(),c={};c.other_name=t.user_name,r.isMaskedPhoneNumber(t.phone_no)||(c.other_phone_no=t.phone_no),c.other_card_no=t.bank_card,c.other_phone_check_num=e.data.otp,c.face_id=N&&N.length>0?"":E,c.extra_info="REG",c.contract_ver_wt=o.USER_PROTOCOL_VER.WTKK_VER,c.artificial_faceck_id=N;var u=d.isInAccountVerificationPeriod();C.show(),a.requestBindCard(c).then(function(){return m.setCommonSession(null),a.requestPersonalInfo()},function(e){C.hide();var t=1;return n.backPage(t,{errMsg:e.ret_msg}),i.reject()}).then(function(){C.hide();var e=2;I==T.OPER_TYEP.VERIFICATION?(v||r.makeToast("账户已验证","short"),u&&(e=3)):(r.makeToast("添加银行卡成功","short"),f.saveRecentlyUsedBankCard(o.ACCOUT_BIZ_TYPE.PAYMENT,c.other_card_no)),n.backPage(e)})}},e.back=function(){n.backPage()},k()}]);app.controller("OpenAccoutWithTransResultController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","localStorageService","RegisterService","HandPasswordService","HelpDetailService",function(e,a,t,r,n,o,c,C,i,_,T,N,s,S,A,E,d,v,O,l,R,P,g,O,u){var p=a.data={},h=a.func={},k=function(){c.reportCustomEvent(r.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,r.TRANS_OPEN_ACCOUNT_STATISTIC.ENTER_PAGE_OPEN_ACCOUNT_SUCC);var e=N.getCacheInfo("personalInfo");e&&(p.webankCardNo=e.webank_card_no);var t=c.getDate();t.setDate(t.getDate()+3),p.validDateDesc=c.getYYYYMMDDStringByDate(t,"-");var n=g.getResultPara();n&&(a.data.bankName=n.bank_name,a.data.cardType=n.card_type,a.data.cardNo=n.card_no),P.set("isReg","true")};h.onClickFinish=function(){c.reportCustomEvent(r.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,r.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_BACK_HOME_IN_SUCC_PAGE),O.init(),O.setCheckHandWhenLoginFlag(!1),g.clearRegister(),C.path("/home")},h.onClickUseOtherCard=function(){c.reportCustomEvent(r.REPORT_EVENT_NAME.TRANS_OPEN_ACCOUNT,r.TRANS_OPEN_ACCOUNT_STATISTIC.CLICK_USE_OTHER_BANK_CARD_IN_SUCC_PAGE),C.path("/registerAndBindCard")},h.onClickCopyWebankCardNo=function(){s.copyStrToPasteboard(p.webankCardNo).then(function(){c.makeToast("复制成功","short")},function(){c.makeToast("复制失败，请稍后再试","short")})},h.onClickTransFAQ=function(){u.goPage("1")},k()}]);app.controller("RegisterController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","HandPasswordService","TransRecordService","dataService","HJactionLoading","RegisterService","HJactionPop","CheckFaceService","LocationService","HJactionPwdInput","WePayService","HJactionMenu","WePayService","$MD5","InviteService","localStorage",function(t,e,a,n,o,_,i,r,E,s,d,C,T,u,c,R,I,N,p,A,S,D,f,m,l,h,O,B,O,g,v,L){function P(){v.requestInviter().then(function(t){1!=L.loadDataByUser("hasShowInviterDlg")&&(L.saveDataByUser("hasShowInviterDlg","1"),H.showInviterDlg=!0,T.dimStatusBarBackground(!0),H.nickname=t.nickname,H.headImgUrl=t.headimgurl,i.reportCustomEvent(n.INVITE_STATISTIC.MAIN_KEY,n.INVITE_STATISTIC.REG_SHOW_INVITER))},function(t){H.showInviterDlg=!1,T.dimStatusBarBackground(!1)}),W.closeInviterDlg=function(){H.showInviterDlg=!1,T.dimStatusBarBackground(!1)}}function G(){W.reportClickInput=w}function w(){q||(q=!0,i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.CLICK_INPUT))}function U(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.PV_REG)}function F(){var t=C.getUserInfo();"qq"==t.platform&&(M(),document.addEventListener("resume",y,!1),e.$on("$destroy",function(){document.removeEventListener("resume",y,!1)}))}function k(){f.show({oneLineTextLeft:"您已在办理我行贷款业务时开户, 请验证初始密码激活账户",twoButtonText1:"取消",twoButtonText2:"激活账户",popClose:function(t){1!=t&&h.show({showType:"keyboardAndPwd",pwdTitle:"输入初始密码",pwdSubTitle:"初始密码为身份证后6位",onCanceled:function(){H.otpNum=""},onFinishInput:function(t){H.initPwd=t.originPwd,H.otpNum="",V(e.data.id_number_session,t.originPwd)?(i.makeDebugToast("设置密码"),H.isBgShown=!0,d(function(){W.startSettingPassword()},50)):i.makeToast("密码输入错误")}})}})}function V(t,a){var n=g(a+e.data.ecif);return t===n}function x(t){return t&&t.ret_data&&(t.ret_data.acct_type==X.ACCOUNT_STATE.HAS_REG||t.ret_data.acct_type==X.ACCOUNT_STATE.STRONG_ACCOUNT_ACTIVED)&&t.ret_data.b_union_acct}function y(){e.data.isMaskShowing||(K&&"function"==typeof K&&K(),M(Y))}function M(t){e.data.showLoading=!0,a.requestVipCardNo().then(function(a){e.data.showLoading=!1,tracelog(JSON.stringify(a)),t&&"function"==typeof t?t():(vipCardInfo=a,Y())},function(a){e.data.showLoading=!1,vipCardInfo=null,t&&"function"==typeof t?t():(vipCardInfo=a,Y())})}function Y(){var t=vipCardInfo,a="";if(t&&t.ret_data&&1==t.ret_data.card_status)e.data.vipCardNo=t.ret_data.card_no,a="只需3步，完善注册信息即可激活您的靓号"+t.ret_data.card_no+"。",K=f.show({oneLineTextLeft:a,oneButtonText:"立即激活",popClose:function(){i.clickButtonReport("vipCard_active")}});else if(t&&t.ret_data&&-1==t.ret_data.card_status){a="您的靓号已过期，请重新领取或直接开户获得普通帐号。";{t.ret_data.activity_url}K=f.show({oneLineTextLeft:a,twoButtonText1:"重新领取",twoButtonText2:"立即开户",popClose:function(e){1===e?(i.clickButtonReport("vipCard_reapply"),cordova.InAppBrowser.open(t.ret_data.activity_url,"_system","")):2===e&&i.clickButtonReport("vipCard_openAccount")}})}else if(t&&t.ret_data&&0==t.ret_data.card_status);else{var n=C.getUserInfo();if(!n||"qq"!=n.platform)return;K=f.show({oneLineTextLeft:"参与超级会员靓号活动的小伙伴，请稍后开户。（其他用户可正常开户）",oneButtonText:"知道了",popClose:function(){i.clickButtonReport("vipCard_error")}})}}var K,H=e.data={},W=e.func={},b=null,X=null,q=!1;e.data.isUnionAccount=!1,e.data.checkFaceNextStepTips="离账户登记成功还差一步";var $=function(){ie(),re(),G(),Ce(),oe(),F(),U(),P()},J=function(){ee()},z=function(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CHECK_FACE_CANCEL),S.hide(),e.data.otpNum="",Ce()},j=function(){return T.exchangeWebankToken().then(function(){return C.setUserStatus(n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),u.getLoginBankData()},function(){return T.reject()}).then(function(){return T.resolve()},function(){return T.reject()})},Q=function(){S.hide(),D.clearRegister(),l.go("/activeUnionAccountResult")},Z=function(t){ee(t)},te=function(t,e){return O.setNewUserFlag(!0),O.setCanShowBindTipFlag(!1),e?(m.showPickUserFromFaceFailedMsg(n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT,W.back),void S.hide()):void j().then(function(){D.clearRegister(),l.go("/registerResult")},function(){ee()})},ee=function(t){d(function(){t&&t.ret_msg&&i.makeToast(t.ret_msg),D.clearRegister(),l.go("/default")},1e3)},ae=function(t,n,o){var _={};_.ecif_no=e.data.ecif,_.origin_password=n,_.password=o,_.face_id=t.faceId,S.show(),a.requestActiveUnionAccount(_).then(Q,Z)},ne=function(t,o){var _={};_.personal_name=e.data.name,_.personal_identify_no=e.data.IDCard.toUpperCase(),_.personal_identify_type="01",_.phone_no=e.data.phone,_.phone_check_num=e.data.otpNum,_.other_name=e.data.name,_.otp_sec_id=e.data.otpSession,_.user_pwd=e.data.password,_.face_id=t.faceId,_.extra_info="REG",_.contract_ver_wt=n.USER_PROTOCOL_VER.WTKK_VER,_.contract_ver_kh=n.USER_PROTOCOL_VER.KH_VER,_.yd_suc_time=e.data.otp_pass_time,_.vip_card_no=e.data.vip_card_no,_.artificial_faceck_id=t.videoSessionId,o&&(_.faceck_flag="F3Y1"),S.show(),a.requestRegister(_).then(function(t){te(t,o)},ee)},oe=function(){var t=D.loadDataForRegister();null!=t&&(e.data=H=D.loadDataForRegister(),D.saveDataForRegister(null))},_e=function(t,a){S.show(),H.isUnionAccount?ae(t,e.data.id_number_session,e.data.password):ne(t,a)},ie=function(){b={SUCCESS:0,PROTOCOL_ERROR:1,INVALID_PHONE:2,INVALID_NAME:3,INVALID_ID_CARD:4,UNKNOW_ERROR:5},X={ACCOUNT_STATE:{NOT_REG:0,STRONG_ACCOUNT_1:1,STRONG_ACCOUNT_2:2,HAS_REG:3,STRONG_ACCOUNT_ACTIVED:4},UI_STYLE:{OTP_BTN_STYLE_ON:"register-yz-btn",OTP_BTN_STYLE_OFF:"register-yz-btn off",NEXT_BTN_STYLE_ON:"ui-btn",NEXT_BTN_STYLE_OFF:"ui-btn off",LAST_STEP_FRAME:"pwd-control-wrap",LAST_STEP_FRAME_WITH_ANI:"pwd-control-wrap item-animate",PWD_STYLE:"item-hide-animate"},PWD_ERROR:{ERR_CODE_NOT_MATCH:1,ERR_CODE_WEAK_PWD:2}}},re=function(){H.agreementName="《账户服务协议》",H.isNameInvalid=!1,H.isOTPInvalid=!1,H.isPhoneInvalid=!1,H.isIDCardInvalid=!1,H.otpButtonClass=X.UI_STYLE.OTP_BTN_STYLE_OFF,H.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,H.showTimeoutButton=!0,H.isAgreed=!1,H.isBgShown=!1,T.dimStatusBarBackground(!1),H.pwdPopupStyle=X.UI_STYLE.PWD_STYLE,Ae()},Ee=function(){return e.data.timeout-=1,e.data.timeout<=0?(e.data.showTimeoutButton=!0,document.removeEventListener("pause",se,!1),void document.removeEventListener("resume",de,!1)):void d(function(){Ee()},1e3)},se=function(){var t=i.getDate();e.data.pausetime=t.getTime()},de=function(){var t=i.getDate();e.data.resumetime=t.getTime(),e.data.pausetime&&(e.data.timeout-=Math.round((e.data.resumetime-e.data.pausetime)/1e3),e.data.timeout<0&&(e.data.timeout=0),e.data.pausetime=0)},Ce=function(){var t=b.SUCCESS;return e.data.name&&i.isValidName(e.data.name)?e.data.phone&&i.isValidPhoneNumber(e.data.phone)?e.data.otpNum&&i.isValidPhoneOtpNumber(e.data.otpNum)?e.data.IDCard&&i.isValidIDCardNumber(e.data.IDCard)?H.isAgreed||(t=b.PROTOCOL_ERROR):t=b.INVALID_ID_CARD:t=b.INVALID_OTP:t=b.INVALID_PHONE:t=b.INVALID_NAME,H.nextButtonClass=t==b.SUCCESS?X.UI_STYLE.NEXT_BTN_STYLE_ON:X.UI_STYLE.NEXT_BTN_STYLE_OFF,t},Te=function(){S.hide(),f.show({oneLineTextLeft:"已绑定："+C.getUserInfo().username,oneButtonText:"知道了",popClose:function(){S.show(),T.exchangeWebankToken().then(function(){return C.setUserStatus(n.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT),u.getLoginBankData()},function(){return T.reject()}).then(function(){S.hide(),"function"==typeof D.getSucceedPage()?D.getSucceedPage()():r.path("/"+D.getSucceedPage()),D.clearRegister()},function(){S.hide(),D.clearRegister(),r.path("/default")})}})},ue=function(t){S.hide(),_.isRetCodePwd(t.ret_code)?_.isRetCodePwdRetry(t.ret_code)&&f.show({oneLineTextLeft:t.ret_msg,twoButtonText1:"取消",twoButtonText2:"重试",popClose:function(t){1==t?(e.data.otpNum="",Ce()):2==t&&Re()}}):(i.makeToast(t.ret_msg),D.clearRegister(),r.path("/default"))},ce=function(){h.show({showType:"keyboardAndPwd",onCanceled:function(){H.otpNum=""},onFinishInput:function(t){var n={};n.user_pwd=t.RSA,n.personal_name=e.data.name,n.personal_identify_no=e.data.IDCard.toUpperCase(),n.personal_identify_type="01",n.phone_no=e.data.phone,n.phone_check_num=e.data.otpNum,n.otp_sec_id=e.data.otpSession,S.show(),a.requestbindOpenID(n).then(Te,ue)}})},Re=function(){f.show({oneLineTextLeft:"该身份证已开户，验证交易密码即可绑定登录的账号",twoButtonText1:"取消",twoButtonText2:"绑定账号",popClose:function(t){1==t?(e.data.otpNum="",Ce()):2==t&&ce()}})},Ie=function(t){if(document.removeEventListener("resume",y,!1),e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,S.hide(),e.data.otpSession=encodeURIComponent(t.ret_data.otp_sec_id),e.data.personal_identify_type="01",e.data.phone_no=e.data.phone,e.data.phone_check_num=e.data.otpNum,e.data.ecif=t.ret_data.ecif_no,e.data.otp_pass_time=t.ret_data.yd_suc_time,e.data.had_setting_pwd=t.ret_data.had_setting_pwd,e.data.id_number_session=t.ret_data.id_number_session,e.data.vip_card_no=e.data.vipCardNo?e.data.vipCardNo:"",H.isUnionAccount=t.ret_data.b_union_acct,void 0==t.ret_data.acct_type)t.ret_data.had_reg?Re():(H.isBgShown=!0,T.dimStatusBarBackground(!0),d(function(){W.startSettingPassword()},50));else if(t.ret_data.acct_type==X.ACCOUNT_STATE.STRONG_ACCOUNT_1){D.saveDataForRegister(H);var a={};a.personal_name=e.data.name,a.personal_identify_no=e.data.IDCard.toUpperCase(),a.personal_identify_type="01",a.phone_no=e.data.phone,a.phone_check_num=e.data.otpNum,a.ecif=e.data.ecif,a.otpSession=e.data.otpSession,D.saveUserPara(a),l.go("/register3")}else"0"==t.ret_data.acct_type?(H.isBgShown=!0,T.dimStatusBarBackground(!0),d(function(){W.startSettingPassword()},50)):x(t)?(e.data.checkFaceNextStepTips="离账户激活成功还差一步",k()):(e.data.checkFaceNextStepTips="离账户登记成功还差一步",Re())},Ne=function(t){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.PRE_CHECK_FAIL+(t&&t.ret_code?"_"+t.ret_code:"")),e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_ON,S.hide(),t.ret_data&&t.ret_data.otp_sec_id&&(e.data.otpSession=encodeURIComponent(t.ret_data.otp_sec_id)),t.ret_code==n.CGI_RET.CGI_REG_ALREADY_BIND_SAME?f.show({oneLineTextLeft:t.ret_msg,twoButtonText1:"取消",twoButtonText2:"重新登录",popClose:function(t){1!=t&&(D.clearRegister(),D.clearRegister(),r.path("/login"))}}):t.ret_code==n.CGI_RET.CGI_REG_ALREADY_BIND_DIFF?f.show({oneLineTextLeft:t.ret_msg,twoButtonText1:"重新登录",twoButtonText2:"更换绑定",popClose:function(t){1==t?(D.clearRegister(),r.path("/login")):2==t&&ce()}}):t.ret_code==n.CGI_RET.CGI_REG_HAS_FAKE_ACCOUNT_RECORD?f.show({oneLineTextLeft:t.ret_msg?t.ret_msg:"您的网络环境当前存在风险，本次开户暂时被终止，稍后微众银行客服会电话联系您。",oneButtonText:"知道了"}):i.makeToast(t.ret_msg,"short")},pe=function(){H.isLastStepDialogShown=!0},Ae=function(){H.isLastStepDialogShown=!1,H.isBgShown=!1,T.dimStatusBarBackground(!1)},Se=function(t){e.data.isIDCardInvalid=!0,e.data.inputIDCardTipsContent=t,i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_INVALID_ID_CARD)};W.onClickNextStep=function(){var t=Ce();if(t!=b.SUCCESS)return void(t==b.PROTOCOL_ERROR&&i.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"));var o={};o.personal_name=e.data.name,o.personal_identify_no=e.data.IDCard.toUpperCase(),o.personal_identify_type="01",o.phone_no=e.data.phone,o.phone_check_num=e.data.otpNum,e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,e.data.timeout=0,S.show(),a.requestRegisterPreCheck(o).then(function(t){var e=t.ret_data.ecif_no;i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.PRE_CHECK_SUCCESS);var a="",o="";x(t)?(a=n.CHECK_FACE_SCENE_ID.UNION_ACCOUNT,o=n.FACE_CHECK_EXAMINE_TYPE.PICK_WRONG_IN_RIGHT):(a=n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT,o=n.FACE_CHECK_EXAMINE_TYPE.PICK_RIGHT_IN_WRONG),m.isInAsyncExamine(a,n.FACE_CHECK_STATE.CHECKING,e,o).then(function(e){e?(S.hide(),tracelog("isInAsyncExamine success"),i.makeToast("您的上一笔开户请求正在人工复核中，请等待审核结果短信告知","long"),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REQ_AGAIN_DURING_PICKING)):Ie(t)},function(){i.makeToast("连接失败，请检查您的网络设置"),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.QUERY_PICK_FAILED)})},Ne),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_NEXT_BTN)},W.onSettingPasswordFinish=function(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.FINISH_SETTING_PWD),H.initPwd==H.vm.formData.confirmPassword.originPwd?i.makeToast(STRING_TABLE.PASSWORD_SAME_OLD):(e.data.password=i.getRSAString(H.vm.formData.confirmPassword.originPwd+"11111111"),pe())},W.onSettingPasswordCanceled=function(){e.data.otpNum="",H.isBgShown=!1,H.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,T.dimStatusBarBackground(!1),Ce(),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_CLOSE_PWD)},W.onSettingPasswordError=function(t,e){var a="";e==X.PWD_ERROR.ERR_CODE_NOT_MATCH?a=n.REG_BIND_CARD_STATISTIC.REG_PWD_NOT_MATCH:e==X.PWD_ERROR.ERR_CODE_WEAK_PWD&&(a=n.REG_BIND_CARD_STATISTIC.REG_WEAK_PWD),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,a)},W.onNameChanged=function(){if(e.data.isNameInvalid=!1,e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,e.data.name&&""!=e.data.name){var t=i.isValidNameInput(e.data.name);"fail"==t?(e.data.isNameInvalid=!0,e.data.inputNameTipsContent="请输入真实姓名",i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_INVALID_OTP)):"finish"==t&&(i.clickButtonReport("openaccount_name"),Ce())}},W.onNameBlur=function(){},W.onIDCardChanged=function(){if(e.data.isIDCardInvalid=!1,e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,e.data.IDCard&&""!=e.data.IDCard){var t=i.isValidIDCardInput(e.data.IDCard);"fail"==t?Se("身份证号不正确，快检查检查"):"finish"==t?i.isValidIDCardNumber(e.data.IDCard)?i.isOldEnough(e.data.IDCard,16)?(i.clickButtonReport("openaccount_cardid"),Ce()):Se("暂时不支持未成年人开户"):Se("身份证号不正确，快检查检查"):e.data.IDCard.length>=14&&(i.isOldEnough(e.data.IDCard,16)||Se("暂时不支持未成年人开户"))}},W.onIDCardBlur=function(){e.data.IDCard&&""!=e.data.IDCard&&(i.isValidIDCardNumber(e.data.IDCard)||(e.data.isIDCardInvalid=!0,e.data.inputIDCardTipsContent="身份证号不正确，快检查检查"))},W.onPhoneChanged=function(){if(e.data.isPhoneInvalid=!1,e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,e.data.otpButtonClass=X.UI_STYLE.OTP_BTN_STYLE_OFF,e.data.phone&&""!=e.data.phone){var t=i.isValidPhoneInput(e.data.phone);"fail"==t?(e.data.isPhoneInvalid=!0,e.data.inputPhoneTipsContent="请使用真实电话，方便接收正确验证码",i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_INVALID_PHONE)):"finish"==t&&(e.data.otpButtonClass=X.UI_STYLE.OTP_BTN_STYLE_ON,Ce())}},W.onPhoneInputBlur=function(){},W.onOtpChanged=function(){if(e.data.isOTPInvalid=!1,e.data.nextButtonClass=X.UI_STYLE.NEXT_BTN_STYLE_OFF,e.data.otpNum&&""!=e.data.otpNum){var t=i.isValidPhoneOtpInput(e.data.otpNum);"fail"==t?(i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_INVALID_OTP),e.data.isOTPInvalid=!0,e.data.inputOtpTipsContent="验证码不正确"):"finish"==t&&Ce()}},W.onOtpBlur=function(){},W.onClickAgreeCheckbox=function(){var t="";t=H.isAgreed?n.REG_BIND_CARD_STATISTIC.REG_CLICK_AGREEMENT:n.REG_BIND_CARD_STATISTIC.REG_CLICK_CANCEL_AGREEMENT,i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,t)},W.onClickUserAgreement=function(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_VIEW_AGREEMENT),D.saveDataForRegister(H),l.go("/agreementDetail1")},W.back=function(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.CLICK_BACK_ON_REGISTER),D.clearRegister(),l.go("/default")},W.onClickOtp=function(){if(i.isValidPhoneNumber(H.phone)){T.readSMSVerifyCode().then(function(t){e.data.otpNum||(e.data.otpNum=t.smsCode,Ce())});var t={};t.phone_no=e.data.phone,t.usage_id=n.OPT_TYPE.OPEN_ACCOUNT,a.requestRegisterOTP(t).then(function(){e.data.otpButtonClass="register-yz-btn",e.data.showTimeoutButton=!1,e.data.timeout=60,document.addEventListener("pause",se,!1),document.addEventListener("resume",de,!1),Ee()},function(t){e.data.otpButtonClass="register-yz-btn",i.makeToast(t.ret_msg,"short")}),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_GET_OTP_BTN)}},W.onClickCheckFace=function(){d(function(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_CHECK_FACE)},200),D.saveDataForRegister(H),Ae();var t=n.CHECK_FACE_SCENE_ID.OPEN_ACCOUNT;H.isUnionAccount&&(t=n.CHECK_FACE_SCENE_ID.UNION_ACCOUNT),m.startFaceVerify(t,H.ecif,!0).then(function(t){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CHECK_FACE_SUCCESS),d(function(){i.makeToast("人脸验证通过","short")},500),_e(t)},function(t){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CHECK_FACE_FAIL+(t&&t.errorCode==m.FACE_ERROR_CODE.FAIL_WITH_YELLOW?"_withY":"")),t&&t.errorCode==m.FACE_ERROR_CODE.FAIL_WITH_YELLOW?_e(t,!0):J()},z)},W.onClickHideLastStepPopUp=function(){i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_CLOSE_LAST_STEP_DLG),f.show({oneLineTextLeft:"马上就要开户成功啦，确定要退出开户吗?",twoButtonText1:"退出",twoButtonText2:"继续开户",popClose:function(t){1===t?(Ae(),e.data.otpNum="",Ce(),i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_CONFIRM_CLOSE_LAST_STEP_DLG)):2===t&&i.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.REG_CLICK_CANCEL_CLOSE_LAST_STEP_DLG)}})},e.func.onClickCancelMask=function(){e.data.isMaskShowing=!1,e.data.maskClass="p-mask hide",Y()},e.$watch("data.isAgreed",function(){Ce()}),$()}]);function ActiveUnionResultController(e,n,t,c){var o=(e.data={},e.func={});o.back=function(){n.go("/default")},c.checkIsInWorkTime().then(function(){e.data.messageList=["账户激活已经受理,","处理结果将于15分钟内短信告知"]},function(){e.data.messageList=["账户激活已经受理,","处理结果将于12小时内短信告知"]})}app.controller("ActiveUnionResultController",["$scope","LocationService","cgiService","CheckFaceService",ActiveUnionResultController]);app.controller("RegisterResultController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","LocationService","BindBankCardService","localStorage",function(e,o,n,i,r,t,a,_,c,C,E,R,S,s,I,T,l,D,N,v,A,u,d,B){var h=o.data={},m=o.func={};m.onClickFinish=function(){u.go("/home"),a.reportCustomEvent(i.REPORT_EVENT_NAME.REG_BIND_CARD,i.REG_BIND_CARD_STATISTIC.REG_CLICK_FINISH)},m.onClickBindNewCard=function(){d.goToBindCard(null,null,{originPage:"/home"}),a.reportCustomEvent(i.REPORT_EVENT_NAME.REG_BIND_CARD,i.REG_BIND_CARD_STATISTIC.REG_CLICK_FINISH_AND_BIND_CARD)},m.onClickViewCardList=function(){h.isMaskShown=!0,a.reportCustomEvent(i.REPORT_EVENT_NAME.REG_BIND_CARD,i.REG_BIND_CARD_STATISTIC.REG_CLICK_SUPPORTED_BANK)},m.onClickCancelMask=function(){h.isMaskShown=!1},m.onClickGoToHomePage=function(){u.go("/home")},m.shouldShowAd=function(){return 1==B.loadDataByUser("hasShowInviterDlg")};var G="";1==B.loadDataByUser("hasShowInviterDlg")&&(G="_isInvited"),a.reportCustomEvent(i.REPORT_EVENT_NAME.REG_BIND_CARD,i.REG_BIND_CARD_STATISTIC.PV_REG_RESULT+G)}]);app.controller("BindBankCardController",["$q","$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","LocationService","BindBankCardService","HJactionLoading","HJactionPop",function(n,e,t,a,r,o,_,i,C,d,c,E,u,T,I,N,s,R,B,f,D,A,S,k,g,l){function p(){i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.PV_BIND_CARD)}var h=t.data={},b=t.func={},v=null,m=null,L=function(){v={UI_STYLE:{NEXT_BTN_ON:"ui-btn",NEXT_BTN_OFF:"ui-btn off"}},m={},m.lastBankStr="",m.shareCodeCard="",m.bankStr="";var n=k.getData();null!=n&&(m.originPage=n.originPage)},G=function(){var n=_.getUnbindBankCardList();for(var e in n){var t=n[e];if(1==t.can_be_charged&&t.other_account==h.bankCard)return!0}return!1},F=function(){var n=u.getCacheInfo("personalInfo");n&&(h.name=n.name)},O=function(){h.nextBtnStyle=v.UI_STYLE.NEXT_BTN_OFF,h.isChargeSupported=!0,h.isGuidePageNeeded=!1},P=function(){m.originPage?S.go(m.originPage):S.backPage()},w=function(){var n=k.loadDataForCardBinding();null!=n&&(t.data=h=n,k.saveDataForCardBinding(null))},V=function(){L(),F(),O(),w(),p()},y=function(){return h.isChargeSupported||h.isHistoryChargedSupportedCard?h.isAgreed:!0},K=function(){var n=!1;return""!=h.bankCard&&i.isNumber(h.bankCard)&&!h.inputBankCardTipsContent&&y()&&(n=!0),h.nextBtnStyle=n?v.UI_STYLE.NEXT_BTN_ON:v.UI_STYLE.NEXT_BTN_OFF,n},M=function(){m.lastBankStr="",m.shareCodeCard=!1,h.inputBankCardTipsContent="",h.showBankIcon=!1,h.bankImg="",h.isChargeSupported=!0,h.cardTypeId="",h.cardType="",h.bankName="",h.bankCode="",h.isGuidePageNeeded=!1},x=function(){},H=function(){},U=function(n,e){return e?(B.showPickUserFromFaceFailedMsg(r.CHECK_FACE_SCENE_ID.BIND_CARD,P),void g.hide()):void a.requestPersonalInfo().then(function(){tracelog("绑卡成功,拉个人信息成功")},function(){tracelog("成功,拉个人信息失败")}).then(function(){if(h.isGuidePageNeeded){var e={};e.cardNo=h.bankCard,e.bankName=h.bankName;var t=u.getCacheInfo("personalInfo");t&&(e.webankCardNo=t.webank_card_no),e.regEndDateTime=n.ret_data.expire_datetime,k.saveBindCardResult(e);var a={};a.originPage=m.originPage,S.go("/bindBankCardResult",null,a)}else i.makeToast("绑定银行卡成功"),P()})},X=function(n){g.hide(),i.makeToast(n.ret_msg,"long"),P()},Y=function(n,e,t,o){var _={};_.other_card_no=h.bankCard,_.face_id=e,_.artificial_faceck_id=t,_.extra_info="REG",_.contract_ver_wt=r.USER_PROTOCOL_VER.WTKK_VER,_.session_id=k.getPwdSession(),_.force_reg=n?1:0,_.bank_card_mnt_code=h.isChargeSupported?"1":"2",o&&(_.faceck_flag="F3Y1"),n&&(_.bank_card_mnt_code="2"),g.show(),a.requestBindCardV2(_).then(function(n){U(n,o)},X)},$=function(n){h.inputBankCardTipsContent=n,i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_INVALID_CARD_NO)},q=function(){_.findCardFromUnbindCardList(h.bankCard)&&(h.isGuidePageNeeded=!1),h.isHistoryChargedSupportedCard=G()},W=function(n){return m.shareCodeCard=!1,10!=n.ret_data.card_typeid?($("暂不支持信用卡"),h.nextBtnStyle=v.UI_STYLE.NEXT_BTN_OFF,void(h.showBankIcon=!1)):(h.isGuidePageNeeded=n.ret_data.trans_open_account,h.isChargeSupported=!n.ret_data.trans_open_account,q(),h.cardTypeId=n.ret_data.card_typeid,h.cardType=n.ret_data.card_type,h.bankName=n.ret_data.bank_name,h.bankCode=n.ret_data.clear_no_pbc,ne(),i.loadImage("../img/bankHead/yh-"+(n.ret_data.clear_no_pbc||0)+"@nb.png",function(n,e){h.bankImg=n?e:""}),h.showBankIcon=!0,void(h.inputBankCardTipsContent=""))},J=function(n){if(h.showBankIcon=!1,h.bankImg="",n.ret_code&&n.ret_code.length>=4){if("0080"==n.ret_code.slice(n.ret_code.length-4,n.ret_code.length))return h.inputBankCardTipsContent="",void(m.shareCodeCard=!0);if("0079"==n.ret_code.slice(n.ret_code.length-4,n.ret_code.length))return $("暂不支持该银行"),void(h.nextBtnStyle=v.UI_STYLE.NEXT_BTN_OFF)}else m.shareCodeCard=!1;(n.ret_code==r.CGI_RET.CGI_UNUSED_CARD||n.ret_code==r.CGI_RET.CGI_UNUSED_CARD_2)&&(6==m.bankStr.length?h.inputBankCardTipsContent="":$("暂不支持该银行"),h.nextBtnStyle=v.UI_STYLE.NEXT_BTN_OFF)},j=function(n){if(h.nextBtnStyle=v.UI_STYLE.NEXT_BTN_OFF,h.bankCard&&(h.bankCard.length<6&&M(),h.bankCard&&""!=h.bankCard)){if(!i.isNumber(h.bankCard))return void $(STRING_TABLE.INCORRECT_BANK_CARD_NO);if(h.bankCard.length>=10&&K(),h.bankCard.length>=6){var e=h.bankCard.length>=10?10:6;m.bankStr=h.bankCard.slice(0,e),n&&m.shareCodeCard&&(m.bankStr=h.bankCard),h.showBankIcon||m.shareCodeCard&&!n||m.lastBankStr!=m.bankStr&&(m.lastBankStr=m.bankStr,a.requestBankInfo(m.bankStr,"bind_card").then(W,J))}q()}},Z=function(){return n(function(n,e){return _.findCardFromBindCardList(h.bankCard)?void l.show({oneLineTextLeft:"已经绑定了该银行卡",oneButtonText:"知道了",popClose:function(){e()}}):_.findCardFromRegisterCardList(h.bankCard)?void l.show({oneLineTextLeft:"该银行卡已登记，请汇款完成绑定",oneButtonText:"知道了",popClose:function(){e()}}):h.isChargeSupported||h.isHistoryChargedSupportedCard?n():(h.outValue={},h.outValue.showPop=!0,h.outValue.oneLineTextLeft=STRING_TABLE.BIND_BANK_CARD_LIMIT_TEXT,h.outValue.twoButtonText1=STRING_TABLE.CHANGE_BANK_CARD,h.outValue.twoButtonText2=STRING_TABLE.DONT_CHANGE_CARD,void(h.outValue.popClose=function(t){return 1==t?(b.onClickChangeCard(),i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_CANCEL_REGISTER),e()):2==t?(i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_CONFIRM_REGISTER),n()):void 0}))})},z=function(){return n(function(n,e){if(B.isFaceIdValid(r.CHECK_FACE_SCENE_ID.BIND_CARD))return n(!1);var t=_.findCardFromUnbindCardList(h.bankCard);return t?(h.isGuidePageNeeded=!1,n(!1)):void l.show({oneLineTextLeft:"为了您的账户安全，需要您先通过人脸验证",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(t){return 2==t?(i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_CONFIRM_CHECK_FACE),n(!0)):1==t||0==t?(i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_CANCEL_CHECK_FACE),e()):void 0}})})},Q=function(){B.startFaceVerify(r.CHECK_FACE_SCENE_ID.BIND_CARD,"",!0).then(function(n){E(function(){var n="gray-info-"+r.GRAY_BIZ_ID.REG_BIND_CARD,e=u.getCacheInfo(n);e&&"true"==e.in||i.makeToast("恭喜您通过验证，请继续绑定银行卡","short")},500),Y(!1,n.faceId,n.videoSessionId)},function(n){n&&n.errorCode==B.FACE_ERROR_CODE.FAIL_WITH_YELLOW?Y(!1,n.faceId,n.videoSessionId,!0):x()},function(){H()})},ne=function(){var n=gBankLimit[h.bankCode];n&&(h.cardDayLimit=n.perDay,h.cardTransLimit=n.perOne)};b.onClickFinish=function(){S.go("/home")},b.onClickGoToHomePage=function(){S.go("/home")},b.back=function(){P()},b.onBankCardBlur=function(){j(!0)},b.onBankCardChanged=function(){j()},b.onClickUserAgreement=function(){k.saveDataForCardBinding(h),i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_VIEW_AGREEMENT)},b.onClickAgreeCheckbox=function(){K();var n="";n=h.isAgreed?r.REG_BIND_CARD_STATISTIC.BIND_CLICK_AGREEMENT:r.REG_BIND_CARD_STATISTIC.BIND_CLICK_CANCEL_AGREEMENT,i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,n)},b.onClickChangeCard=function(){g.hide(),M(),K(),h.bankCard="",b.showKeyboard(),i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_CHANGE_CARD)},b.onClickBankIntro=function(n){h.isMaskShown=!0,i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_BANK_INTRO+"_"+n)},b.onClickBindNewCard=function(){K()&&(i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_CLICK_NEXT_STEP),Z().then(function(){return z()},function(){return T.reject()}).then(function(n){n?Q():Y(!1,B.getFaceId(r.CHECK_FACE_SCENE_ID.BIND_CARD))}))},b.showNormalBindCardUI=function(){return h.isChargeSupported||h.isHistoryChargedSupportedCard},b.onClickCancelMask=function(){h.isMaskShown=!1},V()}]);app.controller("BindBankCardResultController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","LocationService","BindBankCardService","HelpDetailService",function(e,a,t,r,n,o,i,c,s,C,_,D,E,R,S,T,l,u,g,d,v,I,N,B){var A=a.data={},P=a.func={};A.originPage=null,P.onClickFinish=function(){i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_RESULT_CLICK_FINISH),A.originPage?I.go(A.originPage):N.backPage(2)},P.onClickCopy=function(){_(function(){i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_RESULT_CLICK_COPY_CARD)},200),E.copyStrToPasteboard(A.resultData.webankCardNo).then(function(){i.makeToast("复制成功","short")},function(){i.makeToast("复制失败，请稍后再试","short")})},P.onClickTransferIntro=function(){i.reportCustomEvent(r.REPORT_EVENT_NAME.REG_BIND_CARD,r.REG_BIND_CARD_STATISTIC.BIND_RESULT_CLICK_HOW_TO_TRANS),N.saveBindCardResult(A.resultData),B.goPage("1")};var m=function(){var e=I.getData();e&&(A.originPage=e.originPage),A.resultData={},A.resultData=N.loadBindCardResult();var a=A.resultData.regEndDateTime;a?A.regEndDate=i.getDateByYYYYMMDDString(a.substr(0,8)):(A.regEndDate=today=new Date,A.regEndDate.setDate(today.getDate()+2)),N.saveBindCardResult(null)};m()}]);function startMonitorNetwork(){var e=[{url:"http://hjdata.webank.com/querydata/networkmonitor.html",content:"<!DOCTYPE html><html><body>FB29A95125FEFA8101E9214E06E63FA8</body></html>"},{url:"http://gzhjdata.webank.com/querydata/networkmonitor.html",content:"<!DOCTYPE html><html><body>FB29A95125FEFA8101E9214E06E63FA8</body></html>"},{url:"https://www.webankcdn.net/s/hj/appconf/common/networkmonitor.html",content:"<!DOCTYPE html><html><body>FB29A95125FEFA8101E9214E06E63FA8</body></html>"},{url:"https://personal.webank.com/networkmonitor.html",content:"<!DOCTYPE html><html><body>FB29A95125FEFA8101E9214E06E63FA8</body></html>"}],t={};t.CmdID="MonitorNetwork",t.checkList=e,CommandChannel.execute(t,function(e){Statistics.reportEvent("networkMonitor",{result:e})},function(e){Statistics.reportEvent("networkMonitor",{result:JSON.stringify(e)})})}app.config(["$httpProvider","$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,r,a){h5TimeRecord&&(h5TimeRecord.h5AppConfigStart=(new Date).getTime()),t.state("init",{cache:!1,canSwipeBack:!1,url:"/",templateUrl:"init.html?a="+H5_Ver,controller:"InitController"}).state("defaultPage",{cache:!0,canSwipeBack:!1,url:"/default",templateUrl:"asset/default.html?a="+H5_Ver,controller:"DefaultPageController"}).state("financialCalendar",{cache:!0,canSwipeBack:!0,url:"/financialCalendar/:inputDateStr",templateUrl:"financial/financial-calendar.html?a="+H5_Ver,controller:"FinancialCalendarController"}).state("financialCalendarEventList",{cache:!0,canSwipeBack:!0,url:"/financialCalendarEventList",templateUrl:"financial/financial-calendar-event-list.html?a="+H5_Ver,controller:"FinancialCalendarEventListController"}).state("financialCalendarEvent",{cache:!0,canSwipeBack:!0,url:"/financialCalendarEvent/:dateStr/:origin",templateUrl:"financial/financial-calendar-event.html?a="+H5_Ver,controller:"FinancialCalendarEventController"}).state("financialHome",{cache:!0,canSwipeBack:!1,url:"/financialHome",templateUrl:"financial/financial-home.html?a="+H5_Ver,controller:"FinancialHomeController"}).state("financialHomeMore",{cache:!0,canSwipeBack:!0,url:"/financialHomeMore/:type",templateUrl:"financial/financial-home-more.html?a="+H5_Ver,controller:"FinancialHomeMoreController"}).state("financialRecommend",{cache:!0,canSwipeBack:!1,url:"/financialRecommend",templateUrl:"financial/financial-recommend.html?a="+H5_Ver,controller:"FinancialRecommendController"}).state("financialRecommendGJMore",{cache:!0,canSwipeBack:!0,url:"/financialRecommendGJMore",templateUrl:"financial/financial-recommend-gjmore.html?a="+H5_Ver,controller:"FinancialRecommendGJMoreController"}).state("financialRecommendDQMore",{cache:!0,canSwipeBack:!0,url:"/financialRecommendDQMore",templateUrl:"financial/financial-recommend-dqmore.html?a="+H5_Ver,controller:"FinancialRecommendDQMoreController"}).state("financialRecommendShortMore",{cache:!0,canSwipeBack:!0,url:"/financialRecommendShortMore",templateUrl:"financial/financial-recommend-shortmore.html?a="+H5_Ver,controller:"FinancialRecommendShortMoreController"}).state("Notice",{cache:!1,canSwipeBack:!1,url:"/Notice",templateUrl:"notice.html?a="+H5_Ver,controller:"NoticeController"}).state("transRecord",{cache:!0,canSwipeBack:!0,url:"/transRecord",templateUrl:"common/trans-record.html?a="+H5_Ver,controller:"TransRecordController"}).state("transRecordDetail",{cache:!1,canSwipeBack:!0,url:"/transRecordDetail",templateUrl:"common/trans-record-detail.html?a="+H5_Ver,controller:"TransRecordDetailController"}).state("transPlanDetail",{cache:!1,canSwipeBack:!0,url:"/transPlanDetail",templateUrl:"common/trans-plan-detail.html?a="+H5_Ver,controller:"TransPlanDetailController"}).state("login",{cache:!1,canSwipeBack:!1,url:"/login",templateUrl:"register/login-we.html?a="+H5_Ver,controller:"LoginController"}).state("loginWithFlag",{cache:!1,canSwipeBack:!1,url:"/login/:flag",templateUrl:"register/login-we.html?a="+H5_Ver,controller:"LoginController"}).state("register",{cache:!1,canSwipeBack:!1,url:"/register",templateUrl:"register/register1.html?a="+H5_Ver,controller:"RegisterController1"}).state("register2",{cache:!1,canSwipeBack:!1,url:"/register2",templateUrl:"register/register2.html?a="+H5_Ver,controller:"RegisterController2"}).state("register3",{cache:!1,canSwipeBack:!1,url:"/register3",templateUrl:"register/register3.html?a="+H5_Ver,controller:"RegisterController3"}).state("register4",{cache:!1,canSwipeBack:!1,url:"/register4",templateUrl:"register/register4.html?a="+H5_Ver,controller:"RegisterController4"}).state("bindNewCard1",{cache:!1,canSwipeBack:!1,url:"/bindNewCard1",templateUrl:"register/bind-new-card1.html?a="+H5_Ver,controller:"BindNewCardController1"}).state("bindNewCard2",{cache:!1,canSwipeBack:!1,url:"/bindNewCard2",templateUrl:"register/bind-new-card2.html?a="+H5_Ver,controller:"BindNewCardController2"}).state("registerAndBindCard",{cache:!1,canSwipeBack:!1,url:"/registerAndBindCard",templateUrl:"register/register-bind-card1.html?a="+H5_Ver,controller:"RegisterBindCardController1"}).state("registerAndBindCard2",{cache:!1,canSwipeBack:!1,url:"/registerAndBindCard2",templateUrl:"register/register-bind-card2.html?a="+H5_Ver,controller:"RegisterBindCardController2"}).state("registerAndBindCard3",{cache:!1,canSwipeBack:!1,url:"/registerAndBindCard3",templateUrl:"register/register-bind-card3.html?a="+H5_Ver,controller:"RegisterBindCardController3"}).state("defaultPageWithFrom",{cache:!1,canSwipeBack:!1,url:"/default/:from",templateUrl:"asset/default.html?a="+H5_Ver,controller:"DefaultPageController"}).state("welcome2",{cache:!1,canSwipeBack:!1,url:"/welcome2",templateUrl:"welcome_v2.html?a="+H5_Ver,controller:"WelcomeControllerV2"}).state("managePassword",{cache:!1,canSwipeBack:!0,url:"/managePassword",templateUrl:"common/setting-manage-password.html?a="+H5_Ver,controller:"ManagePasswordController"}).state("bindInfo",{cache:!0,canSwipeBack:!0,url:"/bindInfo",templateUrl:"common/setting-bind-info.html?a="+H5_Ver,controller:"BindInfoController"}).state("accountSettingsWithCallback",{cache:!0,canSwipeBack:!1,url:"/accountSettings/:originPage",templateUrl:"common/setting-home.html?a="+H5_Ver,controller:"AccountSettingsController"}).state("accountSettings",{cache:!0,canSwipeBack:!1,url:"/accountSettings",templateUrl:"common/setting-home.html?a="+H5_Ver,controller:"AccountSettingsController"}).state("invite",{cache:!0,canSwipeBack:!0,url:"/invite",templateUrl:"common/setting-invite.html?a="+H5_Ver,controller:"InviteController"}).state("home",{cache:!0,canSwipeBack:!1,url:"/home",templateUrl:"asset/home.html?a="+H5_Ver,controller:"HomeController"}).state("asset",{cache:!0,canSwipeBack:!0,url:"/asset",templateUrl:"asset/asset.html?a="+H5_Ver,controller:"AssetController"}).state("assetCalendar",{cache:!0,canSwipeBack:!0,url:"/assetCalendar/:inputDateStr",templateUrl:"asset/asset-calendar.html?a="+H5_Ver,controller:"AssetCalendarController"}).state("homeNeedRefresh",{cache:!0,canSwipeBack:!1,url:"/home/:needRefresh",templateUrl:"asset/home.html?a="+H5_Ver,controller:"HomeController"}).state("myFinancialInsurance",{cache:!0,canSwipeBack:!0,url:"/myFinancialInsurance",templateUrl:"financial/my-financial-insurance.html?a="+H5_Ver,controller:"MyFinancialInsuranceController"}).state("myFinancialShortPeroid",{cache:!0,canSwipeBack:!0,url:"/myFinancialShortPeroid",templateUrl:"financial/my-financial-short-peroid.html?a="+H5_Ver,controller:"MyFinancialShortPeroidController"}).state("myFinancialStock",{cache:!0,canSwipeBack:!0,url:"/myFinancialStock",templateUrl:"financial/my-financial-stock.html?a="+H5_Ver,controller:"MyFinancialStockController"}).state("myFinancialStructured",{cache:!0,canSwipeBack:!0,url:"/myFinancialStructured",templateUrl:"financial/my-financial-structured.html?a="+H5_Ver,controller:"MyFinancialStructuredController"}).state("insuranceRule2",{cache:!1,canSwipeBack:!0,url:"/insuranceRule2/:prodCode/:tab",templateUrl:"financial/insurance/universal-insurance-product/insurance-rule2.html?a="+H5_Ver,controller:"InsuranceRuleController2"}).state("insuranceProductDetails2",{cache:!0,canSwipeBack:!0,url:"/insuranceProductDetails2/:prodCode",templateUrl:"financial/insurance/universal-insurance-product/insurance-product-details2.html?a="+H5_Ver,controller:"InsuranceProductDetailsController2"}).state("insurancePurchaseProdCode2",{cache:!0,canSwipeBack:!0,url:"/insurancePurchase2/:prodCode",templateUrl:"financial/insurance/universal-insurance-product/insurance-purchase2.html?a="+H5_Ver,controller:"InsurancePurchaseController2"}).state("insuranceMyProdDetailProdCode2",{cache:!0,canSwipeBack:!0,url:"/insuranceMyProdDetail2/:policyNo",templateUrl:"financial/insurance/universal-insurance-product/insurance-my-product-details2.html?a="+H5_Ver,controller:"InsuranceMyProductDetailsController2"}).state("insuranceRedeem2",{cache:!1,canSwipeBack:!0,url:"/insuranceRedeem2/:policyNo/:redeemType",templateUrl:"financial/insurance/universal-insurance-product/insurance-redeem2.html?a="+H5_Ver,controller:"InsuranceRedeemController2"}).state("insuranceReview",{cache:!1,canSwipeBack:!1,url:"/insuranceReview",templateUrl:"financial/insurance/universal-insurance-product/insurance-review.html?a="+H5_Ver,controller:"InsuranceReviewController"}).state("InsuranceRedeemResult2",{cache:!1,canSwipeBack:!1,url:"/insuranceRedeemResult2",templateUrl:"financial/insurance/universal-insurance-product/insurance-redeem-result2.html?a="+H5_Ver,controller:"InsuranceRedeemResultController2"}).state("insurancePurchaseResultResultIdResultMsg2",{cache:!1,canSwipeBack:!1,url:"/insurancePurchaseResult2",templateUrl:"financial/insurance/universal-insurance-product/insurance-purchase-result2.html?a="+H5_Ver,controller:"InsurancePurchaseResultController2"}).state("universalInsuranceAgeUnmatch",{cache:!1,canSwipeBack:!1,url:"/universalInsuranceAgeUnmatch/:prodCode",templateUrl:"financial/insurance/universal-insurance-product/insurance-age-unmatch.html?a="+H5_Ver,controller:"InsuranceAgeUnmatchController"}).state("universalInsuranceIdUnmatch",{cache:!1,canSwipeBack:!1,url:"/universalInsuranceIdUnmatch/:prodCode",templateUrl:"financial/insurance/universal-insurance-product/insurance-id-unmatch.html?a="+H5_Ver,controller:"InsuranceIdUnmatchController"}).state("insuranceMyProdDetailProdCode",{cache:!0,canSwipeBack:!0,url:"/insuranceMyProdDetail/:prodCode",templateUrl:"financial/insurance/fix-time-product/insurance-my-product-details.html?a="+H5_Ver,controller:"InsuranceMyProductDetailsController"}).state("insurancePurchaseProdCode",{cache:!0,canSwipeBack:!0,url:"/insurancePurchase/:prodCode",templateUrl:"financial/insurance/fix-time-product/insurance-purchase.html?a="+H5_Ver,controller:"InsurancePurchaseController"}).state("insurancePurchaseResultResultIdResultMsg",{cache:!1,canSwipeBack:!1,url:"/insurancePurchaseResult/:resultId/:resultMsg",templateUrl:"financial/insurance/fix-time-product/insurance-purchase-result.html?a="+H5_Ver,controller:"InsurancePurchaseResultController"}).state("insuranceProductDetailsOnSaleCode",{cache:!0,canSwipeBack:!0,url:"/insuranceProductDetails/:prodCode",templateUrl:"financial/insurance/fix-time-product/insurance-product-details.html?a="+H5_Ver,controller:"InsuranceProductDetailsController"}).state("insuranceProductDetailsOnSaleCodeHideButton",{cache:!0,canSwipeBack:!0,url:"/insuranceProductDetails/:prodCode/:isHideButton",templateUrl:"financial/insurance/fix-time-product/insurance-product-details.html?a="+H5_Ver,controller:"InsuranceProductDetailsController"}).state("insuranceHistoryListOnSaleCode",{cache:!0,canSwipeBack:!0,url:"/insuranceHistoryList/:onSaleCode",templateUrl:"financial/insurance/fix-time-product/insurance-history-list.html?a="+H5_Ver,controller:"InsuranceHistoryListController"}).state("insuranceHistoryProductDetailProdCode",{cache:!0,canSwipeBack:!0,url:"/insuranceHistoryProductDetail/:prodCode",templateUrl:"financial/insurance/fix-time-product/insurance-history-product-details.html?a="+H5_Ver,controller:"InsuranceHistoryProductDetailController"}).state("insuranceProductIntroductionOnSaleCode",{cache:!1,canSwipeBack:!0,url:"/insuranceProductIntroduction/:onSaleCode/:prodCode",templateUrl:"financial/insurance/fix-time-product/insurance-product-introduction.html?a="+H5_Ver,controller:"InsuranceProductIntroductionController"}).state("insuranceProductIntroduction2",{cache:!1,canSwipeBack:!0,url:"/insuranceProductIntroduction2/:prodCode",templateUrl:"financial/insurance/universal-insurance-product/insurance-product-introduction2.html?a="+H5_Ver,controller:"InsuranceProductIntroductionController2"}).state("insuranceCancelList",{cache:!0,canSwipeBack:!0,url:"/insuranceCancelList",templateUrl:"financial/insurance/fix-time-product/insurance-cancel-list.html?a="+H5_Ver,controller:"InsuranceCancelListController"}).state("insuranceCancelResult",{cache:!1,canSwipeBack:!1,url:"/insuranceCancelResult",templateUrl:"financial/insurance/fix-time-product/insurance-cancel-result.html?a="+H5_Ver,controller:"InsuranceCancelResultController"}).state("structuredProductDetails",{cache:!0,canSwipeBack:!0,url:"/structuredProductDetails/:prodCode",templateUrl:"financial/structured/structured-product-details.html?a="+H5_Ver,controller:"structuredProductDetailsController"}).state("structuredProductDetailsWithHideButton",{cache:!0,canSwipeBack:!0,url:"/structuredProductDetails/:prodCode/:isHideButton",templateUrl:"financial/structured/structured-product-details.html?a="+H5_Ver,controller:"structuredProductDetailsController"}).state("structuredProductMoreDetails",{cache:!1,canSwipeBack:!1,url:"/structuredProductMoreDetails",templateUrl:"financial/structured/structured-product-more-details.html?a="+H5_Ver,controller:"structuredProductMoreDetailsController"}).state("structuredHistoryValue",{cache:!1,canSwipeBack:!1,url:"/structuredHistoryValue",templateUrl:"financial/structured/structured-history-value.html?a="+H5_Ver,controller:"structuredHistoryValueController"}).state("structuredPurchase",{cache:!1,canSwipeBack:!1,url:"/structuredPurchase/:prodCode",templateUrl:"financial/structured/structured-purchase.html?a="+H5_Ver,controller:"structuredPurchaseController"}).state("structuredPurchaseResult",{cache:!1,canSwipeBack:!1,url:"/structuredPurchaseResult",templateUrl:"financial/structured/structured-purchase-result.html?a="+H5_Ver,controller:"structuredPurchaseResultController"}).state("structuredRuleDetails",{cache:!1,canSwipeBack:!1,url:"/structuredRuleDetails",templateUrl:"financial/structured/structured-rule-details.html?a="+H5_Ver,controller:"structuredRuleDetailsController"}).state("structuredMyProductDetails",{cache:!1,canSwipeBack:!1,url:"/structuredMyProductDetails/:prodCode",templateUrl:"financial/structured/structured-my-product-details.html?a="+H5_Ver,controller:"structuredMyProductDetailsController"}).state("stockProductDetailOnSaleCode",{cache:!0,canSwipeBack:!0,url:"/stockProductDetail/:onSaleCode",templateUrl:"financial/stock/stock-product-detail.html?a="+H5_Ver,controller:"StockProductDetailController"}).state("stockProductDetailOnSaleCodeHideButton",{cache:!0,canSwipeBack:!0,url:"/stockProductDetail/:onSaleCode/:isHideButton",templateUrl:"financial/stock/stock-product-detail.html?a="+H5_Ver,controller:"StockProductDetailController"}).state("stockMyProductDetailOnSaleCode",{cache:!0,canSwipeBack:!0,url:"/stockMyProductDetail/:onSaleCode",templateUrl:"financial/stock/stock-my-product-detail.html?a="+H5_Ver,controller:"StockMyProductDetailController"}).state("stockPurchaseOnSaleCode",{cache:!0,canSwipeBack:!0,url:"/stockPurchase/:onSaleCode",templateUrl:"financial/stock/stock-purchase.html?a="+H5_Ver,controller:"StockPurchaseController"}).state("stockPurchaseResult",{cache:!1,canSwipeBack:!1,url:"/stockPurchaseResult",templateUrl:"financial/stock/stock-purchase-result.html?a="+H5_Ver,controller:"StockPurchaseResultController"}).state("stockRedeemOnSaleCode",{cache:!0,canSwipeBack:!0,url:"/stockRedeem/:onSaleCode",templateUrl:"financial/stock/stock-redeem.html?a="+H5_Ver,controller:"StockRedeemController"}).state("stockRedeemResult",{cache:!1,canSwipeBack:!1,url:"/stockRedeemResult",templateUrl:"financial/stock/stock-redeem-result.html?a="+H5_Ver,controller:"StockRedeemResultController"}).state("stockCleanValueHistoryOnSaleCodeHistoryListOnSaleCode",{cache:!1,canSwipeBack:!0,url:"/stockCleanValueHistory/:onSaleCode",templateUrl:"financial/stock/stock-history-clean-value.html?a="+H5_Ver,controller:"StockHistoryCleanValueController"}).state("stockCleanValueHistoryOnSaleCodeHistoryList",{cache:!1,canSwipeBack:!0,url:"/stockCleanValueHistory",templateUrl:"financial/stock/stock-history-clean-value.html?a="+H5_Ver,controller:"StockHistoryCleanValueController"}).state("stockTransRates",{cache:!1,canSwipeBack:!0,url:"/stockTransRates/:onSaleCode",templateUrl:"financial/stock/stock-trans-rates.html?a="+H5_Ver,controller:"StockTransRatesController"}).state("stockTransRules",{cache:!1,canSwipeBack:!0,url:"/stockTransRules/:onSaleCode",templateUrl:"financial/stock/stock-trans-rules.html?a="+H5_Ver,controller:"StockTransRulesController"}).state("stockProdManager",{cache:!1,canSwipeBack:!0,url:"/stockProdManager/:onSaleCode",templateUrl:"financial/stock/stock-prod-manager.html?a="+H5_Ver,controller:"StockProdManagerController"}).state("stockMoreDetail",{cache:!1,canSwipeBack:!0,url:"/stockMoreDetail/:onSaleCode",templateUrl:"financial/stock/stock-more-detail.html?a="+H5_Ver,controller:"StockMoreDetailController"}).state("stockAssetDetail",{cache:!1,canSwipeBack:!0,url:"/stockAssetDetail/:onSaleCode",templateUrl:"financial/stock/stock-asset-detail.html?a="+H5_Ver,controller:"StockAssetDetailController"}).state("stockConfirmPurchaseDetail",{cache:!1,canSwipeBack:!0,url:"/stockConfirmPurchaseDetail/:onSaleCode",templateUrl:"financial/stock/stock-confirm-purchase-detail.html?a="+H5_Ver,controller:"StockConfirmPurchaseDetailController"}).state("stockConfirmRedeemDetail",{cache:!1,canSwipeBack:!0,url:"/stockConfirmRedeemDetail/:onSaleCode",templateUrl:"financial/stock/stock-confirm-redeem-detail.html?a="+H5_Ver,controller:"StockConfirmRedeemDetailController"}).state("stockCancelResult",{cache:!1,canSwipeBack:!1,url:"/stockCancelResult",templateUrl:"financial/stock/stock-cancel-result.html?a="+H5_Ver,controller:"StockCancelResultController"}).state("monetaryMyProdDetailProdCode",{cache:!0,canSwipeBack:!0,url:"/monetaryMyProdDetail/:prodCode",templateUrl:"financial/monetary/monetary-my-product-details.html?a="+H5_Ver,controller:"MonetaryMyProductDetailsController"}).state("monetaryHistorySevenDaysIncomeRateProdCode",{cache:!1,canSwipeBack:!1,url:"/monetaryHistorySevenDaysIncomeRate/:prodCode",templateUrl:"financial/monetary/monetary-history-seven-days-income-rate.html?a="+H5_Ver,controller:"MonetaryHistorySevenDaysIncomeRateController"}).state("monetaryHistoryIncomeTenThousandProdCode",{cache:!1,canSwipeBack:!0,url:"/monetaryHistoryIncomeTenThousand/:prodCode",templateUrl:"financial/monetary/monetary-history-ten-thousand-income.html?a="+H5_Ver,controller:"MonetaryHistoryTenThousandController"}).state("monetaryMoreDetails",{cache:!1,canSwipeBack:!1,url:"/monetaryMoreDetails",templateUrl:"financial/monetary/monetary-product-introduction.html?a="+H5_Ver,controller:"MonetaryMoreDetailsController"}).state("monetaryMoreIncomeRules",{cache:!1,canSwipeBack:!0,url:"/monetaryMoreIncomeRules/:onSaleCode",templateUrl:"financial/monetary/monetary-income-rules.html?a="+H5_Ver,controller:"MonetaryIncomeRulesController"}).state("unbindOpenID",{cache:!1,canSwipeBack:!0,url:"/unbindOpenID",templateUrl:"common/setting-unbind.html?a="+H5_Ver,controller:"UnbindOpenIDController"}).state("viewCardInfo",{cache:!1,canSwipeBack:!0,url:"/viewCardInfo",templateUrl:"common/setting-binding-card-detail.html?a="+H5_Ver,controller:"ViewCardInfoController"}).state("changePasswordOldPassword",{cache:!1,canSwipeBack:!1,url:"/changePassword",templateUrl:"common/setting-change-password.html?a="+H5_Ver,controller:"ChangePasswdController"}).state("resetPasswd",{cache:!1,canSwipeBack:!1,url:"/resetPasswd",templateUrl:"common/setting-reset-password.html?a="+H5_Ver,controller:"ResetPasswdController"}).state("resetStrongPasswd",{cache:!1,canSwipeBack:!1,url:"/resetStrongPasswd",templateUrl:"common/setting-reset-strong-password.html?a="+H5_Ver,controller:"ResetStrongPasswdController"}).state("about",{cache:!0,canSwipeBack:!0,url:"/about",templateUrl:"common/setting-about.html?a="+H5_Ver,controller:"AboutController"}).state("webankCard",{cache:!0,url:"/webankCard",templateUrl:"common/webank-card.html?a="+H5_Ver,controller:"WebankCardController"}).state("webankIntroduce",{cache:!1,canSwipeBack:!0,url:"/webankIntroduce",templateUrl:"common/webank-introduce.html?a="+H5_Ver,controller:"WebankIntroduceController"}).state("transLimit1",{cache:!0,canSwipeBack:!0,url:"/transLimit1",templateUrl:"common/trans-limit1.html?a="+H5_Ver,controller:"TransLimit1Controller"}).state("transLimit2",{cache:!1,canSwipeBack:!0,url:"/transLimit2",templateUrl:"common/trans-limit2.html?a="+H5_Ver,controller:"TransLimit2Controller"}).state("support",{cache:!1,canSwipeBack:!1,url:"/support",templateUrl:"common/setting-support.html?a="+H5_Ver,controller:"AccountSettingsController"}).state("agreementDetailType1",{cache:!1,canSwipeBack:!1,url:"/agreementDetail1",templateUrl:"common/agreement1.html?a="+H5_Ver,controller:"AgreementController1"}).state("agreementDetailType2",{cache:!1,canSwipeBack:!1,url:"/agreementDetail2",templateUrl:"common/agreement2.html?a="+H5_Ver,controller:"AgreementController2"}).state("agreementDetailType3",{cache:!1,canSwipeBack:!1,url:"/agreementDetail3",templateUrl:"common/agreement3.html?a="+H5_Ver,controller:"AgreementController3"}).state("agreementDetailType4",{cache:!1,canSwipeBack:!1,url:"/agreementDetail4",templateUrl:"common/agreement4.html?a="+H5_Ver,controller:"AgreementController4"}).state("help",{cache:!0,canSwipeBack:!0,url:"/help",templateUrl:"common/setting-help.html?a="+H5_Ver,controller:"HelpController"}).state("helpDetailIndex",{cache:!0,canSwipeBack:!0,url:"/helpDetail/:index",templateUrl:"common/setting-help-detail.html?a="+H5_Ver,controller:"HelpController"}).state("showRiskInfo",{cache:!1,canSwipeBack:!0,url:"/showRiskInfo",templateUrl:"common/show-risk-info.html?a="+H5_Ver,controller:"ShowRiskInfoController"}).state("messageCenter",{cache:!1,url:"/messageCenter",templateUrl:"common/setting-message-center.html?a="+H5_Ver,controller:"MessageCenterController"}).state("promoCenter",{cache:!0,canSwipeBack:!0,url:"/promo/center",templateUrl:"common/setting-promo-center.html",controller:"PromoCenterController"}).state("promoApply",{cache:!0,canSwipeBack:!0,url:"/promo/apply",templateUrl:"common/setting-promo-apply.html",controller:"PromoApplyController"}).state("promoApplyResult",{cache:!1,canSwipeBack:!0,url:"/promo/apply/result",templateUrl:"common/setting-promo-apply-result.html",controller:"PromoApplyResultController"}).state("promoInvite",{cache:!1,canSwipeBack:!0,url:"/promo/invite",templateUrl:"common/setting-promo-invite.html",controller:"PromoInviteController"}).state("promoRecord",{cache:!0,canSwipeBack:!0,url:"/promo/record",templateUrl:"common/setting-promo-record.html",controller:"PromoRecordController"}).state("promoRecordDetail",{cache:!1,canSwipeBack:!0,url:"/promo/record/detail",templateUrl:"common/setting-promo-record-detail.html",controller:"PromoRecordDetailController"}).state("announcement",{cache:!1,canSwipeBack:!1,url:"/announcement",templateUrl:"common/announcement.html?a="+H5_Ver,controller:"AnnouncementController"}).state("buySign",{cache:!1,canSwipeBack:!1,url:"/buySign",templateUrl:"common/buy_sign.html?a="+H5_Ver,controller:"BuySignController"}).state("homeNotice",{cache:!1,canSwipeBack:!1,url:"/homeNotice",templateUrl:"common/home-notice.html?a="+H5_Ver,controller:"HomeNoticeController"}).state("incomeArrival",{cache:!1,canSwipeBack:!0,url:"/incomeArrival",templateUrl:"common/income-arrival.html?a="+H5_Ver,controller:"IncomeArrivalController"}).state("messageNotice",{cache:!1,canSwipeBack:!1,url:"/messageNotice",templateUrl:"common/message-notice.html?a="+H5_Ver,controller:"MessageNoticeController"}).state("phone",{cache:!1,canSwipeBack:!0,url:"/phone",templateUrl:"common/info-phone.html?a="+H5_Ver,controller:"InfoPhoneController"}).state("resetPhone",{cache:!1,canSwipeBack:!1,url:"/resetPhone",templateUrl:"common/info-reset-phone.html?a="+H5_Ver,controller:"InfoResetPhoneController"}).state("income",{cache:!1,canSwipeBack:!0,url:"/income",templateUrl:"asset/income-history.html?a="+H5_Ver,controller:"IncomeHistoryController"}).state("handPassword",{cache:!1,canSwipeBack:!1,url:"/handPassword/:handmode/:paypass",templateUrl:"common/handpassword.html?a="+H5_Ver,controller:"HandPasswordController"}).state("error",{cache:!1,canSwipeBack:!1,url:"/error",templateUrl:"error.html?a="+H5_Ver,controller:"ErrorController"}).state("transHomeWithParam",{cache:!0,canSwipeBack:!1,url:"/transHome/:param",templateUrl:"transfer/transfer-home.html?a="+H5_Ver,controller:"TransferHomeController"}).state("transHome",{cache:!0,canSwipeBack:!1,url:"/transHome",templateUrl:"transfer/transfer-home.html?a="+H5_Ver,controller:"TransferHomeController"}).state("transIn",{cache:!0,canSwipeBack:!0,url:"/transIn",templateUrl:"transfer/trans-in.html?a="+H5_Ver,controller:"TransferInController"}).state("unionPayLimit",{cache:!0,canSwipeBack:!0,url:"/unionPayLimit",templateUrl:"transfer/union-pay-limit.html?a="+H5_Ver,controller:"UnionPayLimitController"}).state("redPacketList",{cache:!1,canSwipeBack:!1,url:"/redPacketList",templateUrl:"transfer/red-packet-list.html?a="+H5_Ver,controller:"RedPacketListController"}).state("transInResult",{cache:!1,canSwipeBack:!1,url:"/transInResult",templateUrl:"transfer/trans-in-result.html?a="+H5_Ver,controller:"TransferInResultController"}).state("transOutV2",{cache:!0,canSwipeBack:!0,url:"/transOutV2",templateUrl:"transfer/trans-out-v2.html?a="+H5_Ver,controller:"TransferOutControllerV2"}).state("transOut",{cache:!0,canSwipeBack:!0,url:"/transOut",templateUrl:"transfer/trans-out.html?a="+H5_Ver,controller:"TransferOutController"}).state("transOutResult",{cache:!1,canSwipeBack:!1,url:"/transOutResult",templateUrl:"transfer/trans-out-result.html?a="+H5_Ver,controller:"TransferOutResultController"}).state("makePlanV2",{cache:!1,canSwipeBack:!1,url:"/planV2",templateUrl:"transfer/plan-with-strong-account.html?a="+H5_Ver,controller:"PlanControllerV2"}).state("makePlan",{cache:!1,canSwipeBack:!1,url:"/plan",templateUrl:"transfer/plan.html?a="+H5_Ver,controller:"PlanController"}).state("modifyPlan",{cache:!1,canSwipeBack:!1,url:"/plan/:planInfo",templateUrl:"transfer/plan.html?a="+H5_Ver,controller:"PlanController"}).state("PlanResult",{cache:!1,canSwipeBack:!1,url:"/planResult",templateUrl:"transfer/plan-result.html?a="+H5_Ver,controller:"PlanResultController"}).state("PlanResult2",{cache:!1,canSwipeBack:!1,url:"/planResult/:planResultObj",templateUrl:"transfer/plan-result.html?a="+H5_Ver,controller:"PlanResultController"}).state("PlanSalary",{cache:!1,canSwipeBack:!1,url:"/planSalary",templateUrl:"transfer/plan-salary.html?a="+H5_Ver,controller:"SalaryPlanController"}).state("ModifyPlanSalary",{cache:!1,canSwipeBack:!1,url:"/planSalary/:salaryInfo",templateUrl:"transfer/plan-salary.html?a="+H5_Ver,controller:"SalaryPlanController"}).state("PlanMortgage",{cache:!1,canSwipeBack:!1,url:"/planMortgage",templateUrl:"transfer/plan-mortgate.html?a="+H5_Ver,controller:"MortgagePlanController"}).state("PlanTax",{cache:!1,canSwipeBack:!1,url:"/planTax/:from",templateUrl:"transfer/plan-tax.html?a="+H5_Ver,controller:"TaxPlanController"}).state("PlanTaxModify",{cache:!1,canSwipeBack:!1,url:"/planTaxModify",templateUrl:"transfer/plan-tax-modify.html?a="+H5_Ver,controller:"TaxPlanModifyController"}).state("planTaxSuc",{cache:!1,canSwipeBack:!1,url:"/planTaxSuc/:from",templateUrl:"transfer/plan-tax-result.html?a="+H5_Ver,controller:"TaxResultController"}).state("ModifyPlanMortgage",{cache:!1,canSwipeBack:!1,url:"/planMortgage/:salaryInfo",templateUrl:"transfer/plan-mortgate.html?a="+H5_Ver,controller:"MortgagePlanController"}).state("selectTransferOutAccount",{cache:!1,canSwipeBack:!1,url:"/selectTransOutAccount",templateUrl:"transfer/trans-out-account-selector.html?a="+H5_Ver,controller:"TransferOutAccountSelector"}).state("transferOtp",{cache:!1,canSwipeBack:!1,url:"/transOtp",templateUrl:"transfer/trans-otp.html?a="+H5_Ver,controller:"TransferOtpController"}).state("transOutScenePlan",{cache:!1,canSwipeBack:!1,url:"/transOutScenePlan",templateUrl:"transfer/trans-out-scene-plan.html?a="+H5_Ver,controller:"TransferOutScenePlanController"}).state("OpenAccoutWithTransResutl",{cache:!1,canSwipeBack:!1,url:"/openAccountWithTrans",templateUrl:"register/register-with-trans-result.html?a="+H5_Ver,controller:"OpenAccoutWithTransResultController"}).state("BindCardVerifyPrompt",{cache:!1,canSwipeBack:!1,url:"/verifyBindCardPrompt",templateUrl:"asset/bind-card-verify-prompt.html?a="+H5_Ver,controller:"BindCardVerifyPromptController"}).state("ChangeHandPassword",{cache:!1,canSwipeBack:!1,url:"/ChangeHandPassword/:from",templateUrl:"common/changehandpassword.html?a="+H5_Ver,controller:"ChangeHandPasswordController"}).state("loginNotice",{cache:!1,canSwipeBack:!1,url:"/loginNotice",templateUrl:"register/login-notice.html?a="+H5_Ver,controller:"LoginNoticeController"}).state("loginPhone",{cache:!1,canSwipeBack:!1,url:"/loginPhone",templateUrl:"register/login-phone.html?a="+H5_Ver,controller:"LoginPhoneController"}).state("loginNoticeInterest",{cache:!1,canSwipeBack:!1,url:"/loginNoticeInterest",templateUrl:"register/login-notice-interest.html?a="+H5_Ver,controller:"LoginInterestController"}).state("loginNoticePost",{cache:!1,canSwipeBack:!1,url:"/loginNoticePost",templateUrl:"register/login-notice-post.html?a="+H5_Ver,controller:"LoginPostController"}).state("htmlPieceViewer",{cache:!1,canSwipeBack:!1,url:"/htmlPieceViewer/:title/:url",templateUrl:"common/html-piece-viewer.html?a="+H5_Ver,controller:"HtmlPieceViewerController"}).state("bankProductJumping",{cache:!1,canSwipeBack:!1,url:"/bankProductJumping",templateUrl:"financial/insurance/fix-time-product/bank-product-jumping.html?a="+H5_Ver,controller:"BankProductJumpingController"}).state("registerV2",{cache:!1,canSwipeBack:!1,url:"/registerV2",templateUrl:"register/register.html?a="+H5_Ver,controller:"RegisterController"}).state("registerResult",{cache:!1,canSwipeBack:!1,url:"/registerResult",templateUrl:"register/register-result.html?a="+H5_Ver,controller:"RegisterResultController"}).state("activeUnionAccountResult",{cache:!1,canSwipeBack:!1,url:"/activeUnionAccountResult",templateUrl:"register/active-union-account-result.html?a="+H5_Ver,controller:"ActiveUnionResultController"}).state("bindBankCard",{cache:!1,canSwipeBack:!1,url:"/bindBankCard",templateUrl:"register/bind-bank-card.html?a="+H5_Ver,controller:"BindBankCardController"}).state("bindBankCardResult",{cache:!1,canSwipeBack:!1,url:"/bindBankCardResult",templateUrl:"register/bind-bank-card-result.html?a="+H5_Ver,controller:"BindBankCardResultController"}).state("TPlusOneDetailController",{cache:!0,canSwipeBack:!0,url:"/TPlusOneDetail/:prodCode",templateUrl:"financial/t-plus-one/t-plus-one-details.html?a="+H5_Ver,controller:"TPlusOneDetailController"}).state("tPlusOneRule",{cache:!1,canSwipeBack:!0,url:"/TPlusOneRule/:prodCode/:tab",templateUrl:"financial/t-plus-one/t-plus-one-rule.html?a="+H5_Ver,controller:"TPlusOneRuleController"}).state("TPlusOneMoreInfo",{cache:!1,canSwipeBack:!0,url:"/TPlusOneMoreInfo/:prodCode",templateUrl:"financial/t-plus-one/t-plus-one-more-info.html?a="+H5_Ver,controller:"TPlusOneMoreInfoController"}).state("TPlusOneTenThousandIncome",{cache:!1,canSwipeBack:!0,url:"/TPlusOneTenThousandIncome/:prodCode",templateUrl:"financial/t-plus-one/history-ten-thousand-income.html?a="+H5_Ver,controller:"TPlusOneTenThousandIncomeController"}).state("TPlusOnePurchase",{cache:!1,canSwipeBack:!0,url:"/TPlusOnePurchase/:prodCode",templateUrl:"financial/t-plus-one/t-plus-one-purchase.html?a="+H5_Ver,controller:"TPlusOnePurchaseController"}).state("TPlusOnePurchaseResult",{cache:!1,canSwipeBack:!0,url:"/TPlusOnePurchaseResult",templateUrl:"financial/t-plus-one/t-plus-one-purchase-result.html?a="+H5_Ver,controller:"TPlusOnePurchaseResultController"}).state("TPlusOneRedeem",{cache:!1,canSwipeBack:!0,url:"/TPlusOneRedeem/:prodCode",templateUrl:"financial/t-plus-one/t-plus-one-redeem.html?a="+H5_Ver,controller:"TPlusOneRedeemController"}).state("TPlusOneRedeemResult",{cache:!1,canSwipeBack:!0,url:"/TPlusOneRedeemResult",templateUrl:"financial/t-plus-one/t-plus-one-redeem-result.html?a="+H5_Ver,controller:"TPlusOneRedeemResultController"}).state("TPlusOneReview",{cache:!1,canSwipeBack:!0,url:"/TPlusOneReview/:policyNo/:prodCode",templateUrl:"financial/t-plus-one/t-plus-one-review.html?a="+H5_Ver,controller:"TPlusOneReviewController"}).state("tPlusOneAgeUnmatch",{cache:!1,canSwipeBack:!0,url:"/tPlusOneAgeUnmatch/:prodCode",templateUrl:"financial/t-plus-one/t-plus-one-age-unmatch.html?a="+H5_Ver,controller:"TPlusOneAgeUnMatchController"}).state("goldPriceHistory",{cache:!0,canSwipeBack:!0,url:"/goldPriceHistory",templateUrl:"financial/gold/current-product/gold-price-history.html?a="+H5_Ver,controller:"GoldPriceHistoryController"}).state("goldCurrentProdDetail",{cache:!0,canSwipeBack:!0,url:"/goldCurrentProdDetail",templateUrl:"financial/gold/current-product/gold-current-product-details.html?a="+H5_Ver,controller:"GoldCurrentProdDetailController"}).state("goldCurrentMyProdDetail",{cache:!0,canSwipeBack:!0,url:"/goldCurrentMyProdDetail",templateUrl:"financial/gold/current-product/gold-current-my-product-details.html?a="+H5_Ver,controller:"GoldCurrentMyProdDetailController"}).state("goldCurrentRequestDetail",{cache:!0,canSwipeBack:!0,url:"/goldCurrentRequestDetail",templateUrl:"financial/gold/current-product/gold-current-request-details.html?a="+H5_Ver,controller:"GoldCurrentRequestDetailController"}).state("goldCurrentRequestCancelResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentRequestCancelResult",templateUrl:"financial/gold/current-product/gold-current-request-cancel-result.html?a="+H5_Ver,controller:"GoldCurrentRequestCancelResultController"}).state("goldCurrentPurchase",{cache:!0,canSwipeBack:!0,url:"/goldCurrentPurchase",templateUrl:"financial/gold/current-product/gold-current-purchase.html?a="+H5_Ver,controller:"GoldCurrentPurchaseController"}).state("goldCurrentPurchaseResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentPurchaseResult",templateUrl:"financial/gold/current-product/gold-current-purchase-result.html?a="+H5_Ver,controller:"GoldCurrentPurchaseResultController"}).state("goldCurrentPurchaseRequest",{cache:!0,canSwipeBack:!0,url:"/goldCurrentPurchaseRequest",templateUrl:"financial/gold/current-product/gold-current-purchase-request.html?a="+H5_Ver,controller:"GoldCurrentPurchaseRequestController"}).state("goldCurrentPurchaseRequestResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentPurchaseRequestResult",templateUrl:"financial/gold/current-product/gold-current-purchase-request-result.html?a="+H5_Ver,controller:"GoldCurrentPurchaseRequestResultController"}).state("goldCurrentRedeem",{cache:!0,canSwipeBack:!0,url:"/goldCurrentRedeem",templateUrl:"financial/gold/current-product/gold-current-redeem.html?a="+H5_Ver,controller:"GoldCurrentRedeemController"}).state("goldCurrentRedeemResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentRedeemResult",templateUrl:"financial/gold/current-product/gold-current-redeem-result.html?a="+H5_Ver,controller:"GoldCurrentRedeemResultController"}).state("goldCurrentRedeemRequest",{cache:!0,canSwipeBack:!0,url:"/goldCurrentRedeemRequest",templateUrl:"financial/gold/current-product/gold-current-redeem-request.html?a="+H5_Ver,controller:"GoldCurrentRedeemRequestController"}).state("goldCurrentRedeemRequestResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentRedeemRequestResult",templateUrl:"financial/gold/current-product/gold-current-redeem-request-result.html?a="+H5_Ver,controller:"GoldCurrentRedeemRequestResultController"}).state("goldFixTimeProdDetail",{cache:!0,canSwipeBack:!0,url:"/goldFixTimeProdDetail/:prodCode",templateUrl:"financial/gold/fix-time-product/gold-fix-time-product-details.html?a="+H5_Ver,controller:"GoldFixTimeProdDetailController"}).state("goldFixTimeMyProdDetail",{cache:!0,canSwipeBack:!0,url:"/goldFixTimeMyProdDetail/:acctNo",templateUrl:"financial/gold/fix-time-product/gold-fix-time-my-product-details.html?a="+H5_Ver,controller:"GoldFixTimeMyProdDetailController"}).state("goldFixTimePurchase",{cache:!0,canSwipeBack:!0,url:"/goldFixTimePurchase/:prodCode",templateUrl:"financial/gold/fix-time-product/gold-fix-time-purchase.html?a="+H5_Ver,controller:"GoldFixTimePurchaseController"}).state("goldFixTimePurchaseResult",{cache:!1,canSwipeBack:!1,url:"/goldFixTimePurchaseResult",templateUrl:"financial/gold/fix-time-product/gold-fix-time-purchase-result.html?a="+H5_Ver,controller:"GoldFixTimePurchaseResultController"}).state("goldFixTimeRedeem",{cache:!0,canSwipeBack:!0,url:"/goldFixTimeRedeem/:acctNo",templateUrl:"financial/gold/fix-time-product/gold-fix-time-redeem.html?a="+H5_Ver,controller:"GoldFixTimeRedeemController"}).state("goldFixTimeRedeemResult",{cache:!0,canSwipeBack:!0,url:"/goldFixTimeRedeemResult",templateUrl:"financial/gold/fix-time-product/gold-fix-time-redeem-result.html?a="+H5_Ver,controller:"GoldFixTimeRedeemResultController"}).state("myFinancialGold",{cache:!0,canSwipeBack:!0,url:"/myFinancialGold",templateUrl:"financial/my-financial-gold.html?a="+H5_Ver,controller:"MyFinancialGoldController"}).state("goldCurrentExtract",{cache:!0,canSwipeBack:!0,url:"/goldCurrentExtract",templateUrl:"financial/gold/current-product/gold-current-extract.html?a="+H5_Ver,controller:"GoldCurrentExtractController"}).state("goldCurrentExtractLocation",{cache:!0,canSwipeBack:!0,url:"/goldCurrentExtractLocation",templateUrl:"financial/gold/current-product/gold-current-extract-location.html?a="+H5_Ver,controller:"GoldCurrentExtractLocationController"}).state("goldCurrentExtractResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentExtractResult",templateUrl:"financial/gold/current-product/gold-current-extract-result.html?a="+H5_Ver,controller:"GoldCurrentExtractResultController"}).state("goldCurrentExtractCancelResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentExtractCancelResult",templateUrl:"financial/gold/current-product/gold-current-extract-cancel-result.html?a="+H5_Ver,controller:"GoldCurrentExtractCancelResultController"}).state("goldCurrentExtractDetail",{cache:!0,canSwipeBack:!0,url:"/goldCurrentExtractDetail",templateUrl:"financial/gold/current-product/gold-current-extract-details.html?a="+H5_Ver,controller:"GoldCurrentExtractDetailController"}).state("goldCurrentInvestmentPurchase",{cache:!0,canSwipeBack:!0,url:"/goldCurrentInvestmentPurchase",templateUrl:"financial/gold/current-product/gold-current-investment-purchase.html?a="+H5_Ver,controller:"GoldCurrentInvestmentPurchaseController"}).state("goldCurrentInvestmentPurchaseResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentInvestmentPurchaseResult",templateUrl:"financial/gold/current-product/gold-current-investment-purchase-result.html?a="+H5_Ver,controller:"GoldCurrentInvestmentPurchaseResultController"}).state("goldCurrentInvestmentList",{cache:!0,canSwipeBack:!0,url:"/goldCurrentInvestmentList",templateUrl:"financial/gold/current-product/gold-current-investment-list.html?a="+H5_Ver,controller:"GoldCurrentInvestmentListController"}).state("goldCurrentInvestmentDetail",{cache:!0,canSwipeBack:!0,url:"/goldCurrentInvestmentDetail",templateUrl:"financial/gold/current-product/gold-current-investment-detail.html?a="+H5_Ver,controller:"GoldCurrentInvestmentDetailController"}).state("goldCurrentInvestmentCancelResult",{cache:!1,canSwipeBack:!1,url:"/goldCurrentInvestmentCancelResult",templateUrl:"financial/gold/current-product/gold-current-investment-cancel-result.html?a="+H5_Ver,controller:"GoldCurrentInvestmentCancelResultController"}).state("wepayDetail",{cache:!1,canSwipeBack:!1,url:"/wepayDetail",templateUrl:"wepay/wepay-detail.html?a="+H5_Ver,controller:"WePayDetailController"}).state("wepayResult",{cache:!1,canSwipeBack:!1,url:"/wepayResult/:result",templateUrl:"wepay/wepay-result.html?a="+H5_Ver,controller:"WePayResultController"}).state("wepayHelpDetail",{cache:!1,canSwipeBack:!1,url:"/wepayHelpDetail/:detail",templateUrl:"wepay/wepay-help-detail.html?a="+H5_Ver,controller:"WePayHelpController"}).state("investmentHome",{cache:!0,canSwipeBack:!1,url:"/investmentHome",templateUrl:"investment/investment-home.html?a="+H5_Ver,controller:"InvestmentHomeController"}).state("investmentArticle",{cache:!1,canSwipeBack:!0,url:"/investmentArticle",templateUrl:"investment/investment-article.html?a="+H5_Ver,controller:"InvestmentArticleController"}).state("investmentStock",{cache:!0,canSwipeBack:!0,url:"/investmentStock",templateUrl:"investment/investment-stock.html?a="+H5_Ver,controller:"InvestmentStockController"}).state("investmentGold",{cache:!0,canSwipeBack:!0,url:"/investmentGold",templateUrl:"investment/investment-gold.html?a="+H5_Ver,controller:"InvestmentGoldController"}).state("stockClassification",{cache:!0,canSwipeBack:!0,url:"/stockClassification",templateUrl:"investment/stock-classification.html?a="+H5_Ver,controller:"StockClassificationController"}),r.otherwise(function(e,t){return Statistics.reportEvent("unexpectedPath",{path:t.path()}),"/"
}),a.views.maxCache(10),a.views.swipeBackEnabled(!0),a.platform.android.scrolling.jsScrolling(!0),h5TimeRecord&&(h5TimeRecord.h5AppConfigEnd=(new Date).getTime())}]),app.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","https://*.webank.com/*","http://*.webank.com/*","https://*.webankcdn.net/*","http://*.webankcdn.net/*","http://apis.map.qq.com/*"])}]),app.config(["$httpProvider",function(e){AppInfo.getAppInfo(function(t){var r={};r=-1==navigator.userAgent.indexOf("iPhone")?{device_id:t.deviceID,root_flag:t.rootFlag,app_sign:t.appSign}:{device_id:t.deviceID,jbk_flag:t.jbkFlag},e.defaults.headers.common={"Content-Type":"application/json",params:JSON.stringify(r)}})}]),app.constant("ability",{android:{"1.7.2":"Ability_feedback|Ability_checkNewVer|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_exitKillapp|Ability_nativeHandPass|Ability_Location|Ability_AppMask|Ability_Calendar|Ability_FaceGuide","1.7.3":"Ability_feedback|Ability_checkNewVer|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_exitKillapp|Ability_nativeHandPass|Ability_Location|Ability_AppMask|Ability_Calendar|Ability_FaceGuide","1.7.4":"Ability_feedback|Ability_checkNewVer|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_exitKillapp|Ability_nativeHandPass|Ability_Location|Ability_AppMask|Ability_Calendar|Ability_FaceGuide|Ability_VideoCertification","1.7.5":"Ability_feedback|Ability_checkNewVer|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_exitKillapp|Ability_nativeHandPass|Ability_Location|Ability_AppMask|Ability_Calendar|Ability_FaceGuide|Ability_VideoCertification","1.7.6":"Ability_feedback|Ability_checkNewVer|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_exitKillapp|Ability_nativeHandPass|Ability_Location|Ability_AppMask|Ability_Calendar|Ability_FaceGuide|Ability_VideoCertification|Ability_StartApp|Ability_CheckQQInstall"},ios:{"1.5.4":"Ability_feedback|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_Location|Ability_Calendar|Ability_FaceGuide|Ability_PhoneLogin|Ability_AppMask|Ability_CheckQQInstall","1.5.5":"Ability_feedback|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_Location|Ability_Calendar|Ability_FaceGuide|Ability_PhoneLogin|Ability_VideoCertification|Ability_AppMask|Ability_StatusBarColor|Ability_CheckQQInstall","2.5.5":"Ability_feedback|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_Location|Ability_Calendar|Ability_FaceGuide|Ability_PhoneLogin|Ability_VideoCertification|Ability_AppMask|Ability_StatusBarColor|Ability_CheckQQInstall","8.4.8":"Ability_feedback|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_Location|Ability_Calendar|Ability_FaceGuide|Ability_PhoneLogin|Ability_VideoCertification|Ability_AppMask|Ability_StatusBarColor|Ability_CheckQQInstall","8.5.4":"Ability_feedback|Ability_nativekeyboard|Ability_wemoneywebview|Ability_operateSplash|Ability_Location|Ability_Calendar|Ability_FaceGuide|Ability_PhoneLogin|Ability_AppMask|Ability_CheckQQInstall"},getAbilityList:function(e,t,r){if("android"===e){if(this.android.hasOwnProperty(t))return this.android[t]}else if("ios"===e&&this.ios.hasOwnProperty(t))return this.ios[t];return r}});var onDeviceReady=function(){h5TimeRecord&&(h5TimeRecord.h5DeviceReadyStart=(new Date).getTime()),AppInfo.getAppInfo(function(e){if(e&&e.appAbility&&-1!=e.appAbility.indexOf("Ability_h5_separate_dir"))tracelog("ios h5 seperate dir"),angular.bootstrap(document,["myApp"]);else{var t=location.protocol+"//"+location.pathname+"?v="+H5_Ver+location.hash;location.href!=t?(tracelog("angular.bootstrap 1"),setTimeout(function(){location.href=t},0)):(angular.bootstrap(document,["myApp"]),tracelog("angular.bootstrap 2"),startMonitorNetwork())}},function(){var e=location.protocol+"//"+location.pathname+"?v="+H5_Ver+location.hash;location.href!=e?(tracelog("angular.bootstrap 1"),setTimeout(function(){location.href=e},0)):(angular.bootstrap(document,["myApp"]),tracelog("angular.bootstrap 2"),startMonitorNetwork())}),-1!=navigator.userAgent.indexOf("iPhone")&&startMonitorNetwork()};document.addEventListener("deviceready",onDeviceReady,!1),app.run(["$rootScope","$location","$document","$timeout","essential","HandPasswordService","$interval","cache","GLOBAL_CONSTANT","$ionicPlatform","utils","$http","LoginService","$window","$state","NativeCallService","localStorage","SecurityScanService","AppMaskService","ability",function(e,t,r,a,l,n,o,c,i,s,u,m,d,p,h,C,g,k,S,f){function y(r,l){tracelog("isSuccess: "+r+"; needDelayHideAppMask"+l),l>0&&B>=l?a(function(){S.setAppMaskVisibility(!1)},l):S.setAppMaskVisibility(!1),tracelog("onExchangeTokenEnd isSuccess: "+r),r?e.$emit(i.GLOBAL_EVENT.EXCHANGE_TOKEN_SUCCESS_AFTER_RESUME,{}):t.path("/login")}var w=100,_=7e3,P=3e5,H=1e3*HAND_START_AT_TIME,B=1600;l.getVersion().then(function(e){APP_ABILITY=f.getAbilityList(u.isiOSDevice()?"ios":"android",e.versionString,e.appAbility),tracelog("APP_ABILITY: "+APP_ABILITY)}),e.$on("$stateChangeStart",function(e,t,r,a,n){l.dimStatusBarBackground(!1),navigator.WBNumberPadPlugin.hideKeyboard();var o=a&&a.url?a.url:"";angular.forEach(n,function(e,t){o=o.replace(":"+t,e)}),Statistics.reportPageEnd(o)}),e.$on("$stateChangeSuccess",function(e,t,r,a,n){var o=a&&a.url?a.url:"",c=t&&t.url?t.url:"";angular.forEach(n,function(e,t){o=o.replace(":"+t,e)}),angular.forEach(r,function(e,t){c=c.replace(":"+t,e)}),l.notifyStateChange(o,c),tracelog("[dte] "+o+"->"+c),Statistics.reportPageStart(c)}),e.$on("$ionicView.beforeEnter",function(){gCurrentScope=null}),e.$on("$ionicView.afterEnter",function(e){gCurrentScope=e.targetScope}),a(function(){navigator.splashscreen.hide()},1e4);var A=null,V=null,b=function(){tracelog("app切换到后台"),d.setAppResumed(!1),0===t.path().indexOf("/login")||inSharePage||(V=a(function(){S.setAppMaskVisibility(!0)},300)),navigator.WBNumberPadPlugin.hideKeyboard();var e=u.getDate();pauseAppTime=e.getTime();var r=t.path();c.getUserStatus()==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&r.indexOf("handPassword")<=0&&(APP_ABILITY&&APP_ABILITY.indexOf(i.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0||(A=o(function(){tracelog("切换到手势页面"),n.startHandPasswordWhenResume(),o.cancel(A),A=null},H),tracelog("开启手势密码切换定时器")))},R=function(){tracelog("app切换到前台"),d.setAppResumed(!0),null!=A&&(o.cancel(A),A=null),null!=V&&(a.cancel(V),V=null),navigator.WBNumberPadPlugin.hideKeyboard();var e=u.getDate(),r=e.getTime();tracelog("resumeTime:"+r+", pauseAppTime:"+(pauseAppTime||""));var n=r-pauseAppTime,s=p.lastExchangeTokenTime,m=r-s;tracelog("gapSinceLastPause:"+n+", gapSinceLastGetWBT:"+m);var h=function(e){return n>H-500&&H+1500>n?1600-e:H-500>=n?0:u.isiOSDevice()?1100:0};if(tracelog("cache.getUserStatus: "+c.getUserStatus()),c.getUserStatus()>i.ACCOUNT_STATE.USER_STATE_GUEST&&m>P&&(0!==t.path().indexOf("/login")||"/"==t.path())){tracelog("[dte] resumeApp-->exchangeWebankToken"),S.setAppMaskVisibility(!0);var C=!1,g=u.getDate().getTime(),k=a(function(){C=!0,y(!1,0),tracelog("exchangeTokenTimer timeout")},_);l.exchangeWebankToken().then(function(){tracelog("[dte] resumeApp-->exchangeWebankToken finish(success)"),tracelog("app回到前台，换取登录态成功"),a.cancel(k),C||y(!0,h(u.getDate().getTime()-g))},function(e){tracelog("[dte] resumeApp-->exchangeWebankToken finish(fail): "+JSON.stringify(e)),tracelog("app回到前台，换取登录态失败, 再试一次"),Statistics.reportEvent("resumeGetWBToken",null),C||(l.reject(),a(function(){return tracelog("[dte] resumeApp-->exchangeWebankToken retry"),C?void y(!1,h(u.getDate().getTime()-g)):void l.exchangeWebankToken().then(function(){tracelog("[dte] resumeApp-->exchangeWebankToken retry finish(success)"),tracelog("app回到前台，第二次换取登录态成功"),a.cancel(k),C||y(!0,h(u.getDate().getTime()-g))},function(e){tracelog("[dte] resumeApp-->exchangeWebankToken retry finish(fail): "+JSON.stringify(e)),tracelog("app回到前台，第二次换取登录态失败"),Statistics.reportEvent("resumeGetWBToken2",null),a.cancel(k),C||y(!1,h(u.getDate().getTime()-g))})},w))})}else tracelog("[dte] do not need exchangeWebankToken"),y(!0,h(0));var f=function(){if(u.isiOSDevice()){var e=c.getDeviceInfo();if(e&&e.uuid){var t={};t.idfa=e.uuid,Statistics.reportEvent("iOS-Idfa",t)}}};f()};document.addEventListener("pause",b,!1),document.addEventListener("resume",R,!1),AppLifecycle.addActivityListener("onStop",function(e){}),AppLifecycle.addActivityListener("onStart",function(e){});var v=function(){-1!=navigator.userAgent.indexOf("iPhone")&&(l.getVersionInReview().then(function(e){"true"==e.isVersionInReview&&(isReviewVer=!0)}),l.getVersionListInReview().then(function(e){return e?void l.getVersion().then(function(t){-1!=e.indexOf(t.versionString)&&(isReviewVer=!0)}):void(isReviewVer=!1)}))};a(function(){v()},10),s.registerBackButtonAction(function(){gCurrentScope&&gCurrentScope.back?(gCurrentScope.back(),gCurrentScope.$apply()):gCurrentScope&&gCurrentScope.func&&gCurrentScope.func.back&&(gCurrentScope.func.back(),gCurrentScope.$apply())},100);var U="none";s.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&window.cordova.plugins.Keyboard.disableScroll(!0),navigator.connection&&(document.addEventListener("online",function(){U!=navigator.connection.type&&(U=navigator.connection.type,Statistics.reportEvent("appOnline",{type:U}))}),document.addEventListener("offline",function(){U!=navigator.connection.type&&(U=navigator.connection.type,Statistics.reportEvent("appOffline",{}))})),e.$on(i.GLOBAL_EVENT.EXCHANGE_TOKEN_SUCCESS_AFTER_RESUME,function(){k.startScan()})}),n.init(),C.init(),a(function(){CommandChannel.execute({CmdID:"onWebReady"})},300)}]);var onAndroidNativeCall=function(e){if(e&&""!=e){var t=JSON.parse(e);if("ActivityLifecycleCallbacks"===t.CmdID){var r=AppLifecycle.actionList;r.indexOf(t.action)>-1&&AppLifecycle[t.action](t.activityName)}}},AppLifecycle={actionList:"onCreate|onStart|onResume|onPause|onStop|onSaveInstanceState|onDestroy".split("|"),listeners:{},applicationResumeListener:null,applicationPauseListener:null,activityStack:[],addActivityListener:function(e,t){-1!==this.actionList.indexOf(e)&&(this.listeners[e]&&0!==this.listeners[e].length?this.listeners[e].push(t):(this.listeners[e]=[],this.listeners[e].push(t)))},_notify:function(e,t){for(var r in this.listeners[t])this.listeners[t][r](e)},onCreate:function(e){this.activityStack.push(e),this._notify(e,"onCreate")},onStart:function(e){this._notify(e,"onStart")},onResume:function(e){this._notify(e,"onResume")},onPause:function(e){this._notify(e,"onPause")},onStop:function(e){this._notify(e,"onStart")},onSaveInstanceState:function(){this._notify("onSaveInstanceState")},onDestroy:function(e){this.activityStack.pop(),this._notify(e,"onDestroy")}};navigator.onAndroidNativeCall=onAndroidNativeCall;var onIOSNativeCall=function(e){e&&e.CmdID&&"guideViewShowFinished"===e.CmdID&&(window.guideViewShowFinished=!0)};navigator.onIOSNativeCall=onIOSNativeCall;var onOperateSplashNativeCall=function(e,t){if(e&&"JUMP_TO_WEBVIEW"==e&&t){var r=t;window.open(r,"_blank","location=no,closebuttoncaption=返回")}};navigator.onOperateSplashNativeCall=onOperateSplashNativeCall,navigator.onIOSNativeCall=onIOSNativeCall;app.controller("TestController",["$scope","$location","envService","$timeout","essential",function(e,t,n,a,o){h5TimeRecord&&(h5TimeRecord.h5TestCtrlStart=(new Date).getTime()),o.getCommonData("timeRecord").then(function(e){angular.extend(e,h5TimeRecord)},function(e){}),e.TestLogin=function(){WebankLogin.login(function(){alert("succeed!")},function(){alert("failed!")})},e.onSelectEnv=function(e){n.setEnv(e),navigator.splashscreen.show(),a(function(){navigator.splashscreen.hide()},1e4)},e.TestToken=function(){WebankToken.getToken(function(e){for(var t in e)alert(t+"  "+e[t])})},e.TestAppInfo=function(){AppInfo.getAppInfo(function(e){for(var t in e)alert(t+"  "+e[t])})},e.TestReportStartPage=function(){Statistics.reportPageStart("PageName1")},e.TestReportEndPage=function(){Statistics.reportPageEnd("PageName1")},e.TestReportEvent=function(){Statistics.reportEvent("eventid1","param1")},e.TestCommand=function(){var e={};e.CmdID="exchangeWebankToken",CommandChannel.execute(e,function(){alert("succeed")},function(){alert("failed")})},e.TestSupport=function(){t.path("/support")},e.TestSetPasswd=function(){var e={};e.user_pwd="123456"},e.FaceTest=function(){var e={};e.CmdID="faceVerify",CommandChannel.execute(e,function(e){alert("status:"+e.status+"  errorcode:"+e.errorCode+" message:"+e.message+" faceNcRate:"+e.faceNcRate+"faceid:"+e[""])},function(){alert("failed")})},a(function(){navigator.splashscreen.hide()},10)}]);app.controller("ViewCardInfoController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","cgiService","cache","webankCommonService","$interval","ResetPasswdService","BindingCardDetailService","TransferHomeService","TransRecordService","HJactionMenu","HJactionPop","HJactionLoading","HelpDetailService","essential",function(a,t,e,n,o,r,i,d,c,u,s,_,C,l,T,R,g,I){a.data={},a.func={};var f=null,m=function(){f=s.getData(),gBankLimit&&gBankLimit[f.cardBinCode]&&(a.data.singleTransactionLimit=gBankLimit[f.cardBinCode].perOne,a.data.singleDayLimit=gBankLimit[f.cardBinCode].perDay);var t=i.getCacheInfo("personalInfo");t&&(a.data.webankCardNo=t.webank_card_no),a.data.numberMask=f.numberMask,a.data.bankName=f.bankName,a.data.cardType=f.cardType,a.data.bankImg=f.bankImg,a.data.bankBgImg=f.bankBgImg,a.data.number=f.number,a.data.cardStyle=f.cardStyle,a.data.isRegCard=f.isRegCard,a.data.isChargeSupported=f.isChargeSupported,a.data.isRegCard&&(a.data.regDateTime=f.regDateTime,a.data.cardStyle["background-color"]="#a2a2a2");var e=s.loadSession();null!=e&&(a.data=e),o.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.VIEW_CARD_INFO+"-"+E())},E=function(){return a.data.isRegCard?"0":a.data.isChargeSupported?"11":"10"};a.queryClick=function(){C.goPage()},a.exchangeClick=function(){e.path("/baseAccountTranseferOut")};var p=null;a.onClickMenu=function(){o.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.VIEW_CARD_INFO_CLICK_MORE+"-"+E()),p=l.show({buttonArr:[a.data.isRegCard?"取消登记":"解除绑定"],cancenText:"取消",clickCallback:function(t){0==t&&a.onClickUnBind()}})},a.onClickUnBind=function(){var t=function(){a.data.pwdSubTitle="解绑银行卡",a.data.isPwdShow=!0},e=function(){var a=i.getCacheInfo("personalInfo");return a?a.is_trans_openaccount:!1};o.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.VIEW_CARD_INFO_CLICK_UNBIND+"-"+E()),d.canUseNewRegAndBandFunc().then(function(){t()},function(){e()?T.show({oneLineTextLeft:"通过汇款方式绑卡验证的账户，不能解绑卡，不能再绑定其他银行卡",oneButtonText:"知道了",popClose:function(){}}):t()})},a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,N())});var N=function(){var t={};t.other_card_no=f.number,t.user_pwd=a.data.vm.formData.confirmPassword.RSA,t.bank_card_mnt_code=a.data.isRegCard?"12":"11";var e=i.getCacheInfo("personalInfo");R.show(),r.requestUnbindCardV2(t).then(function(){for(var a in e.bind_cards_list)e.bind_cards_list[a].other_account==f.number&&(e.bind_cards_list[a].status=0);r.requestPersonalInfo().then(function(){R.hide(),o.makeToast("解绑卡成功"),_.goPage()},function(){R.hide(),o.makeToast("解绑卡成功"),_.goPage()})},function(t){R.hide(),d.isRetCodePwd(t.ret_code)?d.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(t){1==t?a.data.isPwdShow=!0:2==t&&u.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&u.goPage()}):o.makeToast(t.ret_msg)})};a.onClickCopyWebankCard=function(){t(function(){o.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.VIEW_CARD_INFO_CLICK_COPY+"-"+E())},200),I.copyStrToPasteboard(a.data.webankCardNo).then(function(){o.makeToast("复制成功","short")},function(){o.makeToast("复制失败，请稍后再试","short")})},a.onClickTransferIntro=function(){o.reportCustomEvent(n.REPORT_EVENT_NAME.REG_BIND_CARD,n.REG_BIND_CARD_STATISTIC.VIEW_CARD_INFO_CLICK_TRANS_INTRO+"-"+E()),s.saveSession(a.data),g.goPage("1")},a.back=function(){s.backPage()},a.$on("$destroy",function(){p&&p()}),m()}]);app.controller("AboutController",["$scope","cache","$location","GLOBAL_CONSTANT","utils","$http","LocationService","AboutService","essential","WebankIntroduceService","WelcomeServiceV2","VersionManagerService",function(e,n,o,t,i,a,c,s,r,A,I,l){function u(){e.showCheckUpdate=!1,i.isiOSDevice()||(e.showCheckUpdate=!0,e.showNew=!1,l.checkUpdate().then(function(n){e.data.updateTip=n.updateInfo.target,e.data.itemClass="",e.showNew=!0,l.report(l.STATISTIC.VALUE_KEY.PV_UPDATE_SHOW_ON_ABOUT),e.onClickCheckUpdate=function(){l.showUpdateConfirmDlg(n.versionDetail),l.report(l.STATISTIC.VALUE_KEY.CLK_UPDATE_ON_ABOUT)}},function(){e.data.updateTip="已是最新版本",e.data.itemClass="jt",e.showNew=!1}))}e.data={};var T="android",d=function(){e.H5Version=H5_Ver,e.isDebug=DEBUG,e.isInternalVersion=!1,r.getCommonData("versionInfo").then(function(n){n&&n.isInternalVersion&&(e.isInternalVersion=!0),e.internalVersionDesc="内部版:"+(n.isDebug?"DEBUG":"RELEASE")+"/"+("test"==n.env?"测试":"生产")+"/"+n.commitId,tracelog(n)},function(e){tracelog("versionInfo error: "+JSON.stringify(e))}),i.isiOSDevice()&&(e.showScore=!0,T="iPhone");var o=n.getDeviceInfo();e.nativeVersion=o?o.versionString:"",e.showAdvice=!1,!isTelePhoneLogin&&n.getUserStatus()&&n.getUserStatus()>=t.ACCOUNT_STATE.USER_STATE_LOGIN&&APP_ABILITY&&APP_ABILITY.indexOf(t.APP_ABILITY.ABILITY_FEEDBACK)>=0&&(e.showAdvice=!0),u();var a=o?o.channelID||"":"";e.showYingYongBaoAD="yingyongbaoshoufa"==a?!0:!1,e.data.clickCount=0,e.data.updateTip="已是最新版本",e.data.itemClass="no-update"};e.onClickScore=function(){var e="https://itunes.apple.com/cn/app/wei-zhong-yin-xing/id994103968?mt=8",n=window.open(e,"_blank","location=no,closebuttoncaption=返回");n.addEventListener("loaderror",function(){i.makeToast("Appstore打开失败，请稍后重试","short"),n.close()})},e.onClickWelcome=function(){o.path("/welcome")},e.onClickWelcome2=function(){I.goPage(null,null,{fromPage:"about"})},e.onClickAdvice=function(){if(n.getUserInfo()&&n.getUserInfo().username&&n.getUserInfo().openid){var e=n.getUserInfo().openid,o=(n.getUserInfo().username,n.getUserInfo().picurl||"../img/tx@2x.png"),t="",a=o,c="RexQ9858",s=e+c,r=i.md5(s).toUpperCase(),A=["openid="+e];A.push("nickname="+t),A.push("headimgurl="+a),A.push("token="+r);var I=A.join("&"),l=i.des(I,c);"0"==l[0]&&"x"==l[1]&&(l=l.slice(2));var u={fid:1133,data:l},d=angular.toJson(u),p=n.getDeviceInfo(),P=i.getDate().getTime(),f=p.versionCode+"_"+H5_Ver,g="http://support.qq.com/touch/?fid=1133&p=cmts&t="+P+"&clientInfo=&osVersion="+p.os_ver+"&clientVersion="+f+"&os="+T+"%20OS&netType=0&imei="+p.uuid+"#cmts",h=window.open(g,"_blank","location=no,closebuttoncaption=返回");h.addEventListener("loaderror",function(){i.makeToast("系统繁忙，页面错误，请重试","short"),h.close()});var _=!1,L=!1;h.addEventListener("loadstop",function(e){if(_&&e.url.search("authCallback")>0){_=!1;var n="window.authFinish(true,"+d+")";h.executeScript({code:n})}L||(L=!0,h.executeScript({code:"setTimeout(function(){if(($('#navToUserInfoPage span') && $('#navToUserInfoPage span').css('display') == 'none')){ $('#jsAddCmtsPage').trigger('click')};},200)"}))}),h.addEventListener("loadstart",function(e){e.url.search("authCallback")>0&&(_=!0)})}},e.onClickIntroduce=function(){},e.onClickUpdate=function(){i.makeToast("没做好，点了也没用","short")},e.onClickAgreement=function(){c.go("/agreementDetail3")},e.back=function(){s.backPage()},e.onClickWeBank=function(){e.data.clickCount++,10==e.data.clickCount&&i.makeToast("别点了！","short"),DEBUG&&(1==e.data.clickCount&&(APP_ABILITY.indexOf(t.APP_ABILITY.ABILITY_NATIVEKEYBOARD)>=0?(APP_ABILITY=APP_ABILITY.replace(t.APP_ABILITY.ABILITY_NATIVEKEYBOARD,"SYSTEMINPUTXXXXXX"),i.makeToast("切换到系统输入法！","short")):(APP_ABILITY=APP_ABILITY.replace("SYSTEMINPUTXXXXXX",t.APP_ABILITY.ABILITY_NATIVEKEYBOARD),i.makeToast("切换到自定义输入法！","short"))),2==e.data.clickCount&&(APP_ABILITY.indexOf(t.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD)>=0?(APP_ABILITY=APP_ABILITY.replace(t.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD,"H5HANDXXXXXX"),i.makeToast("切换到H5手势密码！","short")):(APP_ABILITY=APP_ABILITY.replace("H5HANDXXXXXX",t.APP_ABILITY.ABILITY_NATIVEHANDPASSWORD),i.makeToast("原生手势密码！","short"))))},d(),e.onHJViewActive=function(){d()},e.onHJViewDisActive=function(){}}]);app.controller("ChangePasswdController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","cgiService","$stateParams","$RSA","cache","essential","ChangePasswdService",function(o,t,e,n,i,a,r,s,d,u,m){var c=m.getData();m.setData(null);var f=1;o.showStep=function(o){return f==o},o.showTitle=function(){return 1==f?"验证手机号":"修改交易密码"};var w=0,h=0,P=d.getCacheInfo("personalInfo");P&&(o.phoneNumber=P.phone_no,t(function(){o.onGetOTP()},100)),o.isPwdKeyboardShow=!1,o.otpTimeOutShow=!0,o.data={},o.otpButtonController="btn";var S=function(){o.otpButtonController="btn off",t(l,2e3)},l=function(){o.otpButtonController="btn"};o.loginButtonController="btn-c";var T=function(){o.loginButtonController="btn-c off",t(v,2e3)},v=function(){o.loginButtonController="btn-c"},p=function(){var t=i.getDate();o.pausetime=t.getTime()},g=function(){var t=i.getDate();o.resumetime=t.getTime(),o.pausetime&&(o.checkNumTimeout-=Math.round((o.resumetime-o.pausetime)/1e3),o.checkNumTimeout<0&&(o.checkNumTimeout=0),o.pausetime=0)},b=function(){return o.checkNumTimeout-=1,o.checkNumTimeout<=0?(o.otpTimeOutShow=!0,document.removeEventListener("pause",p,!1),void document.removeEventListener("resume",g,!1)):void t(function(){b()},1e3)};o.onGetOTP=function(){if("btn off"!=o.otpTimeOutShow){S(),u.readSMSVerifyCode().then(function(t){o.data.otp||(o.data.placeOtp=t.smsCode,o.data.otp=t.smsCode)});var t={};t.usage_id=n.OPT_TYPE.MODIFY_PASS,a.requestOTPAndCheckBindPhone(t).then(function(){o.otpTimeOutShow=!1,o.checkNumTimeout=60,document.addEventListener("pause",p,!1),document.addEventListener("resume",g,!1),b()},function(o){i.makeToast(o.ret_msg,"short")})}},o.onClickNext=function(){if("btn-c off"!=o.loginButtonController){if(T(),!i.isValidPhoneOtpNumber(o.data.otp))return void i.makeToast(STRING_TABLE.INVALID_OTP);var t={phone_check_num:o.data.otp};a.requestOtpVerifyForChangePassword(t).then(function(t){o.data.videoSessionId=t&&t.ret_data?t.ret_data.session_id:"",T(),o.pwdSubTitle="请输入新的交易密码",f=2,o.isPwdKeyboardShow=!0},function(o){tracelog(JSON.stringify(o)),i.makeToast("验证码错误","long")})}};var _=function(){var t={};t.session_id=c.sessionID,t.user_pwd=o.vm.formData.confirmPassword.RSA,t.otp_session_id=o.data.videoSessionId,a.requestModifyPassword(t).then(function(){i.makeToast("密码修改成功"),o.back()},function(t){i.makeToast(t.ret_msg),o.back()})};o.$watch("sigOnPwdCommit",function(e){if(void 0!=e)if(2==f){if(!i.isPasswordStrongEnough(o.vm.formData.confirmPassword.MD5)||i.isPasswordWithUserBirthday(o.vm.formData.confirmPassword.MD5,h)||i.isPasswordWithUserPhone(o.vm.formData.confirmPassword.MD5,w))return i.makeToast(STRING_TABLE.PASSWORD_TOO_WEAK,"short"),o.isPwdKeyboardShow=!1,void t(function(){o.isPwdKeyboardShow=!0},200);if(c.oldPasswordMD5==o.vm.formData.confirmPassword.MD5)return i.makeToast(STRING_TABLE.PASSWORD_SAME_OLD,"short"),o.isPwdKeyboardShow=!1,void t(function(){o.isPwdKeyboardShow=!0},200);o.originPwd=o.vm.formData.confirmPassword.originPwd,o.isPwdKeyboardShow=!1,f=3,t(function(){o.isPwdKeyboardShow=!0},200)}else 3==f&&(o.originPwd!==o.vm.formData.confirmPassword.originPwd?(i.makeToast("两次输入不一致","short"),o.isPwdKeyboardShow=!1,f=2,t(function(){o.isPwdKeyboardShow=!0},200)):(o.password=i.getRSAString(o.vm.formData.confirmPassword.originPwd+"11111111"),o.isPwdKeyboardShow=!1,_()))}),o.back=function(){m.backPage()}}]);app.controller("ResetPasswdController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","cgiService","essential","cache","$RSA","ResetPasswdService","CheckFaceService",function(e,t,n,a,o,r,i,s,u,c,d){var m=1,f=!0,h=0,P=0,g=s.getCacheInfo("personalInfo");g&&(h=g.phone_no,P=g.birthday||0),e.data={},e.showStep=function(e){return m==e},e.showNextBtn=function(){return 3>m},e.classNextBtn=function(){return f?"btn-c off":"btn-c"},e.onClickNext=function(){if(1==m){if(!o.isValidName(e.data.regName))return;m++,f=!0,e.phoneNumber=h||"",t(function(){p=!1,e.onGetOTP()},200)}else if(2==m){if(!o.isValidPhoneOtpNumber(e.data.regPhoneCheckNumber))return;m++,t(function(){e.isPwdKeyboardShow=!0},10)}},e.showTitle=function(){return["","验证身份","验证手机号","设置新的交易密码","设置新的交易密码"][m]},e.changeName=function(){if(e.inputNameTipsContent="",f=!0,e.data.regName&&""!=e.data.regName){var t=o.isValidNameInput(e.data.regName);"fail"==t?e.inputNameTipsContent="请输入真实姓名":"finish"==t&&N()}},e.changeIDCard=function(){e.inputIDCardTipsContent="",f=!0,e.data.regIDCard&&""!=e.data.regIDCard&&N()},e.changeOtp=function(){if(e.inputOtpTipsContent="",f=!0,e.data.regPhoneCheckNumber&&""!=e.data.regPhoneCheckNumber){var t=o.isValidPhoneOtpInput(e.data.regPhoneCheckNumber);"fail"==t?e.inputOtpTipsContent="验证码不正确":"finish"==t&&N()}},e.checkTimeoutButton=!0,e.onGetOTP=function(){if(!p){i.readSMSVerifyCode().then(function(t){e.data.regPhoneCheckNumber||(e.data.regPhoneCheckNumber=t.smsCode,N())});var n={};n.usage_id=a.OPT_TYPE.RESET_PASS,p=!0,r.requestOTPAndCheckBindPhone(n).then(function(){e.checkTimeoutButton=!1,e.checkNumTimeout=60,document.addEventListener("pause",s,!1),document.addEventListener("resume",u,!1),c(),p=!1},function(e){o.makeToast(e.ret_msg),p=!1});var s=function(){var t=o.getDate();e.pausetime=t.getTime()},u=function(){var t=o.getDate();e.resumetime=t.getTime(),e.pausetime&&(e.checkNumTimeout-=Math.round((e.resumetime-e.pausetime)/1e3),e.checkNumTimeout<0&&(e.checkNumTimeout=0),e.pausetime=0)},c=function(){return e.checkNumTimeout-=1,e.checkNumTimeout<=0?(e.checkTimeoutButton=!0,document.removeEventListener("pause",s,!1),void document.removeEventListener("resume",u,!1)):void t(function(){c()},1e3)}}};var p=!1;e.classOtpBtn=function(){return p?"register-yz-btn off":"register-yz-btn"},e.$watch("sigOnPwdCommit",function(n){if(void 0!=n)if(3==m){if(!o.isPasswordStrongEnough(e.vm.formData.confirmPassword.MD5)||o.isPasswordWithUserBirthday(e.vm.formData.confirmPassword.MD5,P)||o.isPasswordWithUserPhone(e.vm.formData.confirmPassword.MD5,h))return o.makeToast(STRING_TABLE.PASSWORD_TOO_WEAK,"short"),e.isPwdKeyboardShow=!1,void t(function(){e.isPwdKeyboardShow=!0},200);e.originPwd=e.vm.formData.confirmPassword.originPwd,e.isPwdKeyboardShow=!1,m++,t(function(){e.isPwdKeyboardShow=!0},200)}else 4==m&&(e.originPwd!==e.vm.formData.confirmPassword.originPwd?(o.makeToast("两次输入不一致","short"),e.isPwdKeyboardShow=!1,m=3,t(function(){e.isPwdKeyboardShow=!0},200)):(e.password=o.getRSAString(e.vm.formData.confirmPassword.originPwd+"11111111"),e.isPwdKeyboardShow=!1,w()))});var w=function(){var t={};t.personal_identify_type="01",t.user_pwd=e.vm.formData.confirmPassword.RSA,t.phone_check_num=e.data.regPhoneCheckNumber,T?t.face_id=T:(t.personal_name=e.data.regName,t.personal_identify_no=e.data.regIDCard.toUpperCase()),r.requestSetPassword(t).then(function(){o.makeToast("密码重置成功"),e.back()},function(t){o.makeToast(t.ret_msg),e.back()})},N=function(){1==m?o.isValidName(e.data.regName)&&e.data.regIDCard&&e.data.regIDCard.length>0&&(f=!1):2==m&&o.isValidPhoneOtpNumber(e.data.regPhoneCheckNumber)&&(f=!1)},T=d.getFaceId(a.CHECK_FACE_SCENE_ID.RESET_PWD)||"",C=c.getData()&&c.getData().dstPage;"resetPassword"==C&&(c.setData(null),m=2,f=!0,e.phoneNumber=h||"",t(function(){p=!1,e.onGetOTP()},200)),e.back=function(){c.backPage()}}]);app.controller("ResetStrongPasswdController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","cgiService","essential","cache","$RSA","ResetPasswdService","CheckFaceService","HJactionPop","HJactionLoading","CommonConfigService",function(e,t,n,o,i,r,a,s,c,u,d,m,f,h){var p=e.data={};p.currentStep=1,p.nextBtnDisable=!0,p.phoneNo=0,p.birthNo=0,p.faceId="";var P=function(){var n=s.getCacheInfo("personalInfo");n&&(p.phoneNo=n.phone_no,p.birthNo=n.birthday||0),p.currentStep=1,p.nextBtnDisable=!0,e.phoneNumber=p.phoneNo||"",t(function(){w=!1,e.onGetOTP()},200)};e.showStep=function(e){return p.currentStep==e},e.showNextBtn=function(){return p.currentStep<2},e.classNextBtn=function(){return p.nextBtnDisable?"btn-c off":"btn-c"},e.onClickNext=function(){if(1==p.currentStep){if(!i.isValidPhoneOtpNumber(e.data.regPhoneCheckNumber))return;var n={phone_check_num:p.regPhoneCheckNumber};f.show(),r.requestOtpVerifyForChangePassword(n).then(function(n){f.hide(),p.optsessionId=n&&n.ret_data?n.ret_data.session_id:"",p.currentStep++,t(function(){e.isPwdKeyboardShow=!0},10)},function(e){f.hide(),tracelog(JSON.stringify(e)),i.makeToast("验证码错误","long")})}},e.showTitle=function(){return["","验证手机号","设置新的交易密码","设置新的交易密码"][p.currentStep]},e.changeOtp=function(){if(e.inputOtpTipsContent="",p.nextBtnDisable=!0,e.data.regPhoneCheckNumber&&""!=e.data.regPhoneCheckNumber){var t=i.isValidPhoneOtpInput(e.data.regPhoneCheckNumber);"fail"==t?e.inputOtpTipsContent="验证码不正确":"finish"==t&&_()}},e.checkTimeoutButton=!0,e.onGetOTP=function(){if(!w){a.readSMSVerifyCode().then(function(t){e.data.regPhoneCheckNumber||(e.data.regPhoneCheckNumber=t.smsCode,_())});var n={};n.usage_id=o.OPT_TYPE.RESET_PASS,w=!0,r.requestOTPAndCheckBindPhone(n).then(function(){e.checkTimeoutButton=!1,e.checkNumTimeout=60,document.addEventListener("pause",s,!1),document.addEventListener("resume",c,!1),u(),w=!1},function(e){i.makeToast(e.ret_msg),w=!1});var s=function(){var t=i.getDate();e.pausetime=t.getTime()},c=function(){var t=i.getDate();e.resumetime=t.getTime(),e.pausetime&&(e.checkNumTimeout-=Math.round((e.resumetime-e.pausetime)/1e3),e.checkNumTimeout<0&&(e.checkNumTimeout=0),e.pausetime=0)},u=function(){return e.checkNumTimeout-=1,e.checkNumTimeout<=0?(e.checkTimeoutButton=!0,document.removeEventListener("pause",s,!1),void document.removeEventListener("resume",c,!1)):void t(function(){u()},1e3)}}};var w=!1;e.classOtpBtn=function(){return w?"register-yz-btn off":"register-yz-btn"},e.$watch("sigOnPwdCommit",function(n){if(void 0!=n)if(2==p.currentStep){if(!i.isPasswordStrongEnough(e.vm.formData.confirmPassword.MD5)||i.isPasswordWithUserBirthday(e.vm.formData.confirmPassword.MD5,p.birthNo)||i.isPasswordWithUserPhone(e.vm.formData.confirmPassword.MD5,p.phoneNo))return i.makeToast(STRING_TABLE.PASSWORD_TOO_WEAK,"short"),e.isPwdKeyboardShow=!1,void t(function(){e.isPwdKeyboardShow=!0},200);e.originPwd=e.vm.formData.confirmPassword.originPwd,e.isPwdKeyboardShow=!1,p.nextBtnDisable=!0,p.currentStep++,t(function(){e.isPwdKeyboardShow=!0},200)}else 3==p.currentStep&&(e.originPwd!==e.vm.formData.confirmPassword.originPwd?(i.makeToast("两次输入不一致","short"),e.isPwdKeyboardShow=!1,p.currentStep=2,t(function(){e.isPwdKeyboardShow=!0},200)):(m.show({oneLineTextLeft:"为了您的账户安全，需要您先通过人脸验证",twoButtonText1:"取消",twoButtonText2:"立即验证",popClose:function(t){if(1==t)e.back();else if(2==t){var n=s.getCacheInfo("personalInfo"),i=n&&n.ecif_no?n.ecif_no:"";d.startFaceVerify(o.CHECK_FACE_SCENE_ID.RESET_PWD,i,!0).then(function(e){e&&v(e.faceId,e.videoSessionId)},function(){b(!1)},function(){b(!0)})}}}),p.password=e.vm.formData.confirmPassword.RSA,e.isPwdKeyboardShow=!1))});var S=function(){f.show();var n={};n.user_pwd=p.password,n.face_id=p.faceId,n.artificial_faceck_id=p.videoId,n.otp_session_id=p.optsessionId,r.requestSetPasswordV2(n).then(function(n){if(n&&"asyn_examine"==n.process_type){var o=!0,r=h.getCommonConfig();o=r&&r.async_examine_time_start&&r.async_examine_time_end?i.isInWorkTime(r.async_examine_time_start,r.async_examine_time_end):!1;var a=null;a=o?"重置密码申请已受理，处理结果将于15分钟内短信通知":"重置密码申请已受理，处理结果将于12小时内短信通知",t(function(){m.show({oneLineTextLeft:a,oneButtonText:"我知道了",popClose:function(){}})},600),f.hide(),e.back()}else i.makeToast("密码重置成功"),e.back()},function(t){i.makeToast(t.ret_msg),e.back()})},_=function(){1==p.currentStep&&i.isValidPhoneOtpNumber(e.data.regPhoneCheckNumber)&&(p.nextBtnDisable=!1)};e.back=function(){u.clearCommonSession(p),u.backPage()};var b=function(t){i.makeToast("重置密码失败"),e.back()},v=function(e,t){p.faceId=e,p.videoId=t,S()};P()}]);app.controller("ShowRiskInfoController",["$scope","cgiService","utils","$timeout","cache","$rootScope","LocationService","commonDirectiveService","GLOBAL_CONSTANT","essential",function(i,e,t,c,n,s,o,a,r,l){i.data={};var k=function(){var i=o.getData();u(i)},u=function(e){if(e&&void 0!=e.cust_risk_level&&1*e.cust_risk_level>=0){var t=1*e.cust_risk_level,c=["低","低、较低","低、较低、中等","低、较低、中等、较高","低、较低、中等、较高和高"];i.riskType=gRiskArr[t],i.riskProduct="适合购买"+c[t]+"风险等级产品"}else v(!0)},v=function(e){i.data.riskOption=i.data.riskOption||{},a.beginUserRiskAssessment({riskOption:i.data.riskOption,isParentBack:e}).then(function(t){t.status==r.RISK_STATUS.CLICK_BACK?e&&i.back():t&&void 0!=t.cust_risk_level&&1*t.cust_risk_level>=0&&u(t)},function(){})};i.clickSeeProduct=function(){o.go(l.isFinancialHomeGray()?"financialHome":"financialRecommend")},i.clickReassessment=function(){v(!0)},i.back=function(){o.backPage()},k()}]);app.controller("MessageCenterController",["$scope","GLOBAL_CONSTANT","$location","messageService","$timeout","$ionicScrollDelegate","LocationService","essential",function(e,t,a,n,o,s,l,i){e.messageList=[],e.showEmpty=!1,e.noMoreData=!1,e.data={},e.data.showLoading=!1;var c=null;c=o(function(){e.showEmpty=!0,e.data.showLoading=!1},2e3);var r=s.$getByHandle("mainScroll"),u=!1;e.data.showLoading=!0;var g=null;n.getMessageList().then(function(t){c&&(o.cancel(c),c=null),e.messageList=t,e.data.showLoading=!1,o(function(){u=!0,r.resize()},50),e.showEmpty=!1,g=o(function(){n.setMessageUnread()},50)},function(){}),e.outValue={showPop:!1,oneLineTextLeft:"确定要清空所有消息？",twoButtonText1:"取消",twoButtonText2:"确定",popClose:function(t){2==t&&(e.messageList=[],n.clearMessage())}},e.clearAll=function(){e.outValue.showPop=!0},e.clickMsg=function(e){if(n.reportReadMessage(e.msgid),e.url_scheme&&e.url_scheme.length>0)l.go(e.url_scheme,null,e);else if(e.extra&&e.extra.type)switch(e.extra.type){case"earning":l.go(e.extra.url,null,e);break;case"fuli":i.openInAppBrowser(e.extra.url)}},e.onClass=function(e){return"U"==e.status?"px-a px-lt":"px-a px-lt read"},e.loadMoreData=function(){u=!1,n.getMessageList(!0).then(function(t){e.noMoreData=!n.getIsMoreData(),e.messageList=t,e.$broadcast("scroll.infiniteScrollComplete"),o(function(){u=!0,r.resize()},50)},function(){})},e.back=function(){g&&(o.cancel(g),g=null),n.backPage()}}]);app.controller("TransRecordController",["$scope","cgiService","utils","cache","TransRecordService","$timeout","GLOBAL_CONSTANT","$ionicScrollDelegate","LocationService","ProdInfoService",function(t,e,a,s,n,r,i,_,o,c){var u=t.data={};u.firstTime=!0,u.selectType="week";var d=1,l=null,m=n.getData();m&&m.backType&&(m.backObj?l=m.backObj:m.backType&&(d=m.backType),n.setData(null));var T=_.$getByHandle("myContent"),f={timeStart:"",timeEnd:"",timeOpt:0,timeShow:!1,operationOpt:0,operationShow:!1,startTime:null,endTime:null},p=function(){e.requestUserWealth().then(function(){},function(){})},S=function(){p(),L(),A()},L=function(){f.startTime||(f.startTime=a.getDate(),f.startTime.setDate(f.startTime.getDate()-7),u.dtStart=f.startTime),f.endTime||(f.endTime=a.getDate(),u.dtEnd=f.endTime)};t.onClickTimeSelect=function(t){u.dtStart=a.getDate(),u.dtEnd=a.getDate(),"week"==t?u.dtStart.setDate(u.dtStart.getDate()-7):"month"==t?u.dtStart.setDate(u.dtStart.getDate()-30):"month3"==t&&u.dtStart.setDate(u.dtStart.getDate()-90),u.selectType=t,f.startTime=u.dtStart,f.endTime=u.dtEnd,A(!0)},t.onClassTimeSelect=function(t){return t==u.selectType?"q on":"q"},t.onClickTime=function(e){var s=a.getDate().getTime();if(a.isiOSDevice()&&(s=a.getDate()),"start"==e){var n={date:f.startTime,maxDate:s,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};datePicker.show(n,function(e){e&&f.startTime!=e&&(f.startTime=e,u.dtStart=e,u.selectType="none",t.$apply())})}else{var n={date:f.endTime,maxDate:s,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};datePicker.show(n,function(e){e&&f.endTime!=e&&(f.endTime=e,u.dtEnd=e,u.selectType="none",t.$apply())})}},t.onClickTimeSubmit=function(){A(!0)},t.onClickItemLi=function(t){o.go("/transRecordDetail",null,{data:t})},t.onClickItem=function(t,e){e.stopPropagation(),t.showSubList=!t.showSubList},t.onClassItem=function(t){var e="";return("出错"==t.status||"失败"==t.status||"处理中"==t.status)&&(e="close"),t.showSubList&&(e="show-w"),e},t.onClassStatus=function(t){return"处理中"==t.status||"已受理"==t.status?"po error":"出错"==t.status?"po error":"失败"==t.status?"po fail":"po"},t.onIfItem=function(t){return"出错"==t.status?!0:!1},t.onIfItem1=function(t){return"出错"==t.status||"失败"==t.status||"处理中"==t.status?!0:!1},t.onIfDown=function(t){return"出错"==t.status||"失败"==t.status||"处理中"==t.status?!0:!1},u.all=!1,u.webank=!1,u.depositPlusList=[],u.depositList=[],u.financialList=[],u.allList=[],u.renderList=[];var E=[],D="交易处理中，请耐心等待处理结果，勿重复操作",N=s.getCacheInfo("personalInfo"),g="";N&&(g=N.webank_card_no);var h=null,P=null,A=function(t){h&&(r.cancel(h),h=null),t?u.showLoading=!0:(P&&(r.cancel(P),P=null),P=r(function(){u.showLoading=!0},300)),h=r(function(){u.showLoading=!1},1e4),u.depositPlusList=[],u.depositList=[],u.financialList=[],u.allList=[];var e=f.startTime.getTime(),s=f.endTime.getTime();f.startTime>f.endTime&&(e=f.endTime.getTime(),s=f.startTime.getTime());var n=a.getYYYYMMDDStringByDate(new Date(e-6912e5)),i=a.getYYYYMMDDStringByDate(new Date(s+6912e5));O=[],v(n,i,t),R(n,i,t)},R=function(t,a){e.requestAllTransList(t,a).then(function(t){if(u.all=!0,E=[],u.depositPlusList=[],u.financialList=[],t&&t.ret_data&&t.ret_data.product_list){var e=t.ret_data.product_list;for(var a in e){var s=e[a];null!=s.trans_type&&(s.trans_type=1*s.trans_type),s.trans_type==i.TRANS_LOG_TYPE.PURCHASE?C(s):s.trans_type==i.TRANS_LOG_TYPE.REDEEM?b(s):s.trans_type==i.TRANS_LOG_TYPE.INSURANCE?B(s):s.trans_type==i.TRANS_LOG_TYPE.INSURANCE_REDEEM?q(s):s.trans_type==i.TRANS_LOG_TYPE.INSURANCE_CANCEL?j(s):s.trans_type==i.TRANS_LOG_TYPE.STOCK_PURCHASE?M(s):s.trans_type==i.TRANS_LOG_TYPE.STOCK_REDEEM?H(s):s.trans_type==i.TRANS_LOG_TYPE.STOCK_CANCEL||(s.trans_type==i.TRANS_LOG_TYPE.INSURANCE_PURCHASE2?F(s):s.trans_type==i.TRANS_LOG_TYPE.INSURANCE_REDEEM2?K(s):s.trans_type==i.TRANS_LOG_TYPE.FUND_DIVIDENDS?V(s):s.trans_type==i.TRANS_LOG_TYPE.UNION_PAY_TO_WEBANK_CARD?x(s):s.trans_type==i.TRANS_LOG_TYPE.T_PLUS_ONE_PURCHASE||s.trans_type==i.TRANS_LOG_TYPE.T_PLUS_ONE_PURCHASE2||s.trans_type==i.TRANS_LOG_TYPE.T_PLUS_ONE_PURCHASE3?U(s):s.trans_type==i.TRANS_LOG_TYPE.T_PLUS_ONE_REDEEM||s.trans_type==i.TRANS_LOG_TYPE.T_PLUS_ONE_REDEEM2||s.trans_type==i.TRANS_LOG_TYPE.T_PLUS_ONE_REDEEM3?w(s):s.trans_type==i.TRANS_LOG_TYPE.GOLD_TRANSACTION&&G(s))}Y("other")}},function(){h&&(r.cancel(h),h=null),P&&(r.cancel(P),P=null),u.showLoading=!1})},v=function(t,a){e.requestWebankAccountTransList(t,a).then(function(t){u.webank=!0,u.depositList=[];var e=t.ret_data.product_list;for(var a in e){var s=e[a];null!=s.trans_type&&(s.trans_type=1*s.trans_type),s.trans_type==i.TRANS_LOG_TYPE.TRANS_IN?z(s):s.trans_type==i.TRANS_LOG_TYPE.TRANS_OUT?J(s):s.trans_type==i.TRANS_LOG_TYPE.CFT_PAY?Q(s):s.trans_type==i.TRANS_LOG_TYPE.CFT_REFUND?Q(s):s.trans_type==i.TRANS_LOG_TYPE.UNION_PAY_ONLINE?Q(s):s.trans_type==i.TRANS_LOG_TYPE.UNION_PAY_REFUND&&Q(s)}Y("webank")},function(){h&&(r.cancel(h),h=null),P&&(r.cancel(P),P=null),u.showLoading=!1})},k=function(){u.firstTime=!1;var t=[],e=new Date(f.startTime.getFullYear(),f.startTime.getMonth(),f.startTime.getDate()).getTime(),s=new Date(f.endTime.getFullYear(),f.endTime.getMonth(),f.endTime.getDate()).getTime(),n=e;e>s&&(e=s,s=n),s=new Date(s+864e5).getTime(),$.each(u.allList,function(n,r){if(r.date&&r.date.length>=8){var i=a.getDateByYYYYMMDDString(r.date).getTime();i>=e&&s>i&&t.push(r)}}),u.renderList=t,r(function(){T.resize(),T.scrollTop(!0),r(function(){T.resize()},200)},50),h&&(r.cancel(h),h=null),P&&(r.cancel(P),P=null),u.showLoading=!1},O=[],Y=function(t){if("webank"==t?O[0]=t:"other"==t&&(O[1]=t,E.length>0&&c.requestProdInfo(E).then(function(t){$.each(u.financialList,function(e,a){if(t[a.prod_code]){{t[a.prod_code]}switch(1*a.trans_type){case i.TRANS_LOG_TYPE.INSURANCE:case i.TRANS_LOG_TYPE.INSURANCE_REDEEM:case i.TRANS_LOG_TYPE.INSURANCE_CANCEL:Z(a.prod_code,a);break;case i.TRANS_LOG_TYPE.STOCK_PURCHASE:case i.TRANS_LOG_TYPE.STOCK_REDEEM:te(a.prod_code,a);break;case i.TRANS_LOG_TYPE.INSURANCE_PURCHASE2:case i.TRANS_LOG_TYPE.INSURANCE_REDEEM2:ee(a.prod_code,a);break;case i.TRANS_LOG_TYPE.FUND_DIVIDENDS:ae(a.prod_code,a)}}}),tracelog("按产品拉取产品信息成功")},function(){tracelog("按产品拉取产品信息失败")})),O[0]&&O[1]){var e=function(t,e){return t.date!=e.date?e.date-t.date:t.time!=e.time?e.time-t.time:e.serno-t.serno},a=[],s=[],n={};$.each(u.financialList,function(t,e){n[e.trans_serno]=1,e.subList=[],$.each(u.depositList,function(t,a){a.trans_serno==e.trans_serno&&e.subList.push(a)}),$.each(u.depositPlusList,function(t,a){a.trans_serno==e.trans_serno&&e.subList.push(a)})}),$.each(u.depositPlusList,function(t,e){n[e.trans_serno]||s.push(e)}),u.depositPlusList=s,$.each(u.depositPlusList,function(t,e){n[e.trans_serno]=1,e.subList=[],$.each(u.depositList,function(t,a){a.trans_serno==e.trans_serno&&e.subList.push(a)})}),$.each(u.depositList,function(t,e){n[e.trans_serno]||a.push(e)}),u.depositList=a,u.allList=u.financialList.concat(u.depositList,u.depositPlusList),u.allList.sort(e),O[0]&&O[1]&&k()}},y=function(t){return 3==t||void 0==t?"":1==t?"已受理":2==t||4==t||6==t||9==t?"失败":5==t?"已撤单":"处理中"},C=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.cardNo=t.card_no,e.amountStr=W(t.trans_amt,2)+"元",e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.depositPlusList.push(e)},b=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.depositPlusList.push(e)},I=function(t,e){var a=c.getProdInfo(t);a?(e.selfTrancDesc&&(e.selfTrancDesc=e.selfTrancDesc.replace(/T\+1/,a.prod_name)),e.prod_name=a.prod_name):E.push(t)},G=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),t.applicationvol>0?e.amountStr=W(t.applicationvol,4)+"克":t.applicationamount>0&&(e.amountStr=W(t.applicationamount,2)+"元"),e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},U=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,I(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},w=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,I(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},M=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,te(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",3==t.trans_status&&t.applicationamount&&t.applicationamount-t.confirmedamount>0&&(e.status="部分成功"),e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},H=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,te(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.errLog="处理中"==e.status?D:t.ori_rtn_desc,e.amountStr=1*t.trans_amt>0?W(t.trans_amt,2)+"元":W(t.applicationvol,2)+"份",u.financialList.push(e)},B=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,Z(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},F=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,ee(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},q=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,Z(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},K=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,ee(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},V=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,ae(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},j=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,Z(t.prod_code,e),e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},x=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.financialList.push(e)},W=function(t,e){var a=parseFloat(t).toFixed(e||0),s=a.split("."),n=s[0].split("").reverse(),r="";n.length>0&&("-"==n[n.length-1]||"+"==n[n.length-1])&&(r=n.pop());for(var i="",_=0;_<n.length;_++)i+=n[_]+((_+1)%3==0&&_+1!=n.length?",":"");return i=i.split("").reverse().join(""),void 0!=s[1]&&(i+="."+s[1]),r&&(i=r+i),i},z=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.depositList.push(e)},J=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.depositList.push(e)},Q=function(t){var e=t;e.selfTrancDesc=t.self_tranc_desc,e.remark=t.remark,e.status=y(t.trans_status),e.date=t.trans_date,e.time=t.trans_time,e.dateStr=X(t.trans_date,t.trans_time),e.amountStr=W(t.trans_amt,2)+"元",e.errLog="处理中"==e.status?D:t.ori_rtn_desc,u.depositList.push(e)},X=function(t,e){var a="";return t&&t.length>=8&&(a+=t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2),e&&e.length>=4&&(a+=" "+e.substr(0,2)+":"+e.substr(2,2))),a},Z=function(t,e){var a=c.getProdInfo(t);a?(e.selfTrancDesc&&(e.selfTrancDesc=e.selfTrancDesc.replace(/股基|定期/,a.on_sale_desc+"("+a.value_date.substr(4,4)+")")),e.prod_name=a.on_sale_desc,e.valueDate=a.value_date):E.push(t)},te=function(t,e){var a=c.getProdInfo(t);a?(e.selfTrancDesc&&(e.selfTrancDesc=e.selfTrancDesc.replace(/股基|定期/,a.on_sale_desc)),e.prod_name=a.on_sale_desc):E.push(t)},ee=function(t,e){var a=c.getProdInfo(t);a?(e.selfTrancDesc&&(e.selfTrancDesc=e.selfTrancDesc.replace(/股基|定期/,a.prod_name)),e.prod_name=a.prod_name):E.push(t)},ae=function(t,e){var a=c.getProdInfo(t);if(a)if(a.on_sale_desc){var s="";if(a.value_date)try{s="("+a.value_date.substr(4,4)+")"}catch(n){s=""}e.selfTrancDesc=e.selfTrancDesc.replace(/基金/,a.on_sale_desc+s),e.prod_name=a.on_sale_desc}else e.selfTrancDesc=e.selfTrancDesc.replace(/基金/,a.prod_name),e.prod_name=a.prod_name;else E.push(t)};t.back=function(){n.backPage(l?l:d)},t.onHJViewActive=function(){},t.onHJViewDisActive=function(){},S()}]);app.controller("TransRecordDetailController",["$scope","cgiService","utils","cache","LocationService","$timeout","GLOBAL_CONSTANT",function(a,t,n,e,r,_,s){var o=function(){var a=r.getData();a&&a.data?R(a.data):r.backPage()},p={};p[s.TRANS_LOG_TYPE.PURCHASE]="转入",p[s.TRANS_LOG_TYPE.REDEEM]="转出",p[s.TRANS_LOG_TYPE.TRANS_IN]="转入",p[s.TRANS_LOG_TYPE.TRANS_OUT]="转出",p[s.TRANS_LOG_TYPE.CANCEL]="",p[s.TRANS_LOG_TYPE.INSURANCE]="购买",p[s.TRANS_LOG_TYPE.INSURANCE_REDEEM]="赎回",p[s.TRANS_LOG_TYPE.INSURANCE_CANCEL]="撤单",p[s.TRANS_LOG_TYPE.STOCK_PURCHASE]="购买",p[s.TRANS_LOG_TYPE.STOCK_CANCEL]="撤单",p[s.TRANS_LOG_TYPE.STOCK_REDEEM]="赎回",p[s.TRANS_LOG_TYPE.INSURANCE_PURCHASE2]="购买",p[s.TRANS_LOG_TYPE.INSURANCE_REDEEM2]="赎回",p[s.TRANS_LOG_TYPE.FUND_DIVIDENDS]="分红",p[s.TRANS_LOG_TYPE.UNION_PAY_TO_WEBANK_CARD]="银联支付",p[s.TRANS_LOG_TYPE.CFT_PAY]="财付通快捷支付",p[s.TRANS_LOG_TYPE.CFT_REFUND]="财付通退款",p[s.TRANS_LOG_TYPE.UNION_PAY_ONLINE]="银联在线支付",p[s.TRANS_LOG_TYPE.UNION_PAY_REFUND]="银联退款",p[s.TRANS_LOG_TYPE.T_PLUS_ONE_PURCHASE]="购买",p[s.TRANS_LOG_TYPE.T_PLUS_ONE_REDEEM]="赎回",p[s.TRANS_LOG_TYPE.T_PLUS_ONE_PURCHASE2]="购买",p[s.TRANS_LOG_TYPE.T_PLUS_ONE_PURCHASE3]="购买",p[s.TRANS_LOG_TYPE.T_PLUS_ONE_REDEEM2]="赎回",p[s.TRANS_LOG_TYPE.T_PLUS_ONE_REDEEM3]="赎回",p[s.TRANS_LOG_TYPE.GOLD_TRANSACTION]="黄金交易";var T={};T[101]="活期金买入挂单",T[102]="活期金卖出挂单",T[103]="活期金买入挂单成交",T[104]="活期金卖出挂单成交",T[105]="活期金买入挂单撤销",T[106]="活期金卖出挂单撤销",T[107]="活期金买入挂单过期失效",T[108]="活期金卖出挂单过期失效",T[113]="活期金提金申请确认";var c={};c[101]="活期金买入挂单",c[102]="活期金卖出挂单",c[103]="活期金买入挂单",c[104]="活期金卖出挂单",c[105]="活期金买入挂单",c[106]="活期金卖出挂单",c[107]="活期金买入挂单",c[108]="活期金卖出挂单",c[109]="活期金买入",c[110]="活期金卖出",c[111]="活期金提金申请",c[112]="活期金提金撤销",c[113]="活期金提金申请",c[114]="活期金定投",c[115]="定期金买入",c[116]="活期金利息入账",c[117]="定期金提前赎回",c[119]="定期金到期赎回，本金入账",c[120]="定期金到期赎回，利息入账";var N=e.getCacheInfo("personalInfo"),S=[],m=N.webank_card_no||"";null!=N&&N.bind_cards_list&&N.bind_cards_list.length>0&&$.each(N.bind_cards_list,function(a,t){S.push(t.other_account.trim())});var E=function(a,t){var n=parseFloat(a).toFixed(t||0),e=n.split("."),r=e[0].split("").reverse(),_="";r.length>0&&("-"==r[r.length-1]||"+"==r[r.length-1])&&(_=r.pop());for(var s="",o=0;o<r.length;o++)s+=r[o]+((o+1)%3==0&&o+1!=r.length?",":"");return s=s.split("").reverse().join(""),void 0!=e[1]&&(s+="."+e[1]),_&&(s=_+s),s},y=function(a){return A(a)?$.inArray(a.acct_no,S)>-1?!1:!0:!1},A=function(a,t){return t?a.bank_name+"("+m.substr(m.length-4)+")":"发卡行无法识别"==a.bank_name?"":a.bank_name+"("+a.acct_no.substr(a.acct_no.length-4)+")"},i=function(a){return m?"微众卡("+m.substr(m.length-4)+")":a.card_no?"微众卡("+a.card_no.substr(a.card_no.length-4)+")":""},l=["定期+","基金"],R=function(t){var n=t.status||"成功";if(5==t.financejob_type?(("成功"==n||"失败"==n)&&(n="执行"+n),a.transDesc="益点心意 "+n,a.notShowRecv=!0):t.financejob_name?(("成功"==n||"失败"==n)&&(n="执行"+n),a.transDesc=t.financejob_name+" "+n):(a.transDesc=p[1*t.trans_type]+n,1*t.trans_type==s.TRANS_LOG_TYPE.GOLD_TRANSACTION&&(T[1*t.op_type]?a.transDesc=T[1*t.op_type]:c[1*t.op_type]&&(a.transDesc=c[1*t.op_type]+n))),t.trans_type==s.TRANS_LOG_TYPE.GOLD_TRANSACTION&&O(t),a.transSucess=!0,"失败"==t.status&&(a.transSucess=!1,a.errLog=t.errLog),a.transType=p[1*t.trans_type],1*t.trans_type==s.TRANS_LOG_TYPE.GOLD_TRANSACTION&&c[1*t.op_type]&&(a.transType=c[1*t.op_type]),a.prodName=t.prod_name,(5==t.trans_type||51==t.trans_type||52==t.trans_type)&&t.valueDate&&(a.prodName=a.prodName+"("+t.valueDate.substr(4,4)+")"),t.amountStr=t.amountStr.trim(),a.transAmount=t.amountStr.substr(0,t.amountStr.length-1),a.transAmountLast=t.amountStr.substr(t.amountStr.length-1,1),a.dateStr=t.dateStr,a.transSerno=t.trans_serno,a.selfTrancDesc=t.selfTrancDesc,a.remark=t.remark,t.acct_no||(t.acct_no=t.card_no||"",t.acct_no.length<4&&(t.acct_no="未知卡号")),a.diffNameFrom=!1,a.diffNameTo=!1,10001==t.trans_type)y(t)?(a.diffNameFrom=!0,a.transFromName=t.payee_name,a.transFromCard=t.card_no,a.transFromBank=t.bank_name):a.transFromBank=A(t),a.transToBank=i(t);else if(10002==t.trans_type)a.transFromBank=i(t),y(t)?(a.diffNameTo=!0,a.transToName=t.payee_name,a.transToCard=t.card_no,a.transToBank=t.bank_name):a.transToBank=A(t);else if(0==t.trans_type){a.prodName="";var e=!1;("微众银行"==t.bank_name||"微众卡"==t.bank_name)&&(t.bank_name="微众卡",a.transDesc=a.transDesc.replace(/转入|转出/,"转存"),a.transType=a.transType.replace(/转入|转出/,"转存"),e=!0),a.transFromBank=A(t,e),a.transToBank="活期+",1==t.action_type&&(a.transDesc="使用红包",a.transFromBank="微众红包")}else if(1==t.trans_type)if(a.prodName="",a.transFromBank="活期+",y(t))a.diffNameTo=!0,a.transToName=t.payee_name,a.transToCard=t.card_no,a.transToBank=t.bank_name;else{var e=!1;("微众银行"==t.bank_name||"微众卡"==t.bank_name)&&(t.bank_name="微众卡",a.transDesc=a.transDesc.replace(/转入|转出/,"转存"),a.transType=a.transType.replace(/转入|转出/,"转存"),e=!0),a.transToBank=A(t,e)}else 52==t.trans_type||62==t.trans_type||54==t.trans_type?(2==t.reedeem_type?a.transToBank="活期+":(1==t.reedeem_type||3==t.reedeem_type)&&(a.transToBank=i(t)),52==t.trans_type||54==t.trans_type?a.prodType=l[0]:62==t.trans_type&&(a.prodType=l[1])):51==t.trans_type||61==t.trans_type?(a.transToBank=2==t.pay_flag?"活期+":i(t),51==t.trans_type?a.prodType=l[0]:61==t.trans_type&&(a.prodType=l[1])):5==t.trans_type||60==t.trans_type||53==t.trans_type?(2==t.pay_flag?a.transFromBank="活期+":3==t.pay_flag?a.transFromBank=i(t):1==t.pay_flag&&(a.transFromBank=A(t)),3==t.trans_status&&t.applicationamount&&t.applicationamount-t.confirmedamount>0&&(a.transDesc="部分成功",a.partAmountSucessStr=E(t.confirmedamount,2),a.partAmountFailStr=E(t.applicationamount-t.confirmedamount,2),a.partAmountLastStr="元",a.transSucess=!1,a.errLog=t.errLog),5==t.trans_type||53==t.trans_type?a.prodType=l[0]:60==t.trans_type&&(a.prodType=l[1])):6==t.trans_type?(a.transDesc="获得分红",a.transToBank=1*t.rollflag==3?"活期+":i(t),1==t.reedeem_type&&(a.transDesc="红利再投",a.transToBank="")):101==t.trans_type&&(2==t.pay_flag?a.transFromBank="活期+":3==t.pay_flag&&(a.transFromBank=i(t)))},O=function(t){(1*t.op_type==103||1*t.op_type==104||1*t.op_type==109||1*t.op_type==110||1*t.op_type==114)&&t.real_price>0&&(a.goldPrice=parseFloat(t.real_price).toFixed(2))};a.back=function(){r.backPage()},o()}]);app.controller("TransPlanDetailController",["$scope","cgiService","utils","cache","LocationService","$timeout","GLOBAL_CONSTANT",function(t,a,r,n,s){var e=function(){var t=s.getData();t&&t.data?o(t.data):s.backPage()},o=function(a){var r=a.status||"成功";a.financejob_name?(("成功"==r||"失败"==r)&&(r="执行"+r),t.transDesc=a.financejob_name+" "+r):t.transDesc=transDescArr[a.trans_type]+r,t.transSucess=!0,"失败"==a.status&&(t.transSucess=!1,t.errLog=a.errLog),t.transTo=a.transTo?a.transTo:"活期+",t.transFrom=a.transFrom?a.transFrom:"活期+",t.transSerno=a.trans_serno,a.amountStr=a.amountStr.trim(),t.transAmount=a.amountStr.substr(0,a.amountStr.length-1),t.transAmountLast=a.amountStr.substr(a.amountStr.length-1,1),t.dateStr=a.dateStr,t.transTypeDesc=a.transTypeDesc};t.back=function(){s.backPage()},e()}]);app.controller("TransferHomeController",["$scope","$location","$stateParams","utils","cgiService","essential","GLOBAL_CONSTANT","cache","messageService","$interval","BindBankCardService","BindingCardDetailService","WebankCardService","TransferInService","$timeout","LoginService","$ionicViewSwitcher","TransRecordService","RegisterService","SalaryPlanService","HomeNoticeService","MortgatePlanService","PlanServiceV2","TransOutScenePlanService","TransferOutServiceV2","TransferOutService","PlanService","webankCommonService","HelpDetailService","HJactionPop","BindCardVerifyPromptService","$ionicHistory","LocationService","TaxPlanService","ProdInfoService","WePayService","PromoCenterService","CommonClickFnService","InviteService",function(n,e,t,a,o,r,i,c,s,u,g,d,l,f,m,T,h,v,P,_,k,C,p,S,b,A,I,y,x,N,D,L,R,E,U,Y,B,M,O){var H=n.data={},F=n.func={};n.data.loadConfigCount=0;var w=function(n){var e={};e.lastModifyTimestamp=n.last_modify_timestamp,e.name=n.remark,e.jobType=n.job_type,e.amount=parseFloat(n.amount).toFixed(2),e.typeDesc=1==n.job_type||3==n.job_type?"转入"+e.amount+"元":"转出"+e.amount+"元",e.nextTime=n.next_time,e.isRepeat=n.is_repeat,e.producCode=n.product_code,e.id=n.id,e.bankName=n.bank_name,e.bankNo=n.bank_no,e.cardNo=n.card_no,e.planInfo=n;var t=a.getDateByYYYYMMDDString(e.nextTime);t&&(e.dateDesc=1==e.isRepeat?"每月"+t.getDate()+"日":a.getYYYYMMDDStringByDate(t,"-")),H.commonPlanList.push(e)},j=function(n){H.salaryPlan={},H.mortgage={},H.planForParent={},H.planForRent={},H.commonPlanList=[];for(var e in n)n[e].categry&&n[e].categry==i.PLAN_CATAGRY.SALARY?(H.salaryPlan.amountDesc="转入"+parseFloat(n[e].amount).toFixed(2)+"元",H.salaryPlan.dateDesc="每月"+a.getDateByYYYYMMDDString(n[e].next_time).getDate()+"日",H.salaryPlan.planInfo=n[e]):n[e].categry&&n[e].categry==i.PLAN_CATAGRY.MORTGAGE?(H.mortgage.amountDesc="转出"+parseFloat(n[e].amount).toFixed(2)+"元",H.mortgage.dateDesc="每月"+a.getDateByYYYYMMDDString(n[e].next_time).getDate()+"日",H.mortgage.planInfo=n[e]):n[e].categry&&n[e].categry==i.PLAN_CATAGRY.RESPECT_PARENT?(H.planForParent.amountDesc="转出"+parseFloat(n[e].amount).toFixed(2)+"元",H.planForParent.dateDesc="每月"+a.getDateByYYYYMMDDString(n[e].next_time).getDate()+"日",H.planForParent.planInfo=n[e]):n[e].categry&&n[e].categry==i.PLAN_CATAGRY.PAY_RENT?(H.planForRent.amountDesc="转出"+parseFloat(n[e].amount).toFixed(2)+"元",H.planForRent.dateDesc="每月"+a.getDateByYYYYMMDDString(n[e].next_time).getDate()+"日",H.planForRent.planInfo=n[e]):w(n[e]);H.commonPlanList.sort(function(n,e){return n.lastModifyTimestamp-e.lastModifyTimestamp})},G=function(n){j(n.ret_data),c.setCacheInfo("planList",n.ret_data)},z=function(){},q=function(){},V=function(){var n=c.getUserStatus();n==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&o.requestTransPlans().then(G,z).then(q)},$=function(n,e){var t=0;for(var o in n)!function(){var r={};r.numberMask="**** **** **** "+n[o].other_account.substring(12),r.number=n[o].other_account,r.bankName=n[o].other_bank_name,r.cardType=n[o].other_card_type,r.cardBinCode=n[o].other_bank_bin_code,r.bindingType=n[o].binding_type,r.regDateTime=n[o].reg_datetime,r.isChargeSupported=1==n[o].can_be_charged;var i="../img/bankHead/yh-"+(n[o].other_bank_bin_code||0)+"@2x.png",c="../img/bankHead/yh-"+(n[o].other_bank_bin_code||0)+"@nb.png",s="../img/bankHead/yh-"+(n[o].other_bank_bin_code||0)+"@bg.png",u=n[o].other_bank_bin_code;r.bankImg=i,r.bankImg1=c,r.bankBgImg=s,a.loadImage(i,function(n,e){n?(r.bankImg=e,r.cardStyle={"background-color":X[u||0]||X[0]}):(r.bankImg="../img/bankHead/yh-default-2x.png",r.cardStyle={"background-color":X[-1]})}),a.loadImage(c,function(n,e){n?(r.bankImg1=e,r.cardStyle={"background-color":X[u||0]||X[0]}):(r.bankImg1="../img/bankHead/yh-default-nb.png",r.cardStyle={"background-color":X[-1]})}),a.loadImage(s,function(n,e){n?(r.bankBgImg=e,r.cardStyle={"background-color":X[u||0]||X[0]}):(r.bankBgImg="../img/bankHead/yh-default-bg.png",r.cardStyle={"background-color":X[-1]})}),e[t++]=r}();H.cardCount+=t},J=function(){var n=c.getCacheInfo("personalInfo");if(null!=n){n.webank_card_no&&(H.mainCard.number=n.webank_card_no,H.mainCard.bankName="微众卡",H.mainCard.num=1,H.mainCard.bankImg="../img/bankHead/yh-0@2x.png",H.mainCard.bankImg1="../img/bankHead/yh-0@nb.png");var e=y.getValidBandCardList(),t=y.getValidRegCardList();H.cardList=[],H.regCardList=[],$(e,H.cardList),$(t,H.regCardList,!0)}},W=function(){Q(),he(),J();var e=c.getCacheInfo("calendar_init_param"),t=c.getCacheInfo("planList");!t||e&&e.InitPlans?(e&&e.InitPlans&&(e.InitPlans=!1),c.setCacheInfo("calendar_init_param",e),V(),R.setData({})):j(t),K(),F.isUserRegistered()&&(ie(),ce()),n.showInvestment=r.isFinancialHomeGray()},K=function(){if(n.data.status=c.getUserStatus(),n.data.status==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT){n.data.isLogin=!0,n.data.isHasAccount=!0;var e=c.getUserInfo();n.data.avatarUrl=e.picurl||"../img/tx@2x.png"}else if(n.data.status==i.ACCOUNT_STATE.USER_STATE_LOGIN){n.data.isLogin=!0,n.data.isHasAccount=!1;var e=c.getUserInfo();n.data.avatarUrl=e.picurl||"../img/tx@2x.png"}else n.data.isLogin=!1,n.data.isHasAccount=!1},Q=function(){H.commonPlanList=[],H.salaryPlan=null,H.mortgagePlan=null,H.planForRent=null,H.planForParent=null,H.PLAN_CATAGRY=i.PLAN_CATAGRY,H.cardCount=0,H.mainCard={num:0},H.cardList=[],H.regCardList=[]},X={102100099996:"#c94941",103100000026:"#20977f",104100000004:"#c94941",105100000017:"#445c95",301290000007:"#4447b0",302100011000:"#c94941",306581000003:"#c94941",303100000006:"#9b50b3",308584000013:"#af4846",313584099990:"#df8448",305100000013:"#445c95",309391000011:"#445c95",310290000013:"#4447b0",403100000004:"#21995c",313290000017:"#5e7ee2",304100040000:"#af4846",0:"#af4846","-1":"#2d64a0",313100000013:"#c94941",313521000011:"#0093c4",313551070008:"#c94941",313312300018:"#c94941"};F.isUserRegistered=function(){var n=c.getUserStatus();return n!=i.ACCOUNT_STATE.USER_STATE_GUEST&&n!=i.ACCOUNT_STATE.USER_STATE_LOGIN},F.onClickTransferOut=function(){a.clickButtonReport("zhuanzhang_zhuanchu"),U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void(y.isUserStrongAccount()?b.goPage():A.goPage()):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickTransferIn=function(){a.clickButtonReport("zhuanzhang_zhuanru"),U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void f.goPage():void a.makeToast("产品信息拉取中，请稍后重试","short")})},n.onClickViewCardInfoBtn=function(n,e){e&&n&&(n.isRegCard=e),d.goPage(null,null,n)},F.onClickBindNewCard=function(){a.clickButtonReport("zhuanzhang_tianjiaka"),g.goToBindCard()},F.onClickSettingsBtn=function(){h.nextDirection("back"),a.clickButtonReport("index_home"),s.clickRedPoint(),e.path("/accountSettings/transHome")},F.onClickMainTab=function(n){M.mainTabClickFun(n,3)},F.onClickTransLog=function(){v.goPage()};var Z=!1;F.back=function(){Z?r.exitAndroidApp():(Z=!0,a.makeToast("再按一次退出微众银行","short","bottom"),m(function(){Z=!1},2500))},F.onClickMakePlan=function(){return a.clickButtonReport("zhuanzhang_zidingyi"),H.commonPlanList.length>=5?void a.makeToast("对不起，最多只能制定5个转账计划"):void U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void(y.isUserStrongAccount()?p.goPage():I.goPage()):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickCommonPlan=function(n){U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var e=U.getProdInfo("001234");return e?void(y.isUserStrongAccount()?p.goPage("",n):I.goPage("",n)):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickTaxPlan=function(){a.clickButtonReport("zhuanzhang_shouyijuan"),U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void ne():void a.makeToast("产品信息拉取中，请稍后重试","short")})};var ne=function(){var n=E.getTaxPlanInfo();if(n)ee();else{var e=function(){H.showLoading=!1,ee()},t=function(n){H.showLoading=!1;var e=null;n&&n.ret_msg&&(e=n.ret_msg),e||(e="拉取公益计划信息失败！"),a.makeToast(e,"short")};H.showLoading=!0,E.requstTaxPlan(e,t)}},ee=function(){var n=E.getTaxConfig();if(n)F.jumpToTaxPlan();else{var e=function(){H.showLoading=!1,F.jumpToTaxPlan()},t=function(n){H.showLoading=!1;var e=null;n&&n.ret_msg&&(e=n.ret_msg),e||(e="拉取公益信息配置信息失败！"),a.makeToast(e,"short","bottom")};H.showLoading=!0,E.requstTaxConfig(e,t)}};F.jumpToTaxPlan=function(){U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void R.go(H.hasRunningTaxPlan?"/planTaxModify":"/planTax/trans"):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickSalaryPlan=function(){a.clickButtonReport("zhuanzhang_gongzi"),U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void _.goPage():void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickMortgagePlan=function(){return a.clickButtonReport("zhuanzhang_fangdai"),y.doesAccountNeedTransVerificationV2()?void N.show({oneLineTextLeft:"您的微众电子账户还未通过验证",twoButtonText1:"关闭",twoButtonText2:"立即验证",popClose:function(n){2==n&&D.goPage()}}):void U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void C.goPage():void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickModifySalaryPlan=function(n){U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var e=U.getProdInfo("001234");return e?void _.goPage("",n):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickModifyMortgagePlan=function(n){U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var e=U.getProdInfo("001234");return e?void C.goPage("",n):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.onClickTransOutScenePlan=function(n,e){var t={scene:e,planInfo:n};U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void S.goPage("",t):void a.makeToast("产品信息拉取中，请稍后重试","short")})},F.isStrongAccount=function(){return y.isUserStrongAccount()},F.onClickLoginRegin=function(){var n=c.getUserStatus();n==i.ACCOUNT_STATE.USER_STATE_GUEST?(a.makeToast(STRING_TABLE.BEGIN_TO_LOGIN,"short"),m(function(){T.setCallbackPage("transHome","transHome"),e.path("/login")},1e3)):n==i.ACCOUNT_STATE.USER_STATE_LOGIN&&(a.makeToast(STRING_TABLE.BEGIN_TO_OPENACCOUNT,"short"),m(function(){P.setCallbackPage("transHome","transHome"),P.go()},1e3))},F.canMakeNewPlan=function(){return!0},H.showMsgDot=!1;var te=function(){H.showMsgDot=H.hasNewNormalMessage||B.getRedPoint()||Y.getRedFlag()||O.getRedPoint()},ae=function(){s.getRedPoint().then(function(n){H.hasNewNormalMessage=n?!0:!1,te()})},oe=function(){s.getTypeMessageList("","red").then(function(n){if(n&&n.red&&n.red.length>0){var e=n.red[0];e.extraObj&&"fuli"===e.extraObj.usage&&B.setRedPoint(),te()}})},re=function(){s.getNotice().then(function(n){n&&k.goPage(null,null,n)})};n.onClickMainCard=function(){U.requestProdInfo(["001234"]).then(function(){r.resolve()},function(){a.makeToast("产品信息拉取中，请稍后重试","short"),r.reject()}).then(function(){var n=U.getProdInfo("001234");return n?void l.goPage():void a.makeToast("产品信息拉取中，请稍后重试","short")})};var ie=function(){E.requstTaxPlan(se,ue);var n=E.getTaxConfig();n||E.requstTaxConfig(ge,de)},ce=function(){fe(),H.hasRunningTaxPlan=le();var n=E.getTaxPlanInfo();if(n){if(n.plan){var e="",t=n.plan.job_type;t==i.DONATE_PLAN_TYPE.FEN?e="分":t==i.DONATE_PLAN_TYPE.JIAO?e="角":t==i.DONATE_PLAN_TYPE.YUAN&&(e="元"),""!=e&&(H.taxFirstDesc="每天捐几"+e)}H.taxSecondDesc=n.amountDesc?n.amountDesc:""}else H.taxFirstDesc="",H.taxSecondDesc="";H.donateDescClass=""==H.taxSecondDesc?"item p-c-lgray":"item p-c-lgray has2rows"},se=function(n){if(n&&n.ret_data){var e=n.ret_data;H.taxPlanInfo=e}ce()},ue=function(){H.hasRunningTaxPlan=!1},ge=function(){ce()},de=function(){},le=function(){var n=E.getTaxPlanInfo();return n&&n.plan&&n.plan.status==i.DONATE_PLAN_STATUS.RUN?!0:!1},fe=function(){var n=E.getTaxPlanInfo(),e=E.getTaxConfig();n&&e&&(H.showTaxPlan=!0)},me=function(){ae(),oe(),re()},Te=function(){document.removeEventListener("resume",me)},he=function(){ae(),oe(),re(),document.addEventListener("resume",me,!1)};n.onHJViewActive=function(){W(),a.resetHistory(!0)},n.onHJViewDisActive=function(){Te()},n.$on("$destroy",function(){Te()}),W(),a.resetHistory()}]);app.controller("TransferInController",["$scope","$location","$stateParams","utils","cgiService","essential","cache","webankCommonService","GLOBAL_CONSTANT","BindNewCardService1","ResetPasswdService","TransferInService","MonetaryService","RecentAccountService","AnnouncementService","dataService","$ionicViewSwitcher","TransferInResultService","HelpDetailService","HJactionLoading","LocationService","BindBankCardService",function(t,a,n,e,c,o,r,u,A,i,_,T,s,l,C,p,d,D,y,P,E,R){function N(){c.requestUionPayTrasferJumpUrl(S.mainCard.number,S.amount,t.vm.formData.confirmPassword.RSA,"http://webank.com/?jump_to_page=i.html").then(f,h)}function m(t){return btoa(encodeURIComponent(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,".")}function f(t){var a=location.protocol+"//"+location.pathname.replace("index.html","transfer/unionpay_wrapper.html?webContent=")+m(t.ret_data.web_content.match(/<form .*<\/form>/)),n=o.openInAppBrowser(a,"showBackButton=no,hardwareback=no");n&&n.addEventListener("exit",function(){Z(A.ORDER_QUERY_TYPE.TRANSIN_FROM_UNION_PAY,t.hj_biz_no,"")})}function h(t){S.showLoading=!1,u.isRetCodePwd(t.ret_code)?ta(t.ret_code,t.ret_msg):ua(t.ret_msg)}function k(){c.requestCommonConfig().then(function(t){!t||0!=t.union_pay_open&&void 0!=t.union_pay_open||(S.showUnionPay=!1)})}var S=t.data={},B=t.func={};S.buttonClass="p-btn p-btn-block off";var U=1,I=0,v=2,w=r.getCacheInfo("wealthNew"),g=u.parseRawWealthData_V3(w);S.mainCard={};var O=r.getCacheInfo("personalInfo");null!=O&&O.webank_card_no&&(S.mainCard.number=O.webank_card_no);var b={},L=!1,Y=null,V=null,F="",x=0,K=function(){S.buttonClass="p-btn p-btn-block off",F="",x=0,b={},L=!1},W=function(){S.isAgreed=!1,S.agreementDesc="服务协议及风险提示",S.agreementCode="001234"},H=function(){var t="",a=null,n=e.getDate();e.isWorkDay(n)&&n.getHours()<15?(a=e.getNextWorkDay(1),a.setDate(a.getDate()+1)):(a=e.getNextWorkDay(2),a.setDate(a.getDate()+1)),t=a.getMonth()+1+"-"+a.getDate()+" ("+e.getWeekdayByDate(a)+")",S.currentPlusAccountDesc=t},M=function(){return S.payAccountData.ctrlData.accountType},G=function(){return S.recvAccountData.ctrlData.accountType},J=function(){return G()==A.ACCOUNT_TYPE.WEBANK_CARD?"微众卡":G()==A.ACCOUNT_TYPE.CURRENT_PLUS?"活期+":""},q=function(){if(M()==A.ACCOUNT_TYPE.WEBANK_CARD)return"微众卡";if(M()==A.ACCOUNT_TYPE.CURRENT_PLUS)return"活期+";if(M()==A.ACCOUNT_TYPE.UNION_PAY)return"银联支付";var t="";return t+=S.payAccountData.otherBankAccount.cardInfo.bankName,t+=S.payAccountData.otherBankAccount.cardInfo.cardType,t+=e.abridgeAccountNumber(S.payAccountData.otherBankAccount.cardInfo.cardNo)},Q=function(t){S.showLoading=!1,b.result=t.retCode,t.retCode==A.CGI_RET.CGI_UNKNOW_ERROR?ua(t.retMsg):ea(),t.retCode==A.CGI_RET.CGI_SUCCESS?e.reportCustomEvent(A.REPORT_EVENT_NAME.TRANSFER_IN,A.TRANSFER_IN_STATISTIC.TRANS_RESULT_SUCCESS+S.payAccountData.ctrlData.accountType+"_"+S.recvAccountData.ctrlData.accountType):t.retCode==A.CGI_RET.CGI_PROCESSING?e.reportCustomEvent(A.REPORT_EVENT_NAME.TRANSFER_IN,A.TRANSFER_IN_STATISTIC.TRANS_RESULT_PROCESSING+S.payAccountData.ctrlData.accountType+"_"+S.recvAccountData.ctrlData.accountType):t.retCode==A.CGI_RET.CGI_UNKNOW_ERROR&&e.reportCustomEvent(A.REPORT_EVENT_NAME.TRANSFER_IN,A.TRANSFER_IN_STATISTIC.TRANS_RESULT_FAILED+S.payAccountData.ctrlData.accountType+"_"+S.recvAccountData.ctrlData.accountType)},Z=function(t,a,n){u.checkProcessingState(t,a,n).then(Q)},z=function(t){return gBankLimit[t]},j=function(){if(S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=z(S.payAccountData.otherBankAccount.cardInfo.bankBinCode);return t&&parseFloat(S.amount)>parseFloat(t.perOne)}return S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD?parseFloat(S.amount)>parseFloat(g.BankAmount):S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?parseFloat(S.amount)>parseFloat(g.HJAmount):void 0},X=function(){if(S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD){if(parseFloat(g.BankAmount)<parseFloat(S.amount))return e.makeToast("微众卡余额不足"),!1}else if(S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(g.HJAmount)<parseFloat(S.amount))return e.makeToast("活期+余额不足"),!1;return!0},ta=function(t,a){u.isRetCodePwdRetry(t)?(S.outValue={},S.outValue.showPop=!0,S.outValue.oneLineTextLeft=a,S.outValue.twoButtonText1="重试",S.outValue.twoButtonText2="忘记密码",S.outValue.popClose=function(t){1==t?S.isPwdShow=!0:2==t&&_.goPage()}):(S.outValue={},S.outValue.showPop=!0,S.outValue.oneLineTextLeft=a,S.outValue.twoButtonText1="取消",S.outValue.twoButtonText2="忘记密码",S.outValue.popClose=function(t){1==t||2==t&&_.goPage()})},aa=function(){S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD&&l.saveRecentlyUsedBankCard(A.ACCOUT_BIZ_TYPE.PAYMENT,S.payAccountData.otherBankAccount.cardInfo.cardNo,A.ACCOUT_SCENE_TYPE.TRANSFER),S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD&&l.saveRecentlyUsedBankCard(A.ACCOUT_BIZ_TYPE.RECEIVABLE,S.recvAccountData.otherBankAccount.cardInfo.cardNo,A.ACCOUT_SCENE_TYPE.TRANSFER)},na=function(){Y=l.loadRecentlyUsedBankCard(A.ACCOUT_BIZ_TYPE.PAYMENT,A.ACCOUT_SCENE_TYPE.TRANSFER),V=l.loadRecentlyUsedBankCard(A.ACCOUT_BIZ_TYPE.RECEIVABLE,A.ACCOUT_SCENE_TYPE.TRANSFER)},ea=function(){F&&b.transSerno?(P.show(),redPacketError=1,c.requestRedPacketStatus(b.transSerno).then(function(t){P.hide();var a=!1;t&&t.ret_data&&t.ret_data.red_packet_status_list&&t.ret_data.red_packet_status_list.length>0&&$.each(t.ret_data.red_packet_status_list,function(t,n){n.orig_busi_seq==b.transSerno&&(3==n.red_packet_status?a=!0:4==n.red_packet_status&&(redPacketError=2))}),p.clearPackageCache(),a?b.redPacketAmount=x:b.redPacketError=redPacketError,e.clearCurrentViewCache(),D.goPage(null,b)},function(){p.clearPackageCache(),b.redPacketError=1,P.hide(),e.clearCurrentViewCache(),D.goPage(null,b)}),F=""):(e.clearCurrentViewCache(),D.goPage(null,b)),b.result!=A.TRANS_STATE.FAILURE&&aa()},ca=function(t){b.result=t.ret_code,b.transSerno=t.ret_data.trans_serno,u.isProcessingState(t.ret_code)?Z(A.ORDER_QUERY_TYPE.PURCHASE,t.ret_data.trans_serno,"001234"):(S.showLoading=!1,ea())},oa=function(t){S.showLoading=!1,b.result=t.ret_code,b.failReason=t.ret_msg,u.isRetCodePwd(t.ret_code)?ta(t.ret_code,t.ret_msg):ua(t.ret_msg)},ra=function(t){b.result=t.ret_code,u.isProcessingState(t.ret_code)?Z(A.ORDER_QUERY_TYPE.TRANSIN,t.ret_data.trans_serno,""):(S.showLoading=!1,ea())},ua=function(t){return S.outValue={},S.outValue.showPop=!0,S.outValue.oneLineTextLeft=t,S.outValue.oneButtonText="知道了",S.outValue.popClose=function(){},!0},Aa=function(t){S.showLoading=!1,b.result=t.ret_code,b.failReason=t.ret_msg,u.isRetCodePwd(t.ret_code)?ta(t.ret_code,t.ret_msg):ua(t.ret_msg)},ia=function(t){b.result=t.ret_code,b.transSerno=t.ret_data.trans_serno,u.isProcessingState(t.ret_code)?Z(A.ORDER_QUERY_TYPE.REDEEM,t.ret_data.trans_serno,"001234"):(S.showLoading=!1,ea())},_a=function(t){S.showLoading=!1,b.result=t.ret_code,b.failReason=t.ret_msg,u.isRetCodePwd(t.ret_code)?ta(t.ret_code,t.ret_msg):ua(t.ret_msg)},Ta=function(){var a={};a.use_webank_card=!0,a.user_pwd=t.vm.formData.confirmPassword.RSA,a.transaction_amount=S.amount,a.product_code="001234",a.remark="赎回货基",c.requestRedeemMonetaryFund(a).then(ia,_a)},sa=function(){var a=S.payAccountData.otherBankAccount.cardInfo,n={};S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD?n.use_webank_card=!0:(n.use_webank_card=!1,n.bank_code=a.bankBinCode,n.card_no=a.cardNo),n.transaction_amount=S.amount,n.product_code="001234",n.user_pwd=t.vm.formData.confirmPassword.RSA,n.remark="购买货基",t.redPacketAmount&&p.getPackageId(function(t){t&&(n.red_packet_id=t.redPacketID,F=t.redPacketID,x=t.amount)}),c.requestPurchaseMonetaryFund(n).then(ca,oa)},la=function(){var a=S.payAccountData.otherBankAccount.cardInfo;c.requestBaseAccountTransIn(a.userName,a.cardNo,a.bankName,a.bankBinCode,S.amount,t.vm.formData.confirmPassword.RSA).then(ra,Aa)},Ca=function(){b.transType=S.transType,b.payAccountDesc=q(),b.recvAccountDesc=J(),b.transAmount=S.amount,b.accountType=S.recvAccountData.ctrlData.accountType,b.recvAccountData=S.recvAccountData,b.payAccountData=S.payAccountData,S.showLoading=!0,S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD&&S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD?la():S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?sa():S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD&&S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?Ta():S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD&&S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.UNION_PAY&&N()},pa=function(){S.pwdSubTitle="转入"+J(),S.pwdTransDesc=parseFloat(S.amount).toFixed(2)+"元";var t="使用";t+=q(),t+="付款",S.payWayDesc=t,S.isPwdShow=!0},da=function(){return e.isValidTransferAmount(S.amount)&&S.amount?S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.INVALID_TYPE?(e.makeToast(STRING_TABLE.INVALID_PAY_ACCOUNT),!1):!0:(e.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1)},Da=function(){S.recvAccountData={},S.recvAccountData.currentPlus={},S.recvAccountData.currentPlus.amount=g.HJAmount,S.recvAccountData.currentPlus.priority=1,S.recvAccountData.currentPlus.isAvaliable=!0,S.recvAccountData.webankAccount={},S.recvAccountData.webankAccount.priority=2,S.recvAccountData.webankAccount.amount=g.BankAmount,S.recvAccountData.webankAccount.isAvaliable=!0,S.recvAccountData.ctrlData={},S.recvAccountData.ctrlData.title="请选择收款账户",S.recvAccountData.ctrlData.canBindNewCard=!1,S.recvAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.CURRENT_PLUS,S.payAccountData={},S.payAccountData.ctrlData={},S.payAccountData.ctrlData.title="请选择付款账户",S.payAccountData.ctrlData.canBindNewCard=!0,S.payAccountData.otherBankAccount={};var a=u.getPayableCardList();S.payAccountData.otherBankAccount.cardInfo={},S.payAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.INVALID_TYPE;var n=u.isTransVerificationAccount();n&&(S.payAccountData.ctrlData.canBindNewCard=!1);var c=u.getUnableToPayCardList();if(c&&c.length>0&&(S.payAccountData.disabledOtherBankAccount=c),a&&a.length>0)if(S.payAccountType)S.payAccountData.ctrlData.accountType=S.payAccountType;else{S.payAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.OTHER_BANK_CARD,S.payAccountData.otherBankAccount.otherAccountList=a;var o=a[0];for(var r in a)if(a[r].other_account==Y){o=a[r];break}S.payAccountData.otherBankAccount.cardInfo.bankBinCode=o.other_bank_bin_code,S.payAccountData.otherBankAccount.cardInfo.userName=o.other_name,S.payAccountData.otherBankAccount.cardInfo.cardNo=o.other_account,S.payAccountData.otherBankAccount.cardInfo.cardTypeCode=o.other_card_type_code,S.payAccountData.otherBankAccount.cardInfo.cardType=o.other_card_type,S.payAccountData.otherBankAccount.cardInfo.bankName=o.other_bank_name}else S.transType==A.TRANS_TYPE.WEBANK_CARD?S.payAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.CURRENT_PLUS:S.transType==A.TRANS_TYPE.CURRENT_PLUS&&(S.payAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.WEBANK_CARD);S.transType==A.TRANS_TYPE.WEBANK_CARD?(S.recvAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.WEBANK_CARD,S.payAccountData.currentPlus={},S.payAccountData.currentPlus.amount=g.HJAmount,S.payAccountData.currentPlus.priority=1,S.payAccountData.currentPlus.isAvaliable=!0):S.transType==A.TRANS_TYPE.CURRENT_PLUS?(S.recvAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.CURRENT_PLUS,S.payAccountData.webankAccount={},S.payAccountData.webankAccount.priority=2,S.payAccountData.webankAccount.amount=g.BankAmount,S.payAccountData.webankAccount.isAvaliable=!0):S.recvAccountData.ctrlData.accountType=A.ACCOUNT_TYPE.CURRENT_PLUS,t.$watch("data.recvAccountData.ctrlData.accountType",function(){S.payAccountData.unionPay=S.showUnionPay&&e.checkAbility(A.APP_ABILITY.ABILITY_INAPPBROWSERHIDEBACK)&&S.recvAccountData.ctrlData.accountType===A.ACCOUNT_TYPE.WEBANK_CARD&&a&&a.length>0?{priority:9999}:void 0}),t.$watch("data.payAccountData.ctrlData.accountType",function(){S.recvAccountData.currentPlus=S.payAccountData.ctrlData.accountType!==A.ACCOUNT_TYPE.UNION_PAY?{amount:g.HJAmount,priority:1,isAvaliable:!0}:void 0})},ya=function(){S.transDesc=S.transType==A.TRANS_TYPE.WEBANK_CARD?"您可以将绑定银行卡中的资金转入到微众卡中，获得更高收益":S.transType==A.TRANS_TYPE.CURRENT_PLUS?"您可以将绑定银行卡中的资金转入到活期+中，获得更高收益":"您可以将绑定银行卡中的资金转入到活期+或微众卡中，获得更高收益"},Pa=function(){if(S.currentPlusPurchaseLimitDesc="",S.currentPlusRedeemFreqLimitDesc="",S.currentPlusRedeemAmountLimitDesc="本次最多可转入"+parseFloat(g.HJAmount).toFixed(2)+"元",w&&w.finance_wealth&&w.finance_wealth.balance_cycle&&w.finance_wealth.balance_cycle.length>=1){var t=w.finance_wealth.balance_cycle[0];S.currentPlusPurchaseLimitDesc="今天还可转入到活期+ "+(parseInt(t.day_max_buy_num)-parseInt(t.day_buy_num))+"次，",S.currentPlusRedeemFreqLimitDesc="今天还可从活期+转出 "+(parseInt(t.day_max_redeem_num)-parseInt(t.day_redeem_num))+"次，"}},Ea=function(){return void 0==S.amount||null==S.amount||""==S.amount||0==S.amount?void(S.isAmountTipShown=!1):void(e.isValidTransferAmount(S.amount)?j()?(S.amountTipText="超出限额",S.isAmountTipShown=!0):S.isAmountTipShown=!1:(S.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,S.isAmountTipShown=!0))},Ra=function(){var t=S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD,a=S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD;if(t||a)if(t){if(u.isBankCardInBatchProcessing(S.payAccountData.otherBankAccount.cardInfo.bankBinCode)){var n=u.getBankBatchProcessingMsg(S.payAccountData.otherBankAccount.cardInfo.bankBinCode,S.payAccountData.otherBankAccount.cardInfo.bankName);ua(n)}}else if(a&&u.isBankCardInBatchProcessing(S.recvAccountData.otherBankAccount.cardInfo.bankBinCode)){var e=u.getBankBatchProcessingMsg(S.recvAccountData.otherBankAccount.cardInfo.bankBinCode,S.recvAccountData.otherBankAccount.cardInfo.bankName);ua(e)}},Na=function(){if(S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=z(S.payAccountData.otherBankAccount.cardInfo.bankBinCode);S.otherBankPayLimit=t?t.perOne:null}else S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD&&(S.webankCardPayLimit=g.BankAmount)},ma=function(){return w&&w.finance_wealth&&w.finance_wealth.balance_cycle&&w.finance_wealth.balance_cycle.length>=1?w.finance_wealth.balance_cycle[0]:void 0},fa=function(){var t=ma();return void 0==t?!1:S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?0==parseInt(t.day_max_redeem_num)?!1:parseInt(t.day_max_redeem_num)-parseInt(t.day_redeem_num)<=0:S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?0==parseInt(t.day_max_buy_num)?!1:parseInt(t.day_max_buy_num)-parseInt(t.day_buy_num)<=0:!1},ha=function(){if(S.currentPlusPurchaseLimitDesc="",S.currentPlusRedeemFreqLimitDesc="",S.webankCardAmount=g.BankAmount,S.HJAmount=g.HJAmount,w&&w.finance_wealth&&w.finance_wealth.balance_cycle&&w.finance_wealth.balance_cycle.length>=1){var t=w.finance_wealth.balance_cycle[0];S.currentPlusRedeemRemainTimes=parseInt(t.day_max_redeem_num)-parseInt(t.day_redeem_num),S.currentPlusPurchaseRemainTimes=parseInt(t.day_max_buy_num)-parseInt(t.day_buy_num)}},ka=function(a){p.getRedPacket({update:a}).then(function(a){a&&a.data&&a.status==A.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&a.data.length>0&&(t.redPacketNum=0,$.each(a.data,function(a,n){n.selected&&(t.redPacketAmount=n.amount),2==n.status&&t.redPacketNum++}))})},Sa=function(){K(),na(),Da(),ya(),H(),W(),Pa(),ha(),Ra(),Na(),k()};S.isPwdShow=!1,S.isPwdAutoShow=!1,S.showUnionPay=!0,S.transType=T.getData()&&T.getData().type,S.payAccountType=T.getData()&&T.getData().payAccountType,S.payAccountFixed=T.getData()&&T.getData().payAccountFixed,T.setData(null),S.ACCOUNT_TYPE=A.ACCOUNT_TYPE,B.getRecvAccount=function(){return S.recvAccountData.ctrlData.accountType},B.getPayAccount=function(){return S.payAccountData.ctrlData.accountType},B.getCurrentBankLimit=function(){var t=gBankLimit[S.payAccountData.otherBankAccount.cardInfo.bankBinCode];return t?t.perOne:-1},B.bindCard=function(){R.goToBindCard()},B.onSelectPayWay=function(){S.payAccountFixed||B.showPaymentAccountSelector()},B.onSelectReceiveWay=function(){B.isRecvAccountShown()&&B.showReceivableAccountSelector()},B.onClickConfirmTransIn=function(){e.clickButtonReport("zhuanru_zhuanru"),e.reportCustomEvent(A.REPORT_EVENT_NAME.TRANSFER_IN,A.TRANSFER_IN_STATISTIC.CLICK_TRANS_IN+S.payAccountData.ctrlData.accountType+"_"+S.recvAccountData.ctrlData.accountType);var t=Ua();if(t==U)return void e.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short");if(t!=I&&da()){if(j()){var a=z(S.payAccountData.otherBankAccount.cardInfo.bankBinCode);return S.outValue={},S.outValue.showPop=!0,S.outValue.oneLineTextLeft="超过银行卡限额，"+S.payAccountData.otherBankAccount.cardInfo.bankName+S.payAccountData.otherBankAccount.cardInfo.cardType+"单笔"+a.perOne,parseFloat(a.perDay)>0&&(S.outValue.oneLineTextLeft+="，单日"+a.perDay),S.outValue.oneLineTextLeft+="。如需要大额度购买，请先转账至微众卡。",S.outValue.twoButtonText1="转账指引",S.outValue.twoButtonText2="关闭",void(S.outValue.popClose=function(t){1==t&&y.goPage("0")})}X()&&pa()}},B.onPwdSelectPayWay=function(){S.isPwdShow?(S.isPwdAutoShow=!0,S.isPwdShow=!1):S.isPwdAutoShow=!1,L=!0,B.showPaymentAccountSelector()},B.updateButtonClass=function(){return S.buttonClass=Ua()==v?"p-btn p-btn-block":"p-btn p-btn-block off",!1},B.onPayAccountSelected=function(){L&&(L=!1,pa()),Na(),Ea(),Ra()},B.back=function(){T.backPage()},t.$watch("sigOnPwdCommit",function(t,a){t!==a&&(S.isPwdShow=!1,Ca())}),B.onInputBlur=function(){Ea()},B.isRecvAccountShown=function(){return S.transType!=A.TRANS_TYPE.WEBANK_CARD&&S.transType!=A.TRANS_TYPE.CURRENT_PLUS};var Ba=function(){return S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?parseFloat(g.HJAmount):S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.WEBANK_CARD?parseFloat(g.BankAmount):null};B.onClickTransAll=function(){S.amount=Ba()},B.isTransAllBtnShown=function(){return B.getPayAccount()!=S.ACCOUNT_TYPE.WEBANK_CARD&&B.getPayAccount()!=S.ACCOUNT_TYPE.CURRENT_PLUS?!1:Ba()>0},B.onClickCurrentPlusDetails=function(){E.go("/monetaryMoreIncomeRules/001234")},B.onClickUnionPayLimit=function(){E.go("/unionPayLimit")},B.onAmountChanged=function(){Ea()};var Ua=function(){var t=I;return S.payAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.INVALID_TYPE||S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.INVALID_TYPE||j()||!S.amount||fa()||(t=U),t&&(S.recvAccountData.ctrlData.accountType==A.ACCOUNT_TYPE.CURRENT_PLUS?S.isAgreed&&(t=v):t=v),t};B.onClickSelectRedPacket=function(){E.go("/redPacketList")},t.onHJViewActive=function(){var t=E.getBackData();S.amount="","redPacketListPage"==t?(t="",ka()):ka(!0),Da()},t.onHJViewDisActive=function(){},Sa(),ka(!0)}]);app.controller("UnionPayLimitController",["$scope","LocationService",function(i,a){i.data={},i.func={},i.data.limitList=[{bank:"工商银行",transLimit:"2万",dayLimit:"5万"},{bank:"农业银行",transLimit:"2万",dayLimit:"5万"},{bank:"中国银行",transLimit:"5000",dayLimit:"5000"},{bank:"建设银行",transLimit:"1万",dayLimit:"月累计限额5万"},{bank:"交通银行",transLimit:"2万",dayLimit:"2万"},{bank:"邮储银行",transLimit:"5000",dayLimit:"5000"},{bank:"招商银行",transLimit:"5000",dayLimit:"5000"},{bank:"光大银行",transLimit:"2万",dayLimit:"5万"},{bank:"中信银行",transLimit:"5000",dayLimit:"5万"},{bank:"华夏银行",transLimit:"2万",dayLimit:"5万"},{bank:"浦发银行",transLimit:"通过银联在线支付开通1000元；通过银行网银开通2万",dayLimit:"通过银联在线支付开通1000元；通过银行网银开通5万"},{bank:"民生银行",transLimit:"2000",dayLimit:"2000"},{bank:"广发银行",transLimit:"2万",dayLimit:"5万"},{bank:"兴业银行",transLimit:"2万",dayLimit:"5万"},{bank:"上海银行",transLimit:"5000",dayLimit:"5万"},{bank:"北京银行",transLimit:"通过银联在线支付开通5000元，通过银行网银开通2万",dayLimit:"通过银联在线支付开通5000元，通过银行网银开通2万"},{bank:"平安银行",transLimit:"（含深发）	2万	",dayLimit:"2万"},{bank:"晋中银行",transLimit:"2万",dayLimit:"5万"}],i.func.back=function(){a.backPage()}}]);var SEARCH_PARAM_TYPE={INVALID_TYPE:-1,PAYEE:0};app.controller("TransferOutControllerV2",["$scope","$location","$stateParams","utils","cgiService","essential","cache","webankCommonService","GLOBAL_CONSTANT","BindNewCardService1","ResetPasswdService","TransferOutServiceV2","MonetaryService","RecentAccountService","TransferOutAccountSelectorService","TransferOtpService","$timeout","TransferOutResultService","dataService","LocationService","HJactionLoading","BindBankCardService",function(t,a,n,c,e,o,r,u,i,s,A,_,T,d,l,C,D,p,m,R,N,E){var f=t.data={},P=t.func={};f.buttonClass="p-btn p-btn-block off";var S=1,v=0,y=2,k="",h=0,B=r.getCacheInfo("wealthNew"),g=u.parseRawWealthData_V3(B);f.mainCard={};var I=r.getCacheInfo("personalInfo");null!=I&&I.webank_card_no&&(f.mainCard.number=I.webank_card_no);var U=null;f.isRecvCardSupported=!0;var w={},L=!1,O="",b="",Y=function(){k="",h=0,f.buttonClass="p-btn p-btn-block off",w={},L=!1},V=function(){var t=null,a=new Date;c.isWorkDay(a)&&a.getHours()<15?(t=c.getNextWorkDay(1),t.setDate(t.getDate()+1)):(t=c.getNextWorkDay(2),t.setDate(t.getDate()+1)),f.currentPlusAccountDesc=t.getMonth()+1+"-"+t.getDate()+" ("+c.getWeekdayByDate(t)+")"},F=function(){var t=0;f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD?t=g.BankAmount:f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS&&(t=g.HJAmount);var a=parseFloat(f.transLimitVal);return isNaN(a)?t:Math.min(a,parseFloat(t)).toFixed(2)},K=function(){if(U&&""!=U){var t=U.cardNo,a=U.userName,n=U.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD;t&&a&&n?(f.recvAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.OTHER_BANK_CARD,f.recvAccountData.otherBankAccount.cardInfo.userName=a,f.recvAccountData.otherBankAccount.cardInfo.cardNo=t):f.recvAccountData.ctrlData.accountType=U.accountType}},x=function(){f.recvAccountData={},f.recvAccountData.ctrlData={},f.recvAccountData.ctrlData.title="请选择收款账户",f.recvAccountData.ctrlData.canBindNewCard=!0;var t=u.getValidBandCardList();f.recvAccountData.otherBankAccount={},f.recvAccountData.otherBankAccount.cardInfo={},f.recvAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.INVALID_TYPE,f.recvAccountData.otherBankAccount.otherAccountList=t;var a=null,n=null;a&&n&&(f.recvAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.OTHER_BANK_CARD,f.recvAccountData.otherBankAccount.cardInfo.userName=n,f.recvAccountData.otherBankAccount.cardInfo.cardNo=a),f.payAccountData={},f.payAccountData.webankAccount={},f.payAccountData.webankAccount.priority=0,f.payAccountData.webankAccount.amount=g.BankAmount,f.payAccountData.webankAccount.isAvaliable=!0,f.payAccountData.currentPlus={},f.payAccountData.currentPlus.amount=g.HJAmount,f.payAccountData.currentPlus.priority=1,f.payAccountData.currentPlus.isAvaliable=!0,f.payAccountData.ctrlData={},f.payAccountData.ctrlData.title="请选择付款账户",f.payAccountData.ctrlData.canBindNewCard=!1,f.payAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.INVALID_TYPE,f.transType==i.TRANS_TYPE.WEBANK_CARD?(f.payAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.WEBANK_CARD,f.canPwdFrameChangePayWay=!1,f.recvAccountData.currentPlus={},f.recvAccountData.currentPlus.amount=g.HJAmount,f.recvAccountData.currentPlus.priority=1,f.recvAccountData.currentPlus.isAvaliable=!0):f.transType==i.TRANS_TYPE.CURRENT_PLUS?(f.payAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.CURRENT_PLUS,f.canPwdFrameChangePayWay=!1,f.recvAccountData.webankAccount={},f.recvAccountData.webankAccount.priority=2,f.recvAccountData.webankAccount.amount=g.BankAmount,f.recvAccountData.webankAccount.isAvaliable=!0):f.payAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.CURRENT_PLUS},H=function(){return parseFloat(f.transLimitVal)<parseFloat(f.amount)?(c.makeToast("输入金额超过最大转出额"),!1):!0},M=function(){f.transDesc=f.transType==i.TRANS_TYPE.WEBANK_CARD?"您可以将微众卡中的资金转出到绑定银行卡，实时到账":f.transType==i.TRANS_TYPE.CURRENT_PLUS?"您可以将活期+中的资金转出到绑定银行卡，实时到账":"您可以将活期+和微众卡中的资金转出到绑定银行卡，实时到账"},G=function(){return f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD?"微众卡":f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS?"活期+":""},W=function(){if(f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD)return"微众卡";if(f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS)return"活期+";var t="";return t+=f.recvAccountData.otherBankAccount.cardInfo.bankName,t+=f.recvAccountData.otherBankAccount.cardInfo.cardType,t+=c.abridgeAccountNumber(f.recvAccountData.otherBankAccount.cardInfo.cardNo)},q=function(){var t="转出到";t+=W(),f.pwdSubTitle=t,f.pwdTransDesc=parseFloat(f.amount).toFixed(2)+"元";var a="使用";a+=G(),a+="付款",f.payWayDesc=a,f.isPwdShow=!0},J=function(){k&&w.transSerno?(N.show(),redPacketError=1,e.requestRedPacketStatus(w.transSerno).then(function(t){N.hide();var a=!1;t&&t.ret_data&&t.ret_data.red_packet_status_list&&t.ret_data.red_packet_status_list.length>0&&$.each(t.ret_data.red_packet_status_list,function(t,n){n.orig_busi_seq==w.transSerno&&(3==n.red_packet_status?a=!0:4==n.red_packet_status&&(redPacketError=2))}),m.clearPackageCache(),a?w.redPacketAmount=h:w.redPacketError=redPacketError,c.clearCurrentViewCache(),p.goPage(null,w)},function(){m.clearPackageCache(),N.hide(),w.redPacketError=1,c.clearCurrentViewCache(),p.goPage(null,w)}),k=""):(c.clearCurrentViewCache(),p.goPage(null,w)),w.result!=i.TRANS_STATE.FAILURE&&la()},X=function(t){return f.outValue={},f.outValue.showPop=!0,f.outValue.oneLineTextLeft=t,f.outValue.oneButtonText="知道了",f.outValue.popClose=function(){},!0},Q=function(t,a){f.outValue={},f.outValue.showPop=!0,f.outValue.oneLineTextLeft=t,f.outValue.twoButtonText1="终止",f.outValue.twoButtonText2="继续",f.outValue.popClose=function(t){2==t?D(function(){_.saveSession(f),C.goPage(null,null,{otpSession:a,usage:i.TRANS_OTP_SCENE.TRANS_OUT})},200):f.ignoreRiskSession=""}},z=function(t){f.showLoading=!1,w.result=t.retCode,t.retCode==i.CGI_RET.CGI_UNKNOW_ERROR?X(t.retMsg):J()},Z=function(t,a,n){u.checkProcessingState(t,a,n).then(z)},j=function(t,a){u.isRetCodePwdRetry(t)?(f.outValue={},f.outValue.showPop=!0,f.outValue.oneLineTextLeft=a,f.outValue.twoButtonText1="重试",f.outValue.twoButtonText2="忘记密码",f.outValue.popClose=function(t){1==t?f.isPwdShow=!0:2==t&&A.goPage()}):(f.outValue={},f.outValue.showPop=!0,f.outValue.oneLineTextLeft=a,f.outValue.twoButtonText1="取消",f.outValue.twoButtonText2="忘记密码",f.outValue.popClose=function(t){1==t||2==t&&A.goPage()})},ta=function(t){w.result=t.ret_code,w.transSerno=t.ret_data.trans_serno,u.isProcessingState(t.ret_code)?Z(i.ORDER_QUERY_TYPE.REDEEM,t.ret_data.trans_serno,"001234"):(f.showLoading=!1,J())},aa=function(t){f.showLoading=!1,w.result=t.ret_code,w.failReason=t.ret_msg,u.isRetCodePwd(t.ret_code)?j(t.ret_code,t.ret_msg):t.ret_code==i.CGI_RET.CGI_RET_TRANS_NEED_OTP?(_.saveSession(f),C.goPage(null,null,{otpSession:t.ret_data.otp_params_session,usage:i.TRANS_OTP_SCENE.TRANS_OUT})):t.ret_code==i.CGI_RET.CGI_RET_TRANS_GRAY_LIST?(f.ignoreRiskSession=t.ret_data.ignore_session,Q(t.ret_msg,t.ret_data.otp_params_session)):X(t.ret_msg),b=""},na=function(t){f.showLoading=!1,w.result=t.ret_code,w.failReason=t.ret_msg,u.isRetCodePwd(t.ret_code)?j(t.ret_code,t.ret_msg):X(t.ret_msg)},ca=function(t){w.result=t.ret_code,w.transSerno=t.ret_data.trans_serno,u.isProcessingState(t.ret_code)?Z(i.ORDER_QUERY_TYPE.PURCHASE,t.ret_data.trans_serno,"001234"):(f.showLoading=!1,J())},ea=function(){var a={};a.use_webank_card=!0,a.transaction_amount=f.amount,a.product_code="001234",a.user_pwd=f.pwdRSA,a.remark="购买货基",t.redPacketAmount&&m.getPackageId(function(t){t&&(a.red_packet_id=t.redPacketID,k=t.redPacketID,h=t.amount)}),e.requestPurchaseMonetaryFund(a).then(ca,na)},oa=function(){var t=f.recvAccountData.otherBankAccount.cardInfo,a={};f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD?a.use_webank_card=!0:(a.use_webank_card=!1,a.bank_code=t.bankBinCode,a.card_no=t.cardNo,a.name=f.recvAccountData.otherBankAccount.cardInfo.userName),a.user_pwd=f.pwdRSA,a.transaction_amount=f.amount,a.product_code="001234",a.remark="赎回货基",a.phone_check_num=b,a.ignore_risk=""!=f.ignoreRiskSession,a.ignore_session=f.ignoreRiskSession,e.requestRedeemMonetaryFund(a).then(ta,aa)},ra=function(t){w.result=t.ret_code,u.isProcessingState(t.ret_code)?Z(i.ORDER_QUERY_TYPE.TRANSOUT,t.ret_data.trans_serno,""):(f.showLoading=!1,J())},ua=function(t){f.showLoading=!1,w.result=t.ret_code,w.failReason=t.ret_msg,u.isRetCodePwd(t.ret_code)?j(t.ret_code,t.ret_msg):t.ret_code==i.CGI_RET.CGI_RET_TRANS_NEED_OTP?(_.saveSession(f),C.goPage(null,null,{otpSession:t.ret_data.otp_params_session,usage:i.TRANS_OTP_SCENE.TRANS_OUT})):t.ret_code==i.CGI_RET.CGI_RET_TRANS_GRAY_LIST?(f.ignoreRiskSession=t.ret_data.ignore_session,Q(t.ret_msg,t.ret_data.otp_params_session)):X(t.ret_msg),b=""},ia=function(){var t=f.recvAccountData.otherBankAccount.cardInfo;e.requestBaseAccountTransOut(t.userName,t.bankName,t.cardNo,f.amount,f.pwdRSA,"单笔转出",b,f.ignoreRiskSession).then(ra,ua)},sa=function(){f.showLoading=!0,w.transAmount=f.amount,w.accountType=f.recvAccountData.ctrlData.accountType,w.bankName=f.recvAccountData.otherBankAccount.cardInfo.bankName,w.cardNo=f.recvAccountData.otherBankAccount.cardInfo.cardNo,w.cardType=f.recvAccountData.otherBankAccount.cardInfo.cardType,w.userName=f.recvAccountData.otherBankAccount.cardInfo.userName,w.payAccountDesc=G(),w.recvAccountDesc=W(),w.transType=f.transType,w.payAccountData=f.payAccountData,w.recvAccountData=f.recvAccountData,f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD&&f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD?ia():f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS?oa():f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD&&f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS&&ea(),f.ignoreRiskSession=""},Aa=function(){return c.isValidTransferAmount(f.amount)&&f.amount?f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.INVALID_TYPE?(c.makeToast(STRING_TABLE.INVALID_RECV_ACCOUNT),!1):f.isRecvCardSupported?!0:(c.makeToast(STRING_TABLE.RECV_ACCOUNT_NOT_SUPPORTED),!1):(c.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1)},_a=function(){var t=null;f.transType==i.TRANS_TYPE.WEBANK_CARD?t="webankCard":f.transType==i.TRANS_TYPE.CURRENT_PLUS&&(t="monetaryMyProdDetail/001234"),w.callback=f.callback=t},Ta=function(){if(pa()){var t=f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD,a=f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD;if(t||a)if(t){if(u.isBankCardInBatchProcessing(f.payAccountData.otherBankAccount.cardInfo.bankBinCode)){var n=u.getBankBatchProcessingMsg(f.payAccountData.otherBankAccount.cardInfo.bankBinCode,f.payAccountData.otherBankAccount.cardInfo.bankName);X(n)}}else if(a&&u.isBankCardInBatchProcessing(f.recvAccountData.otherBankAccount.cardInfo.bankBinCode)){var c=u.getBankBatchProcessingMsg(f.recvAccountData.otherBankAccount.cardInfo.bankBinCode,f.recvAccountData.otherBankAccount.cardInfo.bankName);X(c)}}},da=function(){f.isAgreed=!0,f.agreementDesc="服务协议及风险提示",f.agreementCode="001234"},la=function(){f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD&&d.saveRecentlyUsedBankCard(i.ACCOUT_BIZ_TYPE.PAYMENT,f.payAccountData.otherBankAccount.cardInfo.cardNo),f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD&&d.saveRecentlyUsedAccountInfo(i.ACCOUT_BIZ_TYPE.RECEIVABLE,f.recvAccountData.otherBankAccount.cardInfo.cardNo,f.recvAccountData.otherBankAccount.cardInfo.userName)},Ca=function(){return void 0==f.amount||null==f.amount||""==f.amount||0==f.amount?void(f.isAmountTipShown=!1):void(c.isValidTransferAmount(f.amount)?parseFloat(f.transLimitVal)<parseFloat(f.amount)?(f.amountTipText=STRING_TABLE.AMOUNT_EXCEED_OUT_LIMIT,f.isAmountTipShown=!0,f.isPwdShow=!1):f.isAmountTipShown=!1:(f.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,f.isAmountTipShown=!0,f.isPwdShow=!1))},Da=function(){var t=C.getData();return C.setData(null),t&&t.otp?(b=t.otp,void sa()):void(f.ignoreRiskSession="")},pa=function(){return""==b},ma=function(){if(null!=_.getSession()){f=t.data=_.getSession(),_.clearSession();var a=R.getBackData();"redPacketListPage"==a?(a="",ga()):ga(!0)}else ga(!0)},Ra=null,Na=0,Ea=1/0,fa=0,Pa=function(){U=l.getBackData(),l.setBackData(null),f.isTransLimitTextShown=!1,f.transLimitVal=1/0,f.accountDayLimit=null,f.accoutRemainLimit=null,Ra=null,Na=0,Ea=1/0,fa=0,f.isPwdShow=!1,f.isPwdAutoShow=!1,f.canPwdFrameChangePayWay=!0,f.transType=_.getData()&&_.getData().type,_.setData(null),f.ACCOUNT_TYPE=i.ACCOUNT_TYPE,f.isConfirmBoxShown=!1,o.dimStatusBarBackground(!1),f.ignoreRiskSession=""},Sa=function(){if(f.currentPlusRedeemFreqLimitDesc="",B&&B.finance_wealth&&B.finance_wealth.balance_cycle&&B.finance_wealth.balance_cycle.length>=1){var t=B.finance_wealth.balance_cycle[0];Ea=0==t.day_max_redeem_amount?1/0:t.day_max_redeem_amount,fa=parseFloat(Ea)-parseFloat(t.day_redeem_amount);var a=0==t.day_max_redeem_num?1/0:t.day_max_redeem_num;1/0!=a&&(f.currentPlusRedeemFreqLimitDesc="今天还可从活期+转出 "+(parseInt(a)-parseInt(t.day_redeem_num))+"次，"),f.isCurrentPlusLimitShown=!0,f.currentPlusRedeemRemainTimes=parseInt(t.day_max_redeem_num)-parseInt(t.day_redeem_num),f.currentPlusPurchaseRemainTimes=parseInt(t.day_max_buy_num)-parseInt(t.day_buy_num)}if(null==f.accountDayLimit||null==f.accoutRemainLimit)return void(f.isTransLimitTextShown=!1);var n=f.accoutRemainLimit;ya()||(n=1/0);var c=!1;f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD?(Na=parseFloat(g.BankAmount),c=!1):f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS&&(Na=parseFloat(g.HJAmount),c=!0);var e=1/0;Ra&&(e=5e4),f.transLimitVal=Math.min(Na,e,n,c?fa:1/0),parseFloat(f.transLimitVal)<=0&&(f.transLimitVal=0),f.transLimitVal=parseFloat(f.transLimitVal).toFixed(2),f.isTransLimitTextShown=!0},va=function(){f.transLimitVal=1/0,f.isTransLimitTextShown=!1},ya=function(){if(f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD||f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS)return!1;if(f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.OTHER_BANK_CARD){var t=f.recvAccountData.otherBankAccount.cardInfo.cardNo;if(u.findCardFromPayableCardList(t))return!1}return!0},ka=function(t){f.accountDayLimit=t.ret_data.day_limit_maxs_amount,f.accoutRemainLimit=t.ret_data.day_limit_banbance,Sa()},ha=function(){},Ba=function(){var t=r.getCacheInfo("accountLimmit");t||e.requestUserSettings("LIMIT00008").then(ka,ha)},ga=function(a){m.getRedPacket({update:a}).then(function(a){a&&a.data&&a.status==i.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&a.data.length>0&&(t.redPacketNum=0,$.each(a.data,function(a,n){n.selected&&(t.redPacketAmount=n.amount),2==n.status&&t.redPacketNum++}))})},Ia=function(){Y(),Pa(),Ba(),_a(),x(),ma(),K(),M(),V(),da(),Da(),Ta(),Ya(),Sa()},Ua=function(t){c.loadImage("../img/bankHead/yh-"+(t||0)+"@nb.png",function(t,a){D(function(){f.bankImg=t?a:""})})},wa={CHECK_SIX_NUMBER:0,CHECK_TEN_NUMBER:1,CHECK_TOTAL_NUMBER:2},La=wa.CHECK_SIX_NUMBER,Oa=function(t){f.recvAccountData.otherBankAccount.cardInfo.bankBinCode=t.ret_data.clear_no_pbc,Ua(f.recvAccountData.otherBankAccount.cardInfo.bankBinCode),f.recvAccountData.otherBankAccount.cardInfo.cardTypeCode=t.ret_data.card_typeid,f.recvAccountData.otherBankAccount.cardInfo.cardType=t.ret_data.card_type,f.recvAccountData.otherBankAccount.cardInfo.bankName=t.ret_data.bank_name,Ra=t.ret_data.b_sib_channel,Sa(),Ca(),f.isRecvCardSupported=!0},ba=function(t){f.recvAccountData.otherBankAccount.cardInfo.bankBinCode="",f.recvAccountData.otherBankAccount.cardInfo.cardTypeCode="",f.recvAccountData.otherBankAccount.cardInfo.cardType="",f.recvAccountData.otherBankAccount.cardInfo.bankName="",va(),t.ret_code==i.CGI_RET.CGI_UNUSED_CARD||t.ret_code==i.CGI_RET.CGI_UNUSED_CARD_2?La==wa.CHECK_SIX_NUMBER?(La++,f.isRecvCardSupported=!0):La==wa.CHECK_TEN_NUMBER&&(f.isRecvCardSupported=!1):t.ret_code==i.CGI_RET.CGI_NEED_MORE_CARD_NO||t.ret_code==i.CGI_RET.CGI_NEED_MORE_CARD_NO_2?(f.isRecvCardSupported=!0,La=wa):f.isRecvCardSupported=!1},Ya=function(){var t=f.recvAccountData.otherBankAccount.cardInfo.cardNo;if(!t||t.length<6)return f.isRecvCardSupported=!0,f.recvAccountData.otherBankAccount.cardInfo.bankBinCode="",f.recvAccountData.otherBankAccount.cardInfo.cardTypeCode="",f.recvAccountData.otherBankAccount.cardInfo.cardType="",f.recvAccountData.otherBankAccount.cardInfo.bankName="",va(),La=wa.CHECK_SIX_NUMBER,a="",void(O="");if(La==wa.CHECK_SIX_NUMBER){var a=t.substr(0,6);if(a==O)return;O=a}else if(La==wa.CHECK_TEN_NUMBER){if(t.length<10)return;var n=t.substr(0,10);if(n==O)return;O=n}else La==wa.CHECK_TOTAL_NUMBER;Va(t)},Va=function(t){Fa(),va(),e.requestBankInfo(t,"trans_out").then(Oa,ba)},Fa=function(){f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.INVALID_TYPE&&f.recvAccountData.otherBankAccount.cardInfo.userName&&""!=f.recvAccountData.otherBankAccount.cardInfo.userName&&f.recvAccountData.otherBankAccount.cardInfo.cardNo&&""!=f.recvAccountData.otherBankAccount.cardInfo.cardNo&&(f.recvAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.OTHER_BANK_CARD)};P.canInputRecvCardNoAndUserName=function(){var t=f.recvAccountData.ctrlData.accountType;return t==i.ACCOUNT_TYPE.INVALID_TYPE||t==i.ACCOUNT_TYPE.OTHER_BANK_CARD},P.isLimitPromptShown=function(){return f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.WEBANK_CARD?parseFloat(g.BankAmount)>parseFloat(f.transLimitVal):f.payAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS?parseFloat(g.HJAmount)>parseFloat(f.transLimitVal):void 0},P.onClickTransLimitDesc=function(){var t=parseFloat(f.transLimitVal),a="";if(t>Na)return void X("账户余额不足");var n=1/0;Ra&&(n=Math.abs(5e4-t));var c=Math.abs(f.accountDayLimit-t),e=Math.abs(fa-t),o=Math.min(n,c,e);parseFloat(f.accoutRemainLimit)<=0&&(f.accoutRemainLimit=0),parseFloat(fa)<=0&&(fa=0),o==n?a="转出到该银行单笔限额50,000.00元。若需转出大于50,000.00元，可分笔转出。":o==c?a="账户每日转出限额"+parseFloat(f.accountDayLimit).toFixed(2)+"元，今天还可转出"+parseFloat(f.accoutRemainLimit).toFixed(2)+"元。":o==e&&1/0!=Ea&&(a="活期+每日转出限额"+parseFloat(Ea).toFixed(2)+"元，今天还可转出"+parseFloat(fa).toFixed(2)+"元"),X(a)},P.onClickClearRecvAccount=function(){f.recvAccountData.ctrlData.accountType=i.ACCOUNT_TYPE.INVALID_TYPE},P.getPayAccount=function(){return f.payAccountData.ctrlData.accountType},P.getRecvAccount=function(){return f.recvAccountData.ctrlData.accountType},P.updateButtonClass=function(){return xa()!=y?"btn-c off":(f.buttonClass="p-btn p-btn-block",!1)},P.onRecvCardChanged=function(){f.recvAccountData.otherBankAccount.cardInfo.cardNo&&(f.recvAccountData.otherBankAccount.cardInfo.cardNo=f.recvAccountData.otherBankAccount.cardInfo.cardNo.replace(/\s/g,"")),Ya(),Sa()},P.bindCard=function(){_.saveSession(f),E.goToBindCard()},P.onSelectPayWay=function(){P.isPayAccountShown()&&P.showPaymentAccountSelector()},P.getPayAccountItemStyle=function(){return f.transType==i.TRANS_TYPE.WEBANK_CARD||f.transType==i.TRANS_TYPE.CURRENT_PLUS?"item right":"allow-enter item right"},P.onSelectReceiveWay=function(){P.showReceivableAccountSelector()},P.onClickNextStep=function(){c.clickButtonReport("zhuanchu_zhuanchu");var t=xa();return t==S?void c.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"):void(t!=v&&(Fa(),Aa()&&H()&&D(function(){f.isConfirmBoxShown=!0,o.dimStatusBarBackground(!0)},50)))},P.onPwdSelectPayWay=function(){f.isPwdShow?(f.isPwdAutoShow=!0,f.isPwdShow=!1):f.isPwdAutoShow=!1,L=!0,P.showPaymentAccountSelector()},P.onPayAccountSelected=function(){L&&(L=!1,q()),Sa(),Ca()},P.onRecvAccountSelected=function(){Ta()},P.onClickTransAll=function(){f.amount=parseFloat(F())},P.isTransAllBtnShown=function(){return f.recvAccountData&&f.recvAccountData.ctrlData?parseFloat(F())>0&&f.recvAccountData.ctrlData.accountType!=i.ACCOUNT_TYPE.OTHER_BANK_CARD&&f.recvAccountData.ctrlData.accountType!=i.ACCOUNT_TYPE.INVALID_TYPE:!1},P.back=function(){_.backPage()},P.isPayAccountShown=function(){return f.transType!=i.TRANS_TYPE.WEBANK_CARD&&f.transType!=i.TRANS_TYPE.CURRENT_PLUS},P.onClickCurrentPlusDetails=function(){_.saveSession(f),R.go("/monetaryMoreIncomeRules/001234")},P.onClickSelectPayee=function(){_.saveSession(f);var t={scene:TRANS_ACCOUNT_SELECTOR_SCENE.TRANS_OUT,transType:f.transType};l.goPage("",t)},P.onInputBlur=function(){Ca()},P.onCancelTransOutConfirm=function(){f.isConfirmBoxShown=!1,o.dimStatusBarBackground(!1)},P.onClickConfirmTransOut=function(){f.isConfirmBoxShown=!1,o.dimStatusBarBackground(!1),q()},P.onClickBankInfo=function(){},P.isStrongAccount=function(){return u.isStrongAccount()},f.isScrolling=!1,P.onScrollComplete=function(){f.isScrolling=!1,t.$apply(function(){f.isScrolling=!1})};var Ka=null;P.onScroll=function(){Ka&&D.cancel(Ka),f.isScrolling=!0,t.$apply(),Ka=D(function(){t.$apply(function(){f.isScrolling=!1})},50)},P.getChineseAmount=function(){return c.convertCurrencyToChineseStyle(f.amount)},P.onAmountChanged=function(){Ca()};var xa=function(){Fa();var t=v;return f.amount&&c.isValidTransferAmount(f.amount)&&f.recvAccountData.ctrlData.accountType!=i.ACCOUNT_TYPE.INVALID_TYPE&&parseFloat(f.transLimitVal)>=parseFloat(f.amount)&&f.isRecvCardSupported&&(t=S),t&&(f.recvAccountData.ctrlData.accountType==i.ACCOUNT_TYPE.CURRENT_PLUS?f.isAgreed&&(t=y):t=y),t};t.$watch("sigOnPwdCommit",function(a,n){a!==n&&(f.isPwdShow=!1,f.pwdRSA=t.vm.formData.confirmPassword.RSA,sa())}),P.onClickSelectRedPacket=function(){_.saveSession(f),R.go("/redPacketList")},t.onHJViewActive=function(){Ia()},t.onHJViewDisActive=function(){},Ia()}]);app.controller("TransferOutController",["$scope","$location","$stateParams","utils","cgiService","cache","webankCommonService","GLOBAL_CONSTANT","BindNewCardService1","ResetPasswdService","TransferOutService","MonetaryService","RecentAccountService","TransferOutResultService","$timeout","dataService","HJactionLoading","LocationService","BindBankCardService",function(t,a,c,n,e,o,r,u,A,_,s,T,i,d,l,C,D,P,p){var y=t.data={},E=t.func={};y.buttonClass="p-btn p-btn-block off";var N=1,m=0,R=2,f="",k=0,h=o.getCacheInfo("wealthNew"),v=r.parseRawWealthData_V3(h);y.mainCard={};var S=o.getCacheInfo("personalInfo");null!=S&&S.webank_card_no&&(y.mainCard.number=S.webank_card_no);var B={},U=!1,w=null,g=null,O=function(){f="",k=0,B={},U=!1,y.buttonClass="p-btn p-btn-block off"},b=function(){var t=null,a=n.getDate();n.isWorkDay(a)&&a.getHours()<15?(t=n.getNextWorkDay(1),t.setDate(t.getDate()+1)):(t=n.getNextWorkDay(2),t.setDate(t.getDate()+1)),y.currentPlusAccountDesc=t.getMonth()+1+"-"+t.getDate()+" ("+n.getWeekdayByDate(t)+")"},I=function(){var t=0;return y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD?t=v.BankAmount:y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS&&(t=v.HJAmount),t},Y=function(){y.recvAccountData={},y.recvAccountData.ctrlData={},y.recvAccountData.ctrlData.title="请选择收款账户",y.recvAccountData.ctrlData.canBindNewCard=!0;var t=r.getValidBandCardList();if(y.recvAccountData.otherBankAccount={},y.recvAccountData.otherBankAccount.cardInfo={},y.recvAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.INVALID_TYPE,t&&t.length>0){y.recvAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.OTHER_BANK_CARD,y.recvAccountData.otherBankAccount.otherAccountList=t;var a=t[0];for(var c in t)if(t[c].other_account==g){a=t[c];break}y.recvAccountData.otherBankAccount.cardInfo.bankBinCode=a.other_bank_bin_code,y.recvAccountData.otherBankAccount.cardInfo.userName=a.other_name,y.recvAccountData.otherBankAccount.cardInfo.cardNo=a.other_account,y.recvAccountData.otherBankAccount.cardInfo.cardTypeCode=a.other_card_type_code,y.recvAccountData.otherBankAccount.cardInfo.cardType=a.other_card_type,y.recvAccountData.otherBankAccount.cardInfo.bankName=a.other_bank_name}else y.transType==u.TRANS_TYPE.WEBANK_CARD?y.recvAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.CURRENT_PLUS:y.transType==u.TRANS_TYPE.CURRENT_PLUS&&(y.recvAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.WEBANK_CARD);y.payAccountData={},y.payAccountData.webankAccount={},y.payAccountData.webankAccount.priority=0,y.payAccountData.webankAccount.amount=v.BankAmount,y.payAccountData.webankAccount.isAvaliable=!0,y.payAccountData.currentPlus={},y.payAccountData.currentPlus.amount=v.HJAmount,y.payAccountData.currentPlus.priority=1,y.payAccountData.currentPlus.isAvaliable=!0,y.payAccountData.ctrlData={},y.payAccountData.ctrlData.title="请选择付款账户",y.payAccountData.ctrlData.canBindNewCard=!1,y.payAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.CURRENT_PLUS,y.transType==u.TRANS_TYPE.WEBANK_CARD?(y.payAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.WEBANK_CARD,y.canPwdFrameChangePayWay=!1,y.recvAccountData.currentPlus={},y.recvAccountData.currentPlus.amount=v.HJAmount,y.recvAccountData.currentPlus.priority=1,y.recvAccountData.currentPlus.isAvaliable=!0):y.transType==u.TRANS_TYPE.CURRENT_PLUS?(y.payAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.CURRENT_PLUS,y.canPwdFrameChangePayWay=!1,y.recvAccountData.webankAccount={},y.recvAccountData.webankAccount.priority=2,y.recvAccountData.webankAccount.amount=v.BankAmount,y.recvAccountData.webankAccount.isAvaliable=!0):y.payAccountData.ctrlData.accountType=u.ACCOUNT_TYPE.CURRENT_PLUS},L=function(){if(y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD){if(parseFloat(v.BankAmount)<parseFloat(y.amount))return n.makeToast("微众卡余额不足"),!1}else if(y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS&&parseFloat(v.HJAmount)<parseFloat(y.amount))return n.makeToast("活期+余额不足"),!1;return!0},V=function(){y.transDesc=y.transType==u.TRANS_TYPE.WEBANK_CARD?"您可以将微众卡中的资金转出到绑定银行卡，实时到账":y.transType==u.TRANS_TYPE.CURRENT_PLUS?"您可以将活期+中的资金转出到绑定银行卡，实时到账":"您可以将活期+和微众卡中的资金转出到绑定银行卡，实时到账"},W=function(){return y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD?"微众卡":y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS?"活期+":""},F=function(){if(y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD)return"微众卡";if(y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS)return"活期+";var t="";return t+=y.recvAccountData.otherBankAccount.cardInfo.bankName,t+=y.recvAccountData.otherBankAccount.cardInfo.cardType,t+=n.abridgeAccountNumber(y.recvAccountData.otherBankAccount.cardInfo.cardNo)},K=function(){var t="转出到";t+=F(),y.pwdSubTitle=t,y.pwdTransDesc=parseFloat(y.amount).toFixed(2)+"元";var a="使用";a+=W(),a+="付款",y.payWayDesc=a,y.isPwdShow=!0},H=function(){f&&B.transSerno?(D.show(),redPacketError=1,e.requestRedPacketStatus(B.transSerno).then(function(t){D.hide();var a=!1;t&&t.ret_data&&t.ret_data.red_packet_status_list&&t.ret_data.red_packet_status_list.length>0&&$.each(t.ret_data.red_packet_status_list,function(t,c){c.orig_busi_seq==B.transSerno&&(3==c.red_packet_status?a=!0:4==c.red_packet_status&&(redPacketError=2))}),C.clearPackageCache(),a?B.redPacketAmount=k:B.redPacketError=redPacketError,n.clearCurrentViewCache(),d.goPage(null,B)},function(){C.clearPackageCache(),D.hide(),B.redPacketError=1,n.clearCurrentViewCache(),d.goPage(null,B)}),f=""):(n.clearCurrentViewCache(),d.goPage(null,B)),B.result!=u.TRANS_STATE.FAILURE&&Aa()},x=function(t){return y.outValue={},y.outValue.showPop=!0,y.outValue.oneLineTextLeft=t,y.outValue.oneButtonText="知道了",y.outValue.popClose=function(){},!0},M=function(t){y.showLoading=!1,B.result=t.retCode,t.retCode==u.CGI_RET.CGI_UNKNOW_ERROR?x(t.retMsg):H()},J=function(t,a,c){r.checkProcessingState(t,a,c).then(M)},G=function(t,a){r.isRetCodePwdRetry(t)?(y.outValue={},y.outValue.showPop=!0,y.outValue.oneLineTextLeft=a,y.outValue.twoButtonText1="重试",y.outValue.twoButtonText2="忘记密码",y.outValue.popClose=function(t){1==t?y.isPwdShow=!0:2==t&&_.goPage()}):(y.outValue={},y.outValue.showPop=!0,y.outValue.oneLineTextLeft=a,y.outValue.twoButtonText1="取消",y.outValue.twoButtonText2="忘记密码",y.outValue.popClose=function(t){1==t||2==t&&_.goPage()})},q=function(t){B.result=t.ret_code,B.transSerno=t.ret_data.trans_serno,r.isProcessingState(t.ret_code)?J(u.ORDER_QUERY_TYPE.REDEEM,t.ret_data.trans_serno,"001234"):(y.showLoading=!1,H())},Z=function(t){y.showLoading=!1,B.result=t.ret_code,B.failReason=t.ret_msg,r.isRetCodePwd(t.ret_code)?G(t.ret_code,t.ret_msg):x(t.ret_msg)},Q=function(t){y.showLoading=!1,B.result=t.ret_code,B.failReason=t.ret_msg,r.isRetCodePwd(t.ret_code)?G(t.ret_code,t.ret_msg):x(t.ret_msg)},z=function(t){B.result=t.ret_code,B.transSerno=t.ret_data.trans_serno,r.isProcessingState(t.ret_code)?J(u.ORDER_QUERY_TYPE.PURCHASE,t.ret_data.trans_serno,"001234"):(y.showLoading=!1,H())},j=function(){var a={};a.use_webank_card=!0,a.transaction_amount=y.amount,a.product_code="001234",a.user_pwd=t.vm.formData.confirmPassword.RSA,a.remark="购买货基",t.redPacketAmount&&C.getPackageId(function(t){t&&(a.red_packet_id=t.redPacketID,f=t.redPacketID,k=t.amount)}),e.requestPurchaseMonetaryFund(a).then(z,Q)},X=function(){var a=y.recvAccountData.otherBankAccount.cardInfo,c={};y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD?c.use_webank_card=!0:(c.use_webank_card=!1,c.bank_code=a.bankBinCode,c.card_no=a.cardNo),c.user_pwd=t.vm.formData.confirmPassword.RSA,c.transaction_amount=y.amount,c.product_code="001234",c.remark="赎回货基",e.requestRedeemMonetaryFund(c).then(q,Z)},ta=function(t){B.result=t.ret_code,r.isProcessingState(t.ret_code)?J(u.ORDER_QUERY_TYPE.TRANSOUT,t.ret_data.trans_serno,""):(y.showLoading=!1,H())},aa=function(t){y.showLoading=!1,B.result=t.ret_code,B.failReason=t.ret_msg,r.isRetCodePwd(t.ret_code)?G(t.ret_code,t.ret_msg):x(t.ret_msg)},ca=function(){var a=y.recvAccountData.otherBankAccount.cardInfo;e.requestBaseAccountTransOut(a.userName,a.bankName,a.cardNo,y.amount,t.vm.formData.confirmPassword.RSA,"单笔转出").then(ta,aa)},na=function(){y.showLoading=!0,B.transAmount=y.amount,B.accountType=y.recvAccountData.ctrlData.accountType,B.bankName=y.recvAccountData.otherBankAccount.cardInfo.bankName,B.cardNo=y.recvAccountData.otherBankAccount.cardInfo.cardNo,B.cardType=y.recvAccountData.otherBankAccount.cardInfo.cardType,B.payAccountDesc=W(),B.recvAccountDesc=F(),B.transType=y.transType,B.payAccountData=y.payAccountData,B.recvAccountData=y.recvAccountData,y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD&&y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.OTHER_BANK_CARD?ca():y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS?X():y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.WEBANK_CARD&&y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS&&j()},ea=function(){return n.isValidTransferAmount(y.amount)&&y.amount?y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.INVALID_TYPE?(n.makeToast(STRING_TABLE.INVALID_RECV_ACCOUNT),!1):!0:(n.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1)},oa=function(){if(y.currentPlusPurchaseLimitDesc="",y.currentPlusRedeemFreqLimitDesc="",y.webankCardAmount=v.BankAmount,y.HJAmount=v.HJAmount,h&&h.finance_wealth&&h.finance_wealth.balance_cycle&&h.finance_wealth.balance_cycle.length>=1){var t=h.finance_wealth.balance_cycle[0];y.currentPlusRedeemRemainTimes=parseInt(t.day_max_redeem_num)-parseInt(t.day_redeem_num),y.currentPlusPurchaseRemainTimes=parseInt(t.day_max_buy_num)-parseInt(t.day_buy_num)}},ra=function(){var t=y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.OTHER_BANK_CARD,a=y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.OTHER_BANK_CARD;if(t||a)if(t){if(r.isBankCardInBatchProcessing(y.payAccountData.otherBankAccount.cardInfo.bankBinCode)){var c=r.getBankBatchProcessingMsg(y.payAccountData.otherBankAccount.cardInfo.bankBinCode,y.payAccountData.otherBankAccount.cardInfo.bankName);x(c)}}else if(a&&r.isBankCardInBatchProcessing(y.recvAccountData.otherBankAccount.cardInfo.bankBinCode)){var n=r.getBankBatchProcessingMsg(y.recvAccountData.otherBankAccount.cardInfo.bankBinCode,y.recvAccountData.otherBankAccount.cardInfo.bankName);x(n)}},ua=function(){y.isAgreed=!1,y.agreementDesc="服务协议及风险提示",y.agreementCode="001234"},Aa=function(){y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.OTHER_BANK_CARD&&i.saveRecentlyUsedBankCard(u.ACCOUT_BIZ_TYPE.PAYMENT,y.payAccountData.otherBankAccount.cardInfo.cardNo,u.ACCOUT_SCENE_TYPE.TRANSFER),y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.OTHER_BANK_CARD&&i.saveRecentlyUsedBankCard(u.ACCOUT_BIZ_TYPE.RECEIVABLE,y.recvAccountData.otherBankAccount.cardInfo.cardNo,u.ACCOUT_SCENE_TYPE.TRANSFER)},_a=function(){return y.amount&&""!=y.amount?isNaN(parseFloat(y.amount))?!1:E.getPayAccount()==u.ACCOUNT_TYPE.WEBANK_CARD?parseFloat(y.amount)>parseFloat(v.BankAmount):E.getPayAccount()==u.ACCOUNT_TYPE.CURRENT_PLUS?parseFloat(y.amount)>parseFloat(v.HJAmount):!1:!1},sa=function(){return void 0==y.amount||null==y.amount||""==y.amount||0==y.amount?void(y.isAmountTipShown=!1):void(n.isValidTransferAmount(y.amount)?_a()?(y.amountTipText="超出限额",y.isAmountTipShown=!0):y.isAmountTipShown=!1:(y.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,y.isAmountTipShown=!0))},Ta=function(){w=i.loadRecentlyUsedBankCard(u.ACCOUT_BIZ_TYPE.PAYMENT,u.ACCOUT_SCENE_TYPE.TRANSFER),g=i.loadRecentlyUsedBankCard(u.ACCOUT_BIZ_TYPE.RECEIVABLE,u.ACCOUT_SCENE_TYPE.TRANSFER)},ia=function(){return h&&h.finance_wealth&&h.finance_wealth.balance_cycle&&h.finance_wealth.balance_cycle.length>=1?h.finance_wealth.balance_cycle[0]:void 0},da=function(){var t=ia();return void 0==t?!1:y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS?0==parseInt(t.day_max_redeem_num)?!1:parseInt(t.day_max_redeem_num)-parseInt(t.day_redeem_num)<=0:y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS?0==parseInt(t.day_max_buy_num)?!1:parseInt(t.day_max_buy_num)-parseInt(t.day_buy_num)<=0:!1},la=function(a){C.getRedPacket({update:a}).then(function(a){a&&a.data&&a.status==u.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&a.data.length>0&&(t.redPacketNum=0,$.each(a.data,function(a,c){c.selected&&(t.redPacketAmount=c.amount),2==c.status&&t.redPacketNum++}))})},Ca=function(){O(),Ta(),Y(),V(),b(),oa(),ua(),ra()};y.isPwdShow=!1,y.isPwdAutoShow=!1,y.canPwdFrameChangePayWay=!0,y.transType=s.getData()&&s.getData().type,s.setData(null),y.ACCOUNT_TYPE=u.ACCOUNT_TYPE,E.onAmountChanged=function(){sa()},E.getPayAccount=function(){return y.payAccountData.ctrlData.accountType},E.getRecvAccount=function(){return y.recvAccountData.ctrlData.accountType},E.updateButtonClass=function(){return y.buttonClass=Da()==R?"p-btn p-btn-block":"p-btn p-btn-block off",!1},E.bindCard=function(){p.goToBindCard()},E.onSelectPayWay=function(){E.isPayAccountShown()&&E.showPaymentAccountSelector()},E.onSelectReceiveWay=function(){E.showReceivableAccountSelector()},E.onClickConfirmTransOut=function(){n.clickButtonReport("zhuanchu_zhuanchu");var t=Da();return t==N?void n.makeToast(STRING_TABLE.PLEASE_CHECK_AGREE_USER_PROTOCOL,"short"):void(t!=m&&ea()&&L()&&K())},E.onPwdSelectPayWay=function(){y.isPwdShow?(y.isPwdAutoShow=!0,y.isPwdShow=!1):y.isPwdAutoShow=!1,U=!0,E.showPaymentAccountSelector()},E.onPayAccountSelected=function(){U&&(U=!1,K()),sa()},E.onRecvAccountSelected=function(){ra()},E.onClickTransAll=function(){y.amount=parseFloat(I())},E.isTransAllBtnShown=function(){return y.recvAccountData&&y.recvAccountData.ctrlData?I(I())>0&&y.recvAccountData.ctrlData.accountType!=u.ACCOUNT_TYPE.OTHER_BANK_CARD&&y.recvAccountData.ctrlData.accountType!=u.ACCOUNT_TYPE.INVALID_TYPE:!1},E.back=function(){s.backPage()},E.isPayAccountShown=function(){return y.transType!=u.TRANS_TYPE.WEBANK_CARD&&y.transType!=u.TRANS_TYPE.CURRENT_PLUS},E.onClickCurrentPlusDetails=function(){P.go("/monetaryMoreIncomeRules/001234")},E.onInputBlur=function(){sa()};var Da=function(){var t=m;return y.payAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.INVALID_TYPE||y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.INVALID_TYPE||_a()||!y.amount||da()||(t=N),t&&(y.recvAccountData.ctrlData.accountType==u.ACCOUNT_TYPE.CURRENT_PLUS?y.isAgreed&&(t=R):t=R),t};t.$watch("sigOnPwdCommit",function(t,a){t!==a&&(y.isPwdShow=!1,na())}),E.onClickSelectRedPacket=function(){P.go("/redPacketList")},t.onHJViewActive=function(){var t=P.getBackData();"redPacketListPage"==t?(t="",la()):la(!0),Y()},t.onHJViewDisActive=function(){},Ca(),la(!0)}]);app.controller("TransferInResultController",["$scope","$location","$stateParams","utils","GLOBAL_CONSTANT","essential","cgiService","TransRecordService","TransferInResultService","cache",function(a,e,t,n,r,c,o,u,s,l){var i=a.data={},D=a.func={},T=e.search();e.search(""),i.mainCard={};var A=l.getCacheInfo("personalInfo");null!=A&&A.webank_card_no&&(i.mainCard.number=A.webank_card_no);{var v=T.result,g=T.accountType;T.transType}if(i.failReason=T.failReason,i.state=n.getTransactionStateByCode(v),i.transAmount=T.transAmount,i.recvAccountDesc=T.recvAccountDesc,i.payAccountDesc=T.payAccountDesc,i.payAccountData=T.payAccountData,i.recvAccountData=T.recvAccountData,i.today=n.getDate(),i.ACCOUNT_TYPE=r.ACCOUNT_TYPE,i.TRANS_STATE=r.TRANS_STATE,i.redPacketAmount=T.redPacketAmount,i.redPacketError=["","红包正在派送，稍后请在交易记录中查询","红包发放失败，请稍后再试"][T.redPacketError||0]||"",i.userName=T.userName,i.transDateDesc=n.getDateTimeStringByDate(new Date),i.showPlus=!1,g==r.ACCOUNT_TYPE.CURRENT_PLUS){i.showPlus=!0;var y=n.getDate();n.isWorkDay(y)&&y.getHours()<15?(i.valueDate=n.getNextWorkDay(1),i.arrivalDate=n.getNextWorkDay(1),i.arrivalDate.setDate(i.arrivalDate.getDate()+1)):(i.valueDate=n.getNextWorkDay(2),i.arrivalDate=n.getNextWorkDay(2),i.arrivalDate.setDate(i.arrivalDate.getDate()+1))}o.requestUserWealth().then(function(){},function(){}),D.onClickFinish=function(){s.backPage(2)},D.getRecvAccount=function(){return i.recvAccountData.ctrlData.accountType},D.getPayAccount=function(){return i.payAccountData.ctrlData.accountType},D.onClickTransLog=function(){u.goPage(null,null,null,{backNum:r.BACK_TYPE.TWO_PAGE})}}]),app.factory("TransferInResultService",["$location","commonPath",function(a,e){return $.extend({},e,{locationHash:"/transInResult"})}]);app.controller("TransferOutResultController",["$scope","$location","$stateParams","utils","GLOBAL_CONSTANT","essential","cgiService","TransRecordService","TransferOutResultService","cache",function(t,a,e,r,c,n,o,u,s,l){var i=t.data={},D=t.func={},A=a.search();a.search("");{var T=A.result;A.transType}i.failReason=A.failReason,i.state=r.getTransactionStateByCode(T),i.transAmount=A.transAmount,i.payAccountDesc=A.payAccountDesc,i.recvAccountDesc=A.recvAccountDesc,i.today=r.getDate(),i.payAccountData=A.payAccountData,i.recvAccountData=A.recvAccountData,i.ACCOUNT_TYPE=c.ACCOUNT_TYPE,i.TRANS_STATE=c.TRANS_STATE,i.redPacketAmount=A.redPacketAmount,i.redPacketError=["","红包正在派送，稍后请在交易记录中查询","红包发放失败啦，请稍后再试"][A.redPacketError||0]||"",i.userName=A.userName,i.transDateDesc=r.getDateTimeStringByDate(new Date);var v=l.getCacheInfo("personalInfo");if(i.mainCard={},null!=v&&(i.mainCard.number=v.webank_card_no),i.showPlus=!1,i.recvAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS){i.showPlus=!0;var g=r.getDate();r.isWorkDay(g)&&g.getHours()<15?(i.valueDate=r.getNextWorkDay(1),i.arrivalDate=r.getNextWorkDay(1),i.arrivalDate.setDate(i.arrivalDate.getDate()+1)):(i.valueDate=r.getNextWorkDay(2),i.arrivalDate=r.getNextWorkDay(2),i.arrivalDate.setDate(i.arrivalDate.getDate()+1))}o.requestUserWealth().then(function(){},function(){}),D.onClickFinish=function(){s.backPage(2)},D.onClickTransLog=function(){r.clickButtonReport("transfer_trans"),u.goPage(null,null,null,{backNum:c.BACK_TYPE.TWO_PAGE})},D.getPayAccount=function(){return i.payAccountData.ctrlData.accountType},D.getRecvAccount=function(){return i.recvAccountData.ctrlData.accountType}}]),app.factory("TransferOutResultService",["$location","commonPath",function(t,a){return $.extend({},a,{locationHash:"/transOutResult"})}]);app.controller("PlanControllerV2",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","BindNewCardService1","ResetPasswdService","PlanServiceV2","RecentAccountService","TransferOutAccountSelectorService","TransferOtpService","ProdInfoService","BindBankCardService","LocationService",function(a,t,n,c,o,e,r,u,A,d,i,D,l,T,_,p,s,m,C,O,N,f,y,k,E,v,B,P,F,R){var I=t.data={},h=t.func={},S=D.getCacheInfo("wealthNew"),b=e.parseRawWealthData_V3(S);I.oldPlan=u.search(),u.search("");var g=v.getBackData();v.setBackData(null);var U=D.getCacheInfo("personalInfo");null!=U&&U.webank_card_no&&(I.webankCardNo=U.webank_card_no);var Y=!0,L={NONE:0,ADD:1,MODIFY:2,DELETE:3},w=new Date;w.setDate(w.getDate()+1);var V=0;I.oldPlanPayAccountData=null,I.oldPlanRecvAccountData=null;var M={};M.otherBankAccount={},M.otherBankAccount.cardInfo={};var K={};K=otherBankAccount={},K=otherBankAccount.cardInfo={};var H=null,x=function(){I.payAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&E.saveRecentlyUsedBankCard(c.ACCOUT_BIZ_TYPE.PAYMENT,I.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo),I.recvAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&E.saveRecentlyUsedBankCard(c.ACCOUT_BIZ_TYPE.RECEIVABLE,I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo)},G=function(){$(),J(),W(),q(),mt()},J=function(){null!=k.getSession()&&(I=t.data=k.getSession(),k.clearSession())},q=function(){var a=B.getData();return B.setData(null),a&&a.otp?(H=a.otp,void gt()):void(I.ignoreRiskSession="")},W=function(){if(g&&""!=g){var a=g.cardNo,t=g.userName,n=g.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD;if(a&&t&&n){I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD;var o=e.findCardFromPayableCardList(a);null!=o?(I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode=o.other_bank_bin_code,lt(I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode),I.recvAccountDataOnForm.otherBankAccount.cardInfo.userName=o.other_name,I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo=o.other_account,I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardTypeCode=o.other_card_type_code,I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardType=o.other_card_type,I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName=o.other_bank_name):(I.recvAccountDataOnForm.otherBankAccount.cardInfo.userName=t,I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo=a)}else I.recvAccountDataOnForm.ctrlData.accountType=g.accountType}},$=function(){try{if(I.recvAccountDataOnForm={},I.recvAccountDataOnForm.ctrlData={},I.recvAccountDataOnForm.otherBankAccount={},I.payAccountDataOnForm={},I.payAccountDataOnForm.ctrlData={},I.payAccountDataOnForm.otherBankAccount={},I.oldPlan.id){if(1==I.oldPlan.job_type){if("微众银行"==I.oldPlan.bank_name)I.payAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(wt())),I.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;else{var a=I.payAccountDataOnForm.otherBankAccount.cardInfo={};a.cardNo=I.oldPlan.card_no,a.bankBinCode=I.oldPlan.bank_no,a.bankName=I.oldPlan.bank_name,a.cardType=I.oldPlan.card_type,I.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD}I.recvAccountDataOnForm.currentPlus=JSON.parse(JSON.stringify(Lt())),I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.CURRENT_PLUS}else if(2==I.oldPlan.job_type){if("微众银行"==I.oldPlan.bank_name)I.recvAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(wt())),I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;else{var a=I.recvAccountDataOnForm.otherBankAccount.cardInfo={};a.cardNo=I.oldPlan.card_no,a.bankBinCode=I.oldPlan.bank_no,a.bankName=I.oldPlan.bank_name,a.cardType=I.oldPlan.card_type,I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD}I.payAccountDataOnForm.currentPlus=JSON.parse(JSON.stringify(Lt())),I.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.CURRENT_PLUS}else if(3==I.oldPlan.job_type){I.recvAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(wt())),I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;var a=I.payAccountDataOnForm.otherBankAccount.cardInfo={};I.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD,a.cardNo=I.oldPlan.card_no,a.bankBinCode=I.oldPlan.bank_no,a.cardType=I.oldPlan.card_type,a.bankName=I.oldPlan.bank_name}else if(4==I.oldPlan.job_type){I.payAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(wt())),I.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;var a=I.recvAccountDataOnForm.otherBankAccount.cardInfo={};I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD,a.cardNo=I.oldPlan.card_no,a.bankBinCode=I.oldPlan.bank_no,a.bankName=I.oldPlan.bank_name,a.cardType=I.oldPlan.card_type}at()&&(I.exchangeBtnClass=""),I.recvAccountDataOnForm.otherBankAccount&&I.recvAccountDataOnForm.otherBankAccount.cardInfo&&(I.recvAccountDataOnForm.otherBankAccount.cardInfo.userName=I.oldPlan.name),I.hasOldPlan=!0,I.planName=I.oldPlan.remark,I.amount=parseFloat(I.oldPlan.amount),I.dt=r.getDateByYYYYMMDDString(I.oldPlan.next_time),I.isRepeated=parseInt(I.oldPlan.is_repeat),I.oldPlanRecvAccountData=JSON.parse(JSON.stringify(I.recvAccountDataOnForm)),I.oldPlanPayAccountData=JSON.parse(JSON.stringify(I.payAccountDataOnForm)),tt(),Q()}else I.payAccountDataOnForm.ctrlData={},I.recvAccountDataOnForm.ctrlData={},I.recvAccountDataOnForm.otherBankAccount={},I.recvAccountDataOnForm.otherBankAccount.cardInfo={},I.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.INVALID_TYPE,I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.INVALID_TYPE,X()}catch(t){}},j=function(){I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.INVALID_TYPE&&I.recvAccountDataOnForm.otherBankAccount.cardInfo.userName&&""!=I.recvAccountDataOnForm.otherBankAccount.cardInfo.userName&&I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo&&""!=I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo&&(I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD)},X=function(){var a=D.getCacheInfo("planList");if(a){for(var t in a)a[t].categry&&a[t].categry!=c.NONE||V++;switch(V){case 0:I.defaultName="计划A";break;case 1:I.defaultName="计划B";break;case 2:I.defaultName="计划C";break;case 3:I.defaultName="计划D";break;case 4:I.defaultName="计划E"}}},Q=function(){I.freqDesc=I.isRepeated?"每月一次":"仅此一次"},Z=function(){var a=!0;return a=a&&I.recvAccountDataOnForm.ctrlData,a=a&&I.recvAccountDataOnForm.ctrlData.accountType,a=a&&I.recvAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.INVALID_TYPE},z=function(){var a=!0;return a=a&&I.payAccountDataOnForm.ctrlData,a=a&&I.payAccountDataOnForm.ctrlData.accountType,a=a&&I.payAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.INVALID_TYPE},at=function(){return z()&&Z()},tt=function(){return I.dt?void(I.tranDateDesc=I.isRepeated?"每月"+I.dt.getDate()+"日":r.getYYYYMMDDStringByDate(I.dt,"-")):void(I.tranDateDesc="")},nt=function(){var a=parseFloat(I.amount);return!isNaN(a)&&a>=0&&r.isValidTransferAmount(I.amount)},ct=function(){if(I.payAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.OTHER_BANK_CARD)return!1;var a=ft(I.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode);return a?parseFloat(I.amount)>a.perOne?!0:void 0:!1},ot=function(){if(I.operType==L.DELETE)return!0;if(I.planName&&I.planName.length>8)return r.makeToast("计划名最多8个字符"),!1;if(!I.amount||!nt())return r.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1;if(!I.freqDesc)return r.makeToast(STRING_TABLE.INVALID_FREQUENCY),!1;if(!I.dt)return r.makeToast(STRING_TABLE.INVALID_DATE),!1;if(!at())return r.makeToast(STRING_TABLE.INVALID_RECV_AND_PAY_ACCOUNT),!1;if(!Z())return r.makeToast(STRING_TABLE.INVALID_RECV_ACCOUNT),!1;if(!z())return r.makeToast(STRING_TABLE.INVALID_PAY_ACCOUNT),!1;if(ct()){var a=ft(I.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode);return I.outValue={},I.outValue.showPop=!0,I.outValue.oneLineTextLeft="超过银行卡限额，"+I.payAccountDataOnForm.otherBankAccount.cardInfo.bankName+I.payAccountDataOnForm.otherBankAccount.cardInfo.cardType+"单笔"+a.perOne,parseFloat(a.perDay)>0&&(I.outValue.oneLineTextLeft+="，单日"+a.perDay),I.outValue.oneButtonText="知道了",I.outValue.popClose=function(){},!1}return!0},et=function(){var a="";return I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?a="活期+":I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?a="微众卡":I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a+=I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName,a+=I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardType,a+=r.abridgeAccountNumber(I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo)),a},rt=function(){var a="";return I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?a="活期+":I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?a="微众卡":I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a+=I.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,a+=I.payAccountDataOnForm.otherBankAccount.cardInfo.cardType,a+=r.abridgeAccountNumber(I.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo)),a},ut=function(){return I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS||I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD},At=function(){return I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS||I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD},dt=function(){return ut()?"转入到"+et():At()?"从"+rt()+"转出":""},it="",Dt=!0,lt=function(a){r.loadImage("../img/bankHead/yh-"+(a||0)+"@nb.png",function(a,t){i(function(){I.bankImg=a?t:""})})},Tt=function(a){I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode=a.ret_data.clear_no_pbc,lt(I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode),I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardTypeCode=a.ret_data.card_typeid,I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardType=a.ret_data.card_type,I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName=a.ret_data.bank_name},_t=function(a){I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode="",I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardTypeCode="",I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardType="",I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName="",a.ret_code==c.CGI_RET.CGI_UNUSED_CARD||a.ret_code==c.CGI_RET.CGI_UNUSED_CARD_2?st==pt.CHECK_SIX_NUMBER?st++:st==pt.CHECK_TEN_NUMBER&&(Dt=!1):(a.ret_code==c.CGI_RET.CGI_NEED_MORE_CARD_NO||a.ret_code==c.CGI_RET.CGI_NEED_MORE_CARD_NO_2)&&(st=pt)},pt={CHECK_SIX_NUMBER:0,CHECK_TEN_NUMBER:1,CHECK_TOTAL_NUMBER:2},st=pt.CHECK_SIX_NUMBER,mt=function(){var a=null;if(I.recvAccountDataOnForm.otherBankAccount.cardInfo&&(a=I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo),a){if(!a||a.length<6)return I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode="",I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardTypeCode="",I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardType="",I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName="",st=pt.CHECK_SIX_NUMBER,I.bankImg="",t="",void(it="");if(st==pt.CHECK_SIX_NUMBER){var t=a.substr(0,6);if(t==it)return;it=t}else if(st==pt.CHECK_TEN_NUMBER){if(a.length<10)return;var n=a.substr(0,10);if(n==it)return;it=n}else st==pt.CHECK_TOTAL_NUMBER;Ct(a)}},Ct=function(a){j(),n.requestBankInfo(a,"trans_out").then(Tt,_t)};h.onRecvCardChanged=function(){mt()};var Ot=function(){var a=r.getYYYYMMDDStringByDate(I.dt,"-");if(I.isRepeated&&(a=a+"起，每月"+I.dt.getDate()+"日"),I.pwdTransDesc=parseFloat(I.amount).toFixed(2)+"元",ut()){if(a+="转入到",I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?I.pwdSubTitle=a+"活期+":I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD&&(I.pwdSubTitle=a+"微众卡"),I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD){var t="使用";t+=I.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,t+=I.payAccountDataOnForm.otherBankAccount.cardInfo.cardType,t+=r.abridgeAccountNumber(I.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo),t+="付款",I.payWayDesc=t}}else if(At()){var t=a+"从";I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?t+="活期+":I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD&&(t+="微众卡"),t+="转出",I.pwdSubTitle=t,I.payWayDesc=""}},Nt=function(){I.operType==L.DELETE?(I.pwdSubTitle="删除计划",I.pwdTransDesc="",I.payWayDesc=""):Ot(),I.isPwdShow=!0},ft=function(a){return gBankLimit[a]},yt=function(){if(void 0==I.amount||null==I.amount||""==I.amount||0==I.amount)return void(I.isAmountTipShown=!1);if(r.isValidTransferAmount(I.amount))if(ct()){var a=ft(I.payAccountData.otherBankAccount.cardInfo.bankBinCode);if(a){var t="该卡本次最多可转出";t+=a.perOne,t+="元",I.amountTipText=t}else I.amountTipText=STRING_TABLE.AMOUNT_EXCEED_LIMIT;I.isAmountTipShown=!0}else I.isAmountTipShown=!1;else I.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,I.isAmountTipShown=!0},kt=function(){var a=!1;return a=a||I.planName!=I.oldPlan.remark,a=a||parseFloat(I.amount)!=parseFloat(I.oldPlan.amount),a=a||r.getYYYYMMDDStringByDate(I.dt)!=I.oldPlan.next_time,a=a||parseInt(I.isRepeated)!=parseInt(I.oldPlan.is_repeat),a=a||I.oldPlanPayAccountData.ctrlData.accountType!=I.payAccountDataOnForm.ctrlData.accountType,a=a||I.oldPlanRecvAccountData.ctrlData.accountType!=I.recvAccountDataOnForm.ctrlData.accountType,I.oldPlanPayAccountData.ctrlData.accountType==I.payAccountDataOnForm.ctrlData.accountType&&I.oldPlanPayAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=a||I.oldPlanPayAccountData.otherBankAccount.cardInfo!=I.payAccountDataOnForm.otherBankAccount.cardInfo),I.oldPlanRecvAccountData.ctrlData.accountType==I.recvAccountDataOnForm.ctrlData.accountType&&I.oldPlanRecvAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=a||I.oldPlanRecvAccountData.otherBankAccount.cardInfo!=I.recvAccountDataOnForm.otherBankAccount.cardInfo),a},Et=function(){return I.operType!=L.MODIFY||kt()?ot()?void Nt():!1:(r.makeToast(STRING_TABLE.PLEASE_COMMIT_AFTER_MODIFY,"short"),!1)},vt=function(a){e.isRetCodePwdRetry(a.ret_code)?(I.outValue={},I.outValue.showPop=!0,I.outValue.oneLineTextLeft=a.ret_msg,I.outValue.twoButtonText1="重试",I.outValue.twoButtonText2="忘记密码",I.outValue.popClose=function(a){1==a?I.isPwdShow=!0:2==a&&y.goPage()}):(I.outValue={},I.outValue.showPop=!0,I.outValue.oneLineTextLeft=a.ret_msg,I.outValue.twoButtonText1="取消",I.outValue.twoButtonText2="忘记密码",I.outValue.popClose=function(a){1==a||2==a&&y.goPage()})},Bt=function(){I.showLoading=!1;var a={};a.payInfo=JSON.stringify(I.payAccountDataOnForm),a.recvInfo=JSON.stringify(I.recvAccountDataOnForm),a.isRepeated=I.isRepeated,a.nextTime=r.getYYYYMMDDStringByDate(I.dt),tt(),a.dateDesc=I.tranDateDesc,a.planDesc="存取计划",a.amount=I.amount,u.path("/planResult").search(a),x()},Pt=function(a,t){I.outValue={},I.outValue.showPop=!0,I.outValue.oneLineTextLeft=a,I.outValue.twoButtonText1="终止",I.outValue.twoButtonText2="继续",I.outValue.popClose=function(a){2==a?i(function(){k.saveSession(I),B.goPage(null,null,{otpSession:t,usage:c.TRANS_OTP_SCENE.PLAN})},200):I.ignoreRiskSession=""}},Ft=function(a){return I.outValue={},I.outValue.showPop=!0,I.outValue.oneLineTextLeft=a,I.outValue.oneButtonText="知道了",I.outValue.popClose=function(){},!0},Rt=function(a){I.showLoading=!1,e.isRetCodePwd(a.ret_code)?vt(a):a.ret_code==c.CGI_RET.CGI_RET_TRANS_NEED_OTP?(k.saveSession(I),B.goPage(null,null,{otpSession:a.ret_data.otp_params_session,usage:c.TRANS_OTP_SCENE.PLAN})):a.ret_code==c.CGI_RET.CGI_RET_TRANS_GRAY_LIST?(I.ignoreRiskSession=a.ret_data.ignore_session,Pt(a.ret_msg,a.ret_data.otp_params_session)):Ft(a.ret_msg)},It=function(){n.requestTimeline(),r.makeToast("删除计划成功");var a={InitCalendarAll:!0,InitCalendarEventDate:!0,InitCalendarEventList:!0,InitPlans:!0};D.setCacheInfo("calendar_init_param",a),R.backPage()},ht=function(a){n.requestAddTransPlan(a).then(Bt,Rt)},St=function(a){I.oldPlan.id&&(a.id=I.oldPlan.id),n.requestModifyTransPlan(a).then(Bt,Rt)},bt=function(a){I.oldPlan.id&&(a.id=I.oldPlan.id),n.requestDeleteTransPlan(a).then(It,Rt)},gt=function(){I.showLoading=!0;var a=P.getProdInfo("001234"),t={};if(t.use_webank_card=!1,I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS)t.job_type=1,a&&(t.product_code=a.prod_code,t.product_name=a.prod_name),t.use_webank_card=I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD,t.use_webank_card||(t.bank_no=I.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,t.bank_name=I.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,t.card_no=I.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo);else if(I.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS)t.job_type=2,a&&(t.product_code=a.prod_code,t.product_name=a.prod_name),t.use_webank_card=I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD,t.use_webank_card||(t.bank_no=I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,t.bank_name=I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName,t.card_no=I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo);else if(I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD)t.job_type=3,t.bank_no=I.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,t.bank_name=I.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,t.card_no=I.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo;else{if(I.recvAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.OTHER_BANK_CARD)return;t.job_type=4,t.bank_no=I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,t.bank_name=I.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName,t.card_no=I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo}if(t.amount=I.amount,t.next_time=r.getYYYYMMDDStringByDate(I.dt),t.is_repeat=I.isRepeated,t.password=I.pwdRSA,t.remark=I.planName,t.ignore_risk=""!=I.ignoreRiskSession,t.ignore_session=I.ignoreRiskSession,t.phone_check_num=H,I.recvAccountDataOnForm.otherBankAccount&&I.recvAccountDataOnForm.otherBankAccount.cardInfo&&(t.name=I.recvAccountDataOnForm.otherBankAccount.cardInfo.userName),I.operType==L.ADD){if(V>=5)return void r.makeToast("对不起，最多只能制定5个转账计划");t.remark||(t.remark=I.defaultName),ht(t)}else I.operType==L.MODIFY?St(t):I.operType==L.DELETE&&bt(t);t.ignore_session=""},Ut=function(){if(I.dt&&void 0!=I.isRepeated&&null!=I.isRepeated){var a=r.getYYYYMMDDStringByDate(I.dt,"-");I.freqDetail=I.isRepeated?Y?"每月"+I.dt.getDate()+"日23:59前"+dt()+"，"+a+"执行第1期":"每月"+I.dt.getDate()+"日23:59前"+dt():a+" 23:59前"+dt()}else I.freqDetail=""},Yt=function(){var a={},t=e.getPayableCardList();return a={},a.cardInfo={},a.priority=3,t&&t.length>0&&(a.otherAccountList=t,a.cardInfo.bankBinCode=t[0].other_bank_bin_code,a.cardInfo.userName=t[0].other_name,a.cardInfo.cardNo=t[0].other_account,a.cardInfo.cardTypeCode=t[0].other_card_type_code,a.cardInfo.cardType=t[0].other_card_type,a.cardInfo.bankName=t[0].other_bank_name),a},Lt=function(){var a={};return a.amount=b.HJAmount,a.priority=1,a.isAvaliable=!0,a},wt=function(){var a={};return a.priority=2,a.amount=b.BankAmount,a.isAvaliable=!0,a};I.showSelectFreq=!1,I.recvAccountData={},I.payAccountData={},I.exchangeBtnClass="off",I.recvAccountDataOnForm={},I.payAccountDataOnForm={},I.tranDateDesc="",I.defaultName="",I.ACCOUNT_TYPE=c.ACCOUNT_TYPE,I.operType=L.NONE,I.ignoreRiskSession="",h.back=function(){k.backPage()},h.onClickClearRecvAccount=function(){I.recvAccountDataOnForm.otherBankAccount={},I.recvAccountDataOnForm.otherBankAccount.cardInfo={},I.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.INVALID_TYPE},h.getRecvAccount=function(){return I.recvAccountDataOnForm.ctrlData.accountType},h.getPayAccount=function(){return I.payAccountDataOnForm.ctrlData.accountType},h.canInputRecvCardNoAndUserName=function(){var a=I.recvAccountDataOnForm.ctrlData.accountType;return a==c.ACCOUNT_TYPE.INVALID_TYPE||a==c.ACCOUNT_TYPE.OTHER_BANK_CARD},h.onClickSelectPayee=function(){k.saveSession(I);var a={scene:TRANS_ACCOUNT_SELECTOR_SCENE.COMMON_PLAN,payAccountType:I.payAccountDataOnForm.ctrlData.accountType};v.goPage("",a)},h.onClickSelectPayAccount=function(){j(),I.payAccountData={},I.payAccountData.ctrlData={},I.payAccountData.ctrlData.title="请选择付款账户",I.payAccountData.ctrlData.canBindNewCard=!0;var a=!0;Z()?I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?(I.payAccountData.otherBankAccount=Yt(),I.payAccountData.webankAccount=wt()):I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?(I.payAccountData.otherBankAccount=Yt(),I.payAccountData.currentPlus=Lt()):I.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(I.payAccountData.currentPlus=Lt(),I.payAccountData.webankAccount=wt(),a=!1):(I.payAccountData.otherBankAccount=Yt(),I.payAccountData.currentPlus=Lt(),I.payAccountData.webankAccount=wt()),a&&(I.payAccountData.disabledOtherBankAccount=e.getUnableToPayCardList()),i(function(){h.showPaymentAccountSelector()},50)},h.onPayAccountSelected=function(){I.payAccountDataOnForm=JSON.parse(JSON.stringify(I.payAccountData)),at()&&(I.exchangeBtnClass=""),Ut()},h.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(I.amount)},h.onSelectFreq=function(){I.showSelectFreq=!0},h.onClickCloseFrequencySelector=function(){I.showSelectFreq=!1},h.onClickOnlyOnce=function(){I.freqDesc="仅此一次",I.isRepeated=0,I.showSelectFreq=!1,tt(),Ut()},h.onClickRepeatPerMonth=function(){I.freqDesc="每月一次",I.isRepeated=1,I.showSelectFreq=!1,tt(),Ut()},h.onInputBlur=function(){yt()},h.bindCard=function(){k.saveSession(I),F.goToBindCard()},h.onClickExchangeAccounts=function(){if(at()&&e.findCardFromPayableCardList(I.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo)){var a=null;a=I.payAccountDataOnForm,I.payAccountDataOnForm=I.recvAccountDataOnForm,I.recvAccountDataOnForm=a,Ut(),yt()}},h.onPwdSelectPayWay=function(){I.isPwdShow?(I.isPwdAutoShow=!0,I.isPwdShow=!1):I.isPwdAutoShow=!1,h.onClickSelectPayAccount()},h.getPayAccountLimitDesc=function(){var a=gBankLimit[I.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode];return a?"该卡单笔限额"+a.perOne+"元":""},h.onSelectRepeatedDay=function(a,t){var n=r.getDate();I.oldPlan&&I.oldPlan.id&&t>n.getDate()&&28>=t?(Y=!1,k.getNextPlanExecuteDateByUser(t).then(function(a){I.dt=a},function(){}).then(function(){Y=!0,tt(),Ut()})):I.dt=k.getNextPlanExecuteDate(t),tt(),Ut()},h.onSelectDate=function(){if(void 0==I.isRepeated)return void r.makeToast(STRING_TABLE.PLEASE_SELECT_PURCHASE_FREQUENCY);if(I.isRepeated)h.showDaySelect(I.dt);else{var a,n={date:w,minDate:w.valueOf(),mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"},c={date:w,minDate:w,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};a=r.isiOSDevice()?c:n,datePicker.show(a,function(a){return void 0==I.isRepeated?void r.makeToast(STRING_TABLE.PLEASE_SELECT_PURCHASE_FREQUENCY):1==I.isRepeated&&a&&a.getDate()>28?void r.makeToast(STRING_TABLE.INVALID_PLAN_DATE):void(a&&(I.dt=a,tt(),t.$apply()))})}},h.onClickConfirm=function(){r.clickButtonReport("zidingyijihua_queding"),I.operType=I.oldPlan.id?L.MODIFY:L.ADD,Et()},h.onClickDeletePlan=function(){I.operType=L.DELETE,Et()},h.getTransDateDescDetail=function(){if(I.dt&&void 0!=I.isRepeated&&null!=I.isRepeated){var a=r.getYYYYMMDDStringByDate(I.dt,"-");return I.isRepeated?"每月"+I.dt.getDate()+"日23:59前"+dt()+"，"+a+"执行第1期":a+" 23:59前"+dt()}return""},t.$watch("sigOnPwdCommit",function(a,n){a!==n&&(I.isPwdShow=!1,I.pwdRSA=t.vm.formData.confirmPassword.RSA,gt())}),t.$watch("data.isRepeated",function(a,t){1==a&&0==t&&(I.dt=null),Ut(),tt()}),G()}]);app.controller("PlanController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","BindNewCardService1","ResetPasswdService","PlanService","RecentAccountService","HelpDetailService","ProdInfoService","BindBankCardService","LocationService",function(a,t,n,c,e,o,r,u,A,i,D,T,d,p,l,m,_,s,C,O,f,y,N,E,k,v,B,F,h){var R=t.data={},P=t.func={},S=T.getCacheInfo("wealthNew"),I=o.parseRawWealthData_V3(S),b=u.search();u.search("");var Y={NONE:0,ADD:1,MODIFY:2,DELETE:3},g=Y.NONE,U=r.getDate();U.setDate(U.getDate()+1);var L=0,w=null,V=null,K=!0,x=function(){R.payAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&k.saveRecentlyUsedBankCard(c.ACCOUT_BIZ_TYPE.PAYMENT,R.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo),R.recvAccountData.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&k.saveRecentlyUsedBankCard(c.ACCOUT_BIZ_TYPE.RECEIVABLE,R.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo)},M=function(){H()},H=function(){try{if(R.recvAccountDataOnForm={},R.recvAccountDataOnForm.ctrlData={},R.recvAccountDataOnForm.otherBankAccount={},R.payAccountDataOnForm={},R.payAccountDataOnForm.ctrlData={},R.payAccountDataOnForm.otherBankAccount={},b.id){if(1==b.job_type){if("微众银行"==b.bank_name)R.payAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(kt())),R.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;else{var a=R.payAccountDataOnForm.otherBankAccount.cardInfo={};a.cardNo=b.card_no,a.bankBinCode=b.bank_no,a.bankName=b.bank_name,a.cardType=b.card_type,R.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD}R.recvAccountDataOnForm.currentPlus=JSON.parse(JSON.stringify(Et())),R.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.CURRENT_PLUS}else if(2==b.job_type){if("微众银行"==b.bank_name)R.recvAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(kt())),R.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;else{var a=R.recvAccountDataOnForm.otherBankAccount.cardInfo={};a.cardNo=b.card_no,a.bankBinCode=b.bank_no,a.bankName=b.bank_name,a.cardType=b.card_type,R.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD}R.payAccountDataOnForm.currentPlus=JSON.parse(JSON.stringify(Et())),R.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.CURRENT_PLUS}else if(3==b.job_type){R.recvAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(kt())),R.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;var a=R.payAccountDataOnForm.otherBankAccount.cardInfo={};R.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD,a.cardNo=b.card_no,a.bankBinCode=b.bank_no,a.cardType=b.card_type,a.bankName=b.bank_name}else if(4==b.job_type){R.payAccountDataOnForm.webankAccount=JSON.parse(JSON.stringify(kt())),R.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.WEBANK_CARD;var a=R.recvAccountDataOnForm.otherBankAccount.cardInfo={};R.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD,a.cardNo=b.card_no,a.bankBinCode=b.bank_no,a.cardType=b.card_type,a.bankName=b.bank_name}$()&&(R.exchangeBtnClass=""),R.hasOldPlan=!0,R.planName=b.remark,R.amount=parseFloat(b.amount),R.dt=r.getDateByYYYYMMDDString(b.next_time),R.isRepeated=parseInt(b.is_repeat),V=R.recvAccountDataOnForm,w=R.payAccountDataOnForm,j(),q()}else R.payAccountDataOnForm.ctrlData={},R.recvAccountDataOnForm.ctrlData={},R.payAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.INVALID_TYPE,R.recvAccountDataOnForm.ctrlData.accountType=c.ACCOUNT_TYPE.INVALID_TYPE,W()}catch(t){}},W=function(){var a=T.getCacheInfo("planList");if(a){for(var t in a)(!a[t].categry||1!=a[t].categry&&2!=a[t].categry)&&L++;switch(L){case 0:R.defaultName="计划A";break;case 1:R.defaultName="计划B";break;case 2:R.defaultName="计划C";break;case 3:R.defaultName="计划D";break;case 4:R.defaultName="计划E"}}},q=function(){R.freqDesc=R.isRepeated?"每月一次":"仅此一次"},J=function(){var a=!0;return a=a&&R.recvAccountDataOnForm.ctrlData,a=a&&R.recvAccountDataOnForm.ctrlData.accountType,a=a&&R.recvAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.INVALID_TYPE},G=function(){var a=!0;return a=a&&R.payAccountDataOnForm.ctrlData,a=a&&R.payAccountDataOnForm.ctrlData.accountType,a=a&&R.payAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.INVALID_TYPE},$=function(){return G()&&J()},j=function(){return R.dt?void(R.tranDateDesc=R.isRepeated?"每月"+R.dt.getDate()+"日":r.getYYYYMMDDStringByDate(R.dt,"-")):void(R.tranDateDesc="")},Q=function(){var a=parseFloat(R.amount);return!isNaN(a)&&a>=0&&r.isValidTransferAmount(R.amount)},Z=function(){if(R.payAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.OTHER_BANK_CARD)return!1;var a=rt(R.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode);return a?parseFloat(R.amount)>a.perOne?!0:void 0:!1},z=function(){if(g==Y.DELETE)return!0;if(R.planName&&R.planName.length>8)return r.makeToast("计划名最多8个字符"),!1;if(!R.amount||!Q())return r.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1;if(!R.freqDesc)return r.makeToast(STRING_TABLE.INVALID_FREQUENCY),!1;if(!R.dt)return r.makeToast(STRING_TABLE.INVALID_DATE),!1;if(!G()&&!J)return r.makeToast(STRING_TABLE.INVALID_RECV_AND_PAY_ACCOUNT),!1;if(!J())return r.makeToast(STRING_TABLE.INVALID_RECV_ACCOUNT),!1;if(!G())return r.makeToast(STRING_TABLE.INVALID_PAY_ACCOUNT),!1;if(Z()){var a=rt(R.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode);return R.outValue={},R.outValue.showPop=!0,R.outValue.oneLineTextLeft="超过银行卡限额，"+R.payAccountDataOnForm.otherBankAccount.cardInfo.bankName+R.payAccountDataOnForm.otherBankAccount.cardInfo.cardType+"单笔"+a.perOne,parseFloat(a.perDay)>0&&(R.outValue.oneLineTextLeft+="，单日"+a.perDay),R.outValue.oneLineTextLeft+="。如需要大额度购买，请先转账至微众卡。",R.outValue.twoButtonText1="转账指引",R.outValue.twoButtonText2="关闭",R.outValue.popClose=function(a){1==a&&(E.saveSession(t.data),v.goPage("0"))},!1}return!0},X=function(){var a="";return R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?a="活期+":R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?a="微众卡":R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a+=R.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName,a+=R.recvAccountDataOnForm.otherBankAccount.cardInfo.cardType,a+=r.abridgeAccountNumber(R.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo)),a},at=function(){var a="";return R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?a="活期+":R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?a="微众卡":R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a+=R.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,a+=R.payAccountDataOnForm.otherBankAccount.cardInfo.cardType,a+=r.abridgeAccountNumber(R.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo)),a},tt=function(){return R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS||R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD},nt=function(){return R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS||R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD},ct=function(){return tt()?"转入到"+X():nt()?"从"+at()+"转出":""},et=function(){var a=r.getYYYYMMDDStringByDate(R.dt,"-");if(R.isRepeated&&(a=a+"起，每月"+R.dt.getDate()+"日"),R.pwdTransDesc=parseFloat(R.amount).toFixed(2)+"元",tt()){if(a+="转入到",R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?R.pwdSubTitle=a+"活期+":R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD&&(R.pwdSubTitle=a+"微众卡"),R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD){var t="使用";t+=R.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,t+=R.payAccountDataOnForm.otherBankAccount.cardInfo.cardType,t+=r.abridgeAccountNumber(R.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo),t+="付款",R.payWayDesc=t}}else if(nt()){var t=a+"从";R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?t+="活期+":R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD&&(t+="微众卡"),t+="转出",R.pwdSubTitle=t,R.payWayDesc=""}},ot=function(){g==Y.DELETE?(R.pwdSubTitle="删除计划",R.pwdTransDesc="",R.payWayDesc=""):et(),R.isPwdShow=!0},rt=function(a){return gBankLimit[a]},ut=function(){if(void 0==R.amount||null==R.amount||""==R.amount||0==R.amount)return void(R.isAmountTipShown=!1);if(r.isValidTransferAmount(R.amount))if(Z()){var a=rt(R.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode);if(a){var t="该卡本次最多可转出";t+=a.perOne,t+="元",R.amountTipText=t}else R.amountTipText=STRING_TABLE.AMOUNT_EXCEED_LIMIT;R.isAmountTipShown=!0}else R.isAmountTipShown=!1;else R.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,R.isAmountTipShown=!0},At=function(){var a=!1;return a=a||R.planName!=b.remark,a=a||parseFloat(R.amount)!=parseFloat(b.amount),a=a||r.getYYYYMMDDStringByDate(R.dt)!=b.next_time,a=a||parseInt(R.isRepeated)!=parseInt(b.is_repeat),a=a||w.ctrlData.accountType!=R.payAccountDataOnForm.ctrlData.accountType,a=a||V.ctrlData.accountType!=R.recvAccountDataOnForm.ctrlData.accountType,w.ctrlData.accountType==R.payAccountDataOnForm.ctrlData.accountType&&w.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=a||w.otherBankAccount.cardInfo!=R.payAccountDataOnForm.otherBankAccount.cardInfo),V.ctrlData.accountType==R.recvAccountDataOnForm.ctrlData.accountType&&V.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=a||V.otherBankAccount.cardInfo!=R.recvAccountDataOnForm.otherBankAccount.cardInfo),a},it=function(){return g!=Y.MODIFY||At()?z()?void ot():!1:(r.makeToast(STRING_TABLE.PLEASE_COMMIT_AFTER_MODIFY,"short"),!1)},Dt=function(a){o.isRetCodePwdRetry(a.ret_code)?(R.outValue={},R.outValue.showPop=!0,R.outValue.oneLineTextLeft=a.ret_msg,R.outValue.twoButtonText1="重试",R.outValue.twoButtonText2="忘记密码",R.outValue.popClose=function(a){1==a?R.isPwdShow=!0:2==a&&N.goPage()}):(R.outValue={},R.outValue.showPop=!0,R.outValue.oneLineTextLeft=a.ret_msg,R.outValue.twoButtonText1="取消",R.outValue.twoButtonText2="忘记密码",R.outValue.popClose=function(a){1==a||2==a&&N.goPage()})},Tt=function(){R.showLoading=!1;var a={};a.payInfo=JSON.stringify(R.payAccountDataOnForm),a.recvInfo=JSON.stringify(R.recvAccountDataOnForm),a.isRepeated=R.isRepeated,a.nextTime=r.getYYYYMMDDStringByDate(R.dt),j(),a.dateDesc=R.tranDateDesc,a.planDesc="存取计划",a.amount=R.amount,u.path("/planResult").search(a),x()},dt=function(a){R.showLoading=!1,o.isRetCodePwd(a.ret_code)?Dt(a):r.makeToast(a.ret_msg)},pt=function(){n.requestTimeline(),r.makeToast("删除计划成功");var a={InitCalendarAll:!0,InitCalendarEventDate:!0,InitCalendarEventList:!0,InitPlans:!0};T.setCacheInfo("calendar_init_param",a),h.backPage()},lt=function(a){n.requestAddTransPlan(a).then(Tt,dt)},mt=function(a){b.id&&(a.id=b.id),n.requestModifyTransPlan(a).then(Tt,dt)},_t=function(a){b.id&&(a.id=b.id),n.requestDeleteTransPlan(a).then(pt,dt)},st=function(){R.showLoading=!0;var a=B.getProdInfo("001234"),n={};if(n.use_webank_card=!1,R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS)n.job_type=1,a&&(n.product_code=a.prod_code,n.product_name=a.prod_name),n.use_webank_card=R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD,n.use_webank_card||(n.bank_no=R.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,n.bank_name=R.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,n.card_no=R.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo);else if(R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS)n.job_type=2,a&&(n.product_code=a.prod_code,n.product_name=a.prod_name),n.use_webank_card=R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD,n.use_webank_card||(n.bank_no=R.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,n.bank_name=R.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName,n.card_no=R.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo);else if(R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD)n.job_type=3,n.bank_no=R.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,n.bank_name=R.payAccountDataOnForm.otherBankAccount.cardInfo.bankName,n.card_no=R.payAccountDataOnForm.otherBankAccount.cardInfo.cardNo;else{if(R.recvAccountDataOnForm.ctrlData.accountType!=c.ACCOUNT_TYPE.OTHER_BANK_CARD)return;n.job_type=4,n.bank_no=R.recvAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode,n.bank_name=R.recvAccountDataOnForm.otherBankAccount.cardInfo.bankName,n.card_no=R.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo}if(n.amount=R.amount,n.next_time=r.getYYYYMMDDStringByDate(R.dt),n.is_repeat=R.isRepeated,n.password=t.vm.formData.confirmPassword.RSA,n.remark=R.planName,g==Y.ADD){if(L>=5)return void r.makeToast("对不起，最多只能制定5个转账计划");n.remark||(n.remark=R.defaultName),lt(n)}else g==Y.MODIFY?mt(n):g==Y.DELETE&&_t(n)},Ct=function(){return R.planName&&R.planName.length>8?!1:R.amount&&Q()&&R.freqDesc&&R.dt&&$()},Ot=function(){if(R.dt&&void 0!=R.isRepeated&&null!=R.isRepeated){var a=r.getYYYYMMDDStringByDate(R.dt,"-");R.freqDetail=R.isRepeated?K?"每月"+R.dt.getDate()+"日23:59前"+ct()+"，"+a+"执行第1期":"每月"+R.dt.getDate()+"日23:59前"+ct():a+" 23:59前"+ct()}else R.freqDetail=""},ft=function(){return R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD?!!o.findCardFromPayableCardList(R.recvAccountDataOnForm.otherBankAccount.cardInfo.cardNo):!0},yt=function(){var a={},t=o.getValidBandCardList();return a={},a.cardInfo={},a.priority=3,t&&t.length>0&&(a.otherAccountList=t,a.cardInfo.bankBinCode=t[0].other_bank_bin_code,a.cardInfo.userName=t[0].other_name,a.cardInfo.cardNo=t[0].other_account,a.cardInfo.cardTypeCode=t[0].other_card_type_code,a.cardInfo.cardType=t[0].other_card_type,a.cardInfo.bankName=t[0].other_bank_name),a},Nt=function(){var a={},t=o.getPayableCardList();return a={},a.cardInfo={},a.priority=3,t&&t.length>0&&(a.otherAccountList=t,a.cardInfo.bankBinCode=t[0].other_bank_bin_code,a.cardInfo.userName=t[0].other_name,a.cardInfo.cardNo=t[0].other_account,a.cardInfo.cardTypeCode=t[0].other_card_type_code,a.cardInfo.cardType=t[0].other_card_type,a.cardInfo.bankName=t[0].other_bank_name),a},Et=function(){var a={};return a.amount=I.HJAmount,a.priority=1,a.isAvaliable=!0,a},kt=function(){var a={};return a.priority=2,a.amount=I.BankAmount,a.isAvaliable=!0,a};R.showSelectFreq=!1,R.recvAccountData={},R.payAccountData={},R.exchangeBtnClass="off",R.recvAccountDataOnForm={},R.payAccountDataOnForm={},R.tranDateDesc="",R.defaultName="",P.back=function(){E.backPage()},P.onClickSelectRecvAccount=function(){R.recvAccountData={},R.recvAccountData.ctrlData={},R.recvAccountData.ctrlData.title="请选择收款账户",R.recvAccountData.ctrlData.canBindNewCard=!0,G()?R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?(R.recvAccountData.otherBankAccount=yt(),R.recvAccountData.webankAccount=kt()):R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?(R.recvAccountData.otherBankAccount=yt(),R.recvAccountData.currentPlus=Et()):R.payAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(R.recvAccountData.currentPlus=Et(),R.recvAccountData.webankAccount=kt()):(R.recvAccountData.otherBankAccount=yt(),R.recvAccountData.currentPlus=Et(),R.recvAccountData.webankAccount=kt()),D(function(){P.showReceivableAccountSelector()},50)},P.onClickSelectPayAccount=function(){R.payAccountData={},R.payAccountData.ctrlData={},R.payAccountData.ctrlData.title="请选择付款账户",R.payAccountData.ctrlData.canBindNewCard=!0;var a=!0;J()?R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.CURRENT_PLUS?(R.payAccountData.otherBankAccount=Nt(),R.payAccountData.webankAccount=kt()):R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.WEBANK_CARD?(R.payAccountData.otherBankAccount=Nt(),R.payAccountData.currentPlus=Et()):R.recvAccountDataOnForm.ctrlData.accountType==c.ACCOUNT_TYPE.OTHER_BANK_CARD&&(R.payAccountData.currentPlus=Et(),R.payAccountData.webankAccount=kt(),a=!1):(R.payAccountData.otherBankAccount=Nt(),R.payAccountData.currentPlus=Et(),R.payAccountData.webankAccount=kt()),a&&(R.payAccountData.disabledOtherBankAccount=o.getUnableToPayCardList()),D(function(){P.showPaymentAccountSelector()},50)},P.onNameChanged=function(){R.planName&&R.planName.length>8},P.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(R.amount)},P.onRecvAccountSelected=function(){R.recvAccountDataOnForm=JSON.parse(JSON.stringify(R.recvAccountData)),R.exchangeBtnClass=$()&&ft()?"":"off",Ot(),ut()},P.onPayAccountSelected=function(){R.payAccountDataOnForm=JSON.parse(JSON.stringify(R.payAccountData)),R.exchangeBtnClass=$()&&ft()?"":"off",Ot()},P.onSelectFreq=function(){R.showSelectFreq=!0},P.onClickCloseFrequencySelector=function(){R.showSelectFreq=!1},P.onClickOnlyOnce=function(){R.freqDesc="仅此一次",R.isRepeated=0,R.showSelectFreq=!1,j(),Ot()},P.onClickRepeatPerMonth=function(){R.freqDesc="每月一次",R.isRepeated=1,R.showSelectFreq=!1,j(),Ot()},P.onInputBlur=function(){ut()},P.bindCard=function(){E.saveSession(R),F.goToBindCard()},P.onClickExchangeAccounts=function(){if("off"!=R.exchangeBtnClass){var a=null;a=R.payAccountDataOnForm,R.payAccountDataOnForm=R.recvAccountDataOnForm,R.recvAccountDataOnForm=a,Ot(),ut()}},P.onPwdSelectPayWay=function(){R.isPwdShow?(R.isPwdAutoShow=!0,R.isPwdShow=!1):R.isPwdAutoShow=!1,isChangingAccount=!0,P.onClickSelectPayAccount()},P.getPayAccountLimitDesc=function(){var a=gBankLimit[R.payAccountDataOnForm.otherBankAccount.cardInfo.bankBinCode];return a?"该卡单笔限额"+a.perOne+"元":""},P.onSelectRepeatedDay=function(a,t){var n=r.getDate();b&&b.id&&t>n.getDate()&&28>=t?(K=!1,E.getNextPlanExecuteDateByUser(t).then(function(a){R.dt=a},function(){}).then(function(){K=!0,j(),Ot()})):R.dt=E.getNextPlanExecuteDate(t),j(),Ot()},P.onSelectDate=function(){if(void 0==R.isRepeated)return void r.makeToast(STRING_TABLE.PLEASE_SELECT_PURCHASE_FREQUENCY);if(R.isRepeated)P.showDaySelect(R.dt);else{var a,n={date:U,minDate:U.valueOf(),mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"},c={date:U,minDate:U,mode:"date",doneButtonLabel:"确定",cancelButtonLabel:"取消"};a=r.isiOSDevice()?c:n,datePicker.show(a,function(a){return void 0==R.isRepeated?void r.makeToast(STRING_TABLE.PLEASE_SELECT_PURCHASE_FREQUENCY):1==R.isRepeated&&a&&a.getDate()>28?void r.makeToast(STRING_TABLE.INVALID_PLAN_DATE):void(a&&(R.dt=a,j(),t.$apply()))})}},P.getConfirmBtnClass=function(){var a="btn-c off",t="btn-c";return Ct()?t:a},P.onAmountChanged=function(){ut()},P.onClickConfirm=function(){"btn-c off"!=P.getConfirmBtnClass()&&(r.clickButtonReport("zidingyijihua_queding"),g=b.id?Y.MODIFY:Y.ADD,it())},P.onClickDeletePlan=function(){g=Y.DELETE,it()},t.$watch("sigOnPwdCommit",function(a,t){a!==t&&(R.isPwdShow=!1,st())}),t.$watch("data.isRepeated",function(a,t){1==a&&0==t&&(R.dt=null),Ot(),j()}),null!=E.getSession()&&(R=t.data=E.getSession(),E.clearSession()),M()}]);app.controller("PlanResultController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","LocationService",function(e,a,t,n,c,r,o,i,s,d,l,p,v,u,T,f,h,N,S,y,D,A){var C=a.data={},m=a.func={},k=null;if(f.planResultObj)try{k=JSON.parse(f.planResultObj)}catch(I){}if(k||(k=i.search()),k)try{C.planDesc=k.planDesc,C.amount=k.amount,C.dateDesc=k.dateDesc,C.isRepeated=k.isRepeated;var O=JSON.parse(k.payInfo),R=JSON.parse(k.recvInfo);if(C.payType=O.ctrlData.accountType,C.recvType=R.ctrlData.accountType,C.payType==n.ACCOUNT_TYPE.OTHER_BANK_CARD&&(C.bankName=O.otherBankAccount.cardInfo.bankName,C.cardNo=O.otherBankAccount.cardInfo.cardNo,C.cardType=O.otherBankAccount.cardInfo.cardType),C.recvType==n.ACCOUNT_TYPE.OTHER_BANK_CARD&&(C.bankName=R.otherBankAccount.cardInfo.bankName,C.cardNo=R.otherBankAccount.cardInfo.cardNo,C.cardType=R.otherBankAccount.cardInfo.cardType),C.today=o.getDate(),C.nextDate=o.getDateByYYYYMMDDString(k.nextTime),C.isRepeated){var B=C.nextDate.getMonth()+2;B>12&&(B-=12),10>B&&(B="0"+B);var _=C.nextDate.getDate();10>_&&(_="0"+_),C.dateStrAfterNext=B+"-"+_}}catch(I){}var g=function(e){p.setCacheInfo("planList",e.ret_data)};t.requestTransPlans().then(g),t.requestTimeline(),m.onClickFinish=function(){var e={InitCalendarAll:!0,InitCalendarEventDate:!0,InitCalendarEventList:!0,InitPlans:!0};p.setCacheInfo("calendar_init_param",e),A.backPage(2)}}]);app.controller("SalaryPlanController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","PlanService","BindNewCardService1","SalaryPlanService","RecentAccountService","HelpDetailService","ResetPasswdService","ProdInfoService","BindBankCardService","LocationService",function(a,t,n,e,o,c,r,u,i,d,A,D,s,l,p,T,f,_,y,h,C,k,m,B,N,S,I,v,P,g){var E=t.data={},w=t.func={},b=u.search();u.search("");var Y={NONE:0,ADD:1,MODIFY:2,DELETE:3},O=D.getCacheInfo("wealthNew"),L=c.parseRawWealthData_V3(O),R=Y.NONE,V=r.getDate();V.setDate(V.getDate()+1);var M=null,x=D.getCacheInfo("personalInfo");x&&(E.webankCardNo=x.webank_card_no);var U=!0,F=function(){if(!E.dt)return void(E.tranDateDetailDesc="为了确保转入成功，请选择发工资的后一天");var a=r.getYYYYMMDDStringByDate(E.dt,"-");E.tranDateDetailDesc=U?"每月"+E.dt.getDate()+"日23:59前转入到活期+，"+a+"执行第1期":"每月"+E.dt.getDate()+"日23:59前转入到活期+",E.tranDateDesc="每月"+E.dt.getDate()+"日"},K=function(){var a=parseFloat(E.amount);return!isNaN(a)&&a>=0&&r.isValidTransferAmount(E.amount)},H=function(){var a=!1,t=b.use_webank_card?e.ACCOUNT_TYPE.WEBANK_CARD:e.ACCOUNT_TYPE.OTHER_BANK_CARD;return a=a||r.getYYYYMMDDStringByDate(E.dt)!=b.next_time,a=a||parseFloat(E.amount)!=parseFloat(b.amount),a=a||E.payAccountData.ctrlData.accountType!=t,E.payAccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD&&(a=a||E.payAccountData.otherBankAccount.cardInfo.cardNo!=b.card_no),a},W=function(){if(E.payAccountData.ctrlData.accountType!=e.ACCOUNT_TYPE.OTHER_BANK_CARD)return!1;var a=gBankLimit[E.payAccountData.otherBankAccount.cardInfo.bankBinCode];return a?parseFloat(E.amount)>a.perOne?!0:void 0:!1},$=function(){if(R==Y.DELETE)return!0;if(!E.amount||!K())return r.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1;if(!E.dt)return r.makeToast(STRING_TABLE.INVALID_DATE),!1;if(W()){var a=gBankLimit[E.payAccountData.otherBankAccount.cardInfo.bankBinCode];return E.outValue={},E.outValue.showPop=!0,E.outValue.oneLineTextLeft="超过银行卡限额，"+E.payAccountData.otherBankAccount.cardInfo.bankName+E.payAccountData.otherBankAccount.cardInfo.cardType+"单笔"+a.perOne,parseFloat(a.perDay)>0&&(E.outValue.oneLineTextLeft+="，单日"+a.perDay),E.outValue.oneLineTextLeft+="。如需要大额度购买，请先转账至微众卡。",E.outValue.twoButtonText1="转账指引",E.outValue.twoButtonText2="关闭",E.outValue.popClose=function(a){1==a&&(B.saveSession(t.data),S.goPage("0"))},!1}return!0},G=function(){return R!=Y.MODIFY||H()?$()?void q():!1:(r.makeToast(STRING_TABLE.PLEASE_COMMIT_AFTER_MODIFY,"short"),!1)},q=function(){if(R==Y.DELETE)E.pwdSubTitle="删除计划",E.pwdTransDesc="",E.payWayDesc="";else{var a=r.getYYYYMMDDStringByDate(E.dt,"-");E.pwdSubTitle=a+"起,"+E.tranDateDesc+"存工资到活期+",E.pwdTransDesc=parseFloat(E.amount).toFixed(2)+"元";var t="使用";E.payAccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD?t+="微众卡":(t+=E.payAccountData.otherBankAccount.cardInfo.bankName,t+=E.payAccountData.otherBankAccount.cardInfo.cardType,t+=r.abridgeAccountNumber(E.payAccountData.otherBankAccount.cardInfo.cardNo)),t+="付款",E.payWayDesc=t}E.isPwdShow=!0},J=function(){M=N.loadRecentlyUsedBankCard(e.ACCOUT_BIZ_TYPE.PAYMENT)},Z=function(){E.payAccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD&&N.saveRecentlyUsedBankCard(e.ACCOUT_BIZ_TYPE.PAYMENT,E.payAccountData.otherBankAccount.cardInfo.cardNo)},j=function(){E.showLoading=!1;var a={};a.payInfo=JSON.stringify(E.payAccountData);var t={};t.ctrlData={},t.ctrlData.accountType=e.ACCOUNT_TYPE.CURRENT_PLUS,a.recvInfo=JSON.stringify(t),a.isRepeated=1,a.nextTime=r.getYYYYMMDDStringByDate(E.dt),F(),a.dateDesc=E.tranDateDesc,a.planDesc="存工资",a.amount=E.amount,u.path("/planResult").search(a),Z()},z=function(a){c.isRetCodePwdRetry(a.ret_code)?(E.outValue={},E.outValue.showPop=!0,E.outValue.oneLineTextLeft=a.ret_msg,E.outValue.twoButtonText1="重试",E.outValue.twoButtonText2="忘记密码",E.outValue.popClose=function(a){1==a?E.isPwdShow=!0:2==a&&I.goPage()}):(E.outValue={},E.outValue.showPop=!0,E.outValue.oneLineTextLeft=a.ret_msg,E.outValue.twoButtonText1="取消",E.outValue.twoButtonText2="忘记密码",E.outValue.popClose=function(a){1==a||2==a&&I.goPage()})},X=function(){if(void 0==E.amount||null==E.amount||""==E.amount||0==E.amount)return void(E.isAmountTipShown=!1);if(r.isValidTransferAmount(E.amount))if(W()){var a=gBankLimit[E.payAccountData.otherBankAccount.cardInfo.bankBinCode];if(a){var t="该卡本次最多可转出";t+=a.perOne,t+="元",E.amountTipText=t}else E.amountTipText=STRING_TABLE.AMOUNT_EXCEED_LIMIT;E.isAmountTipShown=!0}else E.isAmountTipShown=!1;else E.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,E.isAmountTipShown=!0};w.onAmountInputBlur=function(){X()};var Q=function(a){E.showLoading=!1,c.isRetCodePwd(a.ret_code)?z(a):r.makeToast(a.ret_msg)},at=function(){n.requestTimeline(),r.makeToast("计划删除成功");var a={InitCalendarAll:!0,InitCalendarEventDate:!0,InitCalendarEventList:!0,InitPlans:!0};D.setCacheInfo("calendar_init_param",a),g.backPage()},tt=function(a){b&&(a.id=b.id),n.requestDeleteTransPlan(a).then(at,Q)},nt=function(a){b&&(a.id=b.id),n.requestModifyTransPlan(a).then(j,Q)},et=function(a){n.requestAddTransPlan(a).then(j,Q)},ot=function(){E.showLoading=!0;var a=v.getProdInfo("001234"),n={};n.job_type=1,a&&(n.product_code=a.prod_code,n.product_name=a.prod_name),n.use_webank_card=E.payAccountData.ctrlData.accountType==e.ACCOUNT_TYPE.WEBANK_CARD,n.use_webank_card||(n.bank_no=E.payAccountData.otherBankAccount.cardInfo.bankBinCode,n.bank_name=E.payAccountData.otherBankAccount.cardInfo.bankName,n.card_no=E.payAccountData.otherBankAccount.cardInfo.cardNo),n.amount=E.amount,n.next_time=r.getYYYYMMDDStringByDate(E.dt),n.is_repeat=1,n.password=t.vm.formData.confirmPassword.RSA,n.remark="存工资",n.categry=1,R==Y.MODIFY?nt(n):R==Y.ADD?et(n):R==Y.DELETE&&tt(n)},ct=function(){if(b){if(!b.id)return void(b=null);if(E.hasOldPlan=!0,E.dt=r.getDateByYYYYMMDDString(b.next_time),E.amount=parseFloat(b.amount),F(),b.use_webank_card)E.payAccountData.ctrlData.accountType=e.ACCOUNT_TYPE.WEBANK_CARD;else{E.payAccountData.ctrlData.accountType=e.ACCOUNT_TYPE.OTHER_BANK_CARD;var a=c.getPayableCardList();for(var t in a){var n=a[t];if(n.other_account==b.card_no){E.payAccountData.otherBankAccount.cardInfo.bankBinCode=n.other_bank_bin_code,E.payAccountData.otherBankAccount.cardInfo.userName=n.other_name,E.payAccountData.otherBankAccount.cardInfo.cardNo=n.other_account,E.payAccountData.otherBankAccount.cardInfo.cardTypeCode=n.other_card_type_code,E.payAccountData.otherBankAccount.cardInfo.cardType=n.other_card_type,E.payAccountData.otherBankAccount.cardInfo.bankName=n.other_bank_name;break}}}}},rt=function(){E.payAccountData={},E.payAccountData.ctrlData={},E.payAccountData.ctrlData.title="请选择付款账户",E.payAccountData.ctrlData.accountType=e.ACCOUNT_TYPE.INVALID_TYPE,E.payAccountData.ctrlData.canBindNewCard=!0,E.payAccountData.webankAccount={},E.payAccountData.webankAccount.priority=0,E.payAccountData.webankAccount.amount=L.BankAmount,E.payAccountData.otherBankAccount={};var a=c.getPayableCardList();E.payAccountData.otherBankAccount.cardInfo={};var n=c.isTransVerificationAccount();if(n&&(t.data.payAccountData.ctrlData.canBindNewCard=!1),E.payAccountData.disabledOtherBankAccount=c.getUnableToPayCardList(),a&&a.length>0&&!n){E.payAccountData.otherBankAccount.otherAccountList=a;var o=a[0];for(var r in a)if(a[r].other_account==M){o=a[r];break}E.payAccountData.otherBankAccount.cardInfo.bankBinCode=o.other_bank_bin_code,E.payAccountData.otherBankAccount.cardInfo.userName=o.other_name,E.payAccountData.otherBankAccount.cardInfo.cardNo=o.other_account,E.payAccountData.otherBankAccount.cardInfo.cardTypeCode=o.other_card_type_code,E.payAccountData.otherBankAccount.cardInfo.cardType=o.other_card_type,E.payAccountData.otherBankAccount.cardInfo.bankName=o.other_bank_name}},ut=function(){J(),rt(),ct(),F()};E.hasOldPlan=!1,w.back=function(){B.backPage()},w.getBankCardLimitDesc=function(){if(E.payAccountData.ctrlData.accountType==e.ACCOUNT_TYPE.OTHER_BANK_CARD){if(!E.payAccountData.otherBankAccount.cardInfo.bankBinCode)return" ";var a=gBankLimit[E.payAccountData.otherBankAccount.cardInfo.bankBinCode];return a?"该卡单笔限额"+a.perOne+"元":" "}return" "},w.onClickMySalaryCard=function(){w.showPaymentAccountSelector()},w.onClickSalaryDate=function(){w.showSelect(E.dt)},t.headerText="请选择日期",t.callback=function(a){},w.onPwdSelectPayWay=function(){E.isPwdShow?(E.isPwdAutoShow=!0,E.isPwdShow=!1):E.isPwdAutoShow=!1,w.showPaymentAccountSelector()},w.onClickConfirm=function(){r.clickButtonReport("gongzi_queding"),R=b?Y.MODIFY:Y.ADD,G()},w.onClickDeletePlan=function(){R=Y.DELETE,G()},w.canCommit=function(){return E.dt&&E.amount&&E.payAccountData.ctrlData.accountType!=e.ACCOUNT_TYPE.INVALID_TYPE},w.isiOS=function(){return r.isiOSDevice()},w.isAndroid=function(){return!r.isiOSDevice()},w.onSelectNumber=function(a,t){var n=r.getDate();b&&b.id&&t>n.getDate()&&28>=t?(U=!1,k.getNextPlanExecuteDateByUser(t).then(function(a){E.dt=a},function(){}).then(function(){U=!0,F()})):E.dt=k.getNextPlanExecuteDate(t),F()},w.onAmountChanged=function(){X()},t.$watch("sigOnPwdCommit",function(a,t){a!==t&&(E.isPwdShow=!1,ot())}),w.bindCard=function(){B.saveSession(E),P.goToBindCard()},w.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(E.amount)},null!=B.getSession()&&(E=t.data=B.getSession(),B.clearSession()),ut()}]);app.controller("MortgagePlanController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","PlanService","BindNewCardService1","MortgatePlanService","RecentAccountService","ResetPasswdService","ProdInfoService","BindBankCardService","LocationService",function(t,e,n,a,o,c,r,u,i,d,s,D,l,A,f,v,h,_,m,T,S,C,B,g,k,p,I,w,P){var E=e.data={},N=e.func={},y=u.search();u.search("");var Y={NONE:0,ADD:1,MODIFY:2,DELETE:3},L=Y.NONE,R=r.getDate();R.setDate(R.getDate()+1);var b=null,M=!0,O=function(){if(!E.dt)return void(E.tranDateDetailDesc="为了确保转出成功，请选择还贷日的前一天");var t=r.getYYYYMMDDStringByDate(E.dt,"-");E.tranDateDetailDesc=M?"每月"+E.dt.getDate()+"日23:59前从活期+转出，"+t+"执行第1期":"每月"+E.dt.getDate()+"日23:59前从活期+转出",E.tranDateDesc="每月"+E.dt.getDate()+"日"},V=function(){var t=parseFloat(E.amount);return!isNaN(t)&&t>=0&&r.isValidTransferAmount(E.amount)},x=function(){return L==Y.DELETE?!0:E.amount&&V()?E.dt?!0:(r.makeToast(STRING_TABLE.INVALID_DATE),!1):(r.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1)},F=function(){var t=!1;return t=t||r.getYYYYMMDDStringByDate(E.dt)!=y.next_time,t=t||parseFloat(E.amount)!=parseFloat(y.amount),t=t||E.recvAccountData.otherBankAccount.cardInfo.cardNo!=y.card_no},U=function(){return L!=Y.MODIFY||F()?x()?void $():!1:(r.makeToast(STRING_TABLE.PLEASE_COMMIT_AFTER_MODIFY,"short"),!1)},$=function(){if(L==Y.DELETE)E.pwdSubTitle="删除计划",E.pwdTransDesc="",E.payWayDesc="";else{var t=r.getYYYYMMDDStringByDate(E.dt,"-");E.pwdSubTitle=t+"起，"+E.tranDateDesc+"从活期+转出",E.pwdTransDesc=parseFloat(E.amount).toFixed(2)+"元"}E.isPwdShow=!0},q=function(){E.showLoading=!1;var t={};t.recvInfo=JSON.stringify(E.recvAccountData);var e={};e.ctrlData={},e.ctrlData.accountType=a.ACCOUNT_TYPE.CURRENT_PLUS,t.payInfo=JSON.stringify(e),t.isRepeated=1,t.nextTime=r.getYYYYMMDDStringByDate(E.dt),O(),t.dateDesc=E.tranDateDesc,t.planDesc="还房贷",t.amount=E.amount,u.path("/planResult").search(t),X()},G=function(t){E.showLoading=!1,c.isRetCodePwd(t.ret_code)?z(t):r.makeToast(t.ret_msg)},H=function(){n.requestTimeline(),r.makeToast("计划删除成功");var t={InitCalendarAll:!0,InitCalendarEventDate:!0,InitCalendarEventList:!0,InitPlans:!0};D.setCacheInfo("calendar_init_param",t),P.backPage()},J=function(t){y&&(t.id=y.id),n.requestDeleteTransPlan(t).then(H,G)},K=function(t){y&&(t.id=y.id),n.requestModifyTransPlan(t).then(q,G)},W=function(t){n.requestAddTransPlan(t).then(q,G)},Z=function(){E.showLoading=!0;var t=I.getProdInfo("001234"),n={};n.job_type=2,t&&(n.product_code=t.prod_code,n.product_name=t.prod_name),n.bank_no=E.recvAccountData.otherBankAccount.cardInfo.bankBinCode,n.bank_name=E.recvAccountData.otherBankAccount.cardInfo.bankName,n.card_no=E.recvAccountData.otherBankAccount.cardInfo.cardNo,n.use_webank_card=!1,n.amount=E.amount,n.next_time=r.getYYYYMMDDStringByDate(E.dt),n.is_repeat=1,n.password=e.vm.formData.confirmPassword.RSA,n.remark="还房贷",n.categry=2,L==Y.MODIFY?K(n):L==Y.ADD?W(n):L==Y.DELETE&&J(n)},j=function(){if(y){if(!y.id)return void(y=null);E.hasOldPlan=!0,E.dt=r.getDateByYYYYMMDDString(y.next_time),E.amount=parseFloat(y.amount),O();var t=c.getValidBandCardList();for(var e in t){var n=t[e];if(n.other_account==y.card_no){E.recvAccountData.otherBankAccount.cardInfo.bankBinCode=n.other_bank_bin_code,E.recvAccountData.otherBankAccount.cardInfo.userName=n.other_name,E.recvAccountData.otherBankAccount.cardInfo.cardNo=n.other_account,E.recvAccountData.otherBankAccount.cardInfo.cardTypeCode=n.other_card_type_code,E.recvAccountData.otherBankAccount.cardInfo.cardType=n.other_card_type,E.recvAccountData.otherBankAccount.cardInfo.bankName=n.other_bank_name;break}}}},z=function(t){c.isRetCodePwdRetry(t.ret_code)?(E.outValue={},E.outValue.showPop=!0,E.outValue.oneLineTextLeft=t.ret_msg,E.outValue.twoButtonText1="重试",E.outValue.twoButtonText2="忘记密码",E.outValue.popClose=function(t){1==t?E.isPwdShow=!0:2==t&&p.goPage()}):(E.outValue={},E.outValue.showPop=!0,E.outValue.oneLineTextLeft=t.ret_msg,E.outValue.twoButtonText1="取消",E.outValue.twoButtonText2="忘记密码",E.outValue.popClose=function(t){1==t||2==t&&p.goPage()})},Q=function(){E.recvAccountData={},E.recvAccountData.ctrlData={},E.recvAccountData.ctrlData.title="请选择付款账户",E.recvAccountData.ctrlData.accountType=a.ACCOUNT_TYPE.OTHER_BANK_CARD,E.recvAccountData.ctrlData.canBindNewCard=!0,E.recvAccountData.otherBankAccount={};var t=c.getValidBandCardList();if(E.recvAccountData.otherBankAccount.cardInfo={},t&&t.length>0){E.recvAccountData.otherBankAccount.otherAccountList=t;var e=t[0];for(var n in t)if(t[n].other_account==b){e=t[n];break}E.recvAccountData.otherBankAccount.cardInfo.bankBinCode=e.other_bank_bin_code,E.recvAccountData.otherBankAccount.cardInfo.userName=e.other_name,E.recvAccountData.otherBankAccount.cardInfo.cardNo=e.other_account,E.recvAccountData.otherBankAccount.cardInfo.cardTypeCode=e.other_card_type_code,E.recvAccountData.otherBankAccount.cardInfo.cardType=e.other_card_type,E.recvAccountData.otherBankAccount.cardInfo.bankName=e.other_bank_name}},X=function(){E.recvAccountData.ctrlData.accountType==a.ACCOUNT_TYPE.OTHER_BANK_CARD&&k.saveRecentlyUsedBankCard(a.ACCOUT_BIZ_TYPE.RECEIVABLE,E.recvAccountData.otherBankAccount.cardInfo.cardNo)},te=function(){b=k.loadRecentlyUsedBankCard(a.ACCOUT_BIZ_TYPE.RECEIVABLE)},ee=function(){te(),Q(),j(),O()},ne=function(){return void 0==E.amount||null==E.amount||""==E.amount||0==E.amount?void(E.isAmountTipShown=!1):void(r.isValidTransferAmount(E.amount)?E.isAmountTipShown=!1:(E.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,E.isAmountTipShown=!0))};E.hasOldPlan=!1,N.back=function(){g.backPage()},N.onClickMyCard=function(){N.showReceivableAccountSelector()},N.onClickDate=function(){N.showSelect(E.dt)},N.onSelectNumber=function(t,e){var n=r.getDate();y&&y.id&&e>n.getDate()&&28>=e?(M=!1,C.getNextPlanExecuteDateByUser(e).then(function(t){M=!0,E.dt=t,O()})):E.dt=C.getNextPlanExecuteDate(e),O()},N.onPwdSelectPayWay=function(){E.isPwdShow?(E.isPwdAutoShow=!0,E.isPwdShow=!1):E.isPwdAutoShow=!1,N.showPaymentAccountSelector()},N.onClickConfirm=function(){r.clickButtonReport("fangdai_queding"),L=y?Y.MODIFY:Y.ADD,U()},N.onClickDeletePlan=function(){L=Y.DELETE,U()},N.canCommit=function(){return E.dt&&E.amount&&E.recvAccountData.otherBankAccount.cardInfo.cardNo},e.$watch("sigOnPwdCommit",function(t,e){t!==e&&(E.isPwdShow=!1,Z())}),N.bindCard=function(){g.saveSession(E),w.goToBindCard()},N.onInputBlur=function(){ne()},N.onAmountChanged=function(){ne()},N.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(E.amount)},N.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(E.amount)},N.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(E.amount)},null!=g.getSession()&&(E=e.data=g.getSession(),g.clearSession()),ee()}]);app.controller("TaxPlanController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","CheckFaceService","HandPasswordService","TransRecordService","dataService","PlanService","ResetPasswdService","LocationService","$sce","TaxPlanService","ProdInfoService",function(a,t,e,n,o,i,s,l,c,u,r,T,d,f,x,m,P,p,g,A,_,h,C,S,y,N){var w=t.data={},v=t.func={},E=function(){w.showTaxPop=!1,d.dimStatusBarBackground(!1),w.taxPlan=y.getTaxPlanInfo(),w.taxConfig=y.getTaxConfig(),w.from=m.from,k(),B(),L(),U(),$()},k=function(){R("fen"),w.isAgree=!1,O(),w.showTaxBtn="taxModify"==w.from?!1:!0},B=function(){w.taxStopTip=!1;var a=w.taxPlan;a&&"taxModify"!=w.from&&a.plan&&a.plan.status==n.DONATE_PLAN_STATUS.STOP&&(w.taxStopTip=!0,w.totalTimes=w.taxPlan.totalTimes,w.totalAmount=w.taxPlan.totalAmount)},L=function(){w.taxBtnName="我要捐赠",w.taxPlan&&w.taxPlan.plan&&w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.STOP&&(w.taxBtnName="我要捐赠")},O=function(){1==w.isAgree?(w.taxAgreeMentClass="checkbox-wrap",w.okBtnClass="btn-f"):(w.taxAgreeMentClass="checkbox-wrap off",w.okBtnClass="btn-f off")};v.back=function(){C.backPage()},v.clickTax=function(){s.clickButtonReport("shouyijuan_kaishijuanzeng"),w.showTaxPop=!0,d.dimStatusBarBackground(!0)},v.clickHistoryBanner=function(){s.clickButtonReport("shouyijuan_juanzenglishi"),C.go("/planTaxModify")},v.clickStartPlan=function(){s.clickButtonReport("shouyijuan_querenjuanzeng"),1==w.isAgree?(w.showTaxPop=!1,d.dimStatusBarBackground(!1),w.isPwdShow=!0):s.makeToast(STRING_TABLE.DONATE_PLEASE_SELECT_AGREEMENT)},v.clickAgreementDetail=function(){s.clickButtonReport("shouyijuan_agreement");var a=u.getEnvVariable().DATA_CGI_PREFIX+"html/donate/agreement.pdf";d.openPdf2(a,"用户协议")},v.clickTaxAgreement=function(){s.clickButtonReport("shouyijuan_gouxuanxieyi"),w.isAgree=1==w.isAgree?!1:!0,O()};var R=function(a){"fen"==a?(w.displayFenClass="item a selected",w.displayJiaoClass="item b ",w.displayYuanClass="item c ",w.demoIncome="12.34",w.demoTax="0.04",w.demoTaxAmount="1角",w.displayAmount="分",w.displayMealTime="每两个月",w.taxFenClass="selected",w.taxJiaoClass="",w.taxYuanClass="",w.taxType=n.DONATE_PLAN_TYPE.FEN,w.taxMealTime="平均每两个月捐出一份午餐",w.pwdSubTitle="设置 每天捐几分"):"jiao"==a?(w.displayFenClass="item a ",w.displayJiaoClass="item b selected",w.displayYuanClass="item c ",w.demoIncome="12.34",w.demoTax="0.34",w.demoTaxAmount="1元",w.displayAmount="角分",w.displayMealTime="每周",w.taxFenClass="",w.taxJiaoClass="selected",w.taxYuanClass="",w.taxType=n.DONATE_PLAN_TYPE.JIAO,w.taxMealTime="平均每周捐出一份午餐",w.pwdSubTitle="设置 每天捐几角"):"yuan"==a&&(w.displayFenClass="item a ",w.displayJiaoClass="item b ",w.displayYuanClass="item c selected",w.demoIncome="12.34",w.demoTax="2.34",w.demoTaxAmount="10元",w.displayAmount="元角分",w.displayMealTime="每天",w.taxFenClass="",w.taxJiaoClass="",w.taxYuanClass="selected",w.taxType=n.DONATE_PLAN_TYPE.YUAN,w.taxMealTime="平均每天捐出一份午餐",w.pwdSubTitle="设置 每天捐几元")};v.clickTaxPopClose=function(){w.showTaxPop=!1,d.dimStatusBarBackground(!1)},v.clickTaxPay=function(a){s.clickButtonReport("shouyijuan_shezhi_"+a),"fen"==a?w.taxType=n.DONATE_PLAN_TYPE.FEN:"jiao"==a?w.taxType=n.DONATE_PLAN_TYPE.JIAO:"yuan"==a&&(w.taxType=n.DONATE_PLAN_TYPE.YUAN),R(a)},v.clickMoreDetail=function(){s.clickButtonReport("shouyijuan_gengduoxiangqing");var a=u.getEnvVariable().DATA_CGI_PREFIX+"html/donate/donatedesc_all.html";C.go("/htmlPieceViewer/项目详情/"+encodeURIComponent(a))},v.share=function(){if(s.clickButtonReport("shouyijuan_share"),w.taxConfig&&w.taxConfig.share_config){var a=w.taxConfig.share_config.title,t=w.taxConfig.share_config.content,e=w.taxConfig.share_config.icon_url,n=w.taxConfig.share_config.redirect_url;d.sharePage(a,t,e,n)}},t.$watch("sigOnPwdCommit",function(a,t){if(a!==t){w.isPwdShow=!1;var e=w.taxPlan;if(e&&e.plan&&e.plan.status==n.DONATE_PLAN_STATUS.STOP)return w.taxStopTip=!0,void I();D()}});var D=function(){var a=b(0);a&&(e.requestAddDonatePlan(a).then(Y,j),w.showLoading=!0)},I=function(){if(w.taxPlan&&w.taxPlan.plan){var a=b(w.taxPlan.plan.id);a&&(e.requestModifyDonatePlan(a).then(Y,j),w.showLoading=!0)}},b=function(a){var e={},o={};o.job_type=w.taxType;var i=N.getProdInfo("001234");return i?(o.product_code=i.prod_code,o.remark="收益捐",o.activityId=n.DONATE_PLAN_ACTIVITYID.MFWC,o.status=n.DONATE_PLAN_STATUS.RUN,o.id=a,e.plan=o,e.pwd=t.vm.formData.confirmPassword.RSA,e):(s.makeToast(STRING_TABLE.DONATE_NO_HJ_ACCOUNT),null)},V=function(){if(E(),w.showLoading=!1,w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.RUN){var a=1==w.hasPlan?"modifyPlan":"newPlan";C.go("/planTaxSuc/"+a)}else s.makeToast("设置完成")},M=function(){s.makeToast("查询公益信息失败"),w.showLoading=!1},Y=function(){y.requstTaxPlan(V,M)},j=function(a){w.showLoading=!1,i.isRetCodePwd(a.ret_code)?F(a):s.makeToast(a.ret_msg)},F=function(a){i.isRetCodePwdRetry(a.ret_code)?(w.outValue={},w.outValue.showPop=!0,w.outValue.oneLineTextLeft=a.ret_msg,w.outValue.twoButtonText1="重试",w.outValue.twoButtonText2="忘记密码",w.outValue.popClose=function(a){1==a?w.isPwdShow=!0:2==a&&h.goPage()}):(w.outValue={},w.outValue.showPop=!0,w.outValue.oneLineTextLeft=a.ret_msg,w.outValue.twoButtonText1="取消",w.outValue.twoButtonText2="忘记密码",w.outValue.popClose=function(a){1==a||2==a&&h.goPage()})},U=function(){var a=u.getEnvVariable().DATA_CGI_PREFIX+"html/donate/donatedesc.html";c.get(S.trustAsResourceUrl(a)).success(function(a){w.sectionHtml=a})},J=function(){w.hasPlan=!1,w.taxPlan&&w.taxPlan.plan&&(w.hasPlan=!0)},$=function(){if(w.taxConfig&&w.taxConfig.share_config){var a=w.taxConfig.share_config.redirect_url;a&&""!=a&&(w.showShareConfig=!0)}};E(),J()}]);app.controller("TaxPlanModifyController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","TaxPlanService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","PlanService","ResetPasswdService","LocationService","ProdInfoService","$ionicScrollDelegate",function(a,t,e,n,o,i,s,l,c,u,r,x,T,f,P,d,g,p,_,C,m,A,y,h,N,S){var w=t.data={},E=t.func={},D=function(){b(),k(),L(),v(),M(),O(),R(),U(),I()},b=function(){w.taxPopClass="pop-bg hide",w.showStopTip=!1,T.dimStatusBarBackground(!1),w.taxPlan=o.getTaxPlanInfo(),w.taxConfig=o.getTaxConfig(),w.taxIsRunning=w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.RUN,w.dataCgiPrefix=u.getEnvVariable().DATA_CGI_PREFIX,w.showMoneyUsage=!0,w.tabMoneyUsageClass="item mod-tab-title active",w.tabDonateRecordClass="item mod-tab-title",w.donateList=[],w.hasMoreData=!0,w.curIndex=0,w.showLoading=!1,w.loadingTimer=null,w.myContent=S.$getByHandle("myContent")},k=function(){if(w.totaldaysClass="bt on",w.totalmealsClass="bt",w.descClass="pro-wrap flex day",w.taxConfig&&(w.moneyConfig=w.taxConfig.money_go_list,w.moneyConfig&&(1==w.moneyConfig.length?w.moneyConfig[0].class="first":(w.moneyConfig[0].class="first",w.moneyConfig[w.moneyConfig.length-1].class="last"))),w.taxPlan)if(w.totalTimes=w.taxPlan.totalTimes,w.totalMeals=parseInt(w.taxPlan.totalAmount/3),w.daysBtn="已坚持"+w.totalTimes+"天",w.mealsBtn="捐出"+w.totalMeals+"份午餐",w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.RUN){var a="分";w.taxPlan.plan.job_type==n.DONATE_PLAN_TYPE.FEN?a="分":w.taxPlan.plan.job_type==n.DONATE_PLAN_TYPE.JIAO?a="角":w.taxPlan.plan.job_type==n.DONATE_PLAN_TYPE.YUAN&&(a="元"),w.setting=a,w.todaytax=w.taxPlan.amountDesc,w.totaltax="累计捐出"+w.taxPlan.totalAmount+"元"}else w.setting="",w.todaytax="感谢您曾经的付出",w.totaltax="过去的"+w.taxPlan.totalTimes+"天里，您累计捐出"+w.taxPlan.totalAmount+"元"},L=function(){w.taxType=w.taxPlan.plan.job_type,B(w.taxType),w.isAgree=!1,Y()},B=function(a){a==n.DONATE_PLAN_TYPE.FEN?(w.taxFenClass="selected",w.taxJiaoClass="",w.taxYuanClass="",w.taxMealTime="每两个月",w.pwdSubTitle="设置 每天捐几分",w.showTaxMealTime=!0):a==n.DONATE_PLAN_TYPE.JIAO?(w.taxFenClass="",w.taxJiaoClass="selected",w.taxYuanClass="",w.taxMealTime="每周",w.pwdSubTitle="设置 每天捐几角",w.showTaxMealTime=!0):a==n.DONATE_PLAN_TYPE.YUAN?(w.taxFenClass="",w.taxJiaoClass="",w.taxYuanClass="selected",w.taxMealTime="每天",w.pwdSubTitle="设置 每天捐几元",w.showTaxMealTime=!0):(w.taxFenClass="",w.taxJiaoClass="",w.taxYuanClass="",w.taxMealTime="不再捐出爱心午餐",w.showTaxMealTime=!1)},v=function(){w.startPlanClass="a on",w.stopPlanClass="a-a",w.continuePlan=!0},M=function(){if(w.taxPlan)if("pro-wrap flex day"==w.descClass){var a=w.taxPlan.totalTimes;a||(a=0),a>=1?(w.leftPointClass="tw",w.leftPointDesc=a>1?a-1+"天":"好的开始"):(w.leftPointClass="tw hide",w.leftPointDesc=""),w.middlePointDesc=0==a?"好的开始":a+"天",w.rightPointDesc=a+1+"天"}else{var t=parseInt(w.taxPlan.totalAmount/3);t||(t=0),t>=1?(w.leftPointClass="tw",w.leftPointDesc=t>1?t-1+"餐":"好的开始"):(w.leftPointClass="tw hide",w.leftPointDesc=""),w.middlePointDesc=0==t?"好的开始":t+"餐",w.rightPointDesc=t+1+"餐"}},O=function(){w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.RUN?(w.taxBtnClass="buy-btn-wrap xg",w.taxBtnName="修改计划"):(w.taxBtnClass="buy-btn-wrap",w.taxBtnName="我要捐赠")},R=function(){if(w.taxConfig&&w.taxConfig.share_config){var a=w.taxConfig.share_config.redirect_url;a&&""!=a&&(w.showShareConfig=!0)}},U=function(){e.getPageFragment("html/donate/moneyUsage/money-usage-v2.html").then(function(a){w.moneyUsagePageFragment=a},function(){})},I=function(){E.loadMoreData()},Y=function(){1==w.isAgree?(w.taxAgreeMentClass="checkbox-wrap",w.okBtnClass="btn-f"):(w.taxAgreeMentClass="checkbox-wrap off",w.okBtnClass="btn-f off")};E.back=function(){h.backPage()},E.clickModify=function(){s.clickButtonReport("xiugaishouyijuan_xiugai"),w.showModifyPop=!0,T.dimStatusBarBackground(!0),w.taxType=w.taxPlan.plan.job_type,B(w.taxType),v()},E.clickModifyPlan=function(){if(1==w.isAgree){if(w.taxType==w.taxPlan.plan.job_type&&w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.RUN)return void s.makeToast(STRING_TABLE.DONATE_SAME_SELECTION);w.showModifyPop=!1,T.dimStatusBarBackground(!1),1==w.continuePlan?w.isPwdShow=!0:(w.showStopTip=!0,T.dimStatusBarBackground(!0))}else s.makeToast(STRING_TABLE.DONATE_PLEASE_SELECT_AGREEMENT)},E.clickTaxAgreement=function(){s.clickButtonReport("xiugaishouyijuan_gouxuanxieyi"),w.isAgree=1==w.isAgree?!1:!0,Y()},E.clickTaxPopClose=function(){w.showModifyPop=!1,T.dimStatusBarBackground(!1)},E.clickAgreementDetail=function(){s.clickButtonReport("xiugaishouyijuan_agreement");var a=u.getEnvVariable().DATA_CGI_PREFIX+"html/donate/agreement.pdf";T.openPdf2(a,"用户协议")},E.clickTaxPay=function(a){s.clickButtonReport("xiugaishouyijuan_shezhi_"+a),j(!0),"fen"==a?w.taxType=n.DONATE_PLAN_TYPE.FEN:"jiao"==a?w.taxType=n.DONATE_PLAN_TYPE.JIAO:"yuan"==a&&(w.taxType=n.DONATE_PLAN_TYPE.YUAN),B(w.taxType)},E.clickDescButton=function(a){"day"==a?(w.totaldaysClass="bt on",w.totalmealsClass="bt",w.descClass="pro-wrap flex day"):"meal"==a&&(w.totaldaysClass="bt",w.totalmealsClass="bt on",w.descClass="pro-wrap flex meal"),M()},E.clickModifyTypeButton=function(a){s.clickButtonReport("xiugaishouyijuan_querenxiugai_"+a),"start"==a?(j(!0),w.taxType=n.DONATE_PLAN_TYPE.FEN,B(w.taxType)):"stop"==a&&(j(!1),w.taxType=n.DONATE_PLAN_TYPE.NONE,B(w.taxType))},E.share=function(){if(s.clickButtonReport("xiugaishouyijuan_querenxiugai_share"),w.taxConfig&&w.taxConfig.share_config){var a=w.taxConfig.share_config.title,t=w.taxConfig.share_config.content,e=w.taxConfig.share_config.icon_url,n=w.taxConfig.share_config.redirect_url;T.sharePage(a,t,e,n)}};var j=function(a){1==a?(w.startPlanClass="a on",w.stopPlanClass="a-a",w.continuePlan=!0):(w.startPlanClass="a",w.stopPlanClass="a-a on",w.continuePlan=!1)};E.clickTaxDetail=function(){s.clickButtonReport("xiugaishouyijuan_xiangmuxiangqing"),h.go("/planTax/taxModify")},E.clickContinue=function(){w.showStopTip=!1,T.dimStatusBarBackground(!1),s.clickButtonReport("xiugaishouyijuan_continue")},E.clickStop=function(){w.showStopTip=!1,T.dimStatusBarBackground(!1),w.pwdSubTitle="停止益点心意",w.isPwdShow=!0,s.clickButtonReport("xiugaishouyijuan_stop")},E.clickSwitchTab=function(a){if(w.showMoneyUsage!=a){w.showMoneyUsage=a;var t=w.tabMoneyUsageClass;w.tabMoneyUsageClass=w.tabDonateRecordClass,w.tabDonateRecordClass=t,w.myContent.resize()}},E.loadMoreData=function(){w.hasMoreData&&e.requestDonateList(w.curIndex,30).then(function(a){if(a&&a.ret_data&&a.ret_data.donate_list){w.curIndex=a.ret_data.next_index;var e=a.ret_data.donate_list;for(var n in e){var o=e[n],i=o;i.amountStr="捐赠 "+o.donate_amt+"元",i.dateStr=o.donate_time,w.donateList.push(i)}}a.ret_data.has_next||(w.hasMoreData=!1),t.$broadcast("scroll.infiniteScrollComplete")},function(){t.$broadcast("scroll.infiniteScrollComplete")})},E.hasMoreData=function(){return w.hasMoreData},t.$watch("sigOnPwdCommit",function(a,t){a!==t&&(w.isPwdShow=!1,1==w.continuePlan?V():F())});var V=function(){if(w.taxPlan&&w.taxPlan.plan){var a=$(n.DONATE_PLAN_STATUS.RUN,w.taxPlan.plan.id);e.requestModifyDonatePlan(a).then(G,H),w.showLoading=!0}},F=function(){if(w.taxPlan&&w.taxPlan.plan){var a=$(n.DONATE_PLAN_STATUS.STOP,w.taxPlan.plan.id);e.requestModifyDonatePlan(a).then(G,H),w.showLoading=!0}},$=function(a,e){var o={},i={};i.job_type=n.DONATE_PLAN_STATUS.RUN==a?w.taxType:w.taxPlan.plan.job_type;var l=N.getProdInfo("001234");return l?(i.product_code=l.prod_code,i.remark="收益捐",i.activityId=n.DONATE_PLAN_ACTIVITYID.MFWC,i.status=a,i.id=e,o.plan=i,o.pwd=t.vm.formData.confirmPassword.RSA,o):(s.makeToast(STRING_TABLE.DONATE_NO_HJ_ACCOUNT),null)},J=function(){D(),w.showLoading=!1,w.taxPlan.plan.status==n.DONATE_PLAN_STATUS.RUN?h.go("/planTaxSuc/modifyPlan"):s.makeToast("设置完成")},q=function(){s.makeToast("查询公益信息失败"),w.showLoading=!1},G=function(){o.requstTaxPlan(J,q)},H=function(a){i.isRetCodePwd(a.ret_code)?z(a):s.makeToast(a.ret_msg),w.showLoading=!1},z=function(a){i.isRetCodePwdRetry(a.ret_code)?(w.outValue={},w.outValue.showPop=!0,w.outValue.oneLineTextLeft=a.ret_msg,w.outValue.twoButtonText1="重试",w.outValue.twoButtonText2="忘记密码",w.outValue.popClose=function(a){1==a?w.isPwdShow=!0:2==a&&y.goPage()}):(w.outValue={},w.outValue.showPop=!0,w.outValue.oneLineTextLeft=a.ret_msg,w.outValue.twoButtonText1="取消",w.outValue.twoButtonText2="忘记密码",w.outValue.popClose=function(a){1==a||2==a&&y.goPage()})};D()}]);app.controller("TaxResultController",["$scope","essential","LocationService","TaxPlanService","GLOBAL_CONSTANT","$stateParams","utils",function(a,n,t,o,i,e,r){var c=a.data={},f=a.func={};f.clickInvite=function(){if(r.clickButtonReport("shouyijuan_jieguo_share"),c.taxConfig&&c.taxConfig.share_config){var a=c.taxConfig.share_config.title,t=c.taxConfig.share_config.content,o=c.taxConfig.share_config.icon_url,i=c.taxConfig.share_config.redirect_url;n.sharePage(a,t,o,i)}},f.clickFinish=function(){t.go("/transHome")};var s=function(){if(c.taxConfig=o.getTaxConfig(),c.taxPlan=o.getTaxPlanInfo(),c.taxPlan.plan.job_type==i.DONATE_PLAN_TYPE.FEN?c.taxDesc="分":c.taxPlan.plan.job_type==i.DONATE_PLAN_TYPE.JIAO?c.taxDesc="角":c.taxPlan.plan.job_type==i.DONATE_PLAN_TYPE.YUAN&&(c.taxDesc="元"),c.taxConfig&&c.taxConfig.share_config){var a=c.taxConfig.share_config.redirect_url;a&&""!=a&&(c.showShareConfig=!0)}c.startTimeDesc="明日起执行",c.from=e.from,c.from&&"modifyPlan"==c.from&&(c.startTimeDesc="立即生效")};s()}]);var TRANS_ACCOUNT_SELECTOR_SCENE={INVALID_SCENE:0,TRANS_OUT:1,COMMON_PLAN:2};app.controller("TransferOutAccountSelector",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","TransferOutAccountSelectorService",function(e,n,a,c,t,o,C,r,T,i,_,N,A,E,S,s,u,O,R,P,d,L){var h=n.data={},U=n.func={};h.showLoading=!1;var k=r.search();r.search(""),h.historyPayeeList=[];var v={};v.paramType=SEARCH_PARAM_TYPE.PAYEE;var f=function(e){h.historyPayeeList=e.ret_data,p(h.historyPayeeList)},y=function(){a.reqeustHistoryPayee().then(f).then(function(){h.showLoading=!1})},p=function(e){e&&$.each(e,function(e,n){C.loadImage("../img/bankHead/yh-"+(n.other_bank_bin_code||0)+"@nb.png",function(e,a){_(function(){n.bankImg2=e?a:""})})})},l=function(){var e=N.getCacheInfo("personalInfo");null!=e&&(h.webankCardNo=e.webank_card_no,h.bindCardList=o.getValidBandCardList(),p(h.bindCardList)),y()};U.back=function(){L.backPage()},U.onClickWebankCard=function(){v.accountType=c.ACCOUNT_TYPE.WEBANK_CARD,L.setBackData(v),L.backPage()},U.onClickCurrentPlusAccount=function(){v.accountType=c.ACCOUNT_TYPE.CURRENT_PLUS,L.setBackData(v),L.backPage()},U.onClickBankCard=function(e){v.accountType=c.ACCOUNT_TYPE.OTHER_BANK_CARD,v.cardNo=e.other_account,v.userName=e.other_name,L.setBackData(v),L.backPage()},U.isWebankCardShown=function(){return k.scene==TRANS_ACCOUNT_SELECTOR_SCENE.TRANS_OUT?k.transType==c.TRANS_TYPE.CURRENT_PLUS:k.scene==TRANS_ACCOUNT_SELECTOR_SCENE.COMMON_PLAN?k.payAccountType!=c.ACCOUNT_TYPE.WEBANK_CARD:void 0},U.isCurrentPlusAccountShow=function(){return k.scene==TRANS_ACCOUNT_SELECTOR_SCENE.TRANS_OUT?k.transType==c.TRANS_TYPE.WEBANK_CARD:k.scene==TRANS_ACCOUNT_SELECTOR_SCENE.COMMON_PLAN?k.payAccountType!=c.ACCOUNT_TYPE.CURRENT_PLUS:void 0},U.isOtherBankCardShow=function(){return k.scene==TRANS_ACCOUNT_SELECTOR_SCENE.TRANS_OUT?!0:k.scene==TRANS_ACCOUNT_SELECTOR_SCENE.COMMON_PLAN?k.payAccountType!=c.ACCOUNT_TYPE.OTHER_BANK_CARD:void 0},l()}]);app.controller("TransferOtpController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","cgiService","$stateParams","$RSA","cache","essential","ChangePasswdService","TransferOtpService",function(e,t,o,n,a,u,i,r,c,s,m,T){var p=T.getData(),l=null,f="";p&&(l=p.otpSession,f=p.usage);var d=0,h=c.getCacheInfo("personalInfo");h&&(d=h.phone_no||0,e.phoneNumber=d||"",t(function(){e.onGetOTP()},200)),e.isPwdKeyboardShow=!1,e.otpTimeOutShow=!0,e.data={},e.otpButtonController="btn";var N=function(){e.otpButtonController="btn off",t(S,2e3)},S=function(){e.otpButtonController="btn"};e.loginButtonController="btn-c";var v=function(){e.loginButtonController="btn-c off",t(O,2e3)},O=function(){e.loginButtonController="btn-c"},P=function(){var t=new Date;e.pausetime=t.getTime()},C=function(){var t=new Date;e.resumetime=t.getTime(),e.pausetime&&(e.checkNumTimeout-=Math.round((e.resumetime-e.pausetime)/1e3),e.checkNumTimeout<0&&(e.checkNumTimeout=0),e.pausetime=0)},g=function(){return e.checkNumTimeout-=1,e.checkNumTimeout<=0?(e.otpTimeOutShow=!0,document.removeEventListener("pause",P,!1),void document.removeEventListener("resume",C,!1)):void t(function(){g()},1e3)};e.onGetOTP=function(){if("btn off"!=e.otpTimeOutShow){N(),s.readSMSVerifyCode().then(function(t){e.data.otp||(e.data.placeOtp=t.smsCode,e.data.otp=t.smsCode)});var t={};f==n.TRANS_OTP_SCENE.TRANS_OUT?t.usage_id=n.OPT_TYPE.TRANS:f==n.TRANS_OTP_SCENE.PLAN&&(t.usage_id=n.OPT_TYPE.PLAN),t.otp_params_session=l,u.requestOTPAndCheckBindPhone(t).then(function(){e.otpTimeOutShow=!1,e.checkNumTimeout=60,document.addEventListener("pause",P,!1),document.addEventListener("resume",C,!1),g()},function(e){a.makeToast(e.ret_msg,"short")})}},e.onClickNext=function(){if("btn-c off"!=e.loginButtonController){if(v(),!a.isValidPhoneOtpNumber(e.data.otp))return void a.makeToast(STRING_TABLE.INVALID_OTP);T.setData(null),T.setData({phone:e.phoneNumber,otp:e.data.otp}),T.backPage()}},e.back=function(){T.backPage()}}]);app.controller("TransferOutScenePlanController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","homeService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","messageService","CheckFaceService","HandPasswordService","TransRecordService","dataService","PlanServiceV2","BindNewCardService1","TransOutScenePlanService","RecentAccountService","TransferOtpService","ResetPasswdService","ProdInfoService",function(e,t,n,a,o,c,r,u,i,s,d,l,_,A,D,T,f,C,m,E,N,v,S,p,R,P,I,h){var B=t.data={},g=t.func={},k=u.search();u.search(""),B.oldPlan=k.planInfo,B.scene=k.scene,B.hasOldPlan=!1,B.ignoreRiskSession="";var w={NONE:0,ADD:1,MODIFY:2,DELETE:3};B.operType=w.NONE;var y=new Date;y.setDate(y.getDate()+1);var L="",Y=null,O="";B.isTransDateConfirmed=!0;var M=function(){if(B.dt){var e=r.getYYYYMMDDStringByDate(B.dt,"-");B.tranDateDetailDesc=B.isTransDateConfirmed?"每月"+B.dt.getDate()+"日23:59前从活期+转出，"+e+"执行第1期":"每月"+B.dt.getDate()+"日23:59前从活期+转出",B.tranDateDesc="每月"+B.dt.getDate()+"日"}},V=function(){var e=parseFloat(B.amount);return!isNaN(e)&&e>=0&&r.isValidTransferAmount(B.amount)},U=function(){return B.operType==w.DELETE?!0:B.recvAccountData.otherBankAccount.cardInfo.userName?B.recvAccountData.otherBankAccount.cardInfo.cardNo?B.amount&&V()?B.dt?!0:(r.makeToast(STRING_TABLE.INVALID_DATE),!1):(r.makeToast(STRING_TABLE.INVALID_TRANS_AMOUNT),!1):(r.makeToast(STRING_TABLE.INVALID_CARD_NO),!1):(r.makeToast(STRING_TABLE.INVALID_USER_NAME),!1)},b=function(){var e=!1;return e=e||r.getYYYYMMDDStringByDate(B.dt)!=B.oldPlan.next_time,e=e||parseFloat(B.amount)!=parseFloat(B.oldPlan.amount),e=e||B.recvAccountData.otherBankAccount.cardInfo.cardNo!=B.oldPlan.card_no},G=function(){return B.operType!=w.MODIFY||b()?U()?void x():!1:(r.makeToast(STRING_TABLE.PLEASE_COMMIT_AFTER_MODIFY,"short"),!1)},x=function(){if(B.operType==w.DELETE)B.pwdSubTitle="删除计划",B.pwdTransDesc="",B.payWayDesc="";else{var e=r.getYYYYMMDDStringByDate(B.dt,"-");B.pwdSubTitle=e+"起，"+B.tranDateDesc+"从活期+转出",B.pwdTransDesc=parseFloat(B.amount).toFixed(2)+"元"}B.isPwdShow=!0},H=function(){B.showLoading=!1;var e={};e.recvInfo=JSON.stringify(B.recvAccountData);var t={};t.ctrlData={},t.ctrlData.accountType=a.ACCOUNT_TYPE.CURRENT_PLUS,e.payInfo=JSON.stringify(t),e.isRepeated=1,e.nextTime=r.getYYYYMMDDStringByDate(B.dt),M(),e.dateDesc=B.tranDateDesc,e.planDesc=W(),e.amount=B.amount,u.path("/planResult").search(e),et()},F=function(e){B.outValue={},B.outValue.showPop=!0,B.outValue.oneLineTextLeft=e,B.outValue.twoButtonText1="终止",B.outValue.twoButtonText2="继续",B.outValue.popClose=function(e){2==e?d(function(){p.saveSession(B),P.goPage(null,null,{otpSession:err.ret_data.otp_params_session,usage:a.TRANS_OTP_SCENE.PLAN})},200):B.ignoreRiskSession=""}},K=function(e){B.showLoading=!1,c.isRetCodePwd(e.ret_code)?z(e):e.ret_code==a.CGI_RET.CGI_RET_TRANS_NEED_OTP?(p.saveSession(B),P.goPage(null,null,{otpSession:e.ret_data.otp_params_session,usage:a.TRANS_OTP_SCENE.PLAN})):e.ret_code==a.CGI_RET.CGI_RET_TRANS_GRAY_LIST?(B.ignoreRiskSession=e.ret_data.ignore_session,F(e.ret_msg,e.ret_data.otp_params_session)):r.makeToast(e.ret_msg),L=""},$=function(){n.requestTimeline(),r.makeToast("计划删除成功"),u.path("/transHome/updatePlan")},q=function(e){B.oldPlan&&(e.id=B.oldPlan.id),n.requestDeleteTransPlan(e).then($,K)},X=function(e){B.oldPlan&&(e.id=B.oldPlan.id),n.requestModifyTransPlan(e).then(H,K)},J=function(e){n.requestAddTransPlan(e).then(H,K)},W=function(){return B.scene==a.PLAN_CATAGRY.PAY_RENT?"交房租":B.scene==a.PLAN_CATAGRY.RESPECT_PARENT?"孝敬父母":void 0},Z=function(){B.showLoading=!0;var e=h.getProdInfo("001234"),t={};t.job_type=2,e&&(t.product_code=e.prod_code,t.product_name=e.prod_name),t.bank_no=B.recvAccountData.otherBankAccount.cardInfo.bankBinCode,t.bank_name=B.recvAccountData.otherBankAccount.cardInfo.bankName,t.card_no=B.recvAccountData.otherBankAccount.cardInfo.cardNo,t.name=B.recvAccountData.otherBankAccount.cardInfo.userName,t.phone_check_num=L,t.use_webank_card=!1,t.amount=B.amount,t.next_time=r.getYYYYMMDDStringByDate(B.dt),t.is_repeat=1,t.password=B.pwdRSA,t.remark=W(),t.categry=B.scene,t.ignore_risk=""!=B.ignoreRiskSession,t.ignore_session=B.ignoreRiskSession,B.operType==w.MODIFY?X(t):B.operType==w.ADD?J(t):B.operType==w.DELETE&&q(t),B.ignoreRiskSession=""},j=function(){if(B.oldPlan){if(!B.oldPlan.id)return void(B.oldPlan=null);B.hasOldPlan=!0,B.dt=r.getDateByYYYYMMDDString(B.oldPlan.next_time),B.amount=parseFloat(B.oldPlan.amount),B.recvAccountData.otherBankAccount.cardInfo.cardNo=B.oldPlan.card_no,B.recvAccountData.otherBankAccount.cardInfo.userName=B.oldPlan.name,M(),lt()}},z=function(e){c.isRetCodePwdRetry(e.ret_code)?(B.outValue={},B.outValue.showPop=!0,B.outValue.oneLineTextLeft=e.ret_msg,B.outValue.twoButtonText1="重试",B.outValue.twoButtonText2="忘记密码",B.outValue.popClose=function(e){1==e?B.isPwdShow=!0:2==e&&I.goPage()}):(B.outValue={},B.outValue.showPop=!0,B.outValue.oneLineTextLeft=e.ret_msg,B.outValue.twoButtonText1="取消",B.outValue.twoButtonText2="忘记密码",B.outValue.popClose=function(e){1==e||2==e&&I.goPage()})},Q=function(){B.recvAccountData={},B.recvAccountData.ctrlData={},B.recvAccountData.ctrlData.title="请选择付款账户",B.recvAccountData.ctrlData.accountType=a.ACCOUNT_TYPE.OTHER_BANK_CARD,B.recvAccountData.ctrlData.canBindNewCard=!0,B.recvAccountData.otherBankAccount={},B.recvAccountData.otherBankAccount.cardInfo={}},et=function(){B.recvAccountData.ctrlData.accountType==a.ACCOUNT_TYPE.OTHER_BANK_CARD&&R.saveRecentlyUsedBankCard(a.ACCOUT_BIZ_TYPE.RECEIVABLE,B.recvAccountData.otherBankAccount.cardInfo.cardNo)},tt=function(){Y=R.loadRecentlyUsedBankCard(a.ACCOUT_BIZ_TYPE.RECEIVABLE)},nt=function(){B.scene==a.PLAN_CATAGRY.RESPECT_PARENT?(B.titleDesc="孝敬父母",B.formRecvNameDesc="父母的名字",B.formRecvCardNo="父母的卡号",B.formPlanDate="几号给父母",B.formPlanAmount="每月给多少",B.formOtherCardName="父母的卡"):B.scene==a.PLAN_CATAGRY.PAY_RENT&&(B.titleDesc="交房租",B.formRecvNameDesc="房东的名字",B.formRecvCardNo="房东的卡号",B.formPlanDate="几号交房租",B.formPlanAmount="房租是多少",B.formOtherCardName="房租卡")},at=function(){var e=P.getData();return P.setData(null),e&&e.otp?(L=e.otp,void Z()):void(B.ignoreRiskSession="")},ot=function(){null!=p.getSession()&&(B=t.data=p.getSession(),p.clearSession())},ct=function(){nt(),tt(),Q(),j(),ot(),M(),at()},rt=function(){return void 0==B.amount||null==B.amount||""==B.amount||0==B.amount?void(B.isAmountTipShown=!1):void(r.isValidTransferAmount(B.amount)?B.isAmountTipShown=!1:(B.amountTipText=STRING_TABLE.INVALID_TRANS_AMOUNT,B.isAmountTipShown=!0))};g.back=function(){p.backPage()},g.onClickMyCard=function(){g.showReceivableAccountSelector()},g.onClickDate=function(){g.showSelect(B.dt)},g.onSelectNumber=function(e,t){var n=r.getDate();B.oldPlan&&B.oldPlan.id&&t>n.getDate()&&28>=t?(B.isTransDateConfirmed=!1,v.getNextPlanExecuteDateByUser(t).then(function(e){B.dt=e},function(){}).then(function(){B.isTransDateConfirmed=!0,M()})):B.dt=v.getNextPlanExecuteDate(t),M()};var ut=function(e){B.recvAccountData.otherBankAccount.cardInfo.bankBinCode=e.ret_data.clear_no_pbc,B.recvAccountData.otherBankAccount.cardInfo.cardTypeCode=e.ret_data.card_typeid,B.recvAccountData.otherBankAccount.cardInfo.cardType=e.ret_data.card_type,B.recvAccountData.otherBankAccount.cardInfo.bankName=e.ret_data.bank_name},it=function(e){B.recvAccountData.otherBankAccount.cardInfo.bankBinCode="",B.recvAccountData.otherBankAccount.cardInfo.cardTypeCode="",B.recvAccountData.otherBankAccount.cardInfo.cardType="",B.recvAccountData.otherBankAccount.cardInfo.bankName="",e.ret_code==a.CGI_RET.CGI_UNUSED_CARD||e.ret_code==a.CGI_RET.CGI_UNUSED_CARD_2?dt==st.CHECK_SIX_NUMBER?dt++:dt==st.CHECK_TEN_NUMBER:(e.ret_code==a.CGI_RET.CGI_NEED_MORE_CARD_NO||e.ret_code==a.CGI_RET.CGI_NEED_MORE_CARD_NO_2)&&(dt=st)},st={CHECK_SIX_NUMBER:0,CHECK_TEN_NUMBER:1,CHECK_TOTAL_NUMBER:2},dt=st.CHECK_SIX_NUMBER,lt=function(){var e=B.recvAccountData.otherBankAccount.cardInfo.cardNo;if(!e||e.length<6)return B.recvAccountData.otherBankAccount.cardInfo.bankBinCode="",B.recvAccountData.otherBankAccount.cardInfo.cardTypeCode="",B.recvAccountData.otherBankAccount.cardInfo.cardType="",B.recvAccountData.otherBankAccount.cardInfo.bankName="",void(dt=st.CHECK_SIX_NUMBER);if(dt==st.CHECK_SIX_NUMBER){var t=e.substr(0,6);if(t==O)return;O=t}else if(dt==st.CHECK_TEN_NUMBER){if(e.length<10)return;var n=e.substr(0,10);if(n==O)return;O=n}else dt==st.CHECK_TOTAL_NUMBER;_t(e)},_t=function(e){n.requestBankInfo(e,"trans_out").then(ut,it)};g.onRecvCardChanged=function(){lt()},g.onPwdSelectPayWay=function(){B.isPwdShow?(B.isPwdAutoShow=!0,B.isPwdShow=!1):B.isPwdAutoShow=!1,g.showPaymentAccountSelector()},g.onClickConfirm=function(){r.clickButtonReport("fangdai_queding"),B.operType=B.oldPlan?w.MODIFY:w.ADD,G()},g.onClickDeletePlan=function(){B.operType=w.DELETE,G()},g.canCommit=function(){return B.dt&&B.amount&&B.recvAccountData.otherBankAccount.cardInfo.cardNo},t.$watch("sigOnPwdCommit",function(e,n){e!==n&&(B.isPwdShow=!1,B.pwdRSA=t.vm.formData.confirmPassword.RSA,Z())}),g.bindCard=function(){p.saveSession(B),S.goPage()},g.onInputBlur=function(){rt()},g.onAmountChanged=function(){rt()},g.getChineseAmount=function(){return r.convertCurrencyToChineseStyle(B.amount)},ct()}]);app.controller("RedPacketListController",["$rootScope","$scope","cgiService","GLOBAL_CONSTANT","dataService","LocationService",function(t,e,a,c,n,s){var r=["","","待使用","已使用","已过期"],i=function(t){e.renderList=[],$.each(t,function(t,a){a.classStr="px mgt20",r[a.status]&&(a.useStr=r[a.status],2!=a.status?(a.classStr+=" unavailable",a.notShowRadio=!0):a.selected&&(a.classStr+=" checked",a.notShowRadio=!1),a.timeStr=a.expireTime.substr(0,19),e.renderList.push(a))}),e.renderList.sort(function(t,e){return t.status-e.status})},o=function(){var t=function(t){t&&t.data&&t.status==c.ACCOUNT_STATE.USER_STATE_HAS_ACCOUNT&&t.data.length>0&&i(t.data)};n.getRedPacket().then(t,function(){},t)};e.onClickSure=function(){s.backPage({backData:"redPacketListPage"})},e.onClickItem=function(t){if(!t.notShowRadio){for(var a=0;a<e.renderList.length;a++)e.renderList[a].selected=!1,e.renderList[a].selectId=t.redPacketID;t.selected=!0}},e.onClassItem=function(t){var e="px mgt20";return 2!=t.status?e+=" unavailable":t.selected&&(e+=" checked"),e},e.back=function(){s.backPage({backData:"redPacketListPage"})},o()}]);app.controller("HandPasswordController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","essential","cache","HandPasswordService","$stateParams","LoginService","ResetPasswdService","webankCommonService","cgiService","$MD5",function(a,t,e,n,s,o,d,i,c,u,r,C,g,l){function D(){var t=$(window).get(0).innerWidth,e=0;e=t>360?300:5*t/6,a.IDCanvasData.canvasWidth=e,a.IDCanvasData.canvasHeight=e,a.IDCanvasData.preCanvasWidth=50,a.IDCanvasData.preCanvasHeight=50,a.IDCanvasData.mode=1,a.IDCanvasData.checkpwd="",a.IDCanvasData.settingTempPwd="",a.IDCanvasData.settingStep=1,a.IDCanvasData.lock=!1,a.data.settingMsgClass="msg",a.data.settingMsgContent="",a.data.checkMsgClass="msg",a.data.checkMsgContent="",a.data.headImg="",a.data.nickName="",a.data.showCheckModeClass=!1,a.data.showSettingModeClass=!1,a.data.resetClass="hz hide",a.data.showLoading=!1,a.IDCanvasData.setStatusListener=function(t){a.IDCanvasData.statusListener=t},"checkHand"==S?h():"setHand"==S&&p()}function h(){a.IDCanvasData.mode=2,a.IDCanvasData.checkpwd=P,a.data.showCheckModeClass=!0,a.data.showSettingModeClass=!1,a.data.resetPassClass="flex",a.IDCanvasData.lock=i.gethandpassLock(),t(function(){var t=d.getUserInfo();t&&(a.data.headImg=t.picurl||"../img/tx@2x.png",a.data.nickName=t.username)},200),1==a.IDCanvasData.lock&&t(function(){T("您已经连续5次输错手势密码，手势密码已失效"),f()},200)}function p(){a.IDCanvasData.mode=1,a.IDCanvasData.settingStep=1,a.data.showCheckModeClass=!1,a.data.showSettingModeClass=!0,a.data.resetPassClass="hpw-con hide",a.data.resetClass="hz hide",v("为了您的隐私安全,请设置手势密码")}function w(){a.IDCanvasData.mode=1,a.IDCanvasData.settingStep=2,a.data.resetClass="hz"}function f(){a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft="您已经连续5次输错手势密码，手势密码已失效",a.data.outValue.twoButtonText1="忘记手势密码",a.data.outValue.twoButtonText2="换号登录",a.data.outValue.popClose=function(t){1==t?(a.data.pwdSubTitle="修改手势密码",a.data.isPwdShow=!0):2==t&&I()}}function m(e){a.data.settingMsgClass="msg w",a.data.settingMsgContent=e,t(function(){a.$apply()},10)}function v(e){a.data.settingMsgClass="msg",a.data.settingMsgContent=e,t(function(){a.$apply()},10)}function T(e){a.data.checkMsgClass="msg w",a.data.checkMsgContent=e,t(function(){a.$apply()},10)}function I(){o.logout().then(function(){d.clear(),d.setUserStatus(n.ACCOUNT_STATE.USER_STATE_GUEST);var a={};a.username="",a.picurl="../img/tx@2x.png",a.platform="",a.openid="",a.token="",d.setUserInfo(a),e.path("/login")},function(){})}h5TimeRecord&&(h5TimeRecord.h5HandPwdStart=(new Date).getTime()),h5TimeRecord&&o.getCommonData("timeRecord").then(function(a){var t=angular.extend(a,h5TimeRecord);Statistics.reportEvent("detailTimeRecord",t),h5TimeRecord=null},function(a){}),a.data={};var P=i.getLocalHandpwd(),S=c.handmode?c.handmode:"",_=c.paypass?c.paypass:"";a.IDCanvasData={};var k=0;a.IDCanvasData.onEnteredPassword=function(e,o){if(1==a.IDCanvasData.mode)1==a.IDCanvasData.settingStep?4>o?m("至少连接4个点"):(v("再次绘制图案进行确认"),a.IDCanvasData.settingTempPwd=e,w()):a.IDCanvasData.settingTempPwd==e?(i.setLoacalHandPwd(a.IDCanvasData.settingTempPwd),i.setHandpassLock(!1),a.data.showLoading=!0,g.requestUpdateHandPassword(a.IDCanvasData.settingTempPwd,_).then(function(){s.makeToast("手势密码设置成功"),a.data.showLoading=!1;var e=d.getCacheInfo("personalInfo");e&&e.webank_card_no&&""!=e.webank_card_no&&(e.gesture_password=a.IDCanvasData.settingTempPwd),t(function(){i.finishSetting()},500)},function(t){s.makeToast(t.ret_msg),a.data.showLoading=!1,i.backPage()})):m("两次输入图案不同");else if(2==a.IDCanvasData.mode){var c=d.getCacheInfo("personalInfo"),u="",r=i.getCachedHandPass(),C=!1;if(c&&c.webank_card_no&&c.ecif_no&&(C=!0),!C&&!r)return;var D=C?c.ecif_no:r.ecif;u=l(P+D),P==e||u==e?(k=0,t(function(){i.finishCheck()},500),s.reportCustomEvent(n.REPORT_EVENT_NAME.HAND_PASSWROD_CHECK,"success")):(k++,s.reportCustomEvent(n.REPORT_EVENT_NAME.HAND_PASSWROD_STATE,"enter pass err : time="+k),5==k?(i.setHandpassLock(!0),a.IDCanvasData.lock=!0,T("您已经连续5次输错手势密码，手势密码已失效"),f()):T("输入错误，您还可以输入"+(5-k)+"次"))}},a.IDCanvasData.onTouchStart=function(){m(""),v(""),T("")},a.IDCanvasData.onTouchEnd=function(){};var R=function(){var t={};t.user_old_pwd=a.vm.formData.confirmPassword.RSA,t.user_pwd=t.user_old_pwd,g.requestVerifyPassword(t).then(function(a){i.goPage(i.getSettingHandPara(a.ret_data.session_id))},function(t){tempTan_pass="",C.isRetCodePwd(t.ret_code)?C.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(t){1==t?a.data.isPwdShow=!0:2==t&&r.goPage()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(a){1==a||2==a&&r.goPage()}):s.makeToast(t.ret_msg)})};a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,R())}),a.onClickResetHandPass=function(){a.data.pwdSubTitle="修改手势密码",a.data.isPwdShow=!0,s.clickButtonReport("gesture-forget")},a.onClickRelogin=function(){I(),s.clickButtonReport("gesture-other")},a.onClickResetToStep1=function(){a.IDCanvasData.statusListener.onInit(),p()},D()}]);app.controller("ChangeHandPasswordController",["$scope","$timeout","$location","GLOBAL_CONSTANT","utils","essential","cache","HandPasswordService","$stateParams","LoginService","ResetPasswdService","webankCommonService","cgiService","LocationService",function(a,t,e,o,n,s,d,i,r,u,c,l,w,g){function f(){a.data.pwdSubTitle="修改手势密码",t(function(){a.data.isPwdShow=!0},100),a.data.closePop=function(){a.back()}}a.data={};var P=r.from?r.from:"",p=null;a.back=function(){tracelog("call scope.back() :from="+P),"resetHandPass"==P?g.backPage():"nativeHandPass"==P?(i.setCheckHandWhenLoginFlag(!0),i.startHandPassword(null)):g.backPage()};var m=function(e){t(function(){e&&(a.data.showLoading=!0,_(e,p))})},h=function(){var t={};t.user_old_pwd=a.vm.formData.confirmPassword.RSA,t.user_pwd=t.user_old_pwd,w.requestVerifyPassword(t).then(function(t){a.data.showLoading=!1,p=t.ret_data.session_id,i.startSettingHandPassword(m)},function(t){a.data.showLoading=!1,tempTan_pass="",l.isRetCodePwd(t.ret_code)?l.isRetCodePwdRetry(t.ret_code)?(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="重试",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(t){1==t?a.data.isPwdShow=!0:2==t?c.goPage():a.back()}):(a.data.outValue={},a.data.outValue.showPop=!0,a.data.outValue.oneLineTextLeft=t.ret_msg,a.data.outValue.twoButtonText1="取消",a.data.outValue.twoButtonText2="忘记密码",a.data.outValue.popClose=function(t){1==t?a.back():2==t?c.goPage():a.back()}):n.makeToast(t.ret_msg)})},_=function(t,e){w.requestUpdateHandPassword(t,e).then(function(){n.makeToast("手势密码设置成功");var e=d.getUserInfo(),o=e.openid,s=e.picurl,i=e.username,r=d.getCacheInfo("personalInfo");r&&r.webank_card_no&&""!=r.webank_card_no&&(r.gesture_password=t),NativeHandPassBirdge.updateNativeHandPassConfig(t,o,s,i),NativeHandPassBirdge.clearLock(o),tracelog("call finishsetting :from="+P),a.data.showLoading=!1,a.back()},function(t){n.makeToast(t.ret_msg),a.data.showLoading=!1,a.back()})};a.$watch("data.sigOnPwdCommit",function(t,e){t!==e&&(a.data.isPwdShow=!1,h(),a.data.showLoading=!0)}),f()}]);app.controller("WePayDetailController",["HJactionPop","$scope","cgiService","GLOBAL_CONSTANT","WePayService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","CheckFaceService","HandPasswordService","TransRecordService","dataService","HJactionMenu","ResetPasswdService","LocationService","$sce","HJactionLoading",function(t,e,n,c,o,i,a,A,S,_,E,T,C,r,I,P,p,l,u,W,N,B,Y){var k=e.data={},s=e.func={},L=function(){k.wepayState=o.getWePayStatus(),k.isAgreed=!1,k.agreementName=["消费支付服务协议"],U()};s.back=function(){Y.backPage()},s.onClickMenu=function(){v(),k.wepayState==c.WEPAY_STATE.UNBIND?a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_MENU):k.wepayState==c.WEPAY_STATE.OPENED&&a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_BIND_CLICK_MENU)},s.onClickOpen=function(){return k.isAgreed?(o.startOpenWepay(f),void a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_CLOSED_CLICK_OPEN)):void a.makeToast("请勾选服务条款")},s.onClickOpenQQ=function(){o.startQQBindCard(),a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_QQ)},s.onClickOpenWX=function(){o.startWXBindCard(),a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_WX)},s.onClickCopy=function(){};var f=function(){},D=function(){s.back()},O=null,v=function(){O=N.show({buttonArr:["关闭We支付"],cancenText:"取消",clickCallback:function(t){0==t&&d()}})},d=function(){k.wepayState==c.WEPAY_STATE.UNBIND?a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_MENU_CLOSE):k.wepayState==c.WEPAY_STATE.OPENED&&a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_BIND_CLICK_MENU_CLOSE),t.show({oneLineTextLeft:"关闭后，微信支付、QQ钱包支付及银联在线支付将无法使用微众卡支付",twoButtonText1:"取消",twoButtonText2:"确定",popClose:function(t){1==t||2==t&&(k.wepayState==c.WEPAY_STATE.UNBIND?a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_MENU_CLOSEPOP_YES):k.wepayState==c.WEPAY_STATE.OPENED&&a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_BIND_CLICK_MENU_CLOSEPOP_YES),o.startCloseWepay(D))}})};s.clickAgreementCheckBox=function(){U()};var U=function(){k.openBtnClass=1==k.isAgreed?"p-btn p-btn-block":"p-btn p-btn-block off"};s.clickAgreement=function(){o.openAgreement()},s.clickOpenFAQ=function(){o.openFAQ(),k.wepayState==c.WEPAY_STATE.CLOSED?a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_CLOSED_CLICK_FAQ):k.wepayState==c.WEPAY_STATE.UNBIND&&a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_FAQ)},s.clickHelp=function(){o.openBindHelp(),a.clickButtonReport(c.WEPAY_STATISTIC.WEPAY_UNBIND_CLICK_BINDTIP)},L()}]);app.controller("WePayResultController",["HJactionPop","$scope","cgiService","GLOBAL_CONSTANT","WePayService","webankCommonService","utils","$location","$http","envService","$timeout","cache","essential","LoginService","$interval","$stateParams","CheckFaceService","HandPasswordService","TransRecordService","dataService","HJactionMenu","ResetPasswdService","LocationService","$sce","HJactionLoading","CommonConfigService",function(e,n,t,i,c,o,a,r,s,_,S,l,C,u,T,m,p,v,A,P,d,I,W,L,k,E){var f=n.data={},R=n.func={},Q=function(){var e=m.result?m.result:"";if("suc"==e){f.result=1;var n=!0,t=E.getCommonConfig();n=t&&t.async_examine_time_start&&t.async_examine_time_end?a.isInWorkTime(t.async_examine_time_start,t.async_examine_time_end):!1,f.showQuotaTip=n?!1:!0}else f.result=2};R.done=function(){W.backPage(2)},R.onClickOpenQQ=function(){a.clickButtonReport(i.WEPAY_STATISTIC.WEPAY_RESULT_CLICK_QQ),c.startQQBindCard()},R.onClickOpenWX=function(){a.clickButtonReport(i.WEPAY_STATISTIC.WEPAY_RESULT_CLICK_WX),c.startWXBindCard()},R.clickOpenFAQ=function(){a.clickButtonReport(i.WEPAY_STATISTIC.WEPAY_RESULT_CLICK_FAQ),c.openFAQ()},R.clickHelp=function(){a.clickButtonReport(i.WEPAY_STATISTIC.WEPAY_RESULT_CLICK_BINDTIP),c.openBindHelp()},Q()}]);app.controller("WePayHelpController",["$scope","$location","$stateParams","utils","HJactionMenu","LocationService","HJactionPop",function(a,n,c,i,t,o,l){a.srcData=[{title:"We支付开通后有什么好处？",detail:"<p>您可以通过全国1600余家银行的柜台或网银大额度转账到微众卡，再通过微众卡大额度购买活期+、定期+、短期+或基金。<br><br>扣款说明<br>当您进行消费支付时，首先扣取您微众卡上的余额，若余额不足将会使用活期+进行支付。<br><br>限额说明<br>微信支付和QQ钱包支付的单笔限额最大为5000元，银联在线支付的单笔限额最大为3000元。</p>"},{pageTitle:"添加指引",title:"怎样添加微众卡？",detail:'<h3 class="p-c-blue">微信支付添加微众卡</h3><p>复制微众卡号，打开微信轻触【我】->【钱包】->【银行卡】->【添加银行卡】，输入交易密码后，粘贴微众卡号点击下一步完成操作。</p><div class="con-img mgt10"><img src="../img/wepay-faq1.png" alt=""><img src="../img/wepay-faq2.png" alt=""><div class="p-clear"></div></div><h3 class="p-c-blue mgt40">QQ钱包支付添加微众卡</h3><p>复制微众卡号，打开QQ点击【QQ钱包】->【账户】->【添加银行卡】，粘贴微众卡号点击下一步完成操作。</p><div class="con-img mgt10"><img src="../img/wepay-faq3.png" alt=""><img src="../img/wepay-faq4.png" alt=""><div class="p-clear"></div></div>'}],a.data={};var e=function(){var n=c.detail;void 0!=n&&(a.data=a.srcData[n])};e(),a.onClickPhone=function(){navigator.callphone.call(function(){},function(){},4009998877)};var r=null;a.onClickConnect=function(){r=t.show({buttonArr:["微信客服","拨打客服热线400-999-8877"],cancenText:"取消",clickCallback:function(n){var c=[a.onClickWX,a.onClickPhone][n];c&&c()}})},a.onClickWX=function(){l.show({oneLineTextLeft:"关注[微众银行]微信公众号<br>小We 24小时为您解答各种问题",oneButtonText:"我知道了",popClose:function(){}})},a.back=function(){o.backPage()},a.$on("$destroy",function(){r&&r()})}]);var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},r=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},n=1e-10,a=i._internals,o=a.isSelector,h=a.isArray,l=r.prototype=i.to({},.1,{}),_=[];r.version="1.16.1",l.constructor=r,l.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.lagSmoothing=i.lagSmoothing,r.ticker=i.ticker,r.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var s,r=this.ratio,n=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in t)this.vars[s]=t[s];if(this._initted||n)if(e)this._initted=!1,n&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._time;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._time>0||n){this._initted=!1,this._init();for(var o,h=1/(1-r),l=this._firstPT;l;)o=l.s+l.c,l.c*=h,l.s=o-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,r,o,h,l,u,p,c,f=this._dirty?this.totalDuration():this._totalDuration,m=this._time,d=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>y||y===n)&&y!==t&&(i=!0,y>n&&(r="onReverseComplete")),this._rawPrevTime=c=!e||t||y===t?t:n)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==d||0===v&&y>0)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=c=!e||t||y===t?t:n)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,u=this._easeType,p=this._easePower,(1===u||3===u&&l>=.5)&&(l=1-l),3===u&&(l*=2),1===p?l*=l:2===p?l*=l*l:3===p?l*=l*l*l:4===p&&(l*=l*l*l*l),this.ratio=1===u?1-l:2===u?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),m===this._time&&!i&&g===this._cycle)return void(d!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=m,this._totalTime=d,this._rawPrevTime=y,this._cycle=g,a.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/v):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==m&&t>=0&&(this._active=!0),0===d&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||_))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==d||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_)),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||_)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||_),0===v&&this._rawPrevTime===n&&c!==n&&(this._rawPrevTime=0))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new r(t,e,s)},r.staggerTo=r.allTo=function(t,e,n,a,l,u,p){a=a||0;var c,f,m,d,g=n.delay||0,v=[],y=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),l.apply(p||this,u||_)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=s(t))),t=t||[],0>a&&(t=s(t),t.reverse(),a*=-1),c=t.length-1,m=0;c>=m;m++){f={};for(d in n)f[d]=n[d];f.delay=g,m===c&&l&&(f.onComplete=y),v[m]=new r(t[m],e,f),g+=a}return v},r.staggerFrom=r.allFrom=function(t,e,i,s,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,s,n,a,o)},r.staggerFromTo=r.allFromTo=function(t,e,i,s,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,s,n,a,o,h)},r.delayedCall=function(t,e,i,s,n){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:n,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var s=[],r=0,n=t._first;n;)n instanceof i?s[r++]=n:(e&&(s[r++]=n),s=s.concat(u(n,e)),r=s.length),n=n._next;return s},p=r.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};r.killAll=function(t,i,s,r){null==i&&(i=!0),null==s&&(s=!0);var n,a,o,h=p(0!=r),l=h.length,_=i&&s&&r;for(o=0;l>o;o++)a=h[o],(_||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var n,l,_,u,p,c=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=s(t)),h(t))for(u=t.length;--u>-1;)r.killChildTweensOf(t[u],e);else{n=[];for(_ in c)for(l=c[_].target.parentNode;l;)l===t&&(n=n.concat(c[_].tweens)),l=l.parentNode;for(p=n.length,u=0;p>u;u++)e&&n[u].totalTime(n[u].totalDuration()),n[u]._enabled(!1,!1)}}};var c=function(t,i,s,r){i=i!==!1,s=s!==!1,r=r!==!1;for(var n,a,o=p(r),h=i&&s&&r,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&a.paused(t)};return r.pauseAll=function(t,e,i){c(!0,t,e,i)},r.resumeAll=function(t,e,i){c(!1,t,e,i)},r.globalTimeScale=function(e){var s=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||n,s._startTime=r-(r-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,r=i.ticker.frame,s._startTime=r-(r-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,r=this.vars;for(s in r)i=r[s],h(i)&&-1!==i.join("").indexOf("{self}")&&(r[s]=this._swapSelfInParams(i));h(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,n=i._internals,a=s._internals={},o=n.isSelector,h=n.isArray,l=n.lazyTweens,_=n.lazyRender,u=[],p=_gsScope._gsDefine.globals,c=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=a.pauseCallback=function(t,e,i,s){var n,a=t._timeline,o=a._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&a._reversed,_=l?0:r,p=l?r:0;if(e||!this._forcingPlayhead){for(a.pause(h),n=t._prev;n&&n._startTime===h;)n._rawPrevTime=p,n=n._prev;for(n=t._next;n&&n._startTime===h;)n._rawPrevTime=_,n=n._next;e&&e.apply(s||a,i||u),(this._forcingPlayhead||!a._paused)&&a.seek(o)}},m=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},d=s.prototype=new e;return s.version="1.16.1",d.constructor=s,d.kill()._gc=d._forcingPlayhead=!1,d.to=function(t,e,s,r){var n=s.repeat&&p.TweenMax||i;return e?this.add(new n(t,e,s),r):this.set(t,s,r)},d.from=function(t,e,s,r){return this.add((s.repeat&&p.TweenMax||i).from(t,e,s),r)},d.fromTo=function(t,e,s,r,n){var a=r.repeat&&p.TweenMax||i;return e?this.add(a.fromTo(t,e,s,r),n):this.set(t,r,n)},d.staggerTo=function(t,e,r,n,a,h,l,_){var u,p=new s({onComplete:h,onCompleteParams:l,onCompleteScope:_,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),n=n||0,0>n&&(t=m(t),t.reverse(),n*=-1),u=0;t.length>u;u++)r.startAt&&(r.startAt=c(r.startAt)),p.to(t[u],e,c(r),u*n);return this.add(p,a)},d.staggerFrom=function(t,e,i,s,r,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,r,n,a,o)},d.staggerFromTo=function(t,e,i,s,r,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,r,n,a,o,h)},d.call=function(t,e,s,r){return this.add(i.delayedCall(0,t,e,s),r)},d.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,n,a=new s(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)n=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=n;return o.add(a,0),a},d.add=function(r,n,a,o){var l,_,u,p,c,f;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&h(r)){for(a=a||"normal",o=o||0,l=n,_=r.length,u=0;_>u;u++)h(p=r[u])&&(p=new s({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===a?l=p._startTime+p.totalDuration()/p._timeScale:"start"===a&&(p._startTime-=p.delay())),l+=o;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,n);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(c=this,f=c.rawTime()>r._startTime;c._timeline;)f&&c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._gc&&c._enabled(!0,!1),c=c._timeline;return this},d.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},d._remove=function(t,i){e.prototype._remove.call(this,t,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},d.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},d.insert=d.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},d.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},d.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},d.addPause=function(t,e,s,r){var n=i.delayedCall(0,f,["{self}",e,s,r],this);return n.data="isPause",this.add(n,t)},d.removeLabel=function(t){return delete this._labels[t],this},d.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},d._parseTimeOrLabel=function(e,i,s,r){var n;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&h(r)))for(n=r.length;--n>-1;)r[n]instanceof t&&r[n].timeline===this&&this.remove(r[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,s):this.duration()}return Number(e)+i},d.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},d.stop=function(){return this.paused(!0)},d.gotoAndPlay=function(t,e){return this.play(t,e)},d.gotoAndStop=function(t,e){return this.pause(t,e)},d.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,o,h,p=this._dirty?this.totalDuration():this._totalDuration,c=this._time,f=this._startTime,m=this._timeScale,d=this._paused;if(t>=p)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>r&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=p+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==c||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",n=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=n=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&n)for(s=this._first;s&&0===s._startTime;)s._duration||(n=!1),s=s._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==c&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&t>0&&(this._active=!0),0===c&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u)),this._time>=c)for(s=this._first;s&&(a=s._next,!this._paused||d);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||d);)(s._active||c>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;this._onUpdate&&(e||(l.length&&_(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u))),o&&(this._gc||(f===this._startTime||m!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(n&&(l.length&&_(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||u)))}},d._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},d.getChildren=function(t,e,s,r){r=r||-9999999999;for(var n=[],a=this._first,o=0;a;)r>a._startTime||(a instanceof i?e!==!1&&(n[o++]=a):(s!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,s)),o=n.length))),a=a._next;return n},d.getTweensOf=function(t,e){var s,r,n=this._gc,a=[],o=0;for(n&&this._enabled(!0,!0),s=i.getTweensOf(t),r=s.length;--r>-1;)(s[r].timeline===this||e&&this._contains(s[r]))&&(a[o++]=s[r]);return n&&this._enabled(!1,!0),a},d.recent=function(){return this._recent},d._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},d.shiftChildren=function(t,e,i){i=i||0;for(var s,r=this._first,n=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(s in n)n[s]>=i&&(n[s]+=t);return this._uncache(!0)},d._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,r=!1;--s>-1;)i[s]._kill(t,e)&&(r=!0);return r},d.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},d.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},d._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},d.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},d.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},d.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,r=this._last,n=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>n&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):n=r._startTime,0>r._startTime&&!r._paused&&(s-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),n=0),i=r._startTime+r._totalDuration/r._timeScale,i>s&&(s=i),r=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},d.paused=function(e){if(!e)for(var i=this._first,s=this._time;i;)i._startTime===s&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},d.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},d.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,n=[],a=e._internals,o=a.lazyTweens,h=a.lazyRender,l=new i(null,null,1,0),_=s.prototype=new t;return _.constructor=s,_.kill()._gc=!1,s.version="1.16.1",_.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},_.addCallback=function(t,i,s,r){return this.add(e.delayedCall(0,t,s,r),i)},_.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,r=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===r&&i[s]._enabled(!1,!1);return this},_.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},_.tweenTo=function(t,i){i=i||{};var s,r,a,o={ease:l,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),s=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,a=new e(this,s,o),o.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&s===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||a,i.onStartParams||n)},a},_.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},_.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,a,l,_,u,p,c=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,m=this._time,d=this._totalTime,g=this._startTime,v=this._timeScale,y=this._rawPrevTime,T=this._paused,x=this._cycle;if(t>=c)this._locked||(this._totalTime=c,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,_="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>y||y===r)&&y!==t&&this._first&&(u=!0,y>r&&(_="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=f,t=f+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===f&&y!==r&&(y>0||0>t&&y>=0)&&!this._locked)&&(_="onReverseComplete",a=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=a=!0,_="onReverseComplete"):y>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=f||!e||t||this._rawPrevTime===t?t:r,0===t&&a)for(s=this._first;s&&0===s._startTime;)s._duration||(a=!1),s=s._next;t=0,this._initted||(u=!0)}else 0===f&&0>y&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(p=f+this._repeatDelay,this._cycle=this._totalTime/p>>0,0!==this._cycle&&this._cycle===this._totalTime/p&&this._cycle--,this._time=this._totalTime-this._cycle*p,this._yoyo&&0!==(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,t=f+1e-4):0>this._time?this._time=t=0:t=this._time));if(this._cycle!==x&&!this._locked){var w=this._yoyo&&0!==(1&x),b=w===(this._yoyo&&0!==(1&this._cycle)),P=this._totalTime,S=this._cycle,R=this._rawPrevTime,O=this._time;if(this._totalTime=x*f,x>this._cycle?w=!w:this._totalTime+=f,this._time=m,this._rawPrevTime=0===f?y-1e-4:y,this._cycle=x,this._locked=!0,m=w?0:f,this.render(m,e,0===f),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||n),b&&(m=w?f+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!T)return;this._time=O,this._totalTime=P,this._cycle=S,this._rawPrevTime=R}if(!(this._time!==m&&this._first||i||u))return void(d!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||n)),this._time>=m)for(s=this._first;s&&(l=s._next,!this._paused||T);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=l;else for(s=this._last;s&&(l=s._prev,!this._paused||T);)(s._active||m>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=l;this._onUpdate&&(e||(o.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n))),_&&(this._locked||this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(a&&(o.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[_]&&this.vars[_].apply(this.vars[_+"Scope"]||this,this.vars[_+"Params"]||n)))},_.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,r,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(s=0;h>s;s++)r=a[s],r.isActive()&&(n[o++]=r);return n},_.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},_.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},_.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},_.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},_.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},_.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},_.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},_.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},_.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},_.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},_.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var t=180/Math.PI,e=[],i=[],s=[],r={},n=_gsScope._gsDefine.globals,a=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,s){var r={a:t},n={},a={},o={c:s},h=(t+e)/2,l=(e+i)/2,_=(i+s)/2,u=(h+l)/2,p=(l+_)/2,c=(p-u)/8;return r.b=h+(t-h)/4,n.b=u+c,r.c=n.a=(r.b+n.b)/2,n.c=a.a=(u+p)/2,a.b=p-c,o.b=_+(s-_)/4,a.c=o.a=(a.b+o.b)/2,[r,n,a,o]},l=function(t,r,n,a,o){var l,_,u,p,c,f,m,d,g,v,y,T,x,w=t.length-1,b=0,P=t[0].a;for(l=0;w>l;l++)c=t[b],_=c.a,u=c.d,p=t[b+1].d,o?(y=e[l],T=i[l],x=.25*(T+y)*r/(a?.5:s[l]||.5),f=u-(u-_)*(a?.5*r:0!==y?x/y:0),m=u+(p-u)*(a?.5*r:0!==T?x/T:0),d=u-(f+((m-f)*(3*y/(y+T)+.5)/4||0))):(f=u-.5*(u-_)*r,m=u+.5*(p-u)*r,d=u-(f+m)/2),f+=d,m+=d,c.c=g=f,c.b=0!==l?P:P=c.a+.6*(c.c-c.a),c.da=u-_,c.ca=g-_,c.ba=P-_,n?(v=h(_,P,g,u),t.splice(b,1,v[0],v[1],v[2],v[3]),b+=4):b++,P=m;c=t[b],c.b=P,c.c=P+.4*(c.d-P),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=P-c.a,n&&(v=h(c.a,P,c.c,c.d),t.splice(b,1,v[0],v[1],v[2],v[3]))},_=function(t,s,r,n){var o,h,l,_,u,p,c=[];if(n)for(t=[n].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][s])&&"="===p.charAt(1)&&(t[h][s]=n[s]+Number(p.charAt(0)+p.substr(2)));if(o=t.length-2,0>o)return c[0]=new a(t[0][s],0,0,t[-1>o?0:1][s]),c;for(h=0;o>h;h++)l=t[h][s],_=t[h+1][s],c[h]=new a(l,0,0,_),r&&(u=t[h+2][s],e[h]=(e[h]||0)+(_-l)*(_-l),i[h]=(i[h]||0)+(u-_)*(u-_));return c[h]=new a(t[h][s],0,0,t[h+1][s]),c},u=function(t,n,a,h,u,p){var c,f,m,d,g,v,y,T,x={},w=[],b=p||t[0];u="string"==typeof u?","+u+",":o,null==n&&(n=1);for(f in t[0])w.push(f);if(t.length>1){for(T=t[t.length-1],y=!0,c=w.length;--c>-1;)if(f=w[c],Math.abs(b[f]-T[f])>.05){y=!1;break}y&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=s.length=0,c=w.length;--c>-1;)f=w[c],r[f]=-1!==u.indexOf(","+f+","),x[f]=_(t,f,r[f],p);for(c=e.length;--c>-1;)e[c]=Math.sqrt(e[c]),i[c]=Math.sqrt(i[c]);if(!h){for(c=w.length;--c>-1;)if(r[f])for(m=x[w[c]],v=m.length-1,d=0;v>d;d++)g=m[d+1].da/i[d]+m[d].da/e[d],s[d]=(s[d]||0)+g*g;for(c=s.length;--c>-1;)s[c]=Math.sqrt(s[c])}for(c=w.length,d=a?4:1;--c>-1;)f=w[c],m=x[f],l(m,n,a,h,r[f]),y&&(m.splice(0,d),m.splice(m.length-d,d));return x},p=function(t,e,i){e=e||"soft";var s,r,n,o,h,l,_,u,p,c,f,m={},d="cubic"===e?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||d+1>t.length)throw"invalid Bezier data";for(p in t[0])v.push(p);for(l=v.length;--l>-1;){for(p=v[l],m[p]=h=[],c=0,u=t.length,_=0;u>_;_++)s=null==i?t[_][p]:"string"==typeof(f=t[_][p])&&"="===f.charAt(1)?i[p]+Number(f.charAt(0)+f.substr(2)):Number(f),g&&_>1&&u-1>_&&(h[c++]=(s+h[c-2])/2),h[c++]=s;for(u=c-d+1,c=0,_=0;u>_;_+=d)s=h[_],r=h[_+1],n=h[_+2],o=2===d?0:h[_+3],h[c++]=f=3===d?new a(s,r,n,o):new a(s,(2*r+s)/3,(2*r+n)/3,n);h.length=c}return m},c=function(t,e,i){for(var s,r,n,a,o,h,l,_,u,p,c,f=1/i,m=t.length;--m>-1;)for(p=t[m],n=p.a,a=p.d-n,o=p.c-n,h=p.b-n,s=r=0,_=1;i>=_;_++)l=f*_,u=1-l,s=r-(r=(l*l*a+3*u*(l*o+u*h))*l),c=m*i+_-1,e[c]=(e[c]||0)+s*s},f=function(t,e){e=e>>0||6;var i,s,r,n,a=[],o=[],h=0,l=0,_=e-1,u=[],p=[];for(i in t)c(t[i],a,e);for(r=a.length,s=0;r>s;s++)h+=Math.sqrt(a[s]),n=s%e,p[n]=h,n===_&&(l+=h,n=s/e>>0,u[n]=p,o[n]=l,h=0,p=[]);return{length:l,lengths:o,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,r,n,a,o,h=e.values||[],l={},_=h[0],c=e.autoRotate||i.vars.orientToBezier;this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",c===!0?0:Number(c)||0]]:null;for(s in _)this._props.push(s);for(n=this._props.length;--n>-1;)s=this._props[n],this._overwriteProps.push(s),r=this._func[s]="function"==typeof t[s],l[s]=r?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),o||l[s]!==h[0][s]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):p(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),n=c.length;--n>-1;){for(a=0;3>a;a++)s=c[n][a],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;
s=c[n][2],this._initialRotations[n]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,r,n,a,o,h,l,_,u,p=this._segCount,c=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(_=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&p-1>r){for(l=p-1;l>r&&e>=(this._l2=_[++r]););this._l1=_[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=_[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=_[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(l=u.length-1;l>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?p-1:p*e>>0,o=(e-i*(1/p))*p;for(s=1-o,r=this._props.length;--r>-1;)n=this._props[r],a=this._beziers[n][i],h=(o*o*a.da+3*s*(o*a.ca+s*a.ba))*o+a.a,this._round[n]&&(h=Math.round(h)),c[n]?f[n](h):f[n]=h;if(this._autoRotate){var d,g,v,y,T,x,w,b=this._autoRotate;for(r=b.length;--r>-1;)n=b[r][2],x=b[r][3]||0,w=b[r][4]===!0?1:t,a=this._beziers[b[r][0]],d=this._beziers[b[r][1]],a&&d&&(a=a[i],d=d[i],g=a.a+(a.b-a.a)*o,y=a.b+(a.c-a.b)*o,g+=(y-g)*o,y+=(a.c+(a.d-a.c)*o-y)*o,v=d.a+(d.b-d.a)*o,T=d.b+(d.c-d.b)*o,v+=(T-v)*o,T+=(d.c+(d.d-d.c)*o-T)*o,h=m?Math.atan2(T-v,y-g)*w+x:this._initialRotations[r],c[n]?f[n](h):f[n]=h)}}}),d=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=n.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new m;var l,_,u,p=e.values,c=p.length-1,f=[],d={};if(0>c)return o;for(l=0;c>=l;l++)u=i(t,p[l],a,o,h,c!==l),f[l]=u.end;for(_ in e)d[_]=e[_];return d.values=f,o=new r(t,"bezier",0,0,u.pt,2),o.data=u,o.plugin=h,o.setRatio=s,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(l=d.autoRotate===!0?0:Number(d.autoRotate),d.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),d.autoRotate&&(a._transform||a._enableTransforms(!1),u.autoRotate=a._target._gsTransform),h._onInitTween(u.proxy,d,a._tween),o}})}},d._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},d._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,r,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=_gsScope._gsDefine.globals,h={},l=a.prototype=new t("css");l.constructor=a,a.version="1.16.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",l="px",a.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var _,u,p,c,f,m,d=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,b=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,S=/([A-Z])/g,R=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,k=function(t,e){return e.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,z=Math.PI/180,F=180/Math.PI,I={},N=document,X=function(t){return N.createElementNS?N.createElementNS("http://www.w3.org/1999/xhtml",t):N.createElement(t)},L=X("div"),E=X("img"),Y=a._internals={_specialProps:h},B=navigator.userAgent,U=function(){var t=B.indexOf("Android"),e=X("a");return p=-1!==B.indexOf("Safari")&&-1===B.indexOf("Chrome")&&(-1===t||Number(B.substr(t+8,1))>3),f=p&&6>Number(B.substr(B.indexOf("Version/")+8,1)),c=-1!==B.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(B)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(B))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),j=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},V=function(t){window.console&&void 0},q="",W="",Z=function(t,e){e=e||L;var i,s,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===r[i[s]+t];);return s>=0?(W=3===s?"ms":i[s],q="-"+W.toLowerCase()+"-",W+t):null},G=N.defaultView?N.defaultView.getComputedStyle:function(){},$=a.getStyle=function(t,e,i,s,r){var n;return U||"opacity"!==e?(!s&&t.style[e]?n=t.style[e]:(i=i||G(t))?n=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(S,"-$1").toLowerCase()):t.currentStyle&&(n=t.currentStyle[e]),null==r||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:r):j(t)},Q=Y.convertToPixels=function(t,i,s,r,n){if("px"===r||!r)return s;if("auto"===r||!s)return 0;var o,h,l,_=A.test(i),u=t,p=L.style,c=0>s;if(c&&(s=-s),"%"===r&&-1!==i.indexOf("border"))o=s/100*(_?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==r&&u.appendChild)p[_?"borderLeftWidth":"borderTopWidth"]=s+r;else{if(u=t.parentNode||N.body,h=u._gsCache,l=e.ticker.frame,h&&_&&h.time===l)return h.width*s/100;p[_?"width":"height"]=s+r}u.appendChild(L),o=parseFloat(L[_?"offsetWidth":"offsetHeight"]),u.removeChild(L),_&&"%"===r&&a.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=100*(o/s)),0!==o||n||(o=Q(t,i,s,r,!0))}return c?-o:o},H=Y.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var s="left"===e?"Left":"Top",r=$(t,"margin"+s,i);return t["offset"+s]-(Q(t,e,parseFloat(r),r.replace(T,""))||0)},K=function(t,e){var i,s,r,n={};if(e=e||G(t,null))if(i=e.length)for(;--i>-1;)r=e[i],(-1===r.indexOf("-transform")||be===r)&&(n[r.replace(R,k)]=e.getPropertyValue(r));else for(i in e)(-1===i.indexOf("Transform")||we===i)&&(n[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===n[i]&&(n[i.replace(R,k)]=e[i]);return U||(n.opacity=j(t)),s=Me(t,e,!1),n.rotation=s.rotation,n.skewX=s.skewX,n.scaleX=s.scaleX,n.scaleY=s.scaleY,n.x=s.x,n.y=s.y,Se&&(n.z=s.z,n.rotationX=s.rotationX,n.rotationY=s.rotationY,n.scaleZ=s.scaleZ),n.filters&&delete n.filters,n},J=function(t,e,i,s,r){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(y,"")?n:0:H(t,a),void 0!==l[a]&&(o=new ce(l,a,l[a],o)));if(s)for(a in s)"className"!==a&&(h[a]=s[a]);return{difs:h,firstMPT:o}},te={width:["Left","Right"],height:["Top","Bottom"]},ee=["marginLeft","marginRight","marginTop","marginBottom"],ie=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=te[e],n=r.length;for(i=i||G(t,null);--n>-1;)s-=parseFloat($(t,"padding"+r[n],i,!0))||0,s-=parseFloat($(t,"border"+r[n]+"Width",i,!0))||0;return s},se=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="center"===s?"50%":"0":"center"===r&&(r="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),t=s+" "+r+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(s.replace(y,"")),e.oy=parseFloat(r.replace(y,"")),e.v=t),e||t},re=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},ne=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},ae=function(t,e,i,s){var r,n,a,o,h,l=1e-6;return null==t?o=e:"number"==typeof t?o=t:(r=360,n=t.split("_"),h="="===t.charAt(1),a=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(-1===t.indexOf("rad")?1:F)-(h?0:e),n.length&&(s&&(s[i]=e+a),-1!==t.indexOf("short")&&(a%=r,a!==a%(r/2)&&(a=0>a?a+r:a-r)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*r)%r-(0|a/r)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(0|a/r)*r)),o=e+a),l>o&&o>-l&&(o=0),o},oe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},he=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},le=a.parseColor=function(t){var e,i,s,r,n,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),oe[t]?oe[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(d),r=Number(t[0])%360/360,n=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(n+1):a+n-a*n,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=he(r+1/3,e,i),t[1]=he(r,e,i),t[2]=he(r-1/3,e,i),t):(t=t.match(d)||oe.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):oe.black},_e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in oe)_e+="|"+l+"\\b";_e=RegExp(_e+")","gi");var ue=function(t,e,i,s){if(null==t)return function(t){return t};var r,n=e?(t.match(_e)||[""])[0]:"",a=t.split(n).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",_=a.length,u=_>0?a[0].replace(d,""):"";return _?r=e?function(t){var e,p,c,f;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(f=t.replace(M,"|").split("|"),c=0;f.length>c;c++)f[c]=r(f[c]);return f.join(",")}if(e=(t.match(_e)||[n])[0],p=t.split(e).join("").match(v)||[],c=p.length,_>c--)for(;_>++c;)p[c]=i?p[0|(c-1)/2]:a[c];return o+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,p;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(n=t.replace(M,"|").split("|"),p=0;n.length>p;p++)n[p]=r(n[p]);return n.join(",")}if(e=t.match(v)||[],p=e.length,_>p--)for(;_>++p;)e[p]=i?e[0|(p-1)/2]:a[p];return o+e.join(l)+h}:function(t){return t}},pe=function(t){return t=t.split(","),function(e,i,s,r,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,o,n,a)}},ce=(Y._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,r,n=this.data,a=n.proxy,o=n.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=Math.round(e):h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)r+=i["xn"+s]+i["xs"+(s+1)];i.e=r}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,s,r){this.t=t,this.p=e,this.v=i,this.r=r,s&&(s._prev=this,this._next=s)}),fe=(Y._parseToProxy=function(t,e,i,s,r,n){var a,o,h,l,_,u=s,p={},c={},f=i._transform,m=I;for(i._transform=null,I=e,s=_=i.parse(t,e,s,r),I=m,n&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(o=s.p,c[o]=s.s+s.c,p[o]=s.s,n||(l=new ce(s,"s",o,l,s.r),s.c=0),1===s.type))for(a=s.l;--a>0;)h="xn"+a,o=s.p+"_"+h,c[o]=s.data[h],p[o]=s[h],n||(l=new ce(s,h,o,l,s.rxp[h]));s=s._next}return{proxy:p,end:c,firstMPT:l,pt:_}},Y.CSSPropTween=function(t,e,s,r,a,o,h,l,_,u,p){this.t=t,this.p=e,this.s=s,this.c=r,this.n=h||e,t instanceof fe||n.push(this.n),this.r=l,this.type=o||0,_&&(this.pr=_,i=!0),this.b=void 0===u?s:u,this.e=void 0===p?s+r:p,a&&(this._next=a,a._prev=this)}),me=a.parseComplex=function(t,e,i,s,r,n,a,o,h,l){i=i||n||"",a=new fe(t,e,0,0,a,l?2:1,null,!1,o,i,s),s+="";var u,p,c,f,m,v,y,T,x,w,b,S,R=i.split(", ").join(",").split(" "),O=s.split(", ").join(",").split(" "),k=R.length,A=_!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(R=R.join(" ").replace(M,", ").split(" "),O=O.join(" ").replace(M,", ").split(" "),k=R.length),k!==O.length&&(R=(n||"").split(" "),k=R.length),a.plugin=h,a.setRatio=l,u=0;k>u;u++)if(f=R[u],m=O[u],T=parseFloat(f),T||0===T)a.appendXtra("",T,re(m,T),m.replace(g,""),A&&-1!==m.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||oe[f]||P.test(f)))S=","===m.charAt(m.length-1)?"),":")",f=le(f),m=le(m),x=f.length+m.length>6,x&&!U&&0===m[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(O[u]).join("transparent")):(U||(x=!1),a.appendXtra(x?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],x?",":S,!0),x&&(f=4>f.length?1:f[3],a.appendXtra("",f,(4>m.length?1:m[3])-f,S,!1)));else if(v=f.match(d)){if(y=m.match(g),!y||y.length!==v.length)return a;for(c=0,p=0;v.length>p;p++)b=v[p],w=f.indexOf(b,c),a.appendXtra(f.substr(c,w-c),Number(b),re(y[p],b),"",A&&"px"===f.substr(w+b.length,2),0===p),c=w+b.length;a["xs"+a.l]+=f.substr(c)}else a["xs"+a.l]+=a.l?" "+f:f;if(-1!==s.indexOf("=")&&a.data){for(S=a.xs0+a.data.s,u=1;a.l>u;u++)S+=a["xs"+u]+a.data["xn"+u];a.e=S+a["xs"+u]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},de=9;for(l=fe.prototype,l.l=l.pr=0;--de>0;)l["xn"+de]=0,l["xs"+de]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,s,r,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new fe(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(s||""),a)};var ge=function(t,e){e=e||{},this.p=e.prefix?Z(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ue(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},ve=Y._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,r,n=t.split(","),a=e.defaultValue;for(i=i||[a],s=0;n.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||a,r=new ge(n[s],e)},ye=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";ve(t,{parser:function(t,i,s,r,n,a,l){var _=o.com.greensock.plugins[e];return _?(_._cssRegister(),h[s].parse(t,i,s,r,n,a,l)):(V("Error: "+e+" js file not loaded."),n)}})}};l=ge.prototype,l.parseComplex=function(t,e,i,s,r,n){var a,o,h,l,_,u,p=this.keyword;if(this.multi&&(M.test(i)||M.test(e)?(o=e.replace(M,"|").split("|"),h=i.replace(M,"|").split("|")):p&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,p&&(_=e.indexOf(p),u=i.indexOf(p),_!==u&&(-1===u?o[a]=o[a].split(p).join(""):-1===_&&(o[a]+=" "+p)));e=o.join(", "),i=h.join(", ")}return me(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,r,n)},l.parse=function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format($(t,this.p,r,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){ve(t,{parser:function(t,s,r,n,a,o){var h=new fe(t,r,0,0,a,2,r,!1,i);return h.plugin=o,h.setRatio=e(t,s,n._tween,r),h},priority:i})},a.useSVGTransformAttr=p;var Te,xe="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),we=Z("transform"),be=q+"transform",Pe=Z("transformOrigin"),Se=null!==Z("perspective"),Re=Y.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=a.defaultForce3D!==!1&&Se?a.defaultForce3D||"auto":!1},Oe=window.SVGElement,ke=function(t,e,i){var s,r=N.createElementNS("http://www.w3.org/2000/svg",t),n=/([a-z])([A-Z])/g;for(s in i)r.setAttributeNS(null,s.replace(n,"$1-$2").toLowerCase(),i[s]);return e.appendChild(r),r},Ae=N.documentElement,Ce=function(){var t,e,i,s=m||/Android/i.test(B)&&!window.chrome;return N.createElementNS&&!s&&(t=ke("svg",Ae),e=ke("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[Pe]="50% 50%",e.style[we]="scaleX(0.5)",s=i===e.getBoundingClientRect().width&&!(c&&Se),Ae.removeChild(t)),s}(),De=function(t,e,i,s){var r,n;s&&(n=s.split(" ")).length||(r=t.getBBox(),e=se(e).split(" "),n=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*r.width:parseFloat(e[0]))+r.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*r.height:parseFloat(e[1]))+r.y]),i.xOrigin=parseFloat(n[0]),i.yOrigin=parseFloat(n[1]),t.setAttribute("data-svg-origin",n.join(" "))},Me=Y.getTransform=function(t,e,i,s){if(t._gsTransform&&i&&!s)return t._gsTransform;var n,o,h,l,_,u,p,c,f,m,d=i?t._gsTransform||new Re:new Re,g=0>d.scaleX,v=2e-5,y=1e5,T=Se?parseFloat($(t,Pe,e,!1,"0 0 0").split(" ")[2])||d.zOrigin||0:0,x=parseFloat(a.defaultTransformPerspective)||0;if(we?o=$(t,be,e,!0):t.currentStyle&&(o=t.currentStyle.filter.match(C),o=o&&4===o.length?[o[0].substr(4),Number(o[2].substr(4)),Number(o[1].substr(4)),o[3].substr(4),d.x||0,d.y||0].join(","):""),n=!o||"none"===o||"matrix(1, 0, 0, 1, 0, 0)"===o,d.svg=!!(Oe&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM)),d.svg&&(n&&-1!==(t.style[we]+"").indexOf("matrix")&&(o=t.style[we],n=!1),De(t,$(t,Pe,r,!1,"50% 50%")+"",d,t.getAttribute("data-svg-origin")),Te=a.useSVGTransformAttr||Ce,h=t.getAttribute("transform"),n&&h&&-1!==h.indexOf("matrix")&&(o=h,n=0)),!n){for(h=(o||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],l=h.length;--l>-1;)_=Number(h[l]),h[l]=(u=_-(_|=0))?(0|u*y+(0>u?-.5:.5))/y+_:_;if(16===h.length){var w,b,P,S,R,O=h[0],k=h[1],A=h[2],D=h[3],M=h[4],z=h[5],I=h[6],N=h[7],X=h[8],L=h[9],E=h[10],Y=h[12],B=h[13],U=h[14],j=h[11],V=Math.atan2(I,E);d.zOrigin&&(U=-d.zOrigin,Y=X*U-h[12],B=L*U-h[13],U=E*U+d.zOrigin-h[14]),d.rotationX=V*F,V&&(S=Math.cos(-V),R=Math.sin(-V),w=M*S+X*R,b=z*S+L*R,P=I*S+E*R,X=M*-R+X*S,L=z*-R+L*S,E=I*-R+E*S,j=N*-R+j*S,M=w,z=b,I=P),V=Math.atan2(X,E),d.rotationY=V*F,V&&(S=Math.cos(-V),R=Math.sin(-V),w=O*S-X*R,b=k*S-L*R,P=A*S-E*R,L=k*R+L*S,E=A*R+E*S,j=D*R+j*S,O=w,k=b,A=P),V=Math.atan2(k,O),d.rotation=V*F,V&&(S=Math.cos(-V),R=Math.sin(-V),O=O*S+M*R,b=k*S+z*R,z=k*-R+z*S,I=A*-R+I*S,k=b),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY+=180),d.scaleX=(0|Math.sqrt(O*O+k*k)*y+.5)/y,d.scaleY=(0|Math.sqrt(z*z+L*L)*y+.5)/y,d.scaleZ=(0|Math.sqrt(I*I+E*E)*y+.5)/y,d.skewX=0,d.perspective=j?1/(0>j?-j:j):0,d.x=Y,d.y=B,d.z=U,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*O-d.yOrigin*M),d.y-=d.yOrigin-(d.yOrigin*k-d.xOrigin*z))}else if(!(Se&&!s&&h.length&&d.x===h[4]&&d.y===h[5]&&(d.rotationX||d.rotationY)||void 0!==d.x&&"none"===$(t,"display",e))){var q=h.length>=6,W=q?h[0]:1,Z=h[1]||0,G=h[2]||0,Q=q?h[3]:1;d.x=h[4]||0,d.y=h[5]||0,p=Math.sqrt(W*W+Z*Z),c=Math.sqrt(Q*Q+G*G),f=W||Z?Math.atan2(Z,W)*F:d.rotation||0,m=G||Q?Math.atan2(G,Q)*F+f:d.skewX||0,Math.abs(m)>90&&270>Math.abs(m)&&(g?(p*=-1,m+=0>=f?180:-180,f+=0>=f?180:-180):(c*=-1,m+=0>=m?180:-180)),d.scaleX=p,d.scaleY=c,d.rotation=f,d.skewX=m,Se&&(d.rotationX=d.rotationY=d.z=0,d.perspective=x,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*W-d.yOrigin*Z),d.y-=d.yOrigin-(d.yOrigin*Q-d.xOrigin*G))}d.zOrigin=T;for(l in d)v>d[l]&&d[l]>-v&&(d[l]=0)}return i&&(t._gsTransform=d,d.svg&&(Te&&t.style[we]?Ne(t.style,we):!Te&&t.getAttribute("transform")&&t.removeAttribute("transform"))),d},ze=function(t){var e,i,s=this.data,r=-s.rotation*z,n=r+s.skewX*z,a=1e5,o=(0|Math.cos(r)*s.scaleX*a)/a,h=(0|Math.sin(r)*s.scaleX*a)/a,l=(0|Math.sin(n)*-s.scaleY*a)/a,_=(0|Math.cos(n)*s.scaleY*a)/a,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var c,f,d=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==p.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+_,w=s.x+d*s.xPercent/100,b=s.y+g*s.yPercent/100;if(null!=s.ox&&(c=(s.oxp?.01*d*s.ox:s.ox)-d/2,f=(s.oyp?.01*g*s.oy:s.oy)-g/2,w+=c-(c*o+f*h),b+=f-(c*l+f*_)),v?(c=d/2,f=g/2,y+=", Dx="+(c-(c*o+f*h)+w)+", Dy="+(f-(c*l+f*_)+b)+")"):y+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(D,y):y+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===_&&(v&&-1===y.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var P,S,R,O=8>m?1:-1;for(c=s.ieOffsetX||0,f=s.ieOffsetY||0,s.ieOffsetX=Math.round((d-((0>o?-o:o)*d+(0>h?-h:h)*g))/2+w),s.ieOffsetY=Math.round((g-((0>_?-_:_)*g+(0>l?-l:l)*d))/2+b),de=0;4>de;de++)S=ee[de],P=p[S],i=-1!==P.indexOf("px")?parseFloat(P):Q(this.t,S,parseFloat(P),P.replace(T,""))||0,R=i!==s[S]?2>de?-s.ieOffsetX:-s.ieOffsetY:2>de?c-s.ieOffsetX:f-s.ieOffsetY,u[S]=(s[S]=Math.round(i-R*(0===de||2===de?1:O)))+"px"}}},Fe=Y.set3DTransformRatio=Y.setTransformRatio=function(t){var e,i,s,r,n,a,o,h,l,_,u,p,f,m,d,g,v,y,T,x,w,b,P,S=this.data,R=this.t.style,O=S.rotation,k=S.rotationX,A=S.rotationY,C=S.scaleX,D=S.scaleY,M=S.scaleZ,F=S.x,I=S.y,N=S.z,X=S.svg,L=S.perspective,E=S.force3D;if(!((1!==t&&0!==t||"auto"!==E||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&E||N||L||A||k)||Te&&X||!Se)return void(O||S.skewX||X?(O*=z,b=S.skewX*z,P=1e5,e=Math.cos(O)*C,r=Math.sin(O)*C,i=Math.sin(O-b)*-D,n=Math.cos(O-b)*D,b&&"simple"===S.skewType&&(v=Math.tan(b),v=Math.sqrt(1+v*v),i*=v,n*=v),X&&(F+=S.xOrigin-(S.xOrigin*e+S.yOrigin*i),I+=S.yOrigin-(S.xOrigin*r+S.yOrigin*n),m=1e-6,m>F&&F>-m&&(F=0),m>I&&I>-m&&(I=0)),T=(0|e*P)/P+","+(0|r*P)/P+","+(0|i*P)/P+","+(0|n*P)/P+","+F+","+I+")",X&&Te?this.t.setAttribute("transform","matrix("+T):R[we]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix(":"matrix(")+T):R[we]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+D+","+F+","+I+")");if(c&&(m=1e-4,m>C&&C>-m&&(C=M=2e-5),m>D&&D>-m&&(D=M=2e-5),!L||S.z||S.rotationX||S.rotationY||(L=0)),O||S.skewX)O*=z,d=e=Math.cos(O),g=r=Math.sin(O),S.skewX&&(O-=S.skewX*z,d=Math.cos(O),g=Math.sin(O),"simple"===S.skewType&&(v=Math.tan(S.skewX*z),v=Math.sqrt(1+v*v),d*=v,g*=v)),i=-g,n=d;else{if(!(A||k||1!==M||L||X))return void(R[we]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) translate3d(":"translate3d(")+F+"px,"+I+"px,"+N+"px)"+(1!==C||1!==D?" scale("+C+","+D+")":""));e=n=1,i=r=0}l=1,s=a=o=h=_=u=0,p=L?-1/L:0,f=S.zOrigin,m=1e-6,x=",",w="0",O=A*z,O&&(d=Math.cos(O),g=Math.sin(O),o=-g,_=p*-g,s=e*g,a=r*g,l=d,p*=d,e*=d,r*=d),O=k*z,O&&(d=Math.cos(O),g=Math.sin(O),v=i*d+s*g,y=n*d+a*g,h=l*g,u=p*g,s=i*-g+s*d,a=n*-g+a*d,l*=d,p*=d,i=v,n=y),1!==M&&(s*=M,a*=M,l*=M,p*=M),1!==D&&(i*=D,n*=D,h*=D,u*=D),1!==C&&(e*=C,r*=C,o*=C,_*=C),(f||X)&&(f&&(F+=s*-f,I+=a*-f,N+=l*-f+f),X&&(F+=S.xOrigin-(S.xOrigin*e+S.yOrigin*i),I+=S.yOrigin-(S.xOrigin*r+S.yOrigin*n)),m>F&&F>-m&&(F=w),m>I&&I>-m&&(I=w),m>N&&N>-m&&(N=0)),T=S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix3d(":"matrix3d(",T+=(m>e&&e>-m?w:e)+x+(m>r&&r>-m?w:r)+x+(m>o&&o>-m?w:o),T+=x+(m>_&&_>-m?w:_)+x+(m>i&&i>-m?w:i)+x+(m>n&&n>-m?w:n),k||A?(T+=x+(m>h&&h>-m?w:h)+x+(m>u&&u>-m?w:u)+x+(m>s&&s>-m?w:s),T+=x+(m>a&&a>-m?w:a)+x+(m>l&&l>-m?w:l)+x+(m>p&&p>-m?w:p)+x):T+=",0,0,0,0,1,0,",T+=F+x+I+x+N+x+(L?1+-N/L:1)+")",R[we]=T};l=Re.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=0,l.scaleX=l.scaleY=l.scaleZ=1,ve("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,i,s,n,o,h){if(s._lastParsedTransform===h)return n;s._lastParsedTransform=h;var l,_,u,p,c,f,m,d=s._transform=Me(t,r,!0,h.parseTransform),g=t.style,v=1e-6,y=xe.length,T=h,x={};if("string"==typeof T.transform&&we)u=L.style,u[we]=T.transform,u.display="block",u.position="absolute",N.body.appendChild(L),l=Me(L,null,!1),N.body.removeChild(L);else if("object"==typeof T){if(l={scaleX:ne(null!=T.scaleX?T.scaleX:T.scale,d.scaleX),scaleY:ne(null!=T.scaleY?T.scaleY:T.scale,d.scaleY),scaleZ:ne(T.scaleZ,d.scaleZ),x:ne(T.x,d.x),y:ne(T.y,d.y),z:ne(T.z,d.z),xPercent:ne(T.xPercent,d.xPercent),yPercent:ne(T.yPercent,d.yPercent),perspective:ne(T.transformPerspective,d.perspective)},m=T.directionalRotation,null!=m)if("object"==typeof m)for(u in m)T[u]=m[u];else T.rotation=m;"string"==typeof T.x&&-1!==T.x.indexOf("%")&&(l.x=0,l.xPercent=ne(T.x,d.xPercent)),"string"==typeof T.y&&-1!==T.y.indexOf("%")&&(l.y=0,l.yPercent=ne(T.y,d.yPercent)),l.rotation=ae("rotation"in T?T.rotation:"shortRotation"in T?T.shortRotation+"_short":"rotationZ"in T?T.rotationZ:d.rotation,d.rotation,"rotation",x),Se&&(l.rotationX=ae("rotationX"in T?T.rotationX:"shortRotationX"in T?T.shortRotationX+"_short":d.rotationX||0,d.rotationX,"rotationX",x),l.rotationY=ae("rotationY"in T?T.rotationY:"shortRotationY"in T?T.shortRotationY+"_short":d.rotationY||0,d.rotationY,"rotationY",x)),l.skewX=null==T.skewX?d.skewX:ae(T.skewX,d.skewX),l.skewY=null==T.skewY?d.skewY:ae(T.skewY,d.skewY),(_=l.skewY-d.skewY)&&(l.skewX+=_,l.rotation+=_)}for(Se&&null!=T.force3D&&(d.force3D=T.force3D,f=!0),d.skewType=T.skewType||d.skewType||a.defaultSkewType,c=d.force3D||d.z||d.rotationX||d.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,c||null==T.scale||(l.scaleZ=1);--y>-1;)i=xe[y],p=l[i]-d[i],(p>v||-v>p||null!=T[i]||null!=I[i])&&(f=!0,n=new fe(d,i,d[i],p,n),i in x&&(n.e=x[i]),n.xs0=0,n.plugin=o,s._overwriteProps.push(n.n));return p=T.transformOrigin,d.svg&&(p||T.svgOrigin)&&(De(t,se(p),l,T.svgOrigin),n=new fe(d,"xOrigin",d.xOrigin,l.xOrigin-d.xOrigin,n,-1,"transformOrigin"),n.b=d.xOrigin,n.e=n.xs0=l.xOrigin,n=new fe(d,"yOrigin",d.yOrigin,l.yOrigin-d.yOrigin,n,-1,"transformOrigin"),n.b=d.yOrigin,n.e=n.xs0=l.yOrigin,p=Te?null:"0px 0px"),(p||Se&&c&&d.zOrigin)&&(we?(f=!0,i=Pe,p=(p||$(t,i,r,!1,"50% 50%"))+"",n=new fe(g,i,0,0,n,-1,"transformOrigin"),n.b=g[i],n.plugin=o,Se?(u=d.zOrigin,p=p.split(" "),d.zOrigin=(p.length>2&&(0===u||"0px"!==p[2])?parseFloat(p[2]):u)||0,n.xs0=n.e=p[0]+" "+(p[1]||"50%")+" 0px",n=new fe(d,"zOrigin",0,0,n,-1,n.n),n.b=u,n.xs0=n.e=d.zOrigin):n.xs0=n.e=p):se(p+"",d)),f&&(s._transformType=d.svg&&Te||!c&&3!==this._transformType?2:3),n},prefix:!0}),ve("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),ve("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,h,l,_,u,p,c,f,m,d,g,v,y,T,x,w,b=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],P=t.style;for(m=parseFloat(t.offsetWidth),d=parseFloat(t.offsetHeight),o=e.split(" "),h=0;b.length>h;h++)this.p.indexOf("border")&&(b[h]=Z(b[h])),u=_=$(t,b[h],r,!1,"0px"),-1!==u.indexOf(" ")&&(_=u.split(" "),u=_[0],_=_[1]),p=l=o[h],c=parseFloat(u),v=u.substr((c+"").length),y="="===p.charAt(1),y?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),g=p.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(p),g=p.substr((f+"").length)),""===g&&(g=s[i]||v),g!==v&&(T=Q(t,"borderLeft",c,v),x=Q(t,"borderTop",c,v),"%"===g?(u=100*(T/m)+"%",_=100*(x/d)+"%"):"em"===g?(w=Q(t,"borderLeft",1,"em"),u=T/w+"em",_=x/w+"em"):(u=T+"px",_=x+"px"),y&&(p=parseFloat(u)+f+g,l=parseFloat(_)+f+g)),a=me(P,b[h],u+" "+_,p+" "+l,!1,"0px",a);return a},prefix:!0,formatter:ue("0px 0px 0px 0px",!1,!0)}),ve("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,n,a){var o,h,l,_,u,p,c="background-position",f=r||G(t,null),d=this.format((f?m?f.getPropertyValue(c+"-x")+" "+f.getPropertyValue(c+"-y"):f.getPropertyValue(c):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==d.indexOf("%")!=(-1!==g.indexOf("%"))&&(p=$(t,"backgroundImage").replace(O,""),p&&"none"!==p)){for(o=d.split(" "),h=g.split(" "),E.setAttribute("src",p),l=2;--l>-1;)d=o[l],_=-1!==d.indexOf("%"),_!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-E.width:t.offsetHeight-E.height,o[l]=_?parseFloat(d)/100*u+"px":100*(parseFloat(d)/u)+"%");d=o.join(" ")}return this.parseComplex(t.style,d,g,n,a)},formatter:se}),ve("backgroundSize",{defaultValue:"0 0",formatter:se}),ve("perspective",{defaultValue:"0px",prefix:!0}),ve("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),ve("transformStyle",{prefix:!0}),ve("backfaceVisibility",{prefix:!0}),ve("userSelect",{prefix:!0}),ve("margin",{parser:pe("marginTop,marginRight,marginBottom,marginLeft")}),ve("padding",{parser:pe("paddingTop,paddingRight,paddingBottom,paddingLeft")}),ve("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,n,a){var o,h,l;return 9>m?(h=t.currentStyle,l=8>m?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format($(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),ve("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),ve("autoRound,strictUnits",{parser:function(t,e,i,s,r){return r}}),ve("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format($(t,"borderTopWidth",r,!1,"0px")+" "+$(t,"borderTopStyle",r,!1,"solid")+" "+$(t,"borderTopColor",r,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(_e)||["#000"])[0]}}),ve("borderWidth",{parser:pe("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),ve("float,cssFloat,styleFloat",{parser:function(t,e,i,s,r){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new fe(n,a,0,0,r,-1,i,!1,0,n[a],e)}});var Ie=function(t){var e,i=this.t,s=i.filter||$(this.data,"filter")||"",r=0|this.s+this.c*t;100===r&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=s.replace(b,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+r+")"),-1===s.indexOf("pacity")?0===r&&this.xn1||(i.filter=s+" alpha(opacity="+r+")"):i.filter=s.replace(x,"opacity="+r))};ve("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,n,a){var o=parseFloat($(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===$(t,"visibility",r)&&0!==e&&(o=0),U?n=new fe(h,"opacity",o,e-o,n):(n=new fe(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Ie),l&&(n=new fe(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",s._overwriteProps.push(n.n),s._overwriteProps.push(i)),n}});var Ne=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(S,"-$1").toLowerCase())):t.removeAttribute(e))},Xe=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ne(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)
};ve("className",{parser:function(t,e,s,n,a,o,h){var l,_,u,p,c,f=t.getAttribute("class")||"",m=t.style.cssText;if(a=n._classNamePT=new fe(t,s,0,0,a,2),a.setRatio=Xe,a.pr=-11,i=!0,a.b=f,_=K(t,r),u=t._gsClassPT){for(p={},c=u.data;c;)p[c.p]=1,c=c._next;u.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",a.e),l=J(t,_,K(t),h,p),t.setAttribute("class",f),a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)}});var Le=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,s,r,n,a=this.t.style,o=h.transform.parse;if("all"===this.e)a.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),s=e.length;--s>-1;)i=e[s],h[i]&&(h[i].parse===o?r=!0:i="transformOrigin"===i?Pe:h[i].p),Ne(a,i);r&&(Ne(a,we),n=this.t._gsTransform,n&&(n.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(ve("clearProps",{parser:function(t,e,s,r,n){return n=new fe(t,s,0,0,n,2),n.setRatio=Le,n.e=e,n.pr=-10,n.data=r._tween,i=!0,n}}),l="bezier,throwProps,physicsProps,physics2D".split(","),de=l.length;de--;)ye(l[de]);l=a.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,_=e.autoRound,i=!1,s=e.suffixMap||a.suffixMap,r=G(t,""),n=this._overwriteProps;var l,c,m,d,g,v,y,T,x,b=t.style;if(u&&""===b.zIndex&&(l=$(t,"zIndex",r),("auto"===l||""===l)&&this._addLazySet(b,"zIndex",0)),"string"==typeof e&&(d=b.cssText,l=K(t,r),b.cssText=d+";"+e,l=J(t,l,K(t)).difs,!U&&w.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,b.cssText=d),this._firstPT=c=e.className?h.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(x=3===this._transformType,we?p&&(u=!0,""===b.zIndex&&(y=$(t,"zIndex",r),("auto"===y||""===y)&&this._addLazySet(b,"zIndex",0)),f&&this._addLazySet(b,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):b.zoom=1,m=c;m&&m._next;)m=m._next;T=new fe(t,"transform",0,0,null,2),this._linkCSSP(T,null,m),T.setRatio=we?Fe:ze,T.data=this._transform||Me(t,r,!0),T.tween=o,T.pr=-1,n.pop()}if(i){for(;c;){for(v=c._next,m=d;m&&m.pr>c.pr;)m=m._next;(c._prev=m?m._prev:g)?c._prev._next=c:d=c,(c._next=m)?m._prev=c:g=c,c=v}this._firstPT=d}return!0},l.parse=function(t,e,i,n){var a,o,l,u,p,c,f,m,d,g,v=t.style;for(a in e)c=e[a],o=h[a],o?i=o.parse(t,c,a,this,i,n,e):(p=$(t,a,r)+"",d="string"==typeof c,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||d&&P.test(c)?(d||(c=le(c),c=(c.length>3?"rgba(":"rgb(")+c.join(",")+")"),i=me(v,a,p,c,!0,"transparent",i,0,n)):!d||-1===c.indexOf(" ")&&-1===c.indexOf(",")?(l=parseFloat(p),f=l||0===l?p.substr((l+"").length):"",(""===p||"auto"===p)&&("width"===a||"height"===a?(l=ie(t,a,r),f="px"):"left"===a||"top"===a?(l=H(t,a,r),f="px"):(l="opacity"!==a?0:1,f="")),g=d&&"="===c.charAt(1),g?(u=parseInt(c.charAt(0)+"1",10),c=c.substr(2),u*=parseFloat(c),m=c.replace(T,"")):(u=parseFloat(c),m=d?c.replace(T,""):""),""===m&&(m=a in s?s[a]:f),c=u||0===u?(g?u+l:u)+m:e[a],f!==m&&""!==m&&(u||0===u)&&l&&(l=Q(t,a,l,f),"%"===m?(l/=Q(t,a,100,"%")/100,e.strictUnits!==!0&&(p=l+"%")):"em"===m?l/=Q(t,a,1,"em"):"px"!==m&&(u=Q(t,a,u,m),m="px"),g&&(u||0===u)&&(c=u+l+m)),g&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==v[a]&&(c||"NaN"!=c+""&&null!=c)?(i=new fe(v,a,u||l||0,0,i,-1,a,!1,0,p,c),i.xs0="none"!==c||"display"!==a&&-1===a.indexOf("Style")?c:p):V("invalid "+a+" tween value: "+e[a]):(i=new fe(v,a,l,u-l,i,0,a,_!==!1&&("px"===m||"zIndex"===a),0,p,c),i.xs0=m)):i=me(v,a,p,c,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},l.setRatio=function(t){var e,i,s,r=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):n>e&&e>-n&&(e=0),r.type)if(1===r.type)if(s=r.l,2===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,s=1;r.l>s;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},l._enableTransforms=function(t){this._transform=this._transform||Me(this._target,r,!0),this._transformType=this._transform.svg&&Te||!t&&3!==this._transformType?2:3};var Ee=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var s=this._firstPT=new fe(t,e,0,0,this._firstPT,2);s.e=i,s.setRatio=Ee,s.data=this},l._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,s,r,n=e;if(e.autoAlpha||e.alpha){n={};for(s in e)n[s]=e[s];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Ye=function(t,e,i){var s,r,n,a;if(t.slice)for(r=t.length;--r>-1;)Ye(t[r],e,i);else for(s=t.childNodes,r=s.length;--r>-1;)n=s[r],a=n.type,n.style&&(e.push(K(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Ye(n,e,i)};return a.cascadeTo=function(t,i,s){var r,n,a,o,h=e.to(t,i,s),l=[h],_=[],u=[],p=[],c=e._internals.reservedProps;for(t=h._targets||h.target,Ye(t,_,p),h.render(i,!0,!0),Ye(t,u),h.render(0,!0,!0),h._enabled(!0),r=p.length;--r>-1;)if(n=J(p[r],_[r],u[r]),n.firstMPT){n=n.difs;for(a in s)c[a]&&(n[a]=s[a]);o={};for(a in n)o[a]=_[r][a];l.push(e.fromTo(p[r],i,o,n))}return l},t.activate([a]),a},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,s=this._tween,r=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),n=r.length,a={},o=s._propLookup.roundProps;--n>-1;)a[r[n]]=1;for(n=r.length;--n>-1;)for(t=r[n],e=s._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:s._firstPT===e&&(s._firstPT=i),e._next=e._prev=null,s._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(t,e){var i,s,r;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={},this._start={},this._end={};for(i in e)this._start[i]=this._proxy[i]=s=t.getAttribute(i),r=this._addTween(this._proxy,i,parseFloat(s),e[i],i),this._end[i]=r?r.s+r.c:e[i],this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,s=i.length,r=1===t?this._end:t?this._proxy:this._start;--s>-1;)e=i[s],this._target.setAttribute(e,r[e]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,s,r,n,a,o,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),s=o[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=this.finals[i]="string"==typeof s&&"="===s.charAt(1)?r+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,a=n-r,o.length&&(s=o.join("_"),-1!==s.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=0>a?a+h:a-h)),-1!==s.indexOf("_cw")&&0>a?a=(a+9999999999*h)%h-(0|a/h)*h:-1!==s.indexOf("ccw")&&a>0&&(a=(a-9999999999*h)%h-(0|a/h)*h)),(a>l||-l>a)&&(this._addTween(t,i,r,r+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,r=_gsScope.GreenSockGlobals||_gsScope,n=r.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var s=h("easing."+e,function(){},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,s},_=t.register||function(){},u=function(t,e,i,s){var r=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return _(r,t),r},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},c=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,r.config=function(t){return new s(t)},s},f=u("Back",c("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),c("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),c("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),d=m.prototype=new t;return d.constructor=m,d.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),d.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),d=e.prototype=new t,d.constructor=e,d.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},d.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,s,r,n,a,o,h=e.taper||"none",l=[],_=0,u=0|(e.points||20),c=u,f=e.randomize!==!1,m=e.clamp===!0,d=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--c>-1;)i=f?Math.random():1/u*c,s=d?d.getRatio(i):i,"none"===h?r=g:"out"===h?(n=1-i,r=n*n*g):"in"===h?r=i*i*g:.5>i?(n=2*i,r=.5*n*n*g):(n=2*(1-i),r=.5*n*n*g),f?s+=Math.random()*r-.5*r:c%2?s+=.5*r:s-=.5*r,m&&(s>1?s=1:0>s&&(s=0)),l[_++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),o=new p(1,1,null),c=u;--c>-1;)a=l[c],o=new p(a.x,a.y,o);this._prev=new p(0,0,0!==o.t?o:o.next)},!0),d=i.prototype=new t,d.constructor=i,d.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},d.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var r=h("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||s)/(1>t?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t,e){return new r(t,e)},r},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),_(r.SlowMo,"SlowMo","ease,"),_(i,"RoughEase","ease,"),_(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var s,r,n,a,o,h=function(t){var e,s=t.split("."),r=i;for(e=0;s.length>e;e++)r[s[e]]=r=r[s[e]]||{};return r},l=h("com.greensock"),_=1e-10,u=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},p=function(){},c=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},m=function(s,r,n,a){this.sc=f[s]?f[s].sc:[],f[s]=this,this.gsClass=null,this.func=n;var o=[];this.check=function(l){for(var _,u,p,c,d=r.length,g=d;--d>-1;)(_=f[r[d]]||new m(r[d],[])).gsClass?(o[d]=_.gsClass,g--):l&&_.sc.push(this);if(0===g&&n)for(u=("com.greensock."+s).split("."),p=u.pop(),c=h(u.join("."))[p]=this.gsClass=n.apply(n,o),a&&(i[p]=c,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return c}):s===e&&"undefined"!=typeof module&&module.exports&&(module.exports=c)),d=0;this.sc.length>d;d++)this.sc[d].check()},this.check(!0)},d=t._gsDefine=function(t,e,i,s){return new m(t,e,i,s)},g=l._class=function(t,e,i){return e=e||function(){},d(t,[],function(){return e},i),e};d.globals=i;var v=[0,0,1,1],y=[],T=g("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?v.concat(e):v},!0),x=T.map={},w=T.register=function(t,e,i,s){for(var r,n,a,o,h=e.split(","),_=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--_>-1;)for(n=h[_],r=s?g("easing."+n,null,!0):l.easing[n]||{},a=u.length;--a>-1;)o=u[a],x[n+"."+o]=x[o+n]=r[o]=t.getRatio?t:t[o]||new t};for(n=T.prototype,n._calcEnd=!1,n.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=s.length;--r>-1;)n=s[r]+",Power"+r,w(new T(null,null,1,r),n,"easeOut",!0),w(new T(null,null,2,r),n,"easeIn"+(0===r?",easeNone":"")),w(new T(null,null,3,r),n,"easeInOut");x.linear=l.easing.Linear.easeIn,x.swing=l.easing.Quad.easeInOut;var b=g("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});n=b.prototype,n.addEventListener=function(t,e,i,s,r){r=r||0;var n,h,l=this._listeners[t],_=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)n=l[h],n.c===e&&n.s===i?l.splice(h,1):0===_&&r>n.pr&&(_=h+1);l.splice(_,0,{c:e,s:i,up:s,pr:r}),this!==a||o||a.wake()},n.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return void s.splice(i,1)},n.dispatchEvent=function(t){var e,i,s,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)s=r[e],s&&(s.up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i))};var P=t.requestAnimationFrame,S=t.cancelAnimationFrame,R=Date.now||function(){return(new Date).getTime()},O=R();for(s=["ms","moz","webkit","o"],r=s.length;--r>-1&&!P;)P=t[s[r]+"RequestAnimationFrame"],S=t[s[r]+"CancelAnimationFrame"]||t[s[r]+"CancelRequestAnimationFrame"];g("Ticker",function(t,e){var i,s,r,n,h,l=this,u=R(),c=e!==!1&&P,f=500,m=33,d="tick",g=function(t){var e,a,o=R()-O;o>f&&(u+=o-m),O+=o,l.time=(O-u)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=n?.004:n-e),a=!0),t!==!0&&(r=s(g)),a&&l.dispatchEvent(d)};b.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(t,e){f=t||1/_,m=Math.min(e,f,0)},l.sleep=function(){null!=r&&(c&&S?S(r):clearTimeout(r),s=p,r=null,l===a&&(o=!1))},l.wake=function(){null!==r?l.sleep():l.frame>10&&(O=R()-f+5),s=0===i?p:c&&P?P:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===a&&(o=!0),g(2)},l.fps=function(t){return arguments.length?(i=t,n=1/(i||60),h=this.time+n,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),c=t,void l.fps(i)):c},l.fps(t),setTimeout(function(){c&&5>l.frame&&l.useRAF(!1)},1500)}),n=l.Ticker.prototype=new l.events.EventDispatcher,n.constructor=l.Ticker;var k=g("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,j){o||a.wake();var i=this.vars.useFrames?U:j;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=k.ticker=new l.Ticker,n=k.prototype,n._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var A=function(){o&&R()-O>2e3&&a.wake(),setTimeout(A,2e3)};A(),n.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},n.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},n.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},n.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},n.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},n.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},n.render=function(){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},n.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},n._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(){return this._enabled(!1,!1)},n.kill=function(t,e){return this._kill(t,e),this},n._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},n._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},n.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=c(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},n.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},n.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},n.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,r=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?s-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),F.length&&q())}return this},n.progress=n.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},n.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},n.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||_,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},n.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(t){if(!arguments.length)return this._paused;var e,i,s=this._timeline;return t!=this._paused&&s&&(o||t||a.wake(),e=s.rawTime(),i=e-this._pauseTime,!t&&s.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(s.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var C=g("core.SimpleTimeline",function(t){k.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});n=C.prototype=new k,n.constructor=C,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(t,e){var i,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(s=t._startTime;i&&i._startTime>s;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},n._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(t,e,i){var s,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)s=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=s},n.rawTime=function(){return o||a.wake(),this._totalTime};var D=g("TweenLite",function(e,i,s){if(k.call(this,i,s),this.render=D.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:D.selector(e)||e;var r,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?B[D.defaultOverwrite]:"number"==typeof h?h>>0:B[h],(o||e instanceof Array||e.push&&c(e))&&"number"!=typeof e[0])for(this._targets=a=u(e),this._propLookup=[],this._siblings=[],r=0;a.length>r;r++)n=a[r],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(u(n))):(this._siblings[r]=W(n,this,!1),1===h&&this._siblings[r].length>1&&G(n,this,null,1,this._siblings[r])):(n=a[r--]=D.selector(n),"string"==typeof n&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=W(e,this,!1),1===h&&this._siblings.length>1&&G(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-_,this.render(-this._delay))},!0),M=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},z=function(t,e){var i,s={};for(i in t)Y[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!X[i]||X[i]&&X[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s};n=D.prototype=new k,n.constructor=D,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,D.version="1.16.1",D.defaultEase=n._ease=new T(null,null,1,1),D.defaultOverwrite="auto",D.ticker=a,D.autoSleep=120,D.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},D.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(D.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var F=[],I={},N=D._internals={isArray:c,isSelector:M,lazyTweens:F},X=D._plugins={},L=N.tweenLookup={},E=0,Y=N.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},B={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},U=k._rootFramesTimeline=new C,j=k._rootTimeline=new C,V=30,q=N.lazyRender=function(){var t,e=F.length;for(I={};--e>-1;)t=F[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);F.length=0};j._startTime=a.time,U._startTime=a.frame,j._active=U._active=!0,setTimeout(q,1),k._updateRoot=D.render=function(){var t,e,i;if(F.length&&q(),j.render((a.time-j._startTime)*j._timeScale,!1,!1),U.render((a.frame-U._startTime)*U._timeScale,!1,!1),F.length&&q(),a.frame>=V){V=a.frame+(parseInt(D.autoSleep,10)||120);for(i in L){for(e=L[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete L[i]}if(i=j._first,(!i||i._paused)&&D.autoSleep&&!U._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",k._updateRoot);var W=function(t,e,i){var s,r,n=t._gsTweenID;if(L[n||(t._gsTweenID=n="t"+E++)]||(L[n]={target:t,tweens:[]}),e&&(s=L[n].tweens,s[r=s.length]=e,i))for(;--r>-1;)s[r]===e&&s.splice(r,1);return L[n].tweens},Z=function(t,e,i,s){var r,n,a=t.vars.onOverwrite;return a&&(r=a(t,e,i,s)),a=D.onOverwrite,a&&(n=a(t,e,i,s)),r!==!1&&n!==!1},G=function(t,e,i,s,r){var n,a,o,h;if(1===s||s>=4){for(h=r.length,n=0;h>n;n++)if((o=r[n])!==e)o._gc||Z(o,e)&&o._enabled(!1,!1)&&(a=!0);else if(5===s)break;return a}var l,u=e._startTime+_,p=[],c=0,f=0===e._duration;for(n=r.length;--n>-1;)(o=r[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||$(e,0,f),0===$(o,l,f)&&(p[c++]=o)):u>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>u&&((f||!o._initted)&&2e-10>=u-o._startTime||(p[c++]=o)));for(n=c;--n>-1;)if(o=p[n],2===s&&o._kill(i,t,e)&&(a=!0),2!==s||!o._firstPT&&o._initted){if(2!==s&&!Z(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},$=function(t,e,i){for(var s=t._timeline,r=s._timeScale,n=t._startTime;s._timeline;){if(n+=s._startTime,r*=s._timeScale,s._paused)return-100;s=s._timeline}return n/=r,n>e?n-e:i&&n===e||!t._initted&&2*_>n-e?_:(n+=t.totalDuration()/t._timeScale/r)>e+_?0:n-e-_};n._init=function(){var t,e,i,s,r,n=this.vars,a=this._overwrittenProps,o=this._duration,h=!!n.immediateRender,l=n.ease;if(n.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(s in n.startAt)r[s]=n.startAt[s];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&n.lazy!==!1,r.startAt=r.delay=null,this._startAt=D.to(this.target,0,r),h)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(n.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(s in n)Y[s]&&"autoCSS"!==s||(i[s]=n[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&n.lazy!==!1,i.immediateRender=h,this._startAt=D.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof T?l:"function"==typeof l?new T(l,n.easeParams):x[l]||D.defaultEase:D.defaultEase,n.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,n.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&D._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),n.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=n.onUpdate,this._initted=!0},n._initProps=function(e,i,s,r){var n,a,o,h,l,_;if(null==e)return!1;I[e._gsTweenID]&&q(),this.vars.css||e.style&&e!==t&&e.nodeType&&X.css&&this.vars.autoCSS!==!1&&z(this.vars,e);for(n in this.vars){if(_=this.vars[n],Y[n])_&&(_ instanceof Array||_.push&&c(_))&&-1!==_.join("").indexOf("{self}")&&(this.vars[n]=_=this._swapSelfInParams(_,this));else if(X[n]&&(h=new X[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof _&&"="===_.charAt(1)?parseInt(_.charAt(0)+"1",10)*Number(_.substr(2)):Number(_)-l.s||0;l&&l._next&&(l._next._prev=l)}return r&&this._kill(r,e)?this._initProps(e,i,s,r):this._overwrite>1&&this._firstPT&&s.length>1&&G(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(I[e._gsTweenID]=!0),o)},n.render=function(t,e,i){var s,r,n,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===_&&"isPause"!==this.data)&&l!==t&&(i=!0,l>_&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:_);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==_||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:_)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,p=this._easeType,c=this._easePower;
(1===p||3===p&&u>=.5)&&(u=1-u),3===p&&(u*=2),1===c?u*=u:2===c?u*=u*u:3===c?u*=u*u*u:4===c&&(u*=u*u*u*u),this.ratio=1===p?1-u:2===p?u:.5>t/h?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,F.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||y))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||y)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||y),0===h&&this._rawPrevTime===_&&a!==_&&(this._rawPrevTime=0))}},n._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:D.selector(e)||e;var s,r,n,a,o,h,l,_,u;if((c(e)||M(e))&&"number"!=typeof e[0])for(s=e.length;--s>-1;)this._kill(t,e[s])&&(h=!0);else{if(this._targets){for(s=this._targets.length;--s>-1;)if(e===this._targets[s]){o=this._propLookup[s]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[s]=t?this._overwrittenProps[s]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,_=t!==r&&"all"!==r&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(D.onOverwrite||this.vars.onOverwrite)){for(n in l)o[n]&&(u||(u=[]),u.push(n));if(!Z(this,i,e,u))return!1}for(n in l)(a=o[n])&&(a.pg&&a.t._kill(l)&&(h=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[n]),_&&(r[n]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},n.invalidate=function(){return this._notifyPluginsOfEnabled&&D._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],k.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-_,this.render(-this._delay)),this},n._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=W(s[i],this,!0);else this._siblings=W(this.target,this,!0)}return k.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?D._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},D.to=function(t,e,i){return new D(t,e,i)},D.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new D(t,e,i)},D.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new D(t,e,s)},D.delayedCall=function(t,e,i,s,r){return new D(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},D.set=function(t,e){return new D(t,0,e)},D.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:D.selector(t)||t;var i,s,r,n;if((c(t)||M(t))&&"number"!=typeof t[0]){for(i=t.length,s=[];--i>-1;)s=s.concat(D.getTweensOf(t[i],e));for(i=s.length;--i>-1;)for(n=s[i],r=i;--r>-1;)n===s[r]&&s.splice(i,1)}else for(s=W(t).concat(),i=s.length;--i>-1;)(s[i]._gc||e&&!s[i].isActive())&&s.splice(i,1);return s},D.killTweensOf=D.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var s=D.getTweensOf(t,e),r=s.length;--r>-1;)s[r]._kill(i,t)};var Q=g("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Q.prototype},!0);if(n=Q.prototype,Q.version="1.10.1",Q.API=2,n._firstPT=null,n._addTween=function(t,e,i,s,r,n){var a,o;return null!=s&&(a="number"==typeof s||"="!==s.charAt(1)?Number(s)-i:parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:r||e,r:n},o._next&&(o._next._prev=o),o):void 0},n.setRatio=function(t){for(var e,i=this._firstPT,s=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):s>e&&e>-s&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},n._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},n._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},D._onPluginEvent=function(t,e){var i,s,r,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,s=r;s&&s.pr>o.pr;)s=s._next;(o._prev=s?s._prev:n)?o._prev._next=o:r=o,(o._next=s)?s._prev=o:n=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},Q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Q.API&&(X[(new t[e])._propName]=t[e]);return!0},d.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,r=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Q.call(this,i,s),this._overwriteProps=r||[]},t.global===!0),o=a.prototype=new Q(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,Q.activate([a]),a},s=t._gsQueue){for(r=0;s.length>r;r++)s[r]();for(n in f)f[n].func||t.console.log("GSAP encountered missing dependency: com.greensock."+n)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");var Countdown=function(){var t=function(){var t=new Date,e=t.getTime(),n=60*t.getTimezoneOffset()*1e3,s=e+n,i=s+288e5;return new Date(i)};return{countdown_interval:null,total_seconds:0,init:function(t){this.$={hours:$(".countdown").find(".bloc-time.hours .figure"),minutes:$(".countdown").find(".bloc-time.min .figure"),seconds:$(".countdown").find(".bloc-time.sec .figure")},this.values={hours:this.$.hours.parent().attr("data-init-value"),minutes:this.$.minutes.parent().attr("data-init-value"),seconds:this.$.seconds.parent().attr("data-init-value")},this.total_seconds=60*parseInt(this.values.hours)*60+60*parseInt(this.values.minutes)+parseInt(this.values.seconds),this.count(t)},cleanTimer:function(){clearInterval(this.countdown_interval)},count:function(t){var e=this,n=this.$.hours.eq(0),s=this.$.hours.eq(1),i=this.$.minutes.eq(0),o=this.$.minutes.eq(1),a=this.$.seconds.eq(0),u=this.$.seconds.eq(1);this.countdown_interval=setInterval(function(){e.total_seconds>0?(--e.values.seconds,e.values.minutes>0&&e.values.seconds<0&&(e.values.seconds=59,--e.values.minutes),e.values.hours>0&&e.values.minutes<0&&(e.values.minutes=59,--e.values.hours),e.checkHour(e.values.hours,n,s),e.checkHour(e.values.minutes,i,o),e.checkHour(e.values.seconds,a,u),--e.total_seconds):(clearInterval(e.countdown_interval),t&&t())},1e3)},animateFigure:function(t,e){var n=t.find(".top"),s=t.find(".bottom"),i=t.find(".top-back"),o=t.find(".bottom-back");i.find("span").html(e),o.find("span").html(e),TweenMax.to(n,.8,{rotationX:"-180deg",transformPerspective:300,ease:Quart.easeOut,onComplete:function(){n.html(e),s.html(e),TweenMax.set(n,{rotationX:0})}}),TweenMax.to(i,.8,{rotationX:0,transformPerspective:300,ease:Quart.easeOut,clearProps:"all"})},checkHour:function(t,e,n){var s=t.toString().charAt(0),i=t.toString().charAt(1),o=e.find(".top").html(),a=n.find(".top").html();t>=10?(o!==s&&this.animateFigure(e,s),a!==i&&this.animateFigure(n,i)):("0"!==o&&this.animateFigure(e,0),a!==s&&this.animateFigure(n,s))},initBuyButton:function(t,e){this.$={minutes:$(".hj-minites"),seconds:$(".hj-seconds")},this.dst_time=t,this.countBuyButton(e)},countBuyButton:function(e){var n=this,s=function(){var s=t().getTime(),i=n.dst_time-s;if(i>900){i/=1e3;var o=parseInt(i/60),a=parseInt(i%60);10>o&&(o="0"+o),10>a&&(a="0"+a),n.$.minutes.html(o),n.$.seconds.html(a)}else clearInterval(n.countdown_interval),e&&e()};s(),this.countdown_interval=setInterval(function(){s()},1e3)}}};!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(at.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return U.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=ht[e]={};return Z.each(e.match(dt)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(bt,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xt.test(n)?Z.parseJSON(n):n}catch(i){}yt.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Pt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)vt.set(e[n],"globalEval",!t||vt.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(vt.hasData(e)&&(o=vt.access(e),s=vt.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(t,i,l[i][n])}yt.hasData(e)&&(a=yt.access(e),u=Z.extend({},a),yt.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Nt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function x(t,n){var r,i=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(e){var t=J,n=$t[e];return n||(n=x(e,t),"none"!==n&&n||(Wt=(Wt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Wt[0].contentDocument,t.write(),t.close(),n=x(e,t),Wt.detach()),$t[e]=n),n}function w(e,t,n){var r,i,o,s,a=e.style;return n=n||_t(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Bt.test(s)&&It.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Gt.length;i--;)if(t=Gt[i]+n,t in e)return t;return r}function N(e,t,n){var r=Xt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+Tt[o],!0,i)),r?("content"===n&&(s-=Z.css(e,"padding"+Tt[o],!0,i)),"margin"!==n&&(s-=Z.css(e,"border"+Tt[o]+"Width",!0,i))):(s+=Z.css(e,"padding"+Tt[o],!0,i),"padding"!==n&&(s+=Z.css(e,"border"+Tt[o]+"Width",!0,i)));return s}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=_t(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(e,t,o),(0>i||null==i)&&(i=e.style[t]),Bt.test(i))return i;r=s&&(Q.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(s?"border":"content"),r,o)+"px"}function S(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=vt.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ct(r)&&(o[s]=vt.access(r,"olddisplay",b(r.nodeName)))):(i=Ct(r),"none"===n&&i||vt.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function j(){return setTimeout(function(){Qt=void 0}),Qt=Z.now()}function A(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Tt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(nn[t]||[]).concat(nn["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Ct(e),g=vt.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=Z.css(e,"display"),c="none"===l?vt.get(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Kt.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||Z.style(e,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=vt.access(e,"fxshow",{}),o&&(g.hidden=!h),h?Z(e).show():f.done(function(){Z(e).hide()}),f.done(function(){var t;vt.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(r in p)s=L(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function H(e,t){var n,r,i,o,s;for(n in e)if(r=Z.camelCase(n),i=t[r],o=e[n],Z.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function O(e,t,n){var r,i,o=0,s=tn.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qt||j(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qt||j(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(H(c,l.opts.specialEasing);s>o;o++)if(r=tn[o].call(l,e,c,l.opts))return r;return Z.map(c,L,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(dt)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(a){var u;return o[a]=!0,Z.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===bn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function R(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Z.extend(!0,e,r),e}function M(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function W(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,r){var i;if(Z.isArray(t))Z.each(t,function(t,i){n||kn.test(e)?r(e,i):$(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Z.type(t))r(e,t);else for(i in t)$(e+"["+i+"]",t[i],n,r)}function I(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var B=[],_=B.slice,z=B.concat,X=B.push,U=B.indexOf,V={},Y=V.toString,G=V.hasOwnProperty,Q={},J=e.document,K="2.1.4",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,nt=/-([\da-z])/gi,rt=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return _.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:_.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(_.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:B.sort,splice:B.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(nt,rt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;s>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Z.merge(r,"string"==typeof e?[e]:e):X.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),u=[];if(a)for(;s>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return z.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(r=_.call(arguments,2),i=function(){return e.apply(t||this,r.concat(_.call(arguments)))},i.guid=e.guid=e.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});var it=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h,g;if((t?t.ownerDocument||t:$)!==q&&L(t),t=t||q,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!r&&O){if(11!==a&&(i=yt.exec(e)))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&M(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!F||!F.test(e))){if(d=f=W,h=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(f=t.getAttribute("id"))?d=f.replace(bt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+p(l[u]);h=xt.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ut,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[W]=!0,e}function i(e){var t=q.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[I,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[W]||(t[W]={}),(a=u[r])&&a[0]===I&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[W]&&(i=v(i)),o&&!o[W]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?et(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):K.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return et(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==D)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>a;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[W]){for(r=++a;i>r&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ut,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=D,x=r||o&&T.find.TAG("*",l),b=I+=null==y?1:Math.random()||.1,w=x.length;for(l&&(D=s!==q&&s);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0;p=e[f++];)if(p(c,s,a)){u.push(c);break}l&&(I=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(u));v=m(v)}K.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(I=b,D=y),g};return i?r(s):s}var b,w,T,C,N,k,E,S,D,j,A,L,q,H,O,F,P,R,M,W="sizzle"+1*new Date,$=e.document,I=0,B=0,_=n(),z=n(),X=n(),U=function(e,t){return e===t&&(A=!0),0},V=1<<31,Y={}.hasOwnProperty,G=[],Q=G.pop,J=G.push,K=G.push,Z=G.slice,et=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",st=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ft=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(st),dt=new RegExp("^"+it+"$"),ht={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ct=function(){L()};try{K.apply(G=Z.call($.childNodes),$.childNodes),G[$.childNodes.length].nodeType}catch(Nt){K={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==q&&9===r.nodeType&&r.documentElement?(q=r,H=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),O=!N(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(r.getElementsByClassName),w.getById=i(function(e){return H.appendChild(e).id=W,!r.getElementsByName||!r.getElementsByName(W).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(wt,Tt);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(wt,Tt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return O?t.getElementsByClassName(e):void 0},P=[],F=[],(w.qsa=vt.test(r.querySelectorAll))&&(i(function(e){H.appendChild(e).innerHTML="<a id='"+W+"'></a><select id='"+W+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+W+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+W+"+*").length||F.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=vt.test(R=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",st)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=vt.test(H.compareDocumentPosition),M=t||vt.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===$&&M($,e)?-1:t===r||t.ownerDocument===$&&M($,t)?1:j?et(j,e)-et(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:j?et(j,e)-et(j,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===$?-1:l[i]===$?1:0},r):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&L(e),n=n.replace(ft,"='$1']"),!(!w.matchesSelector||!O||P&&P.test(n)||F&&F.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&L(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,j=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return j=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Tt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ht.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pt.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,Tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(at," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(c=m[W]||(m[W]={}),l=c[e]||[],d=l[0]===I&&l[1],p=l[0]===I&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[I,d,p];break}}else if(y&&(l=(t[W]||(t[W]={}))[e])&&l[0]===I)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++p||(y&&((f[W]||(f[W]={}))[e]=[I,p]),f!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[W]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=et(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(ut,"$1"));return i[W]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(wt,Tt),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return dt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,Tt).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return mt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,k=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=z[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!r||(i=lt.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ct.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),a=a.slice(r.length));for(s in T.filter)!(i=ht[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):z(e,u).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[W]?r.push(o):i.push(o);o=X(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&k(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(wt,Tt),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=ht.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(wt,Tt),xt.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return K.apply(n,r),n;break}}return(l||E(e,f))(r,t,!O,n,xt.test(e)&&c(t.parentNode)||t),n},w.sortStable=W.split("").sort(U).join("")===W,w.detectDuplicates=!!A,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(tt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Z.find=it,Z.expr=it.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=it.uniqueSort,Z.text=it.getText,Z.isXMLDoc=it.isXML,Z.contains=it.contains;var ot=Z.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;
if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(i[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,i[t],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ot.test(e)?Z(e):e||[],!1).length}});var ut,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:lt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ut).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),st.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ut.ready?ut.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ct.prototype=Z.fn,ut=Z(J);var ft=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Z(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=ot.test(e)||"string"!=typeof e?Z(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?U.call(Z(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,r){var i=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pt[e]||Z.unique(i),ft.test(e)&&i.reverse()),this.pushStack(i)}});var dt=/\S+/g,ht={};Z.Callbacks=function(e){e="string"==typeof e?ht[e]||o(e):Z.extend({},e);var t,n,r,i,s,a,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,r):r}},i={};return r.pipe=r.then,Z.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=_.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,u=1===a?e:Z.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?_.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--a;return a||u.resolveWith(r,o),u.promise()}});var gt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(gt.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return gt||(gt=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),gt.promise(t)},Z.ready.promise();var mt=Z.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Z(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?r=t.concat(t.map(Z.camelCase)):(i=Z.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(dt)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new a,yt=new a,xt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;Z.extend({hasData:function(e){return yt.hasData(e)||vt.hasData(e)},data:function(e,t,n){return yt.access(e,t,n)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,n){return vt.access(e,t,n)},_removeData:function(e,t){vt.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=yt.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));vt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){yt.set(this,e)}):mt(this,function(t){var n,r=Z.camelCase(e);if(o&&void 0===t){if(n=yt.get(o,e),void 0!==n)return n;if(n=yt.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,r);yt.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=vt.get(e,t),n&&(!r||Z.isArray(n)?r=vt.access(e,t,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return vt.get(e,n)||vt.access(e,n,{empty:Z.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=vt.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],Ct=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Nt=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var kt="undefined";Q.focusinBubbles="onfocusin"in e;var Et=/^key/,St=/^(?:mouse|pointer|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,jt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=vt.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof Z!==kt&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(dt)||[""],l=t.length;l--;)a=jt.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=Z.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=vt.hasData(e)&&vt.get(e);if(m&&(u=m.events)){for(t=(t||"").match(dt)||[""],l=t.length;l--;)if(a=jt.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=Z.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||Z.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[l],n,r,!0);Z.isEmptyObject(u)&&(delete m.handle,vt.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||J],d=G.call(t,"type")?t.type:t,h=G.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!Dt.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[Z.expando]?t:new Z.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Z.makeArray(n,[t]),f=Z.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||d,Dt.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||J)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(vt.get(s,"events")||{})[t.type]&&vt.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[l],a&&(r[l]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[l]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i,o,s=[],a=_.call(arguments),u=(vt.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=St.test(i)?this.mouseHooks:Et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,t):Z.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=vt.access(r,t);i||r.addEventListener(e,n,!0),vt.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=vt.access(r,t)-1;i?vt.access(r,t,i):(r.removeEventListener(e,n,!0),vt.remove(r,t))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,qt=/<|&#?\w+;/,Ht=/<(?:script|style|link)/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^$|\/(?:java|ecma)script/i,Pt=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Mt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Mt.optgroup=Mt.option,Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td,Z.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),r=0,i=o.length;i>r;r++)y(o[r],s[r]);if(t)if(n)for(o=o||v(e),s=s||v(a),r=0,i=o.length;i>r;r++)m(o[r],s[r]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!u&&v(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),f=[],p=0,d=e.length;d>p;p++)if(i=e[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(qt.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(Lt.exec(i)||["",""])[1].toLowerCase(),a=Mt[s]||Mt._default,o.innerHTML=a[1]+i.replace(At,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Ft.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(i=n[vt.expando],i&&(t=vt.cache[i]))){if(t.events)for(r in t.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,t.handle);vt.cache[i]&&delete vt.cache[i]}delete yt.cache[n[yt.expando]]}}}),Z.fn.extend({text:function(e){return mt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return mt(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ht.test(e)&&!Mt[(Lt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(At,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,r,i,o,s,a,u=0,l=this.length,c=this,f=l-1,p=e[0],g=Z.isFunction(p);if(g||l>1&&"string"==typeof p&&!Q.checkClone&&Ot.test(p))return this.each(function(n){var r=c.eq(n);g&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;l>u;u++)s=n,u!==f&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,v(s,"script"))),t.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,h),u=0;o>u;u++)s=i[u],Ft.test(s.type||"")&&!vt.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Rt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,r=[],i=Z(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(i[s])[t](n),X.apply(r,n.get());return this.pushStack(r)}});var Wt,$t={},It=/^margin/,Bt=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),_t=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),s.removeChild(n),t}}))}(),Z.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var zt=/^(none|table(?!-c[ea]).+)/,Xt=new RegExp("^("+wt+")(.*)$","i"),Ut=new RegExp("^([+-])=("+wt+")","i"),Vt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Gt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=Z.camelCase(t),u=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=C(u,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Ut.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),void(null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n))))}},css:function(e,t,n,r){var i,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=C(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Yt&&(i=Yt[t]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,r){return n?zt.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Vt,function(){return E(e,t,r)}):E(e,t,r):void 0},set:function(e,n,r){var i=r&&_t(e);return N(e,n,r?k(e,t,r,"border-box"===Z.css(e,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Tt[r]+t]=o[r]||o[r-2]||o[0];return i}},It.test(e)||(Z.cssHooks[e+t].set=N)}),Z.fn.extend({css:function(e,t){return mt(this,function(e,t,n){var r,i,o={},s=0;if(Z.isArray(t)){for(r=_t(e),i=t.length;i>s;s++)o[t[s]]=Z.css(e,t[s],!1,r);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ct(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=D.prototype.init,Z.fx.step={};var Qt,Jt,Kt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),en=/queueHooks$/,tn=[q],nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Zt.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+r)&&Zt.exec(Z.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nn[n]=nn[n]||[],nn[n].unshift(t)},prefilter:function(e,t){t?tn.unshift(e):tn.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Z.isEmptyObject(e),o=Z.speed(t,n,r),s=function(){var t=O(this,Z.extend({},e),o);(i||vt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Z.timers,s=vt.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&en.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=vt.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));
for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,r,i)}}),Z.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Qt=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Qt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Jt||(Jt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Jt),Jt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var rn,on,sn=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return mt(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?typeof e.getAttribute===kt?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?on:rn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Z.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(dt);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),on={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=sn[t]||Z.find.attr;sn[t]=function(e,t,r){var i,o;return r||(o=sn[t],sn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,sn[t]=o),i}});var an=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return mt(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||an.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var un=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(dt)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(un," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(dt)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(un," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=Z(this),o=e.match(dt)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===kt||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(un," ").indexOf(t)>=0)return!0;return!1}});var ln=/\r/g;Z.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=Z.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Z(this).val()):e,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ln,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Q.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cn=Z.now(),fn=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var pn=/#.*$/,dn=/([?&])_=[^&]*/,hn=/^(.*?):[ \t]*([^\r\n]*)$/gm,gn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mn=/^(?:GET|HEAD)$/,vn=/^\/\//,yn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xn={},bn={},wn="*/".concat("*"),Tn=e.location.href,Cn=yn.exec(Tn.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tn,type:"GET",isLocal:gn.test(Cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Z.ajaxSettings),t):R(Z.ajaxSettings,e)},ajaxPrefilter:F(xn),ajaxTransport:F(bn),ajax:function(e,t){function n(e,t,n,s){var u,c,v,y,b,T=t;2!==x&&(x=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=M(f,w,n)),y=W(f,y,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,u=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",u?h.resolveWith(p,[c,T,w]):h.rejectWith(p,[w,T,v]),w.statusCode(m),m=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:v]),g.fireWith(p,[w,T]),l&&(d.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,u,l,c,f=Z.ajaxSetup({},t),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,h=Z.Deferred(),g=Z.Callbacks("once memory"),m=f.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=hn.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||Tn)+"").replace(pn,"").replace(vn,Cn[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(dt)||[""],null==f.crossDomain&&(u=yn.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===Cn[1]&&u[2]===Cn[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Cn[3]||("http:"===Cn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),P(xn,f,t,w),2===x)return w;l=Z.event&&f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!mn.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(fn.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=dn.test(i)?i.replace(dn,"$1_="+cn++):i+(fn.test(i)?"&":"?")+"_="+cn++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+wn+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=P(bn,f,t,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(v,n)}catch(T){if(!(2>x))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Nn=/%20/g,kn=/\[\]$/,En=/\r?\n/g,Sn=/^(?:submit|button|image|reset|file)$/i,Dn=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,r=[],i=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&").replace(Nn,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Dn.test(this.nodeName)&&!Sn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var jn=0,An={},Ln={0:200,1223:204},qn=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in An)An[e]()}),Q.cors=!!qn&&"withCredentials"in qn,Q.ajax=qn=!!qn,Z.ajaxTransport(function(e){var t;return Q.cors||qn&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),s=++jn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete An[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Ln[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=An[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Hn=[],On=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Hn.pop()||Z.expando+"_"+cn++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(On.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&On.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(On,"$1"+i):t.jsonp!==!1&&(t.url+=(fn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Hn.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=st.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Fn=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Fn)return Fn.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&Z.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Pn=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=Z.css(e,"position"),f=Z(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,Z.contains(t,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=I(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(r=e.offset()),r.top+=Z.css(e[0],"borderTopWidth",!0),r.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Z.css(n,"marginTop",!0),left:t.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pn;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Pn})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Z.fn[t]=function(i){return mt(this,function(t,i,o){var s=I(t);return void 0===o?s?s[n]:t[i]:void(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(Q.pixelPosition,function(e,n){return n?(n=w(e,t),Bt.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return mt(this,function(t,n,r){var i;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Z.css(t,n,s):Z.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Rn=e.jQuery,Mn=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Mn),t&&e.jQuery===Z&&(e.jQuery=Rn),Z},typeof t===kt&&(e.jQuery=e.$=Z),Z});!function(t,e){"function"==typeof define&&define.amd?define("eve",function(){return e()}):"object"==typeof exports?module.exports=e():t.eve=e()}(this,function(){var t,e,r="0.4.2",i="hasOwnProperty",n=/[\.\/]/,a="*",s=function(){},o=function(t,e){return t-e},l={n:{}},h=function(r,i){r=String(r);var n,a=e,s=Array.prototype.slice.call(arguments,2),l=h.listeners(r),u=0,c=[],f={},p=[],d=t;t=r,e=0;for(var g=0,x=l.length;x>g;g++)"zIndex"in l[g]&&(c.push(l[g].zIndex),l[g].zIndex<0&&(f[l[g].zIndex]=l[g]));for(c.sort(o);c[u]<0;)if(n=f[c[u++]],p.push(n.apply(i,s)),e)return e=a,p;for(g=0;x>g;g++)if(n=l[g],"zIndex"in n)if(n.zIndex==c[u]){if(p.push(n.apply(i,s)),e)break;do if(u++,n=f[c[u]],n&&p.push(n.apply(i,s)),e)break;while(n)}else f[n.zIndex]=n;else if(p.push(n.apply(i,s)),e)break;return e=a,t=d,p.length?p:null};return h._events=l,h.listeners=function(t){var e,r,i,s,o,h,u,c,f=t.split(n),p=l,d=[p],g=[];for(s=0,o=f.length;o>s;s++){for(c=[],h=0,u=d.length;u>h;h++)for(p=d[h].n,r=[p[f[s]],p[a]],i=2;i--;)e=r[i],e&&(c.push(e),g=g.concat(e.f||[]));d=c}return g},h.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var r=t.split(n),i=l,a=0,o=r.length;o>a;a++)i=i.n,i=i.hasOwnProperty(r[a])&&i[r[a]]||(i[r[a]]={n:{}});for(i.f=i.f||[],a=0,o=i.f.length;o>a;a++)if(i.f[a]==e)return s;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},h.f=function(t){var e=[].slice.call(arguments,1);return function(){h.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},h.stop=function(){e=1},h.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},h.nts=function(){return t.split(n)},h.off=h.unbind=function(t,e){if(!t)return void(h._events=l={n:{}});var r,s,o,u,c,f,p,d=t.split(n),g=[l];for(u=0,c=d.length;c>u;u++)for(f=0;f<g.length;f+=o.length-2){if(o=[f,1],r=g[f].n,d[u]!=a)r[d[u]]&&o.push(r[d[u]]);else for(s in r)r[i](s)&&o.push(r[s]);g.splice.apply(g,o)}for(u=0,c=g.length;c>u;u++)for(r=g[u];r.n;){if(e){if(r.f){for(f=0,p=r.f.length;p>f;f++)if(r.f[f]==e){r.f.splice(f,1);break}!r.f.length&&delete r.f}for(s in r.n)if(r.n[i](s)&&r.n[s].f){var x=r.n[s].f;for(f=0,p=x.length;p>f;f++)if(x[f]==e){x.splice(f,1);break}!x.length&&delete r.n[s].f}}else{delete r.f;for(s in r.n)r.n[i](s)&&r.n[s].f&&delete r.n[s].f}r=r.n}},h.once=function(t,e){var r=function(){return h.unbind(t,r),e.apply(this,arguments)};return h.on(t,r)},h.version=r,h.toString=function(){return"You are running Eve "+r},h}),function(t,e){"function"==typeof define&&define.amd?define("raphael.core",["eve"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("eve")):t.Raphael=e(t.eve)}(this,function(t){function e(r){if(e.is(r,"function"))return m?r():t.on("raphael.DOMload",r);if(e.is(r,H))return e._engine.create[A](e,r.splice(0,3+e.is(r[0],W))).add(r);var i=Array.prototype.slice.call(arguments,0);if(e.is(i[i.length-1],"function")){var n=i.pop();return m?n.call(e._engine.create[A](e,i)):t.on("raphael.DOMload",function(){n.call(e._engine.create[A](e,i))})}return e._engine.create[A](e,arguments)}function r(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[B](i)&&(e[i]=r(t[i]));return e}function i(t,e){for(var r=0,i=t.length;i>r;r++)if(t[r]===e)return t.push(t.splice(r,1)[0])}function n(t,e,r){function n(){var a=Array.prototype.slice.call(arguments,0),s=a.join("␀"),o=n.cache=n.cache||{},l=n.count=n.count||[];return o[B](s)?(i(l,s),r?r(o[s]):o[s]):(l.length>=1e3&&delete o[l.shift()],l.push(s),o[s]=t[A](e,a),r?r(o[s]):o[s])}return n}function a(){return this.hex}function s(t,e){for(var r=[],i=0,n=t.length;n-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?n-4==i?a[3]={x:+t[0],y:+t[1]}:n-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[n-2],y:+t[n-1]}:n-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),r.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return r}function o(t,e,r,i,n){var a=-3*e+9*r-9*i+3*n,s=t*a+6*e-12*r+6*i;return t*s-3*e+3*r}function l(t,e,r,i,n,a,s,l,h){null==h&&(h=1),h=h>1?1:0>h?0:h;for(var u=h/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;c>g;g++){var x=u*f[g]+u,v=o(x,t,r,n,s),y=o(x,e,i,a,l),m=v*v+y*y;d+=p[g]*I.sqrt(m)}return u*d}function h(t,e,r,i,n,a,s,o,h){if(!(0>h||l(t,e,r,i,n,a,s,o)<h)){var u,c=1,f=c/2,p=c-f,d=.01;for(u=l(t,e,r,i,n,a,s,o,p);V(u-h)>d;)f/=2,p+=(h>u?1:-1)*f,u=l(t,e,r,i,n,a,s,o,p);return p}}function u(t,e,r,i,n,a,s,o){if(!(q(t,r)<D(n,s)||D(t,r)>q(n,s)||q(e,i)<D(a,o)||D(e,i)>q(a,o))){var l=(t*i-e*r)*(n-s)-(t-r)*(n*o-a*s),h=(t*i-e*r)*(a-o)-(e-i)*(n*o-a*s),u=(t-r)*(a-o)-(e-i)*(n-s);if(u){var c=l/u,f=h/u,p=+c.toFixed(2),d=+f.toFixed(2);if(!(p<+D(t,r).toFixed(2)||p>+q(t,r).toFixed(2)||p<+D(n,s).toFixed(2)||p>+q(n,s).toFixed(2)||d<+D(e,i).toFixed(2)||d>+q(e,i).toFixed(2)||d<+D(a,o).toFixed(2)||d>+q(a,o).toFixed(2)))return{x:c,y:f}}}}function c(t,r,i){var n=e.bezierBBox(t),a=e.bezierBBox(r);if(!e.isBBoxIntersect(n,a))return i?0:[];for(var s=l.apply(0,t),o=l.apply(0,r),h=q(~~(s/5),1),c=q(~~(o/5),1),f=[],p=[],d={},g=i?0:[],x=0;h+1>x;x++){var v=e.findDotsAtSegment.apply(e,t.concat(x/h));f.push({x:v.x,y:v.y,t:x/h})}for(x=0;c+1>x;x++)v=e.findDotsAtSegment.apply(e,r.concat(x/c)),p.push({x:v.x,y:v.y,t:x/c});for(x=0;h>x;x++)for(var y=0;c>y;y++){var m=f[x],b=f[x+1],_=p[y],w=p[y+1],k=V(b.x-m.x)<.001?"y":"x",B=V(w.x-_.x)<.001?"y":"x",C=u(m.x,m.y,b.x,b.y,_.x,_.y,w.x,w.y);if(C){if(d[C.x.toFixed(4)]==C.y.toFixed(4))continue;d[C.x.toFixed(4)]=C.y.toFixed(4);var S=m.t+V((C[k]-m[k])/(b[k]-m[k]))*(b.t-m.t),T=_.t+V((C[B]-_[B])/(w[B]-_[B]))*(w.t-_.t);S>=0&&1.001>=S&&T>=0&&1.001>=T&&(i?g++:g.push({x:C.x,y:C.y,t1:D(S,1),t2:D(T,1)}))}}return g}function f(t,r,i){t=e._path2curve(t),r=e._path2curve(r);for(var n,a,s,o,l,h,u,f,p,d,g=i?0:[],x=0,v=t.length;v>x;x++){var y=t[x];if("M"==y[0])n=l=y[1],a=h=y[2];else{"C"==y[0]?(p=[n,a].concat(y.slice(1)),n=p[6],a=p[7]):(p=[n,a,n,a,l,h,l,h],n=l,a=h);for(var m=0,b=r.length;b>m;m++){var _=r[m];if("M"==_[0])s=u=_[1],o=f=_[2];else{"C"==_[0]?(d=[s,o].concat(_.slice(1)),s=d[6],o=d[7]):(d=[s,o,s,o,u,f,u,f],s=u,o=f);var w=c(p,d,i);if(i)g+=w;else{for(var k=0,B=w.length;B>k;k++)w[k].segment1=x,w[k].segment2=m,w[k].bez1=p,w[k].bez2=d;g=g.concat(w)}}}}}return g}function p(t,e,r,i,n,a){null!=t?(this.a=+t,this.b=+e,this.c=+r,this.d=+i,this.e=+n,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function d(){return this.x+L+this.y+L+this.width+" × "+this.height}function g(t,e,r,i,n,a){function s(t){return((c*t+u)*t+h)*t}function o(t,e){var r=l(t,e);return((d*r+p)*r+f)*r}function l(t,e){var r,i,n,a,o,l;for(n=t,l=0;8>l;l++){if(a=s(n)-t,V(a)<e)return n;if(o=(3*c*n+2*u)*n+h,V(o)<1e-6)break;n-=a/o}if(r=0,i=1,n=t,r>n)return r;if(n>i)return i;for(;i>r;){if(a=s(n),V(a-t)<e)return n;t>a?r=n:i=n,n=(i-r)/2+r}return n}var h=3*e,u=3*(i-e)-h,c=1-h-u,f=3*r,p=3*(n-r)-f,d=1-f-p;return o(t,1/(200*a))}function x(t,e){var r=[],i={};if(this.ms=e,this.times=1,t){for(var n in t)t[B](n)&&(i[J(n)]=t[n],r.push(J(n)));r.sort(ue)}this.anim=i,this.top=r[r.length-1],this.percents=r}function v(r,i,n,a,s,o){n=J(n);var l,h,u,c,f,d,x=r.ms,v={},y={},m={};if(a)for(w=0,k=ar.length;k>w;w++){var b=ar[w];if(b.el.id==i.id&&b.anim==r){b.percent!=n?(ar.splice(w,1),u=1):h=b,i.attr(b.totalOrigin);break}}else a=+y;for(var w=0,k=r.percents.length;k>w;w++){if(r.percents[w]==n||r.percents[w]>a*r.top){n=r.percents[w],f=r.percents[w-1]||0,x=x/r.top*(n-f),c=r.percents[w+1],l=r.anim[n];break}a&&i.attr(r.anim[r.percents[w]])}if(l){if(h)h.initstatus=a,h.start=new Date-h.ms*a;else{for(var C in l)if(l[B](C)&&(re[B](C)||i.paper.customAttributes[B](C)))switch(v[C]=i.attr(C),null==v[C]&&(v[C]=ee[C]),y[C]=l[C],re[C]){case W:m[C]=(y[C]-v[C])/x;break;case"colour":v[C]=e.getRGB(v[C]);var S=e.getRGB(y[C]);m[C]={r:(S.r-v[C].r)/x,g:(S.g-v[C].g)/x,b:(S.b-v[C].b)/x};break;case"path":var T=Pe(v[C],y[C]),A=T[1];for(v[C]=T[0],m[C]=[],w=0,k=v[C].length;k>w;w++){m[C][w]=[0];for(var N=1,M=v[C][w].length;M>N;N++)m[C][w][N]=(A[w][N]-v[C][w][N])/x}break;case"transform":var L=i._,F=qe(L[C],y[C]);if(F)for(v[C]=F.from,y[C]=F.to,m[C]=[],m[C].real=!0,w=0,k=v[C].length;k>w;w++)for(m[C][w]=[v[C][w][0]],N=1,M=v[C][w].length;M>N;N++)m[C][w][N]=(y[C][w][N]-v[C][w][N])/x;else{var R=i.matrix||new p,j={_:{transform:L.transform},getBBox:function(){return i.getBBox(1)}};v[C]=[R.a,R.b,R.c,R.d,R.e,R.f],je(j,y[C]),y[C]=j._.transform,m[C]=[(j.matrix.a-R.a)/x,(j.matrix.b-R.b)/x,(j.matrix.c-R.c)/x,(j.matrix.d-R.d)/x,(j.matrix.e-R.e)/x,(j.matrix.f-R.f)/x]}break;case"csv":var I=z(l[C])[P](_),q=z(v[C])[P](_);if("clip-rect"==C)for(v[C]=q,m[C]=[],w=q.length;w--;)m[C][w]=(I[w]-v[C][w])/x;y[C]=I;break;default:for(I=[][E](l[C]),q=[][E](v[C]),m[C]=[],w=i.paper.customAttributes[C].length;w--;)m[C][w]=((I[w]||0)-(q[w]||0))/x}var D=l.easing,V=e.easing_formulas[D];if(!V)if(V=z(D).match(Z),V&&5==V.length){var O=V;V=function(t){return g(t,+O[1],+O[2],+O[3],+O[4],x)}}else V=ce;if(d=l.start||r.start||+new Date,b={anim:r,percent:n,timestamp:d,start:d+(r.del||0),status:0,initstatus:a||0,stop:!1,ms:x,easing:V,from:v,diff:m,to:y,el:i,callback:l.callback,prev:f,next:c,repeat:o||r.times,origin:i.attr(),totalOrigin:s},ar.push(b),a&&!h&&!u&&(b.stop=!0,b.start=new Date-x*a,1==ar.length))return or();u&&(b.start=new Date-b.ms*a),1==ar.length&&sr(or)}t("raphael.anim.start."+i.id,i,r)}}function y(t){for(var e=0;e<ar.length;e++)ar[e].el.paper==t&&ar.splice(e--,1)}e.version="2.1.4",e.eve=t;var m,b,_=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},k=/\{(\d+)\}/g,B="hasOwnProperty",C={doc:document,win:window},S={was:Object.prototype[B].call(C.win,"Raphael"),is:C.win.Raphael},T=function(){this.ca=this.customAttributes={}},A="apply",E="concat",N="ontouchstart"in C.win||C.win.DocumentTouch&&C.doc instanceof DocumentTouch,M="",L=" ",z=String,P="split",F="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[P](L),R={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},j=z.prototype.toLowerCase,I=Math,q=I.max,D=I.min,V=I.abs,O=I.pow,Y=I.PI,W="number",G="string",H="array",X=Object.prototype.toString,U=(e._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),$={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=I.round,J=parseFloat,K=parseInt,te=z.prototype.toUpperCase,ee=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},re=e._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},ie=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ne={hs:1,rg:1},ae=/,?([achlmqrstvxz]),?/gi,se=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,oe=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,le=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,he=(e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ue=function(t,e){return J(t)-J(e)},ce=function(t){return t},fe=e._rectPath=function(t,e,r,i,n){return n?[["M",t+n,e],["l",r-2*n,0],["a",n,n,0,0,1,n,n],["l",0,i-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-r,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-i],["a",n,n,0,0,1,n,-n],["z"]]:[["M",t,e],["l",r,0],["l",0,i],["l",-r,0],["z"]]},pe=function(t,e,r,i){return null==i&&(i=r),[["M",t,e],["m",0,-i],["a",r,i,0,1,1,0,2*i],["a",r,i,0,1,1,0,-2*i],["z"]]},de=e._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return pe(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return pe(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return fe(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return fe(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return fe(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return fe(e.x,e.y,e.width,e.height)}},ge=e.mapPath=function(t,e){if(!e)return t;var r,i,n,a,s,o,l;for(t=Pe(t),n=0,s=t.length;s>n;n++)for(l=t[n],a=1,o=l.length;o>a;a+=2)r=e.x(l[a],l[a+1]),i=e.y(l[a],l[a+1]),l[a]=r,l[a+1]=i;return t};if(e._g=C,e.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var xe,ve=C.doc.createElement("div");if(ve.innerHTML='<v:shape adj="1"/>',xe=ve.firstChild,xe.style.behavior="url(#default#VML)",!xe||"object"!=typeof xe.adj)return e.type=M;ve=null}e.svg=!(e.vml="VML"==e.type),e._Paper=T,e.fn=b=T.prototype=e.prototype,e._id=0,e._oid=0,e.is=function(t,e){return e=j.call(e),"finite"==e?!$[B](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||X.call(t).slice(8,-1).toLowerCase()==e},e.angle=function(t,r,i,n,a,s){if(null==a){var o=t-i,l=r-n;return o||l?(180+180*I.atan2(-l,-o)/Y+360)%360:0}return e.angle(t,r,a,s)-e.angle(i,n,a,s)},e.rad=function(t){return t%360*Y/180},e.deg=function(t){return Math.round(180*t/Y%360*1e3)/1e3},e.snapTo=function(t,r,i){if(i=e.is(i,"finite")?i:10,e.is(t,H)){for(var n=t.length;n--;)if(V(t[n]-r)<=i)return t[n]}else{t=+t;var a=r%t;if(i>a)return r-a;if(a>t-i)return r-a+t}return r},e.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*I.random()|0,r="x"==t?e:3&e|8;return r.toString(16)}),e.setWindow=function(r){t("raphael.setWindow",e,C.win,r),C.win=r,C.doc=C.win.document,e._engine.initWin&&e._engine.initWin(C.win)};var ye=function(t){if(e.vml){var r,i=/^\s+|\s+$/g;try{var a=new ActiveXObject("htmlfile");a.write("<body>"),a.close(),r=a.body}catch(s){r=createPopup().document.body}var o=r.createTextRange();ye=n(function(t){try{r.style.color=z(t).replace(i,M);var e=o.queryCommandValue("ForeColor");return e=(255&e)<<16|65280&e|(16711680&e)>>>16,"#"+("000000"+e.toString(16)).slice(-6)}catch(n){return"none"}})}else{var l=C.doc.createElement("i");l.title="Raphaël Colour Picker",l.style.display="none",C.doc.body.appendChild(l),ye=n(function(t){return l.style.color=t,C.doc.defaultView.getComputedStyle(l,M).getPropertyValue("color")})}return ye(t)},me=function(){return"hsb("+[this.h,this.s,this.b]+")"},be=function(){return"hsl("+[this.h,this.s,this.l]+")"},_e=function(){return this.hex},we=function(t,r,i){if(null==r&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,r=t.g,t=t.r),null==r&&e.is(t,G)){var n=e.getRGB(t);t=n.r,r=n.g,i=n.b}return(t>1||r>1||i>1)&&(t/=255,r/=255,i/=255),[t,r,i]},ke=function(t,r,i,n){t*=255,r*=255,i*=255;var a={r:t,g:r,b:i,hex:e.rgb(t,r,i),toString:_e};return e.is(n,"finite")&&(a.opacity=n),a};e.color=function(t){var r;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(r=e.hsb2rgb(t),t.r=r.r,t.g=r.g,t.b=r.b,t.hex=r.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(r=e.hsl2rgb(t),t.r=r.r,t.g=r.g,t.b=r.b,t.hex=r.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(r=e.rgb2hsl(t),t.h=r.h,t.s=r.s,t.l=r.l,r=e.rgb2hsb(t),t.v=r.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=_e,t},e.hsb2rgb=function(t,e,r,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,i=t.o,t=t.h),t*=360;var n,a,s,o,l;return t=t%360/60,l=r*e,o=l*(1-V(t%2-1)),n=a=s=r-l,t=~~t,n+=[l,o,0,0,o,l][t],a+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],ke(n,a,s,i)},e.hsl2rgb=function(t,e,r,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,e=t.s,t=t.h),(t>1||e>1||r>1)&&(t/=360,e/=100,r/=100),t*=360;var n,a,s,o,l;return t=t%360/60,l=2*e*(.5>r?r:1-r),o=l*(1-V(t%2-1)),n=a=s=r-l/2,t=~~t,n+=[l,o,0,0,o,l][t],a+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],ke(n,a,s,i)},e.rgb2hsb=function(t,e,r){r=we(t,e,r),t=r[0],e=r[1],r=r[2];var i,n,a,s;return a=q(t,e,r),s=a-D(t,e,r),i=0==s?null:a==t?(e-r)/s:a==e?(r-t)/s+2:(t-e)/s+4,i=(i+360)%6*60/360,n=0==s?0:s/a,{h:i,s:n,b:a,toString:me}},e.rgb2hsl=function(t,e,r){r=we(t,e,r),t=r[0],e=r[1],r=r[2];var i,n,a,s,o,l;return s=q(t,e,r),o=D(t,e,r),l=s-o,i=0==l?null:s==t?(e-r)/l:s==e?(r-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,a=(s+o)/2,n=0==l?0:.5>a?l/(2*a):l/(2-2*a),{h:i,s:n,l:a,toString:be}},e._path2string=function(){return this.join(",").replace(ae,"$1")},e._preload=function(t,e){var r=C.doc.createElement("img");r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){e.call(this),this.onload=null,C.doc.body.removeChild(this)},r.onerror=function(){C.doc.body.removeChild(this)},C.doc.body.appendChild(r),r.src=t},e.getRGB=n(function(t){if(!t||(t=z(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:a};!(ne[B](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=ye(t));var r,i,n,s,o,l,h=t.match(U);return h?(h[2]&&(n=K(h[2].substring(5),16),i=K(h[2].substring(3,5),16),r=K(h[2].substring(1,3),16)),h[3]&&(n=K((o=h[3].charAt(3))+o,16),i=K((o=h[3].charAt(2))+o,16),r=K((o=h[3].charAt(1))+o,16)),h[4]&&(l=h[4][P](ie),r=J(l[0]),"%"==l[0].slice(-1)&&(r*=2.55),i=J(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=J(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(s=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),h[5]?(l=h[5][P](ie),r=J(l[0]),"%"==l[0].slice(-1)&&(r*=2.55),i=J(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=J(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(r/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(s=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),e.hsb2rgb(r,i,n,s)):h[6]?(l=h[6][P](ie),r=J(l[0]),"%"==l[0].slice(-1)&&(r*=2.55),i=J(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=J(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(r/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(s=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),e.hsl2rgb(r,i,n,s)):(h={r:r,g:i,b:n,toString:a},h.hex="#"+(16777216|n|i<<8|r<<16).toString(16).slice(1),e.is(s,"finite")&&(h.opacity=s),h)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a}},e),e.hsb=n(function(t,r,i){return e.hsb2rgb(t,r,i).hex}),e.hsl=n(function(t,r,i){return e.hsl2rgb(t,r,i).hex}),e.rgb=n(function(t,e,r){function i(t){return t+.5|0}return"#"+(16777216|i(r)|i(e)<<8|i(t)<<16).toString(16).slice(1)}),e.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var r=Be(t);if(r.arr)return Se(r.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return e.is(t,H)&&e.is(t[0],H)&&(n=Se(t)),n.length||z(t).replace(se,function(t,e,r){var a=[],s=e.toLowerCase();if(r.replace(le,function(t,e){e&&a.push(+e)}),"m"==s&&a.length>2&&(n.push([e][E](a.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)n.push([e][E](a));else for(;a.length>=i[s]&&(n.push([e][E](a.splice(0,i[s]))),i[s]););}),n.toString=e._path2string,r.arr=Se(n),n},e.parseTransformString=n(function(t){if(!t)return null;var r=[];return e.is(t,H)&&e.is(t[0],H)&&(r=Se(t)),r.length||z(t).replace(oe,function(t,e,i){var n=[];j.call(e),i.replace(le,function(t,e){e&&n.push(+e)}),r.push([e][E](n))}),r.toString=e._path2string,r});var Be=function(t){var e=Be.ps=Be.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var r in e)e[B](r)&&r!=t&&(e[r].sleep--,!e[r].sleep&&delete e[r])}),e[t]};e.findDotsAtSegment=function(t,e,r,i,n,a,s,o,l){var h=1-l,u=O(h,3),c=O(h,2),f=l*l,p=f*l,d=u*t+3*c*l*r+3*h*l*l*n+p*s,g=u*e+3*c*l*i+3*h*l*l*a+p*o,x=t+2*l*(r-t)+f*(n-2*r+t),v=e+2*l*(i-e)+f*(a-2*i+e),y=r+2*l*(n-r)+f*(s-2*n+r),m=i+2*l*(a-i)+f*(o-2*a+i),b=h*t+l*r,_=h*e+l*i,w=h*n+l*s,k=h*a+l*o,B=90-180*I.atan2(x-y,v-m)/Y;return(x>y||m>v)&&(B+=180),{x:d,y:g,m:{x:x,y:v},n:{x:y,y:m},start:{x:b,y:_},end:{x:w,y:k},alpha:B}},e.bezierBBox=function(t,r,i,n,a,s,o,l){e.is(t,"array")||(t=[t,r,i,n,a,s,o,l]);var h=ze.apply(null,t);return{x:h.min.x,y:h.min.y,x2:h.max.x,y2:h.max.y,width:h.max.x-h.min.x,height:h.max.y-h.min.y}},e.isPointInsideBBox=function(t,e,r){return e>=t.x&&e<=t.x2&&r>=t.y&&r<=t.y2},e.isBBoxIntersect=function(t,r){var i=e.isPointInsideBBox;return i(r,t.x,t.y)||i(r,t.x2,t.y)||i(r,t.x,t.y2)||i(r,t.x2,t.y2)||i(t,r.x,r.y)||i(t,r.x2,r.y)||i(t,r.x,r.y2)||i(t,r.x2,r.y2)||(t.x<r.x2&&t.x>r.x||r.x<t.x2&&r.x>t.x)&&(t.y<r.y2&&t.y>r.y||r.y<t.y2&&r.y>t.y)},e.pathIntersection=function(t,e){return f(t,e)},e.pathIntersectionNumber=function(t,e){return f(t,e,1)},e.isPointInsidePath=function(t,r,i){var n=e.pathBBox(t);return e.isPointInsideBBox(n,r,i)&&f(t,[["M",r,i],["H",n.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Ce=e.pathBBox=function(t){var e=Be(t);if(e.bbox)return r(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Pe(t);for(var i,n=0,a=0,s=[],o=[],l=0,h=t.length;h>l;l++)if(i=t[l],"M"==i[0])n=i[1],a=i[2],s.push(n),o.push(a);else{var u=ze(n,a,i[1],i[2],i[3],i[4],i[5],i[6]);s=s[E](u.min.x,u.max.x),o=o[E](u.min.y,u.max.y),n=i[5],a=i[6]}var c=D[A](0,s),f=D[A](0,o),p=q[A](0,s),d=q[A](0,o),g=p-c,x=d-f,v={x:c,y:f,x2:p,y2:d,width:g,height:x,cx:c+g/2,cy:f+x/2};return e.bbox=r(v),v},Se=function(t){var i=r(t);return i.toString=e._path2string,i},Te=e._pathToRelative=function(t){var r=Be(t);if(r.rel)return Se(r.rel);e.is(t,H)&&e.is(t&&t[0],H)||(t=e.parsePathString(t));var i=[],n=0,a=0,s=0,o=0,l=0;"M"==t[0][0]&&(n=t[0][1],a=t[0][2],s=n,o=a,l++,i.push(["M",n,a]));for(var h=l,u=t.length;u>h;h++){var c=i[h]=[],f=t[h];if(f[0]!=j.call(f[0]))switch(c[0]=j.call(f[0]),c[0]){case"a":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+(f[6]-n).toFixed(3),c[7]=+(f[7]-a).toFixed(3);break;case"v":c[1]=+(f[1]-a).toFixed(3);break;case"m":s=f[1],o=f[2];default:for(var p=1,d=f.length;d>p;p++)c[p]=+(f[p]-(p%2?n:a)).toFixed(3)}else{c=i[h]=[],"m"==f[0]&&(s=f[1]+n,o=f[2]+a);for(var g=0,x=f.length;x>g;g++)i[h][g]=f[g]}var v=i[h].length;switch(i[h][0]){case"z":n=s,a=o;break;case"h":n+=+i[h][v-1];break;case"v":a+=+i[h][v-1];break;default:n+=+i[h][v-2],a+=+i[h][v-1]}}return i.toString=e._path2string,r.rel=Se(i),i},Ae=e._pathToAbsolute=function(t){var r=Be(t);if(r.abs)return Se(r.abs);if(e.is(t,H)&&e.is(t&&t[0],H)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i=[],n=0,a=0,o=0,l=0,h=0;"M"==t[0][0]&&(n=+t[0][1],a=+t[0][2],o=n,l=a,h++,i[0]=["M",n,a]);for(var u,c,f=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=h,d=t.length;d>p;p++){if(i.push(u=[]),c=t[p],c[0]!=te.call(c[0]))switch(u[0]=te.call(c[0]),u[0]){case"A":u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=+(c[6]+n),u[7]=+(c[7]+a);break;case"V":u[1]=+c[1]+a;break;case"H":u[1]=+c[1]+n;break;case"R":for(var g=[n,a][E](c.slice(1)),x=2,v=g.length;v>x;x++)g[x]=+g[x]+n,g[++x]=+g[x]+a;i.pop(),i=i[E](s(g,f));break;case"M":o=+c[1]+n,l=+c[2]+a;default:for(x=1,v=c.length;v>x;x++)u[x]=+c[x]+(x%2?n:a)}else if("R"==c[0])g=[n,a][E](c.slice(1)),i.pop(),i=i[E](s(g,f)),u=["R"][E](c.slice(-2));else for(var y=0,m=c.length;m>y;y++)u[y]=c[y];switch(u[0]){case"Z":n=o,a=l;break;case"H":n=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],l=u[u.length-1];default:n=u[u.length-2],a=u[u.length-1]}}return i.toString=e._path2string,r.abs=Se(i),i},Ee=function(t,e,r,i){return[t,e,r,i,r,i]},Ne=function(t,e,r,i,n,a){var s=1/3,o=2/3;return[s*t+o*r,s*e+o*i,s*n+o*r,s*a+o*i,n,a]},Me=function(t,e,r,i,a,s,o,l,h,u){var c,f=120*Y/180,p=Y/180*(+a||0),d=[],g=n(function(t,e,r){var i=t*I.cos(r)-e*I.sin(r),n=t*I.sin(r)+e*I.cos(r);return{x:i,y:n}});if(u)B=u[0],C=u[1],w=u[2],k=u[3];else{c=g(t,e,-p),t=c.x,e=c.y,c=g(l,h,-p),l=c.x,h=c.y;var x=(I.cos(Y/180*a),I.sin(Y/180*a),(t-l)/2),v=(e-h)/2,y=x*x/(r*r)+v*v/(i*i);y>1&&(y=I.sqrt(y),r=y*r,i=y*i);var m=r*r,b=i*i,_=(s==o?-1:1)*I.sqrt(V((m*b-m*v*v-b*x*x)/(m*v*v+b*x*x))),w=_*r*v/i+(t+l)/2,k=_*-i*x/r+(e+h)/2,B=I.asin(((e-k)/i).toFixed(9)),C=I.asin(((h-k)/i).toFixed(9));B=w>t?Y-B:B,C=w>l?Y-C:C,0>B&&(B=2*Y+B),0>C&&(C=2*Y+C),o&&B>C&&(B-=2*Y),!o&&C>B&&(C-=2*Y)}var S=C-B;if(V(S)>f){var T=C,A=l,N=h;C=B+f*(o&&C>B?1:-1),l=w+r*I.cos(C),h=k+i*I.sin(C),d=Me(l,h,r,i,a,0,o,A,N,[C,T,w,k])}S=C-B;var M=I.cos(B),L=I.sin(B),z=I.cos(C),F=I.sin(C),R=I.tan(S/4),j=4/3*r*R,q=4/3*i*R,D=[t,e],O=[t+j*L,e-q*M],W=[l+j*F,h-q*z],G=[l,h];if(O[0]=2*D[0]-O[0],O[1]=2*D[1]-O[1],u)return[O,W,G][E](d);d=[O,W,G][E](d).join()[P](",");for(var H=[],X=0,U=d.length;U>X;X++)H[X]=X%2?g(d[X-1],d[X],p).y:g(d[X],d[X+1],p).x;return H},Le=function(t,e,r,i,n,a,s,o,l){var h=1-l;return{x:O(h,3)*t+3*O(h,2)*l*r+3*h*l*l*n+O(l,3)*s,y:O(h,3)*e+3*O(h,2)*l*i+3*h*l*l*a+O(l,3)*o}},ze=n(function(t,e,r,i,n,a,s,o){var l,h=n-2*r+t-(s-2*n+r),u=2*(r-t)-2*(n-r),c=t-r,f=(-u+I.sqrt(u*u-4*h*c))/2/h,p=(-u-I.sqrt(u*u-4*h*c))/2/h,d=[e,o],g=[t,s];return V(f)>"1e12"&&(f=.5),V(p)>"1e12"&&(p=.5),f>0&&1>f&&(l=Le(t,e,r,i,n,a,s,o,f),g.push(l.x),d.push(l.y)),p>0&&1>p&&(l=Le(t,e,r,i,n,a,s,o,p),g.push(l.x),d.push(l.y)),h=a-2*i+e-(o-2*a+i),u=2*(i-e)-2*(a-i),c=e-i,f=(-u+I.sqrt(u*u-4*h*c))/2/h,p=(-u-I.sqrt(u*u-4*h*c))/2/h,V(f)>"1e12"&&(f=.5),V(p)>"1e12"&&(p=.5),f>0&&1>f&&(l=Le(t,e,r,i,n,a,s,o,f),g.push(l.x),d.push(l.y)),p>0&&1>p&&(l=Le(t,e,r,i,n,a,s,o,p),g.push(l.x),d.push(l.y)),{min:{x:D[A](0,g),y:D[A](0,d)},max:{x:q[A](0,g),y:q[A](0,d)}}}),Pe=e._path2curve=n(function(t,e){var r=!e&&Be(t);if(!e&&r.curve)return Se(r.curve);for(var i=Ae(t),n=e&&Ae(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e,r){var i,n,a={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in a)&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][E](Me[A](0,[e.x,e.y][E](t.slice(1))));break;case"S":"C"==r||"S"==r?(i=2*e.x-e.bx,n=2*e.y-e.by):(i=e.x,n=e.y),t=["C",i,n][E](t.slice(1));break;case"T":"Q"==r||"T"==r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][E](Ne(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][E](Ne(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][E](Ee(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][E](Ee(e.x,e.y,t[1],e.y));break;case"V":t=["C"][E](Ee(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][E](Ee(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)u[e]="A",n&&(c[e]="A"),t.splice(e++,0,["C"][E](r.splice(0,6)));t.splice(e,1),g=q(i.length,n&&n.length||0)}},h=function(t,e,r,a,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[s][1],r.y=t[s][2],g=q(i.length,n&&n.length||0))},u=[],c=[],f="",p="",d=0,g=q(i.length,n&&n.length||0);g>d;d++){i[d]&&(f=i[d][0]),"C"!=f&&(u[d]=f,d&&(p=u[d-1])),i[d]=o(i[d],a,p),"A"!=u[d]&&"C"==f&&(u[d]="C"),l(i,d),n&&(n[d]&&(f=n[d][0]),"C"!=f&&(c[d]=f,d&&(p=c[d-1])),n[d]=o(n[d],s,p),"A"!=c[d]&&"C"==f&&(c[d]="C"),l(n,d)),h(i,n,a,s,d),h(n,i,s,a,d);var x=i[d],v=n&&n[d],y=x.length,m=n&&v.length;a.x=x[y-2],a.y=x[y-1],a.bx=J(x[y-4])||a.x,a.by=J(x[y-3])||a.y,s.bx=n&&(J(v[m-4])||s.x),s.by=n&&(J(v[m-3])||s.y),s.x=n&&v[m-2],s.y=n&&v[m-1]}return n||(r.curve=Se(i)),n?[i,n]:i},null,Se),Fe=(e._parseDots=n(function(t){for(var r=[],i=0,n=t.length;n>i;i++){var a={},s=t[i].match(/^([^:]*):?([\d\.]*)/);if(a.color=e.getRGB(s[1]),a.color.error)return null;a.opacity=a.color.opacity,a.color=a.color.hex,s[2]&&(a.offset=s[2]+"%"),r.push(a)}for(i=1,n=r.length-1;n>i;i++)if(!r[i].offset){for(var o=J(r[i-1].offset||0),l=0,h=i+1;n>h;h++)if(r[h].offset){l=r[h].offset;break}l||(l=100,h=n),l=J(l);for(var u=(l-o)/(h-i+1);h>i;i++)o+=u,r[i].offset=o+"%"}return r}),e._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Re=(e._tofront=function(t,e){e.top!==t&&(Fe(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},e._toback=function(t,e){e.bottom!==t&&(Fe(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},e._insertafter=function(t,e,r){Fe(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},e._insertbefore=function(t,e,r){Fe(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},e.toMatrix=function(t,e){var r=Ce(t),i={_:{transform:M},getBBox:function(){return r}};return je(i,e),i.matrix}),je=(e.transformPath=function(t,e){return ge(t,Re(t,e))},e._extractTransform=function(t,r){if(null==r)return t._.transform;r=z(r).replace(/\.{3}|\u2026/g,t._.transform||M);var i=e.parseTransformString(r),n=0,a=0,s=0,o=1,l=1,h=t._,u=new p;if(h.transform=i||[],i)for(var c=0,f=i.length;f>c;c++){var d,g,x,v,y,m=i[c],b=m.length,_=z(m[0]).toLowerCase(),w=m[0]!=_,k=w?u.invert():0;"t"==_&&3==b?w?(d=k.x(0,0),g=k.y(0,0),x=k.x(m[1],m[2]),v=k.y(m[1],m[2]),u.translate(x-d,v-g)):u.translate(m[1],m[2]):"r"==_?2==b?(y=y||t.getBBox(1),u.rotate(m[1],y.x+y.width/2,y.y+y.height/2),n+=m[1]):4==b&&(w?(x=k.x(m[2],m[3]),v=k.y(m[2],m[3]),u.rotate(m[1],x,v)):u.rotate(m[1],m[2],m[3]),n+=m[1]):"s"==_?2==b||3==b?(y=y||t.getBBox(1),u.scale(m[1],m[b-1],y.x+y.width/2,y.y+y.height/2),o*=m[1],l*=m[b-1]):5==b&&(w?(x=k.x(m[3],m[4]),v=k.y(m[3],m[4]),u.scale(m[1],m[2],x,v)):u.scale(m[1],m[2],m[3],m[4]),o*=m[1],l*=m[2]):"m"==_&&7==b&&u.add(m[1],m[2],m[3],m[4],m[5],m[6]),h.dirtyT=1,t.matrix=u}t.matrix=u,h.sx=o,h.sy=l,h.deg=n,h.dx=a=u.e,h.dy=s=u.f,1==o&&1==l&&!n&&h.bbox?(h.bbox.x+=+a,h.bbox.y+=+s):h.dirtyT=1}),Ie=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},qe=e._equaliseTransform=function(t,r){r=z(r).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],r=e.parseTransformString(r)||[];
for(var i,n,a,s,o=q(t.length,r.length),l=[],h=[],u=0;o>u;u++){if(a=t[u]||Ie(r[u]),s=r[u]||Ie(a),a[0]!=s[0]||"r"==a[0].toLowerCase()&&(a[2]!=s[2]||a[3]!=s[3])||"s"==a[0].toLowerCase()&&(a[3]!=s[3]||a[4]!=s[4]))return;for(l[u]=[],h[u]=[],i=0,n=q(a.length,s.length);n>i;i++)i in a&&(l[u][i]=a[i]),i in s&&(h[u][i]=s[i])}return{from:l,to:h}};e._getContainer=function(t,r,i,n){var a;return a=null!=n||e.is(t,"object")?t:C.doc.getElementById(t),null!=a?a.tagName?null==r?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:r,height:i}:{container:1,x:t,y:r,width:i,height:n}:void 0},e.pathToRelative=Te,e._engine={},e.path2curve=Pe,e.matrix=function(t,e,r,i,n,a){return new p(t,e,r,i,n,a)},function(t){function r(t){return t[0]*t[0]+t[1]*t[1]}function i(t){var e=I.sqrt(r(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}t.add=function(t,e,r,i,n,a){var s,o,l,h,u=[[],[],[]],c=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,r,n],[e,i,a],[0,0,1]];for(t&&t instanceof p&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;3>s;s++)for(o=0;3>o;o++){for(h=0,l=0;3>l;l++)h+=c[s][l]*f[l][o];u[s][o]=h}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,r,i){null==e&&(e=t),(r||i)&&this.add(1,0,0,1,r,i),this.add(t,0,0,e,0,0),(r||i)&&this.add(1,0,0,1,-r,-i)},t.rotate=function(t,r,i){t=e.rad(t),r=r||0,i=i||0;var n=+I.cos(t).toFixed(9),a=+I.sin(t).toFixed(9);this.add(n,a,-a,n,r,i),this.add(1,0,0,1,-r,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[z.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=I.sqrt(r(n[0])),i(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=I.sqrt(r(n[1])),i(n[1]),t.shear/=t.scaley;var a=-n[0][1],s=n[1][1];return 0>s?(t.rotate=e.deg(I.acos(s)),0>a&&(t.rotate=360-t.rotate)):t.rotate=e.deg(I.asin(a)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[P]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:M)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:M)+(e.rotate?"r"+[e.rotate,0,0]:M)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);for(var De=function(){this.returnValue=!1},Ve=function(){return this.originalEvent.preventDefault()},Oe=function(){this.cancelBubble=!0},Ye=function(){return this.originalEvent.stopPropagation()},We=function(t){var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,r=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;return{x:t.clientX+r,y:t.clientY+e}},Ge=function(){return C.doc.addEventListener?function(t,e,r,i){var n=function(t){var e=We(t);return r.call(i,t,e.x,e.y)};if(t.addEventListener(e,n,!1),N&&R[e]){var a=function(e){for(var n=We(e),a=e,s=0,o=e.targetTouches&&e.targetTouches.length;o>s;s++)if(e.targetTouches[s].target==t){e=e.targetTouches[s],e.originalEvent=a,e.preventDefault=Ve,e.stopPropagation=Ye;break}return r.call(i,e,n.x,n.y)};t.addEventListener(R[e],a,!1)}return function(){return t.removeEventListener(e,n,!1),N&&R[e]&&t.removeEventListener(R[e],a,!1),!0}}:C.doc.attachEvent?function(t,e,r,i){var n=function(t){t=t||C.win.event;var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,n=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,a=t.clientX+n,s=t.clientY+e;return t.preventDefault=t.preventDefault||De,t.stopPropagation=t.stopPropagation||Oe,r.call(i,t,a,s)};t.attachEvent("on"+e,n);var a=function(){return t.detachEvent("on"+e,n),!0};return a}:void 0}(),He=[],Xe=function(e){for(var r,i=e.clientX,n=e.clientY,a=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,s=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,o=He.length;o--;){if(r=He[o],N&&e.touches){for(var l,h=e.touches.length;h--;)if(l=e.touches[h],l.identifier==r.el._drag.id){i=l.clientX,n=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var u,c=r.el.node,f=c.nextSibling,p=c.parentNode,d=c.style.display;C.win.opera&&p.removeChild(c),c.style.display="none",u=r.el.paper.getElementByPoint(i,n),c.style.display=d,C.win.opera&&(f?p.insertBefore(c,f):p.appendChild(c)),u&&t("raphael.drag.over."+r.el.id,r.el,u),i+=s,n+=a,t("raphael.drag.move."+r.el.id,r.move_scope||r.el,i-r.el._drag.x,n-r.el._drag.y,i,n,e)}},Ue=function(r){e.unmousemove(Xe).unmouseup(Ue);for(var i,n=He.length;n--;)i=He[n],i.el._drag={},t("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,r);He=[]},$e=e.el={},Ze=F.length;Ze--;)!function(t){e[t]=$e[t]=function(r,i){return e.is(r,"function")&&(this.events=this.events||[],this.events.push({name:t,f:r,unbind:Ge(this.shape||this.node||C.doc,t,r,i||this)})),this},e["un"+t]=$e["un"+t]=function(r){for(var i=this.events||[],n=i.length;n--;)i[n].name!=t||!e.is(r,"undefined")&&i[n].f!=r||(i[n].unbind(),i.splice(n,1),!i.length&&delete this.events);return this}}(F[Ze]);$e.data=function(r,i){var n=he[this.id]=he[this.id]||{};if(0==arguments.length)return n;if(1==arguments.length){if(e.is(r,"object")){for(var a in r)r[B](a)&&this.data(a,r[a]);return this}return t("raphael.data.get."+this.id,this,n[r],r),n[r]}return n[r]=i,t("raphael.data.set."+this.id,this,i,r),this},$e.removeData=function(t){return null==t?he[this.id]={}:he[this.id]&&delete he[this.id][t],this},$e.getData=function(){return r(he[this.id]||{})},$e.hover=function(t,e,r,i){return this.mouseover(t,r).mouseout(e,i||r)},$e.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Qe=[];$e.drag=function(r,i,n,a,s,o){function l(l){(l.originalEvent||l).preventDefault();var h=l.clientX,u=l.clientY,c=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,f=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;if(this._drag.id=l.identifier,N&&l.touches)for(var p,d=l.touches.length;d--;)if(p=l.touches[d],this._drag.id=p.identifier,p.identifier==this._drag.id){h=p.clientX,u=p.clientY;break}this._drag.x=h+f,this._drag.y=u+c,!He.length&&e.mousemove(Xe).mouseup(Ue),He.push({el:this,move_scope:a,start_scope:s,end_scope:o}),i&&t.on("raphael.drag.start."+this.id,i),r&&t.on("raphael.drag.move."+this.id,r),n&&t.on("raphael.drag.end."+this.id,n),t("raphael.drag.start."+this.id,s||a||this,l.clientX+f,l.clientY+c,l)}return this._drag={},Qe.push({el:this,start:l}),this.mousedown(l),this},$e.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},$e.undrag=function(){for(var r=Qe.length;r--;)Qe[r].el==this&&(this.unmousedown(Qe[r].start),Qe.splice(r,1),t.unbind("raphael.drag.*."+this.id));!Qe.length&&e.unmousemove(Xe).unmouseup(Ue),He=[]},b.circle=function(t,r,i){var n=e._engine.circle(this,t||0,r||0,i||0);return this.__set__&&this.__set__.push(n),n},b.rect=function(t,r,i,n,a){var s=e._engine.rect(this,t||0,r||0,i||0,n||0,a||0);return this.__set__&&this.__set__.push(s),s},b.ellipse=function(t,r,i,n){var a=e._engine.ellipse(this,t||0,r||0,i||0,n||0);return this.__set__&&this.__set__.push(a),a},b.path=function(t){t&&!e.is(t,G)&&!e.is(t[0],H)&&(t+=M);var r=e._engine.path(e.format[A](e,arguments),this);return this.__set__&&this.__set__.push(r),r},b.image=function(t,r,i,n,a){var s=e._engine.image(this,t||"about:blank",r||0,i||0,n||0,a||0);return this.__set__&&this.__set__.push(s),s},b.text=function(t,r,i){var n=e._engine.text(this,t||0,r||0,z(i));return this.__set__&&this.__set__.push(n),n},b.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var r=new hr(t);return this.__set__&&this.__set__.push(r),r.paper=this,r.type="set",r},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(){var t=this.__set__;return delete this.__set__,t},b.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},b.setSize=function(t,r){return e._engine.setSize.call(this,t,r)},b.setViewBox=function(t,r,i,n,a){return e._engine.setViewBox.call(this,t,r,i,n,a)},b.top=b.bottom=null,b.raphael=e;var Je=function(t){var e=t.getBoundingClientRect(),r=t.ownerDocument,i=r.body,n=r.documentElement,a=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,o=e.top+(C.win.pageYOffset||n.scrollTop||i.scrollTop)-a,l=e.left+(C.win.pageXOffset||n.scrollLeft||i.scrollLeft)-s;return{y:o,x:l}};b.getElementByPoint=function(t,e){var r=this,i=r.canvas,n=C.doc.elementFromPoint(t,e);if(C.win.opera&&"svg"==n.tagName){var a=Je(i),s=i.createSVGRect();s.x=t-a.x,s.y=e-a.y,s.width=s.height=1;var o=i.getIntersectionList(s,null);o.length&&(n=o[o.length-1])}if(!n)return null;for(;n.parentNode&&n!=i.parentNode&&!n.raphael;)n=n.parentNode;return n==r.canvas.parentNode&&(n=i),n=n&&n.raphael?r.getById(n.raphaelid):null},b.getElementsByBBox=function(t){var r=this.set();return this.forEach(function(i){e.isBBoxIntersect(i.getBBox(),t)&&r.push(i)}),r},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var r=this.bottom;r;){if(t.call(e,r)===!1)return this;r=r.next}return this},b.getElementsByPoint=function(t,e){var r=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&r.push(i)}),r},$e.isPointInside=function(t,r){var i=this.realPath=de[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(i=e.transformPath(i,this.attr("transform"))),e.isPointInsidePath(i,t,r)},$e.getBBox=function(t){if(this.removed)return{};var e=this._;return t?((e.dirty||!e.bboxwt)&&(this.realPath=de[this.type](this),e.bboxwt=Ce(this.realPath),e.bboxwt.toString=d,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&((e.dirty||!this.realPath)&&(e.bboxwt=0,this.realPath=de[this.type](this)),e.bbox=Ce(ge(this.realPath,this.matrix)),e.bbox.toString=d,e.dirty=e.dirtyT=0),e.bbox)},$e.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},$e.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:null==t.opacity?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},r=e.width/2,i=this.paper,n=i.set(),a=this.realPath||de[this.type](this);a=this.matrix?ge(a,this.matrix):a;for(var s=1;r+1>s;s++)n.push(i.path(a).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/r*s).toFixed(3),opacity:+(e.opacity/r).toFixed(3)}));return n.insertBefore(this).translate(e.offsetx,e.offsety)};var Ke=function(t,r,i,n,a,s,o,u,c){return null==c?l(t,r,i,n,a,s,o,u):e.findDotsAtSegment(t,r,i,n,a,s,o,u,h(t,r,i,n,a,s,o,u,c))},tr=function(t,r){return function(i,n,a){i=Pe(i);for(var s,o,l,h,u,c="",f={},p=0,d=0,g=i.length;g>d;d++){if(l=i[d],"M"==l[0])s=+l[1],o=+l[2];else{if(h=Ke(s,o,l[1],l[2],l[3],l[4],l[5],l[6]),p+h>n){if(r&&!f.start){if(u=Ke(s,o,l[1],l[2],l[3],l[4],l[5],l[6],n-p),c+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],a)return c;f.start=c,c=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),p+=h,s=+l[5],o=+l[6];continue}if(!t&&!r)return u=Ke(s,o,l[1],l[2],l[3],l[4],l[5],l[6],n-p),{x:u.x,y:u.y,alpha:u.alpha}}p+=h,s=+l[5],o=+l[6]}c+=l.shift()+l}return f.end=c,u=t?p:r?f:e.findDotsAtSegment(s,o,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},er=tr(1),rr=tr(),ir=tr(0,1);e.getTotalLength=er,e.getPointAtLength=rr,e.getSubpath=function(t,e,r){if(this.getTotalLength(t)-r<1e-6)return ir(t,e).end;var i=ir(t,r,1);return e?ir(i,e).end:i},$e.getTotalLength=function(){var t=this.getPath();return t?this.node.getTotalLength?this.node.getTotalLength():er(t):void 0},$e.getPointAtLength=function(t){var e=this.getPath();return e?rr(e,t):void 0},$e.getPath=function(){var t,r=e._getPath[this.type];return"text"!=this.type&&"set"!=this.type?(r&&(t=r(this)),t):void 0},$e.getSubpath=function(t,r){var i=this.getPath();return i?e.getSubpath(i,t,r):void 0};var nr=e.easing_formulas={linear:function(t){return t},"<":function(t){return O(t,1.7)},">":function(t){return O(t,.48)},"<>":function(t){var e=.48-t/1.04,r=I.sqrt(.1734+e*e),i=r-e,n=O(V(i),1/3)*(0>i?-1:1),a=-r-e,s=O(V(a),1/3)*(0>a?-1:1),o=n+s+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:O(2,-10*t)*I.sin(2*(t-.075)*Y/.3)+1},bounce:function(t){var e,r=7.5625,i=2.75;return 1/i>t?e=r*t*t:2/i>t?(t-=1.5/i,e=r*t*t+.75):2.5/i>t?(t-=2.25/i,e=r*t*t+.9375):(t-=2.625/i,e=r*t*t+.984375),e}};nr.easeIn=nr["ease-in"]=nr["<"],nr.easeOut=nr["ease-out"]=nr[">"],nr.easeInOut=nr["ease-in-out"]=nr["<>"],nr["back-in"]=nr.backIn,nr["back-out"]=nr.backOut;var ar=[],sr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},or=function(){for(var r=+new Date,i=0;i<ar.length;i++){var n=ar[i];if(!n.el.removed&&!n.paused){var a,s,o=r-n.start,l=n.ms,h=n.easing,u=n.from,c=n.diff,f=n.to,p=(n.t,n.el),d={},g={};if(n.initstatus?(o=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*l,n.status=n.initstatus,delete n.initstatus,n.stop&&ar.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(o/l))/n.anim.top,!(0>o))if(l>o){var x=h(o/l);for(var y in u)if(u[B](y)){switch(re[y]){case W:a=+u[y]+x*l*c[y];break;case"colour":a="rgb("+[lr(Q(u[y].r+x*l*c[y].r)),lr(Q(u[y].g+x*l*c[y].g)),lr(Q(u[y].b+x*l*c[y].b))].join(",")+")";break;case"path":a=[];for(var m=0,b=u[y].length;b>m;m++){a[m]=[u[y][m][0]];for(var _=1,w=u[y][m].length;w>_;_++)a[m][_]=+u[y][m][_]+x*l*c[y][m][_];a[m]=a[m].join(L)}a=a.join(L);break;case"transform":if(c[y].real)for(a=[],m=0,b=u[y].length;b>m;m++)for(a[m]=[u[y][m][0]],_=1,w=u[y][m].length;w>_;_++)a[m][_]=u[y][m][_]+x*l*c[y][m][_];else{var k=function(t){return+u[y][t]+x*l*c[y][t]};a=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==y)for(a=[],m=4;m--;)a[m]=+u[y][m]+x*l*c[y][m];break;default:var C=[][E](u[y]);for(a=[],m=p.paper.customAttributes[y].length;m--;)a[m]=+C[m]+x*l*c[y][m]}d[y]=a}p.attr(d),function(e,r,i){setTimeout(function(){t("raphael.anim.frame."+e,r,i)})}(p.id,p,n.anim)}else{if(function(r,i,n){setTimeout(function(){t("raphael.anim.frame."+i.id,i,n),t("raphael.anim.finish."+i.id,i,n),e.is(r,"function")&&r.call(i)})}(n.callback,p,n.anim),p.attr(f),ar.splice(i--,1),n.repeat>1&&!n.next){for(s in f)f[B](s)&&(g[s]=n.totalOrigin[s]);n.el.attr(g),v(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&v(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}ar.length&&sr(or)},lr=function(t){return t>255?255:0>t?0:t};$e.animateWith=function(t,r,i,n,a,s){var o=this;if(o.removed)return s&&s.call(o),o;var l=i instanceof x?i:e.animation(i,n,a,s);v(l,o,l.percents[0],null,o.attr());for(var h=0,u=ar.length;u>h;h++)if(ar[h].anim==r&&ar[h].el==t){ar[u-1].start=ar[h].start;break}return o},$e.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},x.prototype.delay=function(t){var e=new x(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},x.prototype.repeat=function(t){var e=new x(this.anim,this.ms);return e.del=this.del,e.times=I.floor(q(t,0))||1,e},e.animation=function(t,r,i,n){if(t instanceof x)return t;(e.is(i,"function")||!i)&&(n=n||i||null,i=null),t=Object(t),r=+r||0;var a,s,o={};for(s in t)t[B](s)&&J(s)!=s&&J(s)+"%"!=s&&(a=!0,o[s]=t[s]);if(a)return i&&(o.easing=i),n&&(o.callback=n),new x({100:o},r);if(n){var l=0;for(var h in t){var u=K(h);t[B](h)&&u>l&&(l=u)}l+="%",!t[l].callback&&(t[l].callback=n)}return new x(t,r)},$e.animate=function(t,r,i,n){var a=this;if(a.removed)return n&&n.call(a),a;var s=t instanceof x?t:e.animation(t,r,i,n);return v(s,a,s.percents[0],null,a.attr()),a},$e.setTime=function(t,e){return t&&null!=e&&this.status(t,D(e,t.ms)/t.ms),this},$e.status=function(t,e){var r,i,n=[],a=0;if(null!=e)return v(t,this,-1,D(e,1)),this;for(r=ar.length;r>a;a++)if(i=ar[a],i.el.id==this.id&&(!t||i.anim==t)){if(t)return i.status;n.push({anim:i.anim,status:i.status})}return t?0:n},$e.pause=function(e){for(var r=0;r<ar.length;r++)ar[r].el.id!=this.id||e&&ar[r].anim!=e||t("raphael.anim.pause."+this.id,this,ar[r].anim)!==!1&&(ar[r].paused=!0);return this},$e.resume=function(e){for(var r=0;r<ar.length;r++)if(ar[r].el.id==this.id&&(!e||ar[r].anim==e)){var i=ar[r];t("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},$e.stop=function(e){for(var r=0;r<ar.length;r++)ar[r].el.id!=this.id||e&&ar[r].anim!=e||t("raphael.anim.stop."+this.id,this,ar[r].anim)!==!1&&ar.splice(r--,1);return this},t.on("raphael.remove",y),t.on("raphael.clear",y),$e.toString=function(){return"Raphaël’s object"};var hr=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,r=t.length;r>e;e++)!t[e]||t[e].constructor!=$e.constructor&&t[e].constructor!=hr||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ur=hr.prototype;ur.push=function(){for(var t,e,r=0,i=arguments.length;i>r;r++)t=arguments[r],!t||t.constructor!=$e.constructor&&t.constructor!=hr||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},ur.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ur.forEach=function(t,e){for(var r=0,i=this.items.length;i>r;r++)if(t.call(e,this.items[r],r)===!1)return this;return this};for(var cr in $e)$e[B](cr)&&(ur[cr]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t][A](r,e)})}}(cr));return ur.attr=function(t,r){if(t&&e.is(t,H)&&e.is(t[0],"object"))for(var i=0,n=t.length;n>i;i++)this.items[i].attr(t[i]);else for(var a=0,s=this.items.length;s>a;a++)this.items[a].attr(t,r);return this},ur.clear=function(){for(;this.length;)this.pop()},ur.splice=function(t,e){t=0>t?q(this.length+t,0):t,e=q(0,D(this.length-t,e));var r,i=[],n=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;e>r;r++)n.push(this[t+r]);for(;r<this.length-t;r++)i.push(this[t+r]);var s=a.length;for(r=0;r<s+i.length;r++)this.items[t+r]=this[t+r]=s>r?a[r]:i[r-s];for(r=this.items.length=this.length-=e-s;this[r];)delete this[r++];return new hr(n)},ur.exclude=function(t){for(var e=0,r=this.length;r>e;e++)if(this[e]==t)return this.splice(e,1),!0},ur.animate=function(t,r,i,n){(e.is(i,"function")||!i)&&(n=i||null);var a,s,o=this.items.length,l=o,h=this;if(!o)return this;n&&(s=function(){!--o&&n.call(h)}),i=e.is(i,G)?i:s;var u=e.animation(t,r,i,s);for(a=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(a,u,u),this.items[l]&&!this.items[l].removed||o--;return this},ur.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ur.getBBox=function(){for(var t=[],e=[],r=[],i=[],n=this.items.length;n--;)if(!this.items[n].removed){var a=this.items[n].getBBox();t.push(a.x),e.push(a.y),r.push(a.x+a.width),i.push(a.y+a.height)}return t=D[A](0,t),e=D[A](0,e),r=q[A](0,r),i=q[A](0,i),{x:t,y:e,x2:r,y2:i,width:r-t,height:i-e}},ur.clone=function(t){t=this.paper.set();for(var e=0,r=this.items.length;r>e;e++)t.push(this.items[e].clone());return t},ur.toString=function(){return"Raphaël‘s set"},ur.glow=function(t){var e=this.paper.set();return this.forEach(function(r){var i=r.glow(t);null!=i&&i.forEach(function(t){e.push(t)})}),e},ur.isPointInside=function(t,e){var r=!1;return this.forEach(function(i){return i.isPointInside(t,e)?(r=!0,!1):void 0}),r},e.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var i in t.face)t.face[B](i)&&(e.face[i]=t.face[i]);if(this.fonts[r]?this.fonts[r].push(e):this.fonts[r]=[e],!t.svg){e.face["units-per-em"]=K(t.face["units-per-em"],10);for(var n in t.glyphs)if(t.glyphs[B](n)){var a=t.glyphs[n];if(e.glyphs[n]={w:a.w,k:{},d:a.d&&"M"+a.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},a.k)for(var s in a.k)a[B](s)&&(e.glyphs[n].k[s]=a.k[s])}}return t},b.getFont=function(t,r,i,n){if(n=n||"normal",i=i||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,e.fonts){var a=e.fonts[t];if(!a){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,M)+"(\\s|$)","i");for(var o in e.fonts)if(e.fonts[B](o)&&s.test(o)){a=e.fonts[o];break}}var l;if(a)for(var h=0,u=a.length;u>h&&(l=a[h],l.face["font-weight"]!=r||l.face["font-style"]!=i&&l.face["font-style"]||l.face["font-stretch"]!=n);h++);return l}},b.print=function(t,r,i,n,a,s,o,l){s=s||"middle",o=q(D(o||0,1),-1),l=q(D(l||1,3),1);var h,u=z(i)[P](M),c=0,f=0,p=M;if(e.is(n,"string")&&(n=this.getFont(n)),n){h=(a||16)/n.face["units-per-em"];for(var d=n.face.bbox[P](_),g=+d[0],x=d[3]-d[1],v=0,y=+d[1]+("baseline"==s?x+ +n.face.descent:x/2),m=0,b=u.length;b>m;m++){if("\n"==u[m])c=0,k=0,f=0,v+=x*l;else{var w=f&&n.glyphs[u[m-1]]||{},k=n.glyphs[u[m]];c+=f?(w.w||n.w)+(w.k&&w.k[u[m]]||0)+n.w*o:0,f=1}k&&k.d&&(p+=e.transformPath(k.d,["t",c*h,v*h,"s",h,h,g,y,"t",(t-g)/h,(r-y)/h]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(e.is(t,"array"))for(var r,i=this.set(),n=0,a=t.length;a>n;n++)r=t[n]||{},w[B](r.type)&&i.push(this[r.type]().attr(r));return i},e.format=function(t,r){var i=e.is(r,H)?[0][E](r):arguments;return t&&e.is(t,G)&&i.length-1&&(t=t.replace(k,function(t,e){return null==i[++e]?M:i[e]})),t||M},e.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(t,r,i){var n=i;return r.replace(e,function(t,e,r,i,a){e=e||i,n&&(e in n&&(n=n[e]),"function"==typeof n&&a&&(n=n()))}),n=(null==n||n==i?t:n)+""};return function(e,i){return String(e).replace(t,function(t,e){return r(t,e,i)})}}(),e.ninja=function(){return S.was?C.win.Raphael=S.is:delete Raphael,e},e.st=ur,t.on("raphael.DOMload",function(){m=!0}),function(t,r,i){function n(){/in/.test(t.readyState)?setTimeout(n,9):e.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(r,i=function(){t.removeEventListener(r,i,!1),t.readyState="complete"},!1),t.readyState="loading"),n()}(document,"DOMContentLoaded"),e}),function(t,e){"function"==typeof define&&define.amd?define("raphael.svg",["raphael.core"],function(t){return e(t)}):e("object"==typeof exports?require("raphael.core"):t.Raphael)}(this,function(t){if(!t||t.svg){var e="hasOwnProperty",r=String,i=parseFloat,n=parseInt,a=Math,s=a.max,o=a.abs,l=a.pow,h=/[, ]+/,u=t.eve,c="",f=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var x=function(i,n){if(n){"string"==typeof i&&(i=x(i));for(var a in n)n[e](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(p,a.substring(6),r(n[a])):i.setAttribute(a,r(n[a])))}else i=t._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},v=function(e,n){var h="linear",u=e.id+n,f=.5,p=.5,d=e.node,g=e.paper,v=d.style,y=t._g.doc.getElementById(u);if(!y){if(n=r(n).replace(t._radial_gradient,function(t,e,r){if(h="radial",e&&r){f=i(e),p=i(r);var n=2*(p>.5)-1;l(f-.5,2)+l(p-.5,2)>.25&&(p=a.sqrt(.25-l(f-.5,2))*n+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*n)}return c}),n=n.split(/\s*\-\s*/),"linear"==h){var m=n.shift();if(m=-i(m),isNaN(m))return null;var b=[0,0,a.cos(t.rad(m)),a.sin(t.rad(m))],_=1/(s(o(b[2]),o(b[3]))||1);b[2]*=_,b[3]*=_,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var w=t._parseDots(n);if(!w)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=x(h+"Gradient",{id:u}),e.gradient=y,x(y,"radial"==h?{fx:f,fy:p}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(y);for(var k=0,B=w.length;B>k;k++)y.appendChild(x("stop",{offset:w[k].offset?w[k].offset:k?"100%":"0%","stop-color":w[k].color||"#fff","stop-opacity":isFinite(w[k].opacity)?w[k].opacity:1}))}}return x(d,{fill:"url('"+document.location.origin+document.location.pathname+"#"+u+"')",opacity:1,"fill-opacity":1}),v.fill=c,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);x(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},m=function(i,n,a){if("path"==i.type){for(var s,o,l,h,u,f=r(n).toLowerCase().split("-"),p=i.paper,v=a?"end":"start",y=i.node,m=i.attrs,b=m["stroke-width"],_=f.length,w="classic",k=3,B=3,C=5;_--;)switch(f[_]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=f[_];break;case"wide":B=5;break;case"narrow":B=2;break;case"long":k=5;break;case"short":k=2}if("open"==w?(k+=2,B+=2,C+=2,l=1,h=a?4:1,u={fill:"none",stroke:m.stroke}):(h=l=k/2,u={fill:m.stroke,stroke:"none"}),i._.arrows?a?(i._.arrows.endPath&&g[i._.arrows.endPath]--,i._.arrows.endMarker&&g[i._.arrows.endMarker]--):(i._.arrows.startPath&&g[i._.arrows.startPath]--,i._.arrows.startMarker&&g[i._.arrows.startMarker]--):i._.arrows={},"none"!=w){var S="raphael-marker-"+w,T="raphael-marker-"+v+w+k+B+"-obj"+i.id;t._g.doc.getElementById(S)?g[S]++:(p.defs.appendChild(x(x("path"),{"stroke-linecap":"round",d:d[w],id:S})),g[S]=1);var A,E=t._g.doc.getElementById(T);E?(g[T]++,A=E.getElementsByTagName("use")[0]):(E=x(x("marker"),{id:T,markerHeight:B,markerWidth:k,orient:"auto",refX:h,refY:B/2}),A=x(x("use"),{"xlink:href":"#"+S,transform:(a?"rotate(180 "+k/2+" "+B/2+") ":c)+"scale("+k/C+","+B/C+")","stroke-width":(1/((k/C+B/C)/2)).toFixed(4)}),E.appendChild(A),p.defs.appendChild(E),g[T]=1),x(A,u);var N=l*("diamond"!=w&&"oval"!=w);a?(s=i._.arrows.startdx*b||0,o=t.getTotalLength(m.path)-N*b):(s=N*b,o=t.getTotalLength(m.path)-(i._.arrows.enddx*b||0)),u={},u["marker-"+v]="url(#"+T+")",(o||s)&&(u.d=t.getSubpath(m.path,s,o)),x(y,u),i._.arrows[v+"Path"]=S,i._.arrows[v+"Marker"]=T,i._.arrows[v+"dx"]=N,i._.arrows[v+"Type"]=w,i._.arrows[v+"String"]=n}else a?(s=i._.arrows.startdx*b||0,o=t.getTotalLength(m.path)-s):(s=0,o=t.getTotalLength(m.path)-(i._.arrows.enddx*b||0)),i._.arrows[v+"Path"]&&x(y,{d:t.getSubpath(m.path,s,o)}),delete i._.arrows[v+"Path"],delete i._.arrows[v+"Marker"],delete i._.arrows[v+"dx"],delete i._.arrows[v+"Type"],delete i._.arrows[v+"String"];for(u in g)if(g[e](u)&&!g[u]){var M=t._g.doc.getElementById(u);M&&M.parentNode.removeChild(M)}}},b={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(t,e,i){if(e=b[r(e).toLowerCase()]){for(var n=t.attrs["stroke-width"]||"1",a={round:n,square:n,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,s=[],o=e.length;o--;)s[o]=e[o]*n+(o%2?1:-1)*a;x(t.node,{"stroke-dasharray":s.join(",")})}else x(t.node,{"stroke-dasharray":"none"})},w=function(i,a){var l=i.node,u=i.attrs,f=l.style.visibility;l.style.visibility="hidden";for(var d in a)if(a[e](d)){if(!t._availableAttrs[e](d))continue;var g=a[d];switch(u[d]=g,d){case"blur":i.blur(g);break;case"title":var b=l.getElementsByTagName("title");if(b.length&&(b=b[0]))b.firstChild.nodeValue=g;else{b=x("title");var w=t._g.doc.createTextNode(g);b.appendChild(w),l.appendChild(b)}break;case"href":case"target":var k=l.parentNode;if("a"!=k.tagName.toLowerCase()){var C=x("a");k.insertBefore(C,l),C.appendChild(l),k=C}"target"==d?k.setAttributeNS(p,"show","blank"==g?"new":g):k.setAttributeNS(p,d,g);break;case"cursor":l.style.cursor=g;break;case"transform":i.transform(g);break;case"arrow-start":m(i,g);break;case"arrow-end":m(i,g,1);break;case"clip-rect":var S=r(g).split(h);if(4==S.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var T=x("clipPath"),A=x("rect");T.id=t.createUUID(),x(A,{x:S[0],y:S[1],width:S[2],height:S[3]}),T.appendChild(A),i.paper.defs.appendChild(T),x(l,{"clip-path":"url(#"+T.id+")"}),i.clip=A}if(!g){var E=l.getAttribute("clip-path");if(E){var N=t._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g,c));N&&N.parentNode.removeChild(N),x(l,{"clip-path":c}),delete i.clip}}break;case"path":"path"==i.type&&(x(l,{d:g?u.path=t._pathToAbsolute(g):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(d,g),i._.dirty=1,!u.fx)break;d="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==d&&"rect"==i.type)break;case"cx":l.setAttribute(d,g),i.pattern&&y(i),i._.dirty=1;break;case"height":if(l.setAttribute(d,g),i._.dirty=1,!u.fy)break;d="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==d&&"rect"==i.type)break;case"cy":l.setAttribute(d,g),i.pattern&&y(i),i._.dirty=1;break;case"r":"rect"==i.type?x(l,{rx:g,ry:g}):l.setAttribute(d,g),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(p,"href",g);break;case"stroke-width":(1!=i._.sx||1!=i._.sy)&&(g/=s(o(i._.sx),o(i._.sy))||1),l.setAttribute(d,g),u["stroke-dasharray"]&&_(i,u["stroke-dasharray"],a),i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1));break;case"stroke-dasharray":_(i,g,a);break;case"fill":var M=r(g).match(t._ISURL);if(M){T=x("pattern");var L=x("image");T.id=t.createUUID(),x(T,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),x(L,{x:0,y:0,"xlink:href":M[1]}),T.appendChild(L),function(e){t._preload(M[1],function(){var t=this.offsetWidth,r=this.offsetHeight;x(e,{width:t,height:r}),x(L,{width:t,height:r})})}(T),i.paper.defs.appendChild(T),x(l,{fill:"url(#"+T.id+")"}),i.pattern=T,i.pattern&&y(i);break}var z=t.getRGB(g);if(z.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=r(g).charAt())&&v(i,g)){if("opacity"in u||"fill-opacity"in u){var P=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(P){var F=P.getElementsByTagName("stop");x(F[F.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete a.gradient,delete u.gradient,!t.is(u.opacity,"undefined")&&t.is(a.opacity,"undefined")&&x(l,{opacity:u.opacity}),!t.is(u["fill-opacity"],"undefined")&&t.is(a["fill-opacity"],"undefined")&&x(l,{"fill-opacity":u["fill-opacity"]});z[e]("opacity")&&x(l,{"fill-opacity":z.opacity>1?z.opacity/100:z.opacity});case"stroke":z=t.getRGB(g),l.setAttribute(d,z.hex),"stroke"==d&&z[e]("opacity")&&x(l,{"stroke-opacity":z.opacity>1?z.opacity/100:z.opacity}),"stroke"==d&&i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=r(g).charAt())&&v(i,g);break;case"opacity":u.gradient&&!u[e]("stroke-opacity")&&x(l,{"stroke-opacity":g>1?g/100:g});
case"fill-opacity":if(u.gradient){P=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c)),P&&(F=P.getElementsByTagName("stop"),x(F[F.length-1],{"stop-opacity":g}));break}default:"font-size"==d&&(g=n(g,10)+"px");var R=d.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[R]=g,i._.dirty=1,l.setAttribute(d,g)}}B(i,a),l.style.visibility=f},k=1.2,B=function(i,a){if("text"==i.type&&(a[e]("text")||a[e]("font")||a[e]("font-size")||a[e]("x")||a[e]("y"))){var s=i.attrs,o=i.node,l=o.firstChild?n(t._g.doc.defaultView.getComputedStyle(o.firstChild,c).getPropertyValue("font-size"),10):10;if(a[e]("text")){for(s.text=a.text;o.firstChild;)o.removeChild(o.firstChild);for(var h,u=r(a.text).split("\n"),f=[],p=0,d=u.length;d>p;p++)h=x("tspan"),p&&x(h,{dy:l*k,x:s.x}),h.appendChild(t._g.doc.createTextNode(u[p])),o.appendChild(h),f[p]=h}else for(f=o.getElementsByTagName("tspan"),p=0,d=f.length;d>p;p++)p?x(f[p],{dy:l*k,x:s.x}):x(f[0],{dy:0});x(o,{x:s.x,y:s.y}),i._.dirty=1;var g=i._getBBox(),v=s.y-(g.y+g.height/2);v&&t.is(v,"finite")&&x(f[0],{dy:v})}},C=function(t){return t.parentNode&&"a"===t.parentNode.tagName.toLowerCase()?t.parentNode:t},S=function(e,r){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=r,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},T=t.el;S.prototype=T,T.constructor=S,t._engine.path=function(t,e){var r=x("path");e.canvas&&e.canvas.appendChild(r);var i=new S(r,e);return i.type="path",w(i,{fill:"none",stroke:"#000",path:t}),i},T.rotate=function(t,e,n){if(this.removed)return this;if(t=r(t).split(h),t.length-1&&(e=i(t[1]),n=i(t[2])),t=i(t[0]),null==n&&(e=n),null==e||null==n){var a=this.getBBox(1);e=a.x+a.width/2,n=a.y+a.height/2}return this.transform(this._.transform.concat([["r",t,e,n]])),this},T.scale=function(t,e,n,a){if(this.removed)return this;if(t=r(t).split(h),t.length-1&&(e=i(t[1]),n=i(t[2]),a=i(t[3])),t=i(t[0]),null==e&&(e=t),null==a&&(n=a),null==n||null==a)var s=this.getBBox(1);return n=null==n?s.x+s.width/2:n,a=null==a?s.y+s.height/2:a,this.transform(this._.transform.concat([["s",t,e,n,a]])),this},T.translate=function(t,e){return this.removed?this:(t=r(t).split(h),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},T.transform=function(r){var i=this._;if(null==r)return i.transform;if(t._extractTransform(this,r),this.clip&&x(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&x(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var n=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":n})}return this},T.hide=function(){return this.removed||(this.node.style.display="none"),this},T.show=function(){return this.removed||(this.node.style.display=""),this},T.remove=function(){var e=C(this.node);if(!this.removed&&e.parentNode){var r=this.paper;r.__set__&&r.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&r.defs.removeChild(this.gradient),t._tear(this,r),e.parentNode.removeChild(e),this.removeData();for(var i in this)this[i]="function"==typeof this[i]?t._removedFactory(i):null;this.removed=!0}},T._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e,r=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&"none"==e.display&&(r=!0,e.display="");var i={};try{i=this.node.getBBox()}catch(n){i={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{i=i||{},r&&(e.display="none")}return t&&this.hide(),i},T.attr=function(r,i){if(this.removed)return this;if(null==r){var n={};for(var a in this.attrs)this.attrs[e](a)&&(n[a]=this.attrs[a]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==i&&t.is(r,"string")){if("fill"==r&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==r)return this._.transform;for(var s=r.split(h),o={},l=0,c=s.length;c>l;l++)r=s[l],o[r]=r in this.attrs?this.attrs[r]:t.is(this.paper.customAttributes[r],"function")?this.paper.customAttributes[r].def:t._availableAttrs[r];return c-1?o:o[s[0]]}if(null==i&&t.is(r,"array")){for(o={},l=0,c=r.length;c>l;l++)o[r[l]]=this.attr(r[l]);return o}if(null!=i){var f={};f[r]=i}else null!=r&&t.is(r,"object")&&(f=r);for(var p in f)u("raphael.attr."+p+"."+this.id,this,f[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&t.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var g in d)d[e](g)&&(f[g]=d[g])}return w(this,f),this},T.toFront=function(){if(this.removed)return this;var e=C(this.node);e.parentNode.appendChild(e);var r=this.paper;return r.top!=this&&t._tofront(this,r),this},T.toBack=function(){if(this.removed)return this;var e=C(this.node),r=e.parentNode;return r.insertBefore(e,r.firstChild),t._toback(this,this.paper),this.paper,this},T.insertAfter=function(e){if(this.removed||!e)return this;var r=C(this.node),i=C(e.node||e[e.length-1].node);return i.nextSibling?i.parentNode.insertBefore(r,i.nextSibling):i.parentNode.appendChild(r),t._insertafter(this,e,this.paper),this},T.insertBefore=function(e){if(this.removed||!e)return this;var r=C(this.node),i=C(e.node||e[0].node);return i.parentNode.insertBefore(r,i),t._insertbefore(this,e,this.paper),this},T.blur=function(e){var r=this;if(0!==+e){var i=x("filter"),n=x("feGaussianBlur");r.attrs.blur=e,i.id=t.createUUID(),x(n,{stdDeviation:+e||1.5}),i.appendChild(n),r.paper.defs.appendChild(i),r._blur=i,x(r.node,{filter:"url(#"+i.id+")"})}else r._blur&&(r._blur.parentNode.removeChild(r._blur),delete r._blur,delete r.attrs.blur),r.node.removeAttribute("filter");return r},t._engine.circle=function(t,e,r,i){var n=x("circle");t.canvas&&t.canvas.appendChild(n);var a=new S(n,t);return a.attrs={cx:e,cy:r,r:i,fill:"none",stroke:"#000"},a.type="circle",x(n,a.attrs),a},t._engine.rect=function(t,e,r,i,n,a){var s=x("rect");t.canvas&&t.canvas.appendChild(s);var o=new S(s,t);return o.attrs={x:e,y:r,width:i,height:n,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},o.type="rect",x(s,o.attrs),o},t._engine.ellipse=function(t,e,r,i,n){var a=x("ellipse");t.canvas&&t.canvas.appendChild(a);var s=new S(a,t);return s.attrs={cx:e,cy:r,rx:i,ry:n,fill:"none",stroke:"#000"},s.type="ellipse",x(a,s.attrs),s},t._engine.image=function(t,e,r,i,n,a){var s=x("image");x(s,{x:r,y:i,width:n,height:a,preserveAspectRatio:"none"}),s.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(s);var o=new S(s,t);return o.attrs={x:r,y:i,width:n,height:a,src:e},o.type="image",o},t._engine.text=function(e,r,i,n){var a=x("text");e.canvas&&e.canvas.appendChild(a);var s=new S(a,e);return s.attrs={x:r,y:i,"text-anchor":"middle",text:n,"font-family":t._availableAttrs["font-family"],"font-size":t._availableAttrs["font-size"],stroke:"none",fill:"#000"},s.type="text",w(s,s.attrs),s},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),r=e&&e.container,i=e.x,n=e.y,a=e.width,s=e.height;if(!r)throw new Error("SVG container not found.");var o,l=x("svg"),h="overflow:hidden;";return i=i||0,n=n||0,a=a||512,s=s||342,x(l,{height:s,version:1.1,width:a,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==r?(l.style.cssText=h+"position:absolute;left:"+i+"px;top:"+n+"px",t._g.doc.body.appendChild(l),o=1):(l.style.cssText=h+"position:relative",r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l)),r=new t._Paper,r.width=a,r.height=s,r.canvas=l,r.clear(),r._left=r._top=0,o&&(r.renderfix=function(){}),r.renderfix(),r},t._engine.setViewBox=function(t,e,r,i,n){u("raphael.setViewBox",this,this._viewBox,[t,e,r,i,n]);var a,o,l=this.getSize(),h=s(r/l.width,i/l.height),c=this.top,p=n?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(h=1),delete this._vbSize,a="0 0 "+this.width+f+this.height):(this._vbSize=h,a=t+f+e+f+r+f+i),x(this.canvas,{viewBox:a,preserveAspectRatio:p});h&&c;)o="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":o}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,r,i,!!n],this},t.prototype.renderfix=function(){var t,e=this.canvas,r=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var n=-t.e%1,a=-t.f%1;(n||a)&&(n&&(this._left=(this._left+n)%1,r.left=this._left+"px"),a&&(this._top=(this._top+a)%1,r.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=x("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=x("defs"))},t.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var A=t.st;for(var E in T)T[e](E)&&!A[e](E)&&(A[E]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(E))}}),function(t,e){"function"==typeof define&&define.amd?define("raphael.vml",["raphael.core"],function(t){return e(t)}):e("object"==typeof exports?require("raphael"):t.Raphael)}(this,function(t){if(!t||t.vml){var e="hasOwnProperty",r=String,i=parseFloat,n=Math,a=n.round,s=n.max,o=n.min,l=n.abs,h="fill",u=/[, ]+/,c=t.eve,f=" progid:DXImageTransform.Microsoft",p=" ",d="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},x=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,m="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",b=21600,_={path:1,rect:1,image:1},w={circle:1,ellipse:1},k=function(e){var i=/[ahqstv]/gi,n=t._pathToAbsolute;if(r(e).match(i)&&(n=t._path2curve),i=/[clmz]/g,n==t._pathToAbsolute&&!r(e).match(i)){var s=r(e).replace(x,function(t,e,r){var i=[],n="m"==e.toLowerCase(),s=g[e];return r.replace(y,function(t){n&&2==i.length&&(s+=i+g["m"==e?"l":"L"],i=[]),i.push(a(t*b))}),s+i});return s}var o,l,h=n(e);s=[];for(var u=0,c=h.length;c>u;u++){o=h[u],l=h[u][0].toLowerCase(),"z"==l&&(l="x");for(var f=1,v=o.length;v>f;f++)l+=a(o[f]*b)+(f!=v-1?",":d);s.push(l)}return s.join(p)},B=function(e,r,i){var n=t.matrix();return n.rotate(-e,.5,.5),{dx:n.x(r,i),dy:n.y(r,i)}},C=function(t,e,r,i,n,a){var s=t._,o=t.matrix,u=s.fillpos,c=t.node,f=c.style,d=1,g="",x=b/e,v=b/r;if(f.visibility="hidden",e&&r){if(c.coordsize=l(x)+p+l(v),f.rotation=a*(0>e*r?-1:1),a){var y=B(a,i,n);i=y.dx,n=y.dy}if(0>e&&(g+="x"),0>r&&(g+=" y")&&(d=-1),f.flip=g,c.coordorigin=i*-x+p+n*-v,u||s.fillsize){var m=c.getElementsByTagName(h);m=m&&m[0],c.removeChild(m),u&&(y=B(a,o.x(u[0],u[1]),o.y(u[0],u[1])),m.position=y.dx*d+p+y.dy*d),s.fillsize&&(m.size=s.fillsize[0]*l(e)+p+s.fillsize[1]*l(r)),c.appendChild(m)}f.visibility="visible"}};t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S=function(t,e,i){for(var n=r(e).toLowerCase().split("-"),a=i?"end":"start",s=n.length,o="classic",l="medium",h="medium";s--;)switch(n[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=n[s];break;case"wide":case"narrow":h=n[s];break;case"long":case"short":l=n[s]}var u=t.node.getElementsByTagName("stroke")[0];u[a+"arrow"]=o,u[a+"arrowlength"]=l,u[a+"arrowwidth"]=h},T=function(n,l){n.attrs=n.attrs||{};var c=n.node,f=n.attrs,g=c.style,x=_[n.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),v=w[n.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),y=n;for(var m in l)l[e](m)&&(f[m]=l[m]);if(x&&(f.path=t._getPath[n.type](n),n._.dirty=1),l.href&&(c.href=l.href),l.title&&(c.title=l.title),l.target&&(c.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&n.blur(l.blur),(l.path&&"path"==n.type||x)&&(c.path=k(~r(f.path).toLowerCase().indexOf("r")?t._pathToAbsolute(f.path):f.path),n._.dirty=1,"image"==n.type&&(n._.fillpos=[f.x,f.y],n._.fillsize=[f.width,f.height],C(n,1,1,0,0,0))),"transform"in l&&n.transform(l.transform),v){var B=+f.cx,T=+f.cy,E=+f.rx||+f.r||0,N=+f.ry||+f.r||0;c.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",a((B-E)*b),a((T-N)*b),a((B+E)*b),a((T+N)*b),a(B*b)),n._.dirty=1}if("clip-rect"in l){var L=r(l["clip-rect"]).split(u);if(4==L.length){L[2]=+L[2]+ +L[0],L[3]=+L[3]+ +L[1];var z=c.clipRect||t._g.doc.createElement("div"),P=z.style;P.clip=t.format("rect({1}px {2}px {3}px {0}px)",L),c.clipRect||(P.position="absolute",P.top=0,P.left=0,P.width=n.paper.width+"px",P.height=n.paper.height+"px",c.parentNode.insertBefore(z,c),z.appendChild(c),c.clipRect=z)}l["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(n.textpath){var F=n.textpath.style;l.font&&(F.font=l.font),l["font-family"]&&(F.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),l["font-size"]&&(F.fontSize=l["font-size"]),l["font-weight"]&&(F.fontWeight=l["font-weight"]),l["font-style"]&&(F.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var R=c.getElementsByTagName(h),j=!1;if(R=R&&R[0],!R&&(j=R=M(h)),"image"==n.type&&l.src&&(R.src=l.src),l.fill&&(R.on=!0),(null==R.on||"none"==l.fill||null===l.fill)&&(R.on=!1),R.on&&l.fill){var I=r(l.fill).match(t._ISURL);if(I){R.parentNode==c&&c.removeChild(R),R.rotate=!0,R.src=I[1],R.type="tile";var q=n.getBBox(1);R.position=q.x+p+q.y,n._.fillpos=[q.x,q.y],t._preload(I[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else R.color=t.getRGB(l.fill).hex,R.src=d,R.type="solid",t.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=r(l.fill).charAt())&&A(y,l.fill,R)&&(f.fill="none",f.gradient=l.fill,R.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var D=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);D=o(s(D,0),1),R.opacity=D,R.src&&(R.color="none")}c.appendChild(R);var V=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],O=!1;!V&&(O=V=M("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(V.on=!0),("none"==l.stroke||null===l.stroke||null==V.on||0==l.stroke||0==l["stroke-width"])&&(V.on=!1);var Y=t.getRGB(l.stroke);V.on&&l.stroke&&(V.color=Y.hex),D=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+Y.o+1||2)-1);var W=.75*(i(l["stroke-width"])||1);if(D=o(s(D,0),1),null==l["stroke-width"]&&(W=f["stroke-width"]),l["stroke-width"]&&(V.weight=W),W&&1>W&&(D*=W)&&(V.weight=1),V.opacity=D,l["stroke-linejoin"]&&(V.joinstyle=l["stroke-linejoin"]||"miter"),V.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(V.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var G={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};V.dashstyle=G[e](l["stroke-dasharray"])?G[l["stroke-dasharray"]]:d}O&&c.appendChild(V)}if("text"==y.type){y.paper.canvas.style.display=d;var H=y.paper.span,X=100,U=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);g=H.style,f.font&&(g.font=f.font),f["font-family"]&&(g.fontFamily=f["font-family"]),f["font-weight"]&&(g.fontWeight=f["font-weight"]),f["font-style"]&&(g.fontStyle=f["font-style"]),U=i(f["font-size"]||U&&U[0])||10,g.fontSize=U*X+"px",y.textpath.string&&(H.innerHTML=r(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var $=H.getBoundingClientRect();y.W=f.w=($.right-$.left)/X,y.H=f.h=($.bottom-$.top)/X,y.X=f.x,y.Y=f.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=t.format("m{0},{1}l{2},{1}",a(f.x*b),a(f.y*b),a(f.x*b)+1));for(var Z=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,J=Z.length;J>Q;Q++)if(Z[Q]in l){y._.dirty=1;break}switch(f["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},A=function(e,a,s){e.attrs=e.attrs||{};var o=(e.attrs,Math.pow),l="linear",h=".5 .5";if(e.attrs.gradient=a,a=r(a).replace(t._radial_gradient,function(t,e,r){return l="radial",e&&r&&(e=i(e),r=i(r),o(e-.5,2)+o(r-.5,2)>.25&&(r=n.sqrt(.25-o(e-.5,2))*(2*(r>.5)-1)+.5),h=e+p+r),d}),a=a.split(/\s*\-\s*/),"linear"==l){var u=a.shift();if(u=-i(u),isNaN(u))return null}var c=t._parseDots(a);if(!c)return null;if(e=e.shape||e.node,c.length){e.removeChild(s),s.on=!0,s.method="none",s.color=c[0].color,s.color2=c[c.length-1].color;for(var f=[],g=0,x=c.length;x>g;g++)c[g].offset&&f.push(c[g].offset+p+c[g].color);s.colors=f.length?f.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=h,s.angle=0):(s.type="gradient",s.angle=(270-u)%360),e.appendChild(s)}return 1},E=function(e,r){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},N=t.el;E.prototype=N,N.constructor=E,N.transform=function(e){if(null==e)return this._.transform;var i,n=this.paper._viewBoxShift,a=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:d;n&&(i=e=r(e).replace(/\.{3}|\u2026/g,this._.transform||d)),t._extractTransform(this,a+e);var s,o=this.matrix.clone(),l=this.skew,h=this.node,u=~r(this.attrs.fill).indexOf("-"),c=!r(this.attrs.fill).indexOf("url(");if(o.translate(1,1),c||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=o.split(),u&&s.noRotation||!s.isSimple){h.style.filter=o.toFilter();var f=this.getBBox(),g=this.getBBox(1),x=f.x-g.x,v=f.y-g.y;h.coordorigin=x*-b+p+v*-b,C(this,1,1,x,v,0)}else h.style.filter=d,C(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else h.style.filter=d,l.matrix=r(o),l.offset=o.offset();return null!==i&&(this._.transform=i,t._extractTransform(this,i)),this},N.rotate=function(t,e,n){if(this.removed)return this;if(null!=t){if(t=r(t).split(u),t.length-1&&(e=i(t[1]),n=i(t[2])),t=i(t[0]),null==n&&(e=n),null==e||null==n){var a=this.getBBox(1);e=a.x+a.width/2,n=a.y+a.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,n]])),this}},N.translate=function(t,e){return this.removed?this:(t=r(t).split(u),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},N.scale=function(t,e,n,a){if(this.removed)return this;if(t=r(t).split(u),t.length-1&&(e=i(t[1]),n=i(t[2]),a=i(t[3]),isNaN(n)&&(n=null),isNaN(a)&&(a=null)),t=i(t[0]),null==e&&(e=t),null==a&&(n=a),null==n||null==a)var s=this.getBBox(1);return n=null==n?s.x+s.width/2:n,a=null==a?s.y+s.height/2:a,this.transform(this._.transform.concat([["s",t,e,n,a]])),this._.dirtyT=1,this},N.hide=function(){return!this.removed&&(this.node.style.display="none"),this},N.show=function(){return!this.removed&&(this.node.style.display=d),this},N.auxGetBBox=t.el.getBBox,N.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var e={},r=1/this.paper._viewBoxShift.scale;return e.x=t.x-this.paper._viewBoxShift.dx,e.x*=r,e.y=t.y-this.paper._viewBoxShift.dy,e.y*=r,e.width=t.width*r,e.height=t.height*r,e.x2=e.x+e.width,e.y2=e.y+e.height,e}return t},N._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},N.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},N.attr=function(r,i){if(this.removed)return this;if(null==r){var n={};for(var a in this.attrs)this.attrs[e](a)&&(n[a]=this.attrs[a]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==i&&t.is(r,"string")){if(r==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=r.split(u),o={},l=0,f=s.length;f>l;l++)r=s[l],o[r]=r in this.attrs?this.attrs[r]:t.is(this.paper.customAttributes[r],"function")?this.paper.customAttributes[r].def:t._availableAttrs[r];return f-1?o:o[s[0]]}if(this.attrs&&null==i&&t.is(r,"array")){for(o={},l=0,f=r.length;f>l;l++)o[r[l]]=this.attr(r[l]);return o}var p;null!=i&&(p={},p[r]=i),null==i&&t.is(r,"object")&&(p=r);for(var d in p)c("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[e](d)&&p[e](d)&&t.is(this.paper.customAttributes[d],"function")){var g=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var x in g)g[e](x)&&(p[x]=g[x])}p.text&&"text"==this.type&&(this.textpath.string=p.text),T(this,p)}return this},N.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},N.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},N.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},N.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},N.blur=function(e){var r=this.node.runtimeStyle,i=r.filter;return i=i.replace(v,d),0!==+e?(this.attrs.blur=e,r.filter=i+p+f+".Blur(pixelradius="+(+e||1.5)+")",r.margin=t.format("-{0}px 0 0 -{0}px",a(+e||1.5))):(r.filter=i,r.margin=0,delete this.attrs.blur),this},t._engine.path=function(t,e){var r=M("shape");r.style.cssText=m,r.coordsize=b+p+b,r.coordorigin=e.coordorigin;var i=new E(r,e),n={fill:"none",stroke:"#000"};t&&(n.path=t),i.type="path",i.path=[],i.Path=d,T(i,n),e.canvas.appendChild(r);var a=M("skew");return a.on=!0,r.appendChild(a),i.skew=a,i.transform(d),i},t._engine.rect=function(e,r,i,n,a,s){var o=t._rectPath(r,i,n,a,s),l=e.path(o),h=l.attrs;return l.X=h.x=r,l.Y=h.y=i,l.W=h.width=n,l.H=h.height=a,h.r=s,h.path=o,l.type="rect",l},t._engine.ellipse=function(t,e,r,i,n){var a=t.path();return a.attrs,a.X=e-i,a.Y=r-n,a.W=2*i,a.H=2*n,a.type="ellipse",T(a,{cx:e,cy:r,rx:i,ry:n}),a},t._engine.circle=function(t,e,r,i){var n=t.path();return n.attrs,n.X=e-i,n.Y=r-i,n.W=n.H=2*i,n.type="circle",T(n,{cx:e,cy:r,r:i}),n},t._engine.image=function(e,r,i,n,a,s){var o=t._rectPath(i,n,a,s),l=e.path(o).attr({stroke:"none"}),u=l.attrs,c=l.node,f=c.getElementsByTagName(h)[0];return u.src=r,l.X=u.x=i,l.Y=u.y=n,l.W=u.width=a,l.H=u.height=s,u.path=o,l.type="image",f.parentNode==c&&c.removeChild(f),f.rotate=!0,f.src=r,f.type="tile",l._.fillpos=[i,n],l._.fillsize=[a,s],c.appendChild(f),C(l,1,1,0,0,0),l},t._engine.text=function(e,i,n,s){var o=M("shape"),l=M("path"),h=M("textpath");i=i||0,n=n||0,s=s||"",l.v=t.format("m{0},{1}l{2},{1}",a(i*b),a(n*b),a(i*b)+1),l.textpathok=!0,h.string=r(s),h.on=!0,o.style.cssText=m,o.coordsize=b+p+b,o.coordorigin="0 0";var u=new E(o,e),c={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:s};u.shape=o,u.path=l,u.textpath=h,u.type="text",u.attrs.text=r(s),u.attrs.x=i,u.attrs.y=n,u.attrs.w=1,u.attrs.h=1,T(u,c),o.appendChild(h),o.appendChild(l),e.canvas.appendChild(o);var f=M("skew");return f.on=!0,o.appendChild(f),u.skew=f,u.transform(d),u},t._engine.setSize=function(e,r){var i=this.canvas.style;return this.width=e,this.height=r,e==+e&&(e+="px"),r==+r&&(r+="px"),i.width=e,i.height=r,i.clip="rect(0 "+e+" "+r+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,r,i,n,a){t.eve("raphael.setViewBox",this,this._viewBox,[e,r,i,n,a]);var s,o,l=this.getSize(),h=l.width,u=l.height;return a&&(s=u/n,o=h/i,h>i*s&&(e-=(h-i*s)/2/s),u>n*o&&(r-=(u-n*o)/2/o)),this._viewBox=[e,r,i,n,!!a],this._viewBoxShift={dx:-e,dy:-r,scale:l},this.forEach(function(t){t.transform("...")}),this};var M;t._engine.initWin=function(t){var e=t.document;e.styleSheets.length<31?e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):e.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),M=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(r){M=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),r=e.container,i=e.height,n=e.width,a=e.x,s=e.y;if(!r)throw new Error("VML container not found.");var o=new t._Paper,l=o.canvas=t._g.doc.createElement("div"),h=l.style;return a=a||0,s=s||0,n=n||512,i=i||342,o.width=n,o.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),o.coordsize=1e3*b+p+1e3*b,o.coordorigin="0 0",o.span=t._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,i),1==r?(t._g.doc.body.appendChild(l),h.left=a+"px",h.top=s+"px",h.position="absolute"):r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l),o.renderfix=function(){},o},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var L=t.st;for(var z in N)N[e](z)&&!L[e](z)&&(L[z]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(z))}}),function(t,e){if("function"==typeof define&&define.amd)define("raphael",["raphael.core","raphael.svg","raphael.vml"],function(t){return e(t)});else if("object"==typeof exports){var r=require("raphael.core");require("raphael.svg"),require("raphael.vml"),module.exports=e(r)}}(this,function(t){return t.ninja()});!function(t,e){"object"==typeof module&&module.exports?module.exports=t.document?e(t):e:t.Highcharts=e(t)}("undefined"!=typeof window?window:this,function(t){function e(e,i){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(i)throw new Error(n);t.console}function i(t,e,i){this.options=e,this.elem=t,this.prop=i}function n(){var t,e,i=arguments,n={},o=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?o(t[n]||{},i):e[n]);return t};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;e>t;t++)n=o(n,i[t]);return n}function o(t,e){return parseInt(t,e||10)}function r(t){return"string"==typeof t}function s(t){return t&&"object"==typeof t}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function l(t){return"number"==typeof t}function h(t){return xe.log(t)/xe.LN10}function c(t){return xe.pow(10,t)}function d(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function p(t){return t!==N&&null!==t}function u(t,e,i){var n,o;if(r(e))p(i)?t.setAttribute(e,i):t&&t.getAttribute&&(o=t.getAttribute(e));else if(p(e)&&s(e))for(n in e)t.setAttribute(n,e[n]);return o}function f(t){return a(t)?t:[t]}function g(t,e,i){return e?setTimeout(t,e,i):void t.call(0,i)}function m(t,e){De&&!Re&&e&&e.opacity!==N&&(e.filter="alpha(opacity="+100*e.opacity+")"),ki(t.style,e)}function x(t,e,i,n,o){var r=me.createElement(t);return e&&ki(r,e),o&&m(r,{padding:0,border:"none",margin:0}),i&&m(r,i),n&&n.appendChild(r),r}function y(t,e){var i=function(){};return i.prototype=new t,ki(i.prototype,e),i}function v(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function b(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)}function k(t){return 6e4*(ee&&ee(t)||te||0)}function w(t,e){var i,n=/f$/,o=/\.([0-9])/,r=j.lang;return n.test(t)?(i=t.match(o),i=i?i[1]:-1,null!==e&&(e=ge.numberFormat(e,i,r.decimalPoint,t.indexOf(",")>-1?r.thousandsSep:""))):e=Z(t,e),e}function A(t,e){for(var i,n,o,r,s,a,l,h="{",c=!1,d=[];-1!==(l=t.indexOf(h));){if(i=t.slice(0,l),c){for(n=i.split(":"),o=n.shift().split("."),s=o.length,a=e,r=0;s>r;r++)a=a[o[r]];n.length&&(a=w(n.join(":"),a)),d.push(a)}else d.push(i);t=t.slice(l+1),c=!c,h=c?"}":"{"}return d.push(t),d.join("")}function S(t){return xe.pow(10,ve(xe.log(t)/xe.LN10))}function T(t,e,i,n,o){var r,s,a=t;for(i=wi(i,1),r=t/i,e||(e=[1,2,2.5,5,10],n===!1&&(1===i?e=[1,2,5,10]:.1>=i&&(e=[1/i]))),s=0;s<e.length&&(a=e[s],!(o&&a*i>=t||!o&&r<=(e[s]+(e[s+1]||e[s]))/2));s++);return a*=i}function P(t,e){var i,n,o=t.length;for(n=0;o>n;n++)t[n].safeI=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.safeI-n.safeI:i}),n=0;o>n;n++)delete t[n].safeI}function C(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function M(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function L(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function D(t){U||(U=x(Ue)),t&&U.appendChild(t),U.innerHTML=""}function I(t,e){return parseFloat(t.toPrecision(e||14))}function B(t,e){e.renderer.globalAnimation=wi(t,e.animation)}function O(){var e=j.global,i=e.useUTC,n=i?"getUTC":"get",o=i?"setUTC":"set";J=e.Date||t.Date,te=i&&e.timezoneOffset,ee=i&&e.getTimezoneOffset,Q=function(t,e,n,o,r,s){var a;return i?(a=J.UTC.apply(0,arguments),a+=k(a)):a=new J(t,e,wi(n,1),wi(o,0),wi(r,0),wi(s,0)).getTime(),a},ie=n+"Minutes",ne=n+"Hours",oe=n+"Day",re=n+"Date",se=n+"Month",ae=n+"FullYear",le=o+"Milliseconds",he=o+"Seconds",ce=o+"Minutes",de=o+"Hours",pe=o+"Date",ue=o+"Month",fe=o+"FullYear"}function z(t){return j=n(!0,j,t),O(),j}function E(){return j}function R(t){return this instanceof R?void this.init(t):new R(t)}function W(){}function H(t,e){var i=me.getElementsByTagName("head")[0],n=me.createElement("script");n.type="text/javascript",n.src=t,n.onload=e,i.appendChild(n)}function X(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function G(t,e,i,n,o){var r=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=o,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:e.align||(r?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":i?"bottom":"top"),y:wi(e.y,r?4:i?14:-6),x:wi(e.x,r?i?-6:6:0)},this.textAlign=e.textAlign||(r?i?"right":"left":"center")}function Y(t){var e=t.options,i=e.navigator,n=i.enabled,o=e.scrollbar,r=o.enabled,s=n?i.height:0,a=r?o.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=t,this.setBaseSeries(),this.height=s,this.scrollbarHeight=a,this.scrollbarEnabled=r,this.navigatorEnabled=n,this.navigatorOptions=i,this.scrollbarOptions=o,this.outlineHeight=s+a,this.init()}function F(t){this.init(t)}var N,V,_,U,j,Z,K,q,$,J,Q,te,ee,ie,ne,oe,re,se,ae,le,he,ce,de,pe,ue,fe,ge,me=t.document,xe=Math,ye=xe.round,ve=xe.floor,be=xe.ceil,ke=xe.max,we=xe.min,Ae=xe.abs,Se=xe.cos,Te=xe.sin,Pe=xe.PI,Ce=2*Pe/360,Me=t.navigator&&t.navigator.userAgent||"",Le=t.opera,De=/(msie|trident|edge)/i.test(Me)&&!Le,Ie=me&&8===me.documentMode,Be=!De&&/AppleWebKit/.test(Me),Oe=/Firefox/.test(Me),ze=/(Mobile|Android|Windows Phone)/.test(Me),Ee="http://www.w3.org/2000/svg",Re=me&&me.createElementNS&&!!me.createElementNS(Ee,"svg").createSVGRect,We=Oe&&parseInt(Me.split("Firefox/")[1],10)<4,He=me&&!Re&&!De&&!!me.createElement("canvas").getContext,Xe={},Ge=0,Ye=function(){},Fe=[],Ne=0,Ve="Highstock",_e="4.2.3",Ue="div",je="absolute",Ze="relative",Ke="hidden",qe="highcharts-",$e="visible",Je="px",Qe="none",ti="M",ei="L",ii=/^[0-9]+$/,ni="",oi="hover",ri="select",si=["plotTop","marginRight","marginBottom","plotLeft"],ai="stroke-width",li={};ge=t.Highcharts?e(16,!0):{win:t},ge.seriesTypes=li;var hi,ci,di,pi,ui,fi,gi,mi,xi,yi,vi,bi=[];i.prototype={dSetter:function(){var t,e=this.paths[0],i=this.paths[1],n=[],o=this.now,r=e.length;if(1===o)n=this.toD;else if(r===i.length&&1>o)for(;r--;)t=parseFloat(e[r]),n[r]=isNaN(t)?e[r]:o*parseFloat(i[r]-t)+t;else n=i;this.elem.attr("d",n)},update:function(){var t=this.elem,e=this.prop,i=this.now,n=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,i):t.style[e]=i+this.unit,n&&n.call(t,i,this)},run:function(t,e,i){var n,o=this,r=function(t){return r.stopped?!1:o.step(t)};this.startTime=+new J,this.start=t,this.end=e,this.unit=i,this.now=this.start,this.pos=0,r.elem=this.elem,r()&&1===bi.push(r)&&(r.timerId=setInterval(function(){for(n=0;n<bi.length;n++)bi[n]()||bi.splice(n--,1);bi.length||clearInterval(r.timerId)},13))},step:function(t){var e,i,n,o=+new J,r=this.options,s=this.elem,a=r.complete,l=r.duration,h=r.curAnim;if(s.attr&&!s.element)e=!1;else if(t||o>=l+this.startTime){this.now=this.end,this.pos=1,this.update(),h[this.prop]=!0,i=!0;for(n in h)h[n]!==!0&&(i=!1);i&&a&&a.call(s),e=!1}else this.pos=r.easing((o-this.startTime)/l),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0;return e},initPath:function(t,e,i){e=e||"";var n,o,r,s=t.shift,a=e.indexOf("C")>-1,l=a?7:3,h=e.split(" "),c=[].concat(i),d=t.isArea,p=d?2:1,u=function(t){for(r=t.length;r--;)(t[r]===ti||t[r]===ei)&&t.splice(r+1,0,t[r+1],t[r+2],t[r+1],t[r+2])};if(a&&(u(h),u(c)),s<=c.length/l&&h.length===c.length)for(;s--;)c=c.slice(0,l).concat(c),d&&(c=c.concat(c.slice(c.length-l)));if(t.shift=0,h.length)for(n=c.length;h.length<n;)o=h.slice().splice(h.length/p-l,l*p),a&&(o[l-6]=o[l-2],o[l-5]=o[l-1]),[].splice.apply(h,[h.length/p,0].concat(o));return[h,c]}};var ki=ge.extend=function(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t},wi=ge.pick=function(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],e!==N&&null!==e)return e},Ai=ge.wrap=function(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}};Z=function(t,e,i){if(!p(e)||isNaN(e))return j.lang.invalidDate||"";t=wi(t,"%Y-%m-%d %H:%M:%S");var n,o=new J(e-k(e)),r=o[ne](),s=o[oe](),a=o[re](),l=o[se](),h=o[ae](),c=j.lang,d=c.weekdays,u=ki({a:d[s].substr(0,3),A:d[s],d:v(a),e:a,w:s,b:c.shortMonths[l],B:c.months[l],m:v(l+1),y:h.toString().substr(2,2),Y:h,H:v(r),k:r,I:v(r%12||12),l:r%12||12,M:v(o[ie]()),p:12>r?"AM":"PM",P:12>r?"am":"pm",S:v(o.getSeconds()),L:v(ye(e%1e3),3)},ge.dateFormats);for(n in u)for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof u[n]?u[n](e):u[n]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t},q={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ge.numberFormat=function(t,e,i,n){t=+t||0;var r,s,a,l,h=j.lang,c=(t.toString().split(".")[1]||"").length,d=Math.abs(t);return-1===e?e=Math.min(c,20):isNaN(e)&&(e=2),s=String(o(d.toFixed(e))),a=s.length>3?s.length%3:0,i=wi(i,h.decimalPoint),n=wi(n,h.thousandsSep),l=0>t?"-":"",l+=a?s.substr(0,a)+n:"",l+=s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+n),+e&&(r=Math.abs(d-s+Math.pow(10,-Math.max(e,c)-1)),l+=i+r.toFixed(e).slice(2)),l},Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},hi=function(e,i){var n;return"width"===i?Math.min(e.offsetWidth,e.scrollWidth)-hi(e,"padding-left")-hi(e,"padding-right"):"height"===i?Math.min(e.offsetHeight,e.scrollHeight)-hi(e,"padding-top")-hi(e,"padding-bottom"):(n=t.getComputedStyle(e,void 0),n&&o(n.getPropertyValue(i)))},ci=function(t,e){return e.indexOf?e.indexOf(t):[].indexOf.call(e,t)},pi=function(t,e){return[].filter.call(t,e)},fi=function(t,e){for(var i=[],n=0,o=t.length;o>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},ui=function(e){var i=me.documentElement,n=e.getBoundingClientRect();return{top:n.top+(t.pageYOffset||i.scrollTop)-(i.clientTop||0),left:n.left+(t.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}},vi=function(t){for(var e=bi.length;e--;)bi[e].elem===t&&(bi[e].stopped=!0)},di=function(t,e){return Array.prototype.forEach.call(t,e)},gi=function(e,i,n){function o(i){i.target=i.srcElement||t,n.call(e,i)}var r=e.hcEvents=e.hcEvents||{};e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent&&(e.hcEventsIE||(e.hcEventsIE={}),e.hcEventsIE[n.toString()]=o,e.attachEvent("on"+i,o)),r[i]||(r[i]=[]),r[i].push(n)},mi=function(t,e,i){function n(e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&(i=t.hcEventsIE[i.toString()],t.detachEvent("on"+e,i))}function o(){var i,o,r;if(t.nodeName){e?(i={},i[e]=!0):i=a;for(r in i)if(a[r])for(o=a[r].length;o--;)n(r,a[r][o])}}var r,s,a=t.hcEvents;a&&(e?(r=a[e]||[],i?(s=ci(i,r),s>-1&&(r.splice(s,1),a[e]=r),n(e,i)):(o(),a[e]=[])):(o(),t.hcEvents={}))},xi=function(t,e,i,n){var o,r,s,a,l,h,c=t.hcEvents;if(i=i||{},me.createEvent&&(t.dispatchEvent||t.fireEvent))o=me.createEvent("Events"),o.initEvent(e,!0,!0),o.target=t,ki(o,i),t.dispatchEvent?t.dispatchEvent(o):t.fireEvent(e,o);else if(c)for(r=c[e]||[],s=r.length,l=function(){i.defaultPrevented=!0},a=0;s>a;a++){if(h=r[a],i.stopped)return;i.preventDefault=l,i.target=t,i.type||(i.type=e),h.call(t,i)===!1&&i.preventDefault()}n&&!i.defaultPrevented&&n(i)},yi=function(t,e,o){var r,a,h,c,d,p="";s(o)||(c=arguments,o={duration:c[2],easing:c[3],complete:c[4]}),l(o.duration)||(o.duration=400),o.easing=Math[o.easing]||Math.easeInOutSine,o.curAnim=n(e);for(d in e)h=new i(t,o,d),a=null,"d"===d?(h.paths=h.initPath(t,t.d,e.d),h.toD=e.d,r=0,a=1):t.attr?r=t.attr(d):(r=parseFloat(hi(t,d))||0,"opacity"!==d&&(p="px")),a||(a=e[d]),a.match&&a.match("px")&&(a=a.replace(/px/g,"")),h.run(r,a,p)},t.jQuery&&(t.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);return this[0]?t[0]?(new(ge[r(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):Fe[u(this[0],"data-highcharts-chart")]:void 0}),me&&!me.defaultView&&(hi=function(t,e){var i,n={width:"clientWidth",height:"clientHeight"}[e];return t.style[e]?o(t.style[e]):("opacity"===e&&(e="filter"),n?(t.style.zoom=1,t[n]-2*hi(t,"padding")):(i=t.currentStyle[e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})],"filter"===e&&(i=i.replace(/alpha\(opacity=([0-9]+)\)/,function(t,e){return e/100})),""===i?1:o(i)))}),Array.prototype.forEach||(di=function(t,e){for(var i=0,n=t.length;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i}),Array.prototype.indexOf||(ci=function(t,e){var i,n=0;if(e)for(i=e.length;i>n;n++)if(e[n]===t)return n;return-1}),Array.prototype.filter||(pi=function(t,e){for(var i=[],n=0,o=t.length;o>n;n++)e(t[n],n)&&i.push(t[n]);return i}),ge.Fx=i,ge.inArray=ci,ge.each=di,ge.grep=pi,ge.offset=ui,ge.map=fi,ge.addEvent=gi,ge.removeEvent=mi,ge.fireEvent=xi,ge.animate=yi,ge.stop=vi,j={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/4.2.3/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":ge.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:je,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:je,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:Ze,top:"45%"},style:{position:je,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Re,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:ze?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Si=j.plotOptions,Ti=Si.line;O(),R.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[o(t[1]),o(t[2]),o(t[3]),parseFloat(t[4],10)]}},{regex:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[o(t[1],16),o(t[2],16),o(t[3],16),1]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[o(t[1]),o(t[2]),o(t[3]),1]}}],init:function(t){var e,i,n,o;if(this.input=t,t&&t.stops)this.stops=fi(t.stops,function(t){return new R(t[1])});else for(n=this.parsers.length;n--&&!i;)o=this.parsers[n],e=o.regex.exec(t),e&&(i=o.parse(e));this.rgba=i||[]},get:function(t){var e,i=this.input,o=this.rgba;return this.stops?(e=n(i),e.stops=[].concat(e.stops),di(this.stops,function(i,n){e.stops[n]=[e.stops[n][0],i.get(t)]})):e=o&&!isNaN(o[0])?"rgb"===t||!t&&1===o[3]?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===t?o[3]:"rgba("+o.join(",")+")":i,e},brighten:function(t){var e,i=this.rgba;if(this.stops)di(this.stops,function(e){e.brighten(t)});else if(l(t)&&0!==t)for(e=0;3>e;e++)i[e]+=o(255*t),i[e]<0&&(i[e]=0),i[e]>255&&(i[e]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this}},W.prototype={opacity:1,textProps:["direction","fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(t,e){var i=this;i.element="span"===e?x(e):me.createElementNS(Ee,e),i.renderer=t},animate:function(t,e,i){var o=wi(e,this.renderer.globalAnimation,!0);return vi(this),o?(o=n(o,{}),i&&(o.complete=i),yi(this,t,o)):this.attr(t,null,i),this},colorGradient:function(t,e,i){var o,r,s,l,h,c,d,u,f,g,m,x,y,v=this.renderer,b=[];if(t.linearGradient?r="linearGradient":t.radialGradient&&(r="radialGradient"),r){s=t[r],h=v.gradients,d=t.stops,g=i.radialReference,a(s)&&(t[r]=s={x1:s[0],y1:s[1],x2:s[2],y2:s[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===r&&g&&!p(s.gradientUnits)&&(l=s,s=n(s,v.getRadialAttr(g,l),{gradientUnits:"userSpaceOnUse"}));for(m in s)"id"!==m&&b.push(m,s[m]);for(m in d)b.push(d[m]);b=b.join(","),h[b]?x=h[b].attr("id"):(s.id=x=qe+Ge++,h[b]=c=v.createElement(r).attr(s).add(v.defs),c.radAttr=l,c.stops=[],di(d,function(t){var e;0===t[1].indexOf("rgba")?(o=R(t[1]),u=o.get("rgb"),f=o.get("a")):(u=t[1],f=1),e=v.createElement("stop").attr({offset:t[0],"stop-color":u,"stop-opacity":f}).add(c),c.stops.push(e)})),y="url("+v.url+"#"+x+")",i.setAttribute(e,y),i.gradient=b,t.toString=function(){return y}}},applyTextShadow:function(t){var e,i=this.element,n=-1!==t.indexOf("contrast"),r={},s=this.renderer.forExport,a=s||i.style.textShadow!==N&&!De;n&&(r.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(i.style.fill))),(Be||s)&&(r.textRendering="geometricPrecision"),a?this.css(r):(this.fakeTS=!0,this.ySetter=this.xSetter,e=[].slice.call(i.getElementsByTagName("tspan")),di(t.split(/\s?,\s?/g),function(t){var n,r,s=i.firstChild;t=t.split(" "),n=t[t.length-1],r=t[t.length-2],r&&di(e,function(t,e){var a;0===e&&(t.setAttribute("x",i.getAttribute("x")),e=i.getAttribute("y"),t.setAttribute("y",e||0),null===e&&i.setAttribute("y",0)),a=t.cloneNode(1),u(a,{"class":qe+"text-shadow",fill:n,stroke:n,"stroke-opacity":1/ke(o(r),3),"stroke-width":r,"stroke-linejoin":"round"}),i.insertBefore(a,s)})}))},attr:function(t,e,i){var n,o,r,s,a,l=this.element,h=this;if("string"==typeof t&&e!==N&&(n=t,t={},t[n]=e),"string"==typeof t)h=(this[t+"Getter"]||this._defaultGetter).call(this,t,l);else{for(n in t)o=t[n],s=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(r||(this.symbolAttr(t),r=!0),s=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),s||(a=this[n+"Setter"]||this._defaultSetter,a.call(this,o,n,l),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,o,a));this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return i&&i(),h},updateShadows:function(t,e,i){for(var n=this.shadows,o=n.length;o--;)i.call(null,"height"===t?Math.max(e-(n[o].cutHeight||0),0):"d"===t?this.d:e,t,n[o])},addClass:function(t){var e=this.element,i=u(e,"class")||"";return-1===i.indexOf(t)&&u(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;di(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=wi(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Qe)},crisp:function(t){var e,i,n=this,o={},r=n.strokeWidth||0;i=ye(r)%2/2,t.x=ve(t.x||n.x||0)+i,t.y=ve(t.y||n.y||0)+i,t.width=ve((t.width||n.width||0)-2*i),t.height=ve((t.height||n.height||0)-2*i),t.strokeWidth=r;for(e in t)n[e]!==t[e]&&(n[e]=o[e]=t[e]);return o},css:function(t){var e,i,n,r=this,s=r.styles,a={},l=r.element,h="",c=!s;if(t&&t.color&&(t.fill=t.color),s)for(i in t)t[i]!==s[i]&&(a[i]=t[i],c=!0);if(c){if(e=r.textWidth=t&&t.width&&"text"===l.nodeName.toLowerCase()&&o(t.width)||r.textWidth,s&&(t=ki(s,a)),r.styles=t,e&&(He||!Re&&r.renderer.forExport)&&delete t.width,De&&!Re)m(r.element,t);else{n=function(t,e){return"-"+e.toLowerCase()};for(i in t)h+=i.replace(/([A-Z])/g,n)+":"+t[i]+";";u(l,"style",h)}e&&r.added&&r.renderer.buildText(r)}return r},on:function(t,e){var i=this,n=i.element;return _&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=J.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===Me.indexOf("Android")||J.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;return t.inverted=!0,t.updateTransform(),t},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,o=e.scaleX,r=e.scaleY,s=e.inverted,a=e.rotation,l=e.element;s&&(i+=e.attr("width"),n+=e.attr("height")),t=["translate("+i+","+n+")"],s?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(l.getAttribute("x")||0)+" "+(l.getAttribute("y")||0)+")"),(p(o)||p(r))&&t.push("scale("+wi(o,1)+" "+wi(r,1)+")"),t.length&&l.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,o,s,a,l,h={},c=this.renderer,p=c.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,(!i||r(i))&&(this.alignTo=l=i||"renderer",d(p,this),p.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,l=this.alignTo),i=wi(i,c[l],c),n=t.align,o=t.verticalAlign,s=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),("right"===n||"center"===n)&&(s+=(i.width-(t.width||0))/{right:1,center:2}[n]),h[e?"translateX":"x"]=ye(s),("bottom"===o||"middle"===o)&&(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[o]||1)),h[e?"translateY":"y"]=ye(a),this[this.placed?"animate":"attr"](h),this.placed=!0,this.alignAttr=h,this},getBBox:function(t,e){var i,n,o,r,s,a,l,h,c=this,d=c.renderer,p=c.element,u=c.styles,f=c.textStr,g=p.style,m=d.cache,x=d.cacheKeys;if(r=wi(e,c.rotation),s=r*Ce,f!==N&&(h=["",r||0,u&&u.fontSize,p.style.width].join(","),h=""===f||ii.test(f)?"num:"+f.toString().length+h:f+h),h&&!t&&(i=m[h]),!i){if(p.namespaceURI===Ee||d.forExport){try{l=this.fakeTS&&function(t){di(p.querySelectorAll("."+qe+"text-shadow"),function(e){e.style.display=t})},Oe&&g.textShadow?(a=g.textShadow,g.textShadow=""):l&&l(Qe),i=p.getBBox?ki({},p.getBBox()):{width:p.offsetWidth,height:p.offsetHeight},a?g.textShadow=a:l&&l("")}catch(y){}(!i||i.width<0)&&(i={width:0,height:0})}else i=c.htmlGetBBox();if(d.isSVG&&(n=i.width,o=i.height,De&&u&&"11px"===u.fontSize&&"16.9"===o.toPrecision(3)&&(i.height=o=14),r&&(i.width=Ae(o*Te(s))+Ae(n*Se(s)),i.height=Ae(o*Se(s))+Ae(n*Te(s)))),h){for(;x.length>250;)delete m[x.shift()];m[h]||x.push(h),m[h]=i}}return i},show:function(t){return this.attr({visibility:t?"inherit":$e})},hide:function(){return this.attr({visibility:Ke})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i=this.renderer,n=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,o=n.element||{},r=n.shadows,s=n.renderer.isSVG&&"SPAN"===o.nodeName&&n.parentGroup;if(o.onclick=o.onmouseout=o.onmouseover=o.onmousemove=o.point=null,vi(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(o),r&&di(r,function(t){n.safeRemoveChild(t)});s&&s.div&&0===s.div.childNodes.length;)t=s.parentGroup,n.safeRemoveChild(s.div),delete s.div,s=t;n.alignTo&&d(n.renderer.alignedObjects,n);for(e in n)delete n[e];return null},shadow:function(t,e,i){var n,o,r,s,a,l,h=[],c=this.element;if(t){for(s=wi(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+wi(t.offsetX,1)+", "+wi(t.offsetY,1)+")",n=1;s>=n;n++)o=c.cloneNode(0),r=2*s+1-2*n,u(o,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":r,transform:"translate"+l,fill:Qe}),i&&(u(o,"height",ke(u(o,"height")-r,0)),o.cutHeight=r),e?e.element.appendChild(o):c.parentNode.insertBefore(o,c),h.push(o);this.shadows=h}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){var e=wi(this[t],this.element?this.element.getAttribute(t):null,0);return/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=o(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=me.createElementNS(Ee,"title"),this.element.appendChild(e)),e.appendChild(me.createTextNode(String(wi(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},visibilitySetter:function(t,e,i){"inherit"===t?i.removeAttribute(e):i.setAttribute(e,t)},zIndexSetter:function(t,e){var i,n,r,s,a,l=this.renderer,h=this.parentGroup,c=h||l,d=c.element||l.box,f=this.element,g=this.added;if(p(t)&&(f.setAttribute(e,t),t=+t,this[e]===t&&(g=!1),this[e]=t),g){for(t=this.zIndex,t&&h&&(h.handleZ=!0),i=d.childNodes,a=0;a<i.length&&!s;a++)n=i[a],r=u(n,"zIndex"),n!==f&&(o(r)>t||!p(t)&&p(r))&&(d.insertBefore(f,n),s=!0);s||d.appendChild(f)}return s},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}},W.prototype.yGetter=W.prototype.xGetter,W.prototype.translateXSetter=W.prototype.translateYSetter=W.prototype.rotationSetter=W.prototype.verticalAlignSetter=W.prototype.scaleXSetter=W.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},W.prototype["stroke-widthSetter"]=W.prototype.strokeSetter=function(t,e,i){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],W.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)};var Pi=function(){this.init.apply(this,arguments)};Pi.prototype={Element:W,init:function(e,i,n,o,r,s){var a,l,h,c=this;a=c.createElement("svg").attr({version:"1.1"}).css(this.getStyle(o)),l=a.element,e.appendChild(l),-1===e.innerHTML.indexOf("xmlns")&&u(l,"xmlns",Ee),c.isSVG=!0,c.box=l,c.boxWrapper=a,c.alignedObjects=[],c.url=(Oe||Be)&&me.getElementsByTagName("base").length?t.location.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",h=this.createElement("desc").add(),h.element.appendChild(me.createTextNode("Created with "+Ve+" "+_e)),c.defs=this.createElement("defs").add(),c.allowHTML=s,c.forExport=r,c.gradients={},c.cache={},c.cacheKeys=[],c.imgCount=0,c.setSize(i,n,!1);var d,p;Oe&&e.getBoundingClientRect&&(c.subPixelFix=d=function(){m(e,{left:0,top:0}),p=e.getBoundingClientRect(),m(e,{left:be(p.left)-p.left+Je,top:be(p.top)-p.top+Je})},d(),gi(t,"resize",d))},getStyle:function(t){return this.style=ki({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t),this.style},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,i=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),L(e.gradients||{}),e.gradients=null,i&&(e.defs=i.destroy()),e.subPixelFix&&mi(t,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},buildText:function(t){for(var e,i,n,r=t.element,s=this,a=s.forExport,l=wi(t.textStr,"").toString(),h=-1!==l.indexOf("<"),c=r.childNodes,d=u(r,"x"),p=t.styles,f=t.textWidth,g=p&&p.lineHeight,x=p&&p.textShadow,y=p&&"ellipsis"===p.textOverflow,v=c.length,b=f&&!t.added&&this.box,k=function(t){return g?o(g):s.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:p&&p.fontSize||s.style.fontSize||12,t).h},w=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")};v--;)r.removeChild(c[v]);h||x||y||-1!==l.indexOf(" ")?(i=/<.*style="([^"]+)".*>/,n=/<.*href="(http[^"]+)".*>/,b&&b.appendChild(r),e=h?l.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[l],""===e[e.length-1]&&e.pop(),di(e,function(e,o){var l,h=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=e.split("|||"),di(l,function(e){if(""!==e||1===l.length){var c,g={},x=me.createElementNS(Ee,"tspan");if(i.test(e)&&(c=e.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),u(x,"style",c)),n.test(e)&&!a&&(u(x,"onclick",'location.href="'+e.match(n)[1]+'"'),m(x,{cursor:"pointer"})),e=w(e.replace(/<(.|\n)*?>/g,"")||" ")," "!==e){if(x.appendChild(me.createTextNode(e)),h?g.dx=0:o&&null!==d&&(g.x=d),u(x,g),r.appendChild(x),!h&&o&&(!Re&&a&&m(x,{display:"block"}),u(x,"dy",k(x))),f){for(var v,b,A,S,T=e.replace(/([^\^])-/g,"$1- ").split(" "),P=l.length>1||o||T.length>1&&"nowrap"!==p.whiteSpace,C=[],M=k(x),L=1,D=t.rotation,I=e,B=I.length;(P||y)&&(T.length||C.length);)t.rotation=0,S=t.getBBox(!0),A=S.width,!Re&&s.forExport&&(A=s.measureSpanWidth(x.firstChild.data,t.styles)),v=A>f,void 0===b&&(b=v),y&&b?(B/=2,""===I||!v&&.5>B?T=[]:(v&&(b=!0),I=e.substring(0,I.length+(v?-1:1)*be(B)),T=[I+(f>3?"…":"")],x.removeChild(x.firstChild))):v&&1!==T.length?(x.removeChild(x.firstChild),C.unshift(T.pop())):(T=C,C=[],T.length&&(L++,x=me.createElementNS(Ee,"tspan"),u(x,{dy:M,x:d}),c&&u(x,"style",c),r.appendChild(x)),A>f&&(f=A)),T.length&&x.appendChild(me.createTextNode(T.join(" ").replace(/- /g,"-")));b&&t.attr("title",t.textStr),t.rotation=D}h++}}})}),b&&b.removeChild(r),x&&t.applyTextShadow&&t.applyTextShadow(x)):r.appendChild(me.createTextNode(w(l)))},getContrast:function(t){return t=R(t).rgba,t[0]+t[1]+t[2]>384?"#000000":"#FFFFFF"
},button:function(t,e,i,o,r,s,a,l,h){var c,d,p,u,f,g,m=this.label(t,e,i,h,null,null,null,null,"button"),x=0,y={x1:0,y1:0,x2:0,y2:1};return r=n({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:y,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r),p=r.style,delete r.style,s=n(r,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#FFF"],[1,"#ACF"]]}},s),u=s.style,delete s.style,a=n(r,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),f=a.style,delete a.style,l=n(r,{style:{color:"#CCC"}},l),g=l.style,delete l.style,gi(m.element,De?"mouseover":"mouseenter",function(){3!==x&&m.attr(s).css(u)}),gi(m.element,De?"mouseout":"mouseleave",function(){3!==x&&(c=[r,s,a][x],d=[p,u,f][x],m.attr(c).css(d))}),m.setState=function(t){m.state=x=t,t?2===t?m.attr(a).css(f):3===t&&m.attr(l).css(g):m.attr(r).css(p)},m.on("click",function(t){3!==x&&o.call(m,t)}).attr(r).css(ki({cursor:"default"},p))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=ye(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=ye(t[2])+e%2/2),t},path:function(t){var e={fill:Qe};return a(t)?e.d=t:s(t)&&ki(e,t),this.createElement("path").attr(e)},circle:function(t,e,i){var n=s(t)?t:{x:t,y:e,r:i},o=this.createElement("circle");return o.xSetter=o.ySetter=function(t,e,i){i.setAttribute("c"+e,t)},o.attr(n)},arc:function(t,e,i,n,o,r){var a;return s(t)&&(e=t.y,i=t.r,n=t.innerR,o=t.start,r=t.end,t=t.x),a=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:o||0,end:r||0}),a.r=i,a},rect:function(t,e,i,n,o,r){o=s(t)?t.r:o;var a=this.createElement("rect"),l=s(t)?t:t===N?{}:{x:t,y:e,width:ke(i,0),height:ke(n,0)};return r!==N&&(a.strokeWidth=r,l=a.crisp(l)),o&&(l.r=o),a.rSetter=function(t,e,i){u(i,{rx:t,ry:t})},a.attr(l)},setSize:function(t,e,i){var n=this,o=n.alignedObjects,r=o.length;for(n.width=t,n.height=e,n.boxWrapper[wi(i,!0)?"animate":"attr"]({width:t,height:e});r--;)o[r].align()},g:function(t){var e=this.createElement("g");return p(t)?e.attr({"class":qe+t}):e},image:function(t,e,i,n,o){var r,s={preserveAspectRatio:Qe};return arguments.length>1&&ki(s,{x:e,y:i,width:n,height:o}),r=this.createElement("image").attr(s),r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):r.element.setAttribute("hc-svg-href",t),r},symbol:function(t,e,i,n,o,r){var s,a,l,h,c=this,d=this.symbols[t],p=d&&d(ye(e),ye(i),n,o,r),u=/^url\((.*?)\)$/;return p?(s=this.path(p),ki(s,{symbolName:t,x:e,y:i,width:n,height:o}),r&&ki(s,r)):u.test(t)&&(h=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(ye((n-e[0])/2),ye((o-e[1])/2)))},a=t.match(u)[1],l=Xe[a]||r&&r.width&&r.height&&[r.width,r.height],s=this.image(a).attr({x:e,y:i}),s.isImg=!0,l?h(s,l):(s.attr({width:0,height:0}),x("img",{onload:function(){0===this.width&&(m(this,{position:je,top:"-999em"}),me.body.appendChild(this)),h(s,Xe[a]=[this.width,this.height]),this.parentNode&&this.parentNode.removeChild(this),c.imgCount--,c.imgCount||Fe[c.chartIndex].onload()},src:a})),this.imgCount++),s},symbols:{circle:function(t,e,i,n){var o=.166*i;return[ti,t+i/2,e,"C",t+i+o,e,t+i+o,e+n,t+i/2,e+n,"C",t-o,e+n,t-o,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[ti,t,e,ei,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[ti,t+i/2,e,ei,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[ti,t,e,ei,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[ti,t+i/2,e,ei,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,o){var r=o.start,s=o.r||i||n,a=o.end-.001,l=o.innerR,h=o.open,c=Se(r),d=Te(r),p=Se(a),u=Te(a),f=o.end-r<Pe?0:1;return[ti,t+s*c,e+s*d,"A",s,s,0,f,1,t+s*p,e+s*u,h?ti:ei,t+l*p,e+l*u,"A",l,l,0,f,0,t+l*c,e+l*d,h?"":"Z"]},callout:function(t,e,i,n,o){var r,s=6,a=6,l=we(o&&o.r||0,i,n),h=l+a,c=o&&o.anchorX,d=o&&o.anchorY;return r=["M",t+l,e,"L",t+i-l,e,"C",t+i,e,t+i,e,t+i,e+l,"L",t+i,e+n-l,"C",t+i,e+n,t+i,e+n,t+i-l,e+n,"L",t+l,e+n,"C",t,e+n,t,e+n,t,e+n-l,"L",t,e+l,"C",t,e,t,e,t+l,e],c&&c>i&&d>e+h&&e+n-h>d?r.splice(13,3,"L",t+i,d-a,t+i+s,d,t+i,d+a,t+i,e+n-l):c&&0>c&&d>e+h&&e+n-h>d?r.splice(33,3,"L",t,d+a,t-s,d,t,d-a,t,e+l):d&&d>n&&c>t+h&&t+i-h>c?r.splice(23,3,"L",c+a,e+n,c,e+n+s,c-a,e+n,t+l,e+n):d&&0>d&&c>t+h&&t+i-h>c&&r.splice(3,3,"L",c-a,e,c,e-s,c+a,e,i-l,e),r}},clipRect:function(t,e,i,n){var o,r=qe+Ge++,s=this.createElement("clipPath").attr({id:r}).add(this.defs);return o=this.rect(t,e,i,n,0).add(s),o.id=r,o.clipPath=s,o.count=0,o},text:function(t,e,i,n){var o,r=this,s=He||!Re&&r.forExport,a={};return!n||!r.allowHTML&&r.forExport?(a.x=Math.round(e||0),i&&(a.y=Math.round(i)),(t||0===t)&&(a.text=t),o=r.createElement("text").attr(a),s&&o.css({position:je}),n||(o.xSetter=function(t,e,i){var n,o,r=i.getElementsByTagName("tspan"),s=i.getAttribute(e);for(o=0;o<r.length;o++)n=r[o],n.getAttribute(e)===s&&n.setAttribute(e,t);i.setAttribute(e,t)}),o):r.html(t,e,i)},fontMetrics:function(e,i){var n,r,s;return e=e||this.style.fontSize,!e&&i&&t.getComputedStyle&&(i=i.element||i,s=t.getComputedStyle(i,""),e=s&&s.fontSize),e=/px/.test(e)?o(e):/em/.test(e)?12*parseFloat(e):12,n=24>e?e+3:ye(1.2*e),r=ye(.8*n),{h:n,b:r,f:e}},rotCorr:function(t,e,i){var n=t;return e&&i&&(n=ke(n*Se(e*Ce),4)),{x:-t/3*Te(e*Ce),y:n}},label:function(t,e,i,o,r,s,a,l,h){var c,d,u,f,g,m,x,y,v,b,k,w=this,A=w.g(h),S=w.text("",0,0,a).attr({zIndex:1}),T=0,P=3,C=0,M=0,L={};v=function(){var t,e,i=S.element.style;d=(void 0===u||void 0===f||A.styles.textAlign)&&p(S.textStr)&&S.getBBox(),A.width=(u||d.width||0)+2*P+C,A.height=(f||d.height||0)+2*P,x=P+w.fontMetrics(i&&i.fontSize,S).b,y&&(c||(t=M,e=(l?-x:0)+M,A.box=c=o?w.symbol(o,t,e,A.width,A.height,L):w.rect(t,e,A.width,A.height,0,L[ai]),c.isImg||c.attr("fill",Qe),c.add(A)),c.isImg||c.attr(ki({width:ye(A.width),height:ye(A.height)},L)),L=null)},b=function(){var t,e=A.styles,i=e&&e.textAlign,n=C+P;t=l?0:x,p(u)&&d&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(u-d.width)),(n!==S.x||t!==S.y)&&(S.attr("x",n),t!==N&&S.attr("y",t)),S.x=n,S.y=t},k=function(t,e){c?c.attr(t,e):L[t]=e},A.onAdd=function(){S.add(A),A.attr({text:t||0===t?t:"",x:e,y:i}),c&&p(r)&&A.attr({anchorX:r,anchorY:s})},A.widthSetter=function(t){u=t},A.heightSetter=function(t){f=t},A.paddingSetter=function(t){p(t)&&t!==P&&(P=A.padding=t,b())},A.paddingLeftSetter=function(t){p(t)&&t!==C&&(C=t,b())},A.alignSetter=function(t){t={left:0,center:.5,right:1}[t],t!==T&&(T=t,d&&A.attr({x:e}))},A.textSetter=function(t){t!==N&&S.textSetter(t),v(),b()},A["stroke-widthSetter"]=function(t,e){t&&(y=!0),M=t%2/2,k(e,t)},A.strokeSetter=A.fillSetter=A.rSetter=function(t,e){"fill"===e&&t&&(y=!0),k(e,t)},A.anchorXSetter=function(t,e){r=t,k(e,ye(t)-M-g)},A.anchorYSetter=function(t,e){s=t,k(e,t-m)},A.xSetter=function(t){A.x=t,T&&(t-=T*((u||d.width)+2*P)),g=ye(t),A.attr("translateX",g)},A.ySetter=function(t){m=A.y=ye(t),A.attr("translateY",m)};var D=A.css;return ki(A,{css:function(t){if(t){var e={};t=n(t),di(A.textProps,function(i){t[i]!==N&&(e[i]=t[i],delete t[i])}),S.css(e)}return D.call(A,t)},getBBox:function(){return{width:d.width+2*P,height:d.height+2*P,x:d.x-P,y:d.y-P}},shadow:function(t){return c&&c.shadow(t),A},destroy:function(){mi(A.element,"mouseenter"),mi(A.element,"mouseleave"),S&&(S=S.destroy()),c&&(c=c.destroy()),W.prototype.destroy.call(A),A=w=v=b=k=null}})}},V=Pi,ki(W.prototype,{htmlCss:function(t){var e=this,i=e.element,n=t&&"SPAN"===i.tagName&&t.width;return n&&(delete t.width,e.textWidth=n,e.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),e.styles=ki(e.styles,t),m(e.element,t),e},htmlGetBBox:function(){var t=this,e=t.element;return"text"===e.nodeName&&(e.style.position=je),{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var t=this,e=t.renderer,i=t.element,n=t.translateX||0,r=t.translateY||0,s=t.x||0,a=t.y||0,l=t.textAlign||"left",h={left:0,center:.5,right:1}[l],c=t.shadows,d=t.styles;if(m(i,{marginLeft:n,marginTop:r}),c&&di(c,function(t){m(t,{marginLeft:n+1,marginTop:r+1})}),t.inverted&&di(i.childNodes,function(t){e.invertChild(t,i)}),"SPAN"===i.tagName){var u,f=t.rotation,g=o(t.textWidth),x=d&&d.whiteSpace,y=[f,l,i.innerHTML,t.textWidth,t.textAlign].join(",");y!==t.cTT&&(u=e.fontMetrics(i.style.fontSize).b,p(f)&&t.setSpanRotation(f,h,u),i.offsetWidth>g&&/[ \-]/.test(i.textContent||i.innerText)?(m(i,{width:g+Je,display:"block",whiteSpace:x||"normal"}),t.hasTextWidth=!0):t.hasTextWidth&&(m(i,{width:"",display:"",whiteSpace:x||"nowrap"}),t.hasTextWidth=!1),t.getSpanCorrection(t.hasTextWidth?g:i.offsetWidth,u,h,f,l)),m(i,{left:s+(t.xCorr||0)+Je,top:a+(t.yCorr||0)+Je}),Be&&(u=i.offsetHeight),t.cTT=y}},setSpanRotation:function(t,e,i){var n={},o=De?"-ms-transform":Be?"-webkit-transform":Oe?"MozTransform":Le?"-o-transform":"";n[o]=n.transform="rotate("+t+"deg)",n[o+(Oe?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",m(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),ki(Pi.prototype,{html:function(t,e,i){var n=this.createElement("span"),o=n.element,r=n.renderer,s=function(t,e){di(["opacity","visibility"],function(i){Ai(t,i+"Setter",function(t,i,n,o){t.call(this,i,n,o),e[n]=i})})};return n.textSetter=function(t){t!==o.innerHTML&&delete this.bBox,o.innerHTML=this.textStr=t,n.htmlUpdateTransform()},s(n,n.element.style),n.xSetter=n.ySetter=n.alignSetter=n.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),n[e]=t,n.htmlUpdateTransform()},n.attr({text:t,x:ye(e),y:ye(i)}).css({position:je,fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),o.style.whiteSpace="nowrap",n.css=n.htmlCss,r.isSVG&&(n.add=function(t){var e,i,a=r.box.parentNode,l=[];if(this.parentGroup=t,t){if(e=t.div,!e){for(i=t;i;)l.push(i),i=i.parentGroup;di(l.reverse(),function(t){var i,n=u(t.element,"class");n&&(n={className:n}),e=t.div=t.div||x(Ue,n,{position:je,left:(t.translateX||0)+Je,top:(t.translateY||0)+Je},e||a),i=e.style,ki(t,{translateXSetter:function(e,n){i.left=e+Je,t[n]=e,t.doTransform=!0},translateYSetter:function(e,n){i.top=e+Je,t[n]=e,t.doTransform=!0}}),s(t,i)})}}else e=a;return e.appendChild(o),n.added=!0,n.alignOnAdd&&n.htmlUpdateTransform(),n}),n}});var Ci,Mi;if(!Re&&!He){Mi={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],o=["position: ",je,";"],r=e===Ue;("shape"===e||r)&&o.push("left:0;top:0;width:1px;height:1px;"),o.push("visibility: ",r?Ke:$e),n.push(' style="',o.join(""),'"/>'),e&&(n=r||"span"===e||"img"===e?n.join(""):t.prepVML(n),i.element=x(n)),i.renderer=t},add:function(t){var e=this,i=e.renderer,n=e.element,o=i.box,r=t&&t.inverted,s=t?t.element||t:o;return t&&(this.parentGroup=t),r&&i.invertChild(n,s),s.appendChild(n),e.added=!0,e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform(),e.onAdd&&e.onAdd(),e},updateTransform:W.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=Se(t*Ce),i=Te(t*Ce);m(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Qe})},getSpanCorrection:function(t,e,i,n,o){var r,s=n?Se(n*Ce):1,a=n?Te(n*Ce):0,l=wi(this.elemHeight,this.element.offsetHeight),h=o&&"left"!==o;this.xCorr=0>s&&-t,this.yCorr=0>a&&-l,r=0>s*a,this.xCorr+=a*e*(r?1-i:i),this.yCorr-=s*e*(n?r?i:1-i:1),h&&(this.xCorr-=t*i*(0>s?-1:1),n&&(this.yCorr-=l*i*(0>a?-1:1)),m(this.element,{textAlign:o}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)l(t[e])?i[e]=ye(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i,n=this;return t?(e=t.members,d(e,n),e.push(n),n.destroyClip=function(){d(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:Ie?"inherit":"rect(auto)"}),n.css(i)},css:W.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&D(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),W.prototype.destroy.apply(this)},on:function(e,i){return this.element["on"+e]=function(){var e=t.event;e.target=e.srcElement,i(e)},this},cutOffPath:function(t,e){var i;return t=t.split(/[ ,]/),i=t.length,(9===i||11===i)&&(t[i-4]=t[i-2]=o(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var n,r,s,a,l,h,c,d=[],p=this.element,u=this.renderer,f=p.style,g=p.path;if(g&&"string"!=typeof g.value&&(g="x"),l=g,t){for(h=wi(t.width,3),c=(t.opacity||.15)/h,n=1;3>=n;n++)a=2*h+1-2*n,i&&(l=this.cutOffPath(g.value,a+.5)),s=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',p.style.cssText,'" />'],r=x(u.prepVML(s),null,{left:o(f.left)+wi(t.offsetX,1),top:o(f.top)+wi(t.offsetY,1)}),i&&(r.cutOff=a+1),s=['<stroke color="',t.color||"black",'" opacity="',c*n,'"/>'],x(u.prepVML(s),null,null,r),e?e.element.appendChild(r):p.parentNode.insertBefore(r,p),d.push(r);this.shadows=d}return this},updateShadows:Ye,setAttr:function(t,e){Ie?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){var n=i.getElementsByTagName("stroke")[0]||x(this.renderer.prepVML(["<stroke/>"]),null,null,i);n[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n,o=this.shadows;if(t=t||[],this.d=t.join&&t.join(" "),i.path=t=this.pathToVML(t),o)for(n=o.length;n--;)o[n].path=o[n].cutOff?this.cutOffPath(t,o[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled=t!==Qe,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},"fill-opacitySetter":function(t,e,i){x(this.renderer.prepVML(["<",e.split("-")[0],' opacity="',t,'"/>']),null,null,i)},opacitySetter:Ye,rotationSetter:function(t,e,i){var n=i.style;this[e]=n[e]=t,n.left=-ye(Te(t*Ce)+1)+Je,n.top=ye(Se(t*Ce))+Je},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e,this))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,l(t)&&(t+=Je),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t=$e),this.shadows&&di(this.shadows,function(i){i.style[e]=t}),"DIV"===i.nodeName&&(t=t===Ke?"-999em":0,Ie||(i.style[e]=t?$e:Ke),e="top"),i.style[e]=t},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}},Mi["stroke-opacitySetter"]=Mi["fill-opacitySetter"],ge.VMLElement=Mi=y(W,Mi),Mi.prototype.ySetter=Mi.prototype.widthSetter=Mi.prototype.heightSetter=Mi.prototype.xSetter;var Li={Element:Mi,isIE8:Me.indexOf("MSIE 8.0")>-1,init:function(t,e,i,n){var o,r,s,a=this;if(a.alignedObjects=[],o=a.createElement(Ue).css(ki(this.getStyle(n),{position:"relative"})),r=o.element,t.appendChild(o.element),a.isVML=!0,a.box=r,a.boxWrapper=o,a.gradients={},a.cache={},a.cacheKeys=[],a.imgCount=0,a.setSize(e,i,!1),!me.namespaces.hcv){me.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),s="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{me.createStyleSheet().cssText=s}catch(l){me.styleSheets[0].cssText+=s}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,i,n){var o=this.createElement(),r=s(t);return ki(o,{members:[],count:0,left:(r?t.x:t)+1,top:(r?t.y:e)+1,width:(r?t.width:i)-1,height:(r?t.height:n)-1,getCSS:function(t){var e=t.element,i=e.nodeName,n="shape"===i,o=t.inverted,r=this,s=r.top-(n?e.offsetTop:0),a=r.left,l=a+r.width,h=s+r.height,c={clip:"rect("+ye(o?a:s)+"px,"+ye(o?h:l)+"px,"+ye(o?l:h)+"px,"+ye(o?s:a)+"px)"};return!o&&Ie&&"DIV"===i&&ki(c,{width:l+Je,height:h+Je}),c},updateClipping:function(){di(o.members,function(t){t.element&&t.css(o.getCSS(t))})}})},color:function(t,e,i,n){var o,r,s,a=this,l=/^rgba/,h=Qe;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var c,d,p,u,f,g,m,y,v,b,k,w,A=t.linearGradient||t.radialGradient,S="",T=t.stops,P=[],C=function(){r=['<fill colors="'+P.join(",")+'" opacity="',y,'" o:opacity2="',m,'" type="',s,'" ',S,'focus="100%" method="any" />'],x(a.prepVML(r),null,null,e)};if(k=T[0],w=T[T.length-1],k[0]>0&&T.unshift([0,k[1]]),w[0]<1&&T.push([1,w[1]]),di(T,function(t,e){l.test(t[1])?(o=R(t[1]),c=o.get("rgb"),d=o.get("a")):(c=t[1],d=1),P.push(100*t[0]+"% "+c),e?(y=d,v=c):(m=d,b=c)}),"fill"===i)if("gradient"===s)p=A.x1||A[0]||0,u=A.y1||A[1]||0,f=A.x2||A[2]||0,g=A.y2||A[3]||0,S='angle="'+(90-180*xe.atan((g-u)/(f-p))/Pe)+'"',C();else{var M,L=A.r,D=2*L,I=2*L,B=A.cx,O=A.cy,z=e.radialReference,E=function(){z&&(M=n.getBBox(),B+=(z[0]-M.x)/M.width-.5,O+=(z[1]-M.y)/M.height-.5,D*=z[2]/M.width,I*=z[2]/M.height),S='src="'+j.global.VMLRadialGradientURL+'" size="'+D+","+I+'" origin="0.5,0.5" position="'+B+","+O+'" color2="'+b+'" ',C()};n.added?E():n.onAdd=E,h=v}else h=c}else if(l.test(t)&&"IMG"!==e.tagName)o=R(t),n[i+"-opacitySetter"](o.get("a"),i,e),h=o.get("rgb");else{var W=e.getElementsByTagName(i);W.length&&(W[0].opacity=1,W[0].type="solid"),h=t}return h},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),i?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e)):t=t.replace("<","<hcv:"),t},text:Pi.prototype.html,path:function(t){var e={coordsize:"10 10"};return a(t)?e.d=t:s(t)&&ki(e,t),this.createElement("shape").attr(e)},circle:function(t,e,i){var n=this.symbol("circle");return s(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e,i;return t&&(i={className:qe+t,"class":qe+t}),e=this.createElement(Ue).attr(i)},image:function(t,e,i,n,o){var r=this.createElement("img").attr({src:t});return arguments.length>1&&r.attr({x:e,y:i,width:n,height:o}),r},createElement:function(t){return"rect"===t?this.symbol(t):Pi.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,n=e.style,r="IMG"===t.tagName&&t.style;m(t,{flip:"x",left:o(n.width)-(r?o(r.top):1),top:o(n.height)-(r?o(r.left):1),rotation:-90}),di(t.childNodes,function(e){i.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,o){var r,s=o.start,a=o.end,l=o.r||i||n,h=o.innerR,c=Se(s),d=Te(s),p=Se(a),u=Te(a);return a-s===0?["x"]:(r=["wa",t-l,e-l,t+l,e+l,t+l*c,e+l*d,t+l*p,e+l*u],o.open&&!h&&r.push("e",ti,t,e),r.push("at",t-h,e-h,t+h,e+h,t+h*p,e+h*u,t+h*c,e+h*d,"x","e"),r.isArc=!0,r)},circle:function(t,e,i,n,o){return o&&(i=n=2*o.r),o&&o.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,o){return Pi.prototype.symbols[p(o)&&o.r?"callout":"square"].call(0,t,e,i,n,o)}}};ge.VMLRenderer=Ci=function(){this.init.apply(this,arguments)},Ci.prototype=n(Pi.prototype,Li),V=Ci}Pi.prototype.measureSpanWidth=function(t,e){var i,n=me.createElement("span"),o=me.createTextNode(t);return n.appendChild(o),m(n,e),this.box.appendChild(n),i=n.offsetWidth,D(n),i};var Di,Ii;He&&(ge.CanVGRenderer=Di=function(){Ee="http://www.w3.org/1999/xhtml"},Di.prototype.symbols={},Ii=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&H(n,t),e.push(i)}}}(),V=Di),X.prototype={addLabel:function(){var t,e,i=this,o=i.axis,r=o.options,s=o.chart,a=o.categories,l=o.names,h=i.pos,d=r.labels,u=o.tickPositions,f=h===u[0],g=h===u[u.length-1],m=a?wi(a[h],l[h],h):h,x=i.label,y=u.info;o.isDatetimeAxis&&y&&(e=r.dateTimeLabelFormats[y.higherRanks[h]||y.unitName]),i.isFirst=f,i.isLast=g,t=o.labelFormatter.call({axis:o,chart:s,isFirst:f,isLast:g,dateTimeLabelFormat:e,value:o.isLog?I(c(m)):m}),p(x)?x&&x.attr({text:t}):(i.label=x=p(t)&&d.enabled?s.renderer.text(t,0,0,d.useHTML).css(n(d.style)).add(o.labelGroup):null,i.labelLength=x&&x.getBBox().width,i.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,i,n,o=this.axis,r=t.x,s=o.chart.chartWidth,a=o.chart.spacing,l=wi(o.labelLeft,we(o.pos,a[3])),h=wi(o.labelRight,ke(o.pos+o.len,s-a[1])),c=this.label,d=this.rotation,p={left:0,center:.5,right:1}[o.labelAlign],u=c.getBBox().width,f=o.slotWidth,g=p,m=1,x={};d?0>d&&l>r-p*u?n=ye(r/Se(d*Ce)-l):d>0&&r+p*u>h&&(n=ye((s-r)/Se(d*Ce))):(e=r-p*u,i=r+(1-p)*u,l>e?f=t.x+f*(1-p)-l:i>h&&(f=h-t.x+f*p,m=-1),f=we(o.slotWidth,f),f<o.slotWidth&&"center"===o.labelAlign&&(t.x+=m*(o.slotWidth-f-g*(o.slotWidth-we(u,f)))),(u>f||o.autoRotation&&c.styles.width)&&(n=f)),n&&(x.width=n,o.options.labels.style.textOverflow||(x.textOverflow="ellipsis"),c.css(x))},getPosition:function(t,e,i,n){var o=this.axis,r=o.chart,s=n&&r.oldChartHeight||r.chartHeight;return{x:t?o.translate(e+i,null,null,n)+o.transB:o.left+o.offset+(o.opposite?(n&&r.oldChartWidth||r.chartWidth)-o.right-o.left:0),y:t?s-o.bottom+o.offset-(o.opposite?o.height:0):s-o.translate(e+i,null,null,n)-o.transB}},getLabelPosition:function(t,e,i,n,o,r,s,a){var l,h=this.axis,c=h.transA,d=h.reversed,u=h.staggerLines,f=h.tickRotCorr||{x:0,y:0},g=o.y;return p(g)||(g=2===h.side?f.y+8:g=Se(i.rotation*Ce)*(f.y-i.getBBox(!1,0).height/2)),t=t+o.x+f.x-(r&&n?r*c*(d?-1:1):0),e=e+g-(r&&!n?r*c*(d?1:-1):0),u&&(l=s/(a||1)%u,h.opposite&&(l=u-l-1),e+=l*(h.labelOffset/u)),{x:t,y:ye(e)}},getMarkPath:function(t,e,i,n,o,r){return r.crispLine([ti,t,e,ei,t+(o?0:-i),e+(o?i:0)],n)},render:function(t,e,i){var n,o,r,s=this,a=s.axis,l=a.options,h=a.chart,c=h.renderer,d=a.horiz,p=s.type,u=s.label,f=s.pos,g=l.labels,m=s.gridLine,x=p?p+"Grid":"grid",y=p?p+"Tick":"tick",v=l[x+"LineWidth"],b=l[x+"LineColor"],k=l[x+"LineDashStyle"],w=l[y+"Length"],A=wi(l[y+"Width"],!p&&a.isXAxis?1:0),S=l[y+"Color"],T=l[y+"Position"],P=s.mark,C=g.step,M=!0,L=a.tickmarkOffset,D=s.getPosition(d,f,L,e),I=D.x,B=D.y,O=d&&I===a.pos+a.len||!d&&B===a.pos?-1:1;i=wi(i,1),this.isActive=!0,v&&(n=a.getPlotLinePath(f+L,v*O,e,!0),m===N&&(r={stroke:b,"stroke-width":v},k&&(r.dashstyle=k),p||(r.zIndex=1),e&&(r.opacity=0),s.gridLine=m=v?c.path(n).attr(r).add(a.gridGroup):null),!e&&m&&n&&m[s.isNew?"attr":"animate"]({d:n,opacity:i})),A&&w&&("inside"===T&&(w=-w),a.opposite&&(w=-w),o=s.getMarkPath(I,B,w,A*O,d,c),P?P.animate({d:o,opacity:i}):s.mark=c.path(o).attr({stroke:S,"stroke-width":A,opacity:i}).add(a.axisGroup)),u&&!isNaN(I)&&(u.xy=D=s.getLabelPosition(I,B,u,d,g,L,t,C),s.isFirst&&!s.isLast&&!wi(l.showFirstLabel,1)||s.isLast&&!s.isFirst&&!wi(l.showLastLabel,1)?M=!1:!d||a.isRadial||g.step||g.rotation||e||0===i||s.handleOverflow(D),C&&t%C&&(M=!1),M&&!isNaN(D.y)?(D.opacity=i,u[s.isNew?"attr":"animate"](D),s.isNew=!1):u.attr("y",-9999))},destroy:function(){L(this,this.axis)}},ge.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},ge.PlotLineOrBand.prototype={render:function(){var t,e,i=this,o=i.axis,r=o.horiz,s=i.options,a=s.label,l=i.label,c=s.width,d=s.to,u=s.from,f=p(u)&&p(d),g=s.value,m=s.dashStyle,x=i.svgElem,y=[],v=s.color,b=wi(s.zIndex,0),k=s.events,w={},A=o.chart.renderer;if(o.isLog&&(u=h(u),d=h(d),g=h(g)),c)y=o.getPlotLinePath(g,c),w={stroke:v,"stroke-width":c},m&&(w.dashstyle=m);else{if(!f)return;y=o.getPlotBandPath(u,d,s),v&&(w.fill=v),s.borderWidth&&(w.stroke=s.borderColor,w["stroke-width"]=s.borderWidth)}if(w.zIndex=b,x)y?(x.show(),x.animate({d:y})):(x.hide(),l&&(i.label=l=l.destroy()));else if(y&&y.length&&(i.svgElem=x=A.path(y).attr(w).add(),k)){t=function(t){x.on(t,function(e){k[t].apply(i,[e])})};for(e in k)t(e)}return a&&p(a.text)&&y&&y.length&&o.width>0&&o.height>0&&!y.flat?(a=n({align:r&&f&&"center",x:r?!f&&4:10,verticalAlign:!r&&f&&"middle",y:r?f?16:10:f?6:-4,rotation:r&&!f&&90},a),this.renderLabel(a,y,f,b)):l&&l.hide(),i},renderLabel:function(t,e,i,n){var o,r,s,a,l,h=this,c=h.label,d=h.axis.chart.renderer;c||(o={align:t.textAlign||t.align,rotation:t.rotation},o.zIndex=n,h.label=c=d.text(t.text,0,0,t.useHTML).attr(o).css(t.style).add()),r=[e[1],e[4],i?e[6]:e[1]],s=[e[2],e[5],i?e[7]:e[2]],a=C(r),l=C(s),c.align(t,!1,{x:a,y:l,width:M(r)-a,height:M(s)-l}),c.show()},destroy:function(){d(this.axis.plotLinesAndBands,this),delete this.axis,L(this)}},$={getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e,null,null,!0),n=this.getPlotLinePath(t,null,null,!0);return n&&i?(n.flat=n.toString()===i.toString(),n.push(i[4],i[5],i[1],i[2])):n=null,n},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new ge.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,o=e.length;o--;)e[o].id===t&&e[o].destroy();di([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(o=e.length;o--;)e[o].id===t&&d(e,e[o])})}};var Bi=ge.Axis=function(){this.init.apply(this,arguments)};Bi.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return ge.numberFormat(this.total,-1)},style:n(Si.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.chart=t,n.horiz=t.inverted?!i:i,n.isXAxis=i,n.coll=i?"xAxis":"yAxis",n.opposite=e.opposite,n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(e);var o=this.options,r=o.type,s="datetime"===r;n.labelFormatter=o.labels.formatter||n.defaultLabelFormatter,n.userOptions=e,n.minPixelPadding=0,n.reversed=o.reversed,n.visible=o.visible!==!1,n.zoomEnabled=o.zoomEnabled!==!1,n.categories=o.categories||"category"===r,n.names=n.names||[],n.isLog="logarithmic"===r,n.isDatetimeAxis=s,n.isLinked=p(o.linkedTo),n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=o.minRange||o.maxZoom,n.range=o.range,n.offset=o.offset||0,n.stacks={},n.oldStacks={},n.stacksTouched=0,n.max=null,n.min=null,n.crosshair=wi(o.crosshair,f(t.options.tooltip.crosshairs)[i?0:1],!1);var a,l=n.options.events;-1===ci(n,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,n):t.axes.push(n),t[n.coll].push(n)),n.series=n.series||[],t.inverted&&i&&n.reversed===N&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine;for(a in l)gi(n,a,l[a]);n.isLog&&(n.val2lin=h,n.lin2val=c)},setOptions:function(t){this.options=n(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],n(j[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,o=i.categories,r=this.dateTimeLabelFormat,s=j.lang.numericSymbols,a=s&&s.length,l=i.options.labels.format,h=i.isLog?n:i.tickInterval;if(l)e=A(l,this);else if(o)e=n;else if(r)e=Z(r,n);else if(a&&h>=1e3)for(;a--&&e===N;)t=Math.pow(1e3,a+1),h>=t&&10*n%t===0&&null!==s[a]&&(e=ge.numberFormat(n/t,-1)+s[a]);return e===N&&(e=Ae(n)>=1e4?ge.numberFormat(n,-1):ge.numberFormat(n,-1,N,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.buildStacks&&t.buildStacks(),di(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,o,r,s=i.options,a=s.threshold;t.hasVisibleSeries=!0,t.isLog&&0>=a&&(a=null),t.isXAxis?(n=i.xData,n.length&&(t.dataMin=we(wi(t.dataMin,n[0]),C(n)),t.dataMax=ke(wi(t.dataMax,n[0]),M(n)))):(i.getExtremes(),r=i.dataMax,o=i.dataMin,p(o)&&p(r)&&(t.dataMin=we(wi(t.dataMin,o),o),t.dataMax=ke(wi(t.dataMax,r),r)),p(a)&&(t.threshold=a),(!s.softThreshold||t.isLog)&&(t.softThreshold=!1))}})},translate:function(t,e,i,n,o,r){var s,a=this.linkedParent||this,h=1,c=0,d=n?a.oldTransA:a.transA,p=n?a.oldMin:a.min,u=a.minPixelPadding,f=(a.isOrdinal||a.isBroken||a.isLog&&o)&&a.lin2val;return d||(d=a.transA),i&&(h*=-1,c=a.len),a.reversed&&(h*=-1,c-=h*(a.sector||a.len)),e?(t=t*h+c,t-=u,s=t/d+p,f&&(s=a.lin2val(s))):(f&&(t=a.val2lin(t)),"between"===r&&(r=.5),s=h*(t-p)*d+c+h*u+(l(r)?d*r*a.pointRange:0)),s},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,o){var r,s,a,l,h,c=this,d=c.chart,p=c.left,u=c.top,f=i&&d.oldChartHeight||d.chartHeight,g=i&&d.oldChartWidth||d.chartWidth,m=c.transB,x=function(t,e,i){return(e>t||t>i)&&(n?t=we(ke(e,t),i):h=!0),t};return o=wi(o,c.translate(t,null,null,i)),r=a=ye(o+m),s=l=ye(f-o-m),isNaN(o)?h=!0:c.horiz?(s=u,l=f-c.bottom,r=a=x(r,p,p+c.width)):(r=p,a=g-c.right,s=l=x(s,u,u+c.height)),h&&!n?null:d.renderer.crispLine([ti,r,s,ei,a,l],e||1)},getLinearTickPositions:function(t,e,i){var n,o,r=I(ve(e/t)*t),s=I(be(i/t)*t),a=[];if(e===i&&l(e))return[e];for(n=r;s>=n&&(a.push(n),n=I(n+t),n!==o);)o=n;return a},getMinorTickPositions:function(){var t,e,i,n=this,o=n.options,r=n.tickPositions,s=n.minorTickInterval,a=[],l=n.pointRangePadding||0,h=n.min-l,c=n.max+l,d=c-h;if(d&&d/s<n.len/3)if(n.isLog)for(i=r.length,e=1;i>e;e++)a=a.concat(n.getLogTickPositions(s,r[e-1],r[e],!0));else if(n.isDatetimeAxis&&"auto"===o.minorTickInterval)a=a.concat(n.getTimeTicks(n.normalizeTimeTickInterval(s),h,c,o.startOfWeek));else for(t=h+(r[0]-h)%s;c>=t;t+=s)a.push(t);return 0!==a.length&&n.trimTicks(a,o.startOnTick,o.endOnTick),a},adjustForMinRange:function(){var t,e,i,n,o,r,s,a,l,h=this,c=h.options,d=h.min,u=h.max,f=h.dataMax-h.dataMin>=h.minRange;h.isXAxis&&h.minRange===N&&!h.isLog&&(p(c.min)||p(c.max)?h.minRange=null:(di(h.series,function(t){for(o=t.xData,r=t.xIncrement?1:o.length-1,i=r;i>0;i--)n=o[i]-o[i-1],(e===N||e>n)&&(e=n)}),h.minRange=we(5*e,h.dataMax-h.dataMin))),u-d<h.minRange&&(l=h.minRange,t=(l-u+d)/2,s=[d-t,wi(c.min,d-t)],f&&(s[2]=h.dataMin),d=M(s),a=[d+l,wi(c.max,d+l)],f&&(a[2]=h.dataMax),u=C(a),l>u-d&&(s[0]=u-l,s[1]=wi(c.min,u-l),d=M(s))),h.min=d,h.max=u},setAxisTranslation:function(t){var e,i,n=this,o=n.max-n.min,s=n.axisPointRange||0,a=0,l=0,h=n.linkedParent,c=!!n.categories,d=n.transA,u=n.isXAxis;(u||c||s)&&(h?(a=h.minPointOffset,l=h.pointRangePadding):(di(n.series,function(t){var i=t.closestPointRange;!t.noSharedTooltip&&p(i)&&(e=p(e)?we(e,i):i)}),di(n.series,function(t){var i=c?1:u?wi(t.options.pointRange,e,0):n.axisPointRange||0,o=t.options.pointPlacement;s=ke(s,i),n.single||(a=ke(a,r(o)?0:i/2),l=ke(l,"on"===o?0:i))})),i=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=a*=i,n.pointRangePadding=l*=i,n.pointRange=we(s,o),u&&(n.closestPointRange=e)),t&&(n.oldTransA=d),n.translationSlope=n.transA=d=n.len/(o+l||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=d*a},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var i,n,o,r,s,a,c,d=this,u=d.chart,f=d.options,g=d.isLog,m=d.isDatetimeAxis,x=d.isXAxis,y=d.isLinked,v=f.maxPadding,b=f.minPadding,k=f.tickInterval,w=f.tickPixelInterval,A=d.categories,P=d.threshold,C=d.softThreshold;
m||A||y||this.getTickAmount(),a=wi(d.userMin,f.min),c=wi(d.userMax,f.max),y?(d.linkedParent=u[d.coll][f.linkedTo],n=d.linkedParent.getExtremes(),d.min=wi(n.min,n.dataMin),d.max=wi(n.max,n.dataMax),f.type!==d.linkedParent.options.type&&e(11,1)):(!C&&p(P)&&(d.dataMin>=P?(r=P,b=0):d.dataMax<=P&&(s=P,v=0)),d.min=wi(a,r,d.dataMin),d.max=wi(c,s,d.dataMax)),g&&(!t&&we(d.min,wi(d.dataMin,d.min))<=0&&e(10,1),d.min=I(h(d.min),15),d.max=I(h(d.max),15)),d.range&&p(d.max)&&(d.userMin=d.min=a=ke(d.min,d.minFromRange()),d.userMax=c=d.max,d.range=null),d.beforePadding&&d.beforePadding(),d.adjustForMinRange(),A||d.axisPointRange||d.usePercentage||y||!p(d.min)||!p(d.max)||(i=d.max-d.min,i&&(!p(a)&&b&&(d.min-=i*b),!p(c)&&v&&(d.max+=i*v))),l(f.floor)&&(d.min=ke(d.min,f.floor)),l(f.ceiling)&&(d.max=we(d.max,f.ceiling)),C&&p(d.dataMin)&&(P=P||0,!p(a)&&d.min<P&&d.dataMin>=P?d.min=P:!p(c)&&d.max>P&&d.dataMax<=P&&(d.max=P)),d.tickInterval=d.min===d.max||void 0===d.min||void 0===d.max?1:y&&!k&&w===d.linkedParent.options.tickPixelInterval?k=d.linkedParent.tickInterval:wi(k,this.tickAmount?(d.max-d.min)/ke(this.tickAmount-1,1):void 0,A?1:(d.max-d.min)*w/ke(d.len,w)),x&&!t&&di(d.series,function(t){t.processData(d.min!==d.oldMin||d.max!==d.oldMax)}),d.setAxisTranslation(!0),d.beforeSetTickPositions&&d.beforeSetTickPositions(),d.postProcessTickInterval&&(d.tickInterval=d.postProcessTickInterval(d.tickInterval)),d.pointRange&&!k&&(d.tickInterval=ke(d.pointRange,d.tickInterval)),o=wi(f.minTickInterval,d.isDatetimeAxis&&d.closestPointRange),!k&&d.tickInterval<o&&(d.tickInterval=o),m||g||k||(d.tickInterval=T(d.tickInterval,null,S(d.tickInterval),wi(f.allowDecimals,!(d.tickInterval>.5&&d.tickInterval<5&&d.max>1e3&&d.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(d.tickInterval=d.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e,i=this.options,n=i.tickPositions,o=i.tickPositioner,r=i.startOnTick,s=i.endOnTick;this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===i.minorTickInterval&&this.tickInterval?this.tickInterval/5:i.minorTickInterval,this.tickPositions=t=n&&n.slice(),t||(t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),t.length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,o&&(o=o.apply(this,[this.min,this.max]),o&&(this.tickPositions=t=o))),this.isLinked||(this.trimTicks(t,r,s),this.min===this.max&&p(this.min)&&!this.tickAmount&&(e=!0,this.min-=.5,this.max+=.5),this.single=e,n||o||this.adjustTickAmount())},trimTicks:function(t,e,i){var n=t[0],o=t[t.length-1],r=this.minPointOffset||0;if(e)this.min=n;else for(;this.min-r>t[0];)t.shift();if(i)this.max=o;else for(;this.max+r<t[t.length-1];)t.pop();0===t.length&&p(n)&&t.push((o+n)/2)},alignToOthers:function(){var t,e={},i=this.options;return this.chart.options.chart.alignTicks!==!1&&i.alignTicks!==!1&&di(this.chart[this.coll],function(i){var n=i.options,o=i.horiz,r=[o?n.left:n.top,n.width,n.height,n.pane].join(",");i.series.length&&(e[r]?t=!0:e[r]=1)}),t},getTickAmount:function(){var t=this.options,e=t.tickAmount,i=t.tickPixelInterval;!p(t.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick&&(e=2),!e&&this.alignToOthers()&&(e=be(this.len/i)+1),4>e&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t,e,i=this.tickInterval,n=this.tickPositions,o=this.tickAmount,r=this.finalTickAmt,s=n&&n.length;if(o>s){for(;n.length<o;)n.push(I(n[n.length-1]+i));this.transA*=(s-1)/(o-1),this.max=n[n.length-1]}else s>o&&(this.tickInterval*=2,this.setTickPositions());if(p(r)){for(t=e=n.length;t--;)(3===r&&t%2===1||2>=r&&t>0&&e-1>t)&&n.splice(t,1);this.finalTickAmt=N}},setScale:function(){var t,e,i=this;i.oldMin=i.min,i.oldMax=i.max,i.oldAxisLength=i.len,i.setAxisSize(),e=i.len!==i.oldAxisLength,di(i.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)}),e||t||i.isLinked||i.forceRedraw||i.userMin!==i.oldUserMin||i.userMax!==i.oldUserMax||i.alignToOthers()?(i.resetStacks&&i.resetStacks(),i.forceRedraw=!1,i.getSeriesExtremes(),i.setTickInterval(),i.oldUserMin=i.userMin,i.oldUserMax=i.userMax,i.isDirty||(i.isDirty=e||i.min!==i.oldMin||i.max!==i.oldMax)):i.cleanStacks&&i.cleanStacks()},setExtremes:function(t,e,i,n,o){var r=this,s=r.chart;i=wi(i,!0),di(r.series,function(t){delete t.kdTree}),o=ki(o,{min:t,max:e}),xi(r,"setExtremes",o,function(){r.userMin=t,r.userMax=e,r.eventArgs=o,i&&s.redraw(n)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,o=this.options,r=we(i,wi(o.min,i)),s=ke(n,wi(o.max,n));return this.allowZoomOutside||(p(i)&&r>=t&&(t=r),p(n)&&e>=s&&(e=s)),this.displayBtn=t!==N||e!==N,this.setExtremes(t,e,!1,N,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=e.offsetRight||0,o=this.horiz,r=wi(e.width,t.plotWidth-i+n),s=wi(e.height,t.plotHeight),a=wi(e.top,t.plotTop),l=wi(e.left,t.plotLeft+i),h=/%$/;h.test(s)&&(s=Math.round(parseFloat(s)/100*t.plotHeight)),h.test(a)&&(a=Math.round(parseFloat(a)/100*t.plotHeight+t.plotTop)),this.left=l,this.top=a,this.width=r,this.height=s,this.bottom=t.chartHeight-s-a,this.right=t.chartWidth-r-l,this.len=ke(o?r:s,0),this.pos=o?l:a},getExtremes:function(){var t=this,e=t.isLog;return{min:e?I(c(t.min)):t.min,max:e?I(c(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=i?c(e.min):e.min,o=i?c(e.max):e.max;return null===t?t=0>o?o:n:n>t?t=n:t>o&&(t=o),e.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e,i=(wi(t,0)-90*this.side+720)%360;return e=i>15&&165>i?"right":i>195&&345>i?"left":"center"},unsquish:function(){var t,e,i,n=this.chart,o=this.ticks,r=this.options.labels,s=this.horiz,a=this.tickInterval,l=a,h=this.len/(((this.categories?1:0)+this.max-this.min)/a),c=r.rotation,d=n.renderer.fontMetrics(r.style.fontSize,o[0]&&o[0].label),u=Number.MAX_VALUE,f=function(t){var e=t/(h||1);return e=e>1?be(e):1,e*a};return s?(i=!r.staggerLines&&!r.step&&(p(c)?[c]:h<wi(r.autoRotationLimit,80)&&r.autoRotation),i&&di(i,function(i){var n;(i===c||i&&i>=-90&&90>=i)&&(e=f(Ae(d.h/Te(Ce*i))),n=e+Ae(i/360),u>n&&(u=n,t=i,l=e))})):r.step||(l=f(d.h)),this.autoRotation=i,this.labelRotation=wi(t,c),l},renderUnsquish:function(){var t,e,i,o,s=this.chart,a=s.renderer,l=this.tickPositions,h=this.ticks,c=this.options.labels,d=this.horiz,p=s.margin,u=this.categories?l.length:l.length-1,f=this.slotWidth=d&&(c.step||0)<2&&!c.rotation&&(this.staggerLines||1)*s.plotWidth/u||!d&&(p[3]&&p[3]-s.spacing[3]||.33*s.chartWidth),g=ke(1,ye(f-2*(c.padding||5))),m={},x=a.fontMetrics(c.style.fontSize,h[0]&&h[0].label),y=c.style.textOverflow,v=0;if(r(c.rotation)||(m.rotation=c.rotation||0),this.autoRotation)di(l,function(t){t=h[t],t&&t.labelLength>v&&(v=t.labelLength)}),v>g&&v>x.h?m.rotation=this.labelRotation:this.labelRotation=0;else if(f&&(t={width:g+Je},!y))for(t.textOverflow="clip",i=l.length;!d&&i--;)o=l[i],e=h[o].label,e&&("ellipsis"===e.styles.textOverflow&&e.css({textOverflow:"clip"}),(e.getBBox().height>this.len/l.length-(x.h-x.f)||h[o].labelLength>f)&&(e.specCss={textOverflow:"ellipsis"}));m.rotation&&(t={width:(v>.5*s.chartHeight?.33*s.chartHeight:s.chartHeight)+Je},y||(t.textOverflow="ellipsis")),this.labelAlign=c.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(m.align=this.labelAlign),di(l,function(e){var i=h[e],o=i&&i.label;o&&(o.attr(m),t&&o.css(n(t,o.specCss)),delete o.specCss,i.rotation=m.rotation)}),this.tickRotCorr=a.rotCorr(x.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||p(this.min)&&p(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,i,n,o,r,s,a=this,l=a.chart,h=l.renderer,c=a.options,d=a.tickPositions,u=a.ticks,f=a.horiz,g=a.side,m=l.inverted?[1,0,3,2][g]:g,x=0,y=0,v=c.title,b=c.labels,k=0,w=a.opposite,A=l.axisOffset,S=l.clipOffset,T=[-1,1,1,-1][g],P=a.axisParent;if(t=a.hasData(),a.showAxis=e=t||wi(c.showEmpty,!0),a.staggerLines=a.horiz&&b.staggerLines,a.axisGroup||(a.gridGroup=h.g("grid").attr({zIndex:c.gridZIndex||1}).add(P),a.axisGroup=h.g("axis").attr({zIndex:c.zIndex||2}).add(P),a.labelGroup=h.g("axis-labels").attr({zIndex:b.zIndex||7}).addClass(qe+a.coll.toLowerCase()+"-labels").add(P)),t||a.isLinked)di(d,function(t){u[t]?u[t].addLabel():u[t]=new X(a,t)}),a.renderUnsquish(),b.reserveSpace===!1||0!==g&&2!==g&&{1:"left",3:"right"}[g]!==a.labelAlign&&"center"!==a.labelAlign||di(d,function(t){k=ke(u[t].getLabelSize(),k)}),a.staggerLines&&(k*=a.staggerLines,a.labelOffset=k*(a.opposite?-1:1));else for(r in u)u[r].destroy(),delete u[r];v&&v.text&&v.enabled!==!1&&(a.axisTitle||(a.axisTitle=h.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:w?"right":"left",middle:"center",high:w?"left":"right"}[v.align]}).addClass(qe+this.coll.toLowerCase()+"-title").css(v.style).add(a.axisGroup),a.axisTitle.isNew=!0),e&&(x=a.axisTitle.getBBox()[f?"height":"width"],i=v.offset,y=p(i)?0:wi(v.margin,f?5:10)),a.axisTitle[e?"show":"hide"](!0)),a.offset=T*wi(c.offset,A[g]),a.tickRotCorr=a.tickRotCorr||{x:0,y:0},s=2===g?a.tickRotCorr.y:0,n=Math.abs(k)+y+(k&&T*(f?wi(b.y,a.tickRotCorr.y+8):b.x)-s),a.axisTitleMargin=wi(i,n),A[g]=ke(A[g],a.axisTitleMargin+x+T*a.offset,n),o=c.offset?0:2*ve(c.lineWidth/2),S[m]=ke(S[m],o)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,o=this.horiz,r=this.left+(i?this.width:0)+n,s=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine([ti,o?this.left:r,o?s:this.top,ei,o?e.chartWidth-this.right:r,o?s:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,n=this.len,r=this.options.title,s=t?e:i,a=this.opposite,l=this.offset,h=r.x||0,c=r.y||0,d=o(r.style.fontSize||12),p={low:s+(t?0:n),middle:s+n/2,high:s+(t?n:0)}[r.align],u=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?d:0);return{x:t?p+h:u+(a?this.width:0)+l+h,y:t?u+c-(a?this.height:0)+l:p+c}},render:function(){var t,e,i,n=this,o=n.chart,r=o.renderer,s=n.options,a=n.isLog,l=n.isLinked,h=n.tickPositions,d=n.axisTitle,u=n.ticks,f=n.minorTicks,m=n.alternateBands,x=s.stackLabels,y=s.alternateGridColor,v=n.tickmarkOffset,b=s.lineWidth,k=o.hasRendered,w=k&&p(n.oldMin)&&!isNaN(n.oldMin),A=n.showAxis,S=r.globalAnimation;n.labelEdge.length=0,n.overlap=!1,di([u,f,m],function(t){var e;for(e in t)t[e].isActive=!1}),(n.hasData()||l)&&(n.minorTickInterval&&!n.categories&&di(n.getMinorTickPositions(),function(t){f[t]||(f[t]=new X(n,t,"minor")),w&&f[t].isNew&&f[t].render(null,!0),f[t].render(null,!1,1)}),h.length&&(di(h,function(t,e){(!l||t>=n.min&&t<=n.max)&&(u[t]||(u[t]=new X(n,t)),w&&u[t].isNew&&u[t].render(e,!0,.1),u[t].render(e))}),v&&(0===n.min||n.single)&&(u[-1]||(u[-1]=new X(n,-1,null,!0)),u[-1].render(-1))),y&&di(h,function(t,r){i=h[r+1]!==N?h[r+1]+v:n.max-v,r%2===0&&t<n.max&&i<=n.max+(o.polar?-v:v)&&(m[t]||(m[t]=new ge.PlotLineOrBand(n)),e=t+v,m[t].options={from:a?c(e):e,to:a?c(i):i,color:y},m[t].render(),m[t].isActive=!0)}),n._addedPlotLB||(di((s.plotLines||[]).concat(s.plotBands||[]),function(t){n.addPlotBandOrLine(t)}),n._addedPlotLB=!0)),di([u,f,m],function(t){var e,i,n=[],r=S?S.duration||500:0,s=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));g(s,t!==m&&o.hasRendered&&r?r:0)}),b&&(t=n.getLinePath(b),n.axisLine?n.axisLine.animate({d:t}):n.axisLine=r.path(t).attr({stroke:s.lineColor,"stroke-width":b,zIndex:7}).add(n.axisGroup),n.axisLine[A?"show":"hide"](!0)),d&&A&&(d[d.isNew?"attr":"animate"](n.getTitlePosition()),d.isNew=!1),x&&x.enabled&&n.renderStackTotals(),n.isDirty=!1},redraw:function(){this.visible&&(this.render(),di(this.plotLinesAndBands,function(t){t.render()})),di(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i,n=this,o=n.stacks,r=n.plotLinesAndBands;t||mi(n);for(e in o)L(o[e]),o[e]=null;for(di([n.ticks,n.minorTicks,n.alternateBands],function(t){L(t)}),i=r.length;i--;)r[i].destroy();di(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){n[t]&&(n[t]=n[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){var i,n,o,r,s,a=this.crosshair;if(this.crosshair&&(p(e)||!wi(a.snap,!0))!==!1){if(wi(a.snap,!0)?p(e)&&(n=this.isXAxis?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:wi(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,n)||null,null===i)return void this.hideCrosshair();r=this.categories&&!this.isRadial,s=wi(a.width,r?this.transA:1),this.cross?this.cross.attr({d:i,visibility:"visible","stroke-width":s}):(o={"stroke-width":s,stroke:a.color||(r?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:wi(a.zIndex,2)},a.dashStyle&&(o.dashstyle=a.dashStyle),this.cross=this.chart.renderer.path(i).attr(o).add())}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}},ki(Bi.prototype,$),Bi.prototype.getTimeTicks=function(t,e,i,n){var o,r,s=[],a={},l=j.global.useUTC,h=new J(e-k(e)),c=t.unitRange,d=t.count;if(p(e)){h[le](c>=q.second?0:d*ve(h.getMilliseconds()/d)),c>=q.second&&h[he](c>=q.minute?0:d*ve(h.getSeconds()/d)),c>=q.minute&&h[ce](c>=q.hour?0:d*ve(h[ie]()/d)),c>=q.hour&&h[de](c>=q.day?0:d*ve(h[ne]()/d)),c>=q.day&&h[pe](c>=q.month?1:d*ve(h[re]()/d)),c>=q.month&&(h[ue](c>=q.year?0:d*ve(h[se]()/d)),r=h[ae]()),c>=q.year&&(r-=r%d,h[fe](r)),c===q.week&&h[pe](h[re]()-h[oe]()+wi(n,1)),o=1,(te||ee)&&(h=h.getTime(),h=new J(h+k(h))),r=h[ae]();for(var u=h.getTime(),f=h[se](),g=h[re](),m=!l||!!ee,x=(q.day+(l?k(h):60*h.getTimezoneOffset()*1e3))%q.day;i>u;)s.push(u),c===q.year?u=Q(r+o*d,0):c===q.month?u=Q(r,f+o*d):!m||c!==q.day&&c!==q.week?u+=c*d:u=Q(r,f,g+o*d*(c===q.day?1:7)),o++;s.push(u),di(pi(s,function(t){return c<=q.hour&&t%q.day===x}),function(t){a[t]="day"})}return s.info=ki(t,{higherRanks:a,totalRange:c*d}),s},Bi.prototype.normalizeTimeTickInterval=function(t,e){var i,n,o=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=o[o.length-1],s=q[r[0]],a=r[1];for(n=0;n<o.length;n++)if(r=o[n],s=q[r[0]],a=r[1],o[n+1]){var l=(s*a[a.length-1]+q[o[n+1][0]])/2;if(l>=t)break}return s===q.year&&5*s>t&&(a=[1,2,5]),i=T(t/s,a,"year"===r[0]?ke(S(t/s),1):1),{unitRange:s,count:i,unitName:r[0]}},Bi.prototype.getLogTickPositions=function(t,e,i,n){var o=this,r=o.options,s=o.len,a=[];if(n||(o._minorAutoInterval=null),t>=.5)t=ye(t),a=o.getLinearTickPositions(t,e,i);else if(t>=.08){var l,d,p,u,f,g,m,x=ve(e);for(l=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],d=x;i+1>d&&!m;d++)for(u=l.length,p=0;u>p&&!m;p++)f=h(c(d)*l[p]),f>e&&(!n||i>=g)&&g!==N&&a.push(g),g>i&&(m=!0),g=f}else{var y=c(e),v=c(i),b=r[n?"minorTickInterval":"tickInterval"],k="auto"===b?null:b,w=r.tickPixelInterval/(n?5:1),A=n?s/o.tickPositions.length:s;t=wi(k,o._minorAutoInterval,(v-y)*w/(A||1)),t=T(t,null,S(t)),a=fi(o.getLinearTickPositions(t,y,v),h),n||(o._minorAutoInterval=t/5)}return n||(o.tickInterval=t),a};var Oi=ge.Tooltip=function(){this.init.apply(this,arguments)};Oi.prototype={init:function(t,e){var i=e.borderWidth,n=e.style,r=o(n.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(n).css({padding:0}).add().attr({y:-9999}),He||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,e,i,n){var o=this,r=o.now,s=o.options.animation!==!1&&!o.isHidden&&(Ae(t-r.x)>1||Ae(e-r.y)>1),a=o.followPointer||o.len>1;ki(r,{x:s?(2*r.x+t)/3:t,y:s?(r.y+e)/2:e,anchorX:a?N:s?(2*r.anchorX+i)/3:i,anchorY:a?N:s?(r.anchorY+n)/2:n}),o.label.attr(r),s&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(t,e,i,n)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),t=wi(t,this.options.hideDelay,500),this.isHidden||(this.hideTimer=g(function(){e.label[t?"fadeOut":"hide"](),e.isHidden=!0},t))},getAnchor:function(t,e){var i,n,o,r=this.chart,s=r.inverted,a=r.plotTop,l=r.plotLeft,h=0,c=0;return t=f(t),i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===N&&(e=r.pointer.normalize(e)),i=[e.chartX-r.plotLeft,e.chartY-a]),i||(di(t,function(t){n=t.series.yAxis,o=t.series.xAxis,h+=t.plotX+(!s&&o?o.left-l:0),c+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!s&&n?n.top-a:0)}),h/=t.length,c/=t.length,i=[s?r.plotWidth-c:h,this.shared&&!s&&t.length>1&&e?e.chartY-a:s?r.plotHeight-h:c]),fi(i,ye)},getPosition:function(t,e,i){var n,o=this.chart,r=this.distance,s={},a=i.h||0,l=["y",o.chartHeight,e,i.plotY+o.plotTop,o.plotTop,o.plotTop+o.plotHeight],h=["x",o.chartWidth,t,i.plotX+o.plotLeft,o.plotLeft,o.plotLeft+o.plotWidth],c=wi(i.ttBelow,o.inverted&&!i.negative||!o.inverted&&i.negative),d=function(t,e,i,n,o,l){var h=n-r>i,d=e>n+r+i,p=n-r-i,u=n+r;if(c&&d)s[t]=u;else if(!c&&h)s[t]=p;else if(h)s[t]=we(l-i,0>p-a?p:p-a);else{if(!d)return!1;s[t]=ke(o,u+a+i>e?u:u+a)}},p=function(t,e,i,n){var o;return r>n||n>e-r?o=!1:s[t]=i/2>n?1:n>e-i/2?e-i-2:n-i/2,o},u=function(t){var e=l;l=h,h=e,n=t},f=function(){d.apply(0,l)!==!1?p.apply(0,h)!==!1||n||(u(!0),f()):n?s.x=s.y=0:(u(!0),f())};return(o.inverted||this.len>1)&&u(),f(),s},defaultFormatter:function(t){var e,i=this.points||f(this);return e=[t.tooltipFooterHeaderFormatter(i[0])],e=e.concat(t.bodyFormatter(i)),e.push(t.tooltipFooterHeaderFormatter(i[0],!0)),e.join("")},refresh:function(t,e){var i,n,o,r,s,a,l=this,h=l.chart,c=l.label,d=l.options,p={},u=[],g=d.formatter||l.defaultFormatter,m=h.hoverPoints,x=l.shared;clearTimeout(this.hideTimer),l.followPointer=f(t)[0].series.tooltipOptions.followPointer,o=l.getAnchor(t,e),i=o[0],n=o[1],!x||t.series&&t.series.noSharedTooltip?p=t.getLabelConfig():(h.hoverPoints=t,m&&di(m,function(t){t.setState()}),di(t,function(t){t.setState(oi),u.push(t.getLabelConfig())}),p={x:t[0].category,y:t[0].y},p.points=u,this.len=u.length,t=t[0]),r=g.call(p,l),a=t.series,this.distance=wi(a.tooltipOptions.distance,16),r===!1?this.hide():(l.isHidden&&(vi(c),c.attr("opacity",1).show()),c.attr({text:r}),s=d.borderColor||t.color||a.color||"#606060",c.attr({stroke:s}),l.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow,h:o[2]||0}),this.isHidden=!1),xi(h,"tooltipRefresh",{text:r,x:i+h.plotLeft,y:n+h.plotTop,borderColor:s})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(ye(n.x),ye(n.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,i){var n,o,r,s=e.dateTimeLabelFormats,a=i&&i.closestPointRange,l="01-01 00:00:00.000",h={millisecond:15,second:12,minute:9,hour:6,day:3},c="millisecond";if(a){r=Z("%m-%d %H:%M:%S.%L",t.x);for(o in q){if(a===q.week&&+Z("%w",t.x)===i.options.startOfWeek&&r.substr(6)===l.substr(6)){o="week";break}if(q[o]>a){o=c;break}if(h[o]&&r.substr(h[o])!==l.substr(h[o]))break;"week"!==o&&(c=o)}o&&(n=s[o])}else n=s.day;return n||s.year},tooltipFooterHeaderFormatter:function(t,e){var i=e?"footer":"header",n=t.series,o=n.tooltipOptions,r=o.xDateFormat,s=n.xAxis,a=s&&"datetime"===s.options.type&&l(t.key),h=o[i+"Format"];return a&&!r&&(r=this.getXDateFormat(t,o,s)),a&&r&&(h=h.replace("{point.key}","{point.key:"+r+"}")),A(h,{point:t,series:n})},bodyFormatter:function(t){return fi(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}};var zi;_=me&&me.documentElement.ontouchstart!==N;var Ei=ge.Pointer=function(t,e){this.init(t,e)};if(Ei.prototype={init:function(t,e){var i,n,o=e.chart,r=o.events,s=He?"":o.zoomType,a=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(s),this.zoomY=n=/y/.test(s),this.zoomHor=i&&!a||n&&a,this.zoomVert=n&&!a||i&&a,this.hasZoom=i||n,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},ge.Tooltip&&e.tooltip.enabled&&(t.tooltip=new Oi(t,e.tooltip),this.followTouchMove=wi(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(e,i){var n,o,r;return e=e||t.event,e.target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,i||(this.chartPosition=i=ui(this.chart.container)),r.pageX===N?(n=ke(e.x,e.clientX-i.left),o=e.y):(n=r.pageX-i.left,o=r.pageY-i.top),ki(e,{chartX:ye(n),chartY:ye(o)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return di(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},runPointActions:function(t){var e,i,n,o,r,s,a,l=this,h=l.chart,c=h.series,d=h.tooltip,p=d?d.shared:!1,u=h.hoverPoint,f=h.hoverSeries,g=[Number.MAX_VALUE,Number.MAX_VALUE],m=[],x=[];if(!p&&!f)for(i=0;i<c.length;i++)(c[i].directTouch||!c[i].options.stickyTracking)&&(c=[]);if(r=f&&(p?f.noSharedTooltip:f.directTouch),r&&u?x=[u]:(di(c,function(e){o=e.noSharedTooltip&&p,s=!p&&e.directTouch,e.visible&&!o&&!s&&wi(e.options.enableMouseTracking,!0)&&(a=e.searchPoint(t,!o&&1===e.kdDimensions),a&&m.push(a))}),di(m,function(t){t&&di(["dist","distX"],function(e,i){"number"==typeof t[e]&&t[e]<g[i]&&(g[i]=t[e],x[i]=t)})})),p)for(i=m.length;i--;)(m[i].clientX!==x[1].clientX||m[i].series.noSharedTooltip)&&m.splice(i,1);x[0]&&(x[0]!==this.prevKDPoint||d&&d.isHidden)?p&&!x[0].series.noSharedTooltip?(m.length&&d&&d.refresh(m,t),di(m,function(e){e.onMouseOver(t,e!==(f&&f.directTouch&&u||x[0]))}),this.prevKDPoint=x[1]):(d&&d.refresh(x[0],t),f&&f.directTouch||x[0].onMouseOver(t),this.prevKDPoint=x[0]):(e=f&&f.tooltipOptions.followPointer,d&&e&&!d.isHidden&&(n=d.getAnchor([{}],t),d.updatePosition({plotX:n[0],plotY:n[1]}))),l._onDocumentMouseMove||(l._onDocumentMouseMove=function(t){Fe[zi]&&Fe[zi].pointer.onDocumentMouseMove(t)},gi(me,"mousemove",l._onDocumentMouseMove)),di(p?m:[wi(x[1],u)],function(e){var i=e&&e.series;i&&di(["xAxis","yAxis","colorAxis"],function(n){i[n]&&i[n].drawCrosshair(t,e)})})},reset:function(t,e){var i=this,n=i.chart,o=n.hoverSeries,r=n.hoverPoint,s=n.hoverPoints,a=n.tooltip,l=a&&a.shared?s:r;t=t&&a&&l,t&&di(f(l),function(e){void 0===e.plotX&&(t=!1)}),t?(a.refresh(l),r&&(r.setState(r.state,!0),di(n.axes,function(t){wi(t.options.crosshair&&t.options.crosshair.snap,!0)?t.drawCrosshair(null,r):t.hideCrosshair()}))):(r&&r.onMouseOut(),s&&di(s,function(t){t.setState()}),o&&o.onMouseOut(),a&&a.hide(e),i._onDocumentMouseMove&&(mi(me,"mousemove",i._onDocumentMouseMove),i._onDocumentMouseMove=null),di(n.axes,function(t){t.hideCrosshair()}),i.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(t,e){var i,n=this.chart;di(n.series,function(o){i=t||o.getPlotBox(),o.xAxis&&o.xAxis.zoomEnabled&&(o.group.attr(i),o.markerGroup&&(o.markerGroup.attr(i),o.markerGroup.clip(e?n.clipRect:null)),o.dataLabelsGroup&&o.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,o=n.options.chart,r=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,h=n.plotLeft,c=n.plotTop,d=n.plotWidth,p=n.plotHeight,u=this.selectionMarker,f=this.mouseDownX,g=this.mouseDownY,m=o.panKey&&t[o.panKey+"Key"];u&&u.touch||(h>r?r=h:r>h+d&&(r=h+d),c>s?s=c:s>c+p&&(s=c+p),this.hasDragged=Math.sqrt(Math.pow(f-r,2)+Math.pow(g-s,2)),this.hasDragged>10&&(e=n.isInsidePlot(f-h,g-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!m&&(u||(this.selectionMarker=u=n.renderer.rect(h,c,a?1:d,l?1:p,0).attr({fill:o.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),u&&a&&(i=r-f,u.attr({width:Ae(i),x:(i>0?0:i)+f})),u&&l&&(i=s-g,u.attr({height:Ae(i),y:(i>0?0:i)+g})),e&&!u&&o.panning&&n.pan(t,o.panning)))},drop:function(t){var e=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var o,r={originalEvent:t,xAxis:[],yAxis:[]},s=this.selectionMarker,a=s.attr?s.attr("x"):s.x,l=s.attr?s.attr("y"):s.y,h=s.attr?s.attr("width"):s.width,c=s.attr?s.attr("height"):s.height;(this.hasDragged||n)&&(di(i.axes,function(i){if(i.zoomEnabled&&p(i.min)&&(n||e[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var s=i.horiz,d="touchend"===t.type?i.minPixelPadding:0,u=i.toValue((s?a:l)+d),f=i.toValue((s?a+h:l+c)-d);r[i.coll].push({axis:i,min:we(u,f),max:ke(u,f)}),o=!0}}),o&&xi(i,"selection",r,function(t){i.zoom(ki(t,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(m(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Fe[zi]&&Fe[zi].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition;t=this.normalize(t,i),!i||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(t){var e=Fe[zi];e&&(t.relatedTarget||t.toElement)&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;p(zi)&&Fe[zi]&&Fe[zi].mouseIsDown||(zi=e.index),t=this.normalize(t),t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=u(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(qe+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement;!e||!i||e.options.stickyTracking||this.inClass(i,qe+"tooltip")||this.inClass(i,qe+"series-"+e.index)||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,i=e.hoverPoint,n=e.plotLeft,o=e.plotTop;t=this.normalize(t),e.cancelClick||(i&&this.inClass(t.target,qe+"tracker")?(xi(i.series,"click",ki(t,{point:i})),e.hoverPoint&&i.firePointEvent("click",t)):(ki(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-n,t.chartY-o)&&xi(e,"click",t)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},gi(e,"mouseleave",t.onContainerMouseLeave),1===Ne&&gi(me,"mouseup",t.onDocumentMouseUp),_&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Ne&&gi(me,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;mi(this.chart.container,"mouseleave",this.onContainerMouseLeave),Ne||(mi(me,"mouseup",this.onDocumentMouseUp),mi(me,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},ki(ge.Pointer.prototype,{pinchTranslate:function(t,e,i,n,o,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,i,n,o,r),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,i,n,o,r)},pinchTranslateDirection:function(t,e,i,n,o,r,s,a){var l,h,c,d,p,u,f=this.chart,g=t?"x":"y",m=t?"X":"Y",x="chart"+m,y=t?"width":"height",v=f["plot"+(t?"Left":"Top")],b=a||1,k=f.inverted,w=f.bounds[t?"h":"v"],A=1===e.length,S=e[0][x],T=i[0][x],P=!A&&e[1][x],C=!A&&i[1][x],M=function(){!A&&Ae(S-P)>20&&(b=a||Ae(T-C)/Ae(S-P)),c=(v-T)/b+S,l=f["plot"+(t?"Width":"Height")]/b};M(),h=c,h<w.min?(h=w.min,d=!0):h+l>w.max&&(h=w.max-l,d=!0),d?(T-=.8*(T-s[g][0]),A||(C-=.8*(C-s[g][1])),M()):s[g]=[T,C],k||(r[g]=c-v,r[y]=l),u=k?t?"scaleY":"scaleX":"scale"+m,p=k?1/b:b,o[y]=l,o[g]=h,n[u]=b,n["translate"+m]=p*v+(T-p*S)},pinch:function(t){var e=this,i=e.chart,n=e.pinchDown,o=t.touches,r=o.length,s=e.lastValidTouch,a=e.hasZoom,l=e.selectionMarker,h={},c=1===r&&(e.inClass(t.target,qe+"tracker")&&i.runTrackerClick||e.runChartClick),d={};r>1&&(e.initiated=!0),a&&e.initiated&&!c&&t.preventDefault(),fi(o,function(t){return e.normalize(t)}),"touchstart"===t.type?(di(o,function(t,e){n[e]={chartX:t.chartX,chartY:t.chartY}}),s.x=[n[0].chartX,n[1]&&n[1].chartX],s.y=[n[0].chartY,n[1]&&n[1].chartY],di(i.axes,function(t){if(t.zoomEnabled){var e=i.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,o=t.toPixels(wi(t.options.min,t.dataMin)),r=t.toPixels(wi(t.options.max,t.dataMax)),s=we(o,r),a=ke(o,r);e.min=we(t.pos,s-n),e.max=ke(t.pos+t.len,a+n)}}),e.res=!0):n.length&&(l||(e.selectionMarker=l=ki({destroy:Ye,touch:!0},i.plotBox)),e.pinchTranslate(n,o,h,l,d,s),e.hasPinched=a,e.scaleGroups(h,d),!a&&e.followTouchMove&&1===r?this.runPointActions(e.normalize(t)):e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var i=this.chart;zi=i.index,1===t.touches.length?(t=this.normalize(t),i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&!i.openMenu?(e&&this.runPointActions(t),this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){Fe[zi]&&Fe[zi].pointer.drop(t)}}),t.PointerEvent||t.MSPointerEvent){var Ri={},Wi=!!t.PointerEvent,Hi=function(){var t,e=[];e.item=function(t){return this[t]};for(t in Ri)Ri.hasOwnProperty(t)&&e.push({pageX:Ri[t].pageX,pageY:Ri[t].pageY,target:Ri[t].target});return e},Xi=function(t,e,i,n){var o;"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Fe[zi]||(n(t),o=Fe[zi].pointer,o[e]({type:i,target:t.currentTarget,preventDefault:Ye,touches:Hi()}))};ki(Ei.prototype,{onContainerPointerDown:function(t){Xi(t,"onContainerTouchStart","touchstart",function(t){Ri[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){Xi(t,"onContainerTouchMove","touchmove",function(t){Ri[t.pointerId]={pageX:t.pageX,pageY:t.pageY},Ri[t.pointerId].target||(Ri[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){Xi(t,"onDocumentTouchEnd","touchend",function(t){delete Ri[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,Wi?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,Wi?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(me,Wi?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Ai(Ei.prototype,"init",function(t,e,i){t.call(this,e,i),this.hasZoom&&m(e.container,{"-ms-touch-action":Qe,"touch-action":Qe})}),Ai(Ei.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(gi)}),Ai(Ei.prototype,"destroy",function(t){this.batchMSEvents(mi),t.call(this)})}var Gi=ge.Legend=function(t,e){this.init(t,e)};Gi.prototype={init:function(t,e){var i,o=this,r=e.itemStyle,s=e.itemMarginTop||0;this.options=e,e.enabled&&(o.itemStyle=r,o.itemHiddenStyle=n(r,e.itemHiddenStyle),o.itemMarginTop=s,o.padding=i=wi(e.padding,8),o.initialItemX=i,o.initialItemY=i-5,o.maxItemWidth=0,o.chart=t,o.itemHeight=0,o.symbolWidth=wi(e.symbolWidth,16),o.pages=[],o.render(),gi(o.chart,"endResize",function(){o.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n,o=this,r=o.options,s=t.legendItem,a=t.legendLine,l=t.legendSymbol,h=o.itemHiddenStyle.color,c=e?r.itemStyle.color:h,d=e?t.legendColor||t.color||"#CCC":h,p=t.options&&t.options.marker,u={fill:d};if(s&&s.css({fill:c,color:c}),a&&a.attr({stroke:d}),l){if(p&&l.isMarker){u.stroke=d,p=t.convertAttribs(p);for(i in p)n=p[i],n!==N&&(u[i]=n)}l.attr(u)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,o=!i.rtl,r=t._legendItemPos,s=r[0],a=r[1],l=t.checkbox,h=t.legendGroup;
h&&h.element&&h.translate(o?s:e.legendWidth-s-2*n-4,a),l&&(l.x=s,l.y=a)},destroyItem:function(t){var e=t.checkbox;di(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&D(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy()),e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight,o=this.titleHeight;i&&(e=i.translateY,di(this.allItems,function(r){var s,a=r.checkbox;a&&(s=e+o+a.y+(t||0)+3,m(a,{left:i.translateX+r.checkboxOffset+a.x-20+Je,top:s+Je,display:s>e-6&&e+n-6>s?"":Qe}))}))},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,o=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=this.title.getBBox(),o=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:o})),this.titleHeight=o},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?A(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e,i,o,r=this,s=r.chart,a=s.renderer,l=r.options,h="horizontal"===l.layout,c=r.symbolWidth,d=l.symbolPadding,p=r.itemStyle,u=r.itemHiddenStyle,f=r.padding,g=h?wi(l.itemDistance,20):0,m=!l.rtl,x=l.width,y=l.itemMarginBottom||0,v=r.itemMarginTop,b=r.initialItemX,k=t.legendItem,w=t.series&&t.series.drawLegendSymbol?t.series:t,A=w.options,S=r.createCheckboxForItem&&A&&A.showCheckbox,T=l.useHTML;k||(t.legendGroup=a.g("legend-item").attr({zIndex:1}).add(r.scrollGroup),t.legendItem=k=a.text("",m?c+d:-d,r.baseline||0,T).css(n(t.visible?p:u)).attr({align:m?"left":"right",zIndex:2}).add(t.legendGroup),r.baseline||(r.fontMetrics=a.fontMetrics(p.fontSize,k),r.baseline=r.fontMetrics.f+3+v,k.attr("y",r.baseline)),w.drawLegendSymbol(r,t),r.setItemEvents&&r.setItemEvents(t,k,T,p,u),S&&r.createCheckboxForItem(t)),r.colorizeItem(t,t.visible),r.setText(t),i=k.getBBox(),o=t.checkboxOffset=l.itemWidth||t.legendItemWidth||c+d+i.width+g+(S?20:0),r.itemHeight=e=ye(t.legendItemHeight||i.height),h&&r.itemX-b+o>(x||s.chartWidth-2*f-b-l.x)&&(r.itemX=b,r.itemY+=v+r.lastLineHeight+y,r.lastLineHeight=0),r.maxItemWidth=ke(r.maxItemWidth,o),r.lastItemY=v+r.itemY+y,r.lastLineHeight=ke(e,r.lastLineHeight),t._legendItemPos=[r.itemX,r.itemY],h?r.itemX+=o:(r.itemY+=v+e+y,r.lastLineHeight=e),r.offsetWidth=x||ke((h?r.itemX-b-g:o)+f,r.offsetWidth)},getAllItems:function(){var t=[];return di(this.chart.series,function(e){var i=e.options;wi(i.showInLegend,p(i.linkedTo)?!1:N,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},adjustMargins:function(t,e){var i=this.chart,n=this.options,o=n.align.charAt(0)+n.verticalAlign.charAt(0)+n.layout.charAt(0);this.display&&!n.floating&&di([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(r,s){r.test(o)&&!p(t[s])&&(i[si[s]]=ke(i[si[s]],i.legend[(s+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][s]*n[s%2?"x":"y"]+wi(n.margin,12)+e[s]))})},render:function(){var t,e,i,n,o=this,r=o.chart,s=r.renderer,a=o.group,l=o.box,h=o.options,c=o.padding,d=h.borderWidth,p=h.backgroundColor;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,a||(o.group=a=s.g("legend").attr({zIndex:7}).add(),o.contentGroup=s.g().attr({zIndex:1}).add(a),o.scrollGroup=s.g().add(o.contentGroup)),o.renderTitle(),t=o.getAllItems(),P(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),h.reversed&&t.reverse(),o.allItems=t,o.display=e=!!t.length,o.lastLineHeight=0,di(t,function(t){o.renderItem(t)}),i=(h.width||o.offsetWidth)+c,n=o.lastItemY+o.lastLineHeight+o.titleHeight,n=o.handleOverflow(n),n+=c,(d||p)&&(l?i>0&&n>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:i,height:n})),l.isNew=!1):(o.box=l=s.rect(0,0,i,n,h.borderRadius,d||0).attr({stroke:h.borderColor,"stroke-width":d||0,fill:p||Qe}).add(a).shadow(h.shadow),l.isNew=!0),l[e?"show":"hide"]()),o.legendWidth=i,o.legendHeight=n,di(t,function(t){o.positionItem(t)}),e&&a.align(ki({width:i,height:n},h),!0,"spacingBox"),r.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,o=this.chart,r=o.renderer,s=this.options,a=s.y,l="top"===s.verticalAlign,h=o.spacingBox.height+(l?-a:a)-this.padding,c=s.maxHeight,d=this.clipRect,p=s.navigation,u=wi(p.animation,!0),f=p.arrowSize||12,g=this.nav,m=this.pages,x=this.padding,y=this.allItems,v=function(t){d.attr({height:t}),n.contentGroup.div&&(n.contentGroup.div.style.clip="rect("+x+"px,9999px,"+(x+t)+"px,0)")};return"horizontal"===s.layout&&(h/=2),c&&(h=we(h,c)),m.length=0,t>h?(this.clipHeight=e=ke(h-20-this.titleHeight-x,0),this.currentPage=wi(this.currentPage,1),this.fullHeight=t,di(y,function(t,n){var o=t._legendItemPos[1],r=ye(t.legendItem.getBBox().height),s=m.length;(!s||o-m[s-1]>e&&(i||o)!==m[s-1])&&(m.push(i||o),s++),n===y.length-1&&o+r-m[s-1]>e&&m.push(o),o!==i&&(i=o)}),d||(d=n.clipRect=r.clipRect(0,x,9999,0),n.contentGroup.clip(d)),v(e),g||(this.nav=g=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,f,f).on("click",function(){n.scroll(-1,u)}).add(g),this.pager=r.text("",15,10).css(p.style).add(g),this.down=r.symbol("triangle-down",0,0,f,f).on("click",function(){n.scroll(1,u)}).add(g)),n.scroll(0),t=h):g&&(v(o.chartHeight),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pages,o=n.length,r=this.currentPage+t,s=this.clipHeight,a=this.options.navigation,l=a.activeColor,h=a.inactiveColor,c=this.pager,d=this.padding;r>o&&(r=o),r>0&&(e!==N&&B(e,this.chart),this.nav.attr({translateX:d,translateY:s+this.padding+7+this.titleHeight,visibility:$e}),this.up.attr({fill:1===r?h:l}).css({cursor:1===r?"default":"pointer"}),c.attr({text:r+"/"+o}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===o?h:l}).css({cursor:r===o?"default":"pointer"}),i=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=r,this.positionCheckboxes(i))}};var Yi=ge.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-i+1,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,o=this.options,r=o.marker,s=t.symbolWidth,a=this.chart.renderer,l=this.legendGroup,h=t.baseline-ye(.3*t.fontMetrics.b);o.lineWidth&&(n={"stroke-width":o.lineWidth},o.dashStyle&&(n.dashstyle=o.dashStyle),this.legendLine=a.path([ti,0,h,ei,s,h]).attr(n).add(l)),r&&r.enabled!==!1&&(e=r.radius,this.legendSymbol=i=a.symbol(this.symbol,s/2-e,h-e,2*e,2*e,r).add(l),i.isMarker=!0)}};(/Trident\/7\.0/.test(Me)||Oe)&&Ai(Gi.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)});var Fi=ge.Chart=function(){this.getArgs.apply(this,arguments)};ge.chart=function(t,e,i){return new Fi(t,e,i)},Fi.prototype={callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(r(t[0])||t[0].nodeName)&&(this.renderTo=t.shift()),this.init(t[0],t[1])},init:function(t,e){var i,o=t.series;t.series=null,i=n(j,t),i.series=t.series=o,this.userOptions=t;var r=i.chart;this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var s=r.events;this.bounds={h:{},v:{}},this.callback=e,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var a,l=this;if(l.index=Fe.length,Fe.push(l),Ne++,r.reflow!==!1&&gi(l,"load",function(){l.initReflow()}),s)for(a in s)gi(l,a,s[a]);l.xAxis=[],l.yAxis=[],l.animation=He?!1:wi(r.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(t){var i,n=this,o=n.options.chart,r=t.type||o.type||o.defaultSeriesType,s=li[r];return s||e(17,!0),i=new s,i.init(this,t),i},isInsidePlot:function(t,e,i){var n=i?e:t,o=i?t:e;return n>=0&&n<=this.plotWidth&&o>=0&&o<=this.plotHeight},redraw:function(t){var e,i,n,o=this,r=o.axes,s=o.series,a=o.pointer,l=o.legend,h=o.isDirtyLegend,c=o.hasCartesianSeries,d=o.isDirtyBox,p=s.length,u=p,f=o.renderer,g=f.isHidden(),m=[];for(B(t,o),g&&o.cloneRenderTo(),o.layOutTitles();u--;)if(n=s[u],n.options.stacking&&(e=!0,n.isDirty)){i=!0;break}if(i)for(u=p;u--;)n=s[u],n.options.stacking&&(n.isDirty=!0);di(s,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),h=!0)}),h&&l.options.enabled&&(l.render(),o.isDirtyLegend=!1),e&&o.getStacks(),c&&(o.isResizing||(o.maxTicks=null,di(r,function(t){t.setScale()}))),o.getMargins(),c&&(di(r,function(t){t.isDirty&&(d=!0)}),di(r,function(t){var i=t.min+","+t.max;t.extKey!==i&&(t.extKey=i,m.push(function(){xi(t,"afterSetExtremes",ki(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(d||e)&&t.redraw()})),d&&o.drawChartBox(),di(s,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),a&&a.reset(!0),f.draw(),xi(o,"redraw"),g&&o.cloneRenderTo(!0),di(m,function(t){t.call()})},get:function(t){var e,i,n,o=this,r=o.axes,s=o.series;for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<s.length;e++)for(n=s[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e=this,i=this.options,n=i.xAxis=f(i.xAxis||{}),o=i.yAxis=f(i.yAxis||{});di(n,function(t,e){t.index=e,t.isX=!0}),di(o,function(t,e){t.index=e}),t=n.concat(o),di(t,function(t){new Bi(e,t)})},getSelectedPoints:function(){var t=[];return di(this.series,function(e){t=t.concat(pi(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return pi(this.series,function(t){return t.selected})},setTitle:function(t,e,i){var o,r,s=this,a=s.options;o=a.title=n(a.title,t),r=a.subtitle=n(a.subtitle,e),di([["title",t,o],["subtitle",e,r]],function(t){var e=t[0],i=s[e],n=t[1],o=t[2];i&&n&&(s[e]=i=i.destroy()),o&&o.text&&!i&&(s[e]=s.renderer.text(o.text,0,0,o.useHTML).attr({align:o.align,"class":qe+e,zIndex:o.zIndex||4}).css(o.style).add())}),s.layOutTitles(i)},layOutTitles:function(t){var e,i=0,n=this.title,o=this.subtitle,r=this.options,s=r.title,a=r.subtitle,l=this.renderer,h=this.spacingBox.width-44;n&&(n.css({width:(s.width||h)+Je}).align(ki({y:l.fontMetrics(s.style.fontSize,n).b-3},s),!1,"spacingBox"),s.floating||s.verticalAlign||(i=n.getBBox().height)),o&&(o.css({width:(a.width||h)+Je}).align(ki({y:i+(s.margin-13)+l.fontMetrics(a.style.fontSize,n).b},a),!1,"spacingBox"),a.floating||a.verticalAlign||(i=be(i+o.getBBox().height))),e=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&wi(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this,e=t.options.chart,i=e.width,n=e.height,o=t.renderToClone||t.renderTo;p(i)||(t.containerWidth=hi(o,"width")),p(n)||(t.containerHeight=hi(o,"height")),t.chartWidth=ke(0,i||t.containerWidth||600),t.chartHeight=ke(0,wi(n,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),D(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),m(e,{position:je,top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),me.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var t,i,n,s,a,l=this,h=l.options,c=h.chart,d=l.renderTo,p="data-highcharts-chart",f="highcharts-"+Ge++;d||(l.renderTo=d=c.renderTo),r(d)&&(l.renderTo=d=me.getElementById(d)),d||e(13,!0),s=o(u(d,p)),!isNaN(s)&&Fe[s]&&Fe[s].hasRendered&&Fe[s].destroy(),u(d,p,l.index),d.innerHTML="",c.skipClone||d.offsetWidth||l.cloneRenderTo(),l.getChartSize(),i=l.chartWidth,n=l.chartHeight,l.container=t=x(Ue,{className:qe+"container"+(c.className?" "+c.className:""),id:f},ki({position:Ze,overflow:Ke,width:i+Je,height:n+Je,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},c.style),l.renderToClone||d),l._cursor=t.style.cursor,a=ge[c.renderer]||V,l.renderer=new a(t,i,n,c.style,c.forExport,h.exporting&&h.exporting.allowHTML),He&&l.renderer.create(l,t,i,n),l.renderer.chartIndex=l.index},getMargins:function(t){var e=this,i=e.spacing,n=e.margin,o=e.titleOffset;e.resetMargins(),o&&!p(n[0])&&(e.plotTop=ke(e.plotTop,o+e.options.title.margin+i[0])),e.legend.adjustMargins(n,i),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],i=t.margin;t.hasCartesianSeries&&di(t.axes,function(t){t.visible&&t.getOffset()}),di(si,function(n,o){p(i[o])||(t[n]+=e[o])}),t.setChartSize()},reflow:function(e){var i=this,n=i.options.chart,o=i.renderTo,r=n.width||hi(o,"width"),s=n.height||hi(o,"height"),a=e?e.target:t;i.hasUserSize||i.isPrinting||!r||!s||a!==t&&a!==me||((r!==i.containerWidth||s!==i.containerHeight)&&(clearTimeout(i.reflowTimeout),i.reflowTimeout=g(function(){i.container&&(i.setSize(r,s,!1),i.hasUserSize=null)},e?100:0)),i.containerWidth=r,i.containerHeight=s)},initReflow:function(){var e=this,i=function(t){e.reflow(t)};gi(t,"resize",i),gi(e,"destroy",function(){mi(t,"resize",i)})},setSize:function(t,e,i){var n,o,r,s=this,a=s.renderer;s.isResizing+=1,B(i,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,p(t)&&(s.chartWidth=n=ke(0,ye(t)),s.hasUserSize=!!n),p(e)&&(s.chartHeight=o=ke(0,ye(e))),r=a.globalAnimation,(r?yi:m)(s.container,{width:n+Je,height:o+Je},r),s.setChartSize(!0),a.setSize(n,o,i),s.maxTicks=null,di(s.axes,function(t){t.isDirty=!0,t.setScale()}),di(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(i),s.oldChartHeight=null,xi(s,"resize"),r=a.globalAnimation,g(function(){s&&xi(s,"endResize",null,function(){s.isResizing-=1})},r===!1?0:r&&r.duration||500)},setChartSize:function(t){var e,i,n,o,r,s,a,l=this,h=l.inverted,c=l.renderer,d=l.chartWidth,p=l.chartHeight,u=l.options.chart,f=l.spacing,g=l.clipOffset;l.plotLeft=n=ye(l.plotLeft),l.plotTop=o=ye(l.plotTop),l.plotWidth=r=ke(0,ye(d-n-l.marginRight)),l.plotHeight=s=ke(0,ye(p-o-l.marginBottom)),l.plotSizeX=h?s:r,l.plotSizeY=h?r:s,l.plotBorderWidth=u.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:f[3],y:f[0],width:d-f[3]-f[1],height:p-f[0]-f[2]},l.plotBox=c.plotBox={x:n,y:o,width:r,height:s},a=2*ve(l.plotBorderWidth/2),e=be(ke(a,g[3])/2),i=be(ke(a,g[0])/2),l.clipBox={x:e,y:i,width:ve(l.plotSizeX-ke(a,g[1])/2-e),height:ke(0,ve(l.plotSizeY-ke(a,g[2])/2-i))},t||di(l.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this;di(si,function(e,i){t[e]=wi(t.margin[i],t.spacing[i])}),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,o=i.renderer,r=i.chartWidth,s=i.chartHeight,a=i.chartBackground,l=i.plotBackground,h=i.plotBorder,c=i.plotBGImage,d=n.borderWidth||0,p=n.backgroundColor,u=n.plotBackgroundColor,f=n.plotBackgroundImage,g=n.plotBorderWidth||0,m=i.plotLeft,x=i.plotTop,y=i.plotWidth,v=i.plotHeight,b=i.plotBox,k=i.clipRect,w=i.clipBox;t=d+(n.shadow?8:0),(d||p)&&(a?a.animate(a.crisp({width:r-t,height:s-t})):(e={fill:p||Qe},d&&(e.stroke=n.borderColor,e["stroke-width"]=d),i.chartBackground=o.rect(t/2,t/2,r-t,s-t,n.borderRadius,d).attr(e).addClass(qe+"background").add().shadow(n.shadow))),u&&(l?l.animate(b):i.plotBackground=o.rect(m,x,y,v,0).attr({fill:u}).add().shadow(n.plotShadow)),f&&(c?c.animate(b):i.plotBGImage=o.image(f,m,x,y,v).add()),k?k.animate({width:w.width,height:w.height}):i.clipRect=o.clipRect(w),g&&(h?(h.strokeWidth=-g,h.animate(h.crisp({x:m,y:x,width:y,height:v}))):i.plotBorder=o.rect(m,x,y,v,0,-g).attr({stroke:n.plotBorderColor,"stroke-width":g,fill:Qe,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,o=n.options.chart,r=n.options.series;di(["inverted","angular","polar"],function(s){for(t=li[o.type||o.defaultSeriesType],i=n[s]||o[s]||t&&t.prototype[s],e=r&&r.length;!i&&e--;)t=li[r[e].type],t&&t.prototype[s]&&(i=!0);n[s]=i})},linkSeries:function(){var t=this,e=t.series;di(e,function(t){t.linkedSeries.length=0}),di(e,function(e){var i=e.options.linkedTo;r(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i),i&&(i.linkedSeries.push(e),e.linkedParent=i,e.visible=wi(e.options.visible,i.options.visible,e.visible)))})},renderSeries:function(){di(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var t=this,e=t.options.labels;e.items&&di(e.items,function(i){var n=ki(e.style,i.style),r=o(n.left)+t.plotLeft,s=o(n.top)+t.plotTop+12;delete n.left,delete n.top,t.renderer.text(i.html,r,s).attr({zIndex:2}).css(n).add()})},render:function(){var t,e,i,n,o=this,r=o.axes,s=o.renderer,a=o.options;o.setTitle(),o.legend=new Gi(o,a.legend),o.getStacks&&o.getStacks(),o.getMargins(!0),o.setChartSize(),t=o.plotWidth,e=o.plotHeight=o.plotHeight-21,di(r,function(t){t.setScale()}),o.getAxisMargins(),i=t/o.plotWidth>1.1,n=e/o.plotHeight>1.05,(i||n)&&(o.maxTicks=null,di(r,function(t){(t.horiz&&i||!t.horiz&&n)&&t.setTickInterval(!0)}),o.getMargins()),o.drawChartBox(),o.hasCartesianSeries&&di(r,function(t){t.visible&&t.render()}),o.seriesGroup||(o.seriesGroup=s.g("series-group").attr({zIndex:3}).add()),o.renderSeries(),o.renderLabels(),o.showCredits(a.credits),o.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(t.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var t,e=this,i=e.axes,n=e.series,o=e.container,r=o&&o.parentNode;for(xi(e,"destroy"),Fe[e.index]=N,Ne--,e.renderTo.removeAttribute("data-highcharts-chart"),mi(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();di(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),o&&(o.innerHTML="",mi(o),r&&D(o));for(t in e)delete e[t]},isReadyToRender:function(){var e=this;return!Re&&t==t.top&&"complete"!==me.readyState||He&&!t.canvg?(He?Ii.push(function(){e.firstRender()},e.options.global.canvasToolsURL):me.attachEvent("onreadystatechange",function(){me.detachEvent("onreadystatechange",e.firstRender),"complete"===me.readyState&&e.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options;t.isReadyToRender()&&(t.getContainer(),xi(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),di(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),xi(t,"beforeRender"),ge.Pointer&&(t.pointer=new Ei(t,e)),t.render(),t.renderer.draw(),t.renderer.imgCount||t.onload(),t.cloneRenderTo(!0))},onload:function(){var t=this;di([this.callback].concat(this.callbacks),function(e){e&&void 0!==t.index&&e.apply(t,[t])}),t.renderer.imgCount||xi(t,"load")},splashArray:function(t,e){var i=e[t],n=s(i)?i:[i,i,i,i];return[wi(e[t+"Top"],n[0]),wi(e[t+"Right"],n[1]),wi(e[t+"Bottom"],n[2]),wi(e[t+"Left"],n[3])]}};var Ni=ge.CenteredSeriesMixin={getCenter:function(){var t,e,i,n=this.options,o=this.chart,r=2*(n.slicedOffset||0),s=o.plotWidth-2*r,a=o.plotHeight-2*r,l=n.center,h=[wi(l[0],"50%"),wi(l[1],"50%"),n.size||"100%",n.innerSize||0],c=we(s,a);for(e=0;4>e;++e)i=h[e],t=2>e||2===e&&/%$/.test(i),h[e]=b(i,[s,a,c,h[2]][e])+(t?r:0);return h[3]>h[2]&&(h[3]=h[2]),h}},Vi=function(){};Vi.prototype={init:function(t,e,i){var n,o=this;return o.series=t,o.color=t.color,o.applyOptions(e,i),o.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,o.color=o.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,o},applyOptions:function(t,e){var i=this,n=i.series,o=n.options.pointValKey||n.pointValKey;return t=Vi.prototype.optionsToObject.call(this,t),ki(i,t),i.options=i.options?ki(i.options,t):t,o&&(i.y=i[o]),i.isNull=null===i.y,"number"!=typeof i.x&&n&&(i.x=void 0===e?n.autoIncrement():e),i},optionsToObject:function(t){var e,i={},n=this.series,o=n.options.keys,r=o||n.pointArrayMap||["y"],s=r.length,l=0,h=0;if("number"==typeof t||null===t)i[r[0]]=t;else if(a(t))for(!o&&t.length>s&&(e=typeof t[0],"string"===e?i.name=t[0]:"number"===e&&(i.x=t[0]),l++);s>h;)o&&void 0===t[l]||(i[r[h]]=t[l]),l++,h++;else"object"==typeof t&&(i=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var t,e=this,i=e.series,n=i.chart,o=n.hoverPoints;n.pointCount--,o&&(e.setState(),d(o,e),o.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(mi(e),e.destroyElements()),e.legendItem&&n.legend.destroyItem(e);for(t in e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],n=6;n--;)t=i[n],e[t]&&(e[t]=e[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=wi(i.valueDecimals,""),o=i.valuePrefix||"",r=i.valueSuffix||"";return di(e.pointArrayMap||["y"],function(e){e="{point."+e,(o||r)&&(t=t.replace(e+"}",o+e+"}"+r)),t=t.replace(e+"}",e+":,."+n+"f}")}),A(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,o=this.series,r=o.options;(r.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(i=function(t){n.select&&n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),xi(this,t,e,i)},visible:!0};var _i=ge.Series=function(){};_i.prototype={isCartesian:!0,type:"line",pointClass:Vi,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){var i,n,o=this,r=t.series,s=function(t,e){return wi(t.options.index,t._i)-wi(e.options.index,e._i)};o.chart=t,o.options=e=o.setOptions(e),o.linkedSeries=[],o.bindAxes(),ki(o,{name:e.name,state:ni,pointAttr:{},visible:e.visible!==!1,selected:e.selected===!0}),He&&(e.animation=!1),n=e.events;for(i in n)gi(o,i,n[i]);(n&&n.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),o.getColor(),o.getSymbol(),di(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(e.data,!1),o.isCartesian&&(t.hasCartesianSeries=!0),r.push(o),o._i=r.length-1,P(r,s),this.yAxis&&P(this.yAxis.series,s),di(r,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,i=this,n=i.options,o=i.chart;di(i.axisTypes||[],function(r){di(o[r],function(e){t=e.options,(n[r]===t.index||n[r]!==N&&n[r]===t.id||n[r]===N&&0===t.index)&&(e.series.push(i),i[r]=e,e.isDirty=!0)}),i[r]||i.optionalAxis===r||e(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,o="number"==typeof e?function(n){var o="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=o}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};di(i.parallelArrays,o)},autoIncrement:function(){var t,e,i=this.options,n=this.xIncrement,o=i.pointIntervalUnit;return n=wi(n,i.pointStart,0),this.pointInterval=e=wi(this.pointInterval,i.pointInterval,1),("month"===o||"year"===o)&&(t=new J(n),t="month"===o?+t[ue](t[se]()+e):+t[fe](t[ae]()+e),e=t-n),this.xIncrement=n+e,n},setOptions:function(t){var e,i,o=this.chart,r=o.options,s=r.plotOptions,a=o.userOptions||{},l=a.plotOptions||{},h=s[this.type];return this.userOptions=t,e=n(h,s.series,t),this.tooltipOptions=n(j.tooltip,j.plotOptions[this.type].tooltip,a.tooltip,l.series&&l.series.tooltip,l[this.type]&&l[this.type].tooltip,t.tooltip),null===h.marker&&delete e.marker,this.zoneAxis=e.zoneAxis,i=this.zones=(e.zones||[]).slice(),!e.negativeColor&&!e.negativeFillColor||e.zones||i.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,color:e.negativeColor,fillColor:e.negativeFillColor}),i.length&&p(i[i.length-1].value)&&i.push({color:this.color,fillColor:this.fillColor}),e},getCyclic:function(t,e,i){var n,o=this.userOptions,r="_"+t+"Index",s=t+"Counter";e||(p(o[r])?n=o[r]:(o[r]=n=this.chart[s]%i.length,this.chart[s]+=1),e=i[n]),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||Si[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:Yi.drawLineMarker,setData:function(t,i,n,o){var s,h,c,d=this,u=d.points,f=u&&u.length||0,g=d.options,m=d.chart,x=null,y=d.xAxis,v=y&&!!y.categories,b=g.turboThreshold,k=this.xData,w=this.yData,A=d.pointArrayMap,S=A&&A.length;if(t=t||[],s=t.length,i=wi(i,!0),o!==!1&&s&&f===s&&!d.cropped&&!d.hasGroupedData&&d.visible)di(t,function(t,e){u[e].update&&t!==g.data[e]&&u[e].update(t,!1,null,!1)});else{if(d.xIncrement=null,d.colorCounter=0,di(this.parallelArrays,function(t){d[t+"Data"].length=0}),b&&s>b){for(h=0;null===x&&s>h;)x=t[h],h++;if(l(x)){var T=wi(g.pointStart,0),P=wi(g.pointInterval,1);for(h=0;s>h;h++)k[h]=T,w[h]=t[h],T+=P;d.xIncrement=T}else if(a(x))if(S)for(h=0;s>h;h++)c=t[h],k[h]=c[0],w[h]=c.slice(1,S+1);else for(h=0;s>h;h++)c=t[h],k[h]=c[0],w[h]=c[1];else e(12)}else for(h=0;s>h;h++)t[h]!==N&&(c={series:d},d.pointClass.prototype.applyOptions.apply(c,[t[h]]),d.updateParallelArrays(c,h),v&&p(c.name)&&(y.names[c.x]=c.name));for(r(w[0])&&e(14,!0),d.data=[],d.options.data=d.userOptions.data=t,h=f;h--;)u[h]&&u[h].destroy&&u[h].destroy();y&&(y.minRange=y.userMinRange),d.isDirty=d.isDirtyData=m.isDirtyBox=!0,n=!1}"point"===g.legendType&&(this.processData(),this.generatePoints()),i&&m.redraw(n)},processData:function(t){var i,n,o,r,s,a,l,h,c=this,d=c.xData,p=c.yData,u=d.length,f=0,g=c.xAxis,m=c.options,x=m.cropThreshold,y=c.getExtremesFromAll||m.getExtremesFromAll,v=c.isCartesian,b=g&&g.val2lin,k=g&&g.isLog;if(v&&!c.isDirty&&!g.isDirty&&!c.yAxis.isDirty&&!t)return!1;for(g&&(a=g.getExtremes(),l=a.min,h=a.max),v&&c.sorted&&!y&&(!x||u>x||c.forceCrop)&&(d[u-1]<l||d[0]>h?(d=[],p=[]):(d[0]<l||d[u-1]>h)&&(i=this.cropData(c.xData,c.yData,l,h),d=i.xData,p=i.yData,f=i.start,n=!0)),s=d.length||1;--s;)o=k?b(d[s])-b(d[s-1]):d[s]-d[s-1],o>0&&(r===N||r>o)?r=o:0>o&&c.requireSorting&&e(15);c.cropped=n,c.cropStart=f,c.processedXData=d,c.processedYData=p,c.closestPointRange=r},cropData:function(t,e,i,n){var o,r,s=t.length,a=0,l=s,h=wi(this.cropShoulder,1);for(o=0;s>o;o++)if(t[o]>=i){a=ke(0,o-h);break}for(r=o;s>r;r++)if(t[r]>n){l=r+h;break}return{xData:t.slice(a,l),yData:e.slice(a,l),start:a,end:l}},generatePoints:function(){var t,e,i,n,o=this,r=o.options,s=r.data,a=o.data,l=o.processedXData,h=o.processedYData,c=o.pointClass,d=l.length,p=o.cropStart||0,u=o.hasGroupedData,g=[];if(!a&&!u){var m=[];m.length=s.length,a=o.data=m}for(n=0;d>n;n++)e=p+n,u?g[n]=(new c).init(o,[l[n]].concat(f(h[n]))):(a[e]?i=a[e]:s[e]!==N&&(a[e]=i=(new c).init(o,s[e],l[n])),g[n]=i),g[n].index=e;if(a&&(d!==(t=a.length)||u))for(n=0;t>n;n++)n!==p||u||(n+=d),a[n]&&(a[n].destroyElements(),a[n].plotX=N);o.data=a,o.points=g},getExtremes:function(t){var e,i,n,o,r,s,a,l=this.xAxis,h=this.yAxis,c=this.processedXData,d=[],p=0,u=l.getExtremes(),f=u.min,g=u.max;for(t=t||this.stackedYData||this.processedYData,e=t.length,s=0;e>s;s++)if(o=c[s],r=t[s],i=null!==r&&r!==N&&(!h.isLog||r.length||r>0),n=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(c[s+1]||o)>=f&&(c[s-1]||o)<=g,i&&n)if(a=r.length)for(;a--;)null!==r[a]&&(d[p++]=r[a]);else d[p++]=r;this.dataMin=C(d),this.dataMax=M(d)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,i,n,o,r,s=this,a=s.options,h=a.stacking,c=s.xAxis,d=c.categories,u=s.yAxis,f=s.points,g=f.length,m=!!s.modifyValue,x=a.pointPlacement,y="between"===x||l(x),v=a.threshold,b=a.startFromThreshold?v:0,k=Number.MAX_VALUE;for(t=0;g>t;t++){var w,A,S=f[t],T=S.x,P=S.y,C=S.low,M=h&&u.stacks[(s.negStacks&&(b?0:v)>P?"-":"")+s.stackKey];u.isLog&&null!==P&&0>=P&&(S.y=P=null,e(10)),S.plotX=i=we(ke(-1e5,c.translate(T,0,0,0,1,x,"flags"===this.type)),1e5),h&&s.visible&&!S.isNull&&M&&M[T]&&(r=s.getStackIndicator(r,T,s.index),w=M[T],A=w.points[r.key],C=A[0],P=A[1],C===b&&(C=wi(v,u.min)),u.isLog&&0>=C&&(C=null),S.total=S.stackTotal=w.total,S.percentage=w.total&&S.y/w.total*100,S.stackY=P,w.setOffset(s.pointXOffset||0,s.barW||0)),S.yBottom=p(C)?u.translate(C,0,1,0,1):null,m&&(P=s.modifyValue(P,S)),S.plotY=n="number"==typeof P&&1/0!==P?we(ke(-1e5,u.translate(P,0,1,0,1)),1e5):N,S.isInside=n!==N&&n>=0&&n<=u.len&&i>=0&&i<=c.len,S.clientX=y?c.translate(T,0,0,0,1):i,S.negative=S.y<(v||0),S.category=d&&d[S.x]!==N?d[S.x]:S.x,t&&(k=we(k,Ae(i-o))),o=i}s.closestPointRangePx=k},getValidPoints:function(t){return pi(t||this.points,function(t){return!t.isNull})},setClip:function(t){var e=this.chart,i=this.options,n=e.renderer,o=e.inverted,r=this.clipBox,s=r||e.clipBox,a=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,s.height,i.xAxis,i.yAxis].join(","),l=e[a],h=e[a+"m"];l||(t&&(s.width=0,e[a+"m"]=h=n.clipRect(-99,o?-e.plotLeft:-e.plotTop,99,o?e.chartWidth:e.chartHeight)),e[a]=l=n.clipRect(s)),t&&(l.count+=1),i.clip!==!1&&(this.group.clip(t||r?l:e.clipRect),this.markerGroup.clip(h),this.sharedClipKey=a),t||(l.count-=1,l.count<=0&&a&&e[a]&&(r||(e[a]=e[a].destroy()),e[a+"m"]&&(e[a+"m"]=e[a+"m"].destroy())))},animate:function(t){var e,i,n=this,o=n.chart,r=n.options.animation;r&&!s(r)&&(r=Si[n.type].animation),t?n.setClip(r):(i=this.sharedClipKey,e=o[i],e&&e.animate({width:o.plotSizeX},r),o[i+"m"]&&o[i+"m"].animate({width:o.plotSizeX+99},r),n.animate=null)},afterAnimate:function(){this.setClip(),xi(this,"afterAnimate")},drawPoints:function(){var t,e,i,n,o,r,s,a,l,h,c,d,p,u=this,f=u.points,g=u.chart,m=u.options,x=m.marker,y=u.pointAttr[""],v=u.markerGroup,b=u.xAxis,k=wi(x.enabled,b.isRadial,u.closestPointRangePx>2*x.radius);if(x.enabled!==!1||u._hasPointMarkers)for(n=f.length;n--;)o=f[n],e=ve(o.plotX),i=o.plotY,l=o.graphic,h=o.marker||{},c=!!o.marker,d=k&&h.enabled===N||h.enabled,p=o.isInside,d&&i!==N&&!isNaN(i)&&null!==o.y?(t=o.pointAttr[o.selected?ri:ni]||y,r=t.r,s=wi(h.symbol,u.symbol),a=0===s.indexOf("url"),l?l[p?"show":"hide"](!0).attr(t).animate(ki({x:e-r,y:i-r},l.symbolName?{width:2*r,height:2*r}:{})):p&&(r>0||a)&&(o.graphic=l=g.renderer.symbol(s,e-r,i-r,2*r,2*r,c?h:x).attr(t).add(v))):l&&(o.graphic=l.destroy())},convertAttribs:function(t,e,i,n){var o,r,s=this.pointAttrToOptions,a={};t=t||{},e=e||{},i=i||{},n=n||{};for(o in s)r=s[o],a[o]=wi(t[r],e[o],i[o],n[o]);return a},getAttribs:function(){var t,e,i,n,o,r,s,a,l=this,h=l.options,c=Si[l.type].marker?h.marker:h,d=c.states,u=d[oi],f=l.color,g=l.options.negativeColor,m={stroke:f,fill:f},x=l.points||[],y=[],v=l.pointAttrToOptions,b=l.hasPointSpecificOptions,k=c.lineColor,w=c.fillColor,A=h.turboThreshold,S=l.zones,T=l.zoneAxis||"y";if(h.marker?(u.radius=u.radius||c.radius+u.radiusPlus,u.lineWidth=u.lineWidth||c.lineWidth+u.lineWidthPlus):(u.color=u.color||R(u.color||f).brighten(u.brightness).get(),u.negativeColor=u.negativeColor||R(u.negativeColor||g).brighten(u.brightness).get()),y[ni]=l.convertAttribs(c,m),di([oi,ri],function(t){y[t]=l.convertAttribs(d[t],y[ni])}),l.pointAttr=y,e=x.length,!A||A>e||b)for(;e--;){if(o=x[e],c=o.options&&o.options.marker||o.options,c&&c.enabled===!1&&(c.radius=0),S.length){for(i=0,n=S[i];o[T]>=n.value;)n=S[++i];o.color=o.fillColor=wi(n.color,l.color)}if(b=h.colorByPoint||o.color,o.options)for(a in v)p(c[v[a]])&&(b=!0);b?(c=c||{},r=[],d=c.states||{},t=d[oi]=d[oi]||{},(!h.marker||o.negative&&!t.fillColor&&!u.fillColor)&&(t[l.pointAttrToOptions.fill]=t.color||!o.options.color&&u[o.negative&&g?"negativeColor":"color"]||R(o.color).brighten(t.brightness||u.brightness).get()),s={color:o.color},w||(s.fillColor=o.color),k||(s.lineColor=o.color),c.hasOwnProperty("color")&&!c.color&&delete c.color,r[ni]=l.convertAttribs(ki(s,c),y[ni]),r[oi]=l.convertAttribs(d[oi],y[oi],r[ni]),r[ri]=l.convertAttribs(d[ri],y[ri],r[ni])):r=y,o.pointAttr=r
}},destroy:function(){var t,e,i,n,o,r=this,s=r.chart,a=/AppleWebKit\/533/.test(Me),l=r.data||[];for(xi(r,"destroy"),mi(r),di(r.axisTypes||[],function(t){o=r[t],o&&(d(o.series,r),o.isDirty=o.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),e=l.length;e--;)i=l[e],i&&i.destroy&&i.destroy();r.points=null,clearTimeout(r.animationTimeout);for(n in r)r[n]instanceof W&&!r[n].survive&&(t=a&&"group"===n?"hide":"destroy",r[n][t]());s.hoverSeries===r&&(s.hoverSeries=null),d(s.series,r);for(n in r)delete r[n]},getGraphPath:function(t,e,i){var n,o,r=this,s=r.options,a=s.step,l=[];return t=t||r.points,n=t.reversed,n&&t.reverse(),a={right:1,center:2}[a]||a&&3,a&&n&&(a=4-a),!s.connectNulls||e||i||(t=this.getValidPoints(t)),di(t,function(n,h){var c,d=n.plotX,u=n.plotY,f=t[h-1];(n.leftCliff||f&&f.rightCliff)&&!i&&(o=!0),n.isNull&&!p(e)&&h>0?o=!s.connectNulls:n.isNull&&!e?o=!0:(0===h||o?c=[ti,n.plotX,n.plotY]:r.getPointSpline?c=r.getPointSpline(t,n,h):a?(c=1===a?[ei,f.plotX,u]:2===a?[ei,(f.plotX+d)/2,f.plotY,ei,(f.plotX+d)/2,u]:[ei,d,f.plotY],c.push(ei,d,u)):c=[ei,d,u],l.push.apply(l,c),o=!1)}),r.graphPath=l,l},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color,e.dashStyle]],n=e.lineWidth,o="square"!==e.linecap,r=(this.gappedPath||this.getGraphPath).call(this),s=this.fillGraph&&this.color||Qe,a=this.zones;di(a,function(n,o){i.push(["zoneGraph"+o,n.color||t.color,n.dashStyle||e.dashStyle])}),di(i,function(i,a){var l,h=i[0],c=t[h];c?c.animate({d:r}):(n||s)&&r.length&&(l={stroke:i[1],"stroke-width":n,fill:s,zIndex:1},i[2]?l.dashstyle=i[2]:o&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[h]=t.chart.renderer.path(r).attr(l).add(t.group).shadow(2>a&&e.shadow))})},applyZones:function(){var t,e,i,n,o,r,s,a=this,l=this.chart,h=l.renderer,c=this.zones,d=this.clips||[],p=this.graph,u=this.area,f=ke(l.chartWidth,l.chartHeight),g=this[(this.zoneAxis||"y")+"Axis"],m=g.reversed,x=l.inverted,y=g.horiz,v=!1;c.length&&(p||u)&&g.min!==N&&(p&&p.hide(),u&&u.hide(),n=g.getExtremes(),di(c,function(c,b){t=m?y?l.plotWidth:0:y?0:g.toPixels(n.min),t=we(ke(wi(e,t),0),f),e=we(ke(ye(g.toPixels(wi(c.value,n.max),!0)),0),f),v&&(t=e=g.toPixels(n.max)),o=Math.abs(t-e),r=we(t,e),s=ke(t,e),g.isXAxis?(i={x:x?s:r,y:0,width:o,height:f},y||(i.x=l.plotHeight-i.x)):(i={x:0,y:x?s:r,width:f,height:o},y&&(i.y=l.plotWidth-i.y)),l.inverted&&h.isVML&&(i=g.isXAxis?{x:0,y:m?r:s,height:i.width,width:l.chartWidth}:{x:i.y-l.plotLeft-l.spacingBox.x,y:0,width:i.height,height:l.chartHeight}),d[b]?d[b].animate(i):(d[b]=h.clipRect(i),p&&a["zoneGraph"+b].clip(d[b]),u&&a["zoneArea"+b].clip(d[b])),v=c.value>n.max}),this.clips=d)},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};di(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(gi(i,"resize",t),gi(e,"destroy",function(){mi(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,o){var r=this[t],s=!r;return s&&(this[t]=r=this.chart.renderer.g(e).attr({zIndex:n||.1}).add(o),r.addClass("highcharts-series-"+this.index)),r.attr({visibility:i})[s?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,o=n.animation,r=o&&!!e.animate&&i.renderer.isSVG&&wi(o.duration,500)||0,s=e.visible?"inherit":"hidden",a=n.zIndex,l=e.hasRendered,h=i.seriesGroup;t=e.plotGroup("group","series",s,a,h),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,h),r&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.applyZones()),di(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip===!1||e.sharedClipKey||l||t.clip(i.clipRect),r&&e.animate(),l||(e.animationTimeout=g(function(){e.afterAnimate()},r)),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirtyData,n=t.isDirty,o=t.group,r=t.xAxis,s=t.yAxis;o&&(e.inverted&&o.attr({width:e.plotWidth,height:e.plotHeight}),o.animate({translateX:wi(r&&r.left,e.plotLeft),translateY:wi(s&&s.top,e.plotTop)})),t.translate(),t.render(),i&&xi(t,"updatedData"),(n||i)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var i=this,n=i.xAxis,o=i.yAxis,r=i.chart.inverted;return this.searchKDTree({clientX:r?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:r?o.len-t.chartX+o.pos:t.chartY-o.pos},e)},buildKDTree:function(){function t(e,n,o){var r,s,a=e&&e.length;return a?(r=i.kdAxisArray[n%o],e.sort(function(t,e){return t[r]-e[r]}),s=Math.floor(a/2),{point:e[s],left:t(e.slice(0,s),n+1,o),right:t(e.slice(s+1),n+1,o)}):void 0}function e(){i.kdTree=t(i.getValidPoints(),n,n)}var i=this,n=i.kdDimensions;delete i.kdTree,g(e,i.options.kdNow?0:1)},searchKDTree:function(t,e){function i(t,e){var i=p(t[r])&&p(e[r])?Math.pow(t[r]-e[r],2):null,n=p(t[s])&&p(e[s])?Math.pow(t[s]-e[s],2):null,o=(i||0)+(n||0);e.dist=p(o)?Math.sqrt(o):Number.MAX_VALUE,e.distX=p(i)?Math.sqrt(i):Number.MAX_VALUE}function n(t,e,r,s){var l,h,c,d,p,u=e.point,f=o.kdAxisArray[r%s],g=u;return i(t,u),l=t[f]-u[f],h=0>l?"left":"right",c=0>l?"right":"left",e[h]&&(d=n(t,e[h],r+1,s),g=d[a]<g[a]?d:u),e[c]&&Math.sqrt(l*l)<g[a]&&(p=n(t,e[c],r+1,s),g=p[a]<g[a]?p:g),g}var o=this,r=this.kdAxisArray[0],s=this.kdAxisArray[1],a=e?"distX":"dist";return this.kdTree||this.buildKDTree(),this.kdTree?n(t,this.kdTree,this.kdDimensions,this.kdDimensions):void 0}},G.prototype={destroy:function(){L(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?A(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:Ke}).add(t)},setOffset:function(t,e){var i,n=this,o=n.axis,r=o.chart,s=r.inverted,a=o.reversed,l=this.isNegative&&!a||!this.isNegative&&a,h=o.translate(o.usePercentage?100:this.total,0,0,0,1),c=o.translate(0),d=Ae(h-c),p=r.xAxis[0].translate(this.x)+t,u=r.plotHeight,f={x:s?l?h:h-d:p,y:s?u-p-e:l?u-h-d:u-h,width:s?d:e,height:s?e:d},g=this.label;g&&(g.align(this.alignOptions,null,f),i=g.alignAttr,g[this.options.crop===!1||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0))}},Fi.prototype.getStacks=function(){var t=this;di(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),di(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+wi(e.options.stack,""))})},Bi.prototype.buildStacks=function(){var t,e,i=this.series,n=wi(this.options.reversedStacks,!0),o=i.length;if(!this.isXAxis){for(this.usePercentage=!1,e=o;e--;)i[n?e:o-e-1].setStackedPoints();for(e=o;e--;)t=i[n?e:o-e-1],t.setStackCliffs&&t.setStackCliffs();if(this.usePercentage)for(e=0;o>e;e++)i[e].setPercentStacks()}},Bi.prototype.renderStackTotals=function(){var t,e,i,n=this,o=n.chart,r=o.renderer,s=n.stacks,a=n.stackTotalGroup;a||(n.stackTotalGroup=a=r.g("stack-labels").attr({visibility:$e,zIndex:6}).add()),a.translate(o.plotLeft,o.plotTop);for(t in s){e=s[t];for(i in e)e[i].render(a)}},Bi.prototype.resetStacks=function(){var t,e,i=this.stacks;if(!this.isXAxis)for(t in i)for(e in i[t])i[t][e].touched<this.stacksTouched?(i[t][e].destroy(),delete i[t][e]):(i[t][e].total=null,i[t][e].cum=0)},Bi.prototype.cleanStacks=function(){var t,e,i;if(!this.isXAxis){this.oldStacks&&(t=this.stacks=this.oldStacks);for(e in t)for(i in t[e])t[e][i].cum=t[e][i].total}},_i.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,i,n,o,r,s,a,l,h=this,c=h.processedXData,d=h.processedYData,p=[],u=d.length,f=h.options,g=f.threshold,m=f.startFromThreshold?g:0,x=f.stack,y=f.stacking,v=h.stackKey,b="-"+v,k=h.negStacks,w=h.yAxis,A=w.stacks,S=w.oldStacks;for(w.stacksTouched+=1,s=0;u>s;s++)a=c[s],l=d[s],t=h.getStackIndicator(t,a,h.index),r=t.key,e=k&&(m?0:g)>l,o=e?b:v,A[o]||(A[o]={}),A[o][a]||(S[o]&&S[o][a]?(A[o][a]=S[o][a],A[o][a].total=null):A[o][a]=new G(w,w.options.stackLabels,e,a,x)),i=A[o][a],null!==l&&(i.points[r]=i.points[h.index]=[wi(i.cum,m)],i.touched=w.stacksTouched,t.index>0&&h.singleStacks===!1&&(i.points[r][0]=i.points[h.index+","+a+",0"][0])),"percent"===y?(n=e?v:b,k&&A[n]&&A[n][a]?(n=A[n][a],i.total=n.total=ke(n.total,i.total)+Ae(l)||0):i.total=I(i.total+(Ae(l)||0))):i.total=I(i.total+(l||0)),i.cum=wi(i.cum,m)+(l||0),null!==l&&i.points[r].push(i.cum),p[s]=i.cum;"percent"===y&&(w.usePercentage=!0),this.stackedYData=p,w.oldStacks={}}},_i.prototype.setPercentStacks=function(){var t,e=this,i=e.stackKey,n=e.yAxis.stacks,o=e.processedXData;di([i,"-"+i],function(i){for(var r,s,a,l,h=o.length;h--;)r=o[h],t=e.getStackIndicator(t,r,e.index),s=n[i]&&n[i][r],a=s&&s.points[t.key],a&&(l=s.total?100/s.total:0,a[0]=I(a[0]*l),a[1]=I(a[1]*l),e.stackedYData[h]=a[1])})},_i.prototype.getStackIndicator=function(t,e,i){return p(t)&&t.x===e?t.index++:t={x:e,index:0},t.key=[i,e,t.index].join(","),t},ki(Fi.prototype,{addSeries:function(t,e,i){var n,o=this;return t&&(e=wi(e,!0),xi(o,"addSeries",{options:t},function(){n=o.initSeries(t),o.isDirtyLegend=!0,o.linkSeries(),e&&o.redraw(i)})),n},addAxis:function(t,e,i,o){var r=e?"xAxis":"yAxis",s=this.options;new Bi(this,n(t,{index:this[r].length,isX:e})),s[r]=f(s[r]||{}),s[r].push(t),wi(i,!0)&&this.redraw(o)},showLoading:function(t){var e=this,i=e.options,n=e.loadingDiv,o=i.loading,r=function(){n&&m(n,{left:e.plotLeft+Je,top:e.plotTop+Je,width:e.plotWidth+Je,height:e.plotHeight+Je})};n||(e.loadingDiv=n=x(Ue,{className:qe+"loading"},ki(o.style,{zIndex:10,display:Qe}),e.container),e.loadingSpan=x("span",null,o.labelStyle,n),gi(e,"redraw",r)),e.loadingSpan.innerHTML=t||i.lang.loading,e.loadingShown||(m(n,{opacity:0,display:""}),yi(n,{opacity:o.style.opacity},{duration:o.showDuration||0}),e.loadingShown=!0),r()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&yi(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){m(e,{display:Qe})}}),this.loadingShown=!1}}),ki(Vi.prototype,{update:function(t,e,i,n){function o(){l.applyOptions(t),null===l.y&&c&&(l.graphic=c.destroy()),s(t)&&!a(t)&&(l.redraw=function(){c&&c.element&&t&&t.marker&&t.marker.symbol&&(l.graphic=c.destroy()),t&&t.dataLabels&&l.dataLabel&&(l.dataLabel=l.dataLabel.destroy()),l.redraw=null}),r=l.index,h.updateParallelArrays(l,r),u&&l.name&&(u[l.x]=l.name),p.data[r]=s(p.data[r])?l.options:t,h.isDirty=h.isDirtyData=!0,!h.fixedBox&&h.hasCartesianSeries&&(d.isDirtyBox=!0),"point"===p.legendType&&(d.isDirtyLegend=!0),e&&d.redraw(i)}var r,l=this,h=l.series,c=l.graphic,d=h.chart,p=h.options,u=h.xAxis&&h.xAxis.names;e=wi(e,!0),n===!1?o():l.firePointEvent("update",{options:t},o)},remove:function(t,e){this.series.removePoint(ci(this,this.series.data),t,e)}}),ki(_i.prototype,{addPoint:function(t,e,i,n){var o,r,s,a,l=this,h=l.options,c=l.data,d=l.graph,p=l.area,u=l.chart,f=l.xAxis&&l.xAxis.names,g=d&&d.shift||0,m=["graph","area"],x=h.data,y=l.xData;if(B(n,u),i){for(s=l.zones.length;s--;)m.push("zoneGraph"+s,"zoneArea"+s);di(m,function(t){l[t]&&(l[t].shift=g+(h.step?2:1))})}if(p&&(p.isArea=!0),e=wi(e,!0),o={series:l},l.pointClass.prototype.applyOptions.apply(o,[t]),a=o.x,s=y.length,l.requireSorting&&a<y[s-1])for(r=!0;s&&y[s-1]>a;)s--;l.updateParallelArrays(o,"splice",s,0,0),l.updateParallelArrays(o,s),f&&o.name&&(f[a]=o.name),x.splice(s,0,t),r&&(l.data.splice(s,0,null),l.processData()),"point"===h.legendType&&l.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(o,"shift"),x.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),u.redraw())},removePoint:function(t,e,i){var n=this,o=n.data,r=o[t],s=n.points,a=n.chart,l=function(){s&&s.length===o.length&&s.splice(t,1),o.splice(t,1),n.options.data.splice(t,1),n.updateParallelArrays(r||{series:n},"splice",t,1),r&&r.destroy(),n.isDirty=!0,n.isDirtyData=!0,e&&a.redraw()};B(i,a),e=wi(e,!0),r?r.firePointEvent("remove",null,l):l()},remove:function(t,e){var i=this,n=i.chart;xi(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),wi(t,!0)&&n.redraw(e)})},update:function(t,e){var i,o=this,r=this.chart,s=this.userOptions,a=this.type,l=li[a].prototype,h=["group","markerGroup","dataLabelsGroup"];(t.type&&t.type!==a||void 0!==t.zIndex)&&(h.length=0),di(h,function(t){h[t]=o[t],delete o[t]}),t=n(s,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1);for(i in l)this[i]=N;ki(this,li[t.type||a].prototype),di(h,function(t){o[t]=h[t]}),this.init(r,t),r.linkSeries(),wi(e,!0)&&r.redraw(!1)}}),ki(Bi.prototype,{update:function(t,e){var i=this.chart;t=i.options[this.coll][this.options.index]=n(this.userOptions,t),this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=N,this.init(i,ki(t,{events:N})),i.isDirtyBox=!0,wi(e,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,o=n.length;o--;)n[o]&&n[o].remove(!1);d(e.axes,this),d(e[i],this),e.options[i].splice(this.options.index,1),di(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,wi(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Ui=y(_i);li.line=Ui,Si.area=n(Ti,{softThreshold:!1,threshold:0});var ji=y(_i,{type:"area",singleStacks:!1,getStackPoints:function(){var t,e,i,n=this,o=[],r=[],s=this.xAxis,a=this.yAxis,l=a.stacks[this.stackKey],h={},c=this.points,d=n.index,p=a.series,u=p.length,f=wi(a.options.reversedStacks,!0)?1:-1;if(this.options.stacking){for(e=0;e<c.length;e++)h[c[e].x]=c[e];for(i in l)null!==l[i].total&&r.push(+i);r.sort(function(t,e){return t-e}),t=fi(p,function(){return this.visible}),di(r,function(i,n){var c,p,g=0;if(h[i]&&!h[i].isNull)o.push(h[i]),di([-1,1],function(o){var s=1===o?"rightNull":"leftNull",a=1===o?"rightCliff":"leftCliff",g=0,m=l[r[n+o]];if(m)for(e=d;e>=0&&u>e;)c=m.points[e],c||(e===d?h[i][s]=!0:t[e]&&(p=l[i].points[e],p&&(g-=p[1]-p[0]))),e+=f;h[i][a]=g});else{for(e=d;e>=0&&u>e;){if(c=l[i].points[e]){g=c[1];break}e+=f}g=a.toPixels(g,!0),o.push({isNull:!0,plotX:s.toPixels(i,!0),plotY:g,yBottom:g})}})}return o},getGraphPath:function(t){var e,i,n,o,r,s,a,l,h=_i.prototype.getGraphPath,c=this.options,d=c.stacking,p=this.yAxis,u=[],f=[],g=this.index,m=p.stacks[this.stackKey],x=c.threshold,y=p.getThreshold(c.threshold),v=c.connectNulls||"percent"===d,b=function(e,i,n){var o,r,a=t[e],l=d&&m[a.x].points[g],h=a[n+"Null"]||0,c=a[n+"Cliff"]||0,v=!0;c||h?(o=(h?l[0]:l[1])+c,r=l[0]+c,v=!!h):!d&&t[i]&&t[i].isNull&&(o=r=x),void 0!==o&&(f.push({plotX:s,plotY:null===o?y:p.toPixels(o,!0),isNull:v}),u.push({plotX:s,plotY:null===r?y:p.toPixels(r,!0)}))};for(t=t||this.points,d&&(t=this.getStackPoints()),o=0;o<t.length;o++)a=t[o].isNull,s=wi(t[o].rectPlotX,t[o].plotX),l=wi(t[o].yBottom,y),(!a||v)&&(v||b(o,o-1,"left"),a&&!d&&v||(f.push(t[o]),u.push({x:o,plotX:s,plotY:l})),v||b(o,o+1,"right"));return i=h.call(this,f,!0,!0),u.reversed=!0,n=h.call(this,u,!0,!0),n.length&&(n[0]=ei),r=i.concat(n),e=h.call(this,f,!1,v),this.areaPath=r,e},drawGraph:function(){this.areaPath=[],_i.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=this.zones,o=[["area",this.color,i.fillColor]];di(n,function(e,n){o.push(["zoneArea"+n,e.color||t.color,e.fillColor||i.fillColor])}),di(o,function(n){var o,r=n[0],s=t[r];s?s.animate({d:e}):(o={fill:n[2]||n[1],zIndex:0},n[2]||(o["fill-opacity"]=wi(i.fillOpacity,.75)),t[r]=t.chart.renderer.path(e).attr(o).add(t.group))})},drawLegendSymbol:Yi.drawRectangle});li.area=ji,Si.spline=n(Ti);var Zi=y(_i,{type:"spline",getPointSpline:function(t,e,i){var n,o,r,s,a,l=1.5,h=l+1,c=e.plotX,d=e.plotY,p=t[i-1],u=t[i+1];if(p&&!p.isNull&&u&&!u.isNull){var f=p.plotX,g=p.plotY,m=u.plotX,x=u.plotY,y=0;n=(l*c+f)/h,o=(l*d+g)/h,r=(l*c+m)/h,s=(l*d+x)/h,r!==n&&(y=(s-o)*(r-c)/(r-n)+d-s),o+=y,s+=y,o>g&&o>d?(o=ke(g,d),s=2*d-o):g>o&&d>o&&(o=we(g,d),s=2*d-o),s>x&&s>d?(s=ke(x,d),o=2*d-s):x>s&&d>s&&(s=we(x,d),o=2*d-s),e.rightContX=r,e.rightContY=s}return a=["C",wi(p.rightContX,p.plotX),wi(p.rightContY,p.plotY),wi(n,c),wi(o,d),c,d],p.rightContX=p.rightContY=null,a}});li.spline=Zi,Si.areaspline=n(Si.area);var Ki=ji.prototype,qi=y(Zi,{type:"areaspline",getStackPoints:Ki.getStackPoints,getGraphPath:Ki.getGraphPath,setStackCliffs:Ki.setStackCliffs,drawGraph:Ki.drawGraph,drawLegendSymbol:Yi.drawRectangle});li.areaspline=qi,Si.column=n(Ti,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var $i=y(_i,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){_i.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&di(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e=this,i=e.options,n=e.xAxis,o=e.yAxis,r=n.reversed,s={},a=0;i.grouping===!1?a=1:di(e.chart.series,function(i){var n,r=i.options,l=i.yAxis;i.type===e.type&&i.visible&&o.len===l.len&&o.pos===l.pos&&(r.stacking?(t=i.stackKey,s[t]===N&&(s[t]=a++),n=s[t]):r.grouping!==!1&&(n=a++),i.columnIndex=n)});var l=we(Ae(n.transA)*(n.ordinalSlope||i.pointRange||n.closestPointRange||n.tickInterval||1),n.len),h=l*i.groupPadding,c=l-2*h,d=c/a,p=we(i.maxPointWidth||n.len,wi(i.pointWidth,d*(1-2*i.pointPadding))),u=(d-p)/2,f=(e.columnIndex||0)+(r?1:0),g=u+(h+f*d-l/2)*(r?-1:1);return e.columnMetrics={width:p,offset:g},e.columnMetrics},crispCol:function(t,e,i,n){var o,r,s,a=this.chart,l=this.borderWidth,h=-(l%2?.5:0),c=l%2?.5:1;return a.inverted&&a.renderer.isVML&&(c+=1),o=Math.round(t+i)+h,t=Math.round(t)+h,i=o-t,r=Math.round(e+n)+c,s=Ae(e)<=.5&&r>.5,e=Math.round(e)+c,n=r-e,s&&(e-=1,n+=1),{x:t,y:e,width:i,height:n}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=wi(i.borderWidth,t.closestPointRange*t.xAxis.transA<2?0:1),o=t.yAxis,r=i.threshold,s=t.translatedThreshold=o.getThreshold(r),a=wi(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,c=t.barW=ke(h,1+2*n),d=t.pointXOffset=l.offset;e.inverted&&(s-=.5),i.pointPadding&&(c=be(c)),_i.prototype.translate.apply(t),di(t.points,function(i){var n,r=we(wi(i.yBottom,s),9e4),l=999+Ae(r),p=we(ke(-l,i.plotY),o.len+l),u=i.plotX+d,f=c,g=we(p,r),m=ke(p,r)-g;Ae(m)<a&&a&&(m=a,n=!o.reversed&&!i.negative||o.reversed&&i.negative,g=Ae(g-s)>a?r-a:s-(n?a:0)),i.barX=u,i.pointWidth=h,i.tooltipPos=e.inverted?[o.len+o.pos-e.plotLeft-p,t.xAxis.len-u-f/2,m]:[u+f/2,p+o.pos-e.plotTop,m],i.shapeType="rect",i.shapeArgs=t.crispCol(u,g,f,m)})},getSymbol:Ye,drawLegendSymbol:Yi.drawRectangle,drawGraph:Ye,drawPoints:function(){var t,e,i=this,o=this.chart,r=i.options,s=o.renderer,a=r.animationLimit||250;di(i.points,function(l){var h,c=l.plotY,d=l.graphic;c===N||isNaN(c)||null===l.y?d&&(l.graphic=d.destroy()):(t=l.shapeArgs,h=p(i.borderWidth)?{"stroke-width":i.borderWidth}:{},e=l.pointAttr[l.selected?ri:ni]||i.pointAttr[ni],d?(vi(d),d.attr(h).attr(e)[o.pointCount<a?"animate":"attr"](n(t))):l.graphic=d=s[l.shapeType](t).attr(h).attr(e).add(l.group||i.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(t){var e,i=this,n=this.yAxis,o=i.options,r=this.chart.inverted,s={};Re&&(t?(s.scaleY=.001,e=we(n.pos+n.len,ke(n.pos,n.toPixels(o.threshold))),r?s.translateX=e-n.len:s.translateY=e,i.group.attr(s)):(s.scaleY=1,s[r?"translateX":"translateY"]=n.pos,i.group.animate(s,i.options.animation),i.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&di(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),_i.prototype.remove.apply(t,arguments)}});li.column=$i,Si.bar=n(Si.column);var Ji=y($i,{type:"bar",inverted:!0});li.bar=Ji,Si.scatter=n(Ti,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var Qi=y(_i,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&_i.prototype.drawGraph.call(this)}});li.scatter=Qi,Si.pie=n(Ti,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var tn=y(Vi,{init:function(){Vi.prototype.init.apply(this,arguments);var t,e=this;return e.name=wi(e.name,"Slice"),t=function(t){e.slice("select"===t.type)},gi(e,"select",t),gi(e,"unselect",t),e},setVisible:function(t,e){var i=this,n=i.series,o=n.chart,r=n.options.ignoreHiddenPoint;e=wi(e,r),t!==i.visible&&(i.visible=i.options.visible=t=t===N?!i.visible:t,n.options.data[ci(i,n.data)]=i.options,di(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)}),i.legendItem&&o.legend.colorizeItem(i,t),t||"hover"!==i.state||i.setState(""),r&&(n.isDirty=!0),e&&o.redraw())},slice:function(t,e,i){var n,o=this,r=o.series,s=r.chart;B(i,s),e=wi(e,!0),o.sliced=o.options.sliced=t=p(t)?t:!o.sliced,r.options.data[ci(o,r.data)]=o.options,n=t?o.slicedTranslation:{translateX:0,translateY:0},o.graphic.animate(n),o.shadowGroup&&o.shadowGroup.animate(n)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),en={type:"pie",isCartesian:!1,pointClass:tn,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(di(i,function(t){var i=t.graphic,o=t.shapeArgs;i&&(i.attr({r:t.startR||e.center[3]/2,start:n,end:n}),i.animate({r:o.r,start:o.start,end:o.end},e.options.animation))}),e.animate=null)},updateTotals:function(){var t,e,i=0,n=this.points,o=n.length,r=this.options.ignoreHiddenPoint;for(t=0;o>t;t++)e=n[t],i+=r&&!e.visible?0:e.y;for(this.total=i,t=0;o>t;t++)e=n[t],e.percentage=i>0&&(e.visible||!r)?e.y/i*100:0,e.total=i},generatePoints:function(){_i.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,i,n,o,r,s,a,l=this,h=0,c=1e3,d=l.options,p=d.slicedOffset,u=p+d.borderWidth,f=d.startAngle||0,g=l.startAngleRad=Pe/180*(f-90),m=l.endAngleRad=Pe/180*(wi(d.endAngle,f+360)-90),x=m-g,y=l.points,v=d.dataLabels.distance,b=d.ignoreHiddenPoint,k=y.length;for(t||(l.center=t=l.getCenter()),l.getX=function(e,i){return n=xe.asin(we((e-t[1])/(t[2]/2+v),1)),t[0]+(i?-1:1)*Se(n)*(t[2]/2+v)},s=0;k>s;s++)a=y[s],e=g+h*x,(!b||a.visible)&&(h+=a.percentage/100),i=g+h*x,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:ye(e*c)/c,end:ye(i*c)/c},n=(i+e)/2,n>1.5*Pe?n-=2*Pe:-Pe/2>n&&(n+=2*Pe),a.slicedTranslation={translateX:ye(Se(n)*p),translateY:ye(Te(n)*p)},o=Se(n)*t[2]/2,r=Te(n)*t[2]/2,a.tooltipPos=[t[0]+.7*o,t[1]+.7*r],a.half=-Pe/2>n||n>Pe/2?1:0,a.angle=n,u=we(u,v/2),a.labelPos=[t[0]+o+Se(n)*v,t[1]+r+Te(n)*v,t[0]+o+Se(n)*u,t[1]+r+Te(n)*u,t[0]+o,t[1]+r,0>v?"center":a.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var t,e,i,n,o,r,s=this,a=s.chart,l=a.renderer,h=s.options.shadow;h&&!s.shadowGroup&&(s.shadowGroup=l.g("shadow").add(s.group)),di(s.points,function(a){null!==a.y&&(e=a.graphic,o=a.shapeArgs,i=a.shadowGroup,n=a.pointAttr[a.selected?ri:ni],n.stroke||(n.stroke=n.fill),h&&!i&&(i=a.shadowGroup=l.g("shadow").add(s.shadowGroup)),t=a.sliced?a.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(t),e?e.setRadialReference(s.center).attr(n).animate(ki(o,t)):(r={"stroke-linejoin":"round"},a.visible||(r.visibility="hidden"),a.graphic=e=l[a.shapeType](o).setRadialReference(s.center).attr(n).attr(r).attr(t).add(s.group).shadow(h,i)))})},searchPoint:Ye,sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:Yi.drawRectangle,getCenter:Ni.getCenter,getSymbol:Ye};en=y(_i,en),li.pie=en,_i.prototype.drawDataLabels=function(){var t,e,i,o,r=this,s=r.options,a=s.cursor,l=s.dataLabels,h=r.points,c=r.hasRendered||0,d=r.chart.renderer;(l.enabled||r._hasPointLabels)&&(r.dlProcessOptions&&r.dlProcessOptions(l),o=r.plotGroup("dataLabelsGroup","data-labels",l.defer?Ke:$e,l.zIndex||6),wi(l.defer,!0)&&(o.attr({opacity:+c}),c||gi(r,"afterAnimate",function(){r.visible&&o.show(),o[s.animation?"animate":"attr"]({opacity:1},{duration:200})})),e=l,di(h,function(h){var c,u,f,g,m,x,y=h.dataLabel,v=h.connector,b=!0,k={};if(t=h.dlOptions||h.options&&h.options.dataLabels,c=wi(t&&t.enabled,e.enabled)&&null!==h.y,y&&!c)h.dataLabel=y.destroy();else if(c){if(l=n(e,t),x=l.style,m=l.rotation,u=h.getLabelConfig(),i=l.format?A(l.format,u):l.formatter.call(u,l),x.color=wi(l.color,x.color,r.color,"black"),y)p(i)?(y.attr({text:i}),b=!1):(h.dataLabel=y=y.destroy(),v&&(h.connector=v.destroy()));else if(p(i)){f={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":l.borderWidth,r:l.borderRadius||0,rotation:m,padding:l.padding,zIndex:1},"contrast"===x.color&&(k.color=l.inside||l.distance<0||s.stacking?d.getContrast(h.color||r.color):"#000000"),a&&(k.cursor=a);for(g in f)f[g]===N&&delete f[g];y=h.dataLabel=d[m?"text":"label"](i,0,-9999,l.shape,null,null,l.useHTML).attr(f).css(ki(x,k)).add(o).shadow(l.shadow)}y&&r.alignDataLabel(h,y,l,null,b)}}))},_i.prototype.alignDataLabel=function(t,e,i,n,o){var r,s,a,l,h=this.chart,c=h.inverted,d=wi(t.plotX,-9999),p=wi(t.plotY,-9999),u=e.getBBox(),f=h.renderer.fontMetrics(i.style.fontSize).b,g=i.rotation,m=i.align,x=this.visible&&(t.series.forceDL||h.isInsidePlot(d,ye(p),c)||n&&h.isInsidePlot(d,c?n.x+1:n.y+n.height-1,c)),y="justify"===wi(i.overflow,"justify");x&&(n=ki({x:c?h.plotWidth-p:d,y:ye(c?h.plotHeight-d:p),width:0,height:0},n),ki(i,{width:u.width,height:u.height}),g?(y=!1,a=h.renderer.rotCorr(f,g),l={x:n.x+i.x+n.width/2+a.x,y:n.y+i.y+n.height/2},e[o?"attr":"animate"](l).attr({align:i.align}),r=(g+720)%360,s=r>180&&360>r,"left"===m?l.y-=s?u.height:0:"center"===m?(l.x-=u.width/2,l.y-=u.height/2):"right"===m&&(l.x-=u.width,l.y-=s?0:u.height)):(e.align(i,null,n),l=e.alignAttr),y?this.justifyDataLabel(e,i,l,u,n,o):wi(i.crop,!0)&&(x=h.isInsidePlot(l.x,l.y)&&h.isInsidePlot(l.x+u.width,l.y+u.height)),i.shape&&!g&&e.attr({anchorX:t.plotX,anchorY:t.plotY})),x||(vi(e),e.attr({y:-9999}),e.placed=!1)},_i.prototype.justifyDataLabel=function(t,e,i,n,o,r){var s,a,l=this.chart,h=e.align,c=e.verticalAlign,d=t.box?0:t.padding||0;s=i.x+d,0>s&&("right"===h?e.align="left":e.x=-s,a=!0),s=i.x+n.width-d,s>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-s,a=!0),s=i.y+d,0>s&&("bottom"===c?e.verticalAlign="top":e.y=-s,a=!0),s=i.y+n.height-d,s>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!r,t.align(e,null,o))},li.pie&&(li.pie.prototype.drawDataLabels=function(){var t,e,i,n,o,r,s,a,l,h,c,d,p,u=this,f=u.data,g=u.chart,m=u.options.dataLabels,x=wi(m.connectorPadding,10),y=wi(m.connectorWidth,1),v=g.plotWidth,b=g.plotHeight,k=wi(m.softConnector,!0),w=m.distance,A=u.center,S=A[2]/2,T=A[1],P=w>0,C=[[],[]],L=[0,0,0,0],D=function(t,e){return e.y-t.y};if(u.visible&&(m.enabled||u._hasPointLabels)){for(_i.prototype.drawDataLabels.apply(u),di(f,function(t){t.dataLabel&&t.visible&&(C[t.half].push(t),t.dataLabel._pos=null)}),d=2;d--;){var I,B,O,z,E=[],R=[],W=C[d],H=W.length;if(H){for(u.sortByAngle(W,d-.5),p=s=0;!s&&W[p];)s=W[p]&&W[p].dataLabel&&(W[p].dataLabel.getBBox().height||21),p++;if(w>0){for(O=we(T+S+w,g.plotHeight),B=ke(0,T-S-w);O>=B;B+=s)E.push(B);if(I=E.length,H>I){for(c=[].concat(W),c.sort(D),p=H;p--;)c[p].rank=p;for(p=H;p--;)W[p].rank>=I&&W.splice(p,1);H=W.length}for(p=0;H>p;p++){t=W[p],r=t.labelPos;var X,G,Y=9999;for(G=0;I>G;G++)X=Ae(E[G]-r[1]),Y>X&&(Y=X,z=G);if(p>z&&null!==E[p])z=p;else if(H-p+z>I&&null!==E[p])for(z=I-H+p;null===E[z];)z++;else for(;null===E[z];)z++;R.push({i:z,y:E[z]}),E[z]=null}R.sort(D)}for(p=0;H>p;p++){var F,N;t=W[p],r=t.labelPos,n=t.dataLabel,h=t.visible===!1?Ke:"inherit",N=r[1],w>0?(F=R.pop(),z=F.i,l=F.y,(N>l&&null!==E[z+1]||l>N&&null!==E[z-1])&&(l=we(ke(0,N),g.plotHeight))):l=N,a=m.justify?A[0]+(d?-1:1)*(S+w):u.getX(l===T-S-w||l===T+S+w?N:l,d),n._attr={visibility:h,align:r[6]},n._pos={x:a+m.x+({left:x,right:-x}[r[6]]||0),y:l+m.y-10},n.connX=a,n.connY=l,null===this.options.size&&(o=n.width,x>a-o?L[3]=ke(ye(o-a+x),L[3]):a+o>v-x&&(L[1]=ke(ye(a+o-v+x),L[1])),0>l-s/2?L[0]=ke(ye(-l+s/2),L[0]):l+s/2>b&&(L[2]=ke(ye(l+s/2-b),L[2])))}}}(0===M(L)||this.verifyDataLabelOverflow(L))&&(this.placeDataLabels(),P&&y&&di(this.points,function(t){e=t.connector,r=t.labelPos,n=t.dataLabel,n&&n._pos&&t.visible?(h=n._attr.visibility,a=n.connX,l=n.connY,i=k?[ti,a+("left"===r[6]?5:-5),l,"C",a,l,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],ei,r[4],r[5]]:[ti,a+("left"===r[6]?5:-5),l,ei,r[2],r[3],ei,r[4],r[5]],e?(e.animate({d:i}),e.attr("visibility",h)):t.connector=e=u.chart.renderer.path(i).attr({"stroke-width":y,stroke:m.connectorColor||t.color||"#606060",visibility:h}).add(u.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},li.pie.prototype.placeDataLabels=function(){di(this.points,function(t){var e,i=t.dataLabel;i&&t.visible&&(e=i._pos,e?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-9999}))})},li.pie.prototype.alignDataLabel=Ye,li.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,o=n.center,r=n.minSize||80,s=r;return null!==o[0]?s=ke(i[2]-ke(t[1],t[3]),r):(s=ke(i[2]-t[1]-t[3],r),i[0]+=(t[3]-t[1])/2),null!==o[1]?s=ke(we(s,i[2]-ke(t[0],t[2])),r):(s=ke(we(s,i[2]-t[0]-t[2]),r),i[1]+=(t[0]-t[2])/2),s<i[2]?(i[2]=s,i[3]=Math.min(b(n.innerSize||0,s),s),this.translate(i),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),li.column&&(li.column.prototype.alignDataLabel=function(t,e,i,o,r){var s,a=this.chart.inverted,l=t.series,h=t.dlBox||t.shapeArgs,c=wi(t.below,t.plotY>wi(this.translatedThreshold,l.yAxis.len)),d=wi(i.inside,!!this.options.stacking);h&&(o=n(h),o.y<0&&(o.height+=o.y,o.y=0),s=o.y+o.height-l.yAxis.len,s>0&&(o.height-=s),a&&(o={x:l.yAxis.len-o.y-o.height,y:l.xAxis.len-o.x-o.width,width:o.height,height:o.width}),d||(a?(o.x+=c?0:o.width,o.width=0):(o.y+=c?o.height:0,o.height=0))),i.align=wi(i.align,!a||d?"center":c?"right":"left"),i.verticalAlign=wi(i.verticalAlign,a||d?"middle":c?"top":"bottom"),_i.prototype.alignDataLabel.call(this,t,e,i,o,r)}),function(t){var e=t.Chart,i=t.each,n=t.pick,o=t.addEvent;e.prototype.callbacks.push(function(t){function e(){var e=[];i(t.series,function(t){var o=t.options.dataLabels,r=t.dataLabelCollections||["dataLabel"];(o.enabled||t._hasPointLabels)&&!o.allowOverlap&&t.visible&&i(r,function(o){i(t.points,function(t){t[o]&&(t[o].labelrank=n(t.labelrank,t.shapeArgs&&t.shapeArgs.height),e.push(t[o]))})})}),t.hideOverlappingLabels(e)}e(),o(t,"redraw",e)}),e.prototype.hideOverlappingLabels=function(t){var e,n,o,r,s,a,l,h,c,d,p,u=t.length,f=function(t,e,i,n,o,r,s,a){return!(o>t+i||t>o+s||r>e+n||e>r+a)};for(n=0;u>n;n++)e=t[n],e&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),n=0;u>n;n++)for(r=t[n],o=n+1;u>o;++o)s=t[o],r&&s&&r.placed&&s.placed&&0!==r.newOpacity&&0!==s.newOpacity&&(l=r.alignAttr,h=s.alignAttr,c=r.parentGroup,d=s.parentGroup,p=2*(r.box?0:r.padding),a=f(l.x+c.translateX,l.y+c.translateY,r.width-p,r.height-p,h.x+d.translateX,h.y+d.translateY,s.width-p,s.height-p),a&&((r.labelrank<s.labelrank?r:s).newOpacity=0));
i(t,function(t){var e,i;t&&(i=t.newOpacity,t.oldOpacity!==i&&t.placed&&(i?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=i,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})}}(ge);var nn=ge.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,o=n&&{cursor:n},r=function(t){for(var i,n=t.target;n&&!i;)i=n.point,n=n.parentNode;i!==N&&i!==e.hoverPoint&&i.onMouseOver(t)};di(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(di(t.trackerGroups,function(e){t[e]&&(t[e].addClass(qe+"tracker").on("mouseover",r).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(o),_&&t[e].on("touchstart",r))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,i=e.options,n=i.trackByArea,o=[].concat(n?e.areaPath:e.graphPath),r=o.length,s=e.chart,a=s.pointer,l=s.renderer,h=s.options.tooltip.snap,c=e.tracker,d=i.cursor,p=d&&{cursor:d},u=function(){s.hoverSeries!==e&&e.onMouseOver()},f="rgba(192,192,192,"+(Re?1e-4:.002)+")";if(r&&!n)for(t=r+1;t--;)o[t]===ti&&o.splice(t+1,0,o[t+1]-h,o[t+2],ei),(t&&o[t]===ti||t===r)&&o.splice(t,0,ei,o[t-2]+h,o[t-1]);c?c.attr({d:o}):(e.tracker=l.path(o).attr({"stroke-linejoin":"round",visibility:e.visible?$e:Ke,stroke:f,fill:n?f:Qe,"stroke-width":i.lineWidth+(n?0:2*h),zIndex:2}).add(e.group),di([e.tracker,e.markerGroup],function(t){t.addClass(qe+"tracker").on("mouseover",u).on("mouseout",function(t){a.onTrackerMouseOut(t)}).css(p),_&&t.on("touchstart",u)}))}};li.column&&($i.prototype.drawTracker=nn.drawTrackerPoint),li.pie&&(li.pie.prototype.drawTracker=nn.drawTrackerPoint),li.scatter&&(Qi.prototype.drawTracker=nn.drawTrackerPoint),ki(Gi.prototype,{setItemEvents:function(t,e,i,n,o){var r=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState(oi),e.css(r.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:o),t.setState()}).on("click",function(e){var i="legendItemClick",n=function(){t.setVisible&&t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,n):xi(t,i,e,n)})},createCheckboxForItem:function(t){var e=this;t.checkbox=x("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},e.options.itemCheckboxStyle,e.chart.container),gi(t.checkbox,"click",function(e){var i=e.target;xi(t.series||t,"checkboxClick",{checked:i.checked,item:t},function(){t.select()})})}}),j.legend.itemStyle.cursor="pointer",ki(Fi.prototype,{showResetZoom:function(){function t(){e.zoomOut()}var e=this,i=j.lang,n=e.options.chart.resetZoomButton,o=n.theme,r=o.states,s="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(i.resetZoom,null,null,t,o,r&&r.hover).attr({align:n.position.align,title:i.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var t=this;xi(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,o=n.pointer,r=!1;!t||t.resetSelection?di(n.axes,function(t){e=t.zoom()}):di(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(o[n?"zoomX":"zoomY"]||o[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(r=!0))}),i=n.resetZoomButton,r&&!i?n.showResetZoom():!r&&s(i)&&(n.resetZoomButton=i.destroy()),e&&n.redraw(wi(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t,e){var i,n=this,o=n.hoverPoints;o&&di(o,function(t){t.setState()}),di("xy"===e?[1,0]:[1],function(e){var o=n[e?"xAxis":"yAxis"][0],r=o.horiz,s=t[r?"chartX":"chartY"],a=r?"mouseDownX":"mouseDownY",l=n[a],h=(o.pointRange||0)/2,c=o.getExtremes(),d=o.toValue(l-s,!0)+h,p=o.toValue(l+o.len-s,!0)-h,u=l>s;o.series.length&&(u||d>we(c.dataMin,c.min))&&(!u||p<ke(c.dataMax,c.max))&&(o.setExtremes(d,p,!1,!1,{trigger:"pan"}),i=!0),n[a]=s}),i&&n.redraw(!1),m(n.container,{cursor:"move"})}}),ki(Vi.prototype,{select:function(t,e){var i=this,n=i.series,o=n.chart;t=wi(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[ci(i,n.data)]=i.options,i.setState(t&&ri),e||di(o.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[ci(t,n.data)]=t.options,t.setState(ni),t.firePointEvent("unselect"))})})},onMouseOver:function(t,e){var i=this,n=i.series,o=n.chart,r=o.tooltip,s=o.hoverPoint;o.hoverSeries!==n&&n.onMouseOver(),s&&s!==i&&s.onMouseOut(),i.series&&(i.firePointEvent("mouseOver"),!r||r.shared&&!n.noSharedTooltip||r.refresh(i,t),i.setState(oi),e||(o.hoverPoint=i))},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==ci(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,e=this,i=n(e.series.options.point,e.options),o=i.events;e.events=o;for(t in o)gi(e,t,o[t]);this.hasImportedEvents=!0}},setState:function(t,e){var i,o,r,s,a=this,l=ve(a.plotX),h=a.plotY,c=a.series,d=c.options.states,p=Si[c.type].marker&&c.options.marker,u=p&&!p.enabled,f=p&&p.states[t],g=f&&f.enabled===!1,m=c.stateMarkerGraphic,x=a.marker||{},y=c.chart,v=c.halo;t=t||ni,s=a.pointAttr[t]||c.pointAttr[t],t===a.state&&!e||a.selected&&t!==ri||d[t]&&d[t].enabled===!1||t&&(g||u&&f.enabled===!1)||t&&x.states&&x.states[t]&&x.states[t].enabled===!1||(a.graphic?(i=p&&a.graphic.symbolName&&s.r,a.graphic.attr(n(s,i?{x:l-i,y:h-i,width:2*i,height:2*i}:{})),m&&m.hide()):(t&&f&&(i=f.radius,r=x.symbol||c.symbol,m&&m.currentSymbol!==r&&(m=m.destroy()),m?m[e?"animate":"attr"]({x:l-i,y:h-i}):r&&(c.stateMarkerGraphic=m=y.renderer.symbol(r,l-i,h-i,2*i,2*i).attr(s).add(c.markerGroup),m.currentSymbol=r)),m&&(m[t&&y.isInsidePlot(l,h,y.inverted)?"show":"hide"](),m.element.point=a)),o=d[t]&&d[t].halo,o&&o.size?(v||(c.halo=v=y.renderer.path().add(y.seriesGroup)),v.attr(ki({fill:a.color||c.color,"fill-opacity":o.opacity,zIndex:-1},o.attributes))[e?"animate":"attr"]({d:a.haloPath(o.size)})):v&&v.attr({d:[]}),a.state=t)},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),o=i.inverted,r=Math.floor(this.plotX);return i.renderer.symbols.circle(n.translateX+(o?e.yAxis.len-this.plotY:r)-t,n.translateY+(o?e.xAxis.len-r:this.plotY)-t,2*t,2*t)}}),ki(_i.prototype,{onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut(),t.options.events.mouseOver&&xi(t,"mouseOver"),t.setState(oi),e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,o=i.hoverPoint;i.hoverSeries=null,o&&o.onMouseOut(),t&&e.events.mouseOut&&xi(t,"mouseOut"),!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide(),t.setState()},setState:function(t){var e,i=this,n=i.options,o=i.graph,r=n.states,s=n.lineWidth,a=0;if(t=t||ni,i.state!==t){if(i.state=t,r[t]&&r[t].enabled===!1)return;if(t&&(s=r[t].lineWidth||s+(r[t].lineWidthPlus||0)),o&&!o.dashstyle)for(e={"stroke-width":s},o.attr(e);i["zoneGraph"+a];)i["zoneGraph"+a].attr(e),a+=1}},setVisible:function(t,e){var i,n=this,o=n.chart,r=n.legendItem,s=o.options.chart.ignoreHiddenSeries,a=n.visible;n.visible=t=n.userOptions.visible=t===N?!a:t,i=t?"show":"hide",di(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),(o.hoverSeries===n||(o.hoverPoint&&o.hoverPoint.series)===n)&&n.onMouseOut(),r&&o.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&di(o.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),di(n.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(o.isDirtyBox=!0),e!==!1&&o.redraw(),xi(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===N?!e.selected:t,e.checkbox&&(e.checkbox.checked=t),xi(e,t?"select":"unselect")},drawTracker:nn.drawTrackerGraph}),Ai(_i.prototype,"init",function(t){var e,i=this;t.apply(this,Array.prototype.slice.call(arguments,1)),e=i.xAxis,e&&e.options.ordinal&&gi(i,"updatedData",function(){delete e.ordinalIndex})}),Ai(Bi.prototype,"getTimeTicks",function(t,e,i,n,o,r,s,a){var l,h,c,d,u,f,g=0,m={},x=[],y=-Number.MAX_VALUE,v=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!r||r.length<3||i===N)return t.call(this,e,i,n,o);for(u=r.length,l=0;u>l;l++){if(f=l&&r[l-1]>n,r[l]<i&&(g=l),l===u-1||r[l+1]-r[l]>5*s||f){if(r[l]>y){for(h=t.call(this,e,r[g],r[l],o);h.length&&h[0]<=y;)h.shift();h.length&&(y=h[h.length-1]),x=x.concat(h)}g=l+1}if(f)break}if(d=h.info,a&&d.unitRange<=q.hour){for(l=x.length-1,g=1;l>g;g++)Z("%d",x[g])!==Z("%d",x[g-1])&&(m[x[g]]="day",c=!0);c&&(m[x[0]]="day"),d.higherRanks=m}if(x.info=d,a&&p(v)){for(var b,k,w,A,S,T=x.length,P=T,C=[],M=[];P--;)k=this.translate(x[P]),w&&(M[P]=w-k),C[P]=w=k;for(M.sort(),A=M[ve(M.length/2)],.6*v>A&&(A=null),P=x[T-1]>n?T-1:T,w=void 0;P--;)k=C[P],S=w-k,w&&.8*v>S&&(null===A||.8*A>S)?(m[x[P]]&&!m[x[P+1]]?(b=P+1,w=k):b=P,x.splice(b,1)):w=k}return x}),ki(Bi.prototype,{beforeSetTickPositions:function(){var t,e,i,n,o,r,s=this,a=[],l=!1,h=s.getExtremes(),c=h.min,d=h.max,p=s.isXAxis&&!!s.options.breaks,u=s.options.ordinal;if(u||p){if(di(s.series,function(e,i){if(e.visible!==!1&&(e.takeOrdinalPosition!==!1||p)&&(a=a.concat(e.processedXData),t=a.length,a.sort(function(t,e){return t-e}),t))for(i=t-1;i--;)a[i]===a[i+1]&&a.splice(i,1)}),t=a.length,t>2){for(e=a[1]-a[0],r=t-1;r--&&!l;)a[r+1]-a[r]!==e&&(l=!0);!s.options.keepOrdinalPadding&&(a[0]-c>e||d-a[a.length-1]>e)&&(l=!0)}l?(s.ordinalPositions=a,i=s.val2lin(ke(c,a[0]),!0),n=ke(s.val2lin(we(d,a[a.length-1]),!0),1),s.ordinalSlope=o=(d-c)/(n-i),s.ordinalOffset=c-i*o):s.ordinalPositions=s.ordinalSlope=s.ordinalOffset=N}s.isOrdinal=u&&l,s.groupIntervalFactor=null},val2lin:function(t,e){var i,n=this,o=n.ordinalPositions;if(o){var r,s,a,l=o.length;for(r=l;r--;)if(o[r]===t){a=r;break}for(r=l-1;r--;)if(t>o[r]||0===r){s=(t-o[r])/(o[r+1]-o[r]),a=r+s;break}i=e?a:n.ordinalSlope*(a||0)+n.ordinalOffset}else i=t;return i},lin2val:function(t,e){var i,n=this,o=n.ordinalPositions;if(o){var r,s,a,l=n.ordinalSlope,h=n.ordinalOffset,c=o.length-1;if(e)0>t?t=o[0]:t>c?t=o[c]:(c=ve(t),a=t-c);else for(;c--;)if(r=l*c+h,t>=r){s=l*(c+1)+h,a=(t-r)/(s-r);break}i=a!==N&&o[c]!==N?o[c]+(a?a*(o[c+1]-o[c]):0):t}else i=t;return i},getExtendedPositions:function(){var t,e,i=this,n=i.chart,o=i.series[0].currentDataGrouping,r=i.ordinalIndex,s=o?o.count+o.unitName:"raw",a=i.getExtremes();return r||(r=i.ordinalIndex={}),r[s]||(t={series:[],getExtremes:function(){return{min:a.dataMin,max:a.dataMax}},options:{ordinal:!0},val2lin:Bi.prototype.val2lin},di(i.series,function(i){e={xAxis:t,xData:i.xData,chart:n,destroyGroupedData:Ye},e.options={dataGrouping:o?{enabled:!0,forced:!0,approximation:"open",units:[[o.unitName,[o.count]]]}:{enabled:!1}},i.processData.apply(e),t.series.push(e)}),i.beforeSetTickPositions.apply(t),r[s]=t.ordinalPositions),r[s]},getGroupIntervalFactor:function(t,e,i){var n,o,r=i.processedXData,s=r.length,a=[],l=this.groupIntervalFactor;if(!l){for(n=0;s-1>n;n++)a[n]=r[n+1]-r[n];a.sort(function(t,e){return t-e}),o=a[ve(s/2)],t=ke(t,r[0]),e=we(e,r[s-1]),this.groupIntervalFactor=l=s*o/(e-t)}return l},postProcessTickInterval:function(t){var e,i=this.ordinalSlope;return e=i?this.options.breaks?this.closestPointRange:t/(i/this.closestPointRange):t}}),Ai(Fi.prototype,"pan",function(t,e){var i=this,n=i.xAxis[0],o=e.chartX,r=!1;if(n.options.ordinal&&n.series.length){var s,a,l,h,c=i.mouseDownX,d=n.getExtremes(),p=d.dataMax,u=d.min,f=d.max,g=i.hoverPoints,x=n.closestPointRange,y=n.translationSlope*(n.ordinalSlope||x),v=(c-o)/y,b={ordinalPositions:n.getExtendedPositions()},k=n.lin2val,w=n.val2lin;b.ordinalPositions?Ae(v)>1&&(g&&di(g,function(t){t.setState()}),0>v?(l=b,h=n.ordinalPositions?n:b):(l=n.ordinalPositions?n:b,h=b),a=h.ordinalPositions,p>a[a.length-1]&&a.push(p),i.fixedRange=f-u,s=n.toFixedRange(null,null,k.apply(l,[w.apply(l,[u,!0])+v,!0]),k.apply(h,[w.apply(h,[f,!0])+v,!0])),s.min>=we(d.dataMin,u)&&s.max<=ke(p,f)&&n.setExtremes(s.min,s.max,!0,!1,{trigger:"pan"}),i.mouseDownX=o,m(i.container,{cursor:"move"})):r=!0}else r=!0;r&&t.apply(this,Array.prototype.slice.call(arguments,1))}),_i.prototype.gappedPath=function(){var t=this.options.gapSize,e=this.xAxis,i=this.points.slice(),n=i.length-1;if(t&&n>0)for(;n--;)i[n+1].x-i[n].x>e.closestPointRange*t&&i.splice(n+1,0,{isNull:!0});return this.getGraphPath(i)},function(t){t(ge)}(function(t){"use strict";function e(){return Array.prototype.slice.call(arguments,1)}function i(t){t.apply(this),this.drawBreaks()}var n=t.pick,o=t.wrap,r=t.each,s=t.extend,a=t.fireEvent,l=t.Axis,h=t.Series;s(l.prototype,{isInBreak:function(t,e){var i,n=t.repeat||1/0,o=t.from,r=t.to-t.from,s=e>=o?(e-o)%n:n-(o-e)%n;return i=t.inclusive?r>=s:r>s&&0!==s},isInAnyBreak:function(t,e){var i,o,r,s=this.options.breaks,a=s&&s.length;if(a){for(;a--;)this.isInBreak(s[a],t)&&(i=!0,o||(o=n(s[a].showPoints,this.isXAxis?!1:!0)));r=i&&e?i&&!o:i}return r}}),o(l.prototype,"setTickPositions",function(t){if(t.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var e,i=this,n=this.tickPositions,o=this.tickPositions.info,r=[];for(e=0;e<n.length;e++)i.isInAnyBreak(n[e])||r.push(n[e]);this.tickPositions=r,this.tickPositions.info=o}}),o(l.prototype,"init",function(t,e,i){if(i.breaks&&i.breaks.length&&(i.ordinal=!1),t.call(this,e,i),this.options.breaks){var n=this;n.isBroken=!0,this.val2lin=function(t){var e,i,o=t;for(i=0;i<n.breakArray.length;i++)if(e=n.breakArray[i],e.to<=t)o-=e.len;else{if(e.from>=t)break;if(n.isInBreak(e,t)){o-=t-e.from;break}}return o},this.lin2val=function(t){var e,i,o=t;for(i=0;i<n.breakArray.length&&(e=n.breakArray[i],!(e.from>=o));i++)e.to<o?o+=e.len:n.isInBreak(e,o)&&(o+=e.len);return o},this.setExtremes=function(t,e,i,n,o){for(;this.isInAnyBreak(t);)t-=this.closestPointRange;for(;this.isInAnyBreak(e);)e-=this.closestPointRange;l.prototype.setExtremes.call(this,t,e,i,n,o)},this.setAxisTranslation=function(t){l.prototype.setAxisTranslation.call(this,t);var e,i,o,r,s,h,c=n.options.breaks,d=[],p=[],u=0,f=n.userMin||n.min,g=n.userMax||n.max;for(s in c)o=c[s],i=o.repeat||1/0,n.isInBreak(o,f)&&(f+=o.to%i-f%i),n.isInBreak(o,g)&&(g-=g%i-o.from%i);for(s in c){for(o=c[s],r=o.from,i=o.repeat||1/0;r-i>f;)r-=i;for(;f>r;)r+=i;for(h=r;g>h;h+=i)d.push({value:h,move:"in"}),d.push({value:h+(o.to-o.from),move:"out",size:o.breakSize})}d.sort(function(t,e){var i;return i=t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),e=0,r=f;for(s in d)o=d[s],e+="in"===o.move?1:-1,1===e&&"in"===o.move&&(r=o.value),0===e&&(p.push({from:r,to:o.value,len:o.value-r-(o.size||0)}),u+=o.value-r-(o.size||0));n.breakArray=p,a(n,"afterBreaks"),n.transA*=(g-n.min)/(g-f-u),n.min=f,n.max=g}}}),o(h.prototype,"generatePoints",function(t){t.apply(this,e(arguments));var i,n,o=this,r=o.xAxis,s=o.yAxis,a=o.points,l=a.length,h=o.options.connectNulls;if(r&&s&&(r.options.breaks||s.options.breaks))for(;l--;)i=a[l],n=null===i.y&&h===!1,n||!r.isInAnyBreak(i.x,!0)&&!s.isInAnyBreak(i.y,!0)||(a.splice(l,1),this.data[l]&&this.data[l].destroyElements())}),t.Series.prototype.drawBreaks=function(){var t,e,i,o,s,l=this,h=l.points,c="Axis";r(["y","x"],function(d){t=l[d+c],e=t.breakArray||[],i=t.isXAxis?t.min:n(l.options.threshold,t.min),r(h,function(l){s=n(l["stack"+d.toUpperCase()],l[d]),r(e,function(e){o=!1,i<e.from&&s>e.to||i>e.from&&s<e.from?o="pointBreak":(i<e.from&&s>e.from&&s<e.to||i>e.from&&s>e.to&&s<e.from)&&(o="pointInBreak"),o&&a(t,o,{point:l,brk:e})})})})},o(t.seriesTypes.column.prototype,"drawPoints",i),o(t.Series.prototype,"drawPoints",i)});var on="dataGrouping",rn=_i.prototype,sn=rn.processData,an=rn.generatePoints,ln=rn.destroy,hn={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},cn={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},dn=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],pn={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i)for(e=0;i--;)e+=t[i];return e},average:function(t){var e=t.length,i=pn.sum(t);return"number"==typeof i&&e&&(i/=e),i},open:function(t){return t.length?t[0]:t.hasNulls?null:N},high:function(t){return t.length?M(t):t.hasNulls?null:N},low:function(t){return t.length?C(t):t.hasNulls?null:N},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:N},ohlc:function(t,e,i,n){return t=pn.open(t),e=pn.high(e),i=pn.low(i),n=pn.close(n),"number"==typeof t||"number"==typeof e||"number"==typeof i||"number"==typeof n?[t,e,i,n]:void 0},range:function(t,e){return t=pn.low(t),e=pn.high(e),"number"==typeof t||"number"==typeof e?[t,e]:void 0}};rn.groupData=function(t,e,i,n){var o,r,s,a,l=this,h=l.data,c=l.options.data,d=[],p=[],u=t.length,f=!!e,g=[[],[],[],[]],m="function"==typeof n?n:pn[n],x=l.pointArrayMap,y=x&&x.length;for(a=0;u>=a&&!(t[a]>=i[0]);a++);for(a;u>=a;a++){for(;(i[1]!==N&&t[a]>=i[1]||a===u)&&(o=i.shift(),s=m.apply(0,g),s!==N&&(d.push(o),p.push(s)),g[0]=[],g[1]=[],g[2]=[],g[3]=[],a!==u););if(a===u)break;if(x){var v,b,k=l.cropStart+a,w=h&&h[k]||l.pointClass.prototype.applyOptions.apply({series:l},[c[k]]);for(v=0;y>v;v++)b=w[x[v]],"number"==typeof b?g[v].push(b):null===b&&(g[v].hasNulls=!0)}else r=f?e[a]:null,"number"==typeof r?g[0].push(r):null===r&&(g[0].hasNulls=!0)}return[d,p]},rn.processData=function(){var t,e,i=this,n=i.chart,o=i.options,r=o[on],s=i.allowDG!==!1&&r&&wi(r.enabled,n.options._stock);if(i.forceCrop=s,i.groupPixelWidth=null,i.hasProcessed=!0,e=sn.apply(i,arguments)===!1||!s,!e){i.destroyGroupedData();var a,l=i.processedXData,h=i.processedYData,c=n.plotSizeX,d=i.xAxis,u=d.options.ordinal,f=i.groupPixelWidth=d.getGroupPixelWidth&&d.getGroupPixelWidth();if(f){t=!0,i.points=null;var g=d.getExtremes(),m=g.min,x=g.max,y=u&&d.getGroupIntervalFactor(m,x,i)||1,v=f*(x-m)/c*y,b=d.getTimeTicks(d.normalizeTimeTickInterval(v,r.units||dn),Math.min(m,l[0]),Math.max(x,l[l.length-1]),d.options.startOfWeek,l,i.closestPointRange),k=rn.groupData.apply(i,[l,h,b,r.approximation]),w=k[0],A=k[1];if(r.smoothed){for(a=w.length-1,w[a]=Math.min(w[a],x);a--&&a>0;)w[a]+=v/2;w[0]=Math.max(w[0],m)}i.currentDataGrouping=b.info,i.closestPointRange=b.info.totalRange,p(w[0])&&w[0]<d.dataMin&&(d.min===d.dataMin&&(d.min=w[0]),d.dataMin=w[0]),i.processedXData=w,i.processedYData=A}else i.currentDataGrouping=null;i.hasGroupedData=t}},rn.destroyGroupedData=function(){var t=this.groupedData;di(t||[],function(e,i){e&&(t[i]=e.destroy?e.destroy():null)}),this.groupedData=null},rn.generatePoints=function(){an.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},Ai(Oi.prototype,"tooltipFooterHeaderFormatter",function(t,e,i){var n,o,r,s,a,h=this,c=e.series,d=c.options,p=c.tooltipOptions,u=d.dataGrouping,f=p.xDateFormat,g=c.xAxis;return g&&"datetime"===g.options.type&&u&&l(e.key)?(o=c.currentDataGrouping,r=u.dateTimeLabelFormats,o?(s=r[o.unitName],1===o.count?f=s[0]:(f=s[1],n=s[2])):!f&&r&&(f=h.getXDateFormat(e,p,g)),a=Z(f,e.key),n&&(a+=Z(n,e.key+o.totalRange-1)),A(p[(i?"footer":"header")+"Format"],{point:ki(e,{key:a}),series:c})):t.call(h,e,i)}),rn.destroy=function(){for(var t=this,e=t.groupedData||[],i=e.length;i--;)e[i]&&e[i].destroy();ln.apply(t)},Ai(rn,"setOptions",function(t,e){var i=t.call(this,e),o=this.type,r=this.chart.options.plotOptions,s=Si[o].dataGrouping;return cn[o]&&(s||(s=n(hn,cn[o])),i.dataGrouping=n(s,r.series&&r.series.dataGrouping,r[o].dataGrouping,e.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),i}),Ai(Bi.prototype,"setScale",function(t){t.call(this),di(this.series,function(t){t.hasProcessed=!1})}),Bi.prototype.getGroupPixelWidth=function(){var t,e,i,n=this.series,o=n.length,r=0,s=!1;for(t=o;t--;)i=n[t].options.dataGrouping,i&&(r=ke(r,i.groupPixelWidth));for(t=o;t--;)i=n[t].options.dataGrouping,i&&n[t].hasProcessed&&(e=(n[t].processedXData||n[t].data).length,(n[t].groupPixelWidth||e>this.chart.plotSizeX/r||e&&i.forced)&&(s=!0));return s?r:0},Bi.prototype.setDataGrouping=function(t,e){var i;if(e=wi(e,!0),t||(t={forced:!1,units:null}),this instanceof Bi)for(i=this.series.length;i--;)this.series[i].update({dataGrouping:t},!1);else di(this.chart.options.series,function(e){e.dataGrouping=t},!1);e&&this.chart.redraw()},Si.ohlc=n(Si.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var un=y(li.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){li.column.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,o=e.upColor||t.color,r=n(t.pointAttr),s=t.upColorProp;r[""][s]=o,r.hover[s]=i.hover.upColor||o,r.select[s]=i.select.upColor||o,di(t.points,function(t){t.open<t.close&&!t.options.color&&(t.pointAttr=r)})},translate:function(){var t=this,e=t.yAxis;li.column.prototype.translate.apply(t),di(t.points,function(t){null!==t.open&&(t.plotOpen=e.translate(t.open,0,1,0,1)),null!==t.close&&(t.plotClose=e.translate(t.close,0,1,0,1))})},drawPoints:function(){var t,e,i,n,o,r,s,a,l=this,h=l.points,c=l.chart;di(h,function(h){h.plotY!==N&&(s=h.graphic,t=h.pointAttr[h.selected?"selected":""]||l.pointAttr[ni],n=t["stroke-width"]%2/2,a=ye(h.plotX)-n,o=ye(h.shapeArgs.width/2),r=["M",a,ye(h.yBottom),"L",a,ye(h.plotY)],null!==h.open&&(e=ye(h.plotOpen)+n,r.push("M",a,e,"L",a-o,e)),null!==h.close&&(i=ye(h.plotClose)+n,r.push("M",a,i,"L",a+o,i)),s?s.attr(t).animate({d:r}):h.graphic=c.renderer.path(r).attr(t).add(l.group))})},animate:null});li.ohlc=un,Si.candlestick=n(Si.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:Si.ohlc.tooltip,threshold:null,upColor:"white"});var fn=y(un,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){li.ohlc.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,o=e.upLineColor||e.lineColor,r=i.hover.upLineColor||o,s=i.select.upLineColor||o;di(t.points,function(t){t.open<t.close&&(t.lineColor&&(t.pointAttr=n(t.pointAttr),o=t.lineColor),t.pointAttr[""].stroke=o,t.pointAttr.hover.stroke=r,t.pointAttr.select.stroke=s)})},drawPoints:function(){var t,e,i,n,o,r,s,a,l,h,c,d,p=this,u=p.points,f=p.chart,g=p.pointAttr[""];di(u,function(u){h=u.graphic,u.plotY!==N&&(t=u.pointAttr[u.selected?"selected":""]||g,a=t["stroke-width"]%2/2,l=ye(u.plotX)-a,e=u.plotOpen,i=u.plotClose,n=xe.min(e,i),o=xe.max(e,i),d=ye(u.shapeArgs.width/2),r=ye(n)!==ye(u.plotY),s=o!==u.yBottom,n=ye(n)+a,o=ye(o)+a,c=["M",l-d,o,"L",l-d,n,"L",l+d,n,"L",l+d,o,"Z","M",l,n,"L",l,r?ye(u.plotY):n,"M",l,o,"L",l,s?ye(u.yBottom):o],h?h.attr(t).animate({d:c}):u.graphic=f.renderer.path(c).attr(t).add(p.group).shadow(p.options.shadow))})}});li.candlestick=fn;var gn=Pi.prototype.symbols;Si.flags=n(Si.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),li.flags=y(li.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:_i.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){li.column.prototype.translate.apply(this);var t,e,i,n,o,r,s=this,a=s.options,l=s.chart,h=s.points,c=h.length-1,d=a.onSeries,p=d&&l.get(d),u=a.onKey||"y",f=p&&p.options.step,g=p&&p.points,m=g&&g.length,x=s.xAxis,y=x.getExtremes();if(p&&p.visible&&m)for(r=p.currentDataGrouping,n=g[m-1].x+(r?r.totalRange:0),h.sort(function(t,e){return t.x-e.x}),u="plot"+u[0].toUpperCase()+u.substr(1);m--&&h[c]&&(t=h[c],i=g[m],!(i.x<=t.x&&void 0!==i[u]&&(t.x<=n&&(t.plotY=i[u],i.x<t.x&&!f&&(o=g[m+1],o&&o[u]!==N&&(t.plotY+=(t.x-i.x)/(o.x-i.x)*(o[u]-i[u])))),c--,m++,0>c))););di(h,function(t,i){var n;t.plotY===N&&(t.x>=y.min&&t.x<=y.max?t.plotY=l.chartHeight-x.bottom-(x.opposite?x.height:0)+x.offset-l.plotTop:t.shapeArgs={}),e=h[i-1],e&&e.plotX===t.plotX&&(e.stackIndex===N&&(e.stackIndex=0),n=e.stackIndex+1),t.stackIndex=n})},drawPoints:function(){var t,e,i,o,r,s,a,l,h,c,d,p=this,u=p.pointAttr[""],f=p.points,g=p.chart,m=g.renderer,x=p.options,y=x.y;for(r=f.length;r--;)s=f[r],d=s.plotX>p.xAxis.len,e=s.plotX,e>0&&(e-=wi(s.lineWidth,x.lineWidth)%2),l=s.stackIndex,o=s.options.shape||x.shape,i=s.plotY,i!==N&&(i=s.plotY+y-(l!==N&&l*x.stackDistance)),h=l?N:s.plotX,c=l?N:s.plotY,a=s.graphic,i!==N&&e>=0&&!d?(t=s.pointAttr[s.selected?"select":""]||u,a?a.attr({x:e,y:i,r:t.r,anchorX:h,anchorY:c}):a=s.graphic=m.label(s.options.title||x.title||"A",e,i,o,h,c,x.useHTML).css(n(x.style,s.style)).attr(t).attr({align:"flag"===o?"left":"center",width:x.width,height:x.height}).add(p.markerGroup).shadow(x.shadow),s.tooltipPos=[e,i]):a&&(s.graphic=a.destroy())},drawTracker:function(){var t=this,e=t.points;nn.drawTrackerPoint.apply(this),di(e,function(t){var i=t.graphic;i&&gi(i.element,"mouseover",function(){t.stackIndex>0&&!t.raised&&(t._y=i.y,i.attr({y:t._y-8}),t.raised=!0),di(e,function(e){e!==t&&e.raised&&e.graphic&&(e.graphic.attr({y:e._y}),e.raised=!1)})})})},animate:Ye,buildKDTree:Ye,setClip:Ye}),gn.flag=function(t,e,i,n,o){var r=o&&o.anchorX||t,s=o&&o.anchorY||e;return["M",r,s,"L",t,e+n,t,e,t+i,e,t+i,e+n,t,e+n,"Z"]},di(["circle","square"],function(t){gn[t+"pin"]=function(e,i,n,o,r){var s,a,l=r&&r.anchorX,h=r&&r.anchorY;return"circle"===t&&o>n&&(e-=ye((o-n)/2),n=o),s=gn[t](e,i,n,o),l&&h&&(a=i>h?i:i+o,s.push("M",l,a,"L",l,h)),s}}),V===ge.VMLRenderer&&di(["flag","circlepin","squarepin"],function(t){Ci.prototype.symbols[t]=gn[t]});var mn,xn=[].concat(dn),yn=function(t){var e=pi(arguments,function(t){return"number"==typeof t});return e.length?Math[t].apply(0,e):void 0};xn[4]=["day",[1,2,3,4]],xn[5]=["week",[1,2,3]],mn=li.areaspline===N?"line":"areaspline",ki(j,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:mn,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:xn},dataLabels:{enabled:!1,zIndex:2},id:qe+"navigator-series",lineColor:null,lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:ze?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Re&&!ze}}),Y.prototype={drawHandle:function(t,e){var i,n=this,o=n.chart,r=o.renderer,s=n.elementsToDestroy,a=n.handles,l=n.navigatorOptions.handles,h={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":1};n.rendered||(a[e]=r.g("navigator-handle-"+["left","right"][e]).css({cursor:"ew-resize"}).attr({zIndex:10-e}).add(),i=r.rect(-4.5,0,9,16,0,1).attr(h).add(a[e]),s.push(i),i=r.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(h).add(a[e]),s.push(i)),a[e][o.isResizing?"animate":"attr"]({translateX:n.scrollerLeft+n.scrollbarHeight+parseInt(t,10),translateY:n.top+n.height/2-8})},drawScrollbarButton:function(t){var e,i=this,n=i.chart,o=n.renderer,r=i.elementsToDestroy,s=i.scrollbarButtons,a=i.scrollbarHeight,l=i.scrollbarOptions;i.rendered||(s[t]=o.g().add(i.scrollbarGroup),e=o.rect(-.5,-.5,a+1,a+1,l.buttonBorderRadius,l.buttonBorderWidth).attr({stroke:l.buttonBorderColor,"stroke-width":l.buttonBorderWidth,fill:l.buttonBackgroundColor}).add(s[t]),r.push(e),e=o.path(["M",a/2+(t?-1:1),a/2-3,"L",a/2+(t?-1:1),a/2+3,a/2+(t?2:-2),a/2]).attr({fill:l.buttonArrowColor}).add(s[t]),r.push(e)),t&&s[t].attr({translateX:i.scrollerWidth-a})},render:function(t,e,i,n){var o,r,s,a,l,h,c,d,u,f,g,m,x,y=this,v=y.chart,b=v.renderer,k=y.scrollbarGroup,w=y.navigatorGroup,A=y.scrollbar,S=y.xAxis,T=y.scrollbarTrack,P=y.scrollbarHeight,C=y.scrollbarEnabled,M=y.navigatorOptions,L=y.scrollbarOptions,D=L.minWidth,I=y.height,B=y.top,O=y.navigatorEnabled,z=M.outlineWidth,E=z/2,R=0,W=y.outlineHeight,H=L.barBorderRadius,X=L.barBorderWidth,G=B+E;!p(t)||isNaN(t)||y.hasDragged&&!p(i)||(y.navigatorLeft=o=wi(S.left,v.plotLeft+P),y.navigatorWidth=r=wi(S.len,v.plotWidth-2*P),y.scrollerLeft=s=o-P,y.scrollerWidth=a=a=r+2*P,S.getExtremes&&(x=y.getUnionExtremes(!0),!x||x.dataMin===S.min&&x.dataMax===S.max||S.setExtremes(x.dataMin,x.dataMax,!0,!1)),i=wi(i,S.translate(t)),n=wi(n,S.translate(e)),(isNaN(i)||1/0===Ae(i))&&(i=0,n=a),S.translate(n,!0)-S.translate(i,!0)<v.xAxis[0].minRange||(y.zoomedMax=we(ke(i,n,0),r),y.zoomedMin=ke(y.fixedWidth?y.zoomedMax-y.fixedWidth:we(i,n),0),y.range=y.zoomedMax-y.zoomedMin,h=ye(y.zoomedMax),l=ye(y.zoomedMin),c=h-l,y.rendered||(O&&(y.navigatorGroup=w=b.g("navigator").attr({zIndex:3}).add(),y.leftShade=b.rect().attr({fill:M.maskFill}).add(w),M.maskInside?y.leftShade.css({cursor:"ew-resize"}):y.rightShade=b.rect().attr({fill:M.maskFill}).add(w),y.outline=b.path().attr({"stroke-width":z,stroke:M.outlineColor}).add(w)),C&&(y.scrollbarGroup=k=b.g("scrollbar").add(),f=L.trackBorderWidth,y.scrollbarTrack=T=b.rect().attr({x:0,y:-f%2/2,fill:L.trackBackgroundColor,stroke:L.trackBorderColor,"stroke-width":f,r:L.trackBorderRadius||0,height:P}).add(k),y.scrollbar=A=b.rect().attr({y:-X%2/2,height:P,fill:L.barBackgroundColor,stroke:L.barBorderColor,"stroke-width":X,r:H}).add(k),y.scrollbarRifles=b.path().attr({stroke:L.rifleColor,"stroke-width":1}).add(k))),m=v.isResizing?"animate":"attr",O&&(y.leftShade[m](M.maskInside?{x:o+l,y:B,width:h-l,height:I}:{x:o,y:B,width:l,height:I}),y.rightShade&&y.rightShade[m]({x:o+h,y:B,width:r-h,height:I}),y.outline[m]({d:[ti,s,G,ei,o+l-E,G,o+l-E,G+W,ei,o+h-E,G+W,ei,o+h-E,G,s+a,G].concat(M.maskInside?[ti,o+l+E,G,ei,o+h-E,G]:[])}),y.drawHandle(l+E,0),y.drawHandle(h+E,1)),C&&k&&(y.drawScrollbarButton(0),y.drawScrollbarButton(1),k[m]({translateX:s,translateY:ye(G+I)}),T[m]({width:a}),d=P+l,u=c-X,D>u&&(R=(D-u)/2,u=D,d-=R),y.scrollbarPad=R,A[m]({x:ve(d)+X%2/2,width:u}),g=P+l+c/2-.5,y.scrollbarRifles.attr({visibility:c>12?$e:Ke})[m]({d:[ti,g-3,P/4,ei,g-3,2*P/3,ti,g,P/4,ei,g,2*P/3,ti,g+3,P/4,ei,g+3,2*P/3]})),y.scrollbarPad=R,y.rendered=!0))},addEvents:function(){var t,e=this.chart.container,i=this.mouseDownHandler,n=this.mouseMoveHandler,o=this.mouseUpHandler;t=[[e,"mousedown",i],[e,"mousemove",n],[me,"mouseup",o]],_&&t.push([e,"touchstart",i],[e,"touchmove",n],[me,"touchend",o]),di(t,function(t){gi.apply(null,t)}),this._events=t},removeEvents:function(){di(this._events,function(t){mi.apply(null,t)}),this._events=N,this.navigatorEnabled&&this.baseSeries&&mi(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var t,e,i,o=this,r=o.chart,s=o.scrollbarHeight,a=o.navigatorOptions,l=o.height,h=o.top,c=o.baseSeries;
o.mouseDownHandler=function(e){e=r.pointer.normalize(e);var n,s,a,h,c=o.zoomedMin,d=o.zoomedMax,p=o.top,u=o.scrollbarHeight,f=o.scrollerLeft,g=o.scrollerWidth,m=o.navigatorLeft,x=o.navigatorWidth,y=o.scrollbarPad,v=o.range,b=e.chartX,k=e.chartY,w=r.xAxis[0],A=ze?10:7;k>p&&p+l+u>k&&(h=!o.scrollbarEnabled||p+l>k,h&&xe.abs(b-c-m)<A?(o.grabbedLeft=!0,o.otherHandlePos=d,o.fixedExtreme=w.max,r.fixedRange=null):h&&xe.abs(b-d-m)<A?(o.grabbedRight=!0,o.otherHandlePos=c,o.fixedExtreme=w.min,r.fixedRange=null):b>m+c-y&&m+d+y>b?(o.grabbedCenter=b,o.fixedWidth=v,i=b-c):b>f&&f+g>b&&(a=h?b-m-v/2:m>b?c-.2*v:b>f+g-u?c+.2*v:m+c>b?c-v:d,0>a?a=0:a+v>=x&&(a=x-v,n=o.getUnionExtremes().dataMax),a!==c&&(o.fixedWidth=v,s=t.toFixedRange(a,a+v,null,n),w.setExtremes(s.min,s.max,!0,!1,{trigger:"navigator"}))))},o.mouseMoveHandler=function(t){var e,n,s=o.scrollbarHeight,a=o.navigatorLeft,l=o.navigatorWidth,h=o.scrollerLeft,c=o.scrollerWidth,d=o.range;t.touches&&0===t.touches[0].pageX||(t=r.pointer.normalize(t),e=t.chartX,a>e?e=a:e>h+c-s&&(e=h+c-s),o.grabbedLeft?(n=!0,o.render(0,0,e-a,o.otherHandlePos)):o.grabbedRight?(n=!0,o.render(0,0,o.otherHandlePos,e-a)):o.grabbedCenter&&(n=!0,i>e?e=i:e>l+i-d&&(e=l+i-d),o.render(0,0,e-i,e-i+d)),n&&o.scrollbarOptions.liveRedraw&&setTimeout(function(){o.mouseUpHandler(t)},0),o.hasDragged=n)},o.mouseUpHandler=function(e){var n,s,a;o.hasDragged&&(o.zoomedMin===o.otherHandlePos?s=o.fixedExtreme:o.zoomedMax===o.otherHandlePos&&(a=o.fixedExtreme),o.zoomedMax===o.navigatorWidth&&(a=o.getUnionExtremes().dataMax),n=t.toFixedRange(o.zoomedMin,o.zoomedMax,s,a),p(n.min)&&r.xAxis[0].setExtremes(n.min,n.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:e})),"mousemove"!==e.type&&(o.grabbedLeft=o.grabbedRight=o.grabbedCenter=o.fixedWidth=o.fixedExtreme=o.otherHandlePos=o.hasDragged=i=null)};var d=r.xAxis.length,u=r.yAxis.length;r.extraBottomMargin=o.outlineHeight+a.margin,o.navigatorEnabled?(o.xAxis=t=new Bi(r,n({breaks:c&&c.xAxis.options.breaks,ordinal:c&&c.xAxis.options.ordinal},a.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:d,height:l,offset:0,offsetLeft:s,offsetRight:-s,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),o.yAxis=e=new Bi(r,n(a.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:l,offset:0,index:u,zoomEnabled:!1})),c||a.series.data?o.addBaseSeries():0===r.series.length&&Ai(r,"redraw",function(t,e){r.series.length>0&&!o.series&&(o.setBaseSeries(),r.redraw=t),t.call(r,e)})):o.xAxis=t={translate:function(t,e){var i=r.xAxis[0],n=i.getExtremes(),o=r.plotWidth-2*s,a=yn("min",i.options.min,n.dataMin),l=yn("max",i.options.max,n.dataMax)-a;return e?t*l/o+a:o*(t-a)/l},toFixedRange:Bi.prototype.toFixedRange},Ai(r,"getMargins",function(i){var n=this.legend,r=n.options;i.apply(this,[].slice.call(arguments,1)),o.top=h=o.navigatorOptions.top||this.chartHeight-o.height-o.scrollbarHeight-this.spacing[2]-("bottom"===r.verticalAlign&&r.enabled&&!r.floating?n.legendHeight+wi(r.margin,10):0),t&&e&&(t.options.top=e.options.top=h,t.setAxisSize(),e.setAxisSize())}),o.addEvents()},getUnionExtremes:function(t){var e,i=this.chart.xAxis[0],n=this.xAxis,o=n.options,r=i.options;return t&&null===i.dataMin||(e={dataMin:wi(o&&o.min,yn("min",r.min,i.dataMin,n.dataMin)),dataMax:wi(o&&o.max,yn("max",r.max,i.dataMax,n.dataMax))}),e},setBaseSeries:function(t){var e=this.chart;t=t||e.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var t,e,i=this.baseSeries,o=i?i.options:{},r=o.data,s=this.navigatorOptions.series;e=s.data,this.hasNavigatorData=!!e,t=n(o,s,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,stacking:!1,isInternal:!0,visible:!0}),t.data=e||r.slice(0),this.series=this.chart.initSeries(t),i&&this.navigatorOptions.adaptToUpdatedData!==!1&&(gi(i,"updatedData",this.updatedDataHandler),i.userOptions.events=ki(i.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var t,e,i,n,o,r=this.chart.scroller,s=r.baseSeries,a=s.xAxis,l=a.getExtremes(),h=l.min,c=l.max,d=l.dataMin,p=l.dataMax,u=c-h,f=r.series,g=f.xData,m=!!a.setExtremes;e=c>=g[g.length-1]-(this.closestPointRange||0),t=d>=h,r.hasNavigatorData||(f.options.pointStart=s.xData[0],f.setData(s.options.data,!1),o=!0),t&&(n=d,i=n+u),e&&(i=p,t||(n=ke(i-u,f.xData[0]))),m&&(t||e)?isNaN(n)||a.setExtremes(n,i,!0,!1,{trigger:"updatedData"}):(o&&this.chart.redraw(!1),r.render(ke(h,d),we(c,p)))},destroy:function(){var t=this;t.removeEvents(),di([t.xAxis,t.yAxis,t.leftShade,t.rightShade,t.outline,t.scrollbarTrack,t.scrollbarRifles,t.scrollbarGroup,t.scrollbar],function(t){t&&t.destroy&&t.destroy()}),t.xAxis=t.yAxis=t.leftShade=t.rightShade=t.outline=t.scrollbarTrack=t.scrollbarRifles=t.scrollbarGroup=t.scrollbar=null,di([t.scrollbarButtons,t.handles,t.elementsToDestroy],function(t){L(t)})}},ge.Scroller=Y,Ai(Bi.prototype,"zoom",function(t,e,i){var n,o,r=this.chart,s=r.options,a=s.chart.zoomType,l=s.navigator,h=s.rangeSelector;return this.isXAxis&&(l&&l.enabled||h&&h.enabled)&&("x"===a?r.resetZoomButton="blocked":"y"===a?o=!1:"xy"===a&&(n=this.previousZoom,p(e)?this.previousZoom=[this.min,this.max]:n&&(e=n[0],i=n[1],delete this.previousZoom))),o!==N?o:t.call(this,e,i)}),Ai(Fi.prototype,"init",function(t,e,i){gi(this,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new Y(this))}),t.call(this,e,i)}),Ai(_i.prototype,"addPoint",function(t,i,n,o,r){var l=this.options.turboThreshold;l&&this.xData.length>l&&s(i)&&!a(i)&&this.chart.scroller&&e(20,!0),t.call(this,i,n,o,r)}),ki(j,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},height:35,inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),j.lang=n(j.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),F.prototype={clickButton:function(t,e){var i,n,o,r,s,a,l,h,c=this,d=c.selected,p=c.chart,u=c.buttons,f=c.buttonOptions[t],g=p.xAxis[0],m=p.scroller&&p.scroller.getUnionExtremes()||g||{},x=m.dataMin,y=m.dataMax,v=g&&ye(we(g.max,wi(y,g.max))),b=f.type,k=f._range,w=f.dataGrouping;if(null!==x&&null!==y&&t!==c.selected){if(p.fixedRange=k,w&&(this.forcedDataGrouping=!0,Bi.prototype.setDataGrouping.call(g||{chart:this.chart},w,!1)),"month"===b||"year"===b)g?(h={range:f,max:v,dataMin:x,dataMax:y},i=g.minFromRange.call(h),"number"==typeof h.newMax&&(v=h.newMax)):k=f;else if(k)i=ke(v-k,x),v=we(i+k,y);else if("ytd"===b){if(!g)return void gi(p,"beforeRender",function(){c.clickButton(t)});y===N&&(x=Number.MAX_VALUE,y=Number.MIN_VALUE,di(p.series,function(t){var e=t.xData;x=we(e[0],x),y=ke(e[e.length-1],y)}),e=!1),n=new J(y),s=n.getFullYear(),i=r=ke(x||0,J.UTC(s,0,1)),n=n.getTime(),v=we(y||n,n)}else"all"===b&&g&&(i=x,v=y);u[d]&&u[d].setState(0),u[t]&&(u[t].setState(2),c.lastSelected=t),g?(g.setExtremes(i,v,wi(e,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:f}),c.setSelected(t)):(o=p.options.xAxis[0],l=o.range,o.range=k,a=o.min,o.min=r,c.setSelected(t),gi(p,"load",function(){o.range=l,o.min=a}))}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,i=t.options.rangeSelector,n=i.buttons||[].concat(e.defaultButtons),o=i.selected,r=e.blurInputs=function(){var t=e.minInput,i=e.maxInput;t&&t.blur&&xi(t,"blur"),i&&i.blur&&xi(i,"blur")};e.chart=t,e.options=i,e.buttons=[],t.extraTopMargin=i.height,e.buttonOptions=n,gi(t.container,"mousedown",r),gi(t,"resize",r),di(n,e.computeButtonRange),o!==N&&n[o]&&this.clickButton(o,!1),gi(t,"load",function(){gi(t.xAxis[0],"setExtremes",function(i){this.max-this.min!==t.fixedRange&&"rangeSelectorButton"!==i.trigger&&"updatedData"!==i.trigger&&e.forcedDataGrouping&&this.setDataGrouping(!1,!1)}),gi(t.xAxis[0],"afterSetExtremes",function(){e.updateButtonStates(!0)})})},updateButtonStates:function(t){var e=this,i=this.chart,n=i.xAxis[0],o=i.scroller&&i.scroller.getUnionExtremes()||n,r=o.dataMin,s=o.dataMax,a=e.selected,l=e.options.allButtonsEnabled,h=e.buttons;t&&i.fixedRange!==ye(n.max-n.min)&&(h[a]&&h[a].setState(0),e.setSelected(null)),di(e.buttonOptions,function(t,o){var c=ye(n.max-n.min),d=t._range,p=t.type,u=t.count||1,f=d>s-r,g=d<n.minRange,m="all"===t.type&&n.max-n.min>=s-r&&2!==h[o].state,x="ytd"===t.type&&Z("%Y",r)===Z("%Y",s),y=i.renderer.forExport&&o===a,v=d===c,b=!n.hasVisibleSeries;("month"===p||"year"===p)&&c>=24*{month:28,year:365}[p]*36e5*u&&c<=24*{month:31,year:366}[p]*36e5*u&&(v=!0),y||v&&o!==a&&o===e.lastSelected?(e.setSelected(o),h[o].setState(2)):!l&&(f||g||m||x||b)?h[o].setState(3):3===h[o].state&&h[o].setState(0)})},computeButtonRange:function(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:("month"===e||"year"===e)&&(t._range=24*{month:30,year:365}[e]*36e5*i)},setInputValue:function(t,e){var i=this.chart.options.rangeSelector;p(e)&&(this[t+"Input"].HCTime=e),this[t+"Input"].value=Z(i.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime),this[t+"DateBox"].attr({text:Z(i.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},showInput:function(t){var e=this.inputGroup,i=this[t+"DateBox"];m(this[t+"Input"],{left:e.translateX+i.x+Je,top:e.translateY+Je,width:i.width-2+Je,height:i.height-2+Je,border:"2px solid silver"})},hideInput:function(t){m(this[t+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(t)},drawInput:function(t){var e,i,r,s=this,a=s.chart,l=a.renderer.style,h=a.renderer,c=a.options.rangeSelector,d=j.lang,p=s.div,u="min"===t,f=this.inputGroup;this[t+"Label"]=i=h.label(d[u?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(n(l,c.labelStyle)).add(f),f.offset+=i.width+5,this[t+"DateBox"]=r=h.label("",f.offset).attr({padding:2,width:c.inputBoxWidth||90,height:c.inputBoxHeight||17,stroke:c.inputBoxBorderColor||"silver","stroke-width":1}).css(n({textAlign:"center",color:"#444"},l,c.inputStyle)).on("click",function(){s.showInput(t),s[t+"Input"].focus()}).add(f),f.offset+=r.width+(u?10:0),this[t+"Input"]=e=x("input",{name:t,className:qe+"range-selector",type:"text"},ki({position:je,border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:l.fontSize,fontFamily:l.fontFamily,left:"-9em",top:a.plotTop+Je},c.inputStyle),p),e.onfocus=function(){s.showInput(t)},e.onblur=function(){s.hideInput(t)},e.onchange=function(){var t=e.value,i=(c.inputDateParser||J.parse)(t),n=a.xAxis[0],r=n.dataMin,l=n.dataMax;isNaN(i)&&(i=t.split("-"),i=J.UTC(o(i[0]),o(i[1])-1,o(i[2]))),isNaN(i)||(j.global.useUTC||(i+=60*(new J).getTimezoneOffset()*1e3),u?i>s.maxInput.HCTime?i=N:r>i&&(i=r):i<s.minInput.HCTime?i=N:i>l&&(i=l),i!==N&&a.xAxis[0].setExtremes(u?i:n.min,u?n.max:i,N,N,{trigger:"rangeSelectorInput"}))}},getPosition:function(){var t=this.chart,e=t.options.rangeSelector,i=wi((e.buttonPosition||{}).y,t.plotTop-t.axisOffset[0]-e.height);return{buttonTop:i,inputTop:i-10}},render:function(t,e){var i,n,o=this,r=o.chart,s=r.renderer,a=r.container,l=r.options,h=l.exporting&&l.navigation&&l.navigation.buttonOptions,c=l.rangeSelector,d=o.buttons,u=j.lang,f=o.div,g=o.inputGroup,m=c.buttonTheme,y=c.buttonPosition||{},v=c.inputEnabled,b=m&&m.states,k=r.plotLeft,w=this.getPosition(),A=o.group,S=o.rendered;S||(o.group=A=s.g("range-selector-buttons").add(),o.zoomText=s.text(u.rangeSelectorZoom,wi(y.x,k),15).css(c.labelStyle).add(A),i=wi(y.x,k)+o.zoomText.getBBox().width+5,di(o.buttonOptions,function(t,e){d[e]=s.button(t.text,i,0,function(){o.clickButton(e),o.isActive=!0},m,b&&b.hover,b&&b.select,b&&b.disabled).css({textAlign:"center"}).add(A),i+=d[e].width+wi(c.buttonSpacing,5),o.selected===e&&d[e].setState(2)}),o.updateButtonStates(),v!==!1&&(o.div=f=x("div",null,{position:"relative",height:0,zIndex:1}),a.parentNode.insertBefore(f,a),o.inputGroup=g=s.g("input-group").add(),g.offset=0,o.drawInput("min"),o.drawInput("max"))),A[S?"animate":"attr"]({translateY:w.buttonTop}),v!==!1&&(g.align(ki({y:w.inputTop,width:g.offset,x:h&&w.inputTop<(h.y||0)+h.height-r.spacing[0]?-40:0},c.inputPosition),!0,r.spacingBox),p(v)||(n=A.getBBox(),g[g.translateX<n.x+n.width+10?"hide":"show"]()),o.setInputValue("min",t),o.setInputValue("max",e)),o.rendered=!0},destroy:function(){var t,e=this.minInput,i=this.maxInput,n=this.chart,o=this.blurInputs;mi(n.container,"mousedown",o),mi(n,"resize",o),L(this.buttons),e&&(e.onfocus=e.onblur=e.onchange=null),i&&(i.onfocus=i.onblur=i.onchange=null);for(t in this)this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&D(this[t])),this[t]=null}},Bi.prototype.toFixedRange=function(t,e,i,n){var o=this.chart&&this.chart.fixedRange,r=wi(i,this.translate(t,!0)),s=wi(n,this.translate(e,!0)),a=o&&(s-r)/o;return a>.7&&1.3>a&&(n?r=s-o:s=r+o),isNaN(r)&&(r=s=void 0),{min:r,max:s}},Bi.prototype.minFromRange=function(){var t,e,i,n=this.range,o=n.type,r={month:"Month",year:"FullYear"}[o],s=this.max,a=function(t,e){var i=new J(t);return i["set"+r](i["get"+r]()+e),i.getTime()-t};return"number"==typeof n?(t=this.max-n,i=n):t=s+a(s,-n.count),e=wi(this.dataMin,Number.MIN_VALUE),isNaN(t)&&(t=e),e>=t&&(t=e,void 0===i&&(i=a(t,n.count)),this.newMax=we(t+i,this.dataMax)),isNaN(s)&&(t=void 0),t},Ai(Fi.prototype,"init",function(t,e,i){gi(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new F(this))}),t.call(this,e,i)}),ge.RangeSelector=F,Fi.prototype.callbacks.push(function(t){function e(){s=t.xAxis[0].getExtremes(),a.render(s.min,s.max)}function i(){s=t.xAxis[0].getExtremes(),isNaN(s.min)||l.render(s.min,s.max)}function n(t){"navigator-drag"!==t.triggerOp&&a.render(t.min,t.max)}function o(t){l.render(t.min,t.max)}function r(){a&&mi(t.xAxis[0],"afterSetExtremes",n),l&&(mi(t,"resize",i),mi(t.xAxis[0],"afterSetExtremes",o))}var s,a=t.scroller,l=t.rangeSelector;a&&(gi(t.xAxis[0],"afterSetExtremes",n),Ai(t,"drawChartBox",function(t){var i=this.isDirtyBox;t.call(this),i&&e()}),e()),l&&(gi(t.xAxis[0],"afterSetExtremes",o),gi(t,"resize",i),i()),gi(t,"destroy",r)}),ge.StockChart=ge.stockChart=function(t,e,i){var o,s=r(t)||t.nodeName,a=arguments[s?1:0],l=a.series,h=wi(a.navigator&&a.navigator.enabled,!0),c=h?{startOnTick:!1,endOnTick:!1}:null,d={marker:{enabled:!1,radius:2}},p={shadow:!1,borderWidth:0};return a.xAxis=fi(f(a.xAxis||{}),function(t){return n({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},c)}),a.yAxis=fi(f(a.yAxis||{}),function(t){return o=wi(t.opposite,!0),n({labels:{y:-2},opposite:o,showLastLabel:!1,title:{text:null}},t)}),a.series=null,a=n({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:d,spline:d,area:d,areaspline:d,arearange:d,areasplinerange:d,column:p,columnrange:p,candlestick:p,ohlc:p}},a,{_stock:!0,chart:{inverted:!1}}),a.series=l,s?new Fi(t,a,i):new Fi(a,e)},Ai(Ei.prototype,"init",function(t,e,i){var n=i.chart.pinchType||"";t.call(this,e,i),this.pinchX=this.pinchHor=-1!==n.indexOf("x"),this.pinchY=this.pinchVert=-1!==n.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),Ai(Bi.prototype,"autoLabelAlign",function(t){var e,i=this.chart,n=this.options,o=i._labelPanes=i._labelPanes||{},r=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&(e=n.top+","+n.height,!o[e]&&r.enabled)?(15===r.x&&(r.x=0),void 0===r.align&&(r.align="right"),o[e]=1,"right"):t.call(this,[].slice.call(arguments,1))}),Ai(Bi.prototype,"getPlotLinePath",function(t,e,i,n,o,r){var s,a,l,h,c,d,u,f=this,g=this.isLinked&&!this.series?this.linkedParent.series:this.series,m=f.chart,x=m.renderer,y=f.left,v=f.top,b=[],k=[];return"colorAxis"===f.coll?t.apply(this,[].slice.call(arguments,1)):(k=f.isXAxis?p(f.options.yAxis)?[m.yAxis[f.options.yAxis]]:fi(g,function(t){return t.yAxis}):p(f.options.xAxis)?[m.xAxis[f.options.xAxis]]:fi(g,function(t){return t.xAxis}),c=f.isXAxis?m.yAxis:m.xAxis,di(c,function(t){if(p(t.options.id)?-1===t.options.id.indexOf("navigator"):!0){var e=t.isXAxis?"yAxis":"xAxis",i=p(t.options[e])?m[e][t.options[e]]:m[e][0];f===i&&k.push(t)}}),d=k.length?[]:[f.isXAxis?m.yAxis[0]:m.xAxis[0]],di(k,function(t){-1===ci(t,d)&&d.push(t)}),u=wi(r,f.translate(e,null,null,n)),isNaN(u)||(f.horiz?di(d,function(t){var e;a=t.pos,h=a+t.len,s=l=ye(u+f.transB),(y>s||s>y+f.width)&&(o?s=l=we(ke(y,s),y+f.width):e=!0),e||b.push("M",s,a,"L",l,h)}):di(d,function(t){var e;s=t.pos,l=s+t.len,a=h=ye(v+f.height-u),(v>a||a>v+f.height)&&(o?a=h=we(ke(v,a),f.top+f.height):e=!0),e||b.push("M",s,a,"L",l,h)})),b.length>0?x.crispPolyLine(b,i||1):null)}),Bi.prototype.getPlotBandPath=function(t,e){var i,n=this.getPlotLinePath(e,null,null,!0),o=this.getPlotLinePath(t,null,null,!0),r=[];if(o&&n&&o.toString()!==n.toString())for(i=0;i<o.length;i+=6)r.push("M",o[i+1],o[i+2],"L",o[i+4],o[i+5],n[i+4],n[i+5],n[i+1],n[i+2]);else r=null;return r},Pi.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6)t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=ye(t[i+1])-e%2/2),t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=ye(t[i+2])+e%2/2);return t},V===ge.VMLRenderer&&(Ci.prototype.crispPolyLine=Pi.prototype.crispPolyLine),Ai(Bi.prototype,"hideCrosshair",function(t,e){t.call(this,e),this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}),Ai(Bi.prototype,"drawCrosshair",function(t,e,i){if(t.call(this,e,i),p(this.crosshair.label)&&this.crosshair.label.enabled){var n,o,r,s,a,l,h=this.chart,c=this.options.crosshair.label,d=this.horiz,u=this.opposite,f=this.left,g=this.top,m=this.crossLabel,x=c.format,y="",v="inside"===this.options.tickPosition,b=this.crosshair.snap!==!1;a=d?"center":u?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center",m||(m=this.crossLabel=h.renderer.label(null,null,null,c.shape||"callout").attr({align:c.align||a,zIndex:12,fill:c.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:wi(c.padding,8),stroke:c.borderColor||"","stroke-width":c.borderWidth||0,r:wi(c.borderRadius,3)}).css(ki({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},c.style)).add()),d?(n=b?i.plotX+f:e.chartX,o=g+(u?0:this.height)):(n=u?this.width+f:0,o=b?i.plotY+g:e.chartY),x||c.formatter||(this.isDatetimeAxis&&(y="%b %d, %Y"),x="{value"+(y?":"+y:"")+"}"),l=b?i[this.isXAxis?"x":"y"]:this.toValue(d?e.chartX:e.chartY),m.attr({text:x?A(x,{value:l}):c.formatter.call(this,l),anchorX:d?n:this.opposite?0:h.chartWidth,anchorY:d?this.opposite?h.chartHeight:0:o,x:n,y:o,visibility:$e}),r=m.getBBox(),d?(v&&!u||!v&&u)&&(o=m.y-r.height):o=m.y-r.height/2,s=d?{left:f-r.x,right:f+this.width-r.x}:{left:"left"===this.labelAlign?f:0,right:"right"===this.labelAlign?f+this.width:h.chartWidth},m.translateX<s.left&&(n+=s.left-m.translateX),m.translateX+r.width>=s.right&&(n-=m.translateX+r.width-s.right),m.attr({x:n,y:o,visibility:"visible"})}});var vn=rn.init,bn=rn.processData,kn=Vi.prototype.tooltipFormatter;return rn.init=function(){vn.apply(this,arguments),this.setCompare(this.options.compare)},rn.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var n=this.compareValue;return e!==N&&(e="value"===t?e-n:e=100*(e/n)-100,i&&(i.change=e)),e}:null,this.chart.hasRendered&&(this.isDirty=!0)},rn.processData=function(){var t,e,i,n,o,r=this,s=-1;if(bn.apply(this,arguments),r.xAxis&&r.processedYData)for(e=r.processedXData,i=r.processedYData,n=i.length,r.pointArrayMap&&(s=ci(r.pointValKey||"y",r.pointArrayMap)),t=0;n>t;t++)if(o=s>-1?i[t][s]:i[t],"number"==typeof o&&e[t]>=r.xAxis.min&&0!==o){r.compareValue=o;break}},Ai(rn,"getExtremes",function(t){var e;t.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(e=[this.modifyValue(this.dataMin),this.modifyValue(this.dataMax)],this.dataMin=C(e),this.dataMax=M(e))}),Bi.prototype.setCompare=function(t,e){this.isXAxis||(di(this.series,function(e){e.setCompare(t)}),wi(e,!0)&&this.chart.redraw())},Vi.prototype.tooltipFormatter=function(t){var e=this;return t=t.replace("{point.change}",(e.change>0?"+":"")+ge.numberFormat(e.change,wi(e.series.tooltipOptions.changeDecimals,2))),kn.apply(this,[t])},Ai(_i.prototype,"render",function(t){this.chart.options._stock&&this.xAxis&&(!this.clipBox&&this.animate?(this.clipBox=n(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&(vi(this.chart[this.sharedClipKey]),this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}))),t.call(this)}),ki(ge,{Color:R,Point:Vi,Tick:X,Renderer:V,SVGElement:W,SVGRenderer:Pi,arrayMin:C,arrayMax:M,charts:Fe,dateFormat:Z,error:e,format:A,pathAnim:K,getOptions:E,hasBidiBug:We,isTouchDevice:ze,setOptions:z,addEvent:gi,removeEvent:mi,createElement:x,discardElement:D,css:m,each:di,map:fi,merge:n,splat:f,stableSort:P,extendClass:y,pInt:o,svg:Re,canvas:He,vml:!Re&&!He,product:Ve,version:_e}),ge});!function(e){e.fn.touchwipe=function(t){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return t&&e.extend(n,t),this.each(function(){function e(){this.removeEventListener("touchmove",t),o=null,c=!1}function t(t){if(n.preventDefaultEvents&&t.preventDefault(),c){var i=t.touches[0].pageX,h=t.touches[0].pageY,a=o-i,s=u-h;Math.abs(a)>=n.min_move_x?(e(),a>0?n.wipeLeft(t):n.wipeRight(t)):Math.abs(s)>=n.min_move_y&&(e(),s>0?n.wipeDown(t):n.wipeUp(t))}}function i(e){1==e.touches.length&&(o=e.touches[0].pageX,u=e.touches[0].pageY,c=!0,this.addEventListener("touchmove",t,!1))}var o,u,c=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",i,!1)}),this}}(jQuery);